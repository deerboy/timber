(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+s0g":function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"\xe9\xe9n minuut",mm:"%d minuten",h:"\xe9\xe9n uur",hh:"%d uur",d:"\xe9\xe9n dag",dd:"%d dagen",M:"\xe9\xe9n maand",MM:"%d maanden",y:"\xe9\xe9n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n("wd/R"))},"+tJ4":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.closed||t.complete()}}},"//9w":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("se",{months:"o\u0111\u0111ajagem\xe1nnu_guovvam\xe1nnu_njuk\u010dam\xe1nnu_cuo\u014bom\xe1nnu_miessem\xe1nnu_geassem\xe1nnu_suoidnem\xe1nnu_borgem\xe1nnu_\u010dak\u010dam\xe1nnu_golggotm\xe1nnu_sk\xe1bmam\xe1nnu_juovlam\xe1nnu".split("_"),monthsShort:"o\u0111\u0111j_guov_njuk_cuo_mies_geas_suoi_borg_\u010dak\u010d_golg_sk\xe1b_juov".split("_"),weekdays:"sotnabeaivi_vuoss\xe1rga_ma\u014b\u014beb\xe1rga_gaskavahkku_duorastat_bearjadat_l\xe1vvardat".split("_"),weekdaysShort:"sotn_vuos_ma\u014b_gask_duor_bear_l\xe1v".split("_"),weekdaysMin:"s_v_m_g_d_b_L".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"MMMM D. [b.] YYYY",LLL:"MMMM D. [b.] YYYY [ti.] HH:mm",LLLL:"dddd, MMMM D. [b.] YYYY [ti.] HH:mm"},calendar:{sameDay:"[otne ti] LT",nextDay:"[ihttin ti] LT",nextWeek:"dddd [ti] LT",lastDay:"[ikte ti] LT",lastWeek:"[ovddit] dddd [ti] LT",sameElse:"L"},relativeTime:{future:"%s gea\u017ees",past:"ma\u014bit %s",s:"moadde sekunddat",ss:"%d sekunddat",m:"okta minuhta",mm:"%d minuhtat",h:"okta diimmu",hh:"%d diimmut",d:"okta beaivi",dd:"%d beaivvit",M:"okta m\xe1nnu",MM:"%d m\xe1nut",y:"okta jahki",yy:"%d jagit"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},"/WYv":function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,"a",function(){return r})},"/X5v":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("x-pseudo",{months:"J~\xe1\xf1\xfa\xe1~r\xfd_F~\xe9br\xfa~\xe1r\xfd_~M\xe1rc~h_\xc1p~r\xedl_~M\xe1\xfd_~J\xfa\xf1\xe9~_J\xfal~\xfd_\xc1\xfa~g\xfast~_S\xe9p~t\xe9mb~\xe9r_\xd3~ct\xf3b~\xe9r_\xd1~\xf3v\xe9m~b\xe9r_~D\xe9c\xe9~mb\xe9r".split("_"),monthsShort:"J~\xe1\xf1_~F\xe9b_~M\xe1r_~\xc1pr_~M\xe1\xfd_~J\xfa\xf1_~J\xfal_~\xc1\xfag_~S\xe9p_~\xd3ct_~\xd1\xf3v_~D\xe9c".split("_"),monthsParseExact:!0,weekdays:"S~\xfa\xf1d\xe1~\xfd_M\xf3~\xf1d\xe1\xfd~_T\xfa\xe9~sd\xe1\xfd~_W\xe9d~\xf1\xe9sd~\xe1\xfd_T~h\xfars~d\xe1\xfd_~Fr\xedd~\xe1\xfd_S~\xe1t\xfar~d\xe1\xfd".split("_"),weekdaysShort:"S~\xfa\xf1_~M\xf3\xf1_~T\xfa\xe9_~W\xe9d_~Th\xfa_~Fr\xed_~S\xe1t".split("_"),weekdaysMin:"S~\xfa_M\xf3~_T\xfa_~W\xe9_T~h_Fr~_S\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[T~\xf3d\xe1~\xfd \xe1t] LT",nextDay:"[T~\xf3m\xf3~rr\xf3~w \xe1t] LT",nextWeek:"dddd [\xe1t] LT",lastDay:"[\xdd~\xe9st~\xe9rd\xe1~\xfd \xe1t] LT",lastWeek:"[L~\xe1st] dddd [\xe1t] LT",sameElse:"L"},relativeTime:{future:"\xed~\xf1 %s",past:"%s \xe1~g\xf3",s:"\xe1 ~f\xe9w ~s\xe9c\xf3~\xf1ds",ss:"%d s~\xe9c\xf3\xf1~ds",m:"\xe1 ~m\xed\xf1~\xfat\xe9",mm:"%d m~\xed\xf1\xfa~t\xe9s",h:"\xe1~\xf1 h\xf3~\xfar",hh:"%d h~\xf3\xfars",d:"\xe1 ~d\xe1\xfd",dd:"%d d~\xe1\xfds",M:"\xe1 ~m\xf3\xf1~th",MM:"%d m~\xf3\xf1t~hs",y:"\xe1 ~\xfd\xe9\xe1r",yy:"%d \xfd~\xe9\xe1rs"},dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}()},0:function(e,t,n){e.exports=n("zUnb")},"0mo+":function(e,t,n){!function(e){"use strict";var t={1:"\u0f21",2:"\u0f22",3:"\u0f23",4:"\u0f24",5:"\u0f25",6:"\u0f26",7:"\u0f27",8:"\u0f28",9:"\u0f29",0:"\u0f20"},n={"\u0f21":"1","\u0f22":"2","\u0f23":"3","\u0f24":"4","\u0f25":"5","\u0f26":"6","\u0f27":"7","\u0f28":"8","\u0f29":"9","\u0f20":"0"};e.defineLocale("bo",{months:"\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0f44\u0f0b\u0f54\u0f7c_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f49\u0f72\u0f66\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f66\u0f74\u0f58\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f5e\u0f72\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f63\u0f94\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0fb2\u0f74\u0f42\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f51\u0f74\u0f53\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f62\u0f92\u0fb1\u0f51\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0f42\u0f74\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f42\u0f45\u0f72\u0f42\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f42\u0f49\u0f72\u0f66\u0f0b\u0f54".split("_"),monthsShort:"\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0f44\u0f0b\u0f54\u0f7c_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f49\u0f72\u0f66\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f66\u0f74\u0f58\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f5e\u0f72\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f63\u0f94\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0fb2\u0f74\u0f42\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f51\u0f74\u0f53\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f62\u0f92\u0fb1\u0f51\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f51\u0f42\u0f74\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f42\u0f45\u0f72\u0f42\u0f0b\u0f54_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f56\u0f45\u0f74\u0f0b\u0f42\u0f49\u0f72\u0f66\u0f0b\u0f54".split("_"),weekdays:"\u0f42\u0f5f\u0f60\u0f0b\u0f49\u0f72\u0f0b\u0f58\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f5f\u0fb3\u0f0b\u0f56\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f58\u0f72\u0f42\u0f0b\u0f51\u0f58\u0f62\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f63\u0fb7\u0f42\u0f0b\u0f54\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f55\u0f74\u0f62\u0f0b\u0f56\u0f74_\u0f42\u0f5f\u0f60\u0f0b\u0f54\u0f0b\u0f66\u0f44\u0f66\u0f0b_\u0f42\u0f5f\u0f60\u0f0b\u0f66\u0fa4\u0f7a\u0f53\u0f0b\u0f54\u0f0b".split("_"),weekdaysShort:"\u0f49\u0f72\u0f0b\u0f58\u0f0b_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b_\u0f58\u0f72\u0f42\u0f0b\u0f51\u0f58\u0f62\u0f0b_\u0f63\u0fb7\u0f42\u0f0b\u0f54\u0f0b_\u0f55\u0f74\u0f62\u0f0b\u0f56\u0f74_\u0f54\u0f0b\u0f66\u0f44\u0f66\u0f0b_\u0f66\u0fa4\u0f7a\u0f53\u0f0b\u0f54\u0f0b".split("_"),weekdaysMin:"\u0f49\u0f72\u0f0b\u0f58\u0f0b_\u0f5f\u0fb3\u0f0b\u0f56\u0f0b_\u0f58\u0f72\u0f42\u0f0b\u0f51\u0f58\u0f62\u0f0b_\u0f63\u0fb7\u0f42\u0f0b\u0f54\u0f0b_\u0f55\u0f74\u0f62\u0f0b\u0f56\u0f74_\u0f54\u0f0b\u0f66\u0f44\u0f66\u0f0b_\u0f66\u0fa4\u0f7a\u0f53\u0f0b\u0f54\u0f0b".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[\u0f51\u0f72\u0f0b\u0f62\u0f72\u0f44] LT",nextDay:"[\u0f66\u0f44\u0f0b\u0f49\u0f72\u0f53] LT",nextWeek:"[\u0f56\u0f51\u0f74\u0f53\u0f0b\u0f55\u0fb2\u0f42\u0f0b\u0f62\u0f97\u0f7a\u0f66\u0f0b\u0f58], LT",lastDay:"[\u0f41\u0f0b\u0f66\u0f44] LT",lastWeek:"[\u0f56\u0f51\u0f74\u0f53\u0f0b\u0f55\u0fb2\u0f42\u0f0b\u0f58\u0f50\u0f60\u0f0b\u0f58] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0f63\u0f0b",past:"%s \u0f66\u0f94\u0f53\u0f0b\u0f63",s:"\u0f63\u0f58\u0f0b\u0f66\u0f44",ss:"%d \u0f66\u0f90\u0f62\u0f0b\u0f46\u0f0d",m:"\u0f66\u0f90\u0f62\u0f0b\u0f58\u0f0b\u0f42\u0f45\u0f72\u0f42",mm:"%d \u0f66\u0f90\u0f62\u0f0b\u0f58",h:"\u0f46\u0f74\u0f0b\u0f5a\u0f7c\u0f51\u0f0b\u0f42\u0f45\u0f72\u0f42",hh:"%d \u0f46\u0f74\u0f0b\u0f5a\u0f7c\u0f51",d:"\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f45\u0f72\u0f42",dd:"%d \u0f49\u0f72\u0f53\u0f0b",M:"\u0f5f\u0fb3\u0f0b\u0f56\u0f0b\u0f42\u0f45\u0f72\u0f42",MM:"%d \u0f5f\u0fb3\u0f0b\u0f56",y:"\u0f63\u0f7c\u0f0b\u0f42\u0f45\u0f72\u0f42",yy:"%d \u0f63\u0f7c"},preparse:function(e){return e.replace(/[\u0f21\u0f22\u0f23\u0f24\u0f25\u0f26\u0f27\u0f28\u0f29\u0f20]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c|\u0f5e\u0f7c\u0f42\u0f66\u0f0b\u0f40\u0f66|\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44|\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42|\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c"===t&&e>=4||"\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44"===t&&e<5||"\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42"===t?e+12:e},meridiem:function(e,t,n){return e<4?"\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c":e<10?"\u0f5e\u0f7c\u0f42\u0f66\u0f0b\u0f40\u0f66":e<17?"\u0f49\u0f72\u0f53\u0f0b\u0f42\u0f74\u0f44":e<20?"\u0f51\u0f42\u0f7c\u0f44\u0f0b\u0f51\u0f42":"\u0f58\u0f5a\u0f53\u0f0b\u0f58\u0f7c"},week:{dow:0,doy:6}})}(n("wd/R"))},"0tRk":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("pt-br",{months:"Janeiro_Fevereiro_Mar\xe7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),weekdaysMin:"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [\xe0s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [\xe0s] HH:mm"},calendar:{sameDay:"[Hoje \xe0s] LT",nextDay:"[Amanh\xe3 \xe0s] LT",nextWeek:"dddd [\xe0s] LT",lastDay:"[Ontem \xe0s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[\xdaltimo] dddd [\xe0s] LT":"[\xdaltima] dddd [\xe0s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h\xe1 %s",s:"poucos segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um m\xeas",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba"})}()},"1rYy":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("hy-am",{months:{format:"\u0570\u0578\u0582\u0576\u057e\u0561\u0580\u056b_\u0583\u0565\u057f\u0580\u057e\u0561\u0580\u056b_\u0574\u0561\u0580\u057f\u056b_\u0561\u057a\u0580\u056b\u056c\u056b_\u0574\u0561\u0575\u056b\u057d\u056b_\u0570\u0578\u0582\u0576\u056b\u057d\u056b_\u0570\u0578\u0582\u056c\u056b\u057d\u056b_\u0585\u0563\u0578\u057d\u057f\u0578\u057d\u056b_\u057d\u0565\u057a\u057f\u0565\u0574\u0562\u0565\u0580\u056b_\u0570\u0578\u056f\u057f\u0565\u0574\u0562\u0565\u0580\u056b_\u0576\u0578\u0575\u0565\u0574\u0562\u0565\u0580\u056b_\u0564\u0565\u056f\u057f\u0565\u0574\u0562\u0565\u0580\u056b".split("_"),standalone:"\u0570\u0578\u0582\u0576\u057e\u0561\u0580_\u0583\u0565\u057f\u0580\u057e\u0561\u0580_\u0574\u0561\u0580\u057f_\u0561\u057a\u0580\u056b\u056c_\u0574\u0561\u0575\u056b\u057d_\u0570\u0578\u0582\u0576\u056b\u057d_\u0570\u0578\u0582\u056c\u056b\u057d_\u0585\u0563\u0578\u057d\u057f\u0578\u057d_\u057d\u0565\u057a\u057f\u0565\u0574\u0562\u0565\u0580_\u0570\u0578\u056f\u057f\u0565\u0574\u0562\u0565\u0580_\u0576\u0578\u0575\u0565\u0574\u0562\u0565\u0580_\u0564\u0565\u056f\u057f\u0565\u0574\u0562\u0565\u0580".split("_")},monthsShort:"\u0570\u0576\u057e_\u0583\u057f\u0580_\u0574\u0580\u057f_\u0561\u057a\u0580_\u0574\u0575\u057d_\u0570\u0576\u057d_\u0570\u056c\u057d_\u0585\u0563\u057d_\u057d\u057a\u057f_\u0570\u056f\u057f_\u0576\u0574\u0562_\u0564\u056f\u057f".split("_"),weekdays:"\u056f\u056b\u0580\u0561\u056f\u056b_\u0565\u0580\u056f\u0578\u0582\u0577\u0561\u0562\u0569\u056b_\u0565\u0580\u0565\u0584\u0577\u0561\u0562\u0569\u056b_\u0579\u0578\u0580\u0565\u0584\u0577\u0561\u0562\u0569\u056b_\u0570\u056b\u0576\u0563\u0577\u0561\u0562\u0569\u056b_\u0578\u0582\u0580\u0562\u0561\u0569_\u0577\u0561\u0562\u0561\u0569".split("_"),weekdaysShort:"\u056f\u0580\u056f_\u0565\u0580\u056f_\u0565\u0580\u0584_\u0579\u0580\u0584_\u0570\u0576\u0563_\u0578\u0582\u0580\u0562_\u0577\u0562\u0569".split("_"),weekdaysMin:"\u056f\u0580\u056f_\u0565\u0580\u056f_\u0565\u0580\u0584_\u0579\u0580\u0584_\u0570\u0576\u0563_\u0578\u0582\u0580\u0562_\u0577\u0562\u0569".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0569.",LLL:"D MMMM YYYY \u0569., HH:mm",LLLL:"dddd, D MMMM YYYY \u0569., HH:mm"},calendar:{sameDay:"[\u0561\u0575\u057d\u0585\u0580] LT",nextDay:"[\u057e\u0561\u0572\u0568] LT",lastDay:"[\u0565\u0580\u0565\u056f] LT",nextWeek:function(){return"dddd [\u0585\u0580\u0568 \u056a\u0561\u0574\u0568] LT"},lastWeek:function(){return"[\u0561\u0576\u0581\u0561\u056e] dddd [\u0585\u0580\u0568 \u056a\u0561\u0574\u0568] LT"},sameElse:"L"},relativeTime:{future:"%s \u0570\u0565\u057f\u0578",past:"%s \u0561\u057c\u0561\u057b",s:"\u0574\u056b \u0584\u0561\u0576\u056b \u057e\u0561\u0575\u0580\u056f\u0575\u0561\u0576",ss:"%d \u057e\u0561\u0575\u0580\u056f\u0575\u0561\u0576",m:"\u0580\u0578\u057a\u0565",mm:"%d \u0580\u0578\u057a\u0565",h:"\u056a\u0561\u0574",hh:"%d \u056a\u0561\u0574",d:"\u0585\u0580",dd:"%d \u0585\u0580",M:"\u0561\u0574\u056b\u057d",MM:"%d \u0561\u0574\u056b\u057d",y:"\u057f\u0561\u0580\u056b",yy:"%d \u057f\u0561\u0580\u056b"},meridiemParse:/\u0563\u056b\u0577\u0565\u0580\u057e\u0561|\u0561\u057c\u0561\u057e\u0578\u057f\u057e\u0561|\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576/,isPM:function(e){return/^(\u0581\u0565\u0580\u0565\u056f\u057e\u0561|\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576)$/.test(e)},meridiem:function(e){return e<4?"\u0563\u056b\u0577\u0565\u0580\u057e\u0561":e<12?"\u0561\u057c\u0561\u057e\u0578\u057f\u057e\u0561":e<17?"\u0581\u0565\u0580\u0565\u056f\u057e\u0561":"\u0565\u0580\u0565\u056f\u0578\u0575\u0561\u0576"},dayOfMonthOrdinalParse:/\d{1,2}|\d{1,2}-(\u056b\u0576|\u0580\u0564)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-\u056b\u0576":e+"-\u0580\u0564";default:return e}},week:{dow:1,doy:7}})}()},"1xZ4":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ca",{months:{standalone:"gener_febrer_mar\xe7_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),format:"de gener_de febrer_de mar\xe7_d'abril_de maig_de juny_de juliol_d'agost_de setembre_d'octubre_de novembre_de desembre".split("_"),isFormat:/D[oD]?(\s)+MMMM/},monthsShort:"gen._febr._mar\xe7_abr._maig_juny_jul._ag._set._oct._nov._des.".split("_"),monthsParseExact:!0,weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"dg_dl_dt_dc_dj_dv_ds".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [de] YYYY",ll:"D MMM YYYY",LLL:"D MMMM [de] YYYY [a les] H:mm",lll:"D MMM YYYY, H:mm",LLLL:"dddd D MMMM [de] YYYY [a les] H:mm",llll:"ddd D MMM YYYY, H:mm"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem\xe0 a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"d'aqu\xed %s",past:"fa %s",s:"uns segons",ss:"%d segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},dayOfMonthOrdinalParse:/\d{1,2}(r|n|t|\xe8|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"\xe8";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}()},"2Bdj":function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,"a",function(){return r})},"2ePl":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},"2fjn":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("fr-ca",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}}})}()},"2ykv":function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_"),r=[/^jan/i,/^feb/i,/^maart|mrt.?$/i,/^apr/i,/^mei$/i,/^jun[i.]?$/i,/^jul[i.]?$/i,/^aug/i,/^sep/i,/^okt/i,/^nov/i,/^dec/i],i=/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;e.defineLocale("nl-be",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(januari|februari|maart|april|mei|ju[nl]i|augustus|september|oktober|november|december)/i,monthsShortStrictRegex:/^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"zo_ma_di_wo_do_vr_za".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",ss:"%d seconden",m:"\xe9\xe9n minuut",mm:"%d minuten",h:"\xe9\xe9n uur",hh:"%d uur",d:"\xe9\xe9n dag",dd:"%d dagen",M:"\xe9\xe9n maand",MM:"%d maanden",y:"\xe9\xe9n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n("wd/R"))},"3E1r":function(e,t,n){!function(e){"use strict";var t={1:"\u0967",2:"\u0968",3:"\u0969",4:"\u096a",5:"\u096b",6:"\u096c",7:"\u096d",8:"\u096e",9:"\u096f",0:"\u0966"},n={"\u0967":"1","\u0968":"2","\u0969":"3","\u096a":"4","\u096b":"5","\u096c":"6","\u096d":"7","\u096e":"8","\u096f":"9","\u0966":"0"};e.defineLocale("hi",{months:"\u091c\u0928\u0935\u0930\u0940_\u092b\u093c\u0930\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948\u0932_\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0938\u094d\u0924_\u0938\u093f\u0924\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u0942\u092c\u0930_\u0928\u0935\u092e\u094d\u092c\u0930_\u0926\u093f\u0938\u092e\u094d\u092c\u0930".split("_"),monthsShort:"\u091c\u0928._\u092b\u093c\u0930._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u0948._\u092e\u0908_\u091c\u0942\u0928_\u091c\u0941\u0932._\u0905\u0917._\u0938\u093f\u0924._\u0905\u0915\u094d\u091f\u0942._\u0928\u0935._\u0926\u093f\u0938.".split("_"),monthsParseExact:!0,weekdays:"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0932\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),weekdaysShort:"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0932_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),weekdaysMin:"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),longDateFormat:{LT:"A h:mm \u092c\u091c\u0947",LTS:"A h:mm:ss \u092c\u091c\u0947",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u092c\u091c\u0947",LLLL:"dddd, D MMMM YYYY, A h:mm \u092c\u091c\u0947"},calendar:{sameDay:"[\u0906\u091c] LT",nextDay:"[\u0915\u0932] LT",nextWeek:"dddd, LT",lastDay:"[\u0915\u0932] LT",lastWeek:"[\u092a\u093f\u091b\u0932\u0947] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u092e\u0947\u0902",past:"%s \u092a\u0939\u0932\u0947",s:"\u0915\u0941\u091b \u0939\u0940 \u0915\u094d\u0937\u0923",ss:"%d \u0938\u0947\u0915\u0902\u0921",m:"\u090f\u0915 \u092e\u093f\u0928\u091f",mm:"%d \u092e\u093f\u0928\u091f",h:"\u090f\u0915 \u0918\u0902\u091f\u093e",hh:"%d \u0918\u0902\u091f\u0947",d:"\u090f\u0915 \u0926\u093f\u0928",dd:"%d \u0926\u093f\u0928",M:"\u090f\u0915 \u092e\u0939\u0940\u0928\u0947",MM:"%d \u092e\u0939\u0940\u0928\u0947",y:"\u090f\u0915 \u0935\u0930\u094d\u0937",yy:"%d \u0935\u0930\u094d\u0937"},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/\u0930\u093e\u0924|\u0938\u0941\u092c\u0939|\u0926\u094b\u092a\u0939\u0930|\u0936\u093e\u092e/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u0930\u093e\u0924"===t?e<4?e:e+12:"\u0938\u0941\u092c\u0939"===t?e:"\u0926\u094b\u092a\u0939\u0930"===t?e>=10?e:e+12:"\u0936\u093e\u092e"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"\u0930\u093e\u0924":e<10?"\u0938\u0941\u092c\u0939":e<17?"\u0926\u094b\u092a\u0939\u0930":e<20?"\u0936\u093e\u092e":"\u0930\u093e\u0924"},week:{dow:0,doy:6}})}(n("wd/R"))},"4MV3":function(e,t,n){!function(e){"use strict";var t={1:"\u0ae7",2:"\u0ae8",3:"\u0ae9",4:"\u0aea",5:"\u0aeb",6:"\u0aec",7:"\u0aed",8:"\u0aee",9:"\u0aef",0:"\u0ae6"},n={"\u0ae7":"1","\u0ae8":"2","\u0ae9":"3","\u0aea":"4","\u0aeb":"5","\u0aec":"6","\u0aed":"7","\u0aee":"8","\u0aef":"9","\u0ae6":"0"};e.defineLocale("gu",{months:"\u0a9c\u0abe\u0aa8\u0acd\u0aaf\u0ac1\u0a86\u0ab0\u0ac0_\u0aab\u0ac7\u0aac\u0acd\u0ab0\u0ac1\u0a86\u0ab0\u0ac0_\u0aae\u0abe\u0ab0\u0acd\u0a9a_\u0a8f\u0aaa\u0acd\u0ab0\u0abf\u0ab2_\u0aae\u0ac7_\u0a9c\u0ac2\u0aa8_\u0a9c\u0ac1\u0ab2\u0abe\u0a88_\u0a91\u0a97\u0ab8\u0acd\u0a9f_\u0ab8\u0aaa\u0acd\u0a9f\u0ac7\u0aae\u0acd\u0aac\u0ab0_\u0a91\u0a95\u0acd\u0a9f\u0acd\u0aac\u0ab0_\u0aa8\u0ab5\u0ac7\u0aae\u0acd\u0aac\u0ab0_\u0aa1\u0abf\u0ab8\u0ac7\u0aae\u0acd\u0aac\u0ab0".split("_"),monthsShort:"\u0a9c\u0abe\u0aa8\u0acd\u0aaf\u0ac1._\u0aab\u0ac7\u0aac\u0acd\u0ab0\u0ac1._\u0aae\u0abe\u0ab0\u0acd\u0a9a_\u0a8f\u0aaa\u0acd\u0ab0\u0abf._\u0aae\u0ac7_\u0a9c\u0ac2\u0aa8_\u0a9c\u0ac1\u0ab2\u0abe._\u0a91\u0a97._\u0ab8\u0aaa\u0acd\u0a9f\u0ac7._\u0a91\u0a95\u0acd\u0a9f\u0acd._\u0aa8\u0ab5\u0ac7._\u0aa1\u0abf\u0ab8\u0ac7.".split("_"),monthsParseExact:!0,weekdays:"\u0ab0\u0ab5\u0abf\u0ab5\u0abe\u0ab0_\u0ab8\u0acb\u0aae\u0ab5\u0abe\u0ab0_\u0aae\u0a82\u0a97\u0ab3\u0ab5\u0abe\u0ab0_\u0aac\u0ac1\u0aa7\u0acd\u0ab5\u0abe\u0ab0_\u0a97\u0ac1\u0ab0\u0ac1\u0ab5\u0abe\u0ab0_\u0ab6\u0ac1\u0a95\u0acd\u0ab0\u0ab5\u0abe\u0ab0_\u0ab6\u0aa8\u0abf\u0ab5\u0abe\u0ab0".split("_"),weekdaysShort:"\u0ab0\u0ab5\u0abf_\u0ab8\u0acb\u0aae_\u0aae\u0a82\u0a97\u0ab3_\u0aac\u0ac1\u0aa7\u0acd_\u0a97\u0ac1\u0ab0\u0ac1_\u0ab6\u0ac1\u0a95\u0acd\u0ab0_\u0ab6\u0aa8\u0abf".split("_"),weekdaysMin:"\u0ab0_\u0ab8\u0acb_\u0aae\u0a82_\u0aac\u0ac1_\u0a97\u0ac1_\u0ab6\u0ac1_\u0ab6".split("_"),longDateFormat:{LT:"A h:mm \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7",LTS:"A h:mm:ss \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7",LLLL:"dddd, D MMMM YYYY, A h:mm \u0ab5\u0abe\u0a97\u0acd\u0aaf\u0ac7"},calendar:{sameDay:"[\u0a86\u0a9c] LT",nextDay:"[\u0a95\u0abe\u0ab2\u0ac7] LT",nextWeek:"dddd, LT",lastDay:"[\u0a97\u0a87\u0a95\u0abe\u0ab2\u0ac7] LT",lastWeek:"[\u0aaa\u0abe\u0a9b\u0ab2\u0abe] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0aae\u0abe",past:"%s \u0aaa\u0ac7\u0ab9\u0ab2\u0abe",s:"\u0a85\u0aae\u0ac1\u0a95 \u0aaa\u0ab3\u0acb",ss:"%d \u0ab8\u0ac7\u0a95\u0a82\u0aa1",m:"\u0a8f\u0a95 \u0aae\u0abf\u0aa8\u0abf\u0a9f",mm:"%d \u0aae\u0abf\u0aa8\u0abf\u0a9f",h:"\u0a8f\u0a95 \u0a95\u0ab2\u0abe\u0a95",hh:"%d \u0a95\u0ab2\u0abe\u0a95",d:"\u0a8f\u0a95 \u0aa6\u0abf\u0ab5\u0ab8",dd:"%d \u0aa6\u0abf\u0ab5\u0ab8",M:"\u0a8f\u0a95 \u0aae\u0ab9\u0abf\u0aa8\u0acb",MM:"%d \u0aae\u0ab9\u0abf\u0aa8\u0acb",y:"\u0a8f\u0a95 \u0ab5\u0ab0\u0acd\u0ab7",yy:"%d \u0ab5\u0ab0\u0acd\u0ab7"},preparse:function(e){return e.replace(/[\u0ae7\u0ae8\u0ae9\u0aea\u0aeb\u0aec\u0aed\u0aee\u0aef\u0ae6]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/\u0ab0\u0abe\u0aa4|\u0aac\u0aaa\u0acb\u0ab0|\u0ab8\u0ab5\u0abe\u0ab0|\u0ab8\u0abe\u0a82\u0a9c/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u0ab0\u0abe\u0aa4"===t?e<4?e:e+12:"\u0ab8\u0ab5\u0abe\u0ab0"===t?e:"\u0aac\u0aaa\u0acb\u0ab0"===t?e>=10?e:e+12:"\u0ab8\u0abe\u0a82\u0a9c"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"\u0ab0\u0abe\u0aa4":e<10?"\u0ab8\u0ab5\u0abe\u0ab0":e<17?"\u0aac\u0aaa\u0acb\u0ab0":e<20?"\u0ab8\u0abe\u0a82\u0a9c":"\u0ab0\u0abe\u0aa4"},week:{dow:0,doy:6}})}(n("wd/R"))},"4dOw":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("en-ie",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}()},"6+QB":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ms",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}()},"67Y/":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("mrSG"),i=n("FFOo");function o(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new a(e,t))}}var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}(),s=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return r.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)},t}(i.a)},"6B0Y":function(e,t,n){!function(e){"use strict";var t={1:"\u17e1",2:"\u17e2",3:"\u17e3",4:"\u17e4",5:"\u17e5",6:"\u17e6",7:"\u17e7",8:"\u17e8",9:"\u17e9",0:"\u17e0"},n={"\u17e1":"1","\u17e2":"2","\u17e3":"3","\u17e4":"4","\u17e5":"5","\u17e6":"6","\u17e7":"7","\u17e8":"8","\u17e9":"9","\u17e0":"0"};e.defineLocale("km",{months:"\u1798\u1780\u179a\u17b6_\u1780\u17bb\u1798\u17d2\u1797\u17c8_\u1798\u17b8\u1793\u17b6_\u1798\u17c1\u179f\u17b6_\u17a7\u179f\u1797\u17b6_\u1798\u17b7\u1790\u17bb\u1793\u17b6_\u1780\u1780\u17d2\u1780\u178a\u17b6_\u179f\u17b8\u17a0\u17b6_\u1780\u1789\u17d2\u1789\u17b6_\u178f\u17bb\u179b\u17b6_\u179c\u17b7\u1785\u17d2\u1786\u17b7\u1780\u17b6_\u1792\u17d2\u1793\u17bc".split("_"),monthsShort:"\u1798\u1780\u179a\u17b6_\u1780\u17bb\u1798\u17d2\u1797\u17c8_\u1798\u17b8\u1793\u17b6_\u1798\u17c1\u179f\u17b6_\u17a7\u179f\u1797\u17b6_\u1798\u17b7\u1790\u17bb\u1793\u17b6_\u1780\u1780\u17d2\u1780\u178a\u17b6_\u179f\u17b8\u17a0\u17b6_\u1780\u1789\u17d2\u1789\u17b6_\u178f\u17bb\u179b\u17b6_\u179c\u17b7\u1785\u17d2\u1786\u17b7\u1780\u17b6_\u1792\u17d2\u1793\u17bc".split("_"),weekdays:"\u17a2\u17b6\u1791\u17b7\u178f\u17d2\u1799_\u1785\u17d0\u1793\u17d2\u1791_\u17a2\u1784\u17d2\u1782\u17b6\u179a_\u1796\u17bb\u1792_\u1796\u17d2\u179a\u17a0\u179f\u17d2\u1794\u178f\u17b7\u17cd_\u179f\u17bb\u1780\u17d2\u179a_\u179f\u17c5\u179a\u17cd".split("_"),weekdaysShort:"\u17a2\u17b6_\u1785_\u17a2_\u1796_\u1796\u17d2\u179a_\u179f\u17bb_\u179f".split("_"),weekdaysMin:"\u17a2\u17b6_\u1785_\u17a2_\u1796_\u1796\u17d2\u179a_\u179f\u17bb_\u179f".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u1796\u17d2\u179a\u17b9\u1780|\u179b\u17d2\u1784\u17b6\u1785/,isPM:function(e){return"\u179b\u17d2\u1784\u17b6\u1785"===e},meridiem:function(e,t,n){return e<12?"\u1796\u17d2\u179a\u17b9\u1780":"\u179b\u17d2\u1784\u17b6\u1785"},calendar:{sameDay:"[\u1790\u17d2\u1784\u17c3\u1793\u17c1\u17c7 \u1798\u17c9\u17c4\u1784] LT",nextDay:"[\u179f\u17d2\u17a2\u17c2\u1780 \u1798\u17c9\u17c4\u1784] LT",nextWeek:"dddd [\u1798\u17c9\u17c4\u1784] LT",lastDay:"[\u1798\u17d2\u179f\u17b7\u179b\u1798\u17b7\u1789 \u1798\u17c9\u17c4\u1784] LT",lastWeek:"dddd [\u179f\u1794\u17d2\u178f\u17b6\u17a0\u17cd\u1798\u17bb\u1793] [\u1798\u17c9\u17c4\u1784] LT",sameElse:"L"},relativeTime:{future:"%s\u1791\u17c0\u178f",past:"%s\u1798\u17bb\u1793",s:"\u1794\u17c9\u17bb\u1793\u17d2\u1798\u17b6\u1793\u179c\u17b7\u1793\u17b6\u1791\u17b8",ss:"%d \u179c\u17b7\u1793\u17b6\u1791\u17b8",m:"\u1798\u17bd\u1799\u1793\u17b6\u1791\u17b8",mm:"%d \u1793\u17b6\u1791\u17b8",h:"\u1798\u17bd\u1799\u1798\u17c9\u17c4\u1784",hh:"%d \u1798\u17c9\u17c4\u1784",d:"\u1798\u17bd\u1799\u1790\u17d2\u1784\u17c3",dd:"%d \u1790\u17d2\u1784\u17c3",M:"\u1798\u17bd\u1799\u1781\u17c2",MM:"%d \u1781\u17c2",y:"\u1798\u17bd\u1799\u1786\u17d2\u1793\u17b6\u17c6",yy:"%d \u1786\u17d2\u1793\u17b6\u17c6"},dayOfMonthOrdinalParse:/\u1791\u17b8\d{1,2}/,ordinal:"\u1791\u17b8%d",preparse:function(e){return e.replace(/[\u17e1\u17e2\u17e3\u17e4\u17e5\u17e6\u17e7\u17e8\u17e9\u17e0]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},week:{dow:1,doy:4}})}(n("wd/R"))},"6ahw":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("iLxQ"),i=n("DKTb"),o={closed:!0,next:function(e){},error:function(e){if(r.a.useDeprecatedSynchronousErrorHandling)throw e;Object(i.a)(e)},complete:function(){}}},"6blF":function(e,t,n){"use strict";var r=n("FFOo"),i=n("L/V9"),o=n("6ahw"),a=n("xTla");function s(){}function u(e){return e?1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}:s}var l=n("iLxQ");n.d(t,"a",function(){return c});var c=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var a=this.operator,s=function(e,t,n){if(e){if(e instanceof r.a)return e;if(e[i.a])return e[i.a]()}return e||t||n?new r.a(e,t,n):new r.a(o.a)}(e,t,n);if(s.add(a?a.call(s,this.source):this.source||l.a.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),l.a.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){l.a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e.destination;if(e.closed||e.isStopped)return!1;e=t&&t instanceof r.a?t:null}return!0}(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=h(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}},r,t)})},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[a.a]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:u(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=h(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function h(e){if(e||(e=l.a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},"7BjC":function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={s:["m\xf5ne sekundi","m\xf5ni sekund","paar sekundit"],ss:[e+"sekundi",e+"sekundit"],m:["\xfche minuti","\xfcks minut"],mm:[e+" minuti",e+" minutit"],h:["\xfche tunni","tund aega","\xfcks tund"],hh:[e+" tunni",e+" tundi"],d:["\xfche p\xe4eva","\xfcks p\xe4ev"],M:["kuu aja","kuu aega","\xfcks kuu"],MM:[e+" kuu",e+" kuud"],y:["\xfche aasta","aasta","\xfcks aasta"],yy:[e+" aasta",e+" aastat"]};return t?i[n][2]?i[n][2]:i[n][1]:r?i[n][0]:i[n][1]}n("wd/R").defineLocale("et",{months:"jaanuar_veebruar_m\xe4rts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_m\xe4rts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"p\xfchap\xe4ev_esmasp\xe4ev_teisip\xe4ev_kolmap\xe4ev_neljap\xe4ev_reede_laup\xe4ev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[T\xe4na,] LT",nextDay:"[Homme,] LT",nextWeek:"[J\xe4rgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s p\xe4rast",past:"%s tagasi",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d p\xe4eva",M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},"7aV9":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("si",{months:"\u0da2\u0db1\u0dc0\u0dcf\u0dbb\u0dd2_\u0db4\u0dd9\u0db6\u0dbb\u0dc0\u0dcf\u0dbb\u0dd2_\u0db8\u0dcf\u0dbb\u0dca\u0dad\u0dd4_\u0d85\u0db4\u0dca\u200d\u0dbb\u0dda\u0dbd\u0dca_\u0db8\u0dd0\u0dba\u0dd2_\u0da2\u0dd6\u0db1\u0dd2_\u0da2\u0dd6\u0dbd\u0dd2_\u0d85\u0d9c\u0ddd\u0dc3\u0dca\u0dad\u0dd4_\u0dc3\u0dd0\u0db4\u0dca\u0dad\u0dd0\u0db8\u0dca\u0db6\u0dbb\u0dca_\u0d94\u0d9a\u0dca\u0dad\u0ddd\u0db6\u0dbb\u0dca_\u0db1\u0ddc\u0dc0\u0dd0\u0db8\u0dca\u0db6\u0dbb\u0dca_\u0daf\u0dd9\u0dc3\u0dd0\u0db8\u0dca\u0db6\u0dbb\u0dca".split("_"),monthsShort:"\u0da2\u0db1_\u0db4\u0dd9\u0db6_\u0db8\u0dcf\u0dbb\u0dca_\u0d85\u0db4\u0dca_\u0db8\u0dd0\u0dba\u0dd2_\u0da2\u0dd6\u0db1\u0dd2_\u0da2\u0dd6\u0dbd\u0dd2_\u0d85\u0d9c\u0ddd_\u0dc3\u0dd0\u0db4\u0dca_\u0d94\u0d9a\u0dca_\u0db1\u0ddc\u0dc0\u0dd0_\u0daf\u0dd9\u0dc3\u0dd0".split("_"),weekdays:"\u0d89\u0dbb\u0dd2\u0daf\u0dcf_\u0dc3\u0db3\u0dd4\u0daf\u0dcf_\u0d85\u0d9f\u0dc4\u0dbb\u0dd4\u0dc0\u0dcf\u0daf\u0dcf_\u0db6\u0daf\u0dcf\u0daf\u0dcf_\u0db6\u0dca\u200d\u0dbb\u0dc4\u0dc3\u0dca\u0db4\u0dad\u0dd2\u0db1\u0dca\u0daf\u0dcf_\u0dc3\u0dd2\u0d9a\u0dd4\u0dbb\u0dcf\u0daf\u0dcf_\u0dc3\u0dd9\u0db1\u0dc3\u0dd4\u0dbb\u0dcf\u0daf\u0dcf".split("_"),weekdaysShort:"\u0d89\u0dbb\u0dd2_\u0dc3\u0db3\u0dd4_\u0d85\u0d9f_\u0db6\u0daf\u0dcf_\u0db6\u0dca\u200d\u0dbb\u0dc4_\u0dc3\u0dd2\u0d9a\u0dd4_\u0dc3\u0dd9\u0db1".split("_"),weekdaysMin:"\u0d89_\u0dc3_\u0d85_\u0db6_\u0db6\u0dca\u200d\u0dbb_\u0dc3\u0dd2_\u0dc3\u0dd9".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"a h:mm",LTS:"a h:mm:ss",L:"YYYY/MM/DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D, a h:mm",LLLL:"YYYY MMMM D [\u0dc0\u0dd0\u0db1\u0dd2] dddd, a h:mm:ss"},calendar:{sameDay:"[\u0d85\u0daf] LT[\u0da7]",nextDay:"[\u0dc4\u0dd9\u0da7] LT[\u0da7]",nextWeek:"dddd LT[\u0da7]",lastDay:"[\u0d8a\u0dba\u0dda] LT[\u0da7]",lastWeek:"[\u0db4\u0dc3\u0dd4\u0d9c\u0dd2\u0dba] dddd LT[\u0da7]",sameElse:"L"},relativeTime:{future:"%s\u0d9a\u0dd2\u0db1\u0dca",past:"%s\u0d9a\u0da7 \u0db4\u0dd9\u0dbb",s:"\u0dad\u0dad\u0dca\u0db4\u0dbb \u0d9a\u0dd2\u0dc4\u0dd2\u0db4\u0dba",ss:"\u0dad\u0dad\u0dca\u0db4\u0dbb %d",m:"\u0db8\u0dd2\u0db1\u0dd2\u0dad\u0dca\u0dad\u0dd4\u0dc0",mm:"\u0db8\u0dd2\u0db1\u0dd2\u0dad\u0dca\u0dad\u0dd4 %d",h:"\u0db4\u0dd0\u0dba",hh:"\u0db4\u0dd0\u0dba %d",d:"\u0daf\u0dd2\u0db1\u0dba",dd:"\u0daf\u0dd2\u0db1 %d",M:"\u0db8\u0dcf\u0dc3\u0dba",MM:"\u0db8\u0dcf\u0dc3 %d",y:"\u0dc0\u0dc3\u0dbb",yy:"\u0dc0\u0dc3\u0dbb %d"},dayOfMonthOrdinalParse:/\d{1,2} \u0dc0\u0dd0\u0db1\u0dd2/,ordinal:function(e){return e+" \u0dc0\u0dd0\u0db1\u0dd2"},meridiemParse:/\u0db4\u0dd9\u0dbb \u0dc0\u0dbb\u0dd4|\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4|\u0db4\u0dd9.\u0dc0|\u0db4.\u0dc0./,isPM:function(e){return"\u0db4.\u0dc0."===e||"\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4"===e},meridiem:function(e,t,n){return e>11?n?"\u0db4.\u0dc0.":"\u0db4\u0dc3\u0dca \u0dc0\u0dbb\u0dd4":n?"\u0db4\u0dd9.\u0dc0.":"\u0db4\u0dd9\u0dbb \u0dc0\u0dbb\u0dd4"}})}()},"8/+R":function(e,t,n){!function(e){"use strict";var t={1:"\u0a67",2:"\u0a68",3:"\u0a69",4:"\u0a6a",5:"\u0a6b",6:"\u0a6c",7:"\u0a6d",8:"\u0a6e",9:"\u0a6f",0:"\u0a66"},n={"\u0a67":"1","\u0a68":"2","\u0a69":"3","\u0a6a":"4","\u0a6b":"5","\u0a6c":"6","\u0a6d":"7","\u0a6e":"8","\u0a6f":"9","\u0a66":"0"};e.defineLocale("pa-in",{months:"\u0a1c\u0a28\u0a35\u0a30\u0a40_\u0a2b\u0a3c\u0a30\u0a35\u0a30\u0a40_\u0a2e\u0a3e\u0a30\u0a1a_\u0a05\u0a2a\u0a4d\u0a30\u0a48\u0a32_\u0a2e\u0a08_\u0a1c\u0a42\u0a28_\u0a1c\u0a41\u0a32\u0a3e\u0a08_\u0a05\u0a17\u0a38\u0a24_\u0a38\u0a24\u0a70\u0a2c\u0a30_\u0a05\u0a15\u0a24\u0a42\u0a2c\u0a30_\u0a28\u0a35\u0a70\u0a2c\u0a30_\u0a26\u0a38\u0a70\u0a2c\u0a30".split("_"),monthsShort:"\u0a1c\u0a28\u0a35\u0a30\u0a40_\u0a2b\u0a3c\u0a30\u0a35\u0a30\u0a40_\u0a2e\u0a3e\u0a30\u0a1a_\u0a05\u0a2a\u0a4d\u0a30\u0a48\u0a32_\u0a2e\u0a08_\u0a1c\u0a42\u0a28_\u0a1c\u0a41\u0a32\u0a3e\u0a08_\u0a05\u0a17\u0a38\u0a24_\u0a38\u0a24\u0a70\u0a2c\u0a30_\u0a05\u0a15\u0a24\u0a42\u0a2c\u0a30_\u0a28\u0a35\u0a70\u0a2c\u0a30_\u0a26\u0a38\u0a70\u0a2c\u0a30".split("_"),weekdays:"\u0a10\u0a24\u0a35\u0a3e\u0a30_\u0a38\u0a4b\u0a2e\u0a35\u0a3e\u0a30_\u0a2e\u0a70\u0a17\u0a32\u0a35\u0a3e\u0a30_\u0a2c\u0a41\u0a27\u0a35\u0a3e\u0a30_\u0a35\u0a40\u0a30\u0a35\u0a3e\u0a30_\u0a38\u0a3c\u0a41\u0a71\u0a15\u0a30\u0a35\u0a3e\u0a30_\u0a38\u0a3c\u0a28\u0a40\u0a1a\u0a30\u0a35\u0a3e\u0a30".split("_"),weekdaysShort:"\u0a10\u0a24_\u0a38\u0a4b\u0a2e_\u0a2e\u0a70\u0a17\u0a32_\u0a2c\u0a41\u0a27_\u0a35\u0a40\u0a30_\u0a38\u0a3c\u0a41\u0a15\u0a30_\u0a38\u0a3c\u0a28\u0a40".split("_"),weekdaysMin:"\u0a10\u0a24_\u0a38\u0a4b\u0a2e_\u0a2e\u0a70\u0a17\u0a32_\u0a2c\u0a41\u0a27_\u0a35\u0a40\u0a30_\u0a38\u0a3c\u0a41\u0a15\u0a30_\u0a38\u0a3c\u0a28\u0a40".split("_"),longDateFormat:{LT:"A h:mm \u0a35\u0a1c\u0a47",LTS:"A h:mm:ss \u0a35\u0a1c\u0a47",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u0a35\u0a1c\u0a47",LLLL:"dddd, D MMMM YYYY, A h:mm \u0a35\u0a1c\u0a47"},calendar:{sameDay:"[\u0a05\u0a1c] LT",nextDay:"[\u0a15\u0a32] LT",nextWeek:"[\u0a05\u0a17\u0a32\u0a3e] dddd, LT",lastDay:"[\u0a15\u0a32] LT",lastWeek:"[\u0a2a\u0a3f\u0a1b\u0a32\u0a47] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0a35\u0a3f\u0a71\u0a1a",past:"%s \u0a2a\u0a3f\u0a1b\u0a32\u0a47",s:"\u0a15\u0a41\u0a1d \u0a38\u0a15\u0a3f\u0a70\u0a1f",ss:"%d \u0a38\u0a15\u0a3f\u0a70\u0a1f",m:"\u0a07\u0a15 \u0a2e\u0a3f\u0a70\u0a1f",mm:"%d \u0a2e\u0a3f\u0a70\u0a1f",h:"\u0a07\u0a71\u0a15 \u0a18\u0a70\u0a1f\u0a3e",hh:"%d \u0a18\u0a70\u0a1f\u0a47",d:"\u0a07\u0a71\u0a15 \u0a26\u0a3f\u0a28",dd:"%d \u0a26\u0a3f\u0a28",M:"\u0a07\u0a71\u0a15 \u0a2e\u0a39\u0a40\u0a28\u0a3e",MM:"%d \u0a2e\u0a39\u0a40\u0a28\u0a47",y:"\u0a07\u0a71\u0a15 \u0a38\u0a3e\u0a32",yy:"%d \u0a38\u0a3e\u0a32"},preparse:function(e){return e.replace(/[\u0a67\u0a68\u0a69\u0a6a\u0a6b\u0a6c\u0a6d\u0a6e\u0a6f\u0a66]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/\u0a30\u0a3e\u0a24|\u0a38\u0a35\u0a47\u0a30|\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30|\u0a38\u0a3c\u0a3e\u0a2e/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u0a30\u0a3e\u0a24"===t?e<4?e:e+12:"\u0a38\u0a35\u0a47\u0a30"===t?e:"\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30"===t?e>=10?e:e+12:"\u0a38\u0a3c\u0a3e\u0a2e"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"\u0a30\u0a3e\u0a24":e<10?"\u0a38\u0a35\u0a47\u0a30":e<17?"\u0a26\u0a41\u0a2a\u0a39\u0a3f\u0a30":e<20?"\u0a38\u0a3c\u0a3e\u0a2e":"\u0a30\u0a3e\u0a24"},week:{dow:0,doy:6}})}(n("wd/R"))},"8g8A":function(e,t,n){"use strict";function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}n.d(t,"a",function(){return i}),r.prototype=Object.create(Error.prototype);var i=r},"8mBD":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("pt",{months:"Janeiro_Fevereiro_Mar\xe7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingo_Segunda-feira_Ter\xe7a-feira_Quarta-feira_Quinta-feira_Sexta-feira_S\xe1bado".split("_"),weekdaysShort:"Dom_Seg_Ter_Qua_Qui_Sex_S\xe1b".split("_"),weekdaysMin:"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY HH:mm"},calendar:{sameDay:"[Hoje \xe0s] LT",nextDay:"[Amanh\xe3 \xe0s] LT",nextWeek:"dddd [\xe0s] LT",lastDay:"[Ontem \xe0s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[\xdaltimo] dddd [\xe0s] LT":"[\xdaltima] dddd [\xe0s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"h\xe1 %s",s:"segundos",ss:"%d segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um m\xeas",MM:"%d meses",y:"um ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}()},"9rRi":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("gd",{months:["Am Faoilleach","An Gearran","Am M\xe0rt","An Giblean","An C\xe8itean","An t-\xd2gmhios","An t-Iuchar","An L\xf9nastal","An t-Sultain","An D\xe0mhair","An t-Samhain","An D\xf9bhlachd"],monthsShort:["Faoi","Gear","M\xe0rt","Gibl","C\xe8it","\xd2gmh","Iuch","L\xf9n","Sult","D\xe0mh","Samh","D\xf9bh"],monthsParseExact:!0,weekdays:["Did\xf2mhnaich","Diluain","Dim\xe0irt","Diciadain","Diardaoin","Dihaoine","Disathairne"],weekdaysShort:["Did","Dil","Dim","Dic","Dia","Dih","Dis"],weekdaysMin:["D\xf2","Lu","M\xe0","Ci","Ar","Ha","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[An-diugh aig] LT",nextDay:"[A-m\xe0ireach aig] LT",nextWeek:"dddd [aig] LT",lastDay:"[An-d\xe8 aig] LT",lastWeek:"dddd [seo chaidh] [aig] LT",sameElse:"L"},relativeTime:{future:"ann an %s",past:"bho chionn %s",s:"beagan diogan",ss:"%d diogan",m:"mionaid",mm:"%d mionaidean",h:"uair",hh:"%d uairean",d:"latha",dd:"%d latha",M:"m\xecos",MM:"%d m\xecosan",y:"bliadhna",yy:"%d bliadhna"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}()},"A+xa":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("cv",{months:"\u043a\u04d1\u0440\u043b\u0430\u0447_\u043d\u0430\u0440\u04d1\u0441_\u043f\u0443\u0448_\u0430\u043a\u0430_\u043c\u0430\u0439_\u04ab\u04d7\u0440\u0442\u043c\u0435_\u0443\u0442\u04d1_\u04ab\u0443\u0440\u043b\u0430_\u0430\u0432\u04d1\u043d_\u044e\u043f\u0430_\u0447\u04f3\u043a_\u0440\u0430\u0448\u0442\u0430\u0432".split("_"),monthsShort:"\u043a\u04d1\u0440_\u043d\u0430\u0440_\u043f\u0443\u0448_\u0430\u043a\u0430_\u043c\u0430\u0439_\u04ab\u04d7\u0440_\u0443\u0442\u04d1_\u04ab\u0443\u0440_\u0430\u0432\u043d_\u044e\u043f\u0430_\u0447\u04f3\u043a_\u0440\u0430\u0448".split("_"),weekdays:"\u0432\u044b\u0440\u0441\u0430\u0440\u043d\u0438\u043a\u0443\u043d_\u0442\u0443\u043d\u0442\u0438\u043a\u0443\u043d_\u044b\u0442\u043b\u0430\u0440\u0438\u043a\u0443\u043d_\u044e\u043d\u043a\u0443\u043d_\u043a\u04d7\u04ab\u043d\u0435\u0440\u043d\u0438\u043a\u0443\u043d_\u044d\u0440\u043d\u0435\u043a\u0443\u043d_\u0448\u04d1\u043c\u0430\u0442\u043a\u0443\u043d".split("_"),weekdaysShort:"\u0432\u044b\u0440_\u0442\u0443\u043d_\u044b\u0442\u043b_\u044e\u043d_\u043a\u04d7\u04ab_\u044d\u0440\u043d_\u0448\u04d1\u043c".split("_"),weekdaysMin:"\u0432\u0440_\u0442\u043d_\u044b\u0442_\u044e\u043d_\u043a\u04ab_\u044d\u0440_\u0448\u043c".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"YYYY [\u04ab\u0443\u043b\u0445\u0438] MMMM [\u0443\u0439\u04d1\u0445\u04d7\u043d] D[-\u043c\u04d7\u0448\u04d7]",LLL:"YYYY [\u04ab\u0443\u043b\u0445\u0438] MMMM [\u0443\u0439\u04d1\u0445\u04d7\u043d] D[-\u043c\u04d7\u0448\u04d7], HH:mm",LLLL:"dddd, YYYY [\u04ab\u0443\u043b\u0445\u0438] MMMM [\u0443\u0439\u04d1\u0445\u04d7\u043d] D[-\u043c\u04d7\u0448\u04d7], HH:mm"},calendar:{sameDay:"[\u041f\u0430\u044f\u043d] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",nextDay:"[\u042b\u0440\u0430\u043d] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",lastDay:"[\u04d6\u043d\u0435\u0440] LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",nextWeek:"[\u04aa\u0438\u0442\u0435\u0441] dddd LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",lastWeek:"[\u0418\u0440\u0442\u043d\u04d7] dddd LT [\u0441\u0435\u0445\u0435\u0442\u0440\u0435]",sameElse:"L"},relativeTime:{future:function(e){return e+(/\u0441\u0435\u0445\u0435\u0442$/i.exec(e)?"\u0440\u0435\u043d":/\u04ab\u0443\u043b$/i.exec(e)?"\u0442\u0430\u043d":"\u0440\u0430\u043d")},past:"%s \u043a\u0430\u044f\u043b\u043b\u0430",s:"\u043f\u04d7\u0440-\u0438\u043a \u04ab\u0435\u043a\u043a\u0443\u043d\u0442",ss:"%d \u04ab\u0435\u043a\u043a\u0443\u043d\u0442",m:"\u043f\u04d7\u0440 \u043c\u0438\u043d\u0443\u0442",mm:"%d \u043c\u0438\u043d\u0443\u0442",h:"\u043f\u04d7\u0440 \u0441\u0435\u0445\u0435\u0442",hh:"%d \u0441\u0435\u0445\u0435\u0442",d:"\u043f\u04d7\u0440 \u043a\u0443\u043d",dd:"%d \u043a\u0443\u043d",M:"\u043f\u04d7\u0440 \u0443\u0439\u04d1\u0445",MM:"%d \u0443\u0439\u04d1\u0445",y:"\u043f\u04d7\u0440 \u04ab\u0443\u043b",yy:"%d \u04ab\u0443\u043b"},dayOfMonthOrdinalParse:/\d{1,2}-\u043c\u04d7\u0448/,ordinal:"%d-\u043c\u04d7\u0448",week:{dow:1,doy:7}})}()},AQ68:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("uz-latn",{months:"Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr".split("_"),monthsShort:"Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek".split("_"),weekdays:"Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba".split("_"),weekdaysShort:"Yak_Dush_Sesh_Chor_Pay_Jum_Shan".split("_"),weekdaysMin:"Ya_Du_Se_Cho_Pa_Ju_Sha".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[Bugun soat] LT [da]",nextDay:"[Ertaga] LT [da]",nextWeek:"dddd [kuni soat] LT [da]",lastDay:"[Kecha soat] LT [da]",lastWeek:"[O'tgan] dddd [kuni soat] LT [da]",sameElse:"L"},relativeTime:{future:"Yaqin %s ichida",past:"Bir necha %s oldin",s:"soniya",ss:"%d soniya",m:"bir daqiqa",mm:"%d daqiqa",h:"bir soat",hh:"%d soat",d:"bir kun",dd:"%d kun",M:"bir oy",MM:"%d oy",y:"bir yil",yy:"%d yil"},week:{dow:1,doy:7}})}()},AvvY:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ml",{months:"\u0d1c\u0d28\u0d41\u0d35\u0d30\u0d3f_\u0d2b\u0d46\u0d2c\u0d4d\u0d30\u0d41\u0d35\u0d30\u0d3f_\u0d2e\u0d3e\u0d7c\u0d1a\u0d4d\u0d1a\u0d4d_\u0d0f\u0d2a\u0d4d\u0d30\u0d3f\u0d7d_\u0d2e\u0d47\u0d2f\u0d4d_\u0d1c\u0d42\u0d7a_\u0d1c\u0d42\u0d32\u0d48_\u0d13\u0d17\u0d38\u0d4d\u0d31\u0d4d\u0d31\u0d4d_\u0d38\u0d46\u0d2a\u0d4d\u0d31\u0d4d\u0d31\u0d02\u0d2c\u0d7c_\u0d12\u0d15\u0d4d\u0d1f\u0d4b\u0d2c\u0d7c_\u0d28\u0d35\u0d02\u0d2c\u0d7c_\u0d21\u0d3f\u0d38\u0d02\u0d2c\u0d7c".split("_"),monthsShort:"\u0d1c\u0d28\u0d41._\u0d2b\u0d46\u0d2c\u0d4d\u0d30\u0d41._\u0d2e\u0d3e\u0d7c._\u0d0f\u0d2a\u0d4d\u0d30\u0d3f._\u0d2e\u0d47\u0d2f\u0d4d_\u0d1c\u0d42\u0d7a_\u0d1c\u0d42\u0d32\u0d48._\u0d13\u0d17._\u0d38\u0d46\u0d2a\u0d4d\u0d31\u0d4d\u0d31._\u0d12\u0d15\u0d4d\u0d1f\u0d4b._\u0d28\u0d35\u0d02._\u0d21\u0d3f\u0d38\u0d02.".split("_"),monthsParseExact:!0,weekdays:"\u0d1e\u0d3e\u0d2f\u0d31\u0d3e\u0d34\u0d4d\u0d1a_\u0d24\u0d3f\u0d19\u0d4d\u0d15\u0d33\u0d3e\u0d34\u0d4d\u0d1a_\u0d1a\u0d4a\u0d35\u0d4d\u0d35\u0d3e\u0d34\u0d4d\u0d1a_\u0d2c\u0d41\u0d27\u0d28\u0d3e\u0d34\u0d4d\u0d1a_\u0d35\u0d4d\u0d2f\u0d3e\u0d34\u0d3e\u0d34\u0d4d\u0d1a_\u0d35\u0d46\u0d33\u0d4d\u0d33\u0d3f\u0d2f\u0d3e\u0d34\u0d4d\u0d1a_\u0d36\u0d28\u0d3f\u0d2f\u0d3e\u0d34\u0d4d\u0d1a".split("_"),weekdaysShort:"\u0d1e\u0d3e\u0d2f\u0d7c_\u0d24\u0d3f\u0d19\u0d4d\u0d15\u0d7e_\u0d1a\u0d4a\u0d35\u0d4d\u0d35_\u0d2c\u0d41\u0d27\u0d7b_\u0d35\u0d4d\u0d2f\u0d3e\u0d34\u0d02_\u0d35\u0d46\u0d33\u0d4d\u0d33\u0d3f_\u0d36\u0d28\u0d3f".split("_"),weekdaysMin:"\u0d1e\u0d3e_\u0d24\u0d3f_\u0d1a\u0d4a_\u0d2c\u0d41_\u0d35\u0d4d\u0d2f\u0d3e_\u0d35\u0d46_\u0d36".split("_"),longDateFormat:{LT:"A h:mm -\u0d28\u0d41",LTS:"A h:mm:ss -\u0d28\u0d41",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm -\u0d28\u0d41",LLLL:"dddd, D MMMM YYYY, A h:mm -\u0d28\u0d41"},calendar:{sameDay:"[\u0d07\u0d28\u0d4d\u0d28\u0d4d] LT",nextDay:"[\u0d28\u0d3e\u0d33\u0d46] LT",nextWeek:"dddd, LT",lastDay:"[\u0d07\u0d28\u0d4d\u0d28\u0d32\u0d46] LT",lastWeek:"[\u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d",past:"%s \u0d2e\u0d41\u0d7b\u0d2a\u0d4d",s:"\u0d05\u0d7d\u0d2a \u0d28\u0d3f\u0d2e\u0d3f\u0d37\u0d19\u0d4d\u0d19\u0d7e",ss:"%d \u0d38\u0d46\u0d15\u0d4d\u0d15\u0d7b\u0d21\u0d4d",m:"\u0d12\u0d30\u0d41 \u0d2e\u0d3f\u0d28\u0d3f\u0d31\u0d4d\u0d31\u0d4d",mm:"%d \u0d2e\u0d3f\u0d28\u0d3f\u0d31\u0d4d\u0d31\u0d4d",h:"\u0d12\u0d30\u0d41 \u0d2e\u0d23\u0d3f\u0d15\u0d4d\u0d15\u0d42\u0d7c",hh:"%d \u0d2e\u0d23\u0d3f\u0d15\u0d4d\u0d15\u0d42\u0d7c",d:"\u0d12\u0d30\u0d41 \u0d26\u0d3f\u0d35\u0d38\u0d02",dd:"%d \u0d26\u0d3f\u0d35\u0d38\u0d02",M:"\u0d12\u0d30\u0d41 \u0d2e\u0d3e\u0d38\u0d02",MM:"%d \u0d2e\u0d3e\u0d38\u0d02",y:"\u0d12\u0d30\u0d41 \u0d35\u0d7c\u0d37\u0d02",yy:"%d \u0d35\u0d7c\u0d37\u0d02"},meridiemParse:/\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f|\u0d30\u0d3e\u0d35\u0d3f\u0d32\u0d46|\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d|\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02|\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f/i,meridiemHour:function(e,t){return 12===e&&(e=0),"\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f"===t&&e>=4||"\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d"===t||"\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02"===t?e+12:e},meridiem:function(e,t,n){return e<4?"\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f":e<12?"\u0d30\u0d3e\u0d35\u0d3f\u0d32\u0d46":e<17?"\u0d09\u0d1a\u0d4d\u0d1a \u0d15\u0d34\u0d3f\u0d1e\u0d4d\u0d1e\u0d4d":e<20?"\u0d35\u0d48\u0d15\u0d41\u0d28\u0d4d\u0d28\u0d47\u0d30\u0d02":"\u0d30\u0d3e\u0d24\u0d4d\u0d30\u0d3f"}})}()},B55N:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ja",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),weekdaysShort:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),weekdaysMin:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5 dddd HH:mm",l:"YYYY/MM/DD",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5(ddd) HH:mm"},meridiemParse:/\u5348\u524d|\u5348\u5f8c/i,isPM:function(e){return"\u5348\u5f8c"===e},meridiem:function(e,t,n){return e<12?"\u5348\u524d":"\u5348\u5f8c"},calendar:{sameDay:"[\u4eca\u65e5] LT",nextDay:"[\u660e\u65e5] LT",nextWeek:function(e){return e.week()<this.week()?"[\u6765\u9031]dddd LT":"dddd LT"},lastDay:"[\u6628\u65e5] LT",lastWeek:function(e){return this.week()<e.week()?"[\u5148\u9031]dddd LT":"dddd LT"},sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}\u65e5/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"\u65e5";default:return e}},relativeTime:{future:"%s\u5f8c",past:"%s\u524d",s:"\u6570\u79d2",ss:"%d\u79d2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593",d:"1\u65e5",dd:"%d\u65e5",M:"1\u30f6\u6708",MM:"%d\u30f6\u6708",y:"1\u5e74",yy:"%d\u5e74"}})}()},BVg3:function(e,t,n){!function(e){"use strict";function t(e){return e%100==11||e%10!=1}function r(e,n,r,i){var o=e+" ";switch(r){case"s":return n||i?"nokkrar sek\xfandur":"nokkrum sek\xfandum";case"ss":return t(e)?o+(n||i?"sek\xfandur":"sek\xfandum"):o+"sek\xfanda";case"m":return n?"m\xedn\xfata":"m\xedn\xfatu";case"mm":return t(e)?o+(n||i?"m\xedn\xfatur":"m\xedn\xfatum"):n?o+"m\xedn\xfata":o+"m\xedn\xfatu";case"hh":return t(e)?o+(n||i?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return n?"dagur":i?"dag":"degi";case"dd":return t(e)?n?o+"dagar":o+(i?"daga":"d\xf6gum"):n?o+"dagur":o+(i?"dag":"degi");case"M":return n?"m\xe1nu\xf0ur":i?"m\xe1nu\xf0":"m\xe1nu\xf0i";case"MM":return t(e)?n?o+"m\xe1nu\xf0ir":o+(i?"m\xe1nu\xf0i":"m\xe1nu\xf0um"):n?o+"m\xe1nu\xf0ur":o+(i?"m\xe1nu\xf0":"m\xe1nu\xf0i");case"y":return n||i?"\xe1r":"\xe1ri";case"yy":return t(e)?o+(n||i?"\xe1r":"\xe1rum"):o+(n||i?"\xe1r":"\xe1ri")}}n("wd/R").defineLocale("is",{months:"jan\xfaar_febr\xfaar_mars_apr\xedl_ma\xed_j\xfan\xed_j\xfal\xed_\xe1g\xfast_september_okt\xf3ber_n\xf3vember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma\xed_j\xfan_j\xfal_\xe1g\xfa_sep_okt_n\xf3v_des".split("_"),weekdays:"sunnudagur_m\xe1nudagur_\xferi\xf0judagur_mi\xf0vikudagur_fimmtudagur_f\xf6studagur_laugardagur".split("_"),weekdaysShort:"sun_m\xe1n_\xferi_mi\xf0_fim_f\xf6s_lau".split("_"),weekdaysMin:"Su_M\xe1_\xder_Mi_Fi_F\xf6_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd, D. MMMM YYYY [kl.] H:mm"},calendar:{sameDay:"[\xed dag kl.] LT",nextDay:"[\xe1 morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[\xed g\xe6r kl.] LT",lastWeek:"[s\xed\xf0asta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s s\xed\xf0an",s:r,ss:r,m:r,mm:r,h:"klukkustund",hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},ByF4:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("fo",{months:"januar_februar_mars_apr\xedl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_m\xe1nadagur_t\xfdsdagur_mikudagur_h\xf3sdagur_fr\xedggjadagur_leygardagur".split("_"),weekdaysShort:"sun_m\xe1n_t\xfds_mik_h\xf3s_fr\xed_ley".split("_"),weekdaysMin:"su_m\xe1_t\xfd_mi_h\xf3_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D. MMMM, YYYY HH:mm"},calendar:{sameDay:"[\xcd dag kl.] LT",nextDay:"[\xcd morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[\xcd gj\xe1r kl.] LT",lastWeek:"[s\xed\xf0stu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s s\xed\xf0ani",s:"f\xe1 sekund",ss:"%d sekundir",m:"ein minuttur",mm:"%d minuttir",h:"ein t\xedmi",hh:"%d t\xedmar",d:"ein dagur",dd:"%d dagar",M:"ein m\xe1na\xf0ur",MM:"%d m\xe1na\xf0ir",y:"eitt \xe1r",yy:"%d \xe1r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},CcnG:function(e,t,n){"use strict";n.r(t);var r=n("mrSG"),i=n("pugT"),o=n("K9Ia"),a=n("6blF"),s=n("nkY7"),u=n("psW0");function l(e){return e}var c=n("IUTb"),h=n("FFOo");function d(){return function(e){return e.lift(new f(e))}}var f=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new p(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),p=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.__extends(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(h.a),_=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return r.__extends(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new i.a).add(this.source.subscribe(new g(this.getSubject(),this))),e.closed?(this._connection=null,e=i.a.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return d()(this)},t}(a.a).prototype,m={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:_._subscribe},_isComplete:{value:_._isComplete,writable:!0},getSubject:{value:_.getSubject},connect:{value:_.connect},refCount:{value:_.refCount}},g=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return r.__extends(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(o.b);function v(){return new o.a}n.d(t,"\u0275angular_packages_core_core_r",function(){return Qb}),n.d(t,"\u0275angular_packages_core_core_o",function(){return Wb}),n.d(t,"\u0275angular_packages_core_core_p",function(){return Xb}),n.d(t,"\u0275angular_packages_core_core_q",function(){return Kb}),n.d(t,"\u0275angular_packages_core_core_s",function(){return qb}),n.d(t,"\u0275angular_packages_core_core_f",function(){return iy}),n.d(t,"\u0275angular_packages_core_core_m",function(){return kf}),n.d(t,"\u0275angular_packages_core_core_n",function(){return Hf}),n.d(t,"\u0275angular_packages_core_core_l",function(){return Db}),n.d(t,"\u0275angular_packages_core_core_k",function(){return Rb}),n.d(t,"\u0275angular_packages_core_core_b",function(){return ve}),n.d(t,"\u0275angular_packages_core_core_a",function(){return fe}),n.d(t,"\u0275angular_packages_core_core_c",function(){return Gt}),n.d(t,"\u0275angular_packages_core_core_d",function(){return Rt}),n.d(t,"\u0275angular_packages_core_core_e",function(){return Ft}),n.d(t,"\u0275angular_packages_core_core_j",function(){return mb}),n.d(t,"\u0275angular_packages_core_core_t",function(){return Ny}),n.d(t,"\u0275angular_packages_core_core_v",function(){return wy}),n.d(t,"\u0275angular_packages_core_core_u",function(){return Oy}),n.d(t,"\u0275angular_packages_core_core_y",function(){return Fy}),n.d(t,"\u0275angular_packages_core_core_w",function(){return Ly}),n.d(t,"\u0275angular_packages_core_core_x",function(){return Iy}),n.d(t,"\u0275angular_packages_core_core_bb",function(){return lm}),n.d(t,"\u0275angular_packages_core_core_bc",function(){return ga}),n.d(t,"\u0275angular_packages_core_core_bd",function(){return Gr}),n.d(t,"\u0275angular_packages_core_core_be",function(){return ni}),n.d(t,"\u0275angular_packages_core_core_bf",function(){return yi}),n.d(t,"\u0275angular_packages_core_core_bj",function(){return Ua}),n.d(t,"\u0275angular_packages_core_core_bp",function(){return sa}),n.d(t,"\u0275angular_packages_core_core_bo",function(){return vr}),n.d(t,"\u0275angular_packages_core_core_g",function(){return bf}),n.d(t,"\u0275angular_packages_core_core_h",function(){return Tf}),n.d(t,"\u0275angular_packages_core_core_i",function(){return Ef}),n.d(t,"\u0275angular_packages_core_core_bh",function(){return bo}),n.d(t,"\u0275angular_packages_core_core_bn",function(){return on}),n.d(t,"\u0275angular_packages_core_core_bk",function(){return M}),n.d(t,"\u0275angular_packages_core_core_bl",function(){return A}),n.d(t,"\u0275angular_packages_core_core_bq",function(){return F}),n.d(t,"\u0275angular_packages_core_core_z",function(){return W_}),n.d(t,"\u0275angular_packages_core_core_ba",function(){return vp}),n.d(t,"createPlatform",function(){return ab}),n.d(t,"assertPlatform",function(){return ub}),n.d(t,"destroyPlatform",function(){return lb}),n.d(t,"getPlatform",function(){return cb}),n.d(t,"PlatformRef",function(){return hb}),n.d(t,"ApplicationRef",function(){return fb}),n.d(t,"createPlatformFactory",function(){return sb}),n.d(t,"NgProbeToken",function(){return ob}),n.d(t,"enableProdMode",function(){return Ui}),n.d(t,"isDevMode",function(){return ki}),n.d(t,"APP_ID",function(){return ry}),n.d(t,"PACKAGE_ROOT_URL",function(){return cy}),n.d(t,"PLATFORM_INITIALIZER",function(){return sy}),n.d(t,"PLATFORM_ID",function(){return uy}),n.d(t,"APP_BOOTSTRAP_LISTENER",function(){return ly}),n.d(t,"APP_INITIALIZER",function(){return ty}),n.d(t,"ApplicationInitStatus",function(){return ny}),n.d(t,"DebugElement",function(){return Yb}),n.d(t,"DebugEventListener",function(){return Pb}),n.d(t,"DebugNode",function(){return zb}),n.d(t,"asNativeElements",function(){return Ob}),n.d(t,"getDebugNode",function(){return Gb}),n.d(t,"Testability",function(){return Zy}),n.d(t,"TestabilityRegistry",function(){return Jy}),n.d(t,"setTestabilityGetter",function(){return $y}),n.d(t,"TRANSLATIONS",function(){return fy}),n.d(t,"TRANSLATIONS_FORMAT",function(){return py}),n.d(t,"LOCALE_ID",function(){return dy}),n.d(t,"MissingTranslationStrategy",function(){return _y}),n.d(t,"ApplicationModule",function(){return Zb}),n.d(t,"wtfCreateScope",function(){return ky}),n.d(t,"wtfLeave",function(){return Uy}),n.d(t,"wtfStartTimeRange",function(){return Vy}),n.d(t,"wtfEndTimeRange",function(){return Gy}),n.d(t,"Type",function(){return Ee}),n.d(t,"EventEmitter",function(){return Vg}),n.d(t,"ErrorHandler",function(){return Oa}),n.d(t,"Sanitizer",function(){return co}),n.d(t,"SecurityContext",function(){return lo}),n.d(t,"Attribute",function(){return L}),n.d(t,"ANALYZE_FOR_ENTRY_COMPONENTS",function(){return jt}),n.d(t,"ContentChild",function(){return Ht}),n.d(t,"ContentChildren",function(){return Yt}),n.d(t,"Query",function(){return zt}),n.d(t,"ViewChild",function(){return Xt}),n.d(t,"ViewChildren",function(){return Wt}),n.d(t,"Component",function(){return Vv}),n.d(t,"Directive",function(){return Uv}),n.d(t,"HostBinding",function(){return Yv}),n.d(t,"HostListener",function(){return Hv}),n.d(t,"Input",function(){return jv}),n.d(t,"Output",function(){return zv}),n.d(t,"Pipe",function(){return Gv}),n.d(t,"NgModule",function(){return Jv}),n.d(t,"CUSTOM_ELEMENTS_SCHEMA",function(){return wa}),n.d(t,"NO_ERRORS_SCHEMA",function(){return La}),n.d(t,"ViewEncapsulation",function(){return rn}),n.d(t,"Version",function(){return Nf}),n.d(t,"VERSION",function(){return Bf}),n.d(t,"InjectFlags",function(){return I}),n.d(t,"\u0275\u0275defineInjectable",function(){return B}),n.d(t,"defineInjectable",function(){return k}),n.d(t,"\u0275\u0275defineInjector",function(){return U}),n.d(t,"forwardRef",function(){return W}),n.d(t,"resolveForwardRef",function(){return X}),n.d(t,"Injectable",function(){return Ye}),n.d(t,"Injector",function(){return ht}),n.d(t,"\u0275\u0275inject",function(){return pe}),n.d(t,"inject",function(){return _e}),n.d(t,"INJECTOR",function(){return ne}),n.d(t,"ReflectiveInjector",function(){return Vt}),n.d(t,"ResolvedReflectiveFactory",function(){return wt}),n.d(t,"ReflectiveKey",function(){return St}),n.d(t,"InjectionToken",function(){return te}),n.d(t,"Inject",function(){return C}),n.d(t,"Optional",function(){return P}),n.d(t,"Self",function(){return R}),n.d(t,"SkipSelf",function(){return D}),n.d(t,"Host",function(){return O}),n.d(t,"\u02750",function(){return S}),n.d(t,"\u02751",function(){return w}),n.d(t,"NgZone",function(){return Yy}),n.d(t,"\u0275NoopNgZone",function(){return qy}),n.d(t,"RenderComponentType",function(){return Cf}),n.d(t,"Renderer",function(){return Rf}),n.d(t,"Renderer2",function(){return Lf}),n.d(t,"RendererFactory2",function(){return Of}),n.d(t,"RendererStyleFlags2",function(){return wf}),n.d(t,"RootRenderer",function(){return Df}),n.d(t,"COMPILER_OPTIONS",function(){return Ry}),n.d(t,"Compiler",function(){return Py}),n.d(t,"CompilerFactory",function(){return Dy}),n.d(t,"ModuleWithComponentFactories",function(){return my}),n.d(t,"ComponentFactory",function(){return af}),n.d(t,"\u0275ComponentFactory",function(){return af}),n.d(t,"ComponentRef",function(){return of}),n.d(t,"ComponentFactoryResolver",function(){return ff}),n.d(t,"ElementRef",function(){return Mf}),n.d(t,"NgModuleFactory",function(){return gf}),n.d(t,"NgModuleRef",function(){return mf}),n.d(t,"NgModuleFactoryLoader",function(){return _b}),n.d(t,"getModuleFactory",function(){return vb}),n.d(t,"QueryList",function(){return jg}),n.d(t,"SystemJsNgModuleLoader",function(){return Mb}),n.d(t,"SystemJsNgModuleLoaderConfig",function(){return Eb}),n.d(t,"TemplateRef",function(){return np}),n.d(t,"ViewContainerRef",function(){return op}),n.d(t,"EmbeddedViewRef",function(){return Cb}),n.d(t,"ViewRef",function(){return Sb}),n.d(t,"ChangeDetectionStrategy",function(){return Kt}),n.d(t,"ChangeDetectorRef",function(){return qf}),n.d(t,"DefaultIterableDiffer",function(){return Vf}),n.d(t,"IterableDiffers",function(){return Kf}),n.d(t,"KeyValueDiffers",function(){return Qf}),n.d(t,"SimpleChange",function(){return Vd}),n.d(t,"WrappedValue",function(){return Jl}),n.d(t,"platformCore",function(){return Hb}),n.d(t,"\u0275ALLOW_MULTIPLE_PLATFORMS",function(){return ib}),n.d(t,"\u0275APP_ID_RANDOM_PROVIDER",function(){return oy}),n.d(t,"\u0275defaultIterableDiffers",function(){return ep}),n.d(t,"\u0275defaultKeyValueDiffers",function(){return tp}),n.d(t,"\u0275devModeEqual",function(){return Zl}),n.d(t,"\u0275isListLikeIterable",function(){return $l}),n.d(t,"\u0275ChangeDetectorStatus",function(){return Qt}),n.d(t,"\u0275isDefaultChangeDetectionStrategy",function(){return qt}),n.d(t,"\u0275Console",function(){return hy}),n.d(t,"\u0275setCurrentInjector",function(){return he}),n.d(t,"\u0275getInjectableDef",function(){return V}),n.d(t,"\u0275APP_ROOT",function(){return Qe}),n.d(t,"\u0275ivyEnabled",function(){return Tb}),n.d(t,"\u0275CodegenComponentFactoryResolver",function(){return pf}),n.d(t,"\u0275clearResolutionOfComponentResourcesQueue",function(){return tn}),n.d(t,"\u0275resolveComponentResources",function(){return Zt}),n.d(t,"\u0275ReflectionCapabilities",function(){return Pe}),n.d(t,"\u0275RenderDebugInfo",function(){return Pf}),n.d(t,"\u0275_sanitizeHtml",function(){return so}),n.d(t,"\u0275_sanitizeStyle",function(){return po}),n.d(t,"\u0275_sanitizeUrl",function(){return zi}),n.d(t,"\u0275global",function(){return J}),n.d(t,"\u0275looseIdentical",function(){return ql}),n.d(t,"\u0275stringify",function(){return Y}),n.d(t,"\u0275makeDecorator",function(){return E}),n.d(t,"\u0275isObservable",function(){return Nh}),n.d(t,"\u0275isPromise",function(){return Fh}),n.d(t,"\u0275clearOverrides",function(){return CE}),n.d(t,"\u0275initServicesIfNeeded",function(){return GT}),n.d(t,"\u0275overrideComponentView",function(){return SE}),n.d(t,"\u0275overrideProvider",function(){return AE}),n.d(t,"\u0275NOT_FOUND_CHECK_ONLY_ELEMENT_INJECTOR",function(){return $_}),n.d(t,"\u0275getLocalePluralCase",function(){return mm}),n.d(t,"\u0275findLocaleData",function(){return gm}),n.d(t,"\u0275LOCALE_DATA",function(){return dm}),n.d(t,"\u0275LocaleDataIndex",function(){return fm}),n.d(t,"\u0275\u0275attribute",function(){return cc}),n.d(t,"\u0275\u0275attributeInterpolate1",function(){return bc}),n.d(t,"\u0275\u0275attributeInterpolate2",function(){return Tc}),n.d(t,"\u0275\u0275attributeInterpolate3",function(){return Ec}),n.d(t,"\u0275\u0275attributeInterpolate4",function(){return xc}),n.d(t,"\u0275\u0275attributeInterpolate5",function(){return Mc}),n.d(t,"\u0275\u0275attributeInterpolate6",function(){return Ac}),n.d(t,"\u0275\u0275attributeInterpolate7",function(){return Sc}),n.d(t,"\u0275\u0275attributeInterpolate8",function(){return Cc}),n.d(t,"\u0275\u0275attributeInterpolateV",function(){return Pc}),n.d(t,"\u0275\u0275defineBase",function(){return xn}),n.d(t,"\u0275\u0275defineComponent",function(){return mn}),n.d(t,"\u0275\u0275defineDirective",function(){return Mn}),n.d(t,"\u0275\u0275definePipe",function(){return An}),n.d(t,"\u0275\u0275defineNgModule",function(){return bn}),n.d(t,"\u0275detectChanges",function(){return Rc}),n.d(t,"\u0275renderComponent",function(){return Id}),n.d(t,"\u0275Render3ComponentFactory",function(){return cm}),n.d(t,"\u0275Render3ComponentRef",function(){return hm}),n.d(t,"\u0275\u0275directiveInject",function(){return uh}),n.d(t,"\u0275\u0275injectAttribute",function(){return lh}),n.d(t,"\u0275\u0275getFactoryOf",function(){return Sa}),n.d(t,"\u0275\u0275getInheritedFactory",function(){return Ca}),n.d(t,"\u0275\u0275setComponentScope",function(){return gn}),n.d(t,"\u0275\u0275setNgModuleScope",function(){return Tn}),n.d(t,"\u0275\u0275templateRefExtractor",function(){return dv}),n.d(t,"\u0275\u0275ProvidersFeature",function(){return rf}),n.d(t,"\u0275\u0275InheritDefinitionFeature",function(){return Wd}),n.d(t,"\u0275\u0275NgOnChangesFeature",function(){return Gd}),n.d(t,"\u0275LifecycleHooksFeature",function(){return kd}),n.d(t,"\u0275Render3NgModuleRef",function(){return yg}),n.d(t,"\u0275markDirty",function(){return Dc}),n.d(t,"\u0275NgModuleFactory",function(){return bg}),n.d(t,"\u0275NO_CHANGE",function(){return Na}),n.d(t,"\u0275\u0275container",function(){return $c}),n.d(t,"\u0275\u0275nextContext",function(){return jh}),n.d(t,"\u0275\u0275elementStart",function(){return Sh}),n.d(t,"\u0275\u0275namespaceHTML",function(){return Ci}),n.d(t,"\u0275\u0275namespaceMathML",function(){return Si}),n.d(t,"\u0275\u0275namespaceSVG",function(){return Ai}),n.d(t,"\u0275\u0275element",function(){return Ph}),n.d(t,"\u0275\u0275listener",function(){return Bh}),n.d(t,"\u0275\u0275text",function(){return id}),n.d(t,"\u0275\u0275textInterpolate",function(){return ad}),n.d(t,"\u0275\u0275textInterpolate1",function(){return sd}),n.d(t,"\u0275\u0275textInterpolate2",function(){return ud}),n.d(t,"\u0275\u0275textInterpolate3",function(){return ld}),n.d(t,"\u0275\u0275textInterpolate4",function(){return cd}),n.d(t,"\u0275\u0275textInterpolate5",function(){return hd}),n.d(t,"\u0275\u0275textInterpolate6",function(){return dd}),n.d(t,"\u0275\u0275textInterpolate7",function(){return fd}),n.d(t,"\u0275\u0275textInterpolate8",function(){return pd}),n.d(t,"\u0275\u0275textInterpolateV",function(){return _d}),n.d(t,"\u0275\u0275embeddedViewStart",function(){return wh}),n.d(t,"\u0275\u0275projection",function(){return Xh}),n.d(t,"\u0275\u0275interpolation1",function(){return dc}),n.d(t,"\u0275\u0275interpolation2",function(){return fc}),n.d(t,"\u0275\u0275interpolation3",function(){return pc}),n.d(t,"\u0275\u0275interpolation4",function(){return _c}),n.d(t,"\u0275\u0275interpolation5",function(){return mc}),n.d(t,"\u0275\u0275interpolation6",function(){return gc}),n.d(t,"\u0275\u0275interpolation7",function(){return vc}),n.d(t,"\u0275\u0275interpolation8",function(){return yc}),n.d(t,"\u0275\u0275interpolationV",function(){return hc}),n.d(t,"\u0275\u0275pipeBind1",function(){return Lg}),n.d(t,"\u0275\u0275pipeBind2",function(){return Ig}),n.d(t,"\u0275\u0275pipeBind3",function(){return Fg}),n.d(t,"\u0275\u0275pipeBind4",function(){return Ng}),n.d(t,"\u0275\u0275pipeBindV",function(){return Bg}),n.d(t,"\u0275\u0275pureFunction0",function(){return Eg}),n.d(t,"\u0275\u0275pureFunction1",function(){return xg}),n.d(t,"\u0275\u0275pureFunction2",function(){return Mg}),n.d(t,"\u0275\u0275pureFunction3",function(){return Ag}),n.d(t,"\u0275\u0275pureFunction4",function(){return Sg}),n.d(t,"\u0275\u0275pureFunction5",function(){return Cg}),n.d(t,"\u0275\u0275pureFunction6",function(){return Pg}),n.d(t,"\u0275\u0275pureFunction7",function(){return Rg}),n.d(t,"\u0275\u0275pureFunction8",function(){return Dg}),n.d(t,"\u0275\u0275pureFunctionV",function(){return Og}),n.d(t,"\u0275\u0275getCurrentView",function(){return Ih}),n.d(t,"\u0275getDirectives",function(){return xd}),n.d(t,"\u0275getHostElement",function(){return Ad}),n.d(t,"\u0275\u0275restoreView",function(){return ti}),n.d(t,"\u0275\u0275containerRefreshStart",function(){return th}),n.d(t,"\u0275\u0275containerRefreshEnd",function(){return nh}),n.d(t,"\u0275\u0275queryRefresh",function(){return rv}),n.d(t,"\u0275\u0275viewQuery",function(){return ov}),n.d(t,"\u0275\u0275staticViewQuery",function(){return iv}),n.d(t,"\u0275\u0275staticContentQuery",function(){return cv}),n.d(t,"\u0275\u0275loadViewQuery",function(){return sv}),n.d(t,"\u0275\u0275contentQuery",function(){return uv}),n.d(t,"\u0275\u0275loadContentQuery",function(){return hv}),n.d(t,"\u0275\u0275elementEnd",function(){return Ch}),n.d(t,"\u0275\u0275property",function(){return sc}),n.d(t,"\u0275\u0275propertyInterpolate",function(){return Kh}),n.d(t,"\u0275\u0275propertyInterpolate1",function(){return Qh}),n.d(t,"\u0275\u0275propertyInterpolate2",function(){return qh}),n.d(t,"\u0275\u0275propertyInterpolate3",function(){return Zh}),n.d(t,"\u0275\u0275propertyInterpolate4",function(){return Jh}),n.d(t,"\u0275\u0275propertyInterpolate5",function(){return $h}),n.d(t,"\u0275\u0275propertyInterpolate6",function(){return ed}),n.d(t,"\u0275\u0275propertyInterpolate7",function(){return td}),n.d(t,"\u0275\u0275propertyInterpolate8",function(){return nd}),n.d(t,"\u0275\u0275propertyInterpolateV",function(){return rd}),n.d(t,"\u0275\u0275updateSyntheticHostBinding",function(){return lc}),n.d(t,"\u0275\u0275componentHostSyntheticListener",function(){return kh}),n.d(t,"\u0275\u0275projectionDef",function(){return Yh}),n.d(t,"\u0275\u0275reference",function(){return ah}),n.d(t,"\u0275\u0275enableBindings",function(){return Ur}),n.d(t,"\u0275\u0275disableBindings",function(){return Vr}),n.d(t,"\u0275\u0275allocHostVars",function(){return Xl}),n.d(t,"\u0275\u0275elementContainerStart",function(){return Dh}),n.d(t,"\u0275\u0275elementContainerEnd",function(){return Oh}),n.d(t,"\u0275\u0275styling",function(){return gh}),n.d(t,"\u0275\u0275styleMap",function(){return Th}),n.d(t,"\u0275\u0275classMap",function(){return Eh}),n.d(t,"\u0275\u0275styleProp",function(){return yh}),n.d(t,"\u0275\u0275stylingApply",function(){return xh}),n.d(t,"\u0275\u0275classProp",function(){return bh}),n.d(t,"\u0275\u0275elementHostAttrs",function(){return Rh}),n.d(t,"\u0275\u0275select",function(){return Ku}),n.d(t,"\u0275\u0275textBinding",function(){return od}),n.d(t,"\u0275\u0275template",function(){return eh}),n.d(t,"\u0275\u0275embeddedViewEnd",function(){return Lh}),n.d(t,"\u0275store",function(){return oh}),n.d(t,"\u0275\u0275load",function(){return sh}),n.d(t,"\u0275\u0275pipe",function(){return wg}),n.d(t,"\u0275whenRendered",function(){return Ud}),n.d(t,"\u0275\u0275i18n",function(){return qm}),n.d(t,"\u0275\u0275i18nAttributes",function(){return Zm}),n.d(t,"\u0275\u0275i18nExp",function(){return eg}),n.d(t,"\u0275\u0275i18nStart",function(){return zm}),n.d(t,"\u0275\u0275i18nEnd",function(){return Wm}),n.d(t,"\u0275\u0275i18nApply",function(){return tg}),n.d(t,"\u0275\u0275i18nPostprocess",function(){return Hm}),n.d(t,"\u0275i18nConfigureLocalize",function(){return sg}),n.d(t,"\u0275\u0275i18nLocalize",function(){return lg}),n.d(t,"\u0275setLocaleId",function(){return dg}),n.d(t,"\u0275DEFAULT_LOCALE_ID",function(){return cg}),n.d(t,"\u0275setClassMetadata",function(){return Tg}),n.d(t,"\u0275\u0275resolveWindow",function(){return In}),n.d(t,"\u0275\u0275resolveDocument",function(){return Fn}),n.d(t,"\u0275\u0275resolveBody",function(){return Nn}),n.d(t,"\u0275compileComponent",function(){return Cv}),n.d(t,"\u0275compileDirective",function(){return Pv}),n.d(t,"\u0275compileNgModule",function(){return yv}),n.d(t,"\u0275compileNgModuleDefs",function(){return bv}),n.d(t,"\u0275patchComponentDefWithScope",function(){return xv}),n.d(t,"\u0275resetCompiledComponents",function(){return Tv}),n.d(t,"\u0275flushModuleScopingQueueAsMuchAsPossible",function(){return gv}),n.d(t,"\u0275transitiveScopesFor",function(){return Mv}),n.d(t,"\u0275compilePipe",function(){return kv}),n.d(t,"\u0275\u0275sanitizeHtml",function(){return _o}),n.d(t,"\u0275\u0275sanitizeStyle",function(){return mo}),n.d(t,"\u0275\u0275defaultStyleSanitizer",function(){return Eo}),n.d(t,"\u0275\u0275sanitizeScript",function(){return yo}),n.d(t,"\u0275\u0275sanitizeUrl",function(){return go}),n.d(t,"\u0275\u0275sanitizeResourceUrl",function(){return vo}),n.d(t,"\u0275\u0275sanitizeUrlOrResourceUrl",function(){return To}),n.d(t,"\u0275bypassSanitizationTrustHtml",function(){return Di}),n.d(t,"\u0275bypassSanitizationTrustStyle",function(){return Oi}),n.d(t,"\u0275bypassSanitizationTrustScript",function(){return wi}),n.d(t,"\u0275bypassSanitizationTrustUrl",function(){return Li}),n.d(t,"\u0275bypassSanitizationTrustResourceUrl",function(){return Ii}),n.d(t,"\u0275getLContext",function(){return wo}),n.d(t,"\u0275NG_ELEMENT_ID",function(){return pn}),n.d(t,"\u0275NG_COMPONENT_DEF",function(){return un}),n.d(t,"\u0275NG_DIRECTIVE_DEF",function(){return ln}),n.d(t,"\u0275NG_PIPE_DEF",function(){return cn}),n.d(t,"\u0275NG_MODULE_DEF",function(){return hn}),n.d(t,"\u0275NG_BASE_DEF",function(){return fn}),n.d(t,"\u0275NG_INJECTABLE_DEF",function(){return j}),n.d(t,"\u0275NG_INJECTOR_DEF",function(){return z}),n.d(t,"\u0275bindPlayerFactory",function(){return ka}),n.d(t,"\u0275addPlayer",function(){return md}),n.d(t,"\u0275getPlayers",function(){return gd}),n.d(t,"\u0275compileNgModuleFactory__POST_R3__",function(){return nb}),n.d(t,"\u0275isBoundToModule__POST_R3__",function(){return rb}),n.d(t,"\u0275SWITCH_COMPILE_COMPONENT__POST_R3__",function(){return Wv}),n.d(t,"\u0275SWITCH_COMPILE_DIRECTIVE__POST_R3__",function(){return Xv}),n.d(t,"\u0275SWITCH_COMPILE_PIPE__POST_R3__",function(){return Kv}),n.d(t,"\u0275SWITCH_COMPILE_NGMODULE__POST_R3__",function(){return $v}),n.d(t,"\u0275getDebugNode__POST_R3__",function(){return Vb}),n.d(t,"\u0275SWITCH_COMPILE_INJECTABLE__POST_R3__",function(){return He}),n.d(t,"\u0275SWITCH_IVY_ENABLED__POST_R3__",function(){return bb}),n.d(t,"\u0275SWITCH_CHANGE_DETECTOR_REF_FACTORY__POST_R3__",function(){return Zf}),n.d(t,"\u0275Compiler_compileModuleSync__POST_R3__",function(){return by}),n.d(t,"\u0275Compiler_compileModuleAsync__POST_R3__",function(){return Ey}),n.d(t,"\u0275Compiler_compileModuleAndAllComponentsSync__POST_R3__",function(){return My}),n.d(t,"\u0275Compiler_compileModuleAndAllComponentsAsync__POST_R3__",function(){return Sy}),n.d(t,"\u0275SWITCH_ELEMENT_REF_FACTORY__POST_R3__",function(){return Af}),n.d(t,"\u0275SWITCH_TEMPLATE_REF_FACTORY__POST_R3__",function(){return rp}),n.d(t,"\u0275SWITCH_VIEW_CONTAINER_REF_FACTORY__POST_R3__",function(){return ap}),n.d(t,"\u0275SWITCH_RENDERER2_FACTORY__POST_R3__",function(){return If}),n.d(t,"\u0275getModuleFactory__POST_R3__",function(){return gb}),n.d(t,"\u0275registerNgModuleType",function(){return mg}),n.d(t,"\u0275publishGlobalUtil",function(){return Ld}),n.d(t,"\u0275publishDefaultGlobalUtils",function(){return wd}),n.d(t,"\u0275createInjector",function(){return tt}),n.d(t,"\u0275INJECTOR_IMPL__POST_R3__",function(){return lt}),n.d(t,"\u0275registerModuleFactory",function(){return pg}),n.d(t,"\u0275EMPTY_ARRAY",function(){return n_}),n.d(t,"\u0275EMPTY_MAP",function(){return r_}),n.d(t,"\u0275and",function(){return Jb}),n.d(t,"\u0275ccf",function(){return v_}),n.d(t,"\u0275cmf",function(){return PE}),n.d(t,"\u0275crt",function(){return Sp}),n.d(t,"\u0275did",function(){return z_}),n.d(t,"\u0275eld",function(){return $b}),n.d(t,"\u0275getComponentViewDefinitionFactory",function(){return y_}),n.d(t,"\u0275inlineInterpolate",function(){return e_}),n.d(t,"\u0275interpolate",function(){return $p}),n.d(t,"\u0275mod",function(){return l_}),n.d(t,"\u0275mpd",function(){return u_}),n.d(t,"\u0275ncd",function(){return lT}),n.d(t,"\u0275nov",function(){return D_}),n.d(t,"\u0275pid",function(){return Y_}),n.d(t,"\u0275prd",function(){return H_}),n.d(t,"\u0275pad",function(){return dT}),n.d(t,"\u0275pod",function(){return fT}),n.d(t,"\u0275ppd",function(){return hT}),n.d(t,"\u0275qud",function(){return iT}),n.d(t,"\u0275ted",function(){return _T}),n.d(t,"\u0275unv",function(){return xp}),n.d(t,"\u0275vid",function(){return vT});var y="__annotations__",b="__parameters__",T="__prop__metadata__";function E(e,t,n,i,o){var a=x(t);function s(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this instanceof s)return a.call.apply(a,Object(r.__spread)([this],t)),this;var u=new((e=s).bind.apply(e,Object(r.__spread)([void 0],t)));return function(e){return o&&o.apply(void 0,Object(r.__spread)([e],t)),(e.hasOwnProperty(y)?e[y]:Object.defineProperty(e,y,{value:[]})[y]).push(u),i&&i(e),e}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s}function x(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(e){var i=e.apply(void 0,Object(r.__spread)(t));for(var o in i)this[o]=i[o]}}}function M(e,t,n){var i=x(t);function o(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this instanceof o)return i.apply(this,t),this;var a=new((e=o).bind.apply(e,Object(r.__spread)([void 0],t)));return s.annotation=a,s;function s(e,t,n){for(var r=e.hasOwnProperty(b)?e[b]:Object.defineProperty(e,b,{value:[]})[b];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(a),e}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=e,o.annotationCls=o,o}function A(e,t,n,i){var o=x(t);function a(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(this instanceof a)return o.apply(this,t),this;var s=new((e=a).bind.apply(e,Object(r.__spread)([void 0],t)));return function(e,n){var o=e.constructor,a=o.hasOwnProperty(T)?o[T]:Object.defineProperty(o,T,{value:{}})[T];a[n]=a.hasOwnProperty(n)&&a[n]||[],a[n].unshift(s),i&&i.apply(void 0,Object(r.__spread)([e,n],t))}}return n&&(a.prototype=Object.create(n.prototype)),a.prototype.ngMetadataName=e,a.annotationCls=a,a}var S=function(e){return{token:e}},C=M("Inject",S),P=M("Optional"),R=M("Self"),D=M("SkipSelf"),O=M("Host"),w=function(e){return{attributeName:e}},L=M("Attribute",w),I=function(e){return e[e.Default=0]="Default",e[e.Host=1]="Host",e[e.Self=2]="Self",e[e.SkipSelf=4]="SkipSelf",e[e.Optional=8]="Optional",e}({});function F(e){for(var t in e)if(e[t]===F)return t;throw Error("Could not find renamed property on target object.")}function N(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function B(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}var k=B;function U(e){return{factory:e.factory,providers:e.providers||[],imports:e.imports||[]}}function V(e){var t=e[j];return t&&t.token===e?t:null}function G(e){return e&&e.hasOwnProperty(z)?e[z]:null}var j=F({ngInjectableDef:F}),z=F({ngInjectorDef:F});function Y(e){if("string"==typeof e)return e;if(e instanceof Array)return"["+e.map(Y).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return""+e.overriddenName;if(e.name)return""+e.name;var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}var H=F({__forward_ref__:F});function W(e){return e.__forward_ref__=W,e.toString=function(){return Y(this())},e}function X(e){var t=e;return"function"==typeof t&&t.hasOwnProperty(H)&&t.__forward_ref__===W?t():e}var K="undefined"!=typeof globalThis&&globalThis,Q="undefined"!=typeof window&&window,q="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Z="undefined"!=typeof global&&global,J=K||Z||Q||q;function $(){var e=J.ng;if(!e||!e.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return e.\u0275compilerFacade}var ee,te=function(){function e(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.ngInjectableDef=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.ngInjectableDef=B({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}return e.prototype.toString=function(){return"InjectionToken "+this._desc},e}(),ne=new te("INJECTOR",-1),re=new Object,ie="ngTempTokenPath",oe="ngTokenPath",ae=/\n/gm,se="\u0275",ue="__source",le=F({provide:String,useValue:F}),ce=void 0;function he(e){var t=ce;return ce=e,t}function de(e){var t=ee;return ee=e,t}function fe(e,t){if(void 0===t&&(t=I.Default),void 0===ce)throw new Error("inject() must be called from an injection context");return null===ce?me(e,void 0,t):ce.get(e,t&I.Optional?null:void 0,t)}function pe(e,t){return void 0===t&&(t=I.Default),(ee||fe)(e,t)}var _e=pe;function me(e,t,n){var r=V(e);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&I.Optional)return null;if(void 0!==t)return t;throw new Error("Injector: NOT_FOUND ["+Y(e)+"]")}function ge(e){for(var t=[],n=0;n<e.length;n++){var r=X(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=I.Default,a=0;a<r.length;a++){var s=r[a];s instanceof P||"Optional"===s.ngMetadataName||s===P?o|=I.Optional:s instanceof D||"SkipSelf"===s.ngMetadataName||s===D?o|=I.SkipSelf:s instanceof R||"Self"===s.ngMetadataName||s===R?o|=I.Self:i=s instanceof C||s===C?s.token:s}t.push(pe(i,o))}else t.push(pe(r))}return t}var ve=function(){function e(){}return e.prototype.get=function(e,t){if(void 0===t&&(t=re),t===re){var n=new Error("NullInjectorError: No provider for "+Y(e)+"!");throw n.name="NullInjectorError",n}return t},e}();function ye(e,t,n,r){var i=e[ie];throw t[ue]&&i.unshift(t[ue]),e.message=be("\n"+e.message,i,n,r),e[oe]=i,e[ie]=null,e}function be(e,t,n,r){void 0===r&&(r=null),e=e&&"\n"===e.charAt(0)&&e.charAt(1)==se?e.substr(2):e;var i=Y(t);if(t instanceof Array)i=t.map(Y).join(" -> ");else if("object"==typeof t){var o=[];for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];o.push(a+":"+("string"==typeof s?JSON.stringify(s):Y(s)))}i="{"+o.join(", ")+"}"}return n+(r?"("+r+")":"")+"["+i+"]: "+e.replace(ae,"\n  ")}var Te={"\u0275\u0275defineInjectable":B,"\u0275\u0275defineInjector":U,"\u0275\u0275inject":pe,"\u0275\u0275getFactoryOf":function(e){var t=e,n=V(t)||G(t);return n&&void 0!==n.factory?n.factory:null}},Ee=Function;function xe(e){return"function"==typeof e}var Me=/^function\s+\S+\(\)\s*{[\s\S]+\.apply\(this,\s*arguments\)/,Ae=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{/,Se=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(/,Ce=/^class\s+[A-Za-z\d$_]*\s*extends\s+[^{]+{[\s\S]*constructor\s*\(\)\s*{\s+super\(\.\.\.arguments\)/,Pe=function(){function e(e){this._reflect=e||J.Reflect}return e.prototype.isReflectionEnabled=function(){return!0},e.prototype.factory=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new(e.bind.apply(e,Object(r.__spread)([void 0],t)))}},e.prototype._zipTypesAndAnnotations=function(e,t){var n;n=void 0===e?new Array(t.length):new Array(e.length);for(var r=0;r<n.length;r++)n[r]=void 0===e?[]:e[r]&&e[r]!=Object?[e[r]]:[],t&&null!=t[r]&&(n[r]=n[r].concat(t[r]));return n},e.prototype._ownParameters=function(e,t){if(function(e){return Me.test(e)||Ce.test(e)||Ae.test(e)&&!Se.test(e)}(e.toString()))return null;if(e.parameters&&e.parameters!==t.parameters)return e.parameters;var n=e.ctorParameters;if(n&&n!==t.ctorParameters){var r="function"==typeof n?n():n,i=r.map(function(e){return e&&e.type}),o=r.map(function(e){return e&&Re(e.decorators)});return this._zipTypesAndAnnotations(i,o)}var a=e.hasOwnProperty(b)&&e[b],s=this._reflect&&this._reflect.getOwnMetadata&&this._reflect.getOwnMetadata("design:paramtypes",e);return s||a?this._zipTypesAndAnnotations(s,a):new Array(e.length).fill(void 0)},e.prototype.parameters=function(e){if(!xe(e))return[];var t=De(e),n=this._ownParameters(e,t);return n||t===Object||(n=this.parameters(t)),n||[]},e.prototype._ownAnnotations=function(e,t){if(e.annotations&&e.annotations!==t.annotations){var n=e.annotations;return"function"==typeof n&&n.annotations&&(n=n.annotations),n}return e.decorators&&e.decorators!==t.decorators?Re(e.decorators):e.hasOwnProperty(y)?e[y]:null},e.prototype.annotations=function(e){if(!xe(e))return[];var t=De(e),n=this._ownAnnotations(e,t)||[];return(t!==Object?this.annotations(t):[]).concat(n)},e.prototype._ownPropMetadata=function(e,t){if(e.propMetadata&&e.propMetadata!==t.propMetadata){var n=e.propMetadata;return"function"==typeof n&&n.propMetadata&&(n=n.propMetadata),n}if(e.propDecorators&&e.propDecorators!==t.propDecorators){var r=e.propDecorators,i={};return Object.keys(r).forEach(function(e){i[e]=Re(r[e])}),i}return e.hasOwnProperty(T)?e[T]:null},e.prototype.propMetadata=function(e){if(!xe(e))return{};var t=De(e),n={};if(t!==Object){var i=this.propMetadata(t);Object.keys(i).forEach(function(e){n[e]=i[e]})}var o=this._ownPropMetadata(e,t);return o&&Object.keys(o).forEach(function(e){var t=[];n.hasOwnProperty(e)&&t.push.apply(t,Object(r.__spread)(n[e])),t.push.apply(t,Object(r.__spread)(o[e])),n[e]=t}),n},e.prototype.ownPropMetadata=function(e){return xe(e)&&this._ownPropMetadata(e,De(e))||{}},e.prototype.hasLifecycleHook=function(e,t){return e instanceof Ee&&t in e.prototype},e.prototype.guards=function(e){return{}},e.prototype.getter=function(e){return new Function("o","return o."+e+";")},e.prototype.setter=function(e){return new Function("o","v","return o."+e+" = v;")},e.prototype.method=function(e){return new Function("o","args","if (!o."+e+") throw new Error('\""+e+"\" is undefined');\n        return o."+e+".apply(o, args);")},e.prototype.importUri=function(e){return"object"==typeof e&&e.filePath?e.filePath:"./"+Y(e)},e.prototype.resourceUri=function(e){return"./"+Y(e)},e.prototype.resolveIdentifier=function(e,t,n,r){return r},e.prototype.resolveEnum=function(e,t){return e[t]},e}();function Re(e){return e?e.map(function(e){var t=e.type.annotationCls,n=e.args?e.args:[];return new(t.bind.apply(t,Object(r.__spread)([void 0],n)))}):[]}function De(e){var t=e.prototype?Object.getPrototypeOf(e.prototype):null;return(t?t.constructor:null)||Object}var Oe=null;function we(){return Oe=Oe||new Pe}function Le(e){return Ie(we().parameters(e))}function Ie(e){var t=$();return e.map(function(e){return function(e,t){var n={token:null,host:!1,optional:!1,resolved:e.R3ResolvedDependencyType.Token,self:!1,skipSelf:!1};function r(t){n.resolved=e.R3ResolvedDependencyType.Token,n.token=t}if(Array.isArray(t)){if(0===t.length)throw new Error("Dependency array must have arguments.");for(var i=0;i<t.length;i++){var o=t[i];if(void 0!==o)if(o instanceof P||"Optional"===o.__proto__.ngMetadataName)n.optional=!0;else if(o instanceof D||"SkipSelf"===o.__proto__.ngMetadataName)n.skipSelf=!0;else if(o instanceof R||"Self"===o.__proto__.ngMetadataName)n.self=!0;else if(o instanceof O||"Host"===o.__proto__.ngMetadataName)n.host=!0;else if(o instanceof C)n.token=o.token;else if(o instanceof L){if(void 0===o.attributeName)throw new Error("Attribute name must be defined.");n.token=o.attributeName,n.resolved=e.R3ResolvedDependencyType.Attribute}else r(o)}}else r(t);return n}(t,e)})}function Fe(e,t){var n=null;e.hasOwnProperty(j)||Object.defineProperty(e,j,{get:function(){if(null===n){var r=t||{providedIn:null},i=Be(r)||Ue(r)||ke(r)||Ve(r),o={name:e.name,type:e,typeArgumentCount:0,providedIn:r.providedIn,ctorDeps:Le(e),userDeps:void 0};if((Be(r)||Ue(r))&&void 0!==r.deps&&(o.userDeps=Ie(r.deps)),i)if(Be(r))o.useClass=r.useClass;else if(ke(r))o.useValue=r.useValue;else if(Ue(r))o.useFactory=r.useFactory;else{if(!Ve(r))throw new Error("Unreachable state.");o.useExisting=r.useExisting}else o.useClass=e;n=$().compileInjectable(Te,"ng:///"+e.name+"/ngInjectableDef.js",o)}return n}})}var Ne=F({provide:String,useValue:F});function Be(e){return void 0!==e.useClass}function ke(e){return Ne in e}function Ue(e){return void 0!==e.useFactory}function Ve(e){return void 0!==e.useExisting}var Ge=F({provide:String,useValue:F}),je=[];function ze(e,t){if(!t){var n=(l=new Pe).parameters(e);return function(){return new(e.bind.apply(e,Object(r.__spread)([void 0],ge(n))))}}if(Ge in t){var i=t;return function(){return i.useValue}}if(t.useExisting){var o=t;return function(){return pe(o.useExisting)}}if(t.useFactory){var a=t;return function(){return a.useFactory.apply(a,Object(r.__spread)(ge(a.deps||je)))}}if(t.useClass){var s=t,u=t.deps;if(!u){var l=new Pe;u=l.parameters(e)}return function(){var e;return new((e=s.useClass).bind.apply(e,Object(r.__spread)([void 0],ge(u))))}}var c=t.deps;return c||(l=new Pe,c=l.parameters(e)),function(){return new(e.bind.apply(e,Object(r.__spread)([void 0],ge(c))))}}var Ye=E("Injectable",void 0,void 0,void 0,function(e,t){return We(e,t)}),He=Fe,We=function(e,t){t&&void 0!==t.providedIn&&!V(e)&&(e.ngInjectableDef=B({token:e,providedIn:t.providedIn,factory:ze(e,t)}))};function Xe(e){throw new Error("Multiple components match node with tagname "+e.tagName)}function Ke(){throw new Error("Cannot mix multi providers and regular providers")}var Qe=new te("The presence of this token marks an injector as being the root injector."),qe={},Ze={},Je=[],$e=void 0;function et(){return void 0===$e&&($e=new ve),$e}function tt(e,t,n,r){return void 0===t&&(t=null),void 0===n&&(n=null),t=t||et(),new nt(e,n,t,r)}var nt=function(){function e(e,t,n,r){var i=this;void 0===r&&(r=null),this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var o=[];at([e],function(e){return i.processInjectorType(e,[],o)}),t&&at(t,function(n){return i.processProvider(n,e,t)}),this.records.set(ne,ot(void 0,this)),this.isRootInjector=this.records.has(Qe),this.injectorDefTypes.forEach(function(e){return i.get(e)}),this.source=r||("object"==typeof e?null:Y(e))}return Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}},e.prototype.get=function(e,t,n){void 0===t&&(t=re),void 0===n&&(n=I.Default),this.assertNotDestroyed();var r,i=he(this);try{if(!(n&I.SkipSelf)){var o=this.records.get(e);if(void 0===o){var a=("function"==typeof(r=e)||"object"==typeof r&&r instanceof te)&&V(e);a&&this.injectableDefInScope(a)&&(o=ot(rt(e),qe),this.records.set(e,o))}if(void 0!==o)return this.hydrate(e,o)}return(n&I.Self?et():this.parent).get(e,n&I.Optional?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[ie]=s[ie]||[]).unshift(Y(e)),i)throw s;return ye(s,e,"R3InjectorError",this.source)}throw s}finally{he(i)}},e.prototype.toString=function(){var e=[];return this.records.forEach(function(t,n){return e.push(Y(n))}),"R3Injector["+e.join(", ")+"]"},e.prototype.assertNotDestroyed=function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")},e.prototype.processInjectorType=function(e,t,n){var r=this;if(!(e=X(e)))return!1;var i=G(e),o=null==i&&e.ngModule||void 0,a=void 0===o?e:o,s=-1!==n.indexOf(a);if(void 0!==o&&(i=G(o)),null==i)return!1;if(this.injectorDefTypes.add(a),this.records.set(a,ot(i.factory,qe)),null!=i.imports&&!s){var u;n.push(a);try{at(i.imports,function(e){r.processInjectorType(e,t,n)&&(void 0===u&&(u=[]),u.push(e))})}finally{}if(void 0!==u)for(var l=function(e){var t=u[e],n=t.ngModule,i=t.providers;at(i,function(e){return r.processProvider(e,n,i||Je)})},c=0;c<u.length;c++)l(c)}var h=i.providers;if(null!=h&&!s){var d=e;at(h,function(e){return r.processProvider(e,d,h)})}return void 0!==o&&void 0!==e.providers},e.prototype.processProvider=function(e,t,n){var r=ut(e=X(e))?e:X(e&&e.provide),i=function(e,t,n){var r=it(e,t,n);return st(e)?ot(void 0,e.useValue):ot(r,qe)}(e,t,n);if(ut(e)||!0!==e.multi){var o=this.records.get(r);o&&void 0!==o.multi&&Ke()}else{var a=this.records.get(r);a?void 0===a.multi&&Ke():((a=ot(void 0,qe,!0)).factory=function(){return ge(a.multi)},this.records.set(r,a)),r=e,a.multi.push(e)}this.records.set(r,i)},e.prototype.hydrate=function(e,t){var n;return t.value===Ze?function(e){throw new Error("Cannot instantiate cyclic dependency! "+e)}(Y(e)):t.value===qe&&(t.value=Ze,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value},e.prototype.injectableDefInScope=function(e){return!!e.providedIn&&("string"==typeof e.providedIn?"any"===e.providedIn||"root"===e.providedIn&&this.isRootInjector:this.injectorDefTypes.has(e.providedIn))},e}();function rt(e){var t=V(e);if(null!==t)return t.factory;var n=G(e);if(null!==n)return n.factory;if(e instanceof te)throw new Error("Token "+Y(e)+" is missing an ngInjectableDef definition.");if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=new Array(t).fill("?");throw new Error("Can't resolve all parameters for "+Y(e)+": ("+n.join(", ")+").")}var r,i=(r=e)&&r[j]?(console.warn('DEPRECATED: DI is instantiating a token "'+r.name+'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in v10. Please add @Injectable() to the "'+r.name+'" class.'),r[j]):null;return null!==i?function(){return i.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function it(e,t,n){var i,o=void 0;if(ut(e))return rt(X(e));if(st(e))o=function(){return X(e.useValue)};else if((i=e)&&i.useExisting)o=function(){return pe(X(e.useExisting))};else if(e&&e.useFactory)o=function(){return e.useFactory.apply(e,Object(r.__spread)(ge(e.deps||[])))};else{var a=X(e&&(e.useClass||e.provide));if(a||function(e,t,n){var r="";throw e&&t&&(r=" - only instances of Provider and Type are allowed, got: ["+t.map(function(e){return e==n?"?"+n+"?":"..."}).join(", ")+"]"),new Error("Invalid provider for the NgModule '"+Y(e)+"'"+r)}(t,n,e),!e.deps)return rt(a);o=function(){return new(a.bind.apply(a,Object(r.__spread)([void 0],ge(e.deps))))}}return o}function ot(e,t,n){return void 0===n&&(n=!1),{factory:e,value:t,multi:n?[]:void 0}}function at(e,t){e.forEach(function(e){return Array.isArray(e)?at(e,t):t(e)})}function st(e){return null!==e&&"object"==typeof e&&le in e}function ut(e){return"function"==typeof e}function lt(e,t,n){return tt({name:n},t,e,n)}var ct=function(e,t,n){return new mt(e,t,n)},ht=function(){function e(){}return e.create=function(e,t){return Array.isArray(e)?ct(e,t,""):ct(e.providers,e.parent,e.name||"")},e.THROW_IF_NOT_FOUND=re,e.NULL=new ve,e.ngInjectableDef=B({token:e,providedIn:"any",factory:function(){return pe(ne)}}),e.__NG_ELEMENT_ID__=-1,e}(),dt=function(e){return e},ft=[],pt=dt,_t=function(){return Array.prototype.slice.call(arguments)},mt=function(){function e(e,t,n){void 0===t&&(t=ht.NULL),void 0===n&&(n=null),this.parent=t,this.source=n;var r=this._records=new Map;r.set(ht,{token:ht,fn:dt,deps:ft,value:this,useNew:!1}),r.set(ne,{token:ne,fn:dt,deps:ft,value:this,useNew:!1}),function e(t,n){if(n)if((n=X(n))instanceof Array)for(var r=0;r<n.length;r++)e(t,n[r]);else{if("function"==typeof n)throw vt("Function/Class not supported",n);if(!n||"object"!=typeof n||!n.provide)throw vt("Unexpected provider",n);var i=X(n.provide),o=function(e){var t=function(e){var t=ft,n=e.deps;if(n&&n.length){t=[];for(var r=0;r<n.length;r++){var i=6;if((u=X(n[r]))instanceof Array)for(var o=0,a=u;o<a.length;o++){var s=a[o];s instanceof P||s==P?i|=1:s instanceof D||s==D?i&=-3:s instanceof R||s==R?i&=-5:u=s instanceof C?s.token:X(s)}t.push({token:u,options:i})}}else if(e.useExisting){var u;t=[{token:u=X(e.useExisting),options:6}]}else if(!(n||le in e))throw vt("'deps' required",e);return t}(e),n=dt,r=ft,i=!1,o=X(e.provide);if(le in e)r=e.useValue;else if(e.useFactory)n=e.useFactory;else if(e.useExisting);else if(e.useClass)i=!0,n=X(e.useClass);else{if("function"!=typeof o)throw vt("StaticProvider does not have [useValue|useFactory|useExisting|useClass] or [provide] is not newable",e);i=!0,n=o}return{deps:t,fn:n,useNew:i,value:r}}(n);if(!0===n.multi){var a=t.get(i);if(a){if(a.fn!==_t)throw gt(i)}else t.set(i,a={token:n.provide,deps:[],useNew:!1,fn:_t,value:ft});a.deps.push({token:i=n,options:6})}var s=t.get(i);if(s&&s.fn==_t)throw gt(i);t.set(i,o)}}(r,e)}return e.prototype.get=function(e,t,n){void 0===n&&(n=I.Default);var i=this._records.get(e);try{return function e(t,n,i,o,a,s){try{return function(t,n,i,o,a,s){var u,l;if(!n||s&I.SkipSelf)s&I.Self||(l=o.get(t,a,I.Default));else{if((l=n.value)==pt)throw Error("\u0275Circular dependency");if(l===ft){n.value=pt;var c=n.useNew,h=n.fn,d=n.deps,f=ft;if(d.length){f=[];for(var p=0;p<d.length;p++){var _=d[p],m=_.options,g=2&m?i.get(_.token):void 0;f.push(e(_.token,g,i,g||4&m?o:ht.NULL,1&m?null:ht.THROW_IF_NOT_FOUND,I.Default))}}n.value=l=c?new((u=h).bind.apply(u,Object(r.__spread)([void 0],f))):h.apply(void 0,f)}}return l}(t,n,i,o,a,s)}catch(u){throw u instanceof Error||(u=new Error(u)),(u[ie]=u[ie]||[]).unshift(t),n&&n.value==pt&&(n.value=ft),u}}(e,i,this._records,this.parent,t,n)}catch(o){return ye(o,e,"StaticInjectorError",this.source)}},e.prototype.toString=function(){var e=[];return this._records.forEach(function(t,n){return e.push(Y(n))}),"StaticInjector["+e.join(", ")+"]"},e}();function gt(e){return vt("Cannot mix multi providers and regular providers",e)}function vt(e,t){return new Error(be(e,t,"StaticInjectorError"))}var yt="ngDebugContext",bt="ngOriginalError",Tt="ngErrorLogger";function Et(e){return e.length>1?" ("+function(e){for(var t=[],n=0;n<e.length;++n){if(t.indexOf(e[n])>-1)return t.push(e[n]),t;t.push(e[n])}return t}(e.slice().reverse()).map(function(e){return Y(e.token)}).join(" -> ")+")":""}function xt(e,t,n,r){var i=[t],o=n(i),a=r?function(e,t){var n=o+" caused by: "+(t instanceof Error?t.message:t),r=Error(n);return r[bt]=t,r}(0,r):Error(o);return a.addKey=Mt,a.keys=i,a.injectors=[e],a.constructResolvingMessage=n,a[bt]=r,a}function Mt(e,t){this.injectors.push(e),this.keys.push(t),this.message=this.constructResolvingMessage(this.keys)}function At(e,t){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];n.push(o&&0!=o.length?o.map(Y).join(" "):"?")}return Error("Cannot resolve all parameters for '"+Y(e)+"'("+n.join(", ")+"). Make sure that all the parameters are decorated with Inject or have valid type annotations and that '"+Y(e)+"' is decorated with Injectable.")}var St=function(){function e(e,t){if(this.token=e,this.id=t,!e)throw new Error("Token must be defined!");this.displayName=Y(this.token)}return e.get=function(e){return Ct.get(X(e))},Object.defineProperty(e,"numberOfKeys",{get:function(){return Ct.numberOfKeys},enumerable:!0,configurable:!0}),e}(),Ct=new(function(){function e(){this._allKeys=new Map}return e.prototype.get=function(e){if(e instanceof St)return e;if(this._allKeys.has(e))return this._allKeys.get(e);var t=new St(e,St.numberOfKeys);return this._allKeys.set(e,t),t},Object.defineProperty(e.prototype,"numberOfKeys",{get:function(){return this._allKeys.size},enumerable:!0,configurable:!0}),e}()),Pt=new(function(){function e(e){this.reflectionCapabilities=e}return e.prototype.updateCapabilities=function(e){this.reflectionCapabilities=e},e.prototype.factory=function(e){return this.reflectionCapabilities.factory(e)},e.prototype.parameters=function(e){return this.reflectionCapabilities.parameters(e)},e.prototype.annotations=function(e){return this.reflectionCapabilities.annotations(e)},e.prototype.propMetadata=function(e){return this.reflectionCapabilities.propMetadata(e)},e.prototype.hasLifecycleHook=function(e,t){return this.reflectionCapabilities.hasLifecycleHook(e,t)},e.prototype.getter=function(e){return this.reflectionCapabilities.getter(e)},e.prototype.setter=function(e){return this.reflectionCapabilities.setter(e)},e.prototype.method=function(e){return this.reflectionCapabilities.method(e)},e.prototype.importUri=function(e){return this.reflectionCapabilities.importUri(e)},e.prototype.resourceUri=function(e){return this.reflectionCapabilities.resourceUri(e)},e.prototype.resolveIdentifier=function(e,t,n,r){return this.reflectionCapabilities.resolveIdentifier(e,t,n,r)},e.prototype.resolveEnum=function(e,t){return this.reflectionCapabilities.resolveEnum(e,t)},e}())(new Pe),Rt=function(){function e(e,t,n){this.key=e,this.optional=t,this.visibility=n}return e.fromKey=function(t){return new e(t,!1,null)},e}(),Dt=[],Ot=function(){return function(e,t,n){this.key=e,this.resolvedFactories=t,this.multiProvider=n,this.resolvedFactory=this.resolvedFactories[0]}}(),wt=function(){return function(e,t){this.factory=e,this.dependencies=t}}();function Lt(e){var t,n;if(e.useClass){var r=X(e.useClass);t=Pt.factory(r),n=Nt(r)}else e.useExisting?(t=function(e){return e},n=[Rt.fromKey(St.get(e.useExisting))]):e.useFactory?(t=e.useFactory,n=function(e,t){if(t){var n=t.map(function(e){return[e]});return t.map(function(t){return Bt(e,t,n)})}return Nt(e)}(e.useFactory,e.deps)):(t=function(){return e.useValue},n=Dt);return new wt(t,n)}function It(e){return new Ot(St.get(e.provide),[Lt(e)],e.multi||!1)}function Ft(e){var t=function(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=t.get(r.key.id);if(i){if(r.multiProvider!==i.multiProvider)throw Error("Cannot mix multi providers and regular providers, got: "+i+" "+r);if(r.multiProvider)for(var o=0;o<r.resolvedFactories.length;o++)i.resolvedFactories.push(r.resolvedFactories[o]);else t.set(r.key.id,r)}else{var a;a=r.multiProvider?new Ot(r.key,r.resolvedFactories.slice(),r.multiProvider):r,t.set(r.key.id,a)}}return t}(function e(t,n){return t.forEach(function(t){if(t instanceof Ee)n.push({provide:t,useClass:t});else if(t&&"object"==typeof t&&void 0!==t.provide)n.push(t);else{if(!(t instanceof Array))throw Error("Invalid provider - only instances of Provider and Type are allowed, got: "+t);e(t,n)}}),n}(e,[]).map(It),new Map);return Array.from(t.values())}function Nt(e){var t=Pt.parameters(e);if(!t)return[];if(t.some(function(e){return null==e}))throw At(e,t);return t.map(function(n){return Bt(e,n,t)})}function Bt(e,t,n){var r=null,i=!1;if(!Array.isArray(t))return kt(t instanceof C?t.token:t,i,null);for(var o=null,a=0;a<t.length;++a){var s=t[a];s instanceof Ee?r=s:s instanceof C?r=s.token:s instanceof P?i=!0:s instanceof R||s instanceof D?o=s:s instanceof te&&(r=s)}if(null!=(r=X(r)))return kt(r,i,o);throw At(e,n)}function kt(e,t,n){return new Rt(St.get(e),t,n)}var Ut=new Object,Vt=function(){function e(){}return e.resolve=function(e){return Ft(e)},e.resolveAndCreate=function(t,n){var r=e.resolve(t);return e.fromResolvedProviders(r,n)},e.fromResolvedProviders=function(e,t){return new Gt(e,t)},e}(),Gt=function(){function e(e,t){this._constructionCounter=0,this._providers=e,this.parent=t||null;var n=e.length;this.keyIds=new Array(n),this.objs=new Array(n);for(var r=0;r<n;r++)this.keyIds[r]=e[r].key.id,this.objs[r]=Ut}return e.prototype.get=function(e,t){return void 0===t&&(t=re),this._getByKey(St.get(e),null,t)},e.prototype.resolveAndCreateChild=function(e){var t=Vt.resolve(e);return this.createChildFromResolved(t)},e.prototype.createChildFromResolved=function(t){var n=new e(t);return n.parent=this,n},e.prototype.resolveAndInstantiate=function(e){return this.instantiateResolved(Vt.resolve([e])[0])},e.prototype.instantiateResolved=function(e){return this._instantiateProvider(e)},e.prototype.getProviderAtIndex=function(e){if(e<0||e>=this._providers.length)throw function(e){return Error("Index "+e+" is out-of-bounds.")}(e);return this._providers[e]},e.prototype._new=function(e){if(this._constructionCounter++>this._getMaxNumberOfObjects())throw xt(this,e.key,function(e){return"Cannot instantiate cyclic dependency!"+Et(e)});return this._instantiateProvider(e)},e.prototype._getMaxNumberOfObjects=function(){return this.objs.length},e.prototype._instantiateProvider=function(e){if(e.multiProvider){for(var t=new Array(e.resolvedFactories.length),n=0;n<e.resolvedFactories.length;++n)t[n]=this._instantiate(e,e.resolvedFactories[n]);return t}return this._instantiate(e,e.resolvedFactories[0])},e.prototype._instantiate=function(e,t){var n,i,o,a=this,s=t.factory;try{n=t.dependencies.map(function(e){return a._getByReflectiveDependency(e)})}catch(u){throw u.addKey&&u.addKey(this,e.key),u}try{i=s.apply(void 0,Object(r.__spread)(n))}catch(u){throw xt(this,e.key,function(e){var t=Y(e[0].token);return o.message+": Error during instantiation of "+t+"!"+Et(e)+"."},o=u)}return i},e.prototype._getByReflectiveDependency=function(e){return this._getByKey(e.key,e.visibility,e.optional?null:re)},e.prototype._getByKey=function(t,n,r){return t===e.INJECTOR_KEY?this:n instanceof R?this._getByKeySelf(t,r):this._getByKeyDefault(t,r,n)},e.prototype._getObjByKeyId=function(e){for(var t=0;t<this.keyIds.length;t++)if(this.keyIds[t]===e)return this.objs[t]===Ut&&(this.objs[t]=this._new(this._providers[t])),this.objs[t];return Ut},e.prototype._throwOrNull=function(e,t){if(t!==re)return t;throw function(e,t){return xt(e,t,function(e){return"No provider for "+Y(e[0].token)+"!"+Et(e)})}(this,e)},e.prototype._getByKeySelf=function(e,t){var n=this._getObjByKeyId(e.id);return n!==Ut?n:this._throwOrNull(e,t)},e.prototype._getByKeyDefault=function(t,n,r){var i;for(i=r instanceof D?this.parent:this;i instanceof e;){var o=i,a=o._getObjByKeyId(t.id);if(a!==Ut)return a;i=o.parent}return null!==i?i.get(t.token,n):this._throwOrNull(t,n)},Object.defineProperty(e.prototype,"displayName",{get:function(){return"ReflectiveInjector(providers: ["+function(e,t){for(var n=new Array(e._providers.length),r=0;r<e._providers.length;++r)n[r]=t(e.getProviderAtIndex(r));return n}(this,function(e){return' "'+e.key.displayName+'" '}).join(", ")+"])"},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.displayName},e.INJECTOR_KEY=St.get(ht),e}(),jt=new te("AnalyzeForEntryComponents"),zt=function(){return function(){}}(),Yt=A("ContentChildren",function(e,t){return void 0===t&&(t={}),Object(r.__assign)({selector:e,first:!1,isViewQuery:!1,descendants:!1},t)},zt),Ht=A("ContentChild",function(e,t){return void 0===t&&(t={}),Object(r.__assign)({selector:e,first:!0,isViewQuery:!1,descendants:!0},t)},zt),Wt=A("ViewChildren",function(e,t){return void 0===t&&(t={}),Object(r.__assign)({selector:e,first:!1,isViewQuery:!0,descendants:!0},t)},zt),Xt=A("ViewChild",function(e,t){return Object(r.__assign)({selector:e,first:!0,isViewQuery:!0,descendants:!0},t)},zt),Kt=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}({}),Qt=function(e){return e[e.CheckOnce=0]="CheckOnce",e[e.Checked=1]="Checked",e[e.CheckAlways=2]="CheckAlways",e[e.Detached=3]="Detached",e[e.Errored=4]="Errored",e[e.Destroyed=5]="Destroyed",e}({});function qt(e){return null==e||e===Kt.Default}function Zt(e){var t=[],n=new Map;function r(t){var r=n.get(t);if(!r){var i=e(t);n.set(t,r=i.then(nn))}return r}return Jt.forEach(function(e,n){var i=[];e.templateUrl&&i.push(r(e.templateUrl).then(function(t){e.template=t}));var o=e.styleUrls,a=e.styles||(e.styles=[]),s=e.styles.length;o&&o.forEach(function(t,n){a.push(""),i.push(r(t).then(function(r){a[s+n]=r,o.splice(o.indexOf(t),1),0==o.length&&(e.styleUrls=void 0)}))});var u=Promise.all(i).then(function(){return function(e){$t.delete(e)}(n)});t.push(u)}),tn(),Promise.all(t).then(function(){})}var Jt=new Map,$t=new Set;function en(e){return!!(e.templateUrl&&!e.hasOwnProperty("template")||e.styleUrls&&e.styleUrls.length)}function tn(){var e=Jt;return Jt=new Map,e}function nn(e){return"string"==typeof e?e:e.text()}var rn=function(e){return e[e.Emulated=0]="Emulated",e[e.Native=1]="Native",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}({});function on(e){return""+{toString:e}}var an={},sn=[],un=F({ngComponentDef:F}),ln=F({ngDirectiveDef:F}),cn=F({ngPipeDef:F}),hn=F({ngModuleDef:F}),dn=F({ngLocaleIdDef:F}),fn=F({ngBaseDef:F}),pn=F({__NG_ELEMENT_ID__:F}),_n=0;function mn(e){var t=e.type,n=t.prototype,r={},i={type:t,providersResolver:null,consts:e.consts,vars:e.vars,factory:e.factory,template:e.template||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:e.changeDetection===Kt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||rn.Emulated,id:"c",styles:e.styles||sn,_:null,setInput:null,schemas:e.schemas||null,tView:null};return i._=on(function(){var n=e.directives,o=e.features,a=e.pipes;i.id+=_n++,i.inputs=En(e.inputs,r),i.outputs=En(e.outputs),o&&o.forEach(function(e){return e(i)}),i.directiveDefs=n?function(){return("function"==typeof n?n():n).map(vn)}:null,i.pipeDefs=a?function(){return("function"==typeof a?a():a).map(yn)}:null,t.hasOwnProperty(j)||(t[j]=B({token:t,factory:e.factory}))}),i}function gn(e,t,n){var r=e.ngComponentDef;r.directiveDefs=function(){return t.map(vn)},r.pipeDefs=function(){return n.map(yn)}}function vn(e){return Sn(e)||Cn(e)}function yn(e){return Pn(e)}function bn(e){return{type:e.type,bootstrap:e.bootstrap||sn,declarations:e.declarations||sn,imports:e.imports||sn,exports:e.exports||sn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}}function Tn(e,t){return on(function(){var n=Dn(e,!0);n.declarations=t.declarations||sn,n.imports=t.imports||sn,n.exports=t.exports||sn})}function En(e,t){if(null==e)return an;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}function xn(e){var t={};return{inputs:En(e.inputs,t),declaredInputs:t,outputs:En(e.outputs),viewQuery:e.viewQuery||null,contentQueries:e.contentQueries||null,hostBindings:e.hostBindings||null}}var Mn=mn;function An(e){return{name:e.name,factory:e.factory,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function Sn(e){return e[un]||null}function Cn(e){return e[ln]||null}function Pn(e){return e[cn]||null}function Rn(e){return e[fn]||null}function Dn(e,t){var n=e[hn]||null;if(!n&&!0===t)throw new Error("Type "+Y(e)+" does not have 'ngModuleDef' property.");return n}function On(e){return"string"==typeof e?e:null==e?"":""+e}function wn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():On(e)}var Ln=function(){return("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(J)}();function In(e){return{name:"window",target:e.ownerDocument.defaultView}}function Fn(e){return{name:"document",target:e.ownerDocument}}function Nn(e){return{name:"body",target:e.ownerDocument.body}}var Bn="\ufffd";function kn(e){return e.indexOf(Bn)>=0}function Un(e){return e instanceof Function?e():e}var Vn=0,Gn=1,jn=2,zn=3,Yn=4,Hn=5,Wn=6,Xn=7,Kn=8,Qn=9,qn=10,Zn=11,Jn=12,$n=13,er=14,tr=15,nr=16,rr=17,ir=18,or=20;var ar=1,sr=2,ur=7,lr=9,cr="__ngContext__";function hr(e){for(;Array.isArray(e);)e=e[Vn];return e}function dr(e){return Array.isArray(e)&&"object"==typeof e[ar]}function fr(e){return Array.isArray(e)&&!0===e[ar]}function pr(e){return Array.isArray(e)&&"number"==typeof e[ar]}function _r(e,t){return hr(t[e+or])}function mr(e,t){return hr(t[e.index])}function gr(e,t){return t[Gn].data[e+or]}function vr(e,t){return e[t+or]}function yr(e,t){var n=t[e];return dr(n)?n:n[Vn]}function br(e){return 0!=(4&e.flags)}function Tr(e){return 1==(1&e.flags)}function Er(e){return null!==e.template}function xr(e){return 0!=(512&e[jn])}function Mr(e){return e[cr]}function Ar(e){var t=Mr(e);return t?Array.isArray(t)?t:t.lView:null}function Sr(e){return fr(e[zn])}function Cr(e){e[ir]=0}function Pr(e,t,n,r,i,o){var a=t.onChanges,s=t.onInit,u=t.doCheck;i>=0&&(!n.preOrderHooks||i===n.preOrderHooks.length)&&(a||s||u)&&(n.preOrderHooks||(n.preOrderHooks=[])).push(r),o>=0&&(!n.preOrderCheckHooks||o===n.preOrderCheckHooks.length)&&(a||u)&&(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(r),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,a)),s&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-e,s),u&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,u),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,u))}function Rr(e,t){if(e.firstTemplatePass)for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n];i.afterContentInit&&(e.contentHooks||(e.contentHooks=[])).push(-n,i.afterContentInit),i.afterContentChecked&&((e.contentHooks||(e.contentHooks=[])).push(n,i.afterContentChecked),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i.afterContentChecked)),i.afterViewInit&&(e.viewHooks||(e.viewHooks=[])).push(-n,i.afterViewInit),i.afterViewChecked&&((e.viewHooks||(e.viewHooks=[])).push(n,i.afterViewChecked),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,i.afterViewChecked)),null!=i.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(n,i.onDestroy)}}function Dr(e,t,n,r){n||Or(e,t.preOrderHooks,t.preOrderCheckHooks,n,0,void 0!==r?r:null)}function Or(e,t,n,r,i,o){if(!r){var a=(3&e[jn])===i?t:n;a&&function(e,t,n,r){for(var i=null!=r?r:-1,o=0,a=void 0!==r?65535&e[ir]:0;a<t.length;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[ir]+=65536),(o<i||-1==i)&&(wr(e,n,t,a),e[ir]=(4294901760&e[ir])+a+2),a++}(e,a,i,o),null==o&&(3&e[jn])===i&&3!==i&&(e[jn]&=1023,e[jn]+=1)}}function wr(e,t,n,r){var i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];i?e[jn]>>10<e[ir]>>16&&(3&e[jn])===t&&(e[jn]+=1024,o.call(a)):o.call(a)}var Lr,Ir=null;function Fr(e){Ir=e}var Nr,Br=null;function kr(e){Br=e}function Ur(){Nr=!0}function Vr(){Nr=!1}function Gr(){return Yr}var jr,zr,Yr,Hr=1,Wr=Hr,Xr=0,Kr=0;function Qr(e){void 0===e&&(e=null),Ti!==e&&(xi(null==e?-1:e),Wr=null==e?0:Hr,Xr=0,Kr=0)}function qr(){return Wr}function Zr(){Wr+=1+Kr,Xr=0,Kr=0}function Jr(e){Xr+=e,Kr=Math.max(Kr,Xr)}function $r(){return Kr}function ei(){return Xr}function ti(e){ui=e}function ni(){return jr}function ri(e,t){jr=e,zr=t}function ii(e,t){jr=e,Yr=t}function oi(){return zr}function ai(){zr=!1}function si(e){return void 0===e&&(e=Yr),4==(4&e[jn])}var ui=null,li=!1;function ci(){return li}function hi(e){li=e}var di=-1;function fi(){return di}function pi(e){di=e}var _i=0;function mi(){return _i}function gi(e){_i=e}function vi(e,t){var n=Yr;return e&&(di=e[Gn].bindingStartIndex),jr=t,zr=!0,Yr=ui=e,n}function yi(e){return void 0===e&&(e=1),(ui=function(e,t){for(;e>0;)t=t[rr],e--;return t}(e,ui))[Qn]}function bi(e,t){var n=Yr[Gn];if(si(Yr))Yr[jn]&=-5;else try{Cr(Yr),t&&Or(Yr,n.viewHooks,n.viewCheckHooks,li,2,void 0)}finally{Yr[jn]&=-73,Yr[Xn]=n.bindingStartIndex}Fr(null),vi(e,null)}var Ti=-1;function Ei(){return Ti}function xi(e){Ti=e,Fr(null)}var Mi=null;function Ai(){Mi="http://www.w3.org/2000/svg"}function Si(){Mi="http://www.w3.org/1998/MathML/"}function Ci(){Mi=null}var Pi="__SANITIZER_TRUSTED_BRAND__";function Ri(e,t){return e instanceof String&&e[Pi]===t}function Di(e){return Fi(e,"Html")}function Oi(e){return Fi(e,"Style")}function wi(e){return Fi(e,"Script")}function Li(e){return Fi(e,"Url")}function Ii(e){return Fi(e,"ResourceUrl")}function Fi(e,t){var n=new String(e);return n[Pi]=t,n}var Ni=!0,Bi=!1;function ki(){return Bi=!0,Ni}function Ui(){if(Bi)throw new Error("Cannot enable prod mode after platform setup.");Ni=!1}var Vi=function(){function e(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),this.inertBodyElement=this.inertDocument.body,null==this.inertBodyElement){var t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t),this.inertBodyElement=this.inertDocument.createElement("body"),t.appendChild(this.inertBodyElement)}this.inertBodyElement.innerHTML='<svg><g onload="this.parentNode.remove()"></g></svg>',!this.inertBodyElement.querySelector||this.inertBodyElement.querySelector("svg")?(this.inertBodyElement.innerHTML='<svg><p><style><img src="</style><img src=x onerror=alert(1)//">',this.getInertBodyElement=this.inertBodyElement.querySelector&&this.inertBodyElement.querySelector("svg img")&&function(){try{return!!window.DOMParser}catch(e){return!1}}()?this.getInertBodyElement_DOMParser:this.getInertBodyElement_InertDocument):this.getInertBodyElement=this.getInertBodyElement_XHR}return e.prototype.getInertBodyElement_XHR=function(e){e="<body><remove></remove>"+e+"</body>";try{e=encodeURI(e)}catch(r){return null}var t=new XMLHttpRequest;t.responseType="document",t.open("GET","data:text/html;charset=utf-8,"+e,!1),t.send(void 0);var n=t.response.body;return n.removeChild(n.firstChild),n},e.prototype.getInertBodyElement_DOMParser=function(e){e="<body><remove></remove>"+e+"</body>";try{var t=(new window.DOMParser).parseFromString(e,"text/html").body;return t.removeChild(t.firstChild),t}catch(n){return null}},e.prototype.getInertBodyElement_InertDocument=function(e){var t=this.inertDocument.createElement("template");return"content"in t?(t.innerHTML=e,t):(this.inertBodyElement.innerHTML=e,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(this.inertBodyElement),this.inertBodyElement)},e.prototype.stripCustomNsAttrs=function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;"xmlns:ns1"!==r&&0!==r.indexOf("ns1:")||e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling},e}(),Gi=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi,ji=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function zi(e){return(e=String(e)).match(Gi)||e.match(ji)?e:(ki()&&console.warn("WARNING: sanitizing unsafe URL value "+e+" (see http://g.co/ng/security#xss)"),"unsafe:"+e)}function Yi(e){return(e=String(e)).split(",").map(function(e){return zi(e.trim())}).join(", ")}function Hi(e){var t,n,i={};try{for(var o=Object(r.__values)(e.split(",")),a=o.next();!a.done;a=o.next())i[a.value]=!0}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}function Wi(){for(var e,t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o={};try{for(var a=Object(r.__values)(n),s=a.next();!s.done;s=a.next()){var u=s.value;for(var l in u)u.hasOwnProperty(l)&&(o[l]=!0)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return o}var Xi,Ki=Hi("area,br,col,hr,img,wbr"),Qi=Hi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),qi=Hi("rp,rt"),Zi=Wi(qi,Qi),Ji=Wi(Ki,Wi(Qi,Hi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wi(qi,Hi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zi),$i=Hi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),eo=Hi("srcset"),to=Wi($i,eo,Hi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Hi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),no=Hi("script,style,template"),ro=function(){function e(){this.sanitizedSomething=!1,this.buf=[]}return e.prototype.sanitizeChildren=function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")},e.prototype.startElement=function(e){var t=e.nodeName.toLowerCase();if(!Ji.hasOwnProperty(t))return this.sanitizedSomething=!0,!no.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n=e.attributes,r=0;r<n.length;r++){var i=n.item(r),o=i.name,a=o.toLowerCase();if(to.hasOwnProperty(a)){var s=i.value;$i[a]&&(s=zi(s)),eo[a]&&(s=Yi(s)),this.buf.push(" ",o,'="',ao(s),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0},e.prototype.endElement=function(e){var t=e.nodeName.toLowerCase();Ji.hasOwnProperty(t)&&!Ki.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))},e.prototype.chars=function(e){this.buf.push(ao(e))},e.prototype.checkClobberedElement=function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+e.outerHTML);return t},e}(),io=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oo=/([^\#-~ |!])/g;function ao(e){return e.replace(/&/g,"&amp;").replace(io,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(oo,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function so(e,t){var n=null;try{Xi=Xi||new Vi(e);var r=t?String(t):"";n=Xi.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Xi.getInertBodyElement(r)}while(r!==o);var a=new ro,s=a.sanitizeChildren(uo(n)||n);return ki()&&a.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),s}finally{if(n)for(var u=uo(n)||n;u.firstChild;)u.removeChild(u.firstChild)}}function uo(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var lo=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}({}),co=function(){return function(){}}(),ho=new RegExp("^([-,.\"'%_!# a-zA-Z0-9]+|(?:(?:matrix|translate|scale|rotate|skew|perspective)(?:X|Y|3d)?|(?:rgb|hsl)a?|(?:repeating-)?(?:linear|radial)-gradient|(?:calc|attr))\\([-0-9.%, #a-zA-Z]+\\))$","g"),fo=/^url\(([^)]+)\)$/;function po(e){if(!(e=String(e).trim()))return"";var t=e.match(fo);return t&&zi(t[1])===t[1]||e.match(ho)&&function(e){for(var t=!0,n=!0,r=0;r<e.length;r++){var i=e.charAt(r);"'"===i&&n?t=!t:'"'===i&&t&&(n=!n)}return t&&n}(e)?e:(ki()&&console.warn("WARNING: sanitizing unsafe style value "+e+" (see http://g.co/ng/security#xss)."),"unsafe")}function _o(e){var t=xo();return t?t.sanitize(lo.HTML,e)||"":Ri(e,"Html")?e.toString():so(document,On(e))}function mo(e){var t=xo();return t?t.sanitize(lo.STYLE,e)||"":Ri(e,"Style")?e.toString():po(On(e))}function go(e){var t=xo();return t?t.sanitize(lo.URL,e)||"":Ri(e,"Url")?e.toString():zi(On(e))}function vo(e){var t=xo();if(t)return t.sanitize(lo.RESOURCE_URL,e)||"";if(Ri(e,"ResourceUrl"))return e.toString();throw new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)")}function yo(e){var t=xo();if(t)return t.sanitize(lo.SCRIPT,e)||"";if(Ri(e,"Script"))return e.toString();throw new Error("unsafe value used in a script context")}function bo(e,t){return"src"===t&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===t&&("base"===e||"link"===e)?vo:go}function To(e,t,n){return bo(t,n)(e)}var Eo=function(e,t,n){var r=!0;return 1&(n=n||3)&&(r="background-image"===e||"background"===e||"border-image"===e||"filter"===e||"list-style"===e||"list-style-image"===e||"clip-path"===e),2&n?r?mo(t):t:r};function xo(){var e=Gr();return e&&e[$n]}var Mo=8,Ao=8,So=9,Co=-1,Po=function(){return function(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}(),Ro=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({});function Do(e){return!!e.listen}var Oo={createRenderer:function(e,t){return document}};function wo(e){var t,n=Mr(e);if(n){if(Array.isArray(n)){var r=n,i=void 0,o=void 0,a=void 0;if((t=e)&&t.constructor&&t.constructor.ngComponentDef){if(-1==(i=ko(r,e)))throw new Error("The provided component was not found in the application");o=e}else if(e&&e.constructor&&e.constructor.ngDirectiveDef){if(-1==(i=function(e,t){for(var n=e[Gn].firstChild;n;){for(var r=n.directiveEnd,i=n.directiveStart;i<r;i++)if(e[i]===t)return n.index;n=Bo(n)}return-1}(r,e)))throw new Error("The provided directive was not found in the application");a=Uo(i,r,!1)}else if(-1==(i=No(r,e)))return null;var s=Mr(p=hr(r[i])),u=s&&!Array.isArray(s)?s:Lo(r,i,p);if(o&&void 0===u.component&&(u.component=o,Fo(u.component,u)),a&&void 0===u.directives){u.directives=a;for(var l=0;l<a.length;l++)Fo(a[l],u)}Fo(u.native,u),n=u}}else for(var c=e,h=c;h=h.parentNode;){var d=Mr(h);if(d){if(r=void 0,!(r=Array.isArray(d)?d:d.lView))return null;var f=No(r,c);if(f>=0){var p;Fo(p=hr(r[f]),u=Lo(r,f,p)),n=u;break}}}return n||null}function Lo(e,t,n){return{lView:e,nodeIndex:t,native:n,component:void 0,directives:void 0,localRefs:void 0}}function Io(e){var t,n=Mr(e);if(Array.isArray(n)){var r=ko(n,e);(i=Lo(n,r,(t=yr(r,n))[Vn])).component=e,Fo(e,i),Fo(i.native,i)}else{var i;t=yr((i=n).nodeIndex,i.lView)}return t}function Fo(e,t){e[cr]=t}function No(e,t){for(var n=e[Gn].firstChild;n;){if(mr(n,e)===t)return n.index;n=Bo(n)}return-1}function Bo(e){if(e.child)return e.child;if(e.next)return e.next;for(;e.parent&&!e.parent.next;)e=e.parent;return e.parent&&e.parent.next}function ko(e,t){var n=e[Gn].components;if(n)for(var r=0;r<n.length;r++){var i=n[r];if(yr(i,e)[Qn]===t)return i}else if(yr(or,e)[Qn]===t)return or;return-1}function Uo(e,t,n){var r=t[Gn].data[e],i=r.directiveStart;return 0==i?sn:(!n&&1&r.flags&&i++,t.slice(i,r.directiveEnd))}var Vo=function(){function e(){this._players=[]}return e.prototype.flushPlayers=function(){for(var e=0;e<this._players.length;e++){var t=this._players[e];t.parent||0!==t.state||t.play()}this._players.length=0},e.prototype.queuePlayer=function(e){this._players.push(e)},e}(),Go=0,jo="@";function zo(e,t,n,r){var i=[e||null,0,[],n||[null,null],r||[null,null],[0,0],[0],[0],null,null];return Yo(i,Go),i}function Yo(e,t,n,r){void 0===n&&(n=-1);for(var i=e[2],o=2*t,a=o+2,s=i.length;s<a;s+=2)i.push(-1,null);var u=o+0;n>=0&&-1===i[u]&&(i[u]=n,i[o+1]=r||null)}function Ho(e,t){for(var n=e,r=t[n],i=t;Array.isArray(r);)i=r,r=r[Vn];if(pr(i))return i;var o=gr(e-or,t).stylingTemplate;return i!==t&&(n=Vn),i[n]=o?function(e,t){for(var n=t.slice(),r=0;r<10;r++){var i=t[r];Array.isArray(i)&&(n[r]=i.slice())}return n[0]=e,n[1]|=16,n}(r,o):zo(r)}function Wo(e){return e[0]===jo}function Xo(e){return 0!=(8&e.flags)}function Ko(e){return 0!=(16&e.flags)}function Qo(e,t,n,r,i,o){return o=o||n,i?e[i]=r:e.push(r),!!r&&(r.addEventListener(200,function(){var t=e.indexOf(r);t&&(t<e[0]?e[t]=null:e.splice(t,1)),r.destroy()}),(t.playerHandler||(t.playerHandler=new Vo)).queuePlayer(r,o),!0)}function qo(e){return e[9]}function Zo(e){return e[9]=[5,null,null,null,null]}function Jo(e,t){for(var n=Gr()[Jn],r=Do(n),i=0;i<t.length;){var o=t[i];if("number"==typeof o){if(0!==o)break;i++;var a=t[i++],s=t[i++],u=t[i++];r?n.setAttribute(e,s,u,a):e.setAttributeNS(a,s,u)}else u=t[++i],Wo(s=o)?r&&n.setProperty(e,s,u):r?n.setAttribute(e,s,u):e.setAttribute(s,u),i++}return i}function $o(e,t){for(var n=t;n<e.length;n++){var r=e[n];if(1===r||2===r)return n}return-1}function ea(e){return 3===e||4===e||6===e}function ta(e){return e!==Co}function na(e){return 32767&e}function ra(e){return e>>16}function ia(e,t){for(var n=ra(e),r=t;n>0;)r=r[rr],n--;return r}function oa(e){var t=e[zn];return fr(t)?t[zn]:t}function aa(e){for(var t=e[Wn];null!==t&&2===t.type;)t=(e=e[rr])[Wn];return e}function sa(e){return function(e){for(var t=dr(e)?e:Ar(e);t&&!(512&t[jn]);)t=oa(t);return t}(e)[Qn]}var ua=!0;function la(e){var t=ua;return ua=e,t}var ca=255,ha=0;function da(e,t){var n=pa(e,t);if(-1!==n)return n;var r=t[Gn];r.firstTemplatePass&&(e.injectorIndex=t.length,fa(r.data,e),fa(t,null),fa(r.blueprint,null));var i=_a(e,t),o=na(i),a=ia(i,t),s=e.injectorIndex;if(ta(i))for(var u=a[Gn].data,l=0;l<8;l++)t[s+l]=a[o+l]|u[o+l];return t[s+Ao]=i,s}function fa(e,t){e.push(0,0,0,0,0,0,0,0,t)}function pa(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null==t[e.injectorIndex+Ao]?-1:e.injectorIndex}function _a(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=t[Wn],r=1;n&&-1===n.injectorIndex;)n=(t=t[rr])?t[Wn]:null,r++;return n?n.injectorIndex|r<<16:-1}function ma(e,t,n){!function(e,t,n){var r="string"!=typeof n?n[pn]:n.charCodeAt(0)||0;null==r&&(r=n[pn]=ha++);var i=r&ca,o=1<<i,a=64&i,s=32&i,u=t.data;128&i?a?s?u[e+7]|=o:u[e+6]|=o:s?u[e+5]|=o:u[e+4]|=o:a?s?u[e+3]|=o:u[e+2]|=o:s?u[e+1]|=o:u[e]|=o}(e,t[Gn],n)}function ga(e,t){var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(ea(o))break;if(0===o)i+=2;else if("number"==typeof o){if(i++,1===o&&"class"===t){for(var a="";i<r&&"string"==typeof n[i];)a+=" "+n[i++];return a.trim()}if(2===o&&"style"===t){for(var s="";i<r&&"string"==typeof n[i];)s+=n[i++]+": "+n[i++]+"; ";return s.trim()}for(;i<r&&"string"==typeof n[i];)i++}else{if(o===t)return n[i+1];i+=2}}return null}function va(e,t,n,r,i){if(void 0===r&&(r=I.Default),e){var o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e[pn];return"number"==typeof t&&t>0?t&ca:t}(n);if("function"==typeof o){var a=ni(),s=Gr();ii(e,t);try{var u=o();if(null!=u||r&I.Optional)return u;throw new Error("No provider for "+wn(n)+"!")}finally{ii(a,s)}}else if("number"==typeof o){if(-1===o)return new Aa(e,t);var l=null,c=pa(e,t),h=Co,d=r&I.Host?aa(t)[Wn]:null;for((-1===c||r&I.SkipSelf)&&(h=-1===c?_a(e,t):t[c+Ao],Ma(r,!1)?(l=t[Gn],c=na(h),t=ia(h,t)):c=-1);-1!==c;){h=t[c+Ao];var f=t[Gn];if(xa(o,c,f.data)){var p=ba(c,t,n,l,r,d);if(p!==ya)return p}Ma(r,t[Gn].data[c+Mo]===d)&&xa(o,c,t)?(l=f,c=na(h),t=ia(h,t)):c=-1}}}if(r&I.Optional&&void 0===i&&(i=null),0==(r&(I.Self|I.Host))){var _=t[qn],m=de(void 0);try{return _?_.get(n,i,r&I.Optional):me(n,i,r&I.Optional)}finally{de(m)}}if(r&I.Optional)return i;throw new Error("NodeInjector: NOT_FOUND ["+wn(n)+"]")}var ya={};function ba(e,t,n,r,i,o){var a=t[Gn],s=a.data[e+Mo],u=Ta(s,a,n,null==r?Tr(s)&&ua:r!=a&&3===s.type,i&I.Host&&o===s);return null!==u?Ea(a.data,t,u,s):ya}function Ta(e,t,n,r,i){for(var o=e.providerIndexes,a=t.data,s=65535&o,u=e.directiveStart,l=o>>16,c=i?s+l:e.directiveEnd,h=r?s:s+l;h<c;h++){var d=a[h];if(h<u&&n===d||h>=u&&d.type===n)return h}if(i){var f=a[u];if(f&&Er(f)&&f.type===n)return u}return null}function Ea(e,t,n,r){var i,o=t[n];if(null!==(i=o)&&"object"==typeof i&&Object.getPrototypeOf(i)==Po.prototype){var a=o;if(a.resolving)throw new Error("Circular dep for "+wn(e[n]));var s=la(a.canSeeViewProviders);a.resolving=!0;var u=void 0;a.injectImpl&&(u=de(a.injectImpl));var l=ni(),c=Gr();ii(r,t);try{o=t[n]=a.factory(null,e,t,r)}finally{a.injectImpl&&de(u),la(s),a.resolving=!1,ii(l,c)}}return o}function xa(e,t,n){var r=64&e,i=32&e;return!!((128&e?r?i?n[t+7]:n[t+6]:i?n[t+5]:n[t+4]:r?i?n[t+3]:n[t+2]:i?n[t+1]:n[t])&1<<e)}function Ma(e,t){return!(e&I.Self||e&I.Host&&t)}var Aa=function(){function e(e,t){this._tNode=e,this._lView=t}return e.prototype.get=function(e,t){return va(this._tNode,this._lView,e,void 0,t)},e}();function Sa(e){var t=e,n=Sn(t)||Cn(t)||Pn(t)||V(t)||G(t);return n&&void 0!==n.factory?n.factory:null}function Ca(e){var t=Sa(Object.getPrototypeOf(e.prototype).constructor);return null!==t?t:function(e){return new e}}function Pa(e){return e[yt]}function Ra(e){return e[bt]}function Da(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e.error.apply(e,Object(r.__spread)(t))}var Oa=function(){function e(){this._console=console}return e.prototype.handleError=function(e){var t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e[Tt]||Da}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)},e.prototype._findContext=function(e){return e?Pa(e)?Pa(e):this._findContext(Ra(e)):null},e.prototype._findOriginalError=function(e){for(var t=Ra(e);t&&Ra(t);)t=Ra(t);return t},e}(),wa={name:"custom-elements"},La={name:"no-errors-schema"},Ia=/([A-Z])/g;function Fa(e){try{return null!=e?e.toString().slice(0,30):e}catch(t){return"[ERROR] Exception while trying to serialize the value"}}var Na={};function Ba(e,t,n,r){var i=e[8];if(null!=i){var o=function(e,t){for(var n=1;n<e.length;n+=3)if(e[n+0]>t)return n;return e.length}(i,t);i.splice(o,0,t,n,r)}}function ka(e,t){return new Ua(e,t)}var Ua=function(){return function(e,t){this.fn=e,this.value=t}}();function Va(e,t,n){void 0===n&&(n=0);var r=zo();return Ga(r,e,t,n),r}function Ga(e,t,n,r){if(!(16&e[1])){Yo(e,r);for(var i=null,o=null,a=-1,s=n;s<t.length;s++){var u=t[s];"number"==typeof u?a=u:1==a?ja(i=i||e[4],u,!0,r):2==a&&ja(o=o||e[3],u,t[++s],r)}}}function ja(e,t,n,r){for(var i=2;i<e.length;i+=3)if(e[i+0]===t)return void(Is(e[i+1],n,e[i+2],r)&&Us(i,e,t,n,r));Us(null,e,t,n,r)}function za(e,t,n,r){for(var i=t[4],o=r||2;o<i.length;)i[o+1]&&$a(e,i[o+0],!0,n,null),o+=3;return o}function Ya(e,t,n,r){for(var i=t[3],o=r||2;o<i.length;){var a=i[o+1];a&&Ja(e,i[o+0],a,n,null),o+=3}return o}function Ha(e,t,n,r){for(var i=n;i<r;i+=4)if(bs(e,i)===t)return i;return-1}function Wa(e,t,n){void 0===n&&(n=0),Ka(e,t,!0,n)}function Xa(e,t,n){void 0===n&&(n=0),Ka(e,t,!1,n)}function Ka(e,t,n,r){if(void 0===r&&(r=0),!function(e,t,n,r){return!e[t?6:7][1+4*n+0]&&(r===Na||Ns(e,t,n)===r)}(e,n,r,t)){var i,o,a,s=(t=t===Na?Ns(e,n,r):t)instanceof Ua?new Rs(t,e[0],n?1:2):null,u=s?t.value:t,l=n?1:3,c=s?l:0,h=!1;ds(e,s,l)&&(fs(e,s,l),h=!0);var d=!1;n?("string"==typeof u?(a=u.split(/\s+/),d=!0):a=u?Object.keys(u):sn,i=us(e),o=e.length):(i=ls(e),o=us(e),a=u?Object.keys(u):sn),function(e,t,n,r,o,a,s,u,l){for(var c=!1,h=1+4*t,d=e[l?6:7],f=d[h+1],p=d[h+3],_=1===d[h+0]||!(d[h+2]||!u),m=0,g=0,v=!0===s,y=i,b=a.length;y<f;){var T=bs(e,y);if(b)for(var E=0;E<a.length;E++)if((R=(P=a[E])?l?P:Bs(P):null)&&T===R){var x=ys(e,y),M=Ds(e,y),A=!!v||s[R],S=vs(e,y);Ps(S,x,A)&&Is(x,A,M,t)&&(hs(e,y,A),ps(e,y,n,t),Cs(e,S,A)&&(es(e,y,!0),c=!0)),a[E]=null,b--;break}y+=4}if(b){var C=l?null:Ls(e,t);e:for(E=0;E<a.length;E++){var P;if(P=a[E]){A=!!v||s[P];for(var R=l?P:Bs(P),D=y>=f,O=y;O<o;O+=4)if(bs(e,O)===R){var w=Ds(e,O),L=_s(e,O),I=ys(e,O),F=vs(e,O);Is(I,A,w,t)&&(D&&(xs(e,y,O),m++),Ps(F,I,A)&&((null===A||void 0===A&&A!==I)&&(_=!0),hs(e,y,A),(null!==I||Cs(e,F,A))&&(es(e,y,!0),c=!0)),w===t&&n===L||ps(e,y,n,t)),y+=4;continue e}null!=A&&(_=!0,m++,Ms(e,D?y:f+4*g,l,R,1|Ss(e,R,l,C),A,t,n),g++,o+=4,y+=4,c=!0)}}}for(;y<o;){_=!0;var N=ys(e,y),B=vs(e,y);Ds(e,y),null!=N&&(_=!0),Ps(B,N,null)&&(hs(e,y,null),Cs(e,B,N)&&(es(e,y,!0),c=!0),ps(e,y,n,t)),y+=4}(function(e,t,n,r,i,o,a,s){var u=e[n?6:7],l=1+4*t;if(s)for(var c=i+4*a,h=l+4;h<u.length;h+=4)u[h+1]=c,u[h+0]=1;u[l+0]=0,u[l+1]=i,u[l+2]=r,u[l+3]=a;var d=a;for(h=1;h<l;h+=4)d+=u[h+3];if(!n){var f=e[6],p=o-f[2];for(h=1;h<f.length;h+=4)f[h+1]+=p}u[0]=d})(e,t,l,u,f,o,m,_=_||p!==m),c&&Ts(e,!0)}(e,r,c,0,o,a,d||u||an,t,n),h&&Es(e,!0)}}function Qa(e,t,n,r,i){void 0===r&&(r=0),Za(e,t,n,!0,r,i)}function qa(e,t,n,r,i){void 0===r&&(r=0),Za(e,t,n,!1,r,i)}function Za(e,t,n,r,i,o){var a=ws(e,i,t,r),s=ys(e,a),u=vs(e,a),l=Ds(e,a),c=n instanceof Ua?n.value:n;if(Ps(u,s,c)&&(o||Is(s,c,l,i))){var h=n instanceof Ua?new Rs(n,e[0],2==(2&u)?1:2):null,d=h?n.value:n,f=_s(e,a),p=!1,_=h?f:0;if(ds(e,h,f)){var m=fs(e,h,f);_=h?m:0,p=!0}if((p||l!==i)&&ps(e,a,_,i),l!==i){var g=bs(e,a),v=Ls(e,i);!function(e,t,n){v&&v(g,null,1)?e[t]|=4:e[t]&=-5}(e,a)}hs(e,a,d);var y=ss(u),b=ys(e,y);if(!b||Ps(u,b,d)){var T=!1,E=!0;!As(d)&&As(b)&&(T=!0,E=!1),es(e,y,T),es(e,a,E),Ts(e,!0)}p&&Es(e,!0)}}function Ja(e,t,n,r,i,o,a){n=i&&n?i(t,n,3):n,o||a?(o&&o.setValue(t,n),a&&a.setValue(t,n)):n?(n=n.toString(),Do(r)?r.setStyle(e,t,n,Ro.DashCase):e.style.setProperty(t,n)):Do(r)?r.removeStyle(e,t,Ro.DashCase):e.style.removeProperty(t)}function $a(e,t,n,r,i,o){i||o?(i&&i.setValue(t,n),o&&o.setValue(t,n)):""!==t&&(n?Do(r)?r.addClass(e,t):e.classList.add(t):Do(r)?r.removeClass(e,t):e.classList.remove(t))}function es(e,t,n){var r=t>=10?t+0:t;n?e[r]|=1:e[r]&=-2}function ts(e,t){return 1==(1&e[t>=10?t+0:t])}function ns(e,t){return 2==(2&e[t>=10?t+0:t])}function rs(e,t){return 4==(4&e[t>=10?t+0:t])}function is(e,t,n){return 31&e|t<<5|n<<19}function os(e,t){var n=as(t);return(2&t?e[4]:e[3])[n]}function as(e){return e>>5&16383}function ss(e){var t=e>>19&16383;return t>=10?t:-1}function us(e){return e[6][2]}function ls(e){return e[7][2]}function cs(e,t,n){e[t+1]=n}function hs(e,t,n){e[t+2]=n}function ds(e,t,n){var r=e[9];if(t){if(!r||0===n)return!0}else if(!r)return!1;return r[n]!==t}function fs(e,t,n){var r=e[9]||Zo(e);return n>0?r[n]=t:(r.splice(n=r[0],0,t,null),r[0]+=2),n}function ps(e,t,n,r){var i=function(e,t){return n<<16|e}(r);e[t+3]=i}function _s(e,t){return e[t+3]>>16&65535}function ms(e,t){var n=_s(e,t);if(n){var r=e[9];if(r)return r[n]}return null}function gs(e,t,n){e[1===t?t:t+0]=n}function vs(e,t){return e[1===t?t:t+0]}function ys(e,t){return e[t+2]}function bs(e,t){return e[t+1]}function Ts(e,t){es(e,1,t)}function Es(e,t){t?e[1]|=8:e[1]&=-9}function xs(e,t,n){if(t!==n){var r=ys(e,t),i=bs(e,t),o=vs(e,t),a=_s(e,t),s=Ds(e,t),u=o,l=vs(e,n),c=ss(u);c>=0&&gs(e,c,is(h=vs(e,c),as(h),n));var h,d=ss(l);d>=0&&gs(e,d,is(h=vs(e,d),as(h),t)),hs(e,t,ys(e,n)),cs(e,t,bs(e,n)),gs(e,t,vs(e,n)),ps(e,t,_s(e,n),Ds(e,n)),hs(e,n,r),cs(e,n,i),gs(e,n,o),ps(e,n,a,s)}}function Ms(e,t,n,r,i,o,a,s){var u=t<e.length;e.splice(t,0,1|i|(n?2:0),r,o,0),ps(e,t,s,a),u&&function(e,n){for(var r=t+4;r<e.length;r+=4){var i=ss(vs(e,r));if(i>0){var o=as(vs(e,i));gs(e,i,is((ts(e,i)?1:0)|(ns(e,i)?2:0)|(rs(e,i)?4:0),o,r))}}}(e)}function As(e,t){return null!==e}function Ss(e,t,n,r){var i,o=r&&r(t,null,1)?4:0;return n?(o|=2,i=Os(e[4],t)):i=Os(e[3],t),is(o,i=i>0?i+1:0,0)}function Cs(e,t,n){var r=os(e,t);return!r||Ps(t,r,n)}function Ps(e,t,n){return!(2&e)&&t&&n&&4&e?t.toString()!==n.toString():t!==n}var Rs=function(){function e(e,t,n){this._element=t,this._type=n,this._values={},this._dirty=!1,this._factory=e}return e.prototype.setValue=function(e,t){this._values[e]!==t&&(this._values[e]=t,this._dirty=!0)},e.prototype.buildPlayer=function(e,t){if(this._dirty){var n=this._factory.fn(this._element,this._type,this._values,t,e||null);return this._values={},this._dirty=!1,n}},e}();function Ds(e,t){return 65535&e[t+3]}function Os(e,t){for(var n=2;n<e.length;n+=3)if(e[n]===t)return n;return-1}function ws(e,t,n,r){var i=e[2][2*t+0],o=e[5];return o[i+2+(r?o[i+0]:0)+n]}function Ls(e,t){var n=e[2];return n[2*t+1]||n[1]||null}function Is(e,t,n,r){return null==e||(null!=t?r<=n:n===r)}function Fs(e){var t=e[4],n=t[1];if(null===n){n="";for(var r=2;r<t.length;r+=3)t[r+1]&&(n+=(n.length?" ":"")+t[r]);t[1]=n}return n}function Ns(e,t,n){return e[t?6:7][1+4*n+2]||null}function Bs(e){return e.replace(/[a-z][A-Z]/g,function(e){return e.charAt(0)+"-"+e.charAt(1).toLowerCase()})}function ks(e,t,n,r,i){void 0===i&&(i=0);var o=e[n?6:7];if(t>0)for(var a=1+4*t;o.length<a;)o.push(0,r,null,0);o.push(0,r,null,i)}function Us(e,t,n,r,i){return null===e&&(e=t.length,t.push(null,null,null),t[e+0]=n),t[e+1]=r,t[e+2]=i,e}var Vs="ng-template";function Gs(e,t){var n=e.length,r=e.indexOf(t),i=r+t.length;return!(-1===r||r>0&&" "!==e[r-1]||i<n&&" "!==e[i])}function js(e,t,n){return t===(0!==e.type||n?e.tagName:Vs)}function zs(e,t,n){for(var r=4,i=e.attrs||[],o=function(e){for(var t=0;t<e.length;t++)if(ea(e[t]))return t;return e.length}(i),a=!1,s=0;s<t.length;s++){var u=t[s];if("number"!=typeof u){if(!a)if(4&r){if(r=2|1&r,""!==u&&!js(e,u,n)||""===u&&1===t.length){if(Ys(r))return!1;a=!0}}else{var l=8&r?u:t[++s];if(8&r&&e.stylingTemplate){if(!Gs(Hs(e),l)){if(Ys(r))return!1;a=!0}continue}var c=Ws(8&r?"class":u,i,0==e.type&&e.tagName!==Vs,n);if(-1===c){if(Ys(r))return!1;a=!0;continue}if(""!==l){var h;h=c>o?"":i[c+1];var d=8&r?h:null;if(d&&!Gs(d,l)||2&r&&l!==h){if(Ys(r))return!1;a=!0}}}}else{if(!a&&!Ys(r)&&!Ys(u))return!1;if(a&&Ys(u))continue;a=!1,r=u|1&r}}return Ys(r)||a}function Ys(e){return 0==(1&e)}function Hs(e){return e.stylingTemplate?Fs(e.stylingTemplate):""}function Ws(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var o=!1;i<t.length;){var a=t[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a){for(var s=t[++i];"string"==typeof s;)s=t[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){if(e[n]===t)return n;n++}return-1}(t,e)}function Xs(e,t,n){void 0===n&&(n=!1);for(var r=0;r<t.length;r++)if(zs(e,t[r],n))return!0;return!1}function Ks(e,t){e:for(var n=0;n<t.length;n++){var r=t[n];if(e.length===r.length){for(var i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}var Qs,qs={marker:"element"},Zs={marker:"comment"},Js=0;function $s(){return Js>0}function eu(e){Qs=e}function tu(){return Qs}var nu="--MAP--";function ru(e,t,n,r){return bs(e,ws(e,n,t,r))}function iu(e,t){e[1]=t}function ou(e){return e[0]}function au(e,t){return e[t+2]}function su(e,t){return 1&e[t+0]}function uu(e,t){return(1&su(e,t))>0}function lu(e,t){return e[t+0]>>1}function cu(e,t,n){var r=su(e,t);e[t+0]=r|n<<1}function hu(e,t){return e[t+1]}function du(e,t,n){return e[t+3+n]}function fu(e,t){return t===e[1]}function pu(e){!function(e,t){e[0]=t}(e,1|ou(e))}function _u(e){return(1&ou(e))>0}function mu(e){return 5+e[3]}function gu(e,t){return(Array.isArray(e)?e[0]:e)!==(Array.isArray(t)?t[0]:t)}function vu(e){return null!=e&&""!==e}function yu(e){var t=tu()||e[$n];return t&&"function"!=typeof t?(eu(t),bu):t}var bu=function(e,t,n){var r=tu();return r?!(2&n)||r.sanitize(lo.STYLE,t):t},Tu=null,Eu=1,xu=1,Mu=0,Au=1,Su=Au,Cu=Au,Pu=0,Ru=0,Du=[];function Ou(e,t,n,r,i,o,a){var s=n?Cu++:Mu;(Lu(e,t,s,n,r,i,o,a,!1)||a)&&(Ru|=1<<s)}function wu(e,t,n,r,i,o,a,s){var u=!n,l=u?Mu:Su++;(Lu(e,t,l,n,r,i,a,s,!!u||!!o&&o(n,null,1))||s)&&(Pu|=1<<l)}function Lu(e,t,n,r,i,o,a,s,u){_u(e)||(a?function(e,t,n,r,i){Du.unshift(e,t,n,r,i)}(e,n,r,i,u):(Du.length&&Iu(),Fu(e,n,r,i,u)));var l=s||gu(t[i],o);return l&&(t[i]=o),l}function Iu(){for(var e=0;e<Du.length;)Fu(Du[e++],Du[e++],Du[e++],Du[e++],Du[e++]);Du.length=0}function Fu(e,t,n,r,i){if(n){for(var o=!1,a=mu(e);a<e.length;){var s=hu(e,a),u=au(e,a);if(o=n<=u){n<u&&Nu(e,a,n,i),Bu(e,!1,a,r,t);break}a+=3+s}o||(Nu(e,e.length,n,i),Bu(e,!1,a,r,t))}else Bu(e,!0,2,r,t)}function Nu(e,t,n,r){e.splice(t,0,r?1:0,Eu,n,Tu),cu(e,t,xu)}function Bu(e,t,n,r,i){var o=n+3+hu(e,n);t||o--,"number"==typeof r?(e.splice(o,0,r),e[n+1]++,cu(e,n,lu(e,n)|1<<i)):"string"==typeof r&&null==e[o]&&(e[o]=r)}function ku(e,t,n,r,i,o,a){Du.length&&Iu();for(var s=!0===i?-1:!1===i?0:i,u=Uu,l=(s&lu(e,2))>0?1:0,c=mu(e);c<e.length;){var h=hu(e,c);if(s&lu(e,c)){for(var d=!1,f=au(e,c),p=h-1,_=du(e,c,p),m=0;m<p;m++){var g=du(e,c,m),v=r[g];if(vu(v)){o(t,n,f,a&&uu(e,c)?a(f,v,2):v,g),d=!0;break}}if(u){var y=u(e,t,n,r,o,a,l|(d?4:2),f,_);d=d||y}d||o(t,n,f,_)}c+=3+h}u&&u(e,t,n,r,o,a,l)}var Uu=null,Vu=function(e,t,n,r){r?(r=r.toString(),e&&Do(e)?e.setStyle(t,n,r,Ro.DashCase):t.style.setProperty(n,r)):e&&Do(e)?e.removeStyle(t,n,Ro.DashCase):t.style.removeProperty(n)},Gu=function(e,t,n,r){""!==n&&(r?e&&Do(e)?e.addClass(t,n):t.classList.add(n):e&&Do(e)?e.removeClass(t,n):t.classList.remove(n))},ju=function(e,t,n,r,i,o,a,s,u){var l=!1;if(hu(e,2)){var c=!0,h=!s;h&&-2&a&&(c=!1,l=!0),c&&(l=function e(t,n,r,i,o,a,s,u,l,c){var h=!1;if(l<hu(t,2)){for(var d=du(t,2,l),f=i[d],p=function(e){return e>=Hu.length&&Hu.push(1),Hu[e]}(l);p<f.length;){var _=Wu(f,p),m=u&&_>u,g=!m&&_===u,v=f[p+1],y=vu(v),b=e(t,n,r,i,o,a,m?s:zu(s,y,g),m?u:_,l+1,c);if(m)break;if(!b&&Yu(s,g)){var T=g&&!y,E=T?c:v,x=T?d:null;o(n,r,_,a?a(_,E,3):E,x),b=!0}h=b&&g,p+=2}Hu[l]=p}return h}(e,t,n,r,i,o,a,s||null,0,u||null)),h&&function(){for(var e=0;e<Hu.length;e++)Hu[e]=1}()}return l};function zu(e,t,n){var r=e;return t||!n||4&e?(r|=4,r&=-3):(r|=2,r&=-5),r}function Yu(e,t){var n=(1&e)>0;return n?4&e&&t&&(n=!1):2&e&&(n=t),n}var Hu=[];function Wu(e,t){return e[t+0]}function Xu(e,t,n){e[t+1]=n}function Ku(e){Qu(Gr(),e)}function Qu(e,t){Dr(e,e[Gn],ci(),t),xi(t)}var qu=function(){return Promise.resolve(null)}();function Zu(e){var t=e[Gn],n=si(e);if(t.firstTemplatePass=!1,e[Xn]=t.bindingStartIndex,!n){var r=ci();Dr(e,t,r,void 0),function(e){for(var t=e[er];null!==t;t=t[Yn])if(-1===t[sr]&&fr(t))for(var n=lr;n<t.length;n++){var r=t[n];rl(r,r[Gn],r[Qn])}}(e),Ju(t,e),Cr(e),Or(e,t.contentHooks,t.contentCheckHooks,r,1,void 0),function(e,t){var n=Ei();try{if(e.expandoInstructions){var r=t[Xn]=e.expandoStartIndex;pi(r);for(var i=-1,o=-1,a=0;a<e.expandoInstructions.length;a++){var s=e.expandoInstructions[a];if("number"==typeof s){if(s<=0){Qr(o=-s);var u=e.expandoInstructions[++a];i=r+=So+u}else r+=s;pi(r)}else null!==s&&(t[Xn]=r,s(2,hr(t[i]),o),Zr()),i++}}}finally{Qr(n)}}(t,e)}n&&t.staticContentQueries&&Ju(t,e),function(e){if(null!=e)for(var t=0;t<e.length;t++)Pl(e[t])}(t.components)}function Ju(e,t){if(null!=e.contentQueries){gi(0);for(var n=0;n<e.contentQueries.length;n++){var r=e.contentQueries[n];e.data[r].contentQueries(2,t[r],r)}}}function $u(e,t){var n=t||Gr()[Jn],r=Mi;return Do(n)?n.createElement(e,r):null===r?n.createElement(e):n.createElementNS(r,e)}function el(e,t,n,r,i,o,a,s,u,l){var c=t.blueprint.slice();return c[Vn]=i,c[jn]=140|r,Cr(c),c[zn]=c[rr]=e,c[Qn]=n,c[Zn]=a||e&&e[Zn],c[Jn]=s||e&&e[Jn],c[$n]=u||e&&e[$n]||null,c[qn]=l||e&&e[qn]||null,c[Wn]=o,c}function tl(e,t,n,r,i,o){var a=n+or,s=e.data[a]||function(e,t,n,r,i,o,a){var s=ni(),u=oi(),l=u?s:s&&s.parent,c=e.data[n]=fl(l&&l!==t?l:null,r,n,i,o);return 0!==a&&e.firstChild||(e.firstChild=c),s&&(!u||null!=s.child||null===c.parent&&2!==s.type?u||(s.next=c):s.child=c),c}(e,t,a,r,i,o,n);return ri(s,!0),s}function nl(e,t,n,r){var i=e.node;return null==i&&(e.node=i=fl(t,2,n,null,null)),r[Wn]=i}function rl(e,t,n){var r,i=oi(),o=ni();if(512&e[jn])wl(sa(e));else{var a=!1;try{ri(null,!0),r=vi(e,e[Wn]),Cr(e),ol(e,t.template,al(e),n),e[Gn].firstTemplatePass=!1,Zu(e),a=!0}finally{bi(r,a),ri(o,i)}}}function il(e,t,n){var r=e[Zn],i=vi(e,e[Wn]),o=!ci(),a=si(e),s=!1;try{o&&!a&&r.begin&&r.begin(),a&&(n&&ol(e,n,1,t),Zu(e),e[jn]&=-5),Cr(e),n&&ol(e,n,2,t),Zu(e),s=!0}finally{o&&!a&&r.end&&r.end(),bi(i,s)}}function ol(e,t,n,r){Ci();var i=Ei();try{Qr(null),2&n&&Qu(e,0),t(n,r)}finally{xi(i)}}function al(e){return si(e)?1:2}function sl(e,t,n,r){if(e.firstTemplatePass&&!t.stylingTemplate){var i=$o(n,r);i>=0&&(t.stylingTemplate=Va(n,i))}}function ul(e,t,n){if(br(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var o=e.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}function ll(e,t,n,r){if(void 0===r&&(r=mr),Nr){var i=ni();e.firstTemplatePass&&function(e,t,n,r,i){var o=i?{"":-1}:null;if(n){xl(r,e.data.length,n.length);for(var a=0;a<n.length;a++)(c=n[a]).providersResolver&&c.providersResolver(c);vl(e,r,n.length);var s=e.preOrderHooks&&e.preOrderHooks.length||0,u=e.preOrderCheckHooks&&e.preOrderCheckHooks.length||0,l=r.index-or;for(a=0;a<n.length;a++){var c,h=e.data.length;Ml(e,t,c=n[a],c.factory),El(e.data.length-1,c,o),Pr(h,c,e,l,s,u)}}o&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var o=n[t[i+1]];if(null==o)throw new Error("Export of name '"+t[i+1]+"' not found!");r.push(t[i],o)}}(r,i,o)}(e,t,function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];Xs(n,a.selectors,!1)&&(i||(i=[]),ma(da(ni(),t),t,a.type),Er(a)?(1&n.flags&&Xe(n),n.flags=1,i.unshift(a)):i.push(a))}return i}(e,t,i),i,n||null),function(e,t,n){var r=n.directiveStart,i=n.directiveEnd;!e.firstTemplatePass&&r<i&&da(n,t);for(var o=r;o<i;o++){var a=e.data[o];Er(a)&&Al(t,n,a),yl(t,Ea(e.data,t,o,n),a,o)}}(e,t,i),function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,o=e.expandoInstructions,a=e.firstTemplatePass,s=n.index-or,u=Ei();try{Qr(s);for(var l=r;l<i;l++){var c=e.data[l];c.hostBindings?(gl(c,o,t[l],n,a),Zr()):a&&o.push(null)}}finally{Qr(u)}}(e,t,i),function(e,t,n){var r=t.localNames;if(r)for(var i=t.index+1,o=0;o<r.length;o+=2){var a=r[o+1],s=-1===a?n(t,e):e[a];e[i++]=s}}(t,i,r),Qr(null)}}function cl(e){return e.tView||(e.tView=hl(-1,e.template,e.consts,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas))}function hl(e,t,n,r,i,o,a,s){var u=or+n,l=u+r,c=function(e,t){var n=new Array(t).fill(null,0,e).fill(Na,e);return n[Xn]=e,n}(u,l);return c[Gn]={id:e,blueprint:c,template:t,viewQuery:a,node:null,data:c.slice().fill(null,u),bindingStartIndex:u,viewQueryStartIndex:l,expandoStartIndex:l,expandoInstructions:null,firstTemplatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:s}}function dl(e,t){var n=e.createRenderer(null,null);return"string"==typeof t?Do(n)?n.selectRootElement(t):n.querySelector(t):t}function fl(e,t,n,r,i){return{type:t,index:n,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,propertyMetadataStartIndex:-1,propertyMetadataEndIndex:-1,flags:0,providerIndexes:0,tagName:r,attrs:i,localNames:null,initialInputs:void 0,inputs:void 0,outputs:void 0,tViews:null,next:null,projectionNext:null,child:null,parent:e,stylingTemplate:null,projection:null,onElementCreationFns:null,newStyles:null,newClasses:null}}function pl(e,t){var n=Gr()[Gn],r=null,i=e.directiveStart,o=e.directiveEnd;if(o>i)for(var a=0===t,s=n.data,u=i;u<o;u++){var l=s[u],c=a?l.inputs:l.outputs;for(var h in c)if(c.hasOwnProperty(h)){var d=c[h];(r=r||{}).hasOwnProperty(h)?r[h].push(u,h,d):r[h]=[u,h,d]}}return r}var _l={class:"className",for:"htmlFor",formaction:"formAction",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"};function ml(e,t,n,r,i,o){var a,s,u=Gr(),l=_r(e,u),c=gr(e,u);if(!i&&(a=Ul(c))&&(s=a[t]))Yl(u,s,n),Tr(c)&&function(t,n){var r=yr(e+or,t);16&r[jn]||(r[jn]|=64)}(u);else if(3===c.type){!function(e,t,n,r,i){var o=t[Xn]-1,a=r[o];a[0]==Bn&&(r[o]=n+a,i||(-1==e.propertyMetadataStartIndex&&(e.propertyMetadataStartIndex=o),e.propertyMetadataEndIndex=o+1))}(c,u,t=_l[t]||t,u[Gn].data,i);var h=o?o(c,u):u[Jn];n=null!=r?r(n,c.tagName||"",t):n,Do(h)?h.setProperty(l,t,n):Wo(t)||(l.setProperty?l.setProperty(t,n):l[t]=n)}}function gl(e,t,n,r,i){var o=t.length;kr(e),e.hostBindings(1,n,r.index-or),kr(null),o===t.length&&i&&t.push(e.hostBindings)}function vl(e,t,n){var r=-(t.index-or),i=e.data.length-(65535&t.providerIndexes);(e.expandoInstructions||(e.expandoInstructions=[])).push(r,i,n)}function yl(e,t,n,r){var i=ni();bl(e,i,t),i&&i.attrs&&function(e,t,n,r){var o=i.initialInputs;(void 0===o||e>=o.length)&&(o=function(e,t,n){for(var r=n.initialInputs||(n.initialInputs=[]),i=r.length;i<=e;i++)r.push(null);for(var o=n.attrs,a=0;a<o.length;){var s=o[a];if(0!==s)if(5!==s){if("number"==typeof s)break;var u=t[s],l=o[a+1];void 0!==u&&(r[e]||(r[e]=[])).push(s,u,l),a+=2}else a+=2;else a+=4}return r}(e,n.inputs,i));var a=o[e];if(a)for(var s=n.setInput,u=0;u<a.length;){var l=a[u++],c=a[u++],h=a[u++];s?n.setInput(t,h,l,c):t[c]=h}}(r,t,n),e[Gn].firstTemplatePass&&n.contentQueries&&(i.flags|=4),Er(n)&&(yr(i.index,e)[Qn]=t)}function bl(e,t,n){var r=mr(t,e);Fo(n,e),r&&Fo(r,e)}function Tl(e){var t=Gr()[Gn];(t.components||(t.components=[])).push(e.index)}function El(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;t.template&&(n[""]=e)}}function xl(e,t,n){e.flags=1&e.flags,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Ml(e,t,n,r){e.data.push(n);var i=new Po(r,Er(n),null);e.blueprint.push(i),t.push(i)}function Al(e,t,n){var r=mr(t,e),i=cl(n),o=e[Zn],a=Rl(e,el(e,i,null,n.onPush?64:16,e[t.index],t,o,o.createRenderer(r,n)));a[Wn]=t,e[t.index]=a,e[Gn].firstTemplatePass&&Tl(t)}function Sl(e,t,n,r,i,o){var a=_r(e,r),s=r[Jn];if(null==n)Do(s)?s.removeAttribute(a,t,o):a.removeAttribute(t);else{var u=gr(e,r),l=null==i?On(n):i(n,u.tagName||"",t);Do(s)?s.setAttribute(a,t,l,o):o?a.setAttributeNS(o,t,l):a.setAttribute(t,l)}}function Cl(e,t,n,r,i){return new Array(e,!0,i?-1:0,t,null,null,r,n,null)}function Pl(e){var t=Gr(),n=yr(e,t);(128==(128&n[jn])||si(t))&&80&n[jn]&&(function(e){for(var t=e[Gn],n=e.length;n<t.blueprint.length;n++)e[n]=t.blueprint[n]}(n),Fl(n,n[Qn]))}function Rl(e,t){return e[er]?e[tr][Yn]=t:e[er]=t,e[tr]=t,t}function Dl(e){for(;e;){e[jn]|=64;var t=oa(e);if(xr(e)&&!t)return e;e=t}return null}function Ol(e,t){var n,r=0===e.flags;e.flags|=t,r&&e.clean==qu&&(e.clean=new Promise(function(e){return n=e}),e.scheduler(function(){if(1&e.flags&&(e.flags&=-2,wl(e)),2&e.flags){e.flags&=-3;var t=e.playerHandler;t&&t.flushPlayers()}e.clean=qu,n(null)}))}function wl(e){for(var t=0;t<e.components.length;t++){var n=e.components[t];il(Ar(n),n)}}function Ll(e,t){var n=e[Zn];n.begin&&n.begin();try{si(e)&&Fl(e,t),Fl(e,t)}catch(r){throw zl(e,r),r}finally{n.end&&n.end()}}function Il(e){wl(e[Qn])}function Fl(e,t){var n=e[Gn],r=vi(e,e[Wn]),i=n.template,o=si(e),a=!1;try{Cr(e),o&&Nl(1,n,t),ol(e,i,al(e),t),Zu(e),o&&!n.staticViewQueries||Nl(2,n,t),a=!0}finally{bi(r,a)}}function Nl(e,t,n){var r=t.viewQuery;r&&(gi(t.viewQueryStartIndex),r(e,n))}function Bl(e,t,n){void 0===t&&(t=""),void 0===n&&(n="");var r=e[Gn].data,i=e[Xn]-1;return null==r[i]?r[i]=Bn+t+Bn+n:null}var kl=qu;function Ul(e){return void 0===e.inputs&&(e.inputs=pl(e,0)),e.inputs}function Vl(e){return e[Kn]||(e[Kn]=[])}function Gl(e){return e[Gn].cleanup||(e[Gn].cleanup=[])}function jl(e,t){return t[e.index][Jn]}function zl(e,t){var n=e[qn],r=n?n.get(Oa,null):null;r&&r.handleError(t)}function Yl(e,t,n){for(var r=e[Gn],i=0;i<t.length;){var o=t[i++],a=t[i++],s=t[i++],u=e[o],l=r.data[o];l.setInput?l.setInput(u,n,a,s):u[s]=n}}function Hl(e,t,n){var r=_r(t,e),i=e[Jn];Do(i)?i.setValue(r,n):r.textContent=n}function Wl(e){var t;if(t=e.onElementCreationFns){for(var n=0;n<t.length;n++)t[n]();e.onElementCreationFns=null}}function Xl(e){var t=Gr(),n=t[Gn];n.firstTemplatePass&&(function(e,t,n){var r=e.expandoInstructions,i=r.length;i>=2&&r[i-2]===t.hostBindings?r[i-1]=r[i-1]+n:r.push(t.hostBindings,n)}(n,Br,e),function(e,t,n){for(var r=0;r<n;r++)t.push(Na),e.blueprint.push(Na),e.data.push(null)}(n,t,e))}var Kl=null;function Ql(){if(!Kl){var e=J.Symbol;if(e&&e.iterator)Kl=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Kl=r)}}return Kl}function ql(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}function Zl(e,t){var n=$l(e),r=$l(t);return n&&r?function(e,t,n){for(var r=e[Ql()](),i=t[Ql()]();;){var o=r.next(),a=i.next();if(o.done&&a.done)return!0;if(o.done||a.done)return!1;if(!n(o.value,a.value))return!1}}(e,t,Zl):!(n||!e||"object"!=typeof e&&"function"!=typeof e||r||!t||"object"!=typeof t&&"function"!=typeof t)||ql(e,t)}var Jl=function(){function e(e){this.wrapped=e}return e.wrap=function(t){return new e(t)},e.unwrap=function(t){return e.isWrapped(t)?t.wrapped:t},e.isWrapped=function(t){return t instanceof e},e}();function $l(e){return!!ec(e)&&(Array.isArray(e)||!(e instanceof Map)&&Ql()in e)}function ec(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function tc(e,t,n){return e[t]=n}function nc(e,t){return e[t]}function rc(e,t,n){var r=e[t];return!(r!=r&&n!=n||r===n||(e[t]=n,0))}function ic(e,t,n,r){var i=rc(e,t,n);return rc(e,t+1,r)||i}function oc(e,t,n,r,i){var o=ic(e,t,n,r);return rc(e,t+2,i)||o}function ac(e,t,n,r,i,o){var a=ic(e,t,n,r);return ic(e,t+2,i,o)||a}function sc(e,t,n,r){var i=Ei(),o=uc(Gr(),t);return o!==Na&&ml(i,e,o,n,r),sc}function uc(e,t){var n=e[Xn]++;return Bl(e),rc(e,n,t)?t:Na}function lc(e,t,n,r){var i=Ei(),o=uc(Gr(),t);o!==Na&&ml(i,e,o,n,r,jl)}function cc(e,t,n,r){var i=Ei(),o=Gr(),a=uc(o,t);return a!==Na&&Sl(i,e,a,o,n,r),cc}function hc(e){var t=!1,n=Gr(),r=n[Gn].data,i=n[Xn];if(null==r[i]){for(var o=2;o<e.length;o+=2)r[i++]=e[o];i=n[Xn]}for(o=1;o<e.length;o+=2)t=rc(n,i++,e[o])||t;if(n[Xn]=i,Bl(n,e[0],e[e.length-1]),!t)return Na;var a=e[0];for(o=1;o<e.length;o+=2)a+=On(e[o])+e[o+1];return a}function dc(e,t,n){var r=Gr(),i=rc(r,r[Xn]++,t);return Bl(r,e,n),i?e+On(t)+n:Na}function fc(e,t,n,r,i){var o=Gr(),a=o[Xn],s=ic(o,a,t,r);return o[Xn]+=2,Bl(o,e,i)&&(o[Gn].data[a]=n),s?e+On(t)+n+On(r)+i:Na}function pc(e,t,n,r,i,o,a){var s=Gr(),u=s[Xn],l=oc(s,u,t,r,o);if(s[Xn]+=3,Bl(s,e,a)){var c=s[Gn].data;c[u]=n,c[u+1]=i}return l?e+On(t)+n+On(r)+i+On(o)+a:Na}function _c(e,t,n,r,i,o,a,s,u){var l=Gr(),c=l[Xn],h=ac(l,c,t,r,o,s);if(l[Xn]+=4,Bl(l,e,u)){var d=l[Gn].data;d[c]=n,d[c+1]=i,d[c+2]=a}return h?e+On(t)+n+On(r)+i+On(o)+a+On(s)+u:Na}function mc(e,t,n,r,i,o,a,s,u,l,c){var h=Gr(),d=h[Xn],f=ac(h,d,t,r,o,s);if(f=rc(h,d+4,l)||f,h[Xn]+=5,Bl(h,e,c)){var p=h[Gn].data;p[d]=n,p[d+1]=i,p[d+2]=a,p[d+3]=u}return f?e+On(t)+n+On(r)+i+On(o)+a+On(s)+u+On(l)+c:Na}function gc(e,t,n,r,i,o,a,s,u,l,c,h,d){var f=Gr(),p=f[Xn],_=ac(f,p,t,r,o,s);if(_=ic(f,p+4,l,h)||_,f[Xn]+=6,Bl(f,e,d)){var m=f[Gn].data;m[p]=n,m[p+1]=i,m[p+2]=a,m[p+3]=u,m[p+4]=c}return _?e+On(t)+n+On(r)+i+On(o)+a+On(s)+u+On(l)+c+On(h)+d:Na}function vc(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p){var _=Gr(),m=_[Xn],g=ac(_,m,t,r,o,s);if(g=oc(_,m+4,l,h,f)||g,_[Xn]+=7,Bl(_,e,p)){var v=_[Gn].data;v[m]=n,v[m+1]=i,v[m+2]=a,v[m+3]=u,v[m+4]=c,v[m+5]=d}return g?e+On(t)+n+On(r)+i+On(o)+a+On(s)+u+On(l)+c+On(h)+d+On(f)+p:Na}function yc(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m){var g=Gr(),v=g[Xn],y=ac(g,v,t,r,o,s);if(y=ac(g,v+4,l,h,f,_)||y,g[Xn]+=8,Bl(g,e,m)){var b=g[Gn].data;b[v]=n,b[v+1]=i,b[v+2]=a,b[v+3]=u,b[v+4]=c,b[v+5]=d,b[v+6]=p}return y?e+On(t)+n+On(r)+i+On(o)+a+On(s)+u+On(l)+c+On(h)+d+On(f)+p+On(_)+m:Na}function bc(e,t,n,r,i,o){var a=Ei(),s=Gr(),u=dc(t,n,r);return u!==Na&&Sl(a,e,u,s,i,o),bc}function Tc(e,t,n,r,i,o,a,s){var u=Ei(),l=Gr(),c=fc(t,n,r,i,o);return c!==Na&&Sl(u,e,c,l,a,s),Tc}function Ec(e,t,n,r,i,o,a,s,u,l){var c=Ei(),h=Gr(),d=pc(t,n,r,i,o,a,s);return d!==Na&&Sl(c,e,d,h,u,l),Ec}function xc(e,t,n,r,i,o,a,s,u,l,c,h){var d=Ei(),f=Gr(),p=_c(t,n,r,i,o,a,s,u,l);return p!==Na&&Sl(d,e,p,f,c,h),xc}function Mc(e,t,n,r,i,o,a,s,u,l,c,h,d,f){var p=Ei(),_=Gr(),m=mc(t,n,r,i,o,a,s,u,l,c,h);return m!==Na&&Sl(p,e,m,_,d,f),Mc}function Ac(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p,_){var m=Ei(),g=Gr(),v=gc(t,n,r,i,o,a,s,u,l,c,h,d,f);return v!==Na&&Sl(m,e,v,g,p,_),Ac}function Sc(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m,g){var v=Ei(),y=Gr(),b=vc(t,n,r,i,o,a,s,u,l,c,h,d,f,p,_);return b!==Na&&Sl(v,e,b,y,m,g),Sc}function Cc(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m,g,v,y){var b=Ei(),T=Gr(),E=yc(t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m,g);return E!==Na&&Sl(b,e,E,T,v,y),Cc}function Pc(e,t,n,r){var i=Ei(),o=Gr(),a=hc(t);return a!==Na&&Sl(i,e,a,o,n,r),Pc}function Rc(e){Ll(Io(e),e)}function Dc(e){Ol(Dl(Io(e))[Qn],1)}function Oc(e,t){var n=t[zn];return-1===e.index?fr(n)?n:null:n}function wc(e,t){var n=Oc(e,t);return n?Yc(t[Jn],n[ur]):null}function Lc(e,t,n,r,i){var o,a=!1;fr(r)?o=r:dr(r)&&(a=!0,r=r[Vn]);var s=hr(r);0===e?jc(t,n,s,i||null):1===e?Xc(t,s,a):2===e&&t.destroyNode(s),null!=o&&function(e,t,n,r,i){var o=n[ur];o!==hr(n)&&Lc(t,e,r,o,i);for(var a=lr;a<n.length;a++)Zc(e,t,n[a],r,o)}(t,e,o,n,i)}function Ic(e,t){return Do(t)?t.createText(On(e)):t.createTextNode(On(e))}function Fc(e,t,n){var r=wc(e[Gn].node,e);r&&Zc(e[Jn],t?0:1,e,r,n)}function Nc(e,t,n){var r=lr+n,i=t.length;n>0&&(t[r-1][Yn]=e),n<i-lr?(e[Yn]=t[r],t.splice(lr+n,0,e)):(t.push(e),e[Yn]=null),e[zn]=t,e[Hn]&&e[Hn].insertView(n),e[jn]|=128}function Bc(e,t){if(!(e.length<=lr)){var n=lr+t,r=e[n];return r&&(t>0&&(e[n-1][Yn]=r[Yn]),e.splice(lr+t,1),Fc(r,!1),128&r[jn]&&!(256&r[jn])&&r[Hn]&&r[Hn].removeView(),r[zn]=null,r[Yn]=null,r[jn]&=-129),r}}function kc(e,t){var n=Bc(e,t);n&&Uc(n)}function Uc(e){if(!(256&e[jn])){var t=e[Jn];Do(t)&&t.destroyNode&&Zc(t,2,e,null,null),function(e){var t=e[er];if(!t)return Gc(e);for(;t;){var n=null;if(dr(t))n=t[er];else{var r=t[lr];r&&(n=r)}if(!n){for(;t&&!t[Yn]&&t!==e;)Gc(t),t=Vc(t,e);Gc(t||e),n=t&&t[Yn]}t=n}}(e)}}function Vc(e,t){var n;return dr(e)&&(n=e[Wn])&&2===n.type?Oc(n,e):e[zn]===t?null:e[zn]}function Gc(e){if(dr(e)&&!(256&e[jn])){e[jn]&=-129,e[jn]|=256,function(e){var t,n=e[Gn];if(null!=n&&null!=(t=n.destroyHooks))for(var r=0;r<t.length;r+=2){var i=e[t[r]];i instanceof Po||t[r+1].call(i)}}(e),function(e){var t=e[Gn].cleanup;if(null!==t){for(var n=e[Kn],r=0;r<t.length-1;r+=2)if("string"==typeof t[r]){var i=t[r+1],o="function"==typeof i?i(e):hr(e[i]),a=t[r+3];"boolean"==typeof a?o.removeEventListener(t[r],n[t[r+2]],a):a>=0?n[a]():n[-a].unsubscribe(),r+=2}else t[r].call(n[t[r+1]]);e[Kn]=null}}(e);var t=e[Wn];t&&3===t.type&&Do(e[Jn])&&e[Jn].destroy(),Sr(e)&&e[Hn]&&e[Hn].removeView()}}function jc(e,t,n,r){Do(e)?e.insertBefore(t,n,r):t.insertBefore(n,r,!0)}function zc(e,t,n,r){null!==r?jc(e,t,n,r):function(e,t,n){Do(e)?e.appendChild(t,n):t.appendChild(n)}(e,t,n)}function Yc(e,t){return Do(e)?e.parentNode(t):t.parentNode}function Hc(e,t,n){var i,o,a=function(e,t){if(xr(t))return Yc(t[Jn],mr(e,t));var n=function(e){for(;null!=e.parent&&(4===e.parent.type||5===e.parent.type);)e=e.parent;return e}(e),r=n.parent;if(null==r){var i=t[Wn];return 2===i.type?wc(i,t):function(e){var t=e[Wn];return t&&3===t.type?mr(t,oa(e)):null}(t)}var o=n&&5===n.type;if(o&&2&n.flags)return mr(n,t).parentNode;if(1&r.flags&&!o){var a=t[Gn].data,s=a[a[r.index].directiveStart].encapsulation;if(s!==rn.ShadowDom&&s!==rn.Native)return null}return mr(r,t)}(t,n);if(null!=a){var s=n[Jn],u=function(e,t){if(2===e.type){var n=Oc(e,t);return Wc(n.indexOf(t,lr)-lr,n)}return 4===e.type||5===e.type?mr(e,t):null}(t.parent||n[Wn],n);if(Array.isArray(e))try{for(var l=Object(r.__values)(e),c=l.next();!c.done;c=l.next())zc(s,a,c.value,u)}catch(h){i={error:h}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else zc(s,a,e,u)}}function Wc(e,t){var n=lr+e+1;if(n<t.length){var r=t[n],i=r[Wn].child;return null!==i?mr(i,r):t[ur]}return t[ur]}function Xc(e,t,n){var r=Yc(e,t);r&&function(e,t,n,r){Do(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}function Kc(e,t,n,r){var i=r[zn],o=r[Wn].projection[n];if(Array.isArray(o))Hc(o,t,e);else for(;o;)32&o.flags||(1===o.type?Kc(e,t,o.projection,aa(i)):(o.flags|=2,qc(o,t,e,i))),o=o.projectionNext}function Qc(e,t,n,r){for(;e;)qc(e,t,n,r),e=e.next}function qc(e,t,n,r){var i=mr(e,r);Hc(i,t,n),Fo(i,r);var o=r[e.index];if(0===e.type)for(var a=lr;a<o.length;a++)Fc(o[a],!0,o[ur]);else if(5===e.type){var s=e.child;Qc(s,s,r,r)}else 4===e.type&&Qc(e.child,t,n,r),fr(o)&&Hc(o[ur],t,n)}function Zc(e,t,n,r,i){for(var o=n[Gn].node.child;null!==o;)Jc(e,t,n,o,r,i),o=o.next}function Jc(e,t,n,r,i,o){var a=r.type;4===a?function(e,t,n,r,i,o){Lc(t,e,i,n[r.index],o);for(var a=r.child;a;)Jc(e,t,n,a,i,o),a=a.next}(e,t,n,r,i,o):1===a?function(e,t,n,r,i,o){var a=aa(n),s=a[Wn].projection[r.projection];if(Array.isArray(s))for(var u=0;u<s.length;u++)Lc(t,e,i,s[u],o);else for(var l=s,c=a[zn];null!==l;)Jc(e,t,c,l,i,o),l=l.projectionNext}(e,t,n,r,i,o):Lc(t,e,i,n[r.index],o)}function $c(e){var t=ih(e,null,null),n=Gr();n[Gn].firstTemplatePass&&(t.tViews=[]),rh(n,t),ai()}function eh(e,t,n,r,i,o,a,s){var u=Gr(),l=u[Gn],c=ih(e,i||null,o||null);l.firstTemplatePass&&(c.tViews=hl(-1,t,n,r,l.directiveRegistry,l.pipeRegistry,null,null)),ll(l,u,a,s),rh(u,c),Fo(mr(c,u),u),Rr(l,c),ai()}function th(e){var t=Gr(),n=t[Gn];ri(vr(n.data,e),!0),t[e+or][sr]=0,Dr(t,n,ci(),void 0)}function nh(){var e=ni();oi()?ai():ri(e=e.parent,!1);for(var t=Gr()[e.index],n=t[sr];n<t.length-lr;)kc(t,n)}function rh(e,t){var n=e[Hn];if(n){var r=e[t.index];r[Hn]?n.insertNodeBeforeViews(t):(n.addNode(t),r[Hn]=n.container())}}function ih(e,t,n){var r=Gr(),i=e+or,o=r[e+or]=r[Jn].createComment(""),a=tl(r[Gn],r[Wn],e,0,t,n),s=r[i]=Cl(r[i],r,o,a);return Hc(o,a,r),Rl(r,s),a}function oh(e,t){var n=Gr(),r=n[Gn],i=e+or;i>=r.data.length&&(r.data[i]=null,r.blueprint[i]=null),n[i]=t}function ah(e){return vr(ui,e)}function sh(e){return vr(Gr(),e)}function uh(e,t){void 0===t&&(t=I.Default),e=X(e);var n=Gr();return null==n?pe(e,t):va(ni(),n,e,t)}function lh(e){return ga(ni(),e)}function ch(e){eu(e)}function hh(e,t,n){var r=Ei(),i=Gr(),o=i[Xn]++,a=gr(r,i),s=$r()>0;if(n)Ou(_h(a),i,e,o,t,s,!1);else{var u=yu(i);wu(ph(a),i,e,o,t,u,s,!1)}}function dh(e,t){Uu=ju;var n=Ei(),r=Gr(),i=r[Xn]++;if(e!==Na){var o=gr(n,r),a=$r()>0,s=r[i],u=gu(s,e),l=function(e,t){var n=Array.isArray(e)?e:[null];n[0]=t||null;for(var r=1;r<n.length;r+=2)Xu(n,r,null);var i,o=null,a=!1;if("string"==typeof t?t.length&&(o=t.split(/\s+/),a=!0):(o=t?Object.keys(t):null,i=t),o)e:for(var s=0;s<o.length;s++){var u=o[s],l=!!a||i[u];for(r=1;r<n.length;r+=2){var c=Wu(n,r);if(u<=c){c===u?Xu(n,r,l):n.splice(r,0,u,l);continue e}}n.push(u,l)}return n}(s,e);if(t)Ou(_h(o),r,null,i,l,a,u);else{var c=yu(r);wu(ph(o),r,null,i,l,c,a,u)}}}function fh(){return qr()+ei()}function ph(e){return mh(e,!1)}function _h(e){return mh(e,!0)}function mh(e,t){var n=t?e.newClasses:e.newStyles;return n||(n=[0,0,1,0,nu],t?e.newClasses=n:e.newStyles=n),n}function gh(e,t,n){var r=ni();r.stylingTemplate||(r.stylingTemplate=zo());var i=Mh();i?($s()&&function(){var e,t,n=Gr();e=gr(Ei(),n),t=fh(),iu(_h(e),t),iu(ph(e),t)}(),Yo(r.stylingTemplate,i),(r.onElementCreationFns=r.onElementCreationFns||[]).push(function(){var o,a,s;vh(r,e,t,n,i),a=i,(s=(o=r.stylingTemplate)[8])||(s=o[8]=[Go]),s[0]=a})):vh(r,e,t,n,Go)}function vh(e,t,n,r,i){!function(e,t,n,r,i){if(!(16&e[1])&&function(e,t,n,r){var i=e[2],o=2*t;return!(o<i.length&&i[o+0]>=0||(Yo(e,t,e[5].length,r),0))}(e,t,0,i)){r&&(r=function(e){for(var t=[],n=0;n<e.length;n++)t.push(Bs(e[n]));return t}(r));var o=e[5],a=o[1],s=o[0],u=e[6],l=e[7],c=4*s,h=10+c,d=h+4*a,f=d+c,p=o.length;o.push(r?r.length:0,n?n.length:0);var _=0,m=[];if(r&&r.length)for(var g=0;g<r.length;g++){var v=r[g];-1==(T=Ha(e,v,10,h))&&(T=h+_,_+=4,m.push(v)),o.push(T)}var y=[];if(n&&n.length)for(var b=0;b<n.length;b++){var T,E=n[b];-1==(T=Ha(e,E,h,d))?(T=d+_,_+=4,y.push(E)):T+=4*m.length,o.push(T)}var x=2;if(m.length)for(;x<p;){var M=o[x+0],A=o[x+1];if(A)for(var S=x+2+M,C=S;C<S+A;C++)o[C]+=4*m.length;x+=2+(M+A)}for(var P=y.length+m.length,R=10;R<e.length;R+=4){var D=R>=d,O=R>=(D?f:h),w=vs(e,R),L=as(w),I=ss(w);gs(e,R,is(w,L,I+=D?O?4*m.length:0:4*P+4*(O?m.length:0)))}for(var F=0;F<4*m.length;F++)e.splice(f,0,null),e.splice(h,0,null),h++,d++,f+=2;for(var N=0;N<4*y.length;N++)e.splice(d,0,null),e.push(null),d++,f++;for(var B=e[4],k=e[3],U=0;U<P;U++){var V=U>=m.length,G=V?U-m.length:U,j=V?y[G]:m[G],z=void 0,Y=void 0;V?(z=f+4*(a+G),Y=h+4*(a+G)):(z=d+4*(s+G),Y=10+4*(s+G));var H=V?B:k,W=Os(H,j);-1===W?W=Us(null,H,j,!V&&null,t)+1:W+=1;var X=Ss(e,j,V,i||null);gs(e,Y,is(X,W,z)),cs(e,Y,j),hs(e,Y,null),ps(e,Y,0,t),gs(e,z,is(X,W,Y)),cs(e,z,j),hs(e,z,null),ps(e,z,0,t)}o[1]=a+y.length,o[0]=s+m.length,u[0]+=y.length,l[0]+=m.length;var K=4*m.length,Q=4*y.length,q=l.length;ks(e,t,!1,d+4*s,m.length);for(var Z=1;Z<q;Z+=4)l[Z+1]+=Q+K;var J=u.length;ks(e,t,!0,f+4*a,y.length);for(var $=1;$<J;$+=4)u[$+1]+=2*K+Q;gs(e,1,is(0,0,d))}}(e.stylingTemplate,i,t,n,r)}function yh(e,t,n,r){var i=Ei(),o=function(e,t){var n=null;return null!==e&&(n=t?On(e)+t:e),n}(t,n),a=Ah(i,Gr()),s=Mh();s?Ba(a,s,qa,[a,e,o,s,r]):qa(a,e,o,Go,r),$s()&&function(e,t,n){hh(e,function(e,t){var n=null;return null!==e&&(n=t?On(e)+t:e),n}(t,n),!1)}(ru(a,e,s,!1),t,n)}function bh(e,t,n){var r=Ei(),i=t instanceof Ua?t:function(e){return"boolean"==typeof e?e:!!e||null}(t),o=Mh(),a=Ah(r,Gr());o?Ba(a,o,Qa,[a,e,i,o,n]):Qa(a,e,i,Go,n),$s()&&hh(ru(a,e,o,!0),i,!0)}function Th(e){var t=Ei(),n=Gr(),r=Ah(t,n),i=Mh();if(i)Ba(r,i,Xa,[r,e,i]);else{var o=gr(t,n);if(Ko(o)&&e!==Na){var a=Fs(r),s=(a.length?a+" ":"")+function(e){var t="";if(e)for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];t+=(r?";":"")+i+":"+e[i]}return t}(e);Yl(n,o.inputs.style,s),e=Na}Xa(r,e)}$s()&&function(e){dh(e,!1)}(e)}function Eh(e){var t=Ei(),n=Gr(),r=Ah(t,n),i=Mh();if(i)Ba(r,i,Wa,[r,e,i]);else{var o=gr(t,n);if(Xo(o)&&e!==Na){var a=Fs(r),s=(a.length?a+" ":"")+function(e){return e&&"string"!=typeof e&&(e=Object.keys(e).join(" ")),e||""}(e);Yl(n,o.inputs.class,s),e=Na}Wa(r,e)}$s()&&function(e){dh(e,!0)}(e)}function xh(){var e=Ei(),t=Mh()||Go,n=Gr(),r=3===gr(e,n).type?n[Jn]:null,i=0!=(8&n[jn]),o=Ah(e,n);Js<2&&function(e,t,n,r,i,o,a){void 0===a&&(a=0);var s=0;if(function(e,t){var n=e[8];return!n||n[0]===t}(e,a)&&(function(e){var t=e[8];if(t){for(var n=1;n<t.length;n+=3)t[n+1].apply(this,t[n+2]);t.length=1}}(e),function(e){return ts(e,1)}(e))){for(var u=e[0],l=8&e[1],c=ls(e),h=10;h<e.length;h+=4)if(ts(e,h)){var d=vs(e,h),f=Ds(e,h),p=bs(e,h),_=ys(e,h),m=4&d?Ls(e,f):null,g=ms(e,h),v=!!(2&d),y=_;h<c&&!As(y)&&(y=ys(e,ss(d))),As(y)||(y=os(e,d)),t&&(!r||y)&&(v?$a(u,p,!!y,t,null,g):Ja(u,p,y,t,m,null,g)),es(e,h,!1)}if(l){var b=Array.isArray(n)?sa(n):n,T=qo(e),E=T[0];for(h=1;h<E;h+=2){var x=T[h],M=h+1,A=T[M];if(x){var S=x.buildPlayer(A,r);void 0!==S&&(null!=S&&Qo(T,b,u,S,M)&&s++,A&&A.destroy())}else A&&A.destroy()}Es(e,!1)}Ts(e,!1)}return s}(o,r,n,i,0,0,t)>0&&Ol(sa(n),2),Fr(null),$s()&&function(){var e=Ei(),t=Gr(),n=gr(e,t),r=function(e,t){return 3===e.type?t[Jn]:null}(n,t),i=function(e,n){for(var r=t[e+or],i=t;Array.isArray(r);)i=r,r=r[Vn];return pr(i)?i[0]:r}(e),o=fh();!function(e,t,n,r,i){fu(n,i)&&(!_u(n)&&pu(n),Ru&&(ku(n,e,r,t,Ru,Gu,null),Ru=0),Cu=Au)}(r,t,_h(n),i,o);var a=yu(t);!function(e,t,n,r,i,o){fu(n,i)&&(!_u(n)&&pu(n),Pu&&(ku(n,e,r,t,Pu,Vu,o),Pu=0),Su=Au)}(r,t,ph(n),i,o,a),eu(null)}()}function Mh(){return qr()+ei()}function Ah(e,t){var n=Ir;return n||Fr(n=Ho(e+or,t)),n}function Sh(e,t,n,r){var i=Gr(),o=i[Gn],a=i[e+or]=$u(t),s=i[Jn],u=tl(o,i[Wn],e,3,t,n||null),l=0,c=0,h=-1;if(n){sl(o,u,n,h=Jo(a,n));var d=u.stylingTemplate;d&&(l=Ya(a,d,s),c=za(a,d,s))}if(Hc(a,u,i),ll(o,i,r),0===Lr&&Fo(a,i),Lr++,o.firstTemplatePass){var f=Ul(u);f&&f.hasOwnProperty("class")&&(u.flags|=8),f&&f.hasOwnProperty("style")&&(u.flags|=16)}u.stylingTemplate&&(za(a,u.stylingTemplate,s,c),Ya(a,u.stylingTemplate,s,l)),$s()&&h>=0&&function(e,t,n){for(var r,i,o=-1,a=h;a<t.length;a++){var s=t[a];"number"==typeof s?o=s:1==o?Fu(r=r||_h(e),-1,s,!0,!1):2==o&&Fu(i=i||ph(e),-1,s,t[++a],!1)}}(u,n);var p=i[Hn];p&&(p.addNode(u),i[Hn]=p.clone(u)),ul(o,u,i)}function Ch(){var e=ni();oi()?ai():ri(e=e.parent,!1),e.onElementCreationFns&&Wl(e);var t=Gr(),n=t[Hn];n&&e.index===n.nodeIndex&&(t[Hn]=n.parent),Rr(t[Gn],e),Lr--;var r=null;Xo(e)&&(r=Ho(e.index,t),Yl(t,e.inputs.class,Fs(r))),Ko(e)&&(r=r||Ho(e.index,t),Yl(t,e.inputs.style,function(e){var t=r[3],n=t[1];if(null===n){n="";for(var i=2;i<t.length;i+=3){var o=t[i+1];null!==o&&(n+=(n.length?";":"")+t[i]+":"+o)}t[1]=n}return n}()))}function Ph(e,t,n,r){Sh(e,t,n,r),Ch()}function Rh(e){var t=Ei(),n=Gr(),r=gr(t,n);if(3===r.type){var i=$o(e,Jo(mr(r,n),e));if(i>=0){var o=Mh();r.stylingTemplate?Ga(r.stylingTemplate,e,i,o):r.stylingTemplate=Va(e,i,o)}}}function Dh(e,t,n){var r=Gr(),i=r[Gn],o=r[e+or]=r[Jn].createComment(""),a=tl(i,r[Wn],e,4,"ng-container",t||null);t&&sl(i,a,t,0),Hc(o,a,r),ll(i,r,n),Fo(o,r);var s=r[Hn];s&&(s.addNode(a),r[Hn]=s.clone(a)),ul(i,a,r)}function Oh(){var e=ni(),t=Gr(),n=t[Gn];oi()?ai():ri(e=e.parent,!1);var r=t[Hn];r&&e.index===r.nodeIndex&&(t[Hn]=r.parent),e.onElementCreationFns&&Wl(e),Rr(n,e)}function wh(e,t,n){var r=Gr(),i=ni(),o=2===i.type?i.parent:i,a=r[o.index],s=function(e,t,n){for(var r=t+lr;r<e.length;r++){var i=e[r][Gn].id;if(i===n)return e[r];if(!(i<n))break;kc(e,r-lr)}return null}(a,a[sr],e);if(s)zr=!0,vi(s,s[Gn].node);else{s=el(r,function(e,t,n,r){var i=Gr()[Gn],o=r.tViews;return(e>=o.length||null==o[e])&&(o[e]=hl(e,null,t,n,i.directiveRegistry,i.pipeRegistry,null,null)),o[e]}(e,t,n,o),null,16,null,null),a[Hn]&&(s[Hn]=a[Hn].createView());var u=oi()?i:i&&i.parent;nl(s[Gn],u,e,s),vi(s,s[Gn].node)}return a&&(si(s)&&Nc(s,a,a[sr]),a[sr]++),si(s)?3:2}function Lh(){var e=Gr(),t=e[Wn];si(e)&&(Zu(e),e[jn]&=-5),Cr(e),Zu(e),bi(e[zn][zn],!0),ri(t,!1)}function Ih(){return Gr()}function Fh(e){return!!e&&"function"==typeof e.then}function Nh(e){return!!e&&"function"==typeof e.subscribe}function Bh(e,t,n,r){void 0===n&&(n=!1),Uh(e,t,n,r)}function kh(e,t,n,r){void 0===n&&(n=!1),Uh(e,t,n,r,jl)}function Uh(e,t,n,r,i){void 0===n&&(n=!1);var o=Gr(),a=ni(),s=o[Gn],u=s.firstTemplatePass&&(s.cleanup||(s.cleanup=[])),l=!0;if(3===a.type){var c=mr(a,o),h=r?r(c):an,d=h.target||c,f=i?i(a,o):o[Jn],p=(T=Vl(o)).length,_=r?function(e){return r(hr(e[a.index])).target}:a.index;if(Do(f)){var m=null;if(!r&&function(e){return e.directiveEnd>e.directiveStart}(a)&&(m=function(e,t,n){var r=e[Gn].cleanup;if(null!=r)for(var i=0;i<r.length-1;i+=2){var o=r[i];if(o===t&&r[i+1]===n){var a=e[Kn],s=r[i+2];return a.length>s?a[s]:null}"string"==typeof o&&(i+=2)}return null}(o,e,a.index)),null!==m)t.__ngNextListenerFn__=m.__ngNextListenerFn__,m.__ngNextListenerFn__=t,l=!1;else{t=Gh(a,o,t,!1);var g=f.listen(h.name||d,e,t);T.push(t,g),u&&u.push(e,_,p,p+1)}}else t=Gh(a,o,t,!0),d.addEventListener(e,t,n),T.push(t),u&&u.push(e,_,p,n)}void 0===a.outputs&&(a.outputs=pl(a,1));var v,y=a.outputs;if(l&&y&&(v=y[e])){var b=v.length;if(b)for(var T=Vl(o),E=0;E<b;E+=3){var x=o[v[E]][v[E+2]].subscribe(t),M=T.length;T.push(t,x),u&&u.push(e,a.index,M,-(M+1))}}}function Vh(e,t,n){try{return!1!==t(n)}catch(r){return zl(e,r),!1}}function Gh(e,t,n,r){return function i(o){var a=1&e.flags?yr(e.index,t):t;0==(32&t[jn])&&Dl(a);for(var s=Vh(t,n,o),u=i.__ngNextListenerFn__;u;)s=Vh(t,u,o)&&s,u=u.__ngNextListenerFn__;return r&&!1===s&&(o.preventDefault(),o.returnValue=!1),s}}function jh(e){return void 0===e&&(e=1),yi(e)}function zh(e,t){for(var n=null,r=function(e){var t=e.attrs;if(null!=t){var n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e),i=0;i<t.length;i++){var o=t[i];if("*"!==o){if(null===r?Xs(e,o,!0):Ks(r,o))return i}else n=i}return n}function Yh(e){var t=aa(Gr())[Wn];if(!t.projection)for(var n=t.projection=new Array(e?e.length:1).fill(null),r=n.slice(),i=t.child;null!==i;){var o=e?zh(i,e):0;null!==o&&(r[o]?r[o].projectionNext=i:n[o]=i,r[o]=i),i=i.next}}var Hh=!1;function Wh(e){Hh=e}function Xh(e,t,n){void 0===t&&(t=0);var r=Gr(),i=tl(r[Gn],r[Wn],e,1,null,n||null);null===i.projection&&(i.projection=t),ai(),Hh||Kc(r,i,t,aa(r))}function Kh(e,t,n){return Qh(e,"",t,"",n),Kh}function Qh(e,t,n,r,i){var o=Ei(),a=dc(t,n,r);return a!==Na&&ml(o,e,a,i),Qh}function qh(e,t,n,r,i,o,a){var s=Ei(),u=fc(t,n,r,i,o);return u!==Na&&ml(s,e,u,a),qh}function Zh(e,t,n,r,i,o,a,s,u){var l=Ei(),c=pc(t,n,r,i,o,a,s);return c!==Na&&ml(l,e,c,u),Zh}function Jh(e,t,n,r,i,o,a,s,u,l,c){var h=Ei(),d=_c(t,n,r,i,o,a,s,u,l);return d!==Na&&ml(h,e,d,c),Jh}function $h(e,t,n,r,i,o,a,s,u,l,c,h,d){var f=Ei(),p=mc(t,n,r,i,o,a,s,u,l,c,h);return p!==Na&&ml(f,e,p,d),$h}function ed(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p){var _=Ei(),m=gc(t,n,r,i,o,a,s,u,l,c,h,d,f);return m!==Na&&ml(_,e,m,p),ed}function td(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m){var g=Ei(),v=vc(t,n,r,i,o,a,s,u,l,c,h,d,f,p,_);return v!==Na&&ml(g,e,v,m),td}function nd(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m,g,v){var y=Ei(),b=yc(t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m,g);return b!==Na&&ml(y,e,b,v),nd}function rd(e,t,n){var r=Ei(),i=hc(t);return i!==Na&&ml(r,e,i,n),rd}function id(e,t){var n=Gr(),r=n[e+or]=Ic(t,n[Jn]),i=tl(n[Gn],n[Wn],e,3,null,null);ai(),Hc(r,i,n)}function od(e){var t=Gr(),n=Ei(),r=uc(t,e);r!==Na&&Hl(t,n,On(r))}function ad(e){return sd("",e,""),ad}function sd(e,t,n){var r=Ei(),i=Gr(),o=dc(e,t,n);return o!==Na&&Hl(i,r,o),sd}function ud(e,t,n,r,i){var o=Ei(),a=Gr(),s=fc(e,t,n,r,i);return s!==Na&&Hl(a,o,s),ud}function ld(e,t,n,r,i,o,a){var s=Ei(),u=Gr(),l=pc(e,t,n,r,i,o,a);return l!==Na&&Hl(u,s,l),ld}function cd(e,t,n,r,i,o,a,s,u){var l=Ei(),c=Gr(),h=_c(e,t,n,r,i,o,a,s,u);return h!==Na&&Hl(c,l,h),cd}function hd(e,t,n,r,i,o,a,s,u,l,c){var h=Ei(),d=Gr(),f=mc(e,t,n,r,i,o,a,s,u,l,c);return f!==Na&&Hl(d,h,f),hd}function dd(e,t,n,r,i,o,a,s,u,l,c,h,d){var f=Ei(),p=Gr(),_=gc(e,t,n,r,i,o,a,s,u,l,c,h,d);return _!==Na&&Hl(p,f,_),dd}function fd(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p){var _=Ei(),m=Gr(),g=vc(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p);return g!==Na&&Hl(m,_,g),fd}function pd(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m){var g=Ei(),v=Gr(),y=yc(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m);return y!==Na&&Hl(v,g,y),pd}function _d(e){var t=Ei(),n=Gr(),r=hc(e);return r!==Na&&Hl(n,t,r),_d}function md(e,t){var n=wo(e);if(n){var r=n.native,i=n.lView,o=function(e,t){if(!(t=t||wo(r)))return null;var n=Ho(t.nodeIndex,t.lView);return qo(n)||Zo(n)}(0,n),a=sa(i);Qo(o,a,r,t,0,e),Ol(a,2)}}function gd(e){var t=wo(e);if(!t)return[];var n=Ho(t.nodeIndex,t.lView),r=n?qo(n):null;return r?function(e){for(var t=[],n=e[0],r=2;r<n;r+=2){var i=e[r];i&&t.push(i)}for(r=n;r<e.length;r++)t.push(e[r]);return t}(r):[]}function vd(e){var t,n,r=Sd(e);return void 0===r.component&&(r.component=1&(n=(t=r.lView)[Gn].data[r.nodeIndex]).flags?t[n.directiveStart]:null),r.component}function yd(e){return Sd(e).lView[Qn]}function bd(e){for(var t,n=Md(e).lView;null===n[Vn]&&(t=oa(n));)n=t;return 512&n[jn]?null:n[Qn]}function Td(e){return Object(r.__spread)(sa(e).components)}function Ed(e){var t=Md(e);return new Aa(t.lView[Gn].data[t.nodeIndex],t.lView)}function xd(e){var t=Md(e);return void 0===t.directives&&(t.directives=Uo(t.nodeIndex,t.lView,!1)),t.directives||[]}function Md(e,t){void 0===t&&(t=!0);var n=wo(e);if(!n&&t)throw new Error("Invalid ng target");return n}function Ad(e){return wo(e).native}function Sd(e){if(!(e instanceof Node))throw new Error("Expecting instance of DOM Node");return Md(e)}function Cd(e){return"boolean"==typeof e.useCapture}function Pd(e){var t=Sd(e).lView,n=t[Kn],r=t[Gn].cleanup,i=[];if(r&&n)for(var o=0;o<r.length;){var a=r[o++],s=r[o++];if("string"==typeof a){var u=a,l=hr(t[s]),c=n[r[o++]],h=r[o++];e==l&&i.push({element:e,name:u,callback:c,useCapture:"boolean"==typeof h?h:!(h>=0)&&null})}}return i.sort(Rd),i}function Rd(e,t){return e.name==t.name?0:e.name<t.name?-1:1}var Dd="ng",Od=!1;function wd(){Od||(Od=!0,Ld("getComponent",vd),Ld("getContext",yd),Ld("getListeners",Pd),Ld("getViewComponent",bd),Ld("getHostElement",Ad),Ld("getInjector",Ed),Ld("getRootComponents",Td),Ld("getDirectives",xd),Ld("getPlayers",gd),Ld("markDirty",Dc))}function Ld(e,t){if(J){var n=J[Dd];n||(n=J[Dd]={}),n[e]=t}}function Id(e,t){void 0===t&&(t={}),Qr(null);var n=t.rendererFactory||Oo,r=t.sanitizer||null,i=Sn(e);i.type!=e&&(i.type=e);var o,a=dl(n,t.host||i.selectors[0][0]),s=i.onPush?576:528,u=Bd(t.scheduler,t.playerHandler),l=n.createRenderer(a,i),c=el(null,hl(-1,null,1,0,null,null,null,null),u,s,null,null,n,l,void 0,t.injector||null),h=vi(c,null),d=!1;try{n.begin&&n.begin();var f=Fd(a,i,c,n,l,r);o=Nd(f,i,c,u,t.hostFeatures||null),Rl(c,f),Zu(c),c[jn]&=-5,Cr(c),Zu(c),d=!0}finally{bi(h,d),n.end&&n.end()}return o}function Fd(e,t,n,r,i,o){zr=!1,jr=null,Lr=0,Nr=!0;var a=n[Gn];n[0+or]=e;var s=tl(a,null,0,3,null,null),u=el(n,cl(t),null,t.onPush?64:16,n[or],s,r,i,o);return a.firstTemplatePass&&(ma(da(s,n),n,t.type),s.flags=1,xl(s,n.length,1),Tl(s)),n[or]=u}function Nd(e,t,n,r,i){var o=n[Gn],a=function(e,t,n){var r=ni();e.firstTemplatePass&&(n.providersResolver&&n.providersResolver(n),vl(e,r,1),Ml(e,t,n,n.factory));var i=Ea(e.data,t,t.length-1,r);return bl(t,r,i),i}(o,n,t);r.components.push(a),e[Qn]=a,i&&i.forEach(function(e){return e(a,t)}),t.contentQueries&&t.contentQueries(1,a,n.length-1);var s=ni();if(o.firstTemplatePass&&t.hostBindings&&(Qr(s.index-or),gl(t,o.expandoInstructions,a,s,o.firstTemplatePass),s.onElementCreationFns&&Wl(s),Qr(null)),s.stylingTemplate){var u=e[Vn];za(u,s.stylingTemplate,e[Jn]),Ya(u,s.stylingTemplate,e[Jn])}return a}function Bd(e,t){return{components:[],scheduler:e||Ln,clean:kl,playerHandler:t||null,flags:0}}function kd(e,t){var n=Ar(e)[Gn],r=n.data.length-1;Pr(r,t,n,-1,-1,-1),Rr(n,{directiveStart:r,directiveEnd:r+1})}function Ud(e){return sa(e).clean}var Vd=function(){function e(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}return e.prototype.isFirstChange=function(){return this.firstChange},e}();function Gd(){return jd.ngInherit=!0,jd}function jd(e){e.type.prototype.ngOnChanges&&(e.setInput=zd,e.onChanges=function(){var e=Hd(this),t=e&&e.current;if(t){var n=e.previous;if(n===an)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}})}function zd(e,t,n,r){var i=Hd(e)||function(e,t){return e[Yd]={previous:an,current:null}}(e),o=i.current||(i.current={}),a=i.previous,s=this.declaredInputs[n],u=a[s];o[s]=new Vd(u&&u.currentValue,t,a===an),e[r]=t}var Yd="__ngSimpleChanges__";function Hd(e){return e[Yd]||null}function Wd(e){for(var t,n,i=Object.getPrototypeOf(e.type.prototype).constructor;i;){var o=void 0;if(Er(e))o=i.ngComponentDef||i.ngDirectiveDef;else{if(i.ngComponentDef)throw new Error("Directives cannot inherit Components");o=i.ngDirectiveDef}var a=i.ngBaseDef;if(a||o){var s=e;s.inputs=Xd(e.inputs),s.declaredInputs=Xd(e.declaredInputs),s.outputs=Xd(e.outputs)}if(a){var u=a.viewQuery,l=a.contentQueries,c=a.hostBindings;c&&qd(e,c),u&&Kd(e,u),l&&Qd(e,l),N(e.inputs,a.inputs),N(e.declaredInputs,a.declaredInputs),N(e.outputs,a.outputs)}if(o){var h=o.hostBindings;h&&qd(e,h);var d=o.viewQuery,f=o.contentQueries;d&&Kd(e,d),f&&Qd(e,f),N(e.inputs,o.inputs),N(e.declaredInputs,o.declaredInputs),N(e.outputs,o.outputs),e.afterContentChecked=e.afterContentChecked||o.afterContentChecked,e.afterContentInit=e.afterContentInit||o.afterContentInit,e.afterViewChecked=e.afterViewChecked||o.afterViewChecked,e.afterViewInit=e.afterViewInit||o.afterViewInit,e.doCheck=e.doCheck||o.doCheck,e.onDestroy=e.onDestroy||o.onDestroy,e.onInit=e.onInit||o.onInit;var p=o.features;if(p)try{for(var _=Object(r.__values)(p),m=_.next();!m.done;m=_.next()){var g=m.value;g&&g.ngInherit&&g(e)}}catch(y){t={error:y}}finally{try{m&&!m.done&&(n=_.return)&&n.call(_)}finally{if(t)throw t.error}}}else{var v=i.prototype;v&&(e.afterContentChecked=e.afterContentChecked||v.ngAfterContentChecked,e.afterContentInit=e.afterContentInit||v.ngAfterContentInit,e.afterViewChecked=e.afterViewChecked||v.ngAfterViewChecked,e.afterViewInit=e.afterViewInit||v.ngAfterViewInit,e.doCheck=e.doCheck||v.ngDoCheck,e.onDestroy=e.onDestroy||v.ngOnDestroy,e.onInit=e.onInit||v.ngOnInit,v.ngOnChanges&&Gd()(e))}i=Object.getPrototypeOf(i)}}function Xd(e){return e===an?{}:e===sn?[]:e}function Kd(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function Qd(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function qd(e,t){var n=e.hostBindings;t!==n&&(e.hostBindings=n?function(e,r,i){Jr(1);try{t(e,r,i)}finally{Jr(-1)}n(e,r,i)}:t)}function Zd(e,t,n,r,i){if(e=X(e),Array.isArray(e))for(var o=0;o<e.length;o++)Zd(e[o],t,n,r,i);else{var a=Gr(),s=ut(e)?e:X(e.provide),u=it(e),l=ni(),c=65535&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>16;if(e.useClass||ut(e)){var f=(e.useClass||e).prototype.ngOnDestroy;if(f){var p=a[Gn];(p.destroyHooks||(p.destroyHooks=[])).push(t.length,f)}}if(ut(e)||!e.multi){var _=new Po(u,i,uh),m=$d(s,t,i?c:c+d,h);-1==m?(ma(da(l,a),a,s),t.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(_),a.push(_)):(n[m]=_,a[m]=_)}else{var g=$d(s,t,c+d,h),v=$d(s,t,c,c+d),y=v>=0&&n[v];i&&!y||!i&&!(g>=0&&n[g])?(ma(da(l,a),a,s),_=function(e,t,n,r,i){var o=new Po(e,n,uh);return o.multi=[],o.index=t,o.componentProviders=0,Jd(o,i,r&&!n),o}(i?tf:ef,n.length,i,r,u),!i&&y&&(n[v].providerFactory=_),t.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=65536),n.push(_),a.push(_)):Jd(n[i?v:g],u,!i&&r),!i&&r&&y&&n[v].componentProviders++}}}function Jd(e,t,n){e.multi.push(t),n&&e.componentProviders++}function $d(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function ef(e,t,n,r){return nf(this.multi,[])}function tf(e,t,n,r){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,s=Ea(t,n,this.providerFactory.index,r);nf(o,i=s.slice(0,a));for(var u=a;u<s.length;u++)i.push(s[u])}else nf(o,i=[]);return i}function nf(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function rf(e,t){return void 0===t&&(t=[]),function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=Gr()[Gn];if(r.firstTemplatePass){var i=Er(e);Zd(n,r.data,r.blueprint,i,!0),Zd(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}var of=function(){return function(){}}(),af=function(){return function(){}}();function sf(e){var t=Error("No component factory found for "+Y(e)+". Did you add it to @NgModule.entryComponents?");return t[hf]=e,t}var uf,lf,cf,hf="ngComponent",df=function(){function e(){}return e.prototype.resolveComponentFactory=function(e){throw sf(e)},e}(),ff=function(){function e(){}return e.NULL=new df,e}(),pf=function(){function e(e,t,n){this._parent=t,this._ngModule=n,this._factories=new Map;for(var r=0;r<e.length;r++){var i=e[r];this._factories.set(i.componentType,i)}}return e.prototype.resolveComponentFactory=function(e){var t=this._factories.get(e);if(!t&&this._parent&&(t=this._parent.resolveComponentFactory(e)),!t)throw sf(e);return new _f(t,this._ngModule)},e}(),_f=function(e){function t(t,n){var r=e.call(this)||this;return r.factory=t,r.ngModule=n,r.selector=t.selector,r.componentType=t.componentType,r.ngContentSelectors=t.ngContentSelectors,r.inputs=t.inputs,r.outputs=t.outputs,r}return Object(r.__extends)(t,e),t.prototype.create=function(e,t,n,r){return this.factory.create(e,t,n,r||this.ngModule)},t}(af),mf=function(){return function(){}}(),gf=function(){return function(){}}(),vf=function(){function e(e,t,n){this._context=t,this._componentIndex=n,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null,this._lView=e}return Object.defineProperty(e.prototype,"rootNodes",{get:function(){return null==this._lView[Vn]?function e(t,n,r){for(var i=n.child;i;){var o=mr(i,t);if(o&&r.push(o),4===i.type)e(t,i,r);else if(1===i.type)for(var a=aa(t),s=a[Wn],u=oa(a),l=s.projection[i.projection];l&&u;)r.push(mr(l,u)),l=l.next;i=i.next}return r}(this._lView,this._lView[Wn],[]):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._context?this._context:this._lookUpContext()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return 256==(256&this._lView[jn])},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){var e=this._viewContainerRef.indexOf(this);e>-1&&this._viewContainerRef.detach(e),this._viewContainerRef=null}Uc(this._lView)},e.prototype.onDestroy=function(e){var t,n;n=e,Vl(t=this._lView).push(n),t[Gn].firstTemplatePass&&Gl(t).push(t[Kn].length-1,null)},e.prototype.markForCheck=function(){Dl(this._lView)},e.prototype.detach=function(){this._lView[jn]&=-129},e.prototype.reattach=function(){this._lView[jn]|=128},e.prototype.detectChanges=function(){Ll(this._lView,this.context)},e.prototype.checkNoChanges=function(){!function(e,t){hi(!0);try{Ll(e,t)}finally{hi(!1)}}(this._lView,this.context)},e.prototype.attachToViewContainerRef=function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e},e.prototype.detachFromAppRef=function(){var e;this._appRef=null,Zc((e=this._lView)[Jn],1,e,null,null)},e.prototype.attachToAppRef=function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e},e.prototype._lookUpContext=function(){return this._context=oa(this._lView)[this._componentIndex]},e}(),yf=function(e){function t(t){var n=e.call(this,t,null,-1)||this;return n._view=t,n}return Object(r.__extends)(t,e),t.prototype.detectChanges=function(){Il(this._view)},t.prototype.checkNoChanges=function(){!function(e){hi(!0);try{Il(e)}finally{hi(!1)}}(this._view)},Object.defineProperty(t.prototype,"context",{get:function(){return null},enumerable:!0,configurable:!0}),t}(vf);function bf(e,t,n){return uf||(uf=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(e)),new uf(mr(t,n))}function Tf(e,t,n,i){if(lf||(lf=function(e){function t(t,n,r,i,o){var a=e.call(this)||this;return a._declarationParentView=t,a.elementRef=n,a._tView=r,a._hostLContainer=i,a._injectorIndex=o,a}return Object(r.__extends)(t,e),t.prototype.createEmbeddedView=function(e,t,n){var r=this._declarationParentView[Hn];r&&null==this._hostLContainer[Hn]&&(this._hostLContainer[Hn]=r.container());var i=function(e,t,n,r,i){var o=oi(),a=ni();ri(null,!0);var s=el(n,e,t,16,null,null);return s[rr]=n,r&&(s[Hn]=r.createView()),nl(e,null,-1,s),e.firstTemplatePass&&(e.node.injectorIndex=i),ri(a,o),s}(this._tView,e,this._declarationParentView,this._hostLContainer[Hn],this._injectorIndex);t&&Nc(i,t,n),rl(i,this._tView,e);var o=new vf(i,e,-1);return o._tViewNode=i[Wn],o},t}(e)),0===n.type){var o=i[n.index];return new lf(i,bf(t,n,i),n.tViews,o,n.injectorIndex)}return null}function Ef(e,t,n){if(Tr(e)){var r=e.directiveStart,i=yr(e.index,t);return new vf(i,n,r)}if(3===e.type||0===e.type||4===e.type){var o=aa(t);return new vf(o,o[Qn],-1)}return null}function xf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}var Mf=function(){function e(e){this.nativeElement=e}return e.__NG_ELEMENT_ID__=function(){return Sf(e)},e}(),Af=function(e){return bf(e,ni(),Gr())},Sf=xf,Cf=function(){return function(e,t,n,r,i,o){this.id=e,this.templateUrl=t,this.slotCount=n,this.encapsulation=r,this.styles=i,this.animations=o}}(),Pf=function(){return function(){}}(),Rf=function(){return function(){}}(),Df=function(){return function(){}}(),Of=function(){return function(){}}(),wf=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}({}),Lf=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Ff()},e}(),If=function(){var e=Gr(),t=yr(ni().index,e);return function(n){var r=(dr(t)?t:e)[Jn];if(Do(r))return r;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}()},Ff=xf,Nf=function(){return function(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}(),Bf=new Nf("8.1.1"),kf=function(){function e(){}return e.prototype.supports=function(e){return $l(e)},e.prototype.create=function(e){return new Vf(e)},e}(),Uf=function(e,t){return t},Vf=function(){function e(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Uf}return e.prototype.forEachItem=function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)},e.prototype.forEachOperation=function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var o=!n||t&&t.currentIndex<Yf(n,r,i)?t:n,a=Yf(o,r,i),s=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);var u=a-r,l=s-r;if(u!=l){for(var c=0;c<u;c++){var h=c<i.length?i[c]:i[c]=0,d=h+c;l<=d&&d<u&&(i[c]=h+1)}i[o.previousIndex]=l-u}}a!==s&&e(o,a,s)}},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachMovedItem=function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.forEachIdentityChange=function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)},e.prototype.diff=function(e){if(null==e&&(e=[]),!$l(e))throw new Error("Error trying to diff '"+Y(e)+"'. Only arrays and iterables are allowed");return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var s=0;s<this.length;s++)i=this._trackByFn(s,r=e[s]),null!==o&&ql(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,s)),ql(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,s),a=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r=e[Ql()](),i=void 0;!(i=r.next()).done;)t(i.value)}(e,function(e){i=t._trackByFn(n,e),null!==o&&ql(o.trackById,i)?(a&&(o=t._verifyReinsertion(o,e,i,n)),ql(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=e,this.isDirty},Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead},enumerable:!0,configurable:!0}),e.prototype._reset=function(){if(this.isDirty){var e=void 0,t=void 0;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=t)e.previousIndex=e.currentIndex,t=e._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}},e.prototype._mismatch=function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(ql(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(ql(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):e=this._addAfter(new Gf(t,n),i,r),e},e.prototype._verifyReinsertion=function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e},e.prototype._truncate=function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)},e.prototype._reinsertAfter=function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._moveAfter=function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e},e.prototype._addAfter=function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e},e.prototype._insertAfter=function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new zf),this._linkedRecords.put(e),e.currentIndex=n,e},e.prototype._remove=function(e){return this._addToRemovals(this._unlink(e))},e.prototype._unlink=function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e},e.prototype._addToMoves=function(e,t){return e.previousIndex===t?e:(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e,e)},e.prototype._addToRemovals=function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e},e.prototype._addIdentityChange=function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e},e}(),Gf=function(){return function(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}(),jf=function(){function e(){this._head=null,this._tail=null}return e.prototype.add=function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)},e.prototype.get=function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&ql(n.trackById,e))return n;return null},e.prototype.remove=function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head},e}(),zf=function(){function e(){this.map=new Map}return e.prototype.put=function(e){var t=e.trackById,n=this.map.get(t);n||(n=new jf,this.map.set(t,n)),n.add(e)},e.prototype.get=function(e,t){var n=this.map.get(e);return n?n.get(e,t):null},e.prototype.remove=function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.map.size},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this.map.clear()},e}();function Yf(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var Hf=function(){function e(){}return e.prototype.supports=function(e){return e instanceof Map||ec(e)},e.prototype.create=function(){return new Wf},e}(),Wf=function(){function e(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead},enumerable:!0,configurable:!0}),e.prototype.forEachItem=function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)},e.prototype.forEachPreviousItem=function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)},e.prototype.forEachChangedItem=function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)},e.prototype.forEachAddedItem=function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)},e.prototype.forEachRemovedItem=function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)},e.prototype.diff=function(e){if(e){if(!(e instanceof Map||ec(e)))throw new Error("Error trying to diff '"+Y(e)+"'. Only maps and objects are allowed")}else e=new Map;return this.check(e)?this:null},e.prototype.onDestroy=function(){},e.prototype.check=function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty},e.prototype._insertBeforeOrAppend=function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null},e.prototype._getOrCreateRecordForKey=function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Xf(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o},e.prototype._reset=function(){if(this.isDirty){var e=void 0;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}},e.prototype._maybeAddToChanges=function(e,t){ql(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))},e.prototype._addToAdditions=function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)},e.prototype._addToChanges=function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)},e.prototype._forEach=function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})},e}(),Xf=function(){return function(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}(),Kf=function(){function e(e){this.factories=e}return e.create=function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return e.create(t,n)},deps:[[e,new D,new P]]}},e.prototype.find=function(e){var t,n=this.factories.find(function(t){return t.supports(e)});if(null!=n)return n;throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((t=e).name||typeof t)+"'")},e.ngInjectableDef=B({token:e,providedIn:"root",factory:function(){return new e([new kf])}}),e}(),Qf=function(){function e(e){this.factories=e}return e.create=function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)},e.extend=function(t){return{provide:e,useFactory:function(n){if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return e.create(t,n)},deps:[[e,new D,new P]]}},e.prototype.find=function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '"+e+"'")},e.ngInjectableDef=B({token:e,providedIn:"root",factory:function(){return new e([new Hf])}}),e}(),qf=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return Jf()},e}(),Zf=function(){return Ef(ni(),Gr(),null)},Jf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},$f=[new Hf],ep=new Kf([new kf]),tp=new Qf($f),np=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return ip(e,Mf)},e}(),rp=function(e,t){return Tf(e,t,ni(),Gr())},ip=xf,op=function(){function e(){}return e.__NG_ELEMENT_ID__=function(){return sp(e,Mf)},e}(),ap=function(e,t){return function(e,t,n,i){var o;cf||(cf=function(e){function n(t,n,r){var i=e.call(this)||this;return i._lContainer=t,i._hostTNode=n,i._hostView=r,i}return Object(r.__extends)(n,e),Object.defineProperty(n.prototype,"element",{get:function(){return bf(t,this._hostTNode,this._hostView)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"injector",{get:function(){return new Aa(this._hostTNode,this._hostView)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"parentInjector",{get:function(){var e=_a(this._hostTNode,this._hostView),t=ia(e,this._hostView),n=function(e,t,n){if(n.parent&&-1!==n.parent.injectorIndex){for(var r=n.parent.injectorIndex,i=n.parent;null!=i.parent&&r==i.injectorIndex;)i=i.parent;return i}for(var o=ra(e),a=t,s=t[Wn];o>1;)s=(a=a[rr])[Wn],o--;return s}(e,this._hostView,this._hostTNode);return ta(e)&&null!=n?new Aa(n,t):new Aa(null,this._hostView)},enumerable:!0,configurable:!0}),n.prototype.clear=function(){for(;this.length;)this.remove(0)},n.prototype.get=function(e){return null!==this._lContainer[8]&&this._lContainer[8][e]||null},Object.defineProperty(n.prototype,"length",{get:function(){var e=this._lContainer.length-lr;return e>0?e:0},enumerable:!0,configurable:!0}),n.prototype.createEmbeddedView=function(e,t,n){this.allocateContainerIfNeeded();var r=this._adjustIndex(n),i=e.createEmbeddedView(t||{},this._lContainer,r);return i.attachToViewContainerRef(this),this._lContainer[8].splice(r,0,i),i},n.prototype.createComponent=function(e,t,n,r,i){var o=n||this.parentInjector;!i&&null==e.ngModule&&o&&(i=o.get(mf,null));var a=e.create(o,r,void 0,i);return this.insert(a.hostView,t),a},n.prototype.insert=function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");this.allocateContainerIfNeeded();var n=e._lView,r=this._adjustIndex(t);return Sr(n)?this.move(e,r):(Nc(n,this._lContainer,r),Fc(n,!0,Wc(r,this._lContainer)),e.attachToViewContainerRef(this),this._lContainer[8].splice(r,0,e),e)},n.prototype.move=function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n=this.indexOf(e);return-1!==n&&this.detach(n),this.insert(e,t),e},n.prototype.indexOf=function(e){return null!==this._lContainer[8]?this._lContainer[8].indexOf(e):0},n.prototype.remove=function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1);kc(this._lContainer,t),this._lContainer[8].splice(t,1)},n.prototype.detach=function(e){this.allocateContainerIfNeeded();var t=this._adjustIndex(e,-1),n=Bc(this._lContainer,t);return n&&null!=this._lContainer[8].splice(t,1)[0]?new vf(n,n[Qn],-1):null},n.prototype._adjustIndex=function(e,t){return void 0===t&&(t=0),null==e?this.length+t:e},n.prototype.allocateContainerIfNeeded=function(){null===this._lContainer[8]&&(this._lContainer[8]=[])},n}(e));var a=i[n.index];if(fr(a))(o=a)[sr]=-1;else{var s;if(s=4===n.type?hr(a):i[Jn].createComment(""),xr(i)){var u=i[Jn],l=mr(n,i);jc(u,Yc(u,l),s,function(e,t){return Do(e)?e.nextSibling(t):t.nextSibling}(u,l))}else Hc(s,n,i);i[n.index]=o=Cl(a,i,s,n,!0),Rl(i,o)}return new cf(o,n,i)}(e,t,ni(),Gr())},sp=xf;function up(e,t,n,r){var i="ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked. Previous value: '"+t+"'. Current value: '"+n+"'.";return r&&(i+=" It seems like the view has been created after its parent and its children have been dirty checked. Has it been created in a change detection hook ?"),function(e,t){var n=new Error(e);return lp(n,t),n}(i,e)}function lp(e,t){e[yt]=t,e[Tt]=t.logError.bind(t)}function cp(e){return new Error("ViewDestroyedError: Attempt to use a destroyed view: "+e)}function hp(e,t,n){var r=e.state,i=1792&r;return i===t?(e.state=-1793&r|n,e.initIndex=-1,!0):i===n}function dp(e,t,n){return(1792&e.state)===t&&e.initIndex<=n&&(e.initIndex=n+1,!0)}function fp(e,t){return e.nodes[t]}function pp(e,t){return e.nodes[t]}function _p(e,t){return e.nodes[t]}function mp(e,t){return e.nodes[t]}function gp(e,t){return e.nodes[t]}var vp=function(){return function(){}}(),yp={setCurrentNode:void 0,createRootView:void 0,createEmbeddedView:void 0,createComponentView:void 0,createNgModuleRef:void 0,overrideProvider:void 0,overrideComponentView:void 0,clearOverrides:void 0,checkAndUpdateView:void 0,checkNoChangesView:void 0,destroyView:void 0,resolveDep:void 0,createDebugContext:void 0,handleEvent:void 0,updateDirectives:void 0,updateRenderer:void 0,dirtyParentQueries:void 0},bp=function(){},Tp=new Map;function Ep(e){var t=Tp.get(e);return t||(t=Y(e)+"_"+Tp.size,Tp.set(e,t)),t}function xp(e,t,n,r){if(Jl.isWrapped(r)){r=Jl.unwrap(r);var i=e.def.nodes[t].bindingIndex+n,o=Jl.unwrap(e.oldValues[i]);e.oldValues[i]=new Jl(o)}return r}var Mp="$$undefined",Ap="$$empty";function Sp(e){return{id:Mp,styles:e.styles,encapsulation:e.encapsulation,data:e.data}}var Cp=0;function Pp(e,t,n,r){return!(!(2&e.state)&&ql(e.oldValues[t.bindingIndex+n],r))}function Rp(e,t,n,r){return!!Pp(e,t,n,r)&&(e.oldValues[t.bindingIndex+n]=r,!0)}function Dp(e,t,n,r){var i=e.oldValues[t.bindingIndex+n];if(1&e.state||!Zl(i,r)){var o=t.bindings[n].name;throw up(yp.createDebugContext(e,t.nodeIndex),o+": "+i,o+": "+r,0!=(1&e.state))}}function Op(e){for(var t=e;t;)2&t.def.flags&&(t.state|=8),t=t.viewContainerParent||t.parent}function wp(e,t){for(var n=e;n&&n!==t;)n.state|=64,n=n.viewContainerParent||n.parent}function Lp(e,t,n,r){try{return Op(33554432&e.def.nodes[t].flags?pp(e,t).componentView:e),yp.handleEvent(e,t,n,r)}catch(i){e.root.errorHandler.handleError(i)}}function Ip(e){return e.parent?pp(e.parent,e.parentNodeDef.nodeIndex):null}function Fp(e){return e.parent?e.parentNodeDef.parent:null}function Np(e,t){switch(201347067&t.flags){case 1:return pp(e,t.nodeIndex).renderElement;case 2:return fp(e,t.nodeIndex).renderText}}function Bp(e){return!!e.parent&&!!(32768&e.parentNodeDef.flags)}function kp(e){return!(!e.parent||32768&e.parentNodeDef.flags)}function Up(e){return 1<<e%32}function Vp(e){var t={},n=0,i={};return e&&e.forEach(function(e){var o=Object(r.__read)(e,2),a=o[0],s=o[1];"number"==typeof a?(t[a]=s,n|=Up(a)):i[a]=s}),{matchedQueries:t,references:i,matchedQueryIds:n}}function Gp(e,t){return e.map(function(e){var n,i,o;return Array.isArray(e)?(o=(n=Object(r.__read)(e,2))[0],i=n[1]):(o=0,i=e),i&&("function"==typeof i||"object"==typeof i)&&t&&Object.defineProperty(i,ue,{value:t,configurable:!0}),{flags:o,token:i,tokenKey:Ep(i)}})}function jp(e,t,n){var r=n.renderParent;return r?0==(1&r.flags)||0==(33554432&r.flags)||r.element.componentRendererType&&r.element.componentRendererType.encapsulation===rn.Native?pp(e,n.renderParent.nodeIndex).renderElement:void 0:t}var zp=new WeakMap;function Yp(e){var t=zp.get(e);return t||((t=e(function(){return bp})).factory=e,zp.set(e,t)),t}function Hp(e,t,n,r,i){3===t&&(n=e.renderer.parentNode(Np(e,e.def.lastRenderRootNode))),Wp(e,t,0,e.def.nodes.length-1,n,r,i)}function Wp(e,t,n,r,i,o,a){for(var s=n;s<=r;s++){var u=e.def.nodes[s];11&u.flags&&Kp(e,u,t,i,o,a),s+=u.childCount}}function Xp(e,t,n,r,i,o){for(var a=e;a&&!Bp(a);)a=a.parent;for(var s=a.parent,u=Fp(a),l=u.nodeIndex+u.childCount,c=u.nodeIndex+1;c<=l;c++){var h=s.def.nodes[c];h.ngContentIndex===t&&Kp(s,h,n,r,i,o),c+=h.childCount}if(!s.parent){var d=e.root.projectableNodes[t];if(d)for(c=0;c<d.length;c++)Qp(e,d[c],n,r,i,o)}}function Kp(e,t,n,r,i,o){if(8&t.flags)Xp(e,t.ngContent.index,n,r,i,o);else{var a=Np(e,t);if(3===n&&33554432&t.flags&&48&t.bindingFlags?(16&t.bindingFlags&&Qp(e,a,n,r,i,o),32&t.bindingFlags&&Qp(pp(e,t.nodeIndex).componentView,a,n,r,i,o)):Qp(e,a,n,r,i,o),16777216&t.flags)for(var s=pp(e,t.nodeIndex).viewContainer._embeddedViews,u=0;u<s.length;u++)Hp(s[u],n,r,i,o);1&t.flags&&!t.element.name&&Wp(e,n,t.nodeIndex+1,t.nodeIndex+t.childCount,r,i,o)}}function Qp(e,t,n,r,i,o){var a=e.renderer;switch(n){case 1:a.appendChild(r,t);break;case 2:a.insertBefore(r,t,i);break;case 3:a.removeChild(r,t);break;case 0:o.push(t)}}var qp=/^:([^:]+):(.+)$/;function Zp(e){if(":"===e[0]){var t=e.match(qp);return[t[1],t[2]]}return["",e]}function Jp(e){for(var t=0,n=0;n<e.length;n++)t|=e[n].flags;return t}function $p(e,t){for(var n="",r=0;r<2*e;r+=2)n=n+t[r]+t_(t[r+1]);return n+t[2*e]}function e_(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m,g,v,y){switch(e){case 1:return t+t_(n)+r;case 2:return t+t_(n)+r+t_(i)+o;case 3:return t+t_(n)+r+t_(i)+o+t_(a)+s;case 4:return t+t_(n)+r+t_(i)+o+t_(a)+s+t_(u)+l;case 5:return t+t_(n)+r+t_(i)+o+t_(a)+s+t_(u)+l+t_(c)+h;case 6:return t+t_(n)+r+t_(i)+o+t_(a)+s+t_(u)+l+t_(c)+h+t_(d)+f;case 7:return t+t_(n)+r+t_(i)+o+t_(a)+s+t_(u)+l+t_(c)+h+t_(d)+f+t_(p)+_;case 8:return t+t_(n)+r+t_(i)+o+t_(a)+s+t_(u)+l+t_(c)+h+t_(d)+f+t_(p)+_+t_(m)+g;case 9:return t+t_(n)+r+t_(i)+o+t_(a)+s+t_(u)+l+t_(c)+h+t_(d)+f+t_(p)+_+t_(m)+g+t_(v)+y;default:throw new Error("Does not support more than 9 expressions")}}function t_(e){return null!=e?e.toString():""}var n_=[],r_={},i_=new Object,o_=Ep(ht),a_=Ep(ne),s_=Ep(mf);function u_(e,t,n,r){return n=X(n),{index:-1,deps:Gp(r,Y(t)),flags:e,token:t,value:n}}function l_(e){for(var t={},n=[],r=!1,i=0;i<e.length;i++){var o=e[i];o.token===Qe&&!0===o.value&&(r=!0),1073741824&o.flags&&n.push(o.token),o.index=i,t[Ep(o.token)]=o}return{factory:null,providersByKey:t,providers:e,modules:n,isRoot:r}}function c_(e,t,n){void 0===n&&(n=ht.THROW_IF_NOT_FOUND);var r,i,o=he(e);try{if(8&t.flags)return t.token;if(2&t.flags&&(n=null),1&t.flags)return e._parent.get(t.token,n);var a=t.tokenKey;switch(a){case o_:case a_:case s_:return e}var s,u=e._def.providersByKey[a];if(u){var l=e._providers[u.index];return void 0===l&&(l=e._providers[u.index]=h_(e,u)),l===i_?void 0:l}if((s=V(t.token))&&(r=e,null!=(i=s).providedIn&&(function(e,t){return e._def.modules.indexOf(i.providedIn)>-1}(r)||"root"===i.providedIn&&r._def.isRoot))){var c=e._providers.length;return e._def.providers[c]=e._def.providersByKey[t.tokenKey]={flags:5120,value:s.factory,deps:[],index:c,token:t.token},e._providers[c]=i_,e._providers[c]=h_(e,e._def.providersByKey[t.tokenKey])}return 4&t.flags?n:e._parent.get(t.token,n)}finally{he(o)}}function h_(e,t){var n;switch(201347067&t.flags){case 512:n=function(e,t,n){var i=n.length;switch(i){case 0:return new t;case 1:return new t(c_(e,n[0]));case 2:return new t(c_(e,n[0]),c_(e,n[1]));case 3:return new t(c_(e,n[0]),c_(e,n[1]),c_(e,n[2]));default:for(var o=new Array(i),a=0;a<i;a++)o[a]=c_(e,n[a]);return new(t.bind.apply(t,Object(r.__spread)([void 0],o)))}}(e,t.value,t.deps);break;case 1024:n=function(e,t,n){var i=n.length;switch(i){case 0:return t();case 1:return t(c_(e,n[0]));case 2:return t(c_(e,n[0]),c_(e,n[1]));case 3:return t(c_(e,n[0]),c_(e,n[1]),c_(e,n[2]));default:for(var o=Array(i),a=0;a<i;a++)o[a]=c_(e,n[a]);return t.apply(void 0,Object(r.__spread)(o))}}(e,t.value,t.deps);break;case 2048:n=c_(e,t.deps[0]);break;case 256:n=t.value}return n===i_||null===n||"object"!=typeof n||131072&t.flags||"function"!=typeof n.ngOnDestroy||(t.flags|=131072),void 0===n?i_:n}function d_(e,t){var n=e.viewContainer._embeddedViews;if((null==t||t>=n.length)&&(t=n.length-1),t<0)return null;var r=n[t];return r.viewContainerParent=null,m_(n,t),yp.dirtyParentQueries(r),p_(r),r}function f_(e,t,n){var r=t?Np(t,t.def.lastRenderRootNode):e.renderElement,i=n.renderer.parentNode(r),o=n.renderer.nextSibling(r);Hp(n,2,i,o,void 0)}function p_(e){Hp(e,3,null,null,void 0)}function __(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function m_(e,t){t>=e.length-1?e.pop():e.splice(t,1)}var g_=new Object;function v_(e,t,n,r,i,o){return new b_(e,t,n,r,i,o)}function y_(e){return e.viewDefFactory}var b_=function(e){function t(t,n,r,i,o,a){var s=e.call(this)||this;return s.selector=t,s.componentType=n,s._inputs=i,s._outputs=o,s.ngContentSelectors=a,s.viewDefFactory=r,s}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){var e=[],t=this._inputs;for(var n in t)e.push({propName:n,templateName:t[n]});return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){var e=[];for(var t in this._outputs)e.push({propName:t,templateName:this._outputs[t]});return e},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t,n,r){if(!r)throw new Error("ngModule should be provided");var i=Yp(this.viewDefFactory),o=i.nodes[0].element.componentProvider.nodeIndex,a=yp.createRootView(e,t||[],n,i,r,g_),s=_p(a,o).instance;return n&&a.renderer.setAttribute(pp(a,0).renderElement,"ng-version",Bf.full),new T_(a,new A_(a),s)},t}(af),T_=function(e){function t(t,n,r){var i=e.call(this)||this;return i._view=t,i._viewRef=n,i._component=r,i._elDef=i._view.def.nodes[0],i.hostView=n,i.changeDetectorRef=n,i.instance=r,i}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"location",{get:function(){return new Mf(pp(this._view,this._elDef.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"injector",{get:function(){return new R_(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"componentType",{get:function(){return this._component.constructor},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this._viewRef.destroy()},t.prototype.onDestroy=function(e){this._viewRef.onDestroy(e)},t}(of);function E_(e,t,n){return new x_(e,t,n)}var x_=function(){function e(e,t,n){this._view=e,this._elDef=t,this._data=n,this._embeddedViews=[]}return Object.defineProperty(e.prototype,"element",{get:function(){return new Mf(this._data.renderElement)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return new R_(this._view,this._elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentInjector",{get:function(){for(var e=this._view,t=this._elDef.parent;!t&&e;)t=Fp(e),e=e.parent;return e?new R_(e,t):new R_(this._view,null)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){for(var e=this._embeddedViews.length-1;e>=0;e--){var t=d_(this._data,e);yp.destroyView(t)}},e.prototype.get=function(e){var t=this._embeddedViews[e];if(t){var n=new A_(t);return n.attachToViewContainerRef(this),n}return null},Object.defineProperty(e.prototype,"length",{get:function(){return this._embeddedViews.length},enumerable:!0,configurable:!0}),e.prototype.createEmbeddedView=function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r},e.prototype.createComponent=function(e,t,n,r,i){var o=n||this.parentInjector;i||e instanceof _f||(i=o.get(mf));var a=e.create(o,r,void 0,i);return this.insert(a.hostView,t),a},e.prototype.insert=function(e,t){if(e.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");var n,r,i,o,a=e;return o=(n=this._data).viewContainer._embeddedViews,null==(r=t)&&(r=o.length),(i=a._view).viewContainerParent=this._view,__(o,r,i),function(e,t){var n=Ip(t);if(n&&n!==e&&!(16&t.state)){t.state|=16;var r=n.template._projectedViews;r||(r=n.template._projectedViews=[]),r.push(t),function(e,n){if(!(4&n.flags)){t.parent.def.nodeFlags|=4,n.flags|=4;for(var r=n.parent;r;)r.childFlags|=4,r=r.parent}}(0,t.parentNodeDef)}}(n,i),yp.dirtyParentQueries(i),f_(n,r>0?o[r-1]:null,i),a.attachToViewContainerRef(this),e},e.prototype.move=function(e,t){if(e.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");var n,r,i,o,a,s=this._embeddedViews.indexOf(e._view);return i=t,a=(o=(n=this._data).viewContainer._embeddedViews)[r=s],m_(o,r),null==i&&(i=o.length),__(o,i,a),yp.dirtyParentQueries(a),p_(a),f_(n,i>0?o[i-1]:null,a),e},e.prototype.indexOf=function(e){return this._embeddedViews.indexOf(e._view)},e.prototype.remove=function(e){var t=d_(this._data,e);t&&yp.destroyView(t)},e.prototype.detach=function(e){var t=d_(this._data,e);return t?new A_(t):null},e}();function M_(e){return new A_(e)}var A_=function(){function e(e){this._view=e,this._viewContainerRef=null,this._appRef=null}return Object.defineProperty(e.prototype,"rootNodes",{get:function(){return Hp(this._view,0,void 0,void 0,e=[]),e;var e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._view.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return 0!=(128&this._view.state)},enumerable:!0,configurable:!0}),e.prototype.markForCheck=function(){Op(this._view)},e.prototype.detach=function(){this._view.state&=-5},e.prototype.detectChanges=function(){var e=this._view.root.rendererFactory;e.begin&&e.begin();try{yp.checkAndUpdateView(this._view)}finally{e.end&&e.end()}},e.prototype.checkNoChanges=function(){yp.checkNoChangesView(this._view)},e.prototype.reattach=function(){this._view.state|=4},e.prototype.onDestroy=function(e){this._view.disposables||(this._view.disposables=[]),this._view.disposables.push(e)},e.prototype.destroy=function(){this._appRef?this._appRef.detachView(this):this._viewContainerRef&&this._viewContainerRef.detach(this._viewContainerRef.indexOf(this)),yp.destroyView(this._view)},e.prototype.detachFromAppRef=function(){this._appRef=null,p_(this._view),yp.dirtyParentQueries(this._view)},e.prototype.attachToAppRef=function(e){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e},e.prototype.attachToViewContainerRef=function(e){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=e},e}();function S_(e,t){return new C_(e,t)}var C_=function(e){function t(t,n){var r=e.call(this)||this;return r._parentView=t,r._def=n,r}return Object(r.__extends)(t,e),t.prototype.createEmbeddedView=function(e){return new A_(yp.createEmbeddedView(this._parentView,this._def,this._def.element.template,e))},Object.defineProperty(t.prototype,"elementRef",{get:function(){return new Mf(pp(this._parentView,this._def.nodeIndex).renderElement)},enumerable:!0,configurable:!0}),t}(np);function P_(e,t){return new R_(e,t)}var R_=function(){function e(e,t){this.view=e,this.elDef=t}return e.prototype.get=function(e,t){return void 0===t&&(t=ht.THROW_IF_NOT_FOUND),yp.resolveDep(this.view,this.elDef,!!this.elDef&&0!=(33554432&this.elDef.flags),{flags:0,token:e,tokenKey:Ep(e)},t)},e}();function D_(e,t){var n=e.def.nodes[t];if(1&n.flags){var r=pp(e,n.nodeIndex);return n.element.template?r.template:r.renderElement}if(2&n.flags)return fp(e,n.nodeIndex).renderText;if(20240&n.flags)return _p(e,n.nodeIndex).instance;throw new Error("Illegal state: read nodeValue for node index "+t)}function O_(e){return new w_(e.renderer)}var w_=function(){function e(e){this.delegate=e}return e.prototype.selectRootElement=function(e){return this.delegate.selectRootElement(e)},e.prototype.createElement=function(e,t){var n=Object(r.__read)(Zp(t),2),i=this.delegate.createElement(n[1],n[0]);return e&&this.delegate.appendChild(e,i),i},e.prototype.createViewRoot=function(e){return e},e.prototype.createTemplateAnchor=function(e){var t=this.delegate.createComment("");return e&&this.delegate.appendChild(e,t),t},e.prototype.createText=function(e,t){var n=this.delegate.createText(t);return e&&this.delegate.appendChild(e,n),n},e.prototype.projectNodes=function(e,t){for(var n=0;n<t.length;n++)this.delegate.appendChild(e,t[n])},e.prototype.attachViewAfter=function(e,t){for(var n=this.delegate.parentNode(e),r=this.delegate.nextSibling(e),i=0;i<t.length;i++)this.delegate.insertBefore(n,t[i],r)},e.prototype.detachView=function(e){for(var t=0;t<e.length;t++){var n=e[t],r=this.delegate.parentNode(n);this.delegate.removeChild(r,n)}},e.prototype.destroyView=function(e,t){for(var n=0;n<t.length;n++)this.delegate.destroyNode(t[n])},e.prototype.listen=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.listenGlobal=function(e,t,n){return this.delegate.listen(e,t,n)},e.prototype.setElementProperty=function(e,t,n){this.delegate.setProperty(e,t,n)},e.prototype.setElementAttribute=function(e,t,n){var i=Object(r.__read)(Zp(t),2),o=i[0],a=i[1];null!=n?this.delegate.setAttribute(e,a,n,o):this.delegate.removeAttribute(e,a,o)},e.prototype.setBindingDebugInfo=function(e,t,n){},e.prototype.setElementClass=function(e,t,n){n?this.delegate.addClass(e,t):this.delegate.removeClass(e,t)},e.prototype.setElementStyle=function(e,t,n){null!=n?this.delegate.setStyle(e,t,n):this.delegate.removeStyle(e,t)},e.prototype.invokeElementMethod=function(e,t,n){e[t].apply(e,n)},e.prototype.setText=function(e,t){this.delegate.setValue(e,t)},e.prototype.animate=function(){throw new Error("Renderer.animate is no longer supported!")},e}();function L_(e,t,n,r){return new I_(e,t,n,r)}var I_=function(){function e(e,t,n,r){this._moduleType=e,this._parent=t,this._bootstrapComponents=n,this._def=r,this._destroyListeners=[],this._destroyed=!1,this.injector=this,function(e){for(var t=e._def,n=e._providers=new Array(t.providers.length),r=0;r<t.providers.length;r++){var i=t.providers[r];4096&i.flags||void 0===n[r]&&(n[r]=h_(e,i))}}(this)}return e.prototype.get=function(e,t,n){void 0===t&&(t=ht.THROW_IF_NOT_FOUND),void 0===n&&(n=I.Default);var r=0;return n&I.SkipSelf?r|=1:n&I.Self&&(r|=4),c_(this,{token:e,tokenKey:Ep(e),flags:r},t)},Object.defineProperty(e.prototype,"instance",{get:function(){return this.get(this._moduleType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentFactoryResolver",{get:function(){return this.get(ff)},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The ng module "+Y(this.instance.constructor)+" has already been destroyed.");this._destroyed=!0,function(e,t){for(var n=e._def,r=new Set,i=0;i<n.providers.length;i++)if(131072&n.providers[i].flags){var o=e._providers[i];if(o&&o!==i_){var a=o.ngOnDestroy;"function"!=typeof a||r.has(o)||(a.apply(o),r.add(o))}}}(this),this._destroyListeners.forEach(function(e){return e()})},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},e}(),F_=Ep(Rf),N_=Ep(Lf),B_=Ep(Mf),k_=Ep(op),U_=Ep(np),V_=Ep(qf),G_=Ep(ht),j_=Ep(ne);function z_(e,t,n,i,o,a,s,u){var l=[];if(s)for(var c in s){var h=Object(r.__read)(s[c],2);l[h[0]]={flags:8,name:c,nonMinifiedName:h[1],ns:null,securityContext:null,suffix:null}}var d=[];if(u)for(var f in u)d.push({type:1,propName:f,target:null,eventName:u[f]});return W_(e,t|=16384,n,i,o,o,a,l,d)}function Y_(e,t,n){return W_(-1,e|=16,null,0,t,t,n)}function H_(e,t,n,r,i){return W_(-1,e,t,0,n,r,i)}function W_(e,t,n,r,i,o,a,s,u){var l=Vp(n),c=l.matchedQueries,h=l.references,d=l.matchedQueryIds;u||(u=[]),s||(s=[]),o=X(o);var f=Gp(a,Y(i));return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:c,matchedQueryIds:d,references:h,ngContentIndex:-1,childCount:r,bindings:s,bindingFlags:Jp(s),outputs:u,element:null,provider:{token:i,value:o,deps:f},text:null,query:null,ngContent:null}}function X_(e,t){return Z_(e,t)}function K_(e,t){for(var n=e;n.parent&&!Bp(n);)n=n.parent;return J_(n.parent,Fp(n),!0,t.provider.value,t.provider.deps)}function Q_(e,t){var n=J_(e,t.parent,(32768&t.flags)>0,t.provider.value,t.provider.deps);if(t.outputs.length)for(var r=0;r<t.outputs.length;r++){var i=t.outputs[r],o=n[i.propName];if(!Nh(o))throw new Error("@Output "+i.propName+" not initialized in '"+n.constructor.name+"'.");var a=o.subscribe(q_(e,t.parent.nodeIndex,i.eventName));e.disposables[t.outputIndex+r]=a.unsubscribe.bind(a)}return n}function q_(e,t,n){return function(r){return Lp(e,t,n,r)}}function Z_(e,t){var n=(8192&t.flags)>0,i=t.provider;switch(201347067&t.flags){case 512:return J_(e,t.parent,n,i.value,i.deps);case 1024:return function(e,t,n,i,o){var a=o.length;switch(a){case 0:return i();case 1:return i(em(e,t,n,o[0]));case 2:return i(em(e,t,n,o[0]),em(e,t,n,o[1]));case 3:return i(em(e,t,n,o[0]),em(e,t,n,o[1]),em(e,t,n,o[2]));default:for(var s=Array(a),u=0;u<a;u++)s[u]=em(e,t,n,o[u]);return i.apply(void 0,Object(r.__spread)(s))}}(e,t.parent,n,i.value,i.deps);case 2048:return em(e,t.parent,n,i.deps[0]);case 256:return i.value}}function J_(e,t,n,i,o){var a=o.length;switch(a){case 0:return new i;case 1:return new i(em(e,t,n,o[0]));case 2:return new i(em(e,t,n,o[0]),em(e,t,n,o[1]));case 3:return new i(em(e,t,n,o[0]),em(e,t,n,o[1]),em(e,t,n,o[2]));default:for(var s=new Array(a),u=0;u<a;u++)s[u]=em(e,t,n,o[u]);return new(i.bind.apply(i,Object(r.__spread)([void 0],s)))}}var $_={};function em(e,t,n,r,i){if(void 0===i&&(i=ht.THROW_IF_NOT_FOUND),8&r.flags)return r.token;var o=e;2&r.flags&&(i=null);var a=r.tokenKey;a===V_&&(n=!(!t||!t.element.componentView)),t&&1&r.flags&&(n=!1,t=t.parent);for(var s=e;s;){if(t)switch(a){case F_:return O_(tm(s,t,n));case N_:return tm(s,t,n).renderer;case B_:return new Mf(pp(s,t.nodeIndex).renderElement);case k_:return pp(s,t.nodeIndex).viewContainer;case U_:if(t.element.template)return pp(s,t.nodeIndex).template;break;case V_:return M_(tm(s,t,n));case G_:case j_:return P_(s,t);default:var u=(n?t.element.allProviders:t.element.publicProviders)[a];if(u){var l=_p(s,u.nodeIndex);return l||(l={instance:Z_(s,u)},s.nodes[u.nodeIndex]=l),l.instance}}n=Bp(s),t=Fp(s),s=s.parent,4&r.flags&&(s=null)}var c=o.root.injector.get(r.token,$_);return c!==$_||i===$_?c:o.root.ngModule.injector.get(r.token,i)}function tm(e,t,n){var r;if(n)r=pp(e,t.nodeIndex).componentView;else for(r=e;r.parent&&!Bp(r);)r=r.parent;return r}function nm(e,t,n,r,i,o){if(32768&n.flags){var a=pp(e,n.parent.nodeIndex).componentView;2&a.def.flags&&(a.state|=8)}if(t.instance[n.bindings[r].name]=i,524288&n.flags){o=o||{};var s=Jl.unwrap(e.oldValues[n.bindingIndex+r]);o[n.bindings[r].nonMinifiedName]=new Vd(s,i,0!=(2&e.state))}return e.oldValues[n.bindingIndex+r]=i,o}function rm(e,t){if(e.def.nodeFlags&t)for(var n=e.def.nodes,r=0,i=0;i<n.length;i++){var o=n[i],a=o.parent;for(!a&&o.flags&t&&om(e,i,o.flags&t,r++),0==(o.childFlags&t)&&(i+=o.childCount);a&&1&a.flags&&i===a.nodeIndex+a.childCount;)a.directChildFlags&t&&(r=im(e,a,t,r)),a=a.parent}}function im(e,t,n,r){for(var i=t.nodeIndex+1;i<=t.nodeIndex+t.childCount;i++){var o=e.def.nodes[i];o.flags&n&&om(e,i,o.flags&n,r++),i+=o.childCount}return r}function om(e,t,n,r){var i=_p(e,t);if(i){var o=i.instance;o&&(yp.setCurrentNode(e,t),1048576&n&&dp(e,512,r)&&o.ngAfterContentInit(),2097152&n&&o.ngAfterContentChecked(),4194304&n&&dp(e,768,r)&&o.ngAfterViewInit(),8388608&n&&o.ngAfterViewChecked(),131072&n&&o.ngOnDestroy())}}var am=function(e){function t(t){var n=e.call(this)||this;return n.ngModule=t,n}return Object(r.__extends)(t,e),t.prototype.resolveComponentFactory=function(e){var t=Sn(e);return new cm(t,this.ngModule)},t}(ff);function sm(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var um=new te("ROOT_CONTEXT_TOKEN",{providedIn:"root",factory:function(){return Bd(pe(lm))}}),lm=new te("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Ln}}),cm=function(e){function t(t,n){var r=e.call(this)||this;return r.componentDef=t,r.ngModule=n,r.componentType=t.type,r.selector=t.selectors[0][0],r.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],r.isBoundToModule=!!n,r}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"inputs",{get:function(){return sm(this.componentDef.inputs)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return sm(this.componentDef.outputs)},enumerable:!0,configurable:!0}),t.prototype.create=function(e,t,n,r){var i=void 0===n,o=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var o=e.get(n,$_,i);return o!==$_||r===$_?o:t.get(n,r,i)}}}(e,r.injector):e,a=o.get(Of,Oo),s=o.get(co,null),u=i?$u(this.selector,a.createRenderer(null,this.componentDef)):dl(a,n),l=this.componentDef.onPush?576:528,c="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),h=i||c?Bd():o.get(um),d=a.createRenderer(u,this.componentDef);n&&u&&(Do(d)?d.setAttribute(u,"ng-version",Bf.full):u.setAttribute("ng-version",Bf.full));var f,p,_=el(null,hl(-1,null,1,0,null,null,null,null),h,l,null,null,a,d,s,o),m=vi(_,null),g=!1;try{var v=Fd(u,this.componentDef,_,a,d);p=gr(0,_),t&&(p.projection=t.map(function(e){return Array.from(e)})),f=Nd(v,this.componentDef,_,h,[kd]),Rl(_,v),Zu(_),g=!0}finally{bi(m,g)}var y=new hm(this.componentType,f,bf(Mf,p,_),_,p);return i&&(y.hostView._tViewNode.child=p),y},t}(af),hm=function(e){function t(t,n,r,i,o){var a=e.call(this)||this;return a.location=r,a._rootLView=i,a._tNode=o,a.destroyCbs=[],a.instance=n,a.hostView=a.changeDetectorRef=new yf(i),a.hostView._tViewNode=nl(i[Gn],null,-1,i),a.componentType=t,a}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"injector",{get:function(){return new Aa(this._tNode,this._rootLView)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.destroyCbs&&(this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())},t.prototype.onDestroy=function(e){this.destroyCbs&&this.destroyCbs.push(e)},t}(of),dm={},fm=function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencySymbol=15]="CurrencySymbol",e[e.CurrencyName=16]="CurrencyName",e[e.Currencies=17]="Currencies",e[e.PluralCase=18]="PluralCase",e[e.ExtraData=19]="ExtraData",e}({}),pm=void 0,_m=["en",[["a","p"],["AM","PM"],pm],[["AM","PM"],pm,pm],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],pm,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],pm,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",pm,"{1} 'at' {0}",pm],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"$","US Dollar",{},function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];function mm(e){return gm(e)[fm.PluralCase]}function gm(e){var t=e.toLowerCase().replace(/_/g,"-"),n=dm[t];if(n)return n;var r=t.split("-")[0];if(n=dm[r])return n;if("en"===r)return _m;throw new Error('Missing locale data for the locale "'+e+'".')}function vm(e,t){for(var n=0;n<e.length;n++)t.push(e[n])}function ym(e,t){void 0===t&&(t=e);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),ym(r,t)):t!==e&&t.push(r)}return t}var bm="\ufffd",Tm=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Em=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,xm=/\ufffd(\/?[#*!]\d+):?\d*\ufffd/gi,Mm=/\ufffd(\d+):?\d*\ufffd/gi,Am=/({\s*\ufffd\d+:?\d*\ufffd\s*,\s*\S{6}\s*,[\s\S]*})/gi,Sm=0,Cm=/\[(\ufffd.+?\ufffd?)\]/,Pm=/\[(\ufffd.+?\ufffd?)\]|(\ufffd\/?\*\d+:\d+\ufffd)/g,Rm=/({\s*)(VAR_(PLURAL|SELECT)(_\d+)?)(\s*,)/g,Dm=/\ufffdI18N_EXP_(ICU(_\d+)?)\ufffd/g,Om=/\/\*/,wm=/\d+\:(\d+)/;function Lm(e){if(!e)return[];var t,n=0,r=[],i=[],o=/[{}]/g;for(o.lastIndex=0;t=o.exec(e);){var a=t.index;if("}"==t[0]){if(r.pop(),0==r.length){var s=e.substring(n,a);Tm.test(s)?i.push(Im(s)):i.push(s),n=a+1}}else{if(0==r.length){var u=e.substring(n,a);i.push(u),n=a+1}r.push("{")}}var l=e.substring(n);return i.push(l),i}function Im(e){for(var t=[],n=[],r=1,i=0,o=Lm(e=e.replace(Tm,function(e,t,n){return r="select"===n?0:1,i=parseInt(t.substr(1),10),""})),a=0;a<o.length;){var s=o[a++].trim();1===r&&(s=s.replace(/\s*(?:=)?(\w+)\s*/,"$1")),s.length&&t.push(s);var u=Lm(o[a++]);t.length>n.length&&n.push(u)}return l=t.indexOf("other"),c='Missing key "other" in ICU statement.',l<=-1&&function(e){throw new Error("ASSERTION ERROR: "+e)}(c),{type:r,mainBinding:i,cases:t,values:n};var l,c}function Fm(e){for(var t,n,r="",i=0,o=!1;null!==(t=Em.exec(e));)o?t[0]===bm+"/*"+n+bm&&(i=t.index,o=!1):(r+=e.substring(i,t.index+t[0].length),n=t[1],o=!0);return r+e.substr(i)}function Nm(e,t,n,r){void 0===r&&(r=null);for(var i=[null,null],o=e.split(Mm),a=0,s=0;s<o.length;s++){var u=o[s];if(1&s){var l=parseInt(u,10);i.push(-1-l),a|=Vm(l)}else""!==u&&i.push(u)}return i.push(t<<2|(n?1:0)),n&&i.push(n,r),i[0]=a,i[1]=i.length-2,i}function Bm(e,t){var n;void 0===t&&(t=0),t|=Vm(e.mainBinding);for(var r=0;r<e.values.length;r++)for(var i=e.values[r],o=0;o<i.length;o++){var a=i[o];if("string"==typeof a)for(;n=Mm.exec(a);)t|=Vm(parseInt(n[1],10));else t=Bm(a,t)}return t}var km=[],Um=-1;function Vm(e){return 1<<Math.min(e,31)}var Gm,jm=[];function zm(e,t,n){var r=Gr()[Gn];km[++Um]=e,Wh(!0),r.firstTemplatePass&&null===r.data[e+or]&&function(e,t,n,r){var i=Gr(),o=e.blueprint.length-or;Gm=0;var a=ni(),s=oi()?ni():a&&a.parent,u=s&&s!==i[Wn]?s.index-or:t,l=0;jm[l]=u;var c=[];t>0&&a!==s&&c.push(a.index<<3|0);for(var h=[],d=[],f=function(e,t){if("number"!=typeof t)return Fm(e);var n=e.indexOf(":"+t+bm)+2+t.toString().length,r=e.search(new RegExp(bm+"\\/\\*\\d+:"+t+bm));return Fm(e.substring(n,r))}(n,r).split(xm),p=0;p<f.length;p++){var _=f[p];if(1&p)if("/"===_.charAt(0)){if("#"===_.charAt(1)){var m=parseInt(_.substr(2),10);u=jm[--l],c.push(m<<3|5)}}else m=parseInt(_.substr(1),10),c.push(m<<3|0,u<<17|1),"#"===_.charAt(0)&&(jm[++l]=u=m);else for(var g=Lm(_),v=0;v<g.length;v++)if(1&v){var y=o+Gm++;c.push(Zs,"",y,u<<17|1);var b=g[v],T=Bm(b);rg(d,b,y,y);var E=d.length-1;h.push(Vm(b.mainBinding),3,-1-b.mainBinding,y<<2|2,E,T,2,y<<2|3,E)}else if(""!==g[v]){var x=g[v],M=x.match(Mm),A=o+Gm++;c.push(M?"":x,A,u<<17|1),M&&vm(Nm(x,A),h)}}(function(e,t){var n=e[Gn];if(n.firstTemplatePass){for(var r=0;r<t;r++)n.blueprint.push(null),n.data.push(null),e.push(null);n.expandoInstructions?n.expandoInstructions.push(t):n.expandoStartIndex+=t}})(i,Gm),e.data[t+or]={vars:Gm,create:c,update:h,icus:d.length?d:null}}(r,e,t,n)}function Ym(e,t,n,r){var i=e.next;n||(n=t),n===t&&e!==t.child?(e.next=t.child,t.child=e):n!==t&&e!==n.next?(e.next=n.next,n.next=e):e.next=null,t!==r[Wn]&&(e.parent=t);for(var o=e.next;o;)o.next===e&&(o.next=i),o=o.next;if(1===e.type)return Kc(r,e,e.projection,aa(r)),e;Hc(mr(e,r),e,r);var a=r[e.index];return 0!==e.type&&fr(a)&&Hc(a[ur],e,r),e}function Hm(e,t){void 0===t&&(t={});var n=e;if(Cm.test(e)){var i={},o=[Sm];n=n.replace(Pm,function(e,t,n){var a=t||n,s=i[a]||[];if(s.length||(a.split("|").forEach(function(e){var t=e.match(wm),n=t?parseInt(t[1],10):Sm,r=Om.test(e);s.push([n,r,e])}),i[a]=s),!s.length)throw new Error("i18n postprocess: unmatched placeholder - "+a);for(var u=o[o.length-1],l=0,c=0;c<s.length;c++)if(s[c][0]===u){l=c;break}var h=Object(r.__read)(s[l],3),d=h[0],f=h[2];return h[1]?o.pop():u!==d&&o.push(d),s.splice(l,1),f})}return Object.keys(t).length?n=(n=n.replace(Rm,function(e,n,r,i,o,a){return t.hasOwnProperty(r)?""+n+t[r]+a:e})).replace(Dm,function(e,n){if(t.hasOwnProperty(n)){var r=t[n];if(!r.length)throw new Error("i18n postprocess: unmatched ICU - "+e+" with key: "+n);return r.shift()}return e}):n}function Wm(){!function(e){for(var t=Gr(),n=km[Um--],r=e.data[n+or],i=ni(),o=Km(n,r.create,0,t),a=n+1;a<=i.index-or;a++)-1===o.indexOf(a)&&Qm(a,t)}(Gr()[Gn]),Wh(!1)}function Xm(e,t,n,r,i){var o=ni();e[t+or]=r;var a=tl(e[Gn],e[Wn],t,n,i,null);return o.next===a&&(o.next=null),a}function Km(e,t,n,r){for(var i=Gr()[Jn],o=null,a=null,s=[],u=0;u<t.length;u++){var l=t[u];if("string"==typeof l){var c=Ic(l,i),h=t[++u];a=o,o=Xm(r,h,3,c,null),s.push(h),ai()}else if("number"==typeof l)switch(7&l){case 1:var d=l>>>17;a=Ym(o,d===e?r[Wn]:gr(d,r),a,r);break;case 0:var f=l>>>3;s.push(f),a=o,(o=gr(f,r))&&ri(o,3===o.type);break;case 5:a=o=gr(l>>>3,r),ri(o,!1);break;case 4:Sl(g=l>>>3,t[++u],t[++u],r);break;default:throw new Error('Unable to determine the type of mutate operation for "'+l+'"')}else switch(l){case Zs:var p=t[++u],_=t[++u],m=i.createComment(p);a=o,o=Xm(r,_,5,m,null),s.push(_),Fo(m,r),o.activeCaseIndex=null,ai();break;case qs:var g,v=t[++u];a=o,o=Xm(r,g=t[++u],3,i.createElement(v),v),s.push(g);break;default:throw new Error('Unable to determine the type of mutate operation for "'+l+'"')}}return ai(),s}function Qm(e,t){var n=gr(e,t),r=_r(e,t);r&&Xc(t[Jn],r);var i=sh(e);fr(i)&&0!==n.type&&Xc(t[Jn],i[ur]),n.flags|=32}function qm(e,t,n){zm(e,t,n),Wm()}function Zm(e,t){!function(e,t,n){for(var r=ni().index-or,i=[],o=0;o<n.length;o+=2)for(var a=n[o],s=n[o+1].split(Am),u=0;u<s.length;u++){var l=s[u];if(1&u)throw new Error("ICU expressions are not yet supported in attributes");if(""!==l)if(l.match(Mm))e.firstTemplatePass&&null===e.data[t+or]&&vm(Nm(l,r,a),i);else{var c=Gr();Sl(r,a,l,c);var h=gr(r,c),d=h.inputs&&h.inputs[a];d&&Yl(c,d,l)}}e.firstTemplatePass&&null===e.data[t+or]&&(e.data[t+or]=i)}(Gr()[Gn],e,t)}var Jm=0,$m=0;function eg(e){return uc(Gr(),e)!==Na&&(Jm|=1<<$m),$m++,eg}function tg(e){if($m){var t=Gr(),n=t[Gn].data[e+or],r=void 0,i=null;Array.isArray(n)?r=n:(r=n.update,i=n.icus),function e(t,n,r,i,o,a){void 0===a&&(a=!1);for(var s=!1,u=0;u<t.length;u++){var l=t[u],c=t[++u];if(a||l&i)for(var h="",d=u+1;d<=u+c;d++){var f=t[d];if("string"==typeof f)h+=f;else if("number"==typeof f)if(f<0)h+=On(o[r-f]);else{var p=f>>>2,_=void 0,m=void 0;switch(3&f){case 1:ml(p,t[++d],h,t[++d]);break;case 0:Hl(o,p,h);break;case 2:if(_=n[t[++d]],null!==(m=gr(p,o)).activeCaseIndex)for(var g=_.remove[m.activeCaseIndex],v=0;v<g.length;v++){var y=g[v];switch(7&y){case 3:Qm(y>>>3,o);break;case 6:var b=gr(g[v+1]>>>3,o).activeCaseIndex;null!==b&&vm(n[y>>>3].remove[b],g)}}var T=ng(_,h);m.activeCaseIndex=-1!==T?T:null,Km(-1,_.create[T],0,o),s=!0;break;case 3:_=n[t[++d]],m=gr(p,o),e(_.update[m.activeCaseIndex],n,r,i,o,s)}}}u+=c}}(r,i,t[Xn]-$m-1,Jm,t),Jm=0,$m=0}}function ng(e,t){var n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:var r=function(e,t){switch(mm(hg)(e)){case 0:return"zero";case 1:return"one";case 2:return"two";case 3:return"few";case 4:return"many";default:return"other"}}(t);-1===(n=e.cases.indexOf(r))&&"other"!==r&&(n=e.cases.indexOf("other"));break;case 0:n=e.cases.indexOf("other")}return n}function rg(e,t,n,i){for(var o=[],a=[],s=[],u=[],l=[],c=0;c<t.values.length;c++){for(var h=t.values[c],d=[],f=0;f<h.length;f++){var p=h[f];if("string"!=typeof p){var _=d.push(p)-1;h[f]="\x3c!--\ufffd"+_+"\ufffd--\x3e"}}var m=ig(h.join(""),n,d,e,i);o.push(m.create),a.push(m.remove),s.push(m.update),u.push(m.vars),l.push(m.childIcus)}e.push({type:t.type,vars:u,childIcus:l,cases:t.cases,create:o,remove:a,update:s}),Gm+=Math.max.apply(Math,Object(r.__spread)(u))}function ig(e,t,n,i,o){var a=new Vi(document).getInertBodyElement(e);if(!a)throw new Error("Unable to generate inert body element");var s={vars:0,childIcus:[],create:[],remove:[],update:[]};return function e(t,n,i,o,a,s){if(t){for(var u=[];t;){var l=t.nextSibling,c=s+ ++n.vars;switch(t.nodeType){case Node.ELEMENT_NODE:var h=t,d=h.tagName.toLowerCase();if(Ji.hasOwnProperty(d)){n.create.push(qs,d,c,i<<17|1);for(var f=h.attributes,p=0;p<f.length;p++){var _=f.item(p),m=_.name.toLowerCase();_.value.match(Mm)?to.hasOwnProperty(m)&&vm($i[m]?Nm(_.value,c,_.name,zi):eo[m]?Nm(_.value,c,_.name,Yi):Nm(_.value,c,_.name),n.update):n.create.push(c<<3|4,_.name,_.value)}e(t.firstChild,n,c,o,a,s),n.remove.push(c<<3|3)}else n.vars--;break;case Node.TEXT_NODE:var g=t.textContent||"",v=g.match(Mm);n.create.push(v?"":g,c,i<<17|1),n.remove.push(c<<3|3),v&&vm(Nm(g,c),n.update);break;case Node.COMMENT_NODE:var y=og.exec(t.textContent||"");if(y){var b=parseInt(y[1],10);n.create.push(Zs,"",c,i<<17|1),u.push([T=o[b],c])}else n.vars--;break;default:n.vars--}t=l}for(p=0;p<u.length;p++){var T,E=u[p][1];rg(a,T=u[p][0],E,s+n.vars);var x=a.length-1;n.vars+=Math.max.apply(Math,Object(r.__spread)(a[x].vars)),n.childIcus.push(x);var M=Bm(T);n.update.push(Vm(T.mainBinding),3,-1-T.mainBinding,E<<2|2,x,M,2,E<<2|3,x),n.remove.push(x<<3|6,E<<3|3)}}}((uo(a)||a).firstChild,s,t,n,i,o),s}var og=/\ufffd(\d+)\ufffd/,ag={};function sg(e){void 0===e&&(e={translations:{}}),ag=e.translations}var ug=/\{\$(.*?)\}/g;function lg(e,t){return void 0!==ag[e]&&(e=ag[e]),void 0!==t&&Object.keys(t).length?e.replace(ug,function(e,n){return t[n]||""}):e}var cg="en-US",hg=cg;function dg(e){hg=e.toLowerCase().replace(/_/g,"-")}var fg=new Map;function pg(e,t){var n=fg.get(e);_g(e,n&&n.moduleType,t.moduleType),fg.set(e,t)}function _g(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for "+e+" - "+Y(t)+" vs "+Y(t.name))}function mg(e){if(null!==e.ngModuleDef.id){var t=e.ngModuleDef.id;_g(t,fg.get(t),e),fg.set(t,e)}var n=e.ngModuleDef.imports;n instanceof Function&&(n=n()),n&&n.forEach(function(e){return mg(e)})}function gg(e){return fg.get(e)}var vg={provide:ff,useClass:am,deps:[mf]},yg=function(e){function t(t,n){var r=e.call(this)||this;r._parent=n,r._bootstrapComponents=[],r.injector=r,r.destroyCbs=[];var i=Dn(t),o=t[dn]||null;return o&&dg(o),r._bootstrapComponents=Un(i.bootstrap),r._r3Injector=tt(t,n,[{provide:mf,useValue:r},vg],Y(t)),r.instance=r.get(t),r}return Object(r.__extends)(t,e),t.prototype.get=function(e,t,n){return void 0===t&&(t=ht.THROW_IF_NOT_FOUND),void 0===n&&(n=I.Default),e===ht||e===mf||e===ne?this:this._r3Injector.get(e,t,n)},Object.defineProperty(t.prototype,"componentFactoryResolver",{get:function(){return this.get(ff)},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null},t.prototype.onDestroy=function(e){this.destroyCbs.push(e)},t}(mf),bg=function(e){function t(t){var n=e.call(this)||this;return n.moduleType=t,null!==Dn(t)&&mg(t),n}return Object(r.__extends)(t,e),t.prototype.create=function(e){return new yg(this.moduleType,e)},t}(gf);function Tg(e,t,n,i){return on(function(){var o,a=e,s=a.prototype?Object.getPrototypeOf(a.prototype):null,u=s&&s.constructor;null!==t&&(void 0===a.decorators||u&&u.decorators===a.decorators?a.decorators=t:(o=a.decorators).push.apply(o,Object(r.__spread)(t))),null!==n&&(a.ctorParameters=n),null!==i&&(a.propDecorators=void 0===a.propDecorators||u&&u.propDecorators===a.propDecorators?i:Object(r.__assign)({},a.propDecorators,i))})}function Eg(e,t,n){var r=fi()+e,i=Gr();return si()?tc(i,r,n?t.call(n):t()):nc(i,r)}function xg(e,t,n,r){var i=Gr(),o=fi()+e;return rc(i,o,n)?tc(i,o+1,r?t.call(r,n):t(n)):nc(i,o+1)}function Mg(e,t,n,r,i){var o=fi()+e,a=Gr();return ic(a,o,n,r)?tc(a,o+2,i?t.call(i,n,r):t(n,r)):nc(a,o+2)}function Ag(e,t,n,r,i,o){var a=fi()+e,s=Gr();return oc(s,a,n,r,i)?tc(s,a+3,o?t.call(o,n,r,i):t(n,r,i)):nc(s,a+3)}function Sg(e,t,n,r,i,o,a){var s=fi()+e,u=Gr();return ac(u,s,n,r,i,o)?tc(u,s+4,a?t.call(a,n,r,i,o):t(n,r,i,o)):nc(u,s+4)}function Cg(e,t,n,r,i,o,a,s){var u=fi()+e,l=Gr(),c=ac(l,u,n,r,i,o);return rc(l,u+4,a)||c?tc(l,u+5,s?t.call(s,n,r,i,o,a):t(n,r,i,o,a)):nc(l,u+5)}function Pg(e,t,n,r,i,o,a,s,u){var l=fi()+e,c=Gr(),h=ac(c,l,n,r,i,o);return ic(c,l+4,a,s)||h?tc(c,l+6,u?t.call(u,n,r,i,o,a,s):t(n,r,i,o,a,s)):nc(c,l+6)}function Rg(e,t,n,r,i,o,a,s,u,l){var c=fi()+e,h=Gr(),d=ac(h,c,n,r,i,o);return oc(h,c+4,a,s,u)||d?tc(h,c+7,l?t.call(l,n,r,i,o,a,s,u):t(n,r,i,o,a,s,u)):nc(h,c+7)}function Dg(e,t,n,r,i,o,a,s,u,l,c){var h=fi()+e,d=Gr(),f=ac(d,h,n,r,i,o);return ac(d,h+4,a,s,u,l)||f?tc(d,h+8,c?t.call(c,n,r,i,o,a,s,u,l):t(n,r,i,o,a,s,u,l)):nc(d,h+8)}function Og(e,t,n,r){for(var i=fi()+e,o=!1,a=Gr(),s=0;s<n.length;s++)rc(a,i++,n[s])&&(o=!0);return o?tc(a,i,t.apply(r,n)):nc(a,i)}function wg(e,t){var n,r=Gr()[Gn],i=e+or;r.firstTemplatePass?(n=function(e,t){if(t)for(var n=t.length-1;n>=0;n--){var r=t[n];if(e===r.name)return r}throw new Error("The pipe '"+e+"' could not be found!")}(t,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var o=n.factory();return oh(e,o),o}function Lg(e,t,n){var r=sh(e);return Ug(kg(e)?xg(t,r.transform,n,r):r.transform(n))}function Ig(e,t,n,r){var i=sh(e);return Ug(kg(e)?Mg(t,i.transform,n,r,i):i.transform(n,r))}function Fg(e,t,n,r,i){var o=sh(e);return Ug(kg(e)?Ag(t,o.transform,n,r,i,o):o.transform(n,r,i))}function Ng(e,t,n,r,i,o){var a=sh(e);return Ug(kg(e)?Sg(t,a.transform,n,r,i,o,a):a.transform(n,r,i,o))}function Bg(e,t,n){var r=sh(e);return Ug(kg(e)?Og(t,r.transform,n,r):r.transform.apply(r,n))}function kg(e){return Gr()[Gn].data[e+or].pure}function Ug(e){if(Jl.isWrapped(e)){e=Jl.unwrap(e);var t=Gr();t[t[Xn]]=Na}return e}var Vg=function(e){function t(t){void 0===t&&(t=!1);var n=e.call(this)||this;return n.__isAsync=t,n}return Object(r.__extends)(t,e),t.prototype.emit=function(t){e.prototype.next.call(this,t)},t.prototype.subscribe=function(t,n,r){var o,a=function(e){return null},s=function(){return null};t&&"object"==typeof t?(o=this.__isAsync?function(e){setTimeout(function(){return t.next(e)})}:function(e){t.next(e)},t.error&&(a=this.__isAsync?function(e){setTimeout(function(){return t.error(e)})}:function(e){t.error(e)}),t.complete&&(s=this.__isAsync?function(){setTimeout(function(){return t.complete()})}:function(){t.complete()})):(o=this.__isAsync?function(e){setTimeout(function(){return t(e)})}:function(e){t(e)},n&&(a=this.__isAsync?function(e){setTimeout(function(){return n(e)})}:function(e){n(e)}),r&&(s=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()}));var u=e.prototype.subscribe.call(this,o,a,s);return t instanceof i.a&&t.add(u),u},t}(o.a);function Gg(){return this._results[Ql()]()}var jg=function(){function e(){this.dirty=!0,this._results=[],this.changes=new Vg,this.length=0;var t=Ql(),n=e.prototype;n[t]||(n[t]=Gg)}return e.prototype.map=function(e){return this._results.map(e)},e.prototype.filter=function(e){return this._results.filter(e)},e.prototype.find=function(e){return this._results.find(e)},e.prototype.reduce=function(e,t){return this._results.reduce(e,t)},e.prototype.forEach=function(e){this._results.forEach(e)},e.prototype.some=function(e){return this._results.some(e)},e.prototype.toArray=function(){return this._results.slice()},e.prototype.toString=function(){return this._results.toString()},e.prototype.reset=function(e){this._results=ym(e),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]},e.prototype.notifyOnChanges=function(){this.changes.emit(this)},e.prototype.setDirty=function(){this.dirty=!0},e.prototype.destroy=function(){this.changes.complete(),this.changes.unsubscribe()},e}(),zg=function(){return function(e,t,n,r,i){this.next=e,this.list=t,this.predicate=n,this.values=r,this.containerValues=i}}(),Yg=function(){function e(e,t,n,r){void 0===r&&(r=-1),this.parent=e,this.shallow=t,this.deep=n,this.nodeIndex=r}return e.prototype.track=function(e,t,n,r){n?this.deep=tv(this.deep,e,t,null!=r?r:null):this.shallow=tv(this.shallow,e,t,null!=r?r:null)},e.prototype.clone=function(t){return null!==this.shallow||br(t)?new e(this,null,this.deep,t.index):this},e.prototype.container=function(){var t=Hg(this.shallow),n=Hg(this.deep);return t||n?new e(this,t,n):null},e.prototype.createView=function(){var t=Wg(this.shallow),n=Wg(this.deep);return t||n?new e(this,t,n):null},e.prototype.insertView=function(e){Xg(e,this.shallow),Xg(e,this.deep)},e.prototype.addNode=function(e){$g(this.deep,e,!1),$g(this.shallow,e,!1)},e.prototype.insertNodeBeforeViews=function(e){$g(this.deep,e,!0),$g(this.shallow,e,!0)},e.prototype.removeView=function(){Kg(this.shallow),Kg(this.deep)},e}();function Hg(e){for(var t=null;e;){var n=[];e.values.push(n),t=new zg(t,e.list,e.predicate,n,null),e=e.next}return t}function Wg(e){for(var t=null;e;)t=new zg(t,e.list,e.predicate,[],e.values),e=e.next;return t}function Xg(e,t){for(;t;)t.containerValues.splice(e,0,t.values),t.values.length&&t.list.setDirty(),t=t.next}function Kg(e){for(;e;){var t=e.containerValues,n=t.indexOf(e.values);t.splice(n,1)[0].length&&e.list.setDirty(),e=e.next}}function Qg(e,t){var n=e.localNames;if(n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function qg(e,t,n){var r=e[pn];if("function"==typeof r)return r();var i=n[Gn],o=Ta(t,i,e,!1,!1);return null!==o?Ea(i.data,n,o,t):null}function Zg(e,t,n,r){var i=e[pn]();return r?i?qg(r,t,n):null:i}function Jg(e,t,n,r){return n?qg(n,e,t):r>-1?Ea(t[Gn].data,t,r,e):function(e,t){return 3===e.type||4===e.type?bf(Mf,e,t):0===e.type?Tf(np,Mf,e,t):null}(e,t)}function $g(e,t,n){for(var r=Gr(),i=r[Gn];e;){var o=e.predicate,a=o.type;if(a){var s=null;a===np?s=Zg(a,t,r,o.read):null!==(c=Ta(t,i,a,!1,!1))&&(s=Jg(t,r,o.read,c)),null!==s&&ev(e,s,n)}else for(var u=o.selector,l=0;l<u.length;l++){var c;null!==(c=Qg(t,u[l]))&&null!==(s=Jg(t,r,o.read,c))&&ev(e,s,n)}e=e.next}}function ev(e,t,n){n?e.values.unshift(t):e.values.push(t),e.list.setDirty()}function tv(e,t,n,r){return new zg(e,t,function(e,t){var n=Array.isArray(e);return{type:n?null:e,selector:n?e:null,read:t}}(n,r),t._valuesTree,null)}function nv(e,t,n,r,i,o){var a=new jg,s=e[Hn]||(e[Hn]=new Yg(null,null,null,o));return a._valuesTree=[],a._static=i,s.track(a,t,n,r),function(e,t,n){var r=Vl(e);r.push(t),e[Gn].firstTemplatePass&&Gl(e).push(n,r.length-1)}(e,a,a.destroy),a}function rv(e){var t=e,n=si();return!(!e.dirty||n!==t._static||(e.reset(t._valuesTree||[]),e.notifyOnChanges(),0))}function iv(e,t,n){var r=Gr(),i=r[Gn];av(r,i,e,t,n,!0),i.staticViewQueries=!0}function ov(e,t,n){var r=Gr();return av(r,r[Gn],e,t,n,!1)}function av(e,t,n,r,i,o){t.firstTemplatePass&&t.expandoStartIndex++;var a=mi(),s=nv(e,n,r,i,o,-1);return oh(a-or,s),gi(a+1),s}function sv(){var e=mi();return gi(e+1),vr(Gr(),e-or)}function uv(e,t,n,r){var i=Gr();return lv(i,i[Gn],e,t,n,r,!1,ni().index)}function lv(e,t,n,r,i,o,a,s){var u=nv(e,r,i,o,a,s);if((e[nr]||(e[nr]=[])).push(u),t.firstTemplatePass){var l=t.contentQueries||(t.contentQueries=[]);n!==(t.contentQueries.length?t.contentQueries[t.contentQueries.length-1]:-1)&&l.push(n)}return u}function cv(e,t,n,r){var i=Gr(),o=i[Gn];lv(i,o,e,t,n,r,!0,ni().index),o.staticContentQueries=!0}function hv(){var e=Gr(),t=mi();return gi(t+1),e[nr][t]}function dv(e,t){return Tf(np,Mf,e,t)}var fv=function(){return{"\u0275\u0275attribute":cc,"\u0275\u0275attributeInterpolate1":bc,"\u0275\u0275attributeInterpolate2":Tc,"\u0275\u0275attributeInterpolate3":Ec,"\u0275\u0275attributeInterpolate4":xc,"\u0275\u0275attributeInterpolate5":Mc,"\u0275\u0275attributeInterpolate6":Ac,"\u0275\u0275attributeInterpolate7":Sc,"\u0275\u0275attributeInterpolate8":Cc,"\u0275\u0275attributeInterpolateV":Pc,"\u0275\u0275defineBase":xn,"\u0275\u0275defineComponent":mn,"\u0275\u0275defineDirective":Mn,"\u0275\u0275defineInjectable":B,"\u0275\u0275defineInjector":U,"\u0275\u0275defineNgModule":bn,"\u0275\u0275definePipe":An,"\u0275\u0275directiveInject":uh,"\u0275\u0275getFactoryOf":Sa,"\u0275\u0275getInheritedFactory":Ca,"\u0275\u0275inject":pe,"\u0275\u0275injectAttribute":lh,"\u0275\u0275templateRefExtractor":dv,"\u0275\u0275NgOnChangesFeature":Gd,"\u0275\u0275ProvidersFeature":rf,"\u0275\u0275InheritDefinitionFeature":Wd,"\u0275\u0275container":$c,"\u0275\u0275nextContext":jh,"\u0275\u0275containerRefreshStart":th,"\u0275\u0275containerRefreshEnd":nh,"\u0275\u0275namespaceHTML":Ci,"\u0275\u0275namespaceMathML":Si,"\u0275\u0275namespaceSVG":Ai,"\u0275\u0275enableBindings":Ur,"\u0275\u0275disableBindings":Vr,"\u0275\u0275allocHostVars":Xl,"\u0275\u0275elementStart":Sh,"\u0275\u0275elementEnd":Ch,"\u0275\u0275element":Ph,"\u0275\u0275elementContainerStart":Dh,"\u0275\u0275elementContainerEnd":Oh,"\u0275\u0275pureFunction0":Eg,"\u0275\u0275pureFunction1":xg,"\u0275\u0275pureFunction2":Mg,"\u0275\u0275pureFunction3":Ag,"\u0275\u0275pureFunction4":Sg,"\u0275\u0275pureFunction5":Cg,"\u0275\u0275pureFunction6":Pg,"\u0275\u0275pureFunction7":Rg,"\u0275\u0275pureFunction8":Dg,"\u0275\u0275pureFunctionV":Og,"\u0275\u0275getCurrentView":Ih,"\u0275\u0275restoreView":ti,"\u0275\u0275interpolation1":dc,"\u0275\u0275interpolation2":fc,"\u0275\u0275interpolation3":pc,"\u0275\u0275interpolation4":_c,"\u0275\u0275interpolation5":mc,"\u0275\u0275interpolation6":gc,"\u0275\u0275interpolation7":vc,"\u0275\u0275interpolation8":yc,"\u0275\u0275interpolationV":hc,"\u0275\u0275listener":Bh,"\u0275\u0275load":sh,"\u0275\u0275projection":Xh,"\u0275\u0275updateSyntheticHostBinding":lc,"\u0275\u0275componentHostSyntheticListener":kh,"\u0275\u0275pipeBind1":Lg,"\u0275\u0275pipeBind2":Ig,"\u0275\u0275pipeBind3":Fg,"\u0275\u0275pipeBind4":Ng,"\u0275\u0275pipeBindV":Bg,"\u0275\u0275projectionDef":Yh,"\u0275\u0275property":sc,"\u0275\u0275propertyInterpolate":Kh,"\u0275\u0275propertyInterpolate1":Qh,"\u0275\u0275propertyInterpolate2":qh,"\u0275\u0275propertyInterpolate3":Zh,"\u0275\u0275propertyInterpolate4":Jh,"\u0275\u0275propertyInterpolate5":$h,"\u0275\u0275propertyInterpolate6":ed,"\u0275\u0275propertyInterpolate7":td,"\u0275\u0275propertyInterpolate8":nd,"\u0275\u0275propertyInterpolateV":rd,"\u0275\u0275pipe":wg,"\u0275\u0275queryRefresh":rv,"\u0275\u0275viewQuery":ov,"\u0275\u0275staticViewQuery":iv,"\u0275\u0275staticContentQuery":cv,"\u0275\u0275loadViewQuery":sv,"\u0275\u0275contentQuery":uv,"\u0275\u0275loadContentQuery":hv,"\u0275\u0275reference":ah,"\u0275\u0275elementHostAttrs":Rh,"\u0275\u0275classMap":Eh,"\u0275\u0275styling":gh,"\u0275\u0275styleMap":Th,"\u0275\u0275styleProp":yh,"\u0275\u0275styleSanitizer":ch,"\u0275\u0275stylingApply":xh,"\u0275\u0275classProp":bh,"\u0275\u0275select":Ku,"\u0275\u0275template":eh,"\u0275\u0275text":id,"\u0275\u0275textBinding":od,"\u0275\u0275textInterpolate":ad,"\u0275\u0275textInterpolate1":sd,"\u0275\u0275textInterpolate2":ud,"\u0275\u0275textInterpolate3":ld,"\u0275\u0275textInterpolate4":cd,"\u0275\u0275textInterpolate5":hd,"\u0275\u0275textInterpolate6":dd,"\u0275\u0275textInterpolate7":fd,"\u0275\u0275textInterpolate8":pd,"\u0275\u0275textInterpolateV":_d,"\u0275\u0275embeddedViewStart":wh,"\u0275\u0275embeddedViewEnd":Lh,"\u0275\u0275i18n":qm,"\u0275\u0275i18nAttributes":Zm,"\u0275\u0275i18nExp":eg,"\u0275\u0275i18nStart":zm,"\u0275\u0275i18nEnd":Wm,"\u0275\u0275i18nApply":tg,"\u0275\u0275i18nPostprocess":Hm,"\u0275\u0275i18nLocalize":lg,"\u0275\u0275resolveWindow":In,"\u0275\u0275resolveDocument":Fn,"\u0275\u0275resolveBody":Nn,"\u0275\u0275setComponentScope":gn,"\u0275\u0275setNgModuleScope":Tn,"\u0275\u0275sanitizeHtml":_o,"\u0275\u0275sanitizeStyle":mo,"\u0275\u0275defaultStyleSanitizer":Eo,"\u0275\u0275sanitizeResourceUrl":vo,"\u0275\u0275sanitizeScript":yo,"\u0275\u0275sanitizeUrl":go,"\u0275\u0275sanitizeUrlOrResourceUrl":To}}(),pv=[],_v=[],mv=!1;function gv(){if(!mv){mv=!0;try{for(var e=_v.length-1;e>=0;e--){var t=_v[e],n=t.moduleType,r=t.ngModule;r.declarations&&r.declarations.every(vv)&&(_v.splice(e,1),Ev(n,r))}}finally{mv=!1}}}function vv(e){return Array.isArray(e)?e.every(vv):!!X(e)}function yv(e,t){void 0===t&&(t={}),bv(e,t),function(e,t){_v.push({moduleType:e,ngModule:t})}(e,t)}function bv(e,t,n){void 0===n&&(n=!1);var r=ym(t.declarations||pv),i=null;Object.defineProperty(e,hn,{configurable:!0,get:function(){return null===i&&(i=$().compileNgModule(fv,"ng:///"+e.name+"/ngModuleDef.js",{type:e,bootstrap:ym(t.bootstrap||pv).map(X),declarations:r.map(X),imports:ym(t.imports||pv).map(X).map(Av),exports:ym(t.exports||pv).map(X).map(Av),emitInline:!0,schemas:t.schemas?ym(t.schemas):null,id:t.id||null})),i}});var o=null;Object.defineProperty(e,z,{get:function(){if(null===o){var n={name:e.name,type:e,deps:Le(e),providers:t.providers||pv,imports:[(t.imports||pv).map(X),(t.exports||pv).map(X)]};o=$().compileInjector(fv,"ng:///"+e.name+"/ngInjectorDef.js",n)}return o},configurable:!1})}function Tv(){new Map,new Map,_v.length=0}function Ev(e,t){var n=ym(t.declarations||pv),r=Mv(e);n.forEach(function(t){t.hasOwnProperty(un)?xv(Sn(t),r):t.hasOwnProperty(ln)||t.hasOwnProperty(cn)||(t.ngSelectorScope=e)})}function xv(e,t){e.directiveDefs=function(){return Array.from(t.compilation.directives).map(function(e){return e.hasOwnProperty(un)?Sn(e):Cn(e)}).filter(function(e){return!!e})},e.pipeDefs=function(){return Array.from(t.compilation.pipes).map(function(e){return Pn(e)})},e.schemas=t.schemas,e.tView=null}function Mv(e,t){if(!Sv(e))throw new Error(e.name+" does not have an ngModuleDef");var n=Dn(e);if(null!==n.transitiveCompileScopes)return n.transitiveCompileScopes;var r={schemas:n.schemas||null,compilation:{directives:new Set,pipes:new Set},exported:{directives:new Set,pipes:new Set}};return Un(n.declarations).forEach(function(e){Pn(e)?r.compilation.pipes.add(e):r.compilation.directives.add(e)}),Un(n.imports).forEach(function(e){var n=e;if(!Sv(n))throw new Error("Importing "+n.name+" which does not have an ngModuleDef");t&&t(n);var i=Mv(n,t);i.exported.directives.forEach(function(e){return r.compilation.directives.add(e)}),i.exported.pipes.forEach(function(e){return r.compilation.pipes.add(e)})}),Un(n.exports).forEach(function(e){var n=e;if(Sv(n)){var i=Mv(n,t);i.exported.directives.forEach(function(e){r.compilation.directives.add(e),r.exported.directives.add(e)}),i.exported.pipes.forEach(function(e){r.compilation.pipes.add(e),r.exported.pipes.add(e)})}else Pn(n)?r.exported.pipes.add(n):r.exported.directives.add(n)}),n.transitiveCompileScopes=r,r}function Av(e){return function(e){return void 0!==e.ngModule}(e)?e.ngModule:e}function Sv(e){return!!Dn(e)}function Cv(e,t){var n=null;!function(e,t){en(t)&&(Jt.set(e,t),$t.add(e))}(e,t),Object.defineProperty(e,un,{get:function(){var i=$();if(null===n){if(en(t)){var o=["Component '"+e.name+"' is not resolved:"];throw t.templateUrl&&o.push(" - templateUrl: "+t.templateUrl),t.styleUrls&&t.styleUrls.length&&o.push(" - styleUrls: "+JSON.stringify(t.styleUrls)),o.push("Did you run and wait for 'resolveComponentResources()'?"),new Error(o.join("\n"))}var a=t.templateUrl||"ng:///"+e.name+"/template.html",s=Object(r.__assign)({},Dv(e,t),{typeSourceSpan:i.createParseSourceSpan("Component",e.name,a),template:t.template||"",preserveWhitespaces:t.preserveWhitespaces||!1,styles:t.styles||sn,animations:t.animations,directives:[],changeDetection:t.changeDetection,pipes:new Map,encapsulation:t.encapsulation||rn.Emulated,interpolation:t.interpolation,viewProviders:t.viewProviders||null});if(s.usesInheritance&&Ov(e),n=i.compileComponent(fv,a,s),gv(),void 0!==e.ngSelectorScope){var u=Mv(e.ngSelectorScope);xv(n,u)}}return n},configurable:!1}),Fe(e)}function Pv(e,t){var n=null;Object.defineProperty(e,ln,{get:function(){if(null===n){var r=e&&e.name,i="ng:///"+r+"/ngDirectiveDef.js",o=$(),a=Dv(e,t);a.typeSourceSpan=o.createParseSourceSpan("Directive",r,i),a.usesInheritance&&Ov(e),n=o.compileDirective(fv,i,a)}return n},configurable:!1}),Fe(e)}function Rv(e){return Object.getPrototypeOf(e.prototype)===Object.prototype}function Dv(e,t){var n,r=we().ownPropMetadata(e);return{name:e.name,type:e,typeArgumentCount:0,selector:t.selector,deps:Le(e),host:t.host||an,propMetadata:r,inputs:t.inputs||sn,outputs:t.outputs||sn,queries:Iv(e,r,Fv),lifecycle:{usesOnChanges:e.prototype.hasOwnProperty("ngOnChanges")},typeSourceSpan:null,usesInheritance:!Rv(e),exportAs:(n=t.exportAs,void 0===n?null:n.split(",").map(function(e){return e.trim()})),providers:t.providers||null,viewQueries:Iv(e,r,Nv)}}function Ov(e){for(var t=Object.prototype,n=Object.getPrototypeOf(e);n&&n!==t;){if(!Cn(n)&&!Sn(n)&&!Rn(n)){var r=Lv(n);r&&wv(n,r)}n=Object.getPrototypeOf(n)}}function wv(e,t){var n=null;Object.defineProperty(e,fn,{get:function(){if(null===n){var r="ng://"+(e&&e.name)+"/ngBaseDef.js",i=$();n=i.compileBase(fv,r,t)}return n},configurable:!1})}function Lv(e){var t,n,r=we().ownPropMetadata(e),i=Iv(e,r,Nv),o=Iv(e,r,Fv),a=!1,s=function(e){r[e].forEach(function(r){var i=r.ngMetadataName;"Input"===i?(t=t||{})[e]=r.bindingPropertyName?[r.bindingPropertyName,e]:e:"Output"===i?(n=n||{})[e]=r.bindingPropertyName||e:"HostBinding"!==i&&"HostListener"!==i||(a=!0)})};for(var u in r)s(u);return t||n||i.length||o.length||a?{name:e.name,inputs:t,outputs:n,viewQueries:i,queries:o,propMetadata:r}:null}function Iv(e,t,n){var r=[],i=function(i){if(t.hasOwnProperty(i)){var o=t[i];o.forEach(function(t){if(n(t)){if(!t.selector)throw new Error("Can't construct a query for the property \""+i+'" of "'+wn(e)+"\" since the query selector wasn't defined.");if(o.some(Bv))throw new Error("Cannot combine @Input decorators with query decorators");r.push(function(e,t){return{propertyName:i,predicate:(n=t.selector,"string"==typeof n?n.split(",").map(function(e){return e.trim()}):X(n)),descendants:t.descendants,first:t.first,read:t.read?t.read:null,static:!!t.static};var n}(0,t))}})}};for(var o in t)i(o);return r}function Fv(e){var t=e.ngMetadataName;return"ContentChild"===t||"ContentChildren"===t}function Nv(e){var t=e.ngMetadataName;return"ViewChild"===t||"ViewChildren"===t}function Bv(e){return"Input"===e.ngMetadataName}function kv(e,t){var n=null;Object.defineProperty(e,cn,{get:function(){if(null===n){var r=e.name;n=$().compilePipe(fv,"ng:///"+r+"/ngPipeDef.js",{type:e,typeArgumentCount:0,name:r,deps:Le(e),pipeName:t.name,pure:void 0===t.pure||t.pure})}return n},configurable:!1})}var Uv=E("Directive",function(e){return void 0===e&&(e={}),e},void 0,void 0,function(e,t){return qv(e,t)}),Vv=E("Component",function(e){return void 0===e&&(e={}),Object(r.__assign)({changeDetection:Kt.Default},e)},Uv,void 0,function(e,t){return Qv(e,t)}),Gv=E("Pipe",function(e){return Object(r.__assign)({pure:!0},e)},void 0,void 0,function(e,t){return Zv(e,t)}),jv=A("Input",function(e){return{bindingPropertyName:e}}),zv=A("Output",function(e){return{bindingPropertyName:e}}),Yv=A("HostBinding",function(e){return{hostPropertyName:e}}),Hv=A("HostListener",function(e,t){return{eventName:e,args:t}}),Wv=Cv,Xv=Pv,Kv=kv,Qv=xf,qv=xf,Zv=xf,Jv=E("NgModule",function(e){return e},void 0,void 0,function(e,t){return ey(e,t)}),$v=yv,ey=function(e,t){var n=t&&t.imports||[];t&&t.exports&&(n=Object(r.__spread)(n,[t.exports])),e.ngInjectorDef=U({factory:ze(e,{useClass:e}),providers:t&&t.providers,imports:n})},ty=new te("Application Initializer"),ny=function(){function e(e){var t=this;this.appInits=e,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return e.prototype.runInitializers=function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=0;r<this.appInits.length;r++){var i=this.appInits[r]();Fh(i)&&t.push(i)}Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}},e}(),ry=new te("AppId");function iy(){return""+ay()+ay()+ay()}var oy={provide:ry,useFactory:iy,deps:[]};function ay(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var sy=new te("Platform Initializer"),uy=new te("Platform ID"),ly=new te("appBootstrapListener"),cy=new te("Application Packages Root URL"),hy=function(){function e(){}return e.prototype.log=function(e){console.log(e)},e.prototype.warn=function(e){console.warn(e)},e}(),dy=new te("LocaleId"),fy=new te("Translations"),py=new te("TranslationsFormat"),_y=function(e){return e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Ignore=2]="Ignore",e}({}),my=function(){return function(e,t){this.ngModuleFactory=e,this.componentFactories=t}}();function gy(){throw new Error("Runtime compiler is not loaded")}var vy,yy,by=function(e){return new bg(e)},Ty=gy,Ey=function(e){return Promise.resolve(by(e))},xy=gy,My=function(e){var t=by(e),n=Un(Dn(e).declarations).reduce(function(e,t){var n=Sn(t);return n&&e.push(new cm(n)),e},[]);return new my(t,n)},Ay=gy,Sy=function(e){return Promise.resolve(My(e))},Cy=gy,Py=function(){function e(){this.compileModuleSync=Ty,this.compileModuleAsync=xy,this.compileModuleAndAllComponentsSync=Ay,this.compileModuleAndAllComponentsAsync=Cy}return e.prototype.clearCache=function(){},e.prototype.clearCacheFor=function(e){},e.prototype.getModuleId=function(e){},e}(),Ry=new te("compilerOptions"),Dy=function(){return function(){}}();function Oy(){var e=J.wtf;return!(!e||!(vy=e.trace)||(yy=vy.events,0))}function wy(e,t){return void 0===t&&(t=null),yy.createScope(e,t)}function Ly(e,t){return vy.leaveScope(e,t),t}function Iy(e,t){return vy.beginTimeRange(e,t)}function Fy(e){vy.endTimeRange(e)}var Ny=Oy();function By(e,t){return null}var ky=Ny?wy:function(e,t){return By},Uy=Ny?Ly:function(e,t){return t},Vy=Ny?Iy:function(e,t){return null},Gy=Ny?Fy:function(e){return null},jy=function(){return Promise.resolve(0)}();function zy(e){"undefined"==typeof Zone?jy.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var Yy=function(){function e(e){var t,n=e.enableLongStackTrace,r=void 0!==n&&n;if(this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vg(!1),this.onMicrotaskEmpty=new Vg(!1),this.onStable=new Vg(!1),this.onError=new Vg(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),(t=this)._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(e,n,r,i,o,a){try{return Ky(t),e.invokeTask(r,i,o,a)}finally{Qy(t)}},onInvoke:function(e,n,r,i,o,a,s){try{return Ky(t),e.invoke(r,i,o,a,s)}finally{Qy(t)}},onHasTask:function(e,n,r,i){e.hasTask(r,i),n===r&&("microTask"==i.change?(t.hasPendingMicrotasks=i.microTask,Xy(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:function(e,n,r,i){return e.handleError(r,i),t.runOutsideAngular(function(){return t.onError.emit(i)}),!1}})}return e.isInAngularZone=function(){return!0===Zone.current.get("isAngularZone")},e.assertInAngularZone=function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")},e.assertNotInAngularZone=function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")},e.prototype.run=function(e,t,n){return this._inner.run(e,t,n)},e.prototype.runTask=function(e,t,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,Wy,Hy,Hy);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}},e.prototype.runGuarded=function(e,t,n){return this._inner.runGuarded(e,t,n)},e.prototype.runOutsideAngular=function(e){return this._outer.run(e)},e}();function Hy(){}var Wy={};function Xy(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function Ky(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Qy(e){e._nesting--,Xy(e)}var qy=function(){function e(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vg,this.onMicrotaskEmpty=new Vg,this.onStable=new Vg,this.onError=new Vg}return e.prototype.run=function(e){return e()},e.prototype.runGuarded=function(e){return e()},e.prototype.runOutsideAngular=function(e){return e()},e.prototype.runTask=function(e){return e()},e}(),Zy=function(){function e(e){var t=this;this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(function(){t.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return e.prototype._watchAngularEvents=function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){Yy.assertNotInAngularZone(),zy(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})},e.prototype.increasePendingRequestCount=function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount},e.prototype.decreasePendingRequestCount=function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount},e.prototype.isStable=function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks},e.prototype._runCallbacksIfReady=function(){var e=this;if(this.isStable())zy(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}},e.prototype.getPendingTasks=function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]},e.prototype.addCallback=function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==i}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})},e.prototype.whenStable=function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()},e.prototype.getPendingRequestCount=function(){return this._pendingCount},e.prototype.findProviders=function(e,t,n){return[]},e}(),Jy=function(){function e(){this._applications=new Map,tb.addToWindow(this)}return e.prototype.registerApplication=function(e,t){this._applications.set(e,t)},e.prototype.unregisterApplication=function(e){this._applications.delete(e)},e.prototype.unregisterAllApplications=function(){this._applications.clear()},e.prototype.getTestability=function(e){return this._applications.get(e)||null},e.prototype.getAllTestabilities=function(){return Array.from(this._applications.values())},e.prototype.getAllRootElements=function(){return Array.from(this._applications.keys())},e.prototype.findTestabilityInTree=function(e,t){return void 0===t&&(t=!0),tb.findTestabilityInTree(this,e,t)},Object(r.__decorate)([Object(r.__metadata)("design:paramtypes",[])],e)}();function $y(e){tb=e}var eb,tb=new(function(){function e(){}return e.prototype.addToWindow=function(e){},e.prototype.findTestabilityInTree=function(e,t,n){return null},e}());function nb(e,t,n){var i=new bg(n);if(0===Jt.size)return Promise.resolve(i);var o,a,s=(o=e.get(Ry,[]).concat(t).map(function(e){return e.providers}),a=[],o.forEach(function(e){return e&&a.push.apply(a,Object(r.__spread)(e))}),a);if(0===s.length)return Promise.resolve(i);var u=$(),l=ht.create({providers:s}).get(u.ResourceLoader);return Zt(function(e){return Promise.resolve(l.get(e))}).then(function(){return i})}function rb(e){return e.isBoundToModule}var ib=new te("AllowMultipleToken"),ob=function(){return function(e,t){this.name=e,this.token=t}}();function ab(e){if(eb&&!eb.destroyed&&!eb.injector.get(ib,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");eb=e.get(hb);var t=e.get(sy,null);return t&&t.forEach(function(e){return e()}),eb}function sb(e,t,n){void 0===n&&(n=[]);var r="Platform: "+t,i=new te(r);return function(t){void 0===t&&(t=[]);var o=cb();if(!o||o.injector.get(ib,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var a=n.concat(t).concat({provide:i,useValue:!0});ab(ht.create({providers:a,name:r}))}return ub(i)}}function ub(e){var t=cb();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}function lb(){eb&&!eb.destroyed&&eb.destroy()}function cb(){return eb&&!eb.destroyed?eb:null}var hb=function(){function e(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return e.prototype.bootstrapModuleFactory=function(e,t){var n,r=this,i="noop"===(n=t?t.ngZone:void 0)?new qy:("zone.js"===n?void 0:n)||new Yy({enableLongStackTrace:ki()}),o=[{provide:Yy,useValue:i}];return i.run(function(){var t=ht.create({providers:o,parent:r.injector,name:e.moduleType.name}),n=e.create(t),a=n.injector.get(Oa,null);if(!a)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return dg(n.injector.get(dy,cg)),n.onDestroy(function(){return pb(r._modules,n)}),i.runOutsideAngular(function(){return i.onError.subscribe({next:function(e){a.handleError(e)}})}),function(e,t,i){try{var o=((a=n.injector.get(ny)).runInitializers(),a.donePromise.then(function(){return r._moduleDoBootstrap(n),n}));return Fh(o)?o.catch(function(n){throw t.runOutsideAngular(function(){return e.handleError(n)}),n}):o}catch(s){throw t.runOutsideAngular(function(){return e.handleError(s)}),s}var a}(a,i)})},e.prototype.bootstrapModule=function(e,t){var n=this;void 0===t&&(t=[]);var r=db({},t);return function(e,t,n){return e.get(Dy).createCompiler([t]).compileModuleAsync(n)}(this.injector,r,e).then(function(e){return n.bootstrapModuleFactory(e,r)})},e.prototype._moduleDoBootstrap=function(e){var t=e.injector.get(fb);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module "+Y(e.instance.constructor)+' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.');e.instance.ngDoBootstrap(t)}this._modules.push(e)},e.prototype.onDestroy=function(e){this._destroyListeners.push(e)},Object.defineProperty(e.prototype,"injector",{get:function(){return this._injector},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!0,configurable:!0}),e}();function db(e,t){return Array.isArray(t)?t.reduce(db,e):Object(r.__assign)({},e,t)}var fb=function(){function e(e,t,n,r,i,o){var h=this;this._zone=e,this._console=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=ki(),this._zone.onMicrotaskEmpty.subscribe({next:function(){h._zone.run(function(){h.tick()})}});var f=new a.a(function(e){h._stable=h._zone.isStable&&!h._zone.hasPendingMacrotasks&&!h._zone.hasPendingMicrotasks,h._zone.runOutsideAngular(function(){e.next(h._stable),e.complete()})}),p=new a.a(function(e){var t;h._zone.runOutsideAngular(function(){t=h._zone.onStable.subscribe(function(){Yy.assertNotInAngularZone(),zy(function(){h._stable||h._zone.hasPendingMacrotasks||h._zone.hasPendingMicrotasks||(h._stable=!0,e.next(!0))})})});var n=h._zone.onUnstable.subscribe(function(){Yy.assertInAngularZone(),h._stable&&(h._stable=!1,h._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Number.POSITIVE_INFINITY,r=null,i=e[e.length-1];return Object(s.a)(i)?(r=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(n=e.pop())):"number"==typeof i&&(n=e.pop()),null===r&&1===e.length&&e[0]instanceof a.a?e[0]:function(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Object(u.a)(l,e)}(n)(Object(c.a)(e,r))}(f,p.pipe(function(e){return d()((t=v,function(e){var n;n="function"==typeof t?t:function(){return t};var r=Object.create(e,m);return r.source=e,r.subjectFactory=n,r})(e));var t}))}var t;return t=e,e.prototype.bootstrap=function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof af?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=n instanceof _f?null:this._injector.get(mf),o=n.create(ht.NULL,[],t||n.selector,i);o.onDestroy(function(){r._unloadComponent(o)});var a=o.injector.get(Zy,null);return a&&o.injector.get(Jy).registerApplication(o.location.nativeElement,a),this._loadComponent(o),ki()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),o},e.prototype.tick=function(){var e,n,i,o,a=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");var s=t._tickScope();try{this._runningTick=!0;try{for(var u=Object(r.__values)(this._views),l=u.next();!l.done;l=u.next())l.value.detectChanges()}catch(d){e={error:d}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}if(this._enforceNoNewChanges)try{for(var c=Object(r.__values)(this._views),h=c.next();!h.done;h=c.next())h.value.checkNoChanges()}catch(f){i={error:f}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}catch(p){this._zone.runOutsideAngular(function(){return a._exceptionHandler.handleError(p)})}finally{this._runningTick=!1,Uy(s)}},e.prototype.attachView=function(e){var t=e;this._views.push(t),t.attachToAppRef(this)},e.prototype.detachView=function(e){var t=e;pb(this._views,t),t.detachFromAppRef()},e.prototype._loadComponent=function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(ly,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})},e.prototype._unloadComponent=function(e){this.detachView(e.hostView),pb(this.components,e)},e.prototype.ngOnDestroy=function(){this._views.slice().forEach(function(e){return e.destroy()})},Object.defineProperty(e.prototype,"viewCount",{get:function(){return this._views.length},enumerable:!0,configurable:!0}),e._tickScope=ky("ApplicationRef#tick()"),e}();function pb(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var _b=function(){return function(){}}();function mb(e){var t=gg(e);if(!t)throw yb(e);return t}function gb(e){var t=gg(e);if(!t)throw yb(e);return new bg(t)}var vb=mb;function yb(e){return new Error("No module with ID "+e+" loaded")}var bb=!0,Tb=!1,Eb=function(){return function(){}}(),xb={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Mb=function(){function e(e,t){this._compiler=e,this._config=t||xb}return e.prototype.load=function(e){return!Tb&&this._compiler instanceof Py?this.loadFactory(e):this.loadAndCompile(e)},e.prototype.loadAndCompile=function(e){var t=this,i=Object(r.__read)(e.split("#"),2),o=i[0],a=i[1];return void 0===a&&(a="default"),n("zn8P")(o).then(function(e){return e[a]}).then(function(e){return Ab(e,o,a)}).then(function(e){return t._compiler.compileModuleAsync(e)})},e.prototype.loadFactory=function(e){var t=Object(r.__read)(e.split("#"),2),i=t[0],o=t[1],a="NgFactory";return void 0===o&&(o="default",a=""),n("zn8P")(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(e){return e[o+a]}).then(function(e){return Ab(e,i,o)})},e}();function Ab(e,t,n){if(!e)throw new Error("Cannot find '"+n+"' in '"+t+"'");return e}var Sb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(qf),Cb=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t}(Sb),Pb=function(){return function(e,t){this.name=e,this.callback=t}}(),Rb=function(){function e(e,t,n){this.listeners=[],this.parent=null,this._debugContext=n,this.nativeNode=e,t&&t instanceof Db&&t.addChild(this)}return Object.defineProperty(e.prototype,"injector",{get:function(){return this._debugContext.injector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentInstance",{get:function(){return this._debugContext.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this._debugContext.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){return this._debugContext.references},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){return this._debugContext.providerTokens},enumerable:!0,configurable:!0}),e}(),Db=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.properties={},i.attributes={},i.classes={},i.styles={},i.childNodes=[],i.nativeElement=t,i}return Object(r.__extends)(t,e),t.prototype.addChild=function(e){e&&(this.childNodes.push(e),e.parent=this)},t.prototype.removeChild=function(e){var t=this.childNodes.indexOf(e);-1!==t&&(e.parent=null,this.childNodes.splice(t,1))},t.prototype.insertChildrenAfter=function(e,t){var n,i=this,o=this.childNodes.indexOf(e);-1!==o&&((n=this.childNodes).splice.apply(n,Object(r.__spread)([o+1,0],t)),t.forEach(function(t){t.parent&&t.parent.removeChild(t),e.parent=i}))},t.prototype.insertBefore=function(e,t){var n=this.childNodes.indexOf(e);-1===n?this.addChild(t):(t.parent&&t.parent.removeChild(t),t.parent=this,this.childNodes.splice(n,0,t))},t.prototype.query=function(e){return this.queryAll(e)[0]||null},t.prototype.queryAll=function(e){var t=[];return function e(t,n,r){t.childNodes.forEach(function(t){t instanceof Db&&(n(t)&&r.push(t),e(t,n,r))})}(this,e,t),t},t.prototype.queryAllNodes=function(e){var t=[];return function e(t,n,r){t instanceof Db&&t.childNodes.forEach(function(t){n(t)&&r.push(t),t instanceof Db&&e(t,n,r)})}(this,e,t),t},Object.defineProperty(t.prototype,"children",{get:function(){return this.childNodes.filter(function(e){return e instanceof t})},enumerable:!0,configurable:!0}),t.prototype.triggerEventHandler=function(e,t){this.listeners.forEach(function(n){n.name==e&&n.callback(t)})},t}(Rb);function Ob(e){return e.map(function(e){return e.nativeElement})}var wb=function(){function e(e){this.nativeNode=e}return Object.defineProperty(e.prototype,"parent",{get:function(){var e=this.nativeNode.parentNode;return e?new Lb(e):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return Ed(this.nativeNode)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentInstance",{get:function(){var e=this.nativeNode;return e&&(vd(e)||bd(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return yd(this.nativeNode)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listeners",{get:function(){return Pd(this.nativeNode).filter(Cd)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){return void 0===(e=Md(this.nativeNode)).localRefs&&(e.localRefs=function(t,n){var r=t[Gn].data[e.nodeIndex];if(r&&r.localNames){for(var i={},o=r.index+1,a=0;a<r.localNames.length;a+=2)i[r.localNames[a]]=t[o],o++;return i}return null}(e.lView)),e.localRefs||{};var e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){return function(e){var t=Md(e,!1);if(!t)return[];for(var n,r=t.lView[Gn],i=r.data[t.nodeIndex],o=[],a=i.directiveEnd,s=65535&i.providerIndexes;s<a;s++){var u=r.data[s];void 0!==(n=u).type&&void 0!==n.template&&void 0!==n.declaredInputs&&(u=u.type),o.push(u)}return o}(this.nativeNode)},enumerable:!0,configurable:!0}),e}(),Lb=function(e){function t(t){return e.call(this,t)||this}return Object(r.__extends)(t,e),Object.defineProperty(t.prototype,"nativeElement",{get:function(){return this.nativeNode.nodeType==Node.ELEMENT_NODE?this.nativeNode:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.nativeElement.nodeName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"properties",{get:function(){var e=Md(this.nativeNode),t=e.lView,n=t[Gn].data,i=n[e.nodeIndex],o=function(e,t,n){for(var r={},i=function(t,n){for(var r=e.propertyMetadataStartIndex-1,i=n[r];"string"==typeof i&&!kn(i);)i=n[--r];return r+1}(0,n);i<e.propertyMetadataEndIndex;){for(var o=void 0,a=n[i];!kn(a);)o=(o||"")+On(t[i])+n[i],a=n[++i];o=void 0===o?t[i]:o+=t[i];var s=a.split(Bn),u=s[0];u&&(r[u]=s[1]&&s[2]?s[1]+o+s[2]:o),i++}return r}(i,t,n),a=function(e,t,n){for(var r={},i=e.directiveEnd,o=n[i];"string"==typeof o;)r[o.split(Bn)[0]]=t[i],o=n[++i];return r}(i,t,n),s=function(e){var t,n,i=e.classes,o="";try{for(var a=Object(r.__values)(Object.keys(i)),s=a.next();!s.done;s=a.next()){var u=s.value;i[u]&&(o=o?o+" "+u:u)}}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}(this),u=Object(r.__assign)({},o,a);return s&&(u.className=u.className?u.className+" "+s:s),u},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e={},t=this.nativeElement;if(!t)return e;var n=Md(t),r=n.lView[Gn].data[n.nodeIndex].attrs,i=[];if(r)for(var o=0;o<r.length;){var a=r[o];if("string"!=typeof a)break;e[a]=r[o+1],i.push(a.toLowerCase()),o+=2}var s=t.attributes;for(o=0;o<s.length;o++){var u=s[o];-1===i.indexOf(u.name)&&(e[u.name]=u.value)}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classes",{get:function(){var e={},t=this.nativeElement;if(t){var n=Sd(t),r=Ho(n.nodeIndex,n.lView);if(r){for(var i=10;i<r.length;i+=4)if(ns(r,i)){var o=bs(r,i),a=ys(r,i);"boolean"==typeof a&&(e[o]=a)}}else{var s=t.classList;for(i=0;i<s.length;i++)e[s[i]]=!0}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){var e={},t=this.nativeElement;if(t){var n=Sd(t),r=Ho(n.nodeIndex,n.lView);if(r){for(var i=10;i<r.length;i+=4)if(!ns(r,i)){var o=bs(r,i),a=ys(r,i);null!==a&&(e[o]=a)}}else{var s=t.style;for(i=0;i<s.length;i++){var u=s.item(i);e[u]=s.getPropertyValue(u)}}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){for(var e=this.nativeNode.childNodes,t=[],n=0;n<e.length;n++)t.push(Vb(e[n]));return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){var e=this.nativeElement;if(!e)return[];for(var t=e.children,n=[],r=0;r<t.length;r++)n.push(Vb(t[r]));return n},enumerable:!0,configurable:!0}),t.prototype.query=function(e){return this.queryAll(e)[0]||null},t.prototype.queryAll=function(e){var t=[];return Ib(this,e,t,!0),t},t.prototype.queryAllNodes=function(e){var t=[];return Ib(this,e,t,!1),t},t.prototype.triggerEventHandler=function(e,t){this.listeners.forEach(function(n){n.name===e&&n.callback(t)})},t}(wb);function Ib(e,t,n,r){var i=Md(e.nativeNode);Fb(i.lView[Gn].data[i.nodeIndex],i.lView,t,n,r,e.nativeNode)}function Fb(e,t,n,i,o,a){var s,u,l=mr(e,t);if(3===e.type||4===e.type){Bb(l,n,i,o,a),Tr(e)?(d=yr(e.index,t))&&d[Gn].firstChild&&Fb(d[Gn].firstChild,d,n,i,o,a):e.child&&Fb(e.child,t,n,i,o,a);var c=t[e.index];fr(c)&&Nb(c,n,i,o,a)}else if(0===e.type){var h=t[e.index];Bb(h[ur],n,i,o,a),Nb(h,n,i,o,a)}else if(1===e.type){var d,f=(d=aa(t))[Wn].projection[e.projection];if(Array.isArray(f))try{for(var p=Object(r.__values)(f),_=p.next();!_.done;_=p.next())Bb(_.value,n,i,o,a)}catch(v){s={error:v}}finally{try{_&&!_.done&&(u=p.return)&&u.call(p)}finally{if(s)throw s.error}}else if(f){var m,g=d[zn];Fb(m=g[Gn].data[f.index],g,n,i,o,a)}}else e.child&&Fb(e.child,t,n,i,o,a);a!==l&&(m=2&e.flags?e.projectionNext:e.next)&&Fb(m,t,n,i,o,a)}function Nb(e,t,n,r,i){for(var o=lr;o<e.length;o++){var a=e[o];Fb(a[Gn].node,a,t,n,r,i)}}function Bb(e,t,n,r,i){if(i!==e){var o=Gb(e);o&&(!r||o instanceof Lb)&&t(o)&&n.push(o)}}var kb=new Map,Ub="__ng_debug__";function Vb(e){return e instanceof Node?(e.hasOwnProperty(Ub)||(e[Ub]=e.nodeType==Node.ELEMENT_NODE?new Lb(e):new wb(e)),e[Ub]):null}var Gb=function(e){return kb.get(e)||null};function jb(e){kb.set(e.nativeNode,e)}var zb=Rb,Yb=Db,Hb=sb(null,"core",[{provide:uy,useValue:"unknown"},{provide:hb,deps:[ht]},{provide:Jy,deps:[]},{provide:hy,deps:[]}]);function Wb(){return ep}function Xb(){return tp}function Kb(e){return e||"en-US"}var Qb=[{provide:fb,useClass:fb,deps:[Yy,hy,ht,Oa,ff,ny]},{provide:lm,deps:[Yy],useFactory:qb},{provide:ny,useClass:ny,deps:[[new P,ty]]},{provide:Py,useClass:Py,deps:[]},oy,{provide:Kf,useFactory:Wb,deps:[]},{provide:Qf,useFactory:Xb,deps:[]},{provide:dy,useFactory:Kb,deps:[[new C(dy),new P,new D]]}];function qb(e){var t=[];return e.onStable.subscribe(function(){for(;t.length;)t.pop()()}),function(e){t.push(e)}}var Zb=function(){return function(e){}}();function Jb(e,t,n,r,i,o){e|=1;var a=Vp(t);return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,flags:e,checkIndex:-1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:a.matchedQueries,matchedQueryIds:a.matchedQueryIds,references:a.references,ngContentIndex:n,childCount:r,bindings:[],bindingFlags:0,outputs:[],element:{ns:null,name:null,attrs:null,template:o?Yp(o):null,componentProvider:null,componentView:null,componentRendererType:null,publicProviders:null,allProviders:null,handleEvent:i||bp},provider:null,text:null,query:null,ngContent:null}}function $b(e,t,n,i,o,a,s,u,l,c,h,d){var f;void 0===s&&(s=[]),c||(c=bp);var p=Vp(n),_=p.matchedQueries,m=p.references,g=p.matchedQueryIds,v=null,y=null;a&&(v=(f=Object(r.__read)(Zp(a),2))[0],y=f[1]),u=u||[];for(var b=new Array(u.length),T=0;T<u.length;T++){var E=Object(r.__read)(u[T],3),x=E[0],M=E[1],A=E[2],S=Object(r.__read)(Zp(M),2),C=S[0],P=S[1],R=void 0,D=void 0;switch(15&x){case 4:D=A;break;case 1:case 8:R=A}b[T]={flags:x,ns:C,name:P,nonMinifiedName:P,securityContext:R,suffix:D}}l=l||[];var O=new Array(l.length);for(T=0;T<l.length;T++){var w=Object(r.__read)(l[T],2);O[T]={type:0,target:w[0],eventName:w[1],propName:null}}var L=(s=s||[]).map(function(e){var t=Object(r.__read)(e,2),n=t[0],i=t[1],o=Object(r.__read)(Zp(n),2);return[o[0],o[1],i]});return d=function(e){if(e&&e.id===Mp){var t=null!=e.encapsulation&&e.encapsulation!==rn.None||e.styles.length||Object.keys(e.data).length;e.id=t?"c"+Cp++:Ap}return e&&e.id===Ap&&(e=null),e||null}(d),h&&(t|=33554432),{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:t|=1,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:_,matchedQueryIds:g,references:m,ngContentIndex:i,childCount:o,bindings:b,bindingFlags:Jp(b),outputs:O,element:{ns:v,name:y,attrs:L,template:null,componentProvider:null,componentView:h||null,componentRendererType:d,publicProviders:null,allProviders:null,handleEvent:c||bp},provider:null,text:null,query:null,ngContent:null}}function eT(e,t,n){var i,o=n.element,a=e.root.selectorOrNode,s=e.renderer;if(e.parent||!a){i=o.name?s.createElement(o.name,o.ns):s.createComment("");var u=jp(e,t,n);u&&s.appendChild(u,i)}else i=s.selectRootElement(a,!!o.componentRendererType&&o.componentRendererType.encapsulation===rn.ShadowDom);if(o.attrs)for(var l=0;l<o.attrs.length;l++){var c=Object(r.__read)(o.attrs[l],3);s.setAttribute(i,c[1],c[2],c[0])}return i}function tT(e,t,n,r){for(var i=0;i<n.outputs.length;i++){var o=n.outputs[i],a=nT(e,n.nodeIndex,(h=o.eventName,(c=o.target)?c+":"+h:h)),s=o.target,u=e;"component"===o.target&&(s=null,u=t);var l=u.renderer.listen(s||r,o.eventName,a);e.disposables[n.outputIndex+i]=l}var c,h}function nT(e,t,n){return function(r){return Lp(e,t,n,r)}}function rT(e,t,n,r){if(!Rp(e,t,n,r))return!1;var i=t.bindings[n],o=pp(e,t.nodeIndex),a=o.renderElement,s=i.name;switch(15&i.flags){case 1:!function(e,t,n,r,i,o){var a=t.securityContext,s=a?e.root.sanitizer.sanitize(a,o):o;s=null!=s?s.toString():null;var u=e.renderer;null!=o?u.setAttribute(n,i,s,r):u.removeAttribute(n,i,r)}(e,i,a,i.ns,s,r);break;case 2:!function(e,t,n,r){var i=e.renderer;r?i.addClass(t,n):i.removeClass(t,n)}(e,a,s,r);break;case 4:!function(e,t,n,r,i){var o=e.root.sanitizer.sanitize(lo.STYLE,i);if(null!=o){o=o.toString();var a=t.suffix;null!=a&&(o+=a)}else o=null;var s=e.renderer;null!=o?s.setStyle(n,r,o):s.removeStyle(n,r)}(e,i,a,s,r);break;case 8:!function(e,t,n,r,i){var o=t.securityContext,a=o?e.root.sanitizer.sanitize(o,i):i;e.renderer.setProperty(n,r,a)}(33554432&t.flags&&32&i.flags?o.componentView:e,i,a,s,r)}return!0}function iT(e,t,n){var r=[];for(var i in n)r.push({propName:i,bindingType:n[i]});return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,ngContentIndex:-1,matchedQueries:{},matchedQueryIds:0,references:{},childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:{id:t,filterId:Up(t),bindings:r},ngContent:null}}function oT(e){for(var t=e.def.nodeMatchedQueries;e.parent&&kp(e);){var n=e.parentNodeDef;e=e.parent;for(var r=n.nodeIndex+n.childCount,i=0;i<=r;i++)67108864&(o=e.def.nodes[i]).flags&&536870912&o.flags&&(o.query.filterId&t)===o.query.filterId&&gp(e,i).setDirty(),!(1&o.flags&&i+o.childCount<n.nodeIndex)&&67108864&o.childFlags&&536870912&o.childFlags||(i+=o.childCount)}if(134217728&e.def.nodeFlags)for(i=0;i<e.def.nodes.length;i++){var o;134217728&(o=e.def.nodes[i]).flags&&536870912&o.flags&&gp(e,i).setDirty(),i+=o.childCount}}function aT(e,t){var n=gp(e,t.nodeIndex);if(n.dirty){var r,i=void 0;if(67108864&t.flags){var o=t.parent.parent;i=sT(e,o.nodeIndex,o.nodeIndex+o.childCount,t.query,[]),r=_p(e,t.parent.nodeIndex).instance}else 134217728&t.flags&&(i=sT(e,0,e.def.nodes.length-1,t.query,[]),r=e.component);n.reset(i);for(var a=t.query.bindings,s=!1,u=0;u<a.length;u++){var l=a[u],c=void 0;switch(l.bindingType){case 0:c=n.first;break;case 1:c=n,s=!0}r[l.propName]=c}s&&n.notifyOnChanges()}}function sT(e,t,n,r,i){for(var o=t;o<=n;o++){var a=e.def.nodes[o],s=a.matchedQueries[r.id];if(null!=s&&i.push(uT(e,a,s)),1&a.flags&&a.element.template&&(a.element.template.nodeMatchedQueries&r.filterId)===r.filterId){var u=pp(e,o);if((a.childMatchedQueries&r.filterId)===r.filterId&&(sT(e,o+1,o+a.childCount,r,i),o+=a.childCount),16777216&a.flags)for(var l=u.viewContainer._embeddedViews,c=0;c<l.length;c++){var h=l[c],d=Ip(h);d&&d===u&&sT(h,0,h.def.nodes.length-1,r,i)}var f=u.template._projectedViews;if(f)for(c=0;c<f.length;c++){var p=f[c];sT(p,0,p.def.nodes.length-1,r,i)}}(a.childMatchedQueries&r.filterId)!==r.filterId&&(o+=a.childCount)}return i}function uT(e,t,n){if(null!=n)switch(n){case 1:return pp(e,t.nodeIndex).renderElement;case 0:return new Mf(pp(e,t.nodeIndex).renderElement);case 2:return pp(e,t.nodeIndex).template;case 3:return pp(e,t.nodeIndex).viewContainer;case 4:return _p(e,t.nodeIndex).instance}}function lT(e,t){return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:-1,flags:8,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:e,childCount:0,bindings:[],bindingFlags:0,outputs:[],element:null,provider:null,text:null,query:null,ngContent:{index:t}}}function cT(e,t,n){var r=jp(e,t,n);r&&Xp(e,n.ngContent.index,1,r,null,void 0)}function hT(e,t){return pT(128,e,new Array(t+1))}function dT(e,t){return pT(32,e,new Array(t))}function fT(e,t){for(var n=Object.keys(t),r=n.length,i=new Array(r),o=0;o<r;o++){var a=n[o];i[t[a]]=a}return pT(64,e,i)}function pT(e,t,n){for(var r=new Array(n.length),i=0;i<n.length;i++){var o=n[i];r[i]={flags:8,name:o,ns:null,nonMinifiedName:o,securityContext:null,suffix:null}}return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:t,flags:e,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:-1,childCount:0,bindings:r,bindingFlags:Jp(r),outputs:[],element:null,provider:null,text:null,query:null,ngContent:null}}function _T(e,t,n){for(var r=new Array(n.length-1),i=1;i<n.length;i++)r[i-1]={flags:8,name:null,ns:null,nonMinifiedName:null,securityContext:null,suffix:n[i]};return{nodeIndex:-1,parent:null,renderParent:null,bindingIndex:-1,outputIndex:-1,checkIndex:e,flags:2,childFlags:0,directChildFlags:0,childMatchedQueries:0,matchedQueries:{},matchedQueryIds:0,references:{},ngContentIndex:t,childCount:0,bindings:r,bindingFlags:8,outputs:[],element:null,provider:null,text:{prefix:n[0]},query:null,ngContent:null}}function mT(e,t,n){var r,i=e.renderer;r=i.createText(n.text.prefix);var o=jp(e,t,n);return o&&i.appendChild(o,r),{renderText:r}}function gT(e,t){return(null!=e?e.toString():"")+t.suffix}function vT(e,t,n,r){for(var i=0,o=0,a=0,s=0,u=0,l=null,c=null,h=!1,d=!1,f=null,p=0;p<t.length;p++){var _=t[p];if(_.nodeIndex=p,_.parent=l,_.bindingIndex=i,_.outputIndex=o,_.renderParent=c,a|=_.flags,u|=_.matchedQueryIds,_.element){var m=_.element;m.publicProviders=l?l.element.publicProviders:Object.create(null),m.allProviders=m.publicProviders,h=!1,d=!1,_.element.template&&(u|=_.element.template.nodeMatchedQueries)}if(bT(l,_,t.length),i+=_.bindings.length,o+=_.outputs.length,!c&&3&_.flags&&(f=_),20224&_.flags){h||(h=!0,l.element.publicProviders=Object.create(l.element.publicProviders),l.element.allProviders=l.element.publicProviders);var g=0!=(32768&_.flags);0==(8192&_.flags)||g?l.element.publicProviders[Ep(_.provider.token)]=_:(d||(d=!0,l.element.allProviders=Object.create(l.element.publicProviders)),l.element.allProviders[Ep(_.provider.token)]=_),g&&(l.element.componentProvider=_)}if(l?(l.childFlags|=_.flags,l.directChildFlags|=_.flags,l.childMatchedQueries|=_.matchedQueryIds,_.element&&_.element.template&&(l.childMatchedQueries|=_.element.template.nodeMatchedQueries)):s|=_.flags,_.childCount>0)l=_,yT(_)||(c=_);else for(;l&&p===l.nodeIndex+l.childCount;){var v=l.parent;v&&(v.childFlags|=l.childFlags,v.childMatchedQueries|=l.childMatchedQueries),c=(l=v)&&yT(l)?l.renderParent:l}}return{factory:null,nodeFlags:a,rootNodeFlags:s,nodeMatchedQueries:u,flags:e,nodes:t,updateDirectives:n||bp,updateRenderer:r||bp,handleEvent:function(e,n,r,i){return t[n].element.handleEvent(e,r,i)},bindingCount:i,outputCount:o,lastRenderRootNode:f}}function yT(e){return 0!=(1&e.flags)&&null===e.element.name}function bT(e,t,n){var r=t.element&&t.element.template;if(r){if(!r.lastRenderRootNode)throw new Error("Illegal State: Embedded templates without nodes are not allowed!");if(r.lastRenderRootNode&&16777216&r.lastRenderRootNode.flags)throw new Error("Illegal State: Last root node of a template can't have embedded views, at index "+t.nodeIndex+"!")}if(20224&t.flags&&0==(1&(e?e.flags:0)))throw new Error("Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index "+t.nodeIndex+"!");if(t.query){if(67108864&t.flags&&(!e||0==(16384&e.flags)))throw new Error("Illegal State: Content Query nodes need to be children of directives, at index "+t.nodeIndex+"!");if(134217728&t.flags&&e)throw new Error("Illegal State: View Query nodes have to be top level nodes, at index "+t.nodeIndex+"!")}if(t.childCount){var i=e?e.nodeIndex+e.childCount:n-1;if(t.nodeIndex<=i&&t.nodeIndex+t.childCount>i)throw new Error("Illegal State: childCount of node leads outside of parent, at index "+t.nodeIndex+"!")}}function TT(e,t,n,r){var i=MT(e.root,e.renderer,e,t,n);return AT(i,e.component,r),ST(i),i}function ET(e,t,n){var r=MT(e,e.renderer,null,null,t);return AT(r,n,n),ST(r),r}function xT(e,t,n,r){var i,o=t.element.componentRendererType;return i=o?e.root.rendererFactory.createRenderer(r,o):e.root.renderer,MT(e.root,i,e,t.element.componentProvider,n)}function MT(e,t,n,r,i){var o=new Array(i.nodes.length),a=i.outputCount?new Array(i.outputCount):null;return{def:i,parent:n,viewContainerParent:null,parentNodeDef:r,context:null,component:null,nodes:o,state:13,root:e,renderer:t,oldValues:new Array(i.bindingCount),disposables:a,initIndex:-1}}function AT(e,t,n){e.component=t,e.context=n}function ST(e){var t;Bp(e)&&(t=pp(e.parent,e.parentNodeDef.parent.nodeIndex).renderElement);for(var n=e.def,r=e.nodes,i=0;i<n.nodes.length;i++){var o=n.nodes[i];yp.setCurrentNode(e,i);var a=void 0;switch(201347067&o.flags){case 1:var s=eT(e,t,o),u=void 0;if(33554432&o.flags){var l=Yp(o.element.componentView);u=yp.createComponentView(e,o,l,s)}tT(e,u,o,s),a={renderElement:s,componentView:u,viewContainer:null,template:o.element.template?S_(e,o):void 0},16777216&o.flags&&(a.viewContainer=E_(e,o,a));break;case 2:a=mT(e,t,o);break;case 512:case 1024:case 2048:case 256:(a=r[i])||4096&o.flags||(a={instance:X_(e,o)});break;case 16:a={instance:K_(e,o)};break;case 16384:(a=r[i])||(a={instance:Q_(e,o)}),32768&o.flags&&AT(pp(e,o.parent.nodeIndex).componentView,a.instance,a.instance);break;case 32:case 64:case 128:a={value:void 0};break;case 67108864:case 134217728:a=new jg;break;case 8:cT(e,t,o),a=void 0}r[i]=a}FT(e,IT.CreateViewNodes),UT(e,201326592,268435456,0)}function CT(e){DT(e),yp.updateDirectives(e,1),NT(e,IT.CheckNoChanges),yp.updateRenderer(e,1),FT(e,IT.CheckNoChanges),e.state&=-97}function PT(e){1&e.state?(e.state&=-2,e.state|=2):e.state&=-3,hp(e,0,256),DT(e),yp.updateDirectives(e,0),NT(e,IT.CheckAndUpdate),UT(e,67108864,536870912,0);var t=hp(e,256,512);rm(e,2097152|(t?1048576:0)),yp.updateRenderer(e,0),FT(e,IT.CheckAndUpdate),UT(e,134217728,536870912,0),rm(e,8388608|((t=hp(e,512,768))?4194304:0)),2&e.def.flags&&(e.state&=-9),e.state&=-97,hp(e,768,1024)}function RT(e,t,n,i,o,a,s,u,l,c,h,d,f){return 0===n?function(e,t,n,r,i,o,a,s,u,l,c,h){switch(201347067&t.flags){case 1:return function(e,t,n,r,i,o,a,s,u,l,c,h){var d=t.bindings.length,f=!1;return d>0&&rT(e,t,0,n)&&(f=!0),d>1&&rT(e,t,1,r)&&(f=!0),d>2&&rT(e,t,2,i)&&(f=!0),d>3&&rT(e,t,3,o)&&(f=!0),d>4&&rT(e,t,4,a)&&(f=!0),d>5&&rT(e,t,5,s)&&(f=!0),d>6&&rT(e,t,6,u)&&(f=!0),d>7&&rT(e,t,7,l)&&(f=!0),d>8&&rT(e,t,8,c)&&(f=!0),d>9&&rT(e,t,9,h)&&(f=!0),f}(e,t,n,r,i,o,a,s,u,l,c,h);case 2:return function(e,t,n,r,i,o,a,s,u,l,c,h){var d=!1,f=t.bindings,p=f.length;if(p>0&&Rp(e,t,0,n)&&(d=!0),p>1&&Rp(e,t,1,r)&&(d=!0),p>2&&Rp(e,t,2,i)&&(d=!0),p>3&&Rp(e,t,3,o)&&(d=!0),p>4&&Rp(e,t,4,a)&&(d=!0),p>5&&Rp(e,t,5,s)&&(d=!0),p>6&&Rp(e,t,6,u)&&(d=!0),p>7&&Rp(e,t,7,l)&&(d=!0),p>8&&Rp(e,t,8,c)&&(d=!0),p>9&&Rp(e,t,9,h)&&(d=!0),d){var _=t.text.prefix;p>0&&(_+=gT(n,f[0])),p>1&&(_+=gT(r,f[1])),p>2&&(_+=gT(i,f[2])),p>3&&(_+=gT(o,f[3])),p>4&&(_+=gT(a,f[4])),p>5&&(_+=gT(s,f[5])),p>6&&(_+=gT(u,f[6])),p>7&&(_+=gT(l,f[7])),p>8&&(_+=gT(c,f[8])),p>9&&(_+=gT(h,f[9]));var m=fp(e,t.nodeIndex).renderText;e.renderer.setValue(m,_)}return d}(e,t,n,r,i,o,a,s,u,l,c,h);case 16384:return function(e,t,n,r,i,o,a,s,u,l,c,h){var d=_p(e,t.nodeIndex),f=d.instance,p=!1,_=void 0,m=t.bindings.length;return m>0&&Pp(e,t,0,n)&&(p=!0,_=nm(e,d,t,0,n,_)),m>1&&Pp(e,t,1,r)&&(p=!0,_=nm(e,d,t,1,r,_)),m>2&&Pp(e,t,2,i)&&(p=!0,_=nm(e,d,t,2,i,_)),m>3&&Pp(e,t,3,o)&&(p=!0,_=nm(e,d,t,3,o,_)),m>4&&Pp(e,t,4,a)&&(p=!0,_=nm(e,d,t,4,a,_)),m>5&&Pp(e,t,5,s)&&(p=!0,_=nm(e,d,t,5,s,_)),m>6&&Pp(e,t,6,u)&&(p=!0,_=nm(e,d,t,6,u,_)),m>7&&Pp(e,t,7,l)&&(p=!0,_=nm(e,d,t,7,l,_)),m>8&&Pp(e,t,8,c)&&(p=!0,_=nm(e,d,t,8,c,_)),m>9&&Pp(e,t,9,h)&&(p=!0,_=nm(e,d,t,9,h,_)),_&&f.ngOnChanges(_),65536&t.flags&&dp(e,256,t.nodeIndex)&&f.ngOnInit(),262144&t.flags&&f.ngDoCheck(),p}(e,t,n,r,i,o,a,s,u,l,c,h);case 32:case 64:case 128:return function(e,t,n,r,i,o,a,s,u,l,c,h){var d=t.bindings,f=!1,p=d.length;if(p>0&&Rp(e,t,0,n)&&(f=!0),p>1&&Rp(e,t,1,r)&&(f=!0),p>2&&Rp(e,t,2,i)&&(f=!0),p>3&&Rp(e,t,3,o)&&(f=!0),p>4&&Rp(e,t,4,a)&&(f=!0),p>5&&Rp(e,t,5,s)&&(f=!0),p>6&&Rp(e,t,6,u)&&(f=!0),p>7&&Rp(e,t,7,l)&&(f=!0),p>8&&Rp(e,t,8,c)&&(f=!0),p>9&&Rp(e,t,9,h)&&(f=!0),f){var _=mp(e,t.nodeIndex),m=void 0;switch(201347067&t.flags){case 32:m=new Array(d.length),p>0&&(m[0]=n),p>1&&(m[1]=r),p>2&&(m[2]=i),p>3&&(m[3]=o),p>4&&(m[4]=a),p>5&&(m[5]=s),p>6&&(m[6]=u),p>7&&(m[7]=l),p>8&&(m[8]=c),p>9&&(m[9]=h);break;case 64:m={},p>0&&(m[d[0].name]=n),p>1&&(m[d[1].name]=r),p>2&&(m[d[2].name]=i),p>3&&(m[d[3].name]=o),p>4&&(m[d[4].name]=a),p>5&&(m[d[5].name]=s),p>6&&(m[d[6].name]=u),p>7&&(m[d[7].name]=l),p>8&&(m[d[8].name]=c),p>9&&(m[d[9].name]=h);break;case 128:var g=n;switch(p){case 1:m=g.transform(n);break;case 2:m=g.transform(r);break;case 3:m=g.transform(r,i);break;case 4:m=g.transform(r,i,o);break;case 5:m=g.transform(r,i,o,a);break;case 6:m=g.transform(r,i,o,a,s);break;case 7:m=g.transform(r,i,o,a,s,u);break;case 8:m=g.transform(r,i,o,a,s,u,l);break;case 9:m=g.transform(r,i,o,a,s,u,l,c);break;case 10:m=g.transform(r,i,o,a,s,u,l,c,h)}}_.value=m}return f}(e,t,n,r,i,o,a,s,u,l,c,h);default:throw"unreachable"}}(e,t,i,o,a,s,u,l,c,h,d,f):function(e,t,n){switch(201347067&t.flags){case 1:return function(e,t,n){for(var r=!1,i=0;i<n.length;i++)rT(e,t,i,n[i])&&(r=!0);return r}(e,t,n);case 2:return function(e,t,n){for(var r=t.bindings,i=!1,o=0;o<n.length;o++)Rp(e,t,o,n[o])&&(i=!0);if(i){var a="";for(o=0;o<n.length;o++)a+=gT(n[o],r[o]);a=t.text.prefix+a;var s=fp(e,t.nodeIndex).renderText;e.renderer.setValue(s,a)}return i}(e,t,n);case 16384:return function(e,t,n){for(var r=_p(e,t.nodeIndex),i=r.instance,o=!1,a=void 0,s=0;s<n.length;s++)Pp(e,t,s,n[s])&&(o=!0,a=nm(e,r,t,s,n[s],a));return a&&i.ngOnChanges(a),65536&t.flags&&dp(e,256,t.nodeIndex)&&i.ngOnInit(),262144&t.flags&&i.ngDoCheck(),o}(e,t,n);case 32:case 64:case 128:return function(e,t,n){for(var i=t.bindings,o=!1,a=0;a<n.length;a++)Rp(e,t,a,n[a])&&(o=!0);if(o){var s=mp(e,t.nodeIndex),u=void 0;switch(201347067&t.flags){case 32:u=n;break;case 64:for(u={},a=0;a<n.length;a++)u[i[a].name]=n[a];break;case 128:var l=n[0],c=n.slice(1);u=l.transform.apply(l,Object(r.__spread)(c))}s.value=u}return o}(e,t,n);default:throw"unreachable"}}(e,t,i)}function DT(e){var t=e.def;if(4&t.nodeFlags)for(var n=0;n<t.nodes.length;n++){var r=t.nodes[n];if(4&r.flags){var i=pp(e,n).template._projectedViews;if(i)for(var o=0;o<i.length;o++){var a=i[o];a.state|=32,wp(a,e)}}else 0==(4&r.childFlags)&&(n+=r.childCount)}}function OT(e,t,n,r,i,o,a,s,u,l,c,h,d){return 0===n?function(e,t,n,r,i,o,a,s,u,l,c,h){var d=t.bindings.length;d>0&&Dp(e,t,0,n),d>1&&Dp(e,t,1,r),d>2&&Dp(e,t,2,i),d>3&&Dp(e,t,3,o),d>4&&Dp(e,t,4,a),d>5&&Dp(e,t,5,s),d>6&&Dp(e,t,6,u),d>7&&Dp(e,t,7,l),d>8&&Dp(e,t,8,c),d>9&&Dp(e,t,9,h)}(e,t,r,i,o,a,s,u,l,c,h,d):function(e,t,n){for(var r=0;r<n.length;r++)Dp(e,t,r,n[r])}(e,t,r),!1}function wT(e,t){if(gp(e,t.nodeIndex).dirty)throw up(yp.createDebugContext(e,t.nodeIndex),"Query "+t.query.id+" not dirty","Query "+t.query.id+" dirty",0!=(1&e.state))}function LT(e){if(!(128&e.state)){if(NT(e,IT.Destroy),FT(e,IT.Destroy),rm(e,131072),e.disposables)for(var t=0;t<e.disposables.length;t++)e.disposables[t]();!function(e){if(16&e.state){var t=Ip(e);if(t){var n=t.template._projectedViews;n&&(m_(n,n.indexOf(e)),yp.dirtyParentQueries(e))}}}(e),e.renderer.destroyNode&&function(e){for(var t=e.def.nodes.length,n=0;n<t;n++){var r=e.def.nodes[n];1&r.flags?e.renderer.destroyNode(pp(e,n).renderElement):2&r.flags?e.renderer.destroyNode(fp(e,n).renderText):(67108864&r.flags||134217728&r.flags)&&gp(e,n).destroy()}}(e),Bp(e)&&e.renderer.destroy(),e.state|=128}}var IT=function(e){return e[e.CreateViewNodes=0]="CreateViewNodes",e[e.CheckNoChanges=1]="CheckNoChanges",e[e.CheckNoChangesProjectedViews=2]="CheckNoChangesProjectedViews",e[e.CheckAndUpdate=3]="CheckAndUpdate",e[e.CheckAndUpdateProjectedViews=4]="CheckAndUpdateProjectedViews",e[e.Destroy=5]="Destroy",e}({});function FT(e,t){var n=e.def;if(33554432&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];33554432&i.flags?BT(pp(e,r).componentView,t):0==(33554432&i.childFlags)&&(r+=i.childCount)}}function NT(e,t){var n=e.def;if(16777216&n.nodeFlags)for(var r=0;r<n.nodes.length;r++){var i=n.nodes[r];if(16777216&i.flags)for(var o=pp(e,r).viewContainer._embeddedViews,a=0;a<o.length;a++)BT(o[a],t);else 0==(16777216&i.childFlags)&&(r+=i.childCount)}}function BT(e,t){var n=e.state;switch(t){case IT.CheckNoChanges:0==(128&n)&&(12==(12&n)?CT(e):64&n&&kT(e,IT.CheckNoChangesProjectedViews));break;case IT.CheckNoChangesProjectedViews:0==(128&n)&&(32&n?CT(e):64&n&&kT(e,t));break;case IT.CheckAndUpdate:0==(128&n)&&(12==(12&n)?PT(e):64&n&&kT(e,IT.CheckAndUpdateProjectedViews));break;case IT.CheckAndUpdateProjectedViews:0==(128&n)&&(32&n?PT(e):64&n&&kT(e,t));break;case IT.Destroy:LT(e);break;case IT.CreateViewNodes:ST(e)}}function kT(e,t){NT(e,t),FT(e,t)}function UT(e,t,n,r){if(e.def.nodeFlags&t&&e.def.nodeFlags&n)for(var i=e.def.nodes.length,o=0;o<i;o++){var a=e.def.nodes[o];if(a.flags&t&&a.flags&n)switch(yp.setCurrentNode(e,a.nodeIndex),r){case 0:aT(e,a);break;case 1:wT(e,a)}a.childFlags&t&&a.childFlags&n||(o+=a.childCount)}}var VT=!1;function GT(){if(!VT){VT=!0;var e=ki()?{setCurrentNode:cE,createRootView:zT,createEmbeddedView:HT,createComponentView:WT,createNgModuleRef:XT,overrideProvider:ZT,overrideComponentView:JT,clearOverrides:$T,checkAndUpdateView:rE,checkNoChangesView:iE,destroyView:oE,createDebugContext:function(e,t){return new vE(e,t)},handleEvent:hE,updateDirectives:dE,updateRenderer:fE}:{setCurrentNode:function(){},createRootView:jT,createEmbeddedView:TT,createComponentView:xT,createNgModuleRef:L_,overrideProvider:bp,overrideComponentView:bp,clearOverrides:bp,checkAndUpdateView:PT,checkNoChangesView:CT,destroyView:LT,createDebugContext:function(e,t){return new vE(e,t)},handleEvent:function(e,t,n,r){return e.def.handleEvent(e,t,n,r)},updateDirectives:function(e,t){return e.def.updateDirectives(0===t?tE:nE,e)},updateRenderer:function(e,t){return e.def.updateRenderer(0===t?tE:nE,e)}};yp.setCurrentNode=e.setCurrentNode,yp.createRootView=e.createRootView,yp.createEmbeddedView=e.createEmbeddedView,yp.createComponentView=e.createComponentView,yp.createNgModuleRef=e.createNgModuleRef,yp.overrideProvider=e.overrideProvider,yp.overrideComponentView=e.overrideComponentView,yp.clearOverrides=e.clearOverrides,yp.checkAndUpdateView=e.checkAndUpdateView,yp.checkNoChangesView=e.checkNoChangesView,yp.destroyView=e.destroyView,yp.resolveDep=em,yp.createDebugContext=e.createDebugContext,yp.handleEvent=e.handleEvent,yp.updateDirectives=e.updateDirectives,yp.updateRenderer=e.updateRenderer,yp.dirtyParentQueries=oT}}function jT(e,t,n,r,i,o){var a=i.injector.get(Of);return ET(YT(e,i,a,t,n),r,o)}function zT(e,t,n,r,i,o){var a=i.injector.get(Of),s=YT(e,i,new xE(a),t,n),u=eE(r);return TE(lE.create,ET,null,[s,u,o])}function YT(e,t,n,r,i){var o=t.injector.get(co),a=t.injector.get(Oa),s=n.createRenderer(null,null);return{ngModule:t,injector:e,projectableNodes:r,selectorOrNode:i,sanitizer:o,rendererFactory:n,renderer:s,errorHandler:a}}function HT(e,t,n,r){var i=eE(n);return TE(lE.create,TT,null,[e,t,i,r])}function WT(e,t,n,r){return n=qT.get(t.element.componentProvider.provider.token)||eE(n),TE(lE.create,xT,null,[e,t,n,r])}function XT(e,t,n,r){return L_(e,t,n,function(e){var t=function(e){var t=!1,n=!1;return 0===KT.size?{hasOverrides:t,hasDeprecatedOverrides:n}:(e.providers.forEach(function(e){var r=KT.get(e.token);3840&e.flags&&r&&(t=!0,n=n||r.deprecatedBehavior)}),e.modules.forEach(function(e){QT.forEach(function(r,i){V(i).providedIn===e&&(t=!0,n=n||r.deprecatedBehavior)})}),{hasOverrides:t,hasDeprecatedOverrides:n})}(e),n=t.hasDeprecatedOverrides;return t.hasOverrides?(function(e){for(var t=0;t<e.providers.length;t++){var r=e.providers[t];n&&(r.flags|=4096);var i=KT.get(r.token);i&&(r.flags=-3841&r.flags|i.flags,r.deps=Gp(i.deps),r.value=i.value)}if(QT.size>0){var o=new Set(e.modules);QT.forEach(function(t,r){if(o.has(V(r).providedIn)){var i={token:r,flags:t.flags|(n?4096:0),deps:Gp(t.deps),value:t.value,index:e.providers.length};e.providers.push(i),e.providersByKey[Ep(r)]=i}})}}(e=e.factory(function(){return bp})),e):e}(r))}var KT=new Map,QT=new Map,qT=new Map;function ZT(e){var t;KT.set(e.token,e),"function"==typeof e.token&&(t=V(e.token))&&"function"==typeof t.providedIn&&QT.set(e.token,e)}function JT(e,t){var n=Yp(y_(t)),r=Yp(n.nodes[0].element.componentView);qT.set(e,r)}function $T(){KT.clear(),QT.clear(),qT.clear()}function eE(e){if(0===KT.size)return e;var t=function(e){for(var t=[],n=null,r=0;r<e.nodes.length;r++){var i=e.nodes[r];1&i.flags&&(n=i),n&&3840&i.flags&&KT.has(i.provider.token)&&(t.push(n.nodeIndex),n=null)}return t}(e);if(0===t.length)return e;e=e.factory(function(){return bp});for(var n=0;n<t.length;n++)r(e,t[n]);return e;function r(e,t){for(var n=t+1;n<e.nodes.length;n++){var r=e.nodes[n];if(1&r.flags)return;if(3840&r.flags){var i=r.provider,o=KT.get(i.token);o&&(r.flags=-3841&r.flags|o.flags,i.deps=Gp(o.deps),i.value=o.value)}}}}function tE(e,t,n,r,i,o,a,s,u,l,c,h,d){var f=e.def.nodes[t];return RT(e,f,n,r,i,o,a,s,u,l,c,h,d),224&f.flags?mp(e,t).value:void 0}function nE(e,t,n,r,i,o,a,s,u,l,c,h,d){var f=e.def.nodes[t];return OT(e,f,n,r,i,o,a,s,u,l,c,h,d),224&f.flags?mp(e,t).value:void 0}function rE(e){return TE(lE.detectChanges,PT,null,[e])}function iE(e){return TE(lE.checkNoChanges,CT,null,[e])}function oE(e){return TE(lE.destroy,LT,null,[e])}var aE,sE,uE,lE=function(e){return e[e.create=0]="create",e[e.detectChanges=1]="detectChanges",e[e.checkNoChanges=2]="checkNoChanges",e[e.destroy=3]="destroy",e[e.handleEvent=4]="handleEvent",e}({});function cE(e,t){sE=e,uE=t}function hE(e,t,n,r){return cE(e,t),TE(lE.handleEvent,e.def.handleEvent,null,[e,t,n,r])}function dE(e,t){if(128&e.state)throw cp(lE[aE]);return cE(e,mE(e,0)),e.def.updateDirectives(function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=e.def.nodes[n];return 0===t?pE(e,a,r,i):_E(e,a,r,i),16384&a.flags&&cE(e,mE(e,n)),224&a.flags?mp(e,a.nodeIndex).value:void 0},e)}function fE(e,t){if(128&e.state)throw cp(lE[aE]);return cE(e,gE(e,0)),e.def.updateRenderer(function(e,n,r){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=e.def.nodes[n];return 0===t?pE(e,a,r,i):_E(e,a,r,i),3&a.flags&&cE(e,gE(e,n)),224&a.flags?mp(e,a.nodeIndex).value:void 0},e)}function pE(e,t,n,i){if(RT.apply(void 0,Object(r.__spread)([e,t,n],i))){var o=1===n?i[0]:i;if(16384&t.flags){for(var a={},s=0;s<t.bindings.length;s++){var u=t.bindings[s],l=o[s];8&u.flags&&(a[(f=u.nonMinifiedName,"ng-reflect-"+f.replace(/[$@]/g,"_").replace(Ia,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"-"+e[1].toLowerCase()}))]=Fa(l))}var c=t.parent,h=pp(e,c.nodeIndex).renderElement;if(c.element.name)for(var d in a)null!=(l=a[d])?e.renderer.setAttribute(h,d,l):e.renderer.removeAttribute(h,d);else e.renderer.setValue(h,"bindings="+JSON.stringify(a,null,2))}}var f}function _E(e,t,n,i){OT.apply(void 0,Object(r.__spread)([e,t,n],i))}function mE(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(16384&r.flags&&r.bindings&&r.bindings.length)return n}return null}function gE(e,t){for(var n=t;n<e.def.nodes.length;n++){var r=e.def.nodes[n];if(3&r.flags&&r.bindings&&r.bindings.length)return n}return null}var vE=function(){function e(e,t){this.view=e,this.nodeIndex=t,null==t&&(this.nodeIndex=t=0),this.nodeDef=e.def.nodes[t];for(var n=this.nodeDef,r=e;n&&0==(1&n.flags);)n=n.parent;if(!n)for(;!n&&r;)n=Fp(r),r=r.parent;this.elDef=n,this.elView=r}return Object.defineProperty(e.prototype,"elOrCompView",{get:function(){return pp(this.elView,this.elDef.nodeIndex).componentView||this.view},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"injector",{get:function(){return P_(this.elView,this.elDef)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){return this.elOrCompView.component},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.elOrCompView.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"providerTokens",{get:function(){var e=[];if(this.elDef)for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&e.push(n.provider.token),t+=n.childCount}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"references",{get:function(){var e={};if(this.elDef){bE(this.elView,this.elDef,e);for(var t=this.elDef.nodeIndex+1;t<=this.elDef.nodeIndex+this.elDef.childCount;t++){var n=this.elView.def.nodes[t];20224&n.flags&&bE(this.elView,n,e),t+=n.childCount}}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"componentRenderElement",{get:function(){var e=function(e){for(;e&&!Bp(e);)e=e.parent;return e.parent?pp(e.parent,Fp(e).nodeIndex):null}(this.elOrCompView);return e?e.renderElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderNode",{get:function(){return 2&this.nodeDef.flags?Np(this.view,this.nodeDef):Np(this.elView,this.elDef)},enumerable:!0,configurable:!0}),e.prototype.logError=function(e){for(var t,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];2&this.nodeDef.flags?(t=this.view.def,n=this.nodeDef.nodeIndex):(t=this.elView.def,n=this.elDef.nodeIndex);var a=yE(t,n),s=-1,u=function(){var t;return++s===a?(t=e.error).bind.apply(t,Object(r.__spread)([e],i)):bp};t.factory(u),s<a&&(e.error("Illegal state: the ViewDefinitionFactory did not call the logger!"),e.error.apply(e,Object(r.__spread)(i)))},e}();function yE(e,t){for(var n=-1,r=0;r<=t;r++)3&e.nodes[r].flags&&n++;return n}function bE(e,t,n){for(var r in t.references)n[r]=uT(e,t,t.references[r])}function TE(e,t,n,r){var i=aE,o=sE,a=uE;try{aE=e;var s=t.apply(n,r);return sE=o,uE=a,aE=i,s}catch(u){if(Pa(u)||!sE)throw u;throw function(e,t){return e instanceof Error||(e=new Error(e.toString())),lp(e,t),e}(u,EE())}}function EE(){return sE?new vE(sE,uE):null}var xE=function(){function e(e){this.delegate=e}return e.prototype.createRenderer=function(e,t){return new ME(this.delegate.createRenderer(e,t))},e.prototype.begin=function(){this.delegate.begin&&this.delegate.begin()},e.prototype.end=function(){this.delegate.end&&this.delegate.end()},e.prototype.whenRenderingDone=function(){return this.delegate.whenRenderingDone?this.delegate.whenRenderingDone():Promise.resolve(null)},e}(),ME=function(){function e(e){this.delegate=e,this.debugContextFactory=EE,this.data=this.delegate.data}return e.prototype.createDebugContext=function(e){return this.debugContextFactory(e)},e.prototype.destroyNode=function(e){!function(e){kb.delete(e.nativeNode)}(Gb(e)),this.delegate.destroyNode&&this.delegate.destroyNode(e)},e.prototype.destroy=function(){this.delegate.destroy()},e.prototype.createElement=function(e,t){var n=this.delegate.createElement(e,t),r=this.createDebugContext(n);if(r){var i=new Db(n,null,r);i.name=e,jb(i)}return n},e.prototype.createComment=function(e){var t=this.delegate.createComment(e),n=this.createDebugContext(t);return n&&jb(new Rb(t,null,n)),t},e.prototype.createText=function(e){var t=this.delegate.createText(e),n=this.createDebugContext(t);return n&&jb(new Rb(t,null,n)),t},e.prototype.appendChild=function(e,t){var n=Gb(e),r=Gb(t);n&&r&&n instanceof Db&&n.addChild(r),this.delegate.appendChild(e,t)},e.prototype.insertBefore=function(e,t,n){var r=Gb(e),i=Gb(t),o=Gb(n);r&&i&&r instanceof Db&&r.insertBefore(o,i),this.delegate.insertBefore(e,t,n)},e.prototype.removeChild=function(e,t){var n=Gb(e),r=Gb(t);n&&r&&n instanceof Db&&n.removeChild(r),this.delegate.removeChild(e,t)},e.prototype.selectRootElement=function(e,t){var n=this.delegate.selectRootElement(e,t),r=EE();return r&&jb(new Db(n,null,r)),n},e.prototype.setAttribute=function(e,t,n,r){var i=Gb(e);i&&i instanceof Db&&(i.attributes[r?r+":"+t:t]=n),this.delegate.setAttribute(e,t,n,r)},e.prototype.removeAttribute=function(e,t,n){var r=Gb(e);r&&r instanceof Db&&(r.attributes[n?n+":"+t:t]=null),this.delegate.removeAttribute(e,t,n)},e.prototype.addClass=function(e,t){var n=Gb(e);n&&n instanceof Db&&(n.classes[t]=!0),this.delegate.addClass(e,t)},e.prototype.removeClass=function(e,t){var n=Gb(e);n&&n instanceof Db&&(n.classes[t]=!1),this.delegate.removeClass(e,t)},e.prototype.setStyle=function(e,t,n,r){var i=Gb(e);i&&i instanceof Db&&(i.styles[t]=n),this.delegate.setStyle(e,t,n,r)},e.prototype.removeStyle=function(e,t,n){var r=Gb(e);r&&r instanceof Db&&(r.styles[t]=null),this.delegate.removeStyle(e,t,n)},e.prototype.setProperty=function(e,t,n){var r=Gb(e);r&&r instanceof Db&&(r.properties[t]=n),this.delegate.setProperty(e,t,n)},e.prototype.listen=function(e,t,n){if("string"!=typeof e){var r=Gb(e);r&&r.listeners.push(new Pb(t,n))}return this.delegate.listen(e,t,n)},e.prototype.parentNode=function(e){return this.delegate.parentNode(e)},e.prototype.nextSibling=function(e){return this.delegate.nextSibling(e)},e.prototype.setValue=function(e,t){return this.delegate.setValue(e,t)},e}();function AE(e){return GT(),yp.overrideProvider(e)}function SE(e,t){return GT(),yp.overrideComponentView(e,t)}function CE(){return GT(),yp.clearOverrides()}function PE(e,t,n){return new RE(e,t,n)}var RE=function(e){function t(t,n,r){var i=e.call(this)||this;return i.moduleType=t,i._bootstrapComponents=n,i._ngModuleDefFactory=r,i}return Object(r.__extends)(t,e),t.prototype.create=function(e){GT();var t=function(e){var t=Array.from(e.providers),n=Array.from(e.modules),r={};for(var i in e.providersByKey)r[i]=e.providersByKey[i];return{factory:e.factory,isRoot:e.isRoot,providers:t,modules:n,providersByKey:r}}(Yp(this._ngModuleDefFactory));return yp.createNgModuleRef(this.moduleType,e||ht.NULL,this._bootstrapComponents,t)},t}(gf)},CjzT:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-do",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}(n("wd/R"))},CoRJ:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ar-ma",{months:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),monthsShort:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062a\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0627\u062d\u062f_\u0627\u062a\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},week:{dow:6,doy:12}})}()},"D/JM":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),monthsParseExact:!0,weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] HH:mm",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] HH:mm",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] HH:mm",llll:"ddd, YYYY[ko] MMM D[a] HH:mm"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",ss:"%d segundo",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}()},DKTb:function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e})}n.d(t,"a",function(){return r})},"DKr+":function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={s:["thodde secondanim","thodde second"],ss:[e+" secondanim",e+" second"],m:["eka mintan","ek minute"],mm:[e+" mintanim",e+" mintam"],h:["eka voran","ek vor"],hh:[e+" voranim",e+" voram"],d:["eka disan","ek dis"],dd:[e+" disanim",e+" dis"],M:["eka mhoinean","ek mhoino"],MM:[e+" mhoineanim",e+" mhoine"],y:["eka vorsan","ek voros"],yy:[e+" vorsanim",e+" vorsam"]};return t?i[n][0]:i[n][1]}n("wd/R").defineLocale("gom-latn",{months:"Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr".split("_"),monthsShort:"Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son'var".split("_"),weekdaysShort:"Ait._Som._Mon._Bud._Bre._Suk._Son.".split("_"),weekdaysMin:"Ai_Sm_Mo_Bu_Br_Su_Sn".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A h:mm [vazta]",LTS:"A h:mm:ss [vazta]",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY A h:mm [vazta]",LLLL:"dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]",llll:"ddd, D MMM YYYY, A h:mm [vazta]"},calendar:{sameDay:"[Aiz] LT",nextDay:"[Faleam] LT",nextWeek:"[Ieta to] dddd[,] LT",lastDay:"[Kal] LT",lastWeek:"[Fatlo] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s adim",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}(er)/,ordinal:function(e,t){switch(t){case"D":return e+"er";default:case"M":case"Q":case"DDD":case"d":case"w":case"W":return e}},week:{dow:1,doy:4},meridiemParse:/rati|sokalli|donparam|sanje/,meridiemHour:function(e,t){return 12===e&&(e=0),"rati"===t?e<4?e:e+12:"sokalli"===t?e:"donparam"===t?e>12?e:e+12:"sanje"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"rati":e<12?"sokalli":e<16?"donparam":e<20?"sanje":"rati"}})}()},Dkky:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("fr-ch",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|e)/,ordinal:function(e,t){switch(t){default:case"M":case"Q":case"D":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}()},Dmvi:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}()},DoHr:function(e,t,n){!function(e){"use strict";var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'\xfcnc\xfc",4:"'\xfcnc\xfc",100:"'\xfcnc\xfc",6:"'nc\u0131",9:"'uncu",10:"'uncu",30:"'uncu",60:"'\u0131nc\u0131",90:"'\u0131nc\u0131"};e.defineLocale("tr",{months:"Ocak_\u015eubat_Mart_Nisan_May\u0131s_Haziran_Temmuz_A\u011fustos_Eyl\xfcl_Ekim_Kas\u0131m_Aral\u0131k".split("_"),monthsShort:"Oca_\u015eub_Mar_Nis_May_Haz_Tem_A\u011fu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal\u0131_\xc7ar\u015famba_Per\u015fembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_\xc7ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_\xc7a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bug\xfcn saat] LT",nextDay:"[yar\u0131n saat] LT",nextWeek:"[gelecek] dddd [saat] LT",lastDay:"[d\xfcn] LT",lastWeek:"[ge\xe7en] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s \xf6nce",s:"birka\xe7 saniye",ss:"%d saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir g\xfcn",dd:"%d g\xfcn",M:"bir ay",MM:"%d ay",y:"bir y\u0131l",yy:"%d y\u0131l"},ordinal:function(e,n){switch(n){case"d":case"D":case"Do":case"DD":return e;default:if(0===e)return e+"'\u0131nc\u0131";var r=e%10;return e+(t[r]||t[e%100-r]||t[e>=100?100:null])}},week:{dow:1,doy:7}})}(n("wd/R"))},DxQv:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),weekdaysShort:"s\xf8n_man_tir_ons_tor_fre_l\xf8r".split("_"),weekdaysMin:"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd [d.] D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"p\xe5 dddd [kl.] LT",lastDay:"[i g\xe5r kl.] LT",lastWeek:"[i] dddd[s kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f\xe5 sekunder",ss:"%d sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en m\xe5ned",MM:"%d m\xe5neder",y:"et \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},Dzi0:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY HH:mm",LLLL:"dddd, MMMM DD, YYYY HH:mm"},calendar:{sameDay:"LT [ngayong araw]",nextDay:"[Bukas ng] LT",nextWeek:"LT [sa susunod na] dddd",lastDay:"LT [kahapon]",lastWeek:"LT [noong nakaraang] dddd",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",ss:"%d segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}()},"E+lV":function(e,t,n){!function(e){"use strict";var t={words:{ss:["\u0441\u0435\u043a\u0443\u043d\u0434\u0430","\u0441\u0435\u043a\u0443\u043d\u0434\u0435","\u0441\u0435\u043a\u0443\u043d\u0434\u0438"],m:["\u0458\u0435\u0434\u0430\u043d \u043c\u0438\u043d\u0443\u0442","\u0458\u0435\u0434\u043d\u0435 \u043c\u0438\u043d\u0443\u0442\u0435"],mm:["\u043c\u0438\u043d\u0443\u0442","\u043c\u0438\u043d\u0443\u0442\u0435","\u043c\u0438\u043d\u0443\u0442\u0430"],h:["\u0458\u0435\u0434\u0430\u043d \u0441\u0430\u0442","\u0458\u0435\u0434\u043d\u043e\u0433 \u0441\u0430\u0442\u0430"],hh:["\u0441\u0430\u0442","\u0441\u0430\u0442\u0430","\u0441\u0430\u0442\u0438"],dd:["\u0434\u0430\u043d","\u0434\u0430\u043d\u0430","\u0434\u0430\u043d\u0430"],MM:["\u043c\u0435\u0441\u0435\u0446","\u043c\u0435\u0441\u0435\u0446\u0430","\u043c\u0435\u0441\u0435\u0446\u0438"],yy:["\u0433\u043e\u0434\u0438\u043d\u0430","\u0433\u043e\u0434\u0438\u043d\u0435","\u0433\u043e\u0434\u0438\u043d\u0430"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("sr-cyrl",{months:"\u0458\u0430\u043d\u0443\u0430\u0440_\u0444\u0435\u0431\u0440\u0443\u0430\u0440_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0458_\u0458\u0443\u043d_\u0458\u0443\u043b_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0431\u0430\u0440_\u043e\u043a\u0442\u043e\u0431\u0430\u0440_\u043d\u043e\u0432\u0435\u043c\u0431\u0430\u0440_\u0434\u0435\u0446\u0435\u043c\u0431\u0430\u0440".split("_"),monthsShort:"\u0458\u0430\u043d._\u0444\u0435\u0431._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u0458_\u0458\u0443\u043d_\u0458\u0443\u043b_\u0430\u0432\u0433._\u0441\u0435\u043f._\u043e\u043a\u0442._\u043d\u043e\u0432._\u0434\u0435\u0446.".split("_"),monthsParseExact:!0,weekdays:"\u043d\u0435\u0434\u0435\u0459\u0430_\u043f\u043e\u043d\u0435\u0434\u0435\u0459\u0430\u043a_\u0443\u0442\u043e\u0440\u0430\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0440\u0442\u0430\u043a_\u043f\u0435\u0442\u0430\u043a_\u0441\u0443\u0431\u043e\u0442\u0430".split("_"),weekdaysShort:"\u043d\u0435\u0434._\u043f\u043e\u043d._\u0443\u0442\u043e._\u0441\u0440\u0435._\u0447\u0435\u0442._\u043f\u0435\u0442._\u0441\u0443\u0431.".split("_"),weekdaysMin:"\u043d\u0435_\u043f\u043e_\u0443\u0442_\u0441\u0440_\u0447\u0435_\u043f\u0435_\u0441\u0443".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[\u0434\u0430\u043d\u0430\u0441 \u0443] LT",nextDay:"[\u0441\u0443\u0442\u0440\u0430 \u0443] LT",nextWeek:function(){switch(this.day()){case 0:return"[\u0443] [\u043d\u0435\u0434\u0435\u0459\u0443] [\u0443] LT";case 3:return"[\u0443] [\u0441\u0440\u0435\u0434\u0443] [\u0443] LT";case 6:return"[\u0443] [\u0441\u0443\u0431\u043e\u0442\u0443] [\u0443] LT";case 1:case 2:case 4:case 5:return"[\u0443] dddd [\u0443] LT"}},lastDay:"[\u0458\u0443\u0447\u0435 \u0443] LT",lastWeek:function(){return["[\u043f\u0440\u043e\u0448\u043b\u0435] [\u043d\u0435\u0434\u0435\u0459\u0435] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u043f\u043e\u043d\u0435\u0434\u0435\u0459\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u0443\u0442\u043e\u0440\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u0435] [\u0441\u0440\u0435\u0434\u0435] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u0447\u0435\u0442\u0432\u0440\u0442\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u043e\u0433] [\u043f\u0435\u0442\u043a\u0430] [\u0443] LT","[\u043f\u0440\u043e\u0448\u043b\u0435] [\u0441\u0443\u0431\u043e\u0442\u0435] [\u0443] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"\u0437\u0430 %s",past:"\u043f\u0440\u0435 %s",s:"\u043d\u0435\u043a\u043e\u043b\u0438\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434\u0438",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"\u0434\u0430\u043d",dd:t.translate,M:"\u043c\u0435\u0441\u0435\u0446",MM:t.translate,y:"\u0433\u043e\u0434\u0438\u043d\u0443",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n("wd/R"))},EOgW:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("th",{months:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21_\u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c_\u0e21\u0e35\u0e19\u0e32\u0e04\u0e21_\u0e40\u0e21\u0e29\u0e32\u0e22\u0e19_\u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21_\u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19_\u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21_\u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21_\u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19_\u0e15\u0e38\u0e25\u0e32\u0e04\u0e21_\u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19_\u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split("_"),monthsShort:"\u0e21.\u0e04._\u0e01.\u0e1e._\u0e21\u0e35.\u0e04._\u0e40\u0e21.\u0e22._\u0e1e.\u0e04._\u0e21\u0e34.\u0e22._\u0e01.\u0e04._\u0e2a.\u0e04._\u0e01.\u0e22._\u0e15.\u0e04._\u0e1e.\u0e22._\u0e18.\u0e04.".split("_"),monthsParseExact:!0,weekdays:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysShort:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c_\u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c_\u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23_\u0e1e\u0e38\u0e18_\u0e1e\u0e24\u0e2b\u0e31\u0e2a_\u0e28\u0e38\u0e01\u0e23\u0e4c_\u0e40\u0e2a\u0e32\u0e23\u0e4c".split("_"),weekdaysMin:"\u0e2d\u0e32._\u0e08._\u0e2d._\u0e1e._\u0e1e\u0e24._\u0e28._\u0e2a.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm",LLLL:"\u0e27\u0e31\u0e19dddd\u0e17\u0e35\u0e48 D MMMM YYYY \u0e40\u0e27\u0e25\u0e32 H:mm"},meridiemParse:/\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07|\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07/,isPM:function(e){return"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"===e},meridiem:function(e,t,n){return e<12?"\u0e01\u0e48\u0e2d\u0e19\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07":"\u0e2b\u0e25\u0e31\u0e07\u0e40\u0e17\u0e35\u0e48\u0e22\u0e07"},calendar:{sameDay:"[\u0e27\u0e31\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextDay:"[\u0e1e\u0e23\u0e38\u0e48\u0e07\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",nextWeek:"dddd[\u0e2b\u0e19\u0e49\u0e32 \u0e40\u0e27\u0e25\u0e32] LT",lastDay:"[\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e27\u0e32\u0e19\u0e19\u0e35\u0e49 \u0e40\u0e27\u0e25\u0e32] LT",lastWeek:"[\u0e27\u0e31\u0e19]dddd[\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27 \u0e40\u0e27\u0e25\u0e32] LT",sameElse:"L"},relativeTime:{future:"\u0e2d\u0e35\u0e01 %s",past:"%s\u0e17\u0e35\u0e48\u0e41\u0e25\u0e49\u0e27",s:"\u0e44\u0e21\u0e48\u0e01\u0e35\u0e48\u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",ss:"%d \u0e27\u0e34\u0e19\u0e32\u0e17\u0e35",m:"1 \u0e19\u0e32\u0e17\u0e35",mm:"%d \u0e19\u0e32\u0e17\u0e35",h:"1 \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",hh:"%d \u0e0a\u0e31\u0e48\u0e27\u0e42\u0e21\u0e07",d:"1 \u0e27\u0e31\u0e19",dd:"%d \u0e27\u0e31\u0e19",M:"1 \u0e40\u0e14\u0e37\u0e2d\u0e19",MM:"%d \u0e40\u0e14\u0e37\u0e2d\u0e19",y:"1 \u0e1b\u0e35",yy:"%d \u0e1b\u0e35"}})}()},"En8+":function(e,t,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(t,"a",function(){return i});var i=r()},FFOo:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n("mrSG"),i=n("2Bdj"),o=n("6ahw"),a=n("pugT"),s=n("L/V9"),u=n("iLxQ"),l=n("DKTb"),c=function(e){function t(n,r,i){var a=e.call(this)||this;switch(a.syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=o.a;break;case 1:if(!n){a.destination=o.a;break}if("object"==typeof n){n instanceof t?(a.syncErrorThrowable=n.syncErrorThrowable,a.destination=n,n.add(a)):(a.syncErrorThrowable=!0,a.destination=new h(a,n));break}default:a.syncErrorThrowable=!0,a.destination=new h(a,n,r,i)}return a}return r.__extends(t,e),t.prototype[s.a]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(a.a),h=function(e){function t(t,n,r,a){var s,u=e.call(this)||this;u._parentSubscriber=t;var l=u;return Object(i.a)(n)?s=n:n&&(s=n.next,r=n.error,a=n.complete,n!==o.a&&(l=Object.create(n),Object(i.a)(l.unsubscribe)&&u.add(l.unsubscribe.bind(l)),l.unsubscribe=u.unsubscribe.bind(u))),u._context=l,u._next=s,u._error=r,u._complete=a,u}return r.__extends(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;u.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=u.a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Object(l.a)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Object(l.a)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};u.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),u.a.useDeprecatedSynchronousErrorHandling)throw n;Object(l.a)(n)}},t.prototype.__tryOrSetError=function(e,t,n){if(!u.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return u.a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):(Object(l.a)(r),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(c)},Fxb1:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n("6blF"),i=n("+tJ4"),o=n("S5XQ"),a=n("u67D"),s=n("JcRv"),u=n("2ePl"),l=n("/WYv"),c=n("McSo"),h=n("En8+"),d=n("xTla"),f=function(e){if(e instanceof r.a)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[d.a])return Object(s.a)(e);if(Object(u.a)(e))return Object(i.a)(e);if(Object(l.a)(e))return Object(o.a)(e);if(e&&"function"==typeof e[h.a])return Object(a.a)(e);var t=Object(c.a)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},G0Uy:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("mt",{months:"Jannar_Frar_Marzu_April_Mejju_\u0120unju_Lulju_Awwissu_Settembru_Ottubru_Novembru_Di\u010bembru".split("_"),monthsShort:"Jan_Fra_Mar_Apr_Mej_\u0120un_Lul_Aww_Set_Ott_Nov_Di\u010b".split("_"),weekdays:"Il-\u0126add_It-Tnejn_It-Tlieta_L-Erbg\u0127a_Il-\u0126amis_Il-\u0120img\u0127a_Is-Sibt".split("_"),weekdaysShort:"\u0126ad_Tne_Tli_Erb_\u0126am_\u0120im_Sib".split("_"),weekdaysMin:"\u0126a_Tn_Tl_Er_\u0126a_\u0120i_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Illum fil-]LT",nextDay:"[G\u0127ada fil-]LT",nextWeek:"dddd [fil-]LT",lastDay:"[Il-biera\u0127 fil-]LT",lastWeek:"dddd [li g\u0127adda] [fil-]LT",sameElse:"L"},relativeTime:{future:"f\u2019 %s",past:"%s ilu",s:"ftit sekondi",ss:"%d sekondi",m:"minuta",mm:"%d minuti",h:"sieg\u0127a",hh:"%d sieg\u0127at",d:"\u0121urnata",dd:"%d \u0121ranet",M:"xahar",MM:"%d xhur",y:"sena",yy:"%d sni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}()},H8ED:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r,i;return"m"===n?t?"\u0445\u0432\u0456\u043b\u0456\u043d\u0430":"\u0445\u0432\u0456\u043b\u0456\u043d\u0443":"h"===n?t?"\u0433\u0430\u0434\u0437\u0456\u043d\u0430":"\u0433\u0430\u0434\u0437\u0456\u043d\u0443":e+" "+(r=+e,i={ss:t?"\u0441\u0435\u043a\u0443\u043d\u0434\u0430_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434":"\u0441\u0435\u043a\u0443\u043d\u0434\u0443_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434",mm:t?"\u0445\u0432\u0456\u043b\u0456\u043d\u0430_\u0445\u0432\u0456\u043b\u0456\u043d\u044b_\u0445\u0432\u0456\u043b\u0456\u043d":"\u0445\u0432\u0456\u043b\u0456\u043d\u0443_\u0445\u0432\u0456\u043b\u0456\u043d\u044b_\u0445\u0432\u0456\u043b\u0456\u043d",hh:t?"\u0433\u0430\u0434\u0437\u0456\u043d\u0430_\u0433\u0430\u0434\u0437\u0456\u043d\u044b_\u0433\u0430\u0434\u0437\u0456\u043d":"\u0433\u0430\u0434\u0437\u0456\u043d\u0443_\u0433\u0430\u0434\u0437\u0456\u043d\u044b_\u0433\u0430\u0434\u0437\u0456\u043d",dd:"\u0434\u0437\u0435\u043d\u044c_\u0434\u043d\u0456_\u0434\u0437\u0451\u043d",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u044b_\u043c\u0435\u0441\u044f\u0446\u0430\u045e",yy:"\u0433\u043e\u0434_\u0433\u0430\u0434\u044b_\u0433\u0430\u0434\u043e\u045e"}[n].split("_"),r%10==1&&r%100!=11?i[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?i[1]:i[2])}n("wd/R").defineLocale("be",{months:{format:"\u0441\u0442\u0443\u0434\u0437\u0435\u043d\u044f_\u043b\u044e\u0442\u0430\u0433\u0430_\u0441\u0430\u043a\u0430\u0432\u0456\u043a\u0430_\u043a\u0440\u0430\u0441\u0430\u0432\u0456\u043a\u0430_\u0442\u0440\u0430\u045e\u043d\u044f_\u0447\u044d\u0440\u0432\u0435\u043d\u044f_\u043b\u0456\u043f\u0435\u043d\u044f_\u0436\u043d\u0456\u045e\u043d\u044f_\u0432\u0435\u0440\u0430\u0441\u043d\u044f_\u043a\u0430\u0441\u0442\u0440\u044b\u0447\u043d\u0456\u043a\u0430_\u043b\u0456\u0441\u0442\u0430\u043f\u0430\u0434\u0430_\u0441\u043d\u0435\u0436\u043d\u044f".split("_"),standalone:"\u0441\u0442\u0443\u0434\u0437\u0435\u043d\u044c_\u043b\u044e\u0442\u044b_\u0441\u0430\u043a\u0430\u0432\u0456\u043a_\u043a\u0440\u0430\u0441\u0430\u0432\u0456\u043a_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u044d\u0440\u0432\u0435\u043d\u044c_\u043b\u0456\u043f\u0435\u043d\u044c_\u0436\u043d\u0456\u0432\u0435\u043d\u044c_\u0432\u0435\u0440\u0430\u0441\u0435\u043d\u044c_\u043a\u0430\u0441\u0442\u0440\u044b\u0447\u043d\u0456\u043a_\u043b\u0456\u0441\u0442\u0430\u043f\u0430\u0434_\u0441\u043d\u0435\u0436\u0430\u043d\u044c".split("_")},monthsShort:"\u0441\u0442\u0443\u0434_\u043b\u044e\u0442_\u0441\u0430\u043a_\u043a\u0440\u0430\u0441_\u0442\u0440\u0430\u0432_\u0447\u044d\u0440\u0432_\u043b\u0456\u043f_\u0436\u043d\u0456\u0432_\u0432\u0435\u0440_\u043a\u0430\u0441\u0442_\u043b\u0456\u0441\u0442_\u0441\u043d\u0435\u0436".split("_"),weekdays:{format:"\u043d\u044f\u0434\u0437\u0435\u043b\u044e_\u043f\u0430\u043d\u044f\u0434\u0437\u0435\u043b\u0430\u043a_\u0430\u045e\u0442\u043e\u0440\u0430\u043a_\u0441\u0435\u0440\u0430\u0434\u0443_\u0447\u0430\u0446\u0432\u0435\u0440_\u043f\u044f\u0442\u043d\u0456\u0446\u0443_\u0441\u0443\u0431\u043e\u0442\u0443".split("_"),standalone:"\u043d\u044f\u0434\u0437\u0435\u043b\u044f_\u043f\u0430\u043d\u044f\u0434\u0437\u0435\u043b\u0430\u043a_\u0430\u045e\u0442\u043e\u0440\u0430\u043a_\u0441\u0435\u0440\u0430\u0434\u0430_\u0447\u0430\u0446\u0432\u0435\u0440_\u043f\u044f\u0442\u043d\u0456\u0446\u0430_\u0441\u0443\u0431\u043e\u0442\u0430".split("_"),isFormat:/\[ ?[\u0423\u0443\u045e] ?(?:\u043c\u0456\u043d\u0443\u043b\u0443\u044e|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u0443\u044e)? ?\] ?dddd/},weekdaysShort:"\u043d\u0434_\u043f\u043d_\u0430\u0442_\u0441\u0440_\u0447\u0446_\u043f\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u043d\u0434_\u043f\u043d_\u0430\u0442_\u0441\u0440_\u0447\u0446_\u043f\u0442_\u0441\u0431".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., HH:mm",LLLL:"dddd, D MMMM YYYY \u0433., HH:mm"},calendar:{sameDay:"[\u0421\u0451\u043d\u043d\u044f \u045e] LT",nextDay:"[\u0417\u0430\u045e\u0442\u0440\u0430 \u045e] LT",lastDay:"[\u0423\u0447\u043e\u0440\u0430 \u045e] LT",nextWeek:function(){return"[\u0423] dddd [\u045e] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[\u0423 \u043c\u0456\u043d\u0443\u043b\u0443\u044e] dddd [\u045e] LT";case 1:case 2:case 4:return"[\u0423 \u043c\u0456\u043d\u0443\u043b\u044b] dddd [\u045e] LT"}},sameElse:"L"},relativeTime:{future:"\u043f\u0440\u0430\u0437 %s",past:"%s \u0442\u0430\u043c\u0443",s:"\u043d\u0435\u043a\u0430\u043b\u044c\u043a\u0456 \u0441\u0435\u043a\u0443\u043d\u0434",m:t,mm:t,h:t,hh:t,d:"\u0434\u0437\u0435\u043d\u044c",dd:t,M:"\u043c\u0435\u0441\u044f\u0446",MM:t,y:"\u0433\u043e\u0434",yy:t},meridiemParse:/\u043d\u043e\u0447\u044b|\u0440\u0430\u043d\u0456\u0446\u044b|\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430/,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0430\u0440\u0430)$/.test(e)},meridiem:function(e,t,n){return e<4?"\u043d\u043e\u0447\u044b":e<12?"\u0440\u0430\u043d\u0456\u0446\u044b":e<17?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u0430\u0440\u0430"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0456|\u044b|\u0433\u0430)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-\u044b":e+"-\u0456";case"D":return e+"-\u0433\u0430";default:return e}},week:{dow:1,doy:7}})}()},HP3h:function(e,t,n){!function(e){"use strict";var t={1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0"},n=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},r={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},i=function(e){return function(t,i,o,a){var s=n(t),u=r[e][n(t)];return 2===s&&(u=u[i?0:1]),u.replace(/%d/i,t)}},o=["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"];e.defineLocale("ar-ly",{months:o,monthsShort:o,weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/\u200fM/\u200fYYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return"\u0645"===e},meridiem:function(e,t,n){return e<12?"\u0635":"\u0645"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u064b\u0627 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0628\u0639\u062f %s",past:"\u0645\u0646\u0630 %s",s:i("s"),ss:i("s"),m:i("m"),mm:i("m"),h:i("h"),hh:i("h"),d:i("d"),dd:i("d"),M:i("M"),MM:i("M"),y:i("y"),yy:i("y")},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"\u060c")},week:{dow:6,doy:12}})}(n("wd/R"))},IBtZ:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ka",{months:{standalone:"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10d8_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10d8_\u10db\u10d0\u10e0\u10e2\u10d8_\u10d0\u10de\u10e0\u10d8\u10da\u10d8_\u10db\u10d0\u10d8\u10e1\u10d8_\u10d8\u10d5\u10dc\u10d8\u10e1\u10d8_\u10d8\u10d5\u10da\u10d8\u10e1\u10d8_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10dd_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10d8_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10d8_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10d8".split("_"),format:"\u10d8\u10d0\u10dc\u10d5\u10d0\u10e0\u10e1_\u10d7\u10d4\u10d1\u10d4\u10e0\u10d5\u10d0\u10da\u10e1_\u10db\u10d0\u10e0\u10e2\u10e1_\u10d0\u10de\u10e0\u10d8\u10da\u10d8\u10e1_\u10db\u10d0\u10d8\u10e1\u10e1_\u10d8\u10d5\u10dc\u10d8\u10e1\u10e1_\u10d8\u10d5\u10da\u10d8\u10e1\u10e1_\u10d0\u10d2\u10d5\u10d8\u10e1\u10e2\u10e1_\u10e1\u10d4\u10e5\u10e2\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10dd\u10e5\u10e2\u10dd\u10db\u10d1\u10d4\u10e0\u10e1_\u10dc\u10dd\u10d4\u10db\u10d1\u10d4\u10e0\u10e1_\u10d3\u10d4\u10d9\u10d4\u10db\u10d1\u10d4\u10e0\u10e1".split("_")},monthsShort:"\u10d8\u10d0\u10dc_\u10d7\u10d4\u10d1_\u10db\u10d0\u10e0_\u10d0\u10de\u10e0_\u10db\u10d0\u10d8_\u10d8\u10d5\u10dc_\u10d8\u10d5\u10da_\u10d0\u10d2\u10d5_\u10e1\u10d4\u10e5_\u10dd\u10e5\u10e2_\u10dc\u10dd\u10d4_\u10d3\u10d4\u10d9".split("_"),weekdays:{standalone:"\u10d9\u10d5\u10d8\u10e0\u10d0_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10d8_\u10e8\u10d0\u10d1\u10d0\u10d7\u10d8".split("_"),format:"\u10d9\u10d5\u10d8\u10e0\u10d0\u10e1_\u10dd\u10e0\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10e1\u10d0\u10db\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10dd\u10d7\u10ee\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10ee\u10e3\u10d7\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1_\u10de\u10d0\u10e0\u10d0\u10e1\u10d9\u10d4\u10d5\u10e1_\u10e8\u10d0\u10d1\u10d0\u10d7\u10e1".split("_"),isFormat:/(\u10ec\u10d8\u10dc\u10d0|\u10e8\u10d4\u10db\u10d3\u10d4\u10d2)/},weekdaysShort:"\u10d9\u10d5\u10d8_\u10dd\u10e0\u10e8_\u10e1\u10d0\u10db_\u10dd\u10d7\u10ee_\u10ee\u10e3\u10d7_\u10de\u10d0\u10e0_\u10e8\u10d0\u10d1".split("_"),weekdaysMin:"\u10d9\u10d5_\u10dd\u10e0_\u10e1\u10d0_\u10dd\u10d7_\u10ee\u10e3_\u10de\u10d0_\u10e8\u10d0".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[\u10d3\u10e6\u10d4\u10e1] LT[-\u10d6\u10d4]",nextDay:"[\u10ee\u10d5\u10d0\u10da] LT[-\u10d6\u10d4]",lastDay:"[\u10d2\u10e3\u10e8\u10d8\u10dc] LT[-\u10d6\u10d4]",nextWeek:"[\u10e8\u10d4\u10db\u10d3\u10d4\u10d2] dddd LT[-\u10d6\u10d4]",lastWeek:"[\u10ec\u10d8\u10dc\u10d0] dddd LT-\u10d6\u10d4",sameElse:"L"},relativeTime:{future:function(e){return/(\u10ec\u10d0\u10db\u10d8|\u10ec\u10e3\u10d7\u10d8|\u10e1\u10d0\u10d0\u10d7\u10d8|\u10ec\u10d4\u10da\u10d8)/.test(e)?e.replace(/\u10d8$/,"\u10e8\u10d8"):e+"\u10e8\u10d8"},past:function(e){return/(\u10ec\u10d0\u10db\u10d8|\u10ec\u10e3\u10d7\u10d8|\u10e1\u10d0\u10d0\u10d7\u10d8|\u10d3\u10e6\u10d4|\u10d7\u10d5\u10d4)/.test(e)?e.replace(/(\u10d8|\u10d4)$/,"\u10d8\u10e1 \u10ec\u10d8\u10dc"):/\u10ec\u10d4\u10da\u10d8/.test(e)?e.replace(/\u10ec\u10d4\u10da\u10d8$/,"\u10ec\u10da\u10d8\u10e1 \u10ec\u10d8\u10dc"):void 0},s:"\u10e0\u10d0\u10db\u10d3\u10d4\u10dc\u10d8\u10db\u10d4 \u10ec\u10d0\u10db\u10d8",ss:"%d \u10ec\u10d0\u10db\u10d8",m:"\u10ec\u10e3\u10d7\u10d8",mm:"%d \u10ec\u10e3\u10d7\u10d8",h:"\u10e1\u10d0\u10d0\u10d7\u10d8",hh:"%d \u10e1\u10d0\u10d0\u10d7\u10d8",d:"\u10d3\u10e6\u10d4",dd:"%d \u10d3\u10e6\u10d4",M:"\u10d7\u10d5\u10d4",MM:"%d \u10d7\u10d5\u10d4",y:"\u10ec\u10d4\u10da\u10d8",yy:"%d \u10ec\u10d4\u10da\u10d8"},dayOfMonthOrdinalParse:/0|1-\u10da\u10d8|\u10db\u10d4-\d{1,2}|\d{1,2}-\u10d4/,ordinal:function(e){return 0===e?e:1===e?e+"-\u10da\u10d8":e<20||e<=100&&e%20==0||e%100==0?"\u10db\u10d4-"+e:e+"-\u10d4"},week:{dow:1,doy:7}})}()},IUTb:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("6blF"),i=n("pugT"),o=n("+tJ4");function a(e,t){return new r.a(t?function(n){var r=new i.a,o=0;return r.add(t.schedule(function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()})),r}:Object(o.a)(e))}},Ip0R:function(e,t,n){"use strict";n.r(t),n.d(t,"\u0275angular_packages_common_common_c",function(){return _t}),n.d(t,"\u0275angular_packages_common_common_h",function(){return je}),n.d(t,"\u0275angular_packages_common_common_g",function(){return Ve}),n.d(t,"\u0275angular_packages_common_common_f",function(){return Ue}),n.d(t,"\u0275angular_packages_common_common_k",function(){return ct}),n.d(t,"\u0275angular_packages_common_common_j",function(){return ut}),n.d(t,"\u0275angular_packages_common_common_i",function(){return st}),n.d(t,"\u0275angular_packages_common_common_a",function(){return Me}),n.d(t,"\u0275angular_packages_common_common_b",function(){return Pe}),n.d(t,"\u0275angular_packages_common_common_e",function(){return Ut}),n.d(t,"\u0275angular_packages_common_common_d",function(){return un}),n.d(t,"\u0275registerLocaleData",function(){return Re}),n.d(t,"registerLocaleData",function(){return Re}),n.d(t,"formatDate",function(){return q}),n.d(t,"formatCurrency",function(){return ye}),n.d(t,"formatNumber",function(){return Te}),n.d(t,"formatPercent",function(){return be}),n.d(t,"NgLocaleLocalization",function(){return Ce}),n.d(t,"NgLocalization",function(){return Ae}),n.d(t,"Plural",function(){return _}),n.d(t,"NumberFormatStyle",function(){return p}),n.d(t,"FormStyle",function(){return m}),n.d(t,"TranslationWidth",function(){return g}),n.d(t,"FormatWidth",function(){return v}),n.d(t,"NumberSymbol",function(){return y}),n.d(t,"WeekDay",function(){return b}),n.d(t,"getNumberOfCurrencyDigits",function(){return z}),n.d(t,"getCurrencySymbol",function(){return G}),n.d(t,"getLocaleDayPeriods",function(){return E}),n.d(t,"getLocaleDayNames",function(){return x}),n.d(t,"getLocaleMonthNames",function(){return M}),n.d(t,"getLocaleId",function(){return T}),n.d(t,"getLocaleEraNames",function(){return A}),n.d(t,"getLocaleWeekEndRange",function(){return C}),n.d(t,"getLocaleFirstDayOfWeek",function(){return S}),n.d(t,"getLocaleDateFormat",function(){return P}),n.d(t,"getLocaleDateTimeFormat",function(){return D}),n.d(t,"getLocaleExtraDayPeriodRules",function(){return B}),n.d(t,"getLocaleExtraDayPeriods",function(){return k}),n.d(t,"getLocalePluralCase",function(){return F}),n.d(t,"getLocaleTimeFormat",function(){return R}),n.d(t,"getLocaleNumberSymbol",function(){return O}),n.d(t,"getLocaleNumberFormat",function(){return w}),n.d(t,"getLocaleCurrencyName",function(){return I}),n.d(t,"getLocaleCurrencySymbol",function(){return L}),n.d(t,"\u0275parseCookieValue",function(){return De}),n.d(t,"CommonModule",function(){return ln}),n.d(t,"DeprecatedI18NPipesModule",function(){return cn}),n.d(t,"NgClass",function(){return He}),n.d(t,"NgClassBase",function(){return Ye}),n.d(t,"NgForOf",function(){return Ke}),n.d(t,"NgForOfContext",function(){return Xe}),n.d(t,"NgIf",function(){return qe}),n.d(t,"NgIfContext",function(){return Ze}),n.d(t,"NgPlural",function(){return rt}),n.d(t,"NgPluralCase",function(){return it}),n.d(t,"NgStyle",function(){return ft}),n.d(t,"NgStyleBase",function(){return dt}),n.d(t,"NgSwitch",function(){return et}),n.d(t,"NgSwitchCase",function(){return tt}),n.d(t,"NgSwitchDefault",function(){return nt}),n.d(t,"NgTemplateOutlet",function(){return pt}),n.d(t,"NgComponentOutlet",function(){return We}),n.d(t,"DOCUMENT",function(){return hn}),n.d(t,"AsyncPipe",function(){return zt}),n.d(t,"DatePipe",function(){return Kt}),n.d(t,"I18nPluralPipe",function(){return qt}),n.d(t,"I18nSelectPipe",function(){return Zt}),n.d(t,"JsonPipe",function(){return Jt}),n.d(t,"LowerCasePipe",function(){return Yt}),n.d(t,"CurrencyPipe",function(){return rn}),n.d(t,"DecimalPipe",function(){return tn}),n.d(t,"PercentPipe",function(){return nn}),n.d(t,"SlicePipe",function(){return sn}),n.d(t,"UpperCasePipe",function(){return Xt}),n.d(t,"TitleCasePipe",function(){return Wt}),n.d(t,"KeyValuePipe",function(){return $t}),n.d(t,"DeprecatedDatePipe",function(){return Lt}),n.d(t,"DeprecatedCurrencyPipe",function(){return kt}),n.d(t,"DeprecatedDecimalPipe",function(){return Nt}),n.d(t,"DeprecatedPercentPipe",function(){return Bt}),n.d(t,"\u0275PLATFORM_BROWSER_ID",function(){return dn}),n.d(t,"\u0275PLATFORM_SERVER_ID",function(){return fn}),n.d(t,"\u0275PLATFORM_WORKER_APP_ID",function(){return pn}),n.d(t,"\u0275PLATFORM_WORKER_UI_ID",function(){return _n}),n.d(t,"isPlatformBrowser",function(){return mn}),n.d(t,"isPlatformServer",function(){return gn}),n.d(t,"isPlatformWorkerApp",function(){return vn}),n.d(t,"isPlatformWorkerUi",function(){return yn}),n.d(t,"VERSION",function(){return bn}),n.d(t,"ViewportScroller",function(){return Tn}),n.d(t,"\u0275NullViewportScroller",function(){return xn}),n.d(t,"\u0275NgClassImplProvider__POST_R3__",function(){return Ge}),n.d(t,"\u0275NgClassR2Impl",function(){return ke}),n.d(t,"\u0275NgClassImpl",function(){return Be}),n.d(t,"\u0275NgStyleImplProvider__POST_R3__",function(){return lt}),n.d(t,"\u0275NgStyleR2Impl",function(){return at}),n.d(t,"\u0275NgStyleImpl",function(){return ot}),n.d(t,"\u0275ngStyleDirectiveDef__POST_R3__",function(){return ht}),n.d(t,"\u0275ngClassDirectiveDef__POST_R3__",function(){return ze}),n.d(t,"PlatformLocation",function(){return o}),n.d(t,"LOCATION_INITIALIZED",function(){return a}),n.d(t,"LocationStrategy",function(){return s}),n.d(t,"APP_BASE_HREF",function(){return u}),n.d(t,"HashLocationStrategy",function(){return h}),n.d(t,"PathLocationStrategy",function(){return d}),n.d(t,"Location",function(){return l});var r=n("CcnG"),i=n("mrSG"),o=function(){return function(){}}(),a=new r.InjectionToken("Location Initialized"),s=function(){return function(){}}(),u=new r.InjectionToken("appBaseHref"),l=function(){function e(e,n){var i=this;this._subject=new r.EventEmitter,this._urlChangeListeners=[],this._platformStrategy=e;var o=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=t.stripTrailingSlash(c(o)),this._platformStrategy.onPopState(function(e){i._subject.emit({url:i.path(!0),pop:!0,state:e.state,type:e.type})})}var t;return t=e,e.prototype.path=function(e){return void 0===e&&(e=!1),this.normalize(this._platformStrategy.path(e))},e.prototype.getState=function(){return this._platformLocation.getState()},e.prototype.isCurrentPathEqualTo=function(e,n){return void 0===n&&(n=""),this.path()==this.normalize(e+t.normalizeQueryParams(n))},e.prototype.normalize=function(e){return t.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,c(e)))},e.prototype.prepareExternalUrl=function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)},e.prototype.go=function(e,n,r){void 0===n&&(n=""),void 0===r&&(r=null),this._platformStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)},e.prototype.replaceState=function(e,n,r){void 0===n&&(n=""),void 0===r&&(r=null),this._platformStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+t.normalizeQueryParams(n)),r)},e.prototype.forward=function(){this._platformStrategy.forward()},e.prototype.back=function(){this._platformStrategy.back()},e.prototype.onUrlChange=function(e){var t=this;this._urlChangeListeners.push(e),this.subscribe(function(e){t._notifyUrlChangeListeners(e.url,e.state)})},e.prototype._notifyUrlChangeListeners=function(e,t){void 0===e&&(e=""),this._urlChangeListeners.forEach(function(n){return n(e,t)})},e.prototype.subscribe=function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})},e.normalizeQueryParams=function(e){return e&&"?"!==e[0]?"?"+e:e},e.joinWithSlash=function(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t},e.stripTrailingSlash=function(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)},e}();function c(e){return e.replace(/\/index.html$/,"")}var h=function(e){function t(t,n){var r=e.call(this)||this;return r._platformLocation=t,r._baseHref="",null!=n&&(r._baseHref=n),r}return Object(i.__extends)(t,e),t.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},t.prototype.getBaseHref=function(){return this._baseHref},t.prototype.path=function(e){void 0===e&&(e=!1);var t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t},t.prototype.prepareExternalUrl=function(e){var t=l.joinWithSlash(this._baseHref,e);return t.length>0?"#"+t:t},t.prototype.pushState=function(e,t,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)},t.prototype.replaceState=function(e,t,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)},t.prototype.forward=function(){this._platformLocation.forward()},t.prototype.back=function(){this._platformLocation.back()},t}(s),d=function(e){function t(t,n){var r=e.call(this)||this;if(r._platformLocation=t,null==n&&(n=r._platformLocation.getBaseHrefFromDOM()),null==n)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return r._baseHref=n,r}return Object(i.__extends)(t,e),t.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},t.prototype.getBaseHref=function(){return this._baseHref},t.prototype.prepareExternalUrl=function(e){return l.joinWithSlash(this._baseHref,e)},t.prototype.path=function(e){void 0===e&&(e=!1);var t=this._platformLocation.pathname+l.normalizeQueryParams(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?""+t+n:t},t.prototype.pushState=function(e,t,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));this._platformLocation.pushState(e,t,i)},t.prototype.replaceState=function(e,t,n,r){var i=this.prepareExternalUrl(n+l.normalizeQueryParams(r));this._platformLocation.replaceState(e,t,i)},t.prototype.forward=function(){this._platformLocation.forward()},t.prototype.back=function(){this._platformLocation.back()},t}(s),f={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,0],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",0],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",0],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",0],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",0],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",0],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",0],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,0],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UZS:[void 0,void 0,0],VEF:[void 0,"Bs"],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},p=function(e){return e[e.Decimal=0]="Decimal",e[e.Percent=1]="Percent",e[e.Currency=2]="Currency",e[e.Scientific=3]="Scientific",e}({}),_=function(e){return e[e.Zero=0]="Zero",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Few=3]="Few",e[e.Many=4]="Many",e[e.Other=5]="Other",e}({}),m=function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e}({}),g=function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e}({}),v=function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e}({}),y=function(e){return e[e.Decimal=0]="Decimal",e[e.Group=1]="Group",e[e.List=2]="List",e[e.PercentSign=3]="PercentSign",e[e.PlusSign=4]="PlusSign",e[e.MinusSign=5]="MinusSign",e[e.Exponential=6]="Exponential",e[e.SuperscriptingExponent=7]="SuperscriptingExponent",e[e.PerMille=8]="PerMille",e[e[1/0]=9]="Infinity",e[e.NaN=10]="NaN",e[e.TimeSeparator=11]="TimeSeparator",e[e.CurrencyDecimal=12]="CurrencyDecimal",e[e.CurrencyGroup=13]="CurrencyGroup",e}({}),b=function(e){return e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e}({});function T(e){return Object(r["\u0275findLocaleData"])(e)[r["\u0275LocaleDataIndex"].LocaleId]}function E(e,t,n){var i=Object(r["\u0275findLocaleData"])(e),o=U([i[r["\u0275LocaleDataIndex"].DayPeriodsFormat],i[r["\u0275LocaleDataIndex"].DayPeriodsStandalone]],t);return U(o,n)}function x(e,t,n){var i=Object(r["\u0275findLocaleData"])(e),o=U([i[r["\u0275LocaleDataIndex"].DaysFormat],i[r["\u0275LocaleDataIndex"].DaysStandalone]],t);return U(o,n)}function M(e,t,n){var i=Object(r["\u0275findLocaleData"])(e),o=U([i[r["\u0275LocaleDataIndex"].MonthsFormat],i[r["\u0275LocaleDataIndex"].MonthsStandalone]],t);return U(o,n)}function A(e,t){return U(Object(r["\u0275findLocaleData"])(e)[r["\u0275LocaleDataIndex"].Eras],t)}function S(e){return Object(r["\u0275findLocaleData"])(e)[r["\u0275LocaleDataIndex"].FirstDayOfWeek]}function C(e){return Object(r["\u0275findLocaleData"])(e)[r["\u0275LocaleDataIndex"].WeekendRange]}function P(e,t){return U(Object(r["\u0275findLocaleData"])(e)[r["\u0275LocaleDataIndex"].DateFormat],t)}function R(e,t){return U(Object(r["\u0275findLocaleData"])(e)[r["\u0275LocaleDataIndex"].TimeFormat],t)}function D(e,t){return U(Object(r["\u0275findLocaleData"])(e)[r["\u0275LocaleDataIndex"].DateTimeFormat],t)}function O(e,t){var n=Object(r["\u0275findLocaleData"])(e),i=n[r["\u0275LocaleDataIndex"].NumberSymbols][t];if(void 0===i){if(t===y.CurrencyDecimal)return n[r["\u0275LocaleDataIndex"].NumberSymbols][y.Decimal];if(t===y.CurrencyGroup)return n[r["\u0275LocaleDataIndex"].NumberSymbols][y.Group]}return i}function w(e,t){return Object(r["\u0275findLocaleData"])(e)[r["\u0275LocaleDataIndex"].NumberFormats][t]}function L(e){return Object(r["\u0275findLocaleData"])(e)[r["\u0275LocaleDataIndex"].CurrencySymbol]||null}function I(e){return Object(r["\u0275findLocaleData"])(e)[r["\u0275LocaleDataIndex"].CurrencyName]||null}var F=r["\u0275getLocalePluralCase"];function N(e){if(!e[r["\u0275LocaleDataIndex"].ExtraData])throw new Error('Missing extra locale data for the locale "'+e[r["\u0275LocaleDataIndex"].LocaleId]+'". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.')}function B(e){var t=Object(r["\u0275findLocaleData"])(e);return N(t),(t[r["\u0275LocaleDataIndex"].ExtraData][2]||[]).map(function(e){return"string"==typeof e?V(e):[V(e[0]),V(e[1])]})}function k(e,t,n){var i=Object(r["\u0275findLocaleData"])(e);N(i);var o=U([i[r["\u0275LocaleDataIndex"].ExtraData][0],i[r["\u0275LocaleDataIndex"].ExtraData][1]],t)||[];return U(o,n)||[]}function U(e,t){for(var n=t;n>-1;n--)if(void 0!==e[n])return e[n];throw new Error("Locale data API: locale data undefined")}function V(e){var t=Object(i.__read)(e.split(":"),2);return{hours:+t[0],minutes:+t[1]}}function G(e,t,n){void 0===n&&(n="en");var i=function(e){return Object(r["\u0275findLocaleData"])(e)[r["\u0275LocaleDataIndex"].Currencies]}(n)[e]||f[e]||[],o=i[1];return"narrow"===t&&"string"==typeof o?o:i[0]||e}var j=2;function z(e){var t,n=f[e];return n&&(t=n[2]),"number"==typeof t?t:j}var Y=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,H={},W=/((?:[^GyMLwWdEabBhHmsSzZO']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,X=function(e){return e[e.Short=0]="Short",e[e.ShortGMT=1]="ShortGMT",e[e.Long=2]="Long",e[e.Extended=3]="Extended",e}({}),K=function(e){return e[e.FullYear=0]="FullYear",e[e.Month=1]="Month",e[e.Date=2]="Date",e[e.Hours=3]="Hours",e[e.Minutes=4]="Minutes",e[e.Seconds=5]="Seconds",e[e.FractionalSeconds=6]="FractionalSeconds",e[e.Day=7]="Day",e}({}),Q=function(e){return e[e.DayPeriods=0]="DayPeriods",e[e.Days=1]="Days",e[e.Months=2]="Months",e[e.Eras=3]="Eras",e}({});function q(e,t,n,r){var o=function(e){if(ue(e))return e;if("number"==typeof e&&!isNaN(e))return new Date(e);if("string"==typeof e){e=e.trim();var t,n=parseFloat(e);if(!isNaN(e-n))return new Date(n);if(/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var r=Object(i.__read)(e.split("-").map(function(e){return+e}),3);return new Date(r[0],r[1]-1,r[2])}if(t=e.match(Y))return se(t)}var o=new Date(e);if(!ue(o))throw new Error('Unable to convert "'+e+'" into a date');return o}(e);t=function e(t,n){var r=T(t);if(H[r]=H[r]||{},H[r][n])return H[r][n];var i="";switch(n){case"shortDate":i=P(t,v.Short);break;case"mediumDate":i=P(t,v.Medium);break;case"longDate":i=P(t,v.Long);break;case"fullDate":i=P(t,v.Full);break;case"shortTime":i=R(t,v.Short);break;case"mediumTime":i=R(t,v.Medium);break;case"longTime":i=R(t,v.Long);break;case"fullTime":i=R(t,v.Full);break;case"short":var o=e(t,"shortTime"),a=e(t,"shortDate");i=Z(D(t,v.Short),[o,a]);break;case"medium":var s=e(t,"mediumTime"),u=e(t,"mediumDate");i=Z(D(t,v.Medium),[s,u]);break;case"long":var l=e(t,"longTime"),c=e(t,"longDate");i=Z(D(t,v.Long),[l,c]);break;case"full":var h=e(t,"fullTime"),d=e(t,"fullDate");i=Z(D(t,v.Full),[h,d])}return i&&(H[r][n]=i),i}(n,t)||t;for(var a,s=[];t;){if(!(a=W.exec(t))){s.push(t);break}var u=(s=s.concat(a.slice(1))).pop();if(!u)break;t=u}var l=o.getTimezoneOffset();r&&(l=ae(r,l),o=function(e,t,n){var r=e.getTimezoneOffset();return function(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}(e,-1*(ae(t,r)-r))}(o,r));var c="";return s.forEach(function(e){var t=function(e){if(oe[e])return oe[e];var t;switch(e){case"G":case"GG":case"GGG":t=ee(Q.Eras,g.Abbreviated);break;case"GGGG":t=ee(Q.Eras,g.Wide);break;case"GGGGG":t=ee(Q.Eras,g.Narrow);break;case"y":t=$(K.FullYear,1,0,!1,!0);break;case"yy":t=$(K.FullYear,2,0,!0,!0);break;case"yyy":t=$(K.FullYear,3,0,!1,!0);break;case"yyyy":t=$(K.FullYear,4,0,!1,!0);break;case"M":case"L":t=$(K.Month,1,1);break;case"MM":case"LL":t=$(K.Month,2,1);break;case"MMM":t=ee(Q.Months,g.Abbreviated);break;case"MMMM":t=ee(Q.Months,g.Wide);break;case"MMMMM":t=ee(Q.Months,g.Narrow);break;case"LLL":t=ee(Q.Months,g.Abbreviated,m.Standalone);break;case"LLLL":t=ee(Q.Months,g.Wide,m.Standalone);break;case"LLLLL":t=ee(Q.Months,g.Narrow,m.Standalone);break;case"w":t=ie(1);break;case"ww":t=ie(2);break;case"W":t=ie(1,!0);break;case"d":t=$(K.Date,1);break;case"dd":t=$(K.Date,2);break;case"E":case"EE":case"EEE":t=ee(Q.Days,g.Abbreviated);break;case"EEEE":t=ee(Q.Days,g.Wide);break;case"EEEEE":t=ee(Q.Days,g.Narrow);break;case"EEEEEE":t=ee(Q.Days,g.Short);break;case"a":case"aa":case"aaa":t=ee(Q.DayPeriods,g.Abbreviated);break;case"aaaa":t=ee(Q.DayPeriods,g.Wide);break;case"aaaaa":t=ee(Q.DayPeriods,g.Narrow);break;case"b":case"bb":case"bbb":t=ee(Q.DayPeriods,g.Abbreviated,m.Standalone,!0);break;case"bbbb":t=ee(Q.DayPeriods,g.Wide,m.Standalone,!0);break;case"bbbbb":t=ee(Q.DayPeriods,g.Narrow,m.Standalone,!0);break;case"B":case"BB":case"BBB":t=ee(Q.DayPeriods,g.Abbreviated,m.Format,!0);break;case"BBBB":t=ee(Q.DayPeriods,g.Wide,m.Format,!0);break;case"BBBBB":t=ee(Q.DayPeriods,g.Narrow,m.Format,!0);break;case"h":t=$(K.Hours,1,-12);break;case"hh":t=$(K.Hours,2,-12);break;case"H":t=$(K.Hours,1);break;case"HH":t=$(K.Hours,2);break;case"m":t=$(K.Minutes,1);break;case"mm":t=$(K.Minutes,2);break;case"s":t=$(K.Seconds,1);break;case"ss":t=$(K.Seconds,2);break;case"S":t=$(K.FractionalSeconds,1);break;case"SS":t=$(K.FractionalSeconds,2);break;case"SSS":t=$(K.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=te(X.Short);break;case"ZZZZZ":t=te(X.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=te(X.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=te(X.Long);break;default:return null}return oe[e]=t,t}(e);c+=t?t(o,n,l):"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Z(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e}function J(e,t,n,r,i){void 0===n&&(n="-");var o="";(e<0||i&&e<=0)&&(i?e=1-e:(e=-e,o=n));for(var a=String(e);a.length<t;)a="0"+a;return r&&(a=a.substr(a.length-t)),o+a}function $(e,t,n,r,i){return void 0===n&&(n=0),void 0===r&&(r=!1),void 0===i&&(i=!1),function(o,a){var s,u=function(e,t){switch(e){case K.FullYear:return t.getFullYear();case K.Month:return t.getMonth();case K.Date:return t.getDate();case K.Hours:return t.getHours();case K.Minutes:return t.getMinutes();case K.Seconds:return t.getSeconds();case K.FractionalSeconds:return t.getMilliseconds();case K.Day:return t.getDay();default:throw new Error('Unknown DateType value "'+e+'".')}}(e,o);if((n>0||u>-n)&&(u+=n),e===K.Hours)0===u&&-12===n&&(u=12);else if(e===K.FractionalSeconds)return s=t,J(u,3).substr(0,s);var l=O(a,y.MinusSign);return J(u,t,l,r,i)}}function ee(e,t,n,r){return void 0===n&&(n=m.Format),void 0===r&&(r=!1),function(i,o){return function(e,t,n,r,i,o){switch(n){case Q.Months:return M(t,i,r)[e.getMonth()];case Q.Days:return x(t,i,r)[e.getDay()];case Q.DayPeriods:var a=e.getHours(),s=e.getMinutes();if(o){var u,l=B(t),c=k(t,i,r);if(l.forEach(function(e,t){if(Array.isArray(e)){var n=e[0],r=e[1],i=r.hours;a>=n.hours&&s>=n.minutes&&(a<i||a===i&&s<r.minutes)&&(u=c[t])}else e.hours===a&&e.minutes===s&&(u=c[t])}),u)return u}return E(t,i,r)[a<12?0:1];case Q.Eras:return A(t,r)[e.getFullYear()<=0?0:1];default:throw new Error("unexpected translation type "+n)}}(i,o,e,t,n,r)}}function te(e){return function(t,n,r){var i=-1*r,o=O(n,y.MinusSign),a=i>0?Math.floor(i/60):Math.ceil(i/60);switch(e){case X.Short:return(i>=0?"+":"")+J(a,2,o)+J(Math.abs(i%60),2,o);case X.ShortGMT:return"GMT"+(i>=0?"+":"")+J(a,1,o);case X.Long:return"GMT"+(i>=0?"+":"")+J(a,2,o)+":"+J(Math.abs(i%60),2,o);case X.Extended:return 0===r?"Z":(i>=0?"+":"")+J(a,2,o)+":"+J(Math.abs(i%60),2,o);default:throw new Error('Unknown zone width "'+e+'"')}}}var ne=0,re=4;function ie(e,t){return void 0===t&&(t=!1),function(n,r){var i,o,a,s;if(t){var u=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,l=n.getDate();i=1+Math.floor((l+u)/7)}else{var c=(a=n.getFullYear(),s=new Date(a,ne,1).getDay(),new Date(a,0,1+(s<=re?re:re+7)-s)),h=(o=n,new Date(o.getFullYear(),o.getMonth(),o.getDate()+(re-o.getDay()))).getTime()-c.getTime();i=1+Math.round(h/6048e5)}return J(i,e,O(r,y.MinusSign))}}var oe={};function ae(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function se(e){var t=new Date(0),n=0,r=0,i=e[8]?t.setUTCFullYear:t.setFullYear,o=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),i.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));var a=Number(e[4]||0)-n,s=Number(e[5]||0)-r,u=Number(e[6]||0),l=Math.round(1e3*parseFloat("0."+(e[7]||0)));return o.call(t,a,s,u,l),t}function ue(e){return e instanceof Date&&!isNaN(e.valueOf())}var le=/^(\d+)?\.((\d+)(-(\d+))?)?$/,ce=22,he=".",de="0",fe=";",pe=",",_e="#",me="\xa4",ge="%";function ve(e,t,n,r,i,o,a){void 0===a&&(a=!1);var s="",u=!1;if(isFinite(e)){var l=function(t){var n,r,i,o,a,s=Math.abs(e)+"",u=0;for((r=s.indexOf(he))>-1&&(s=s.replace(he,"")),(i=s.search(/e/i))>0?(r<0&&(r=i),r+=+s.slice(i+1),s=s.substring(0,i)):r<0&&(r=s.length),i=0;s.charAt(i)===de;i++);if(i===(a=s.length))n=[0],r=1;else{for(a--;s.charAt(a)===de;)a--;for(r-=i,n=[],o=0;i<=a;i++,o++)n[o]=Number(s.charAt(i))}return r>ce&&(n=n.splice(0,ce-1),u=r-1,r=1),{digits:n,exponent:u,integerLen:r}}();a&&(l=function(e){if(0===e.digits[0])return e;var t=e.digits.length-e.integerLen;return e.exponent?e.exponent+=2:(0===t?e.digits.push(0,0):1===t&&e.digits.push(0),e.integerLen+=2),e}(l));var c=t.minInt,h=t.minFrac,d=t.maxFrac;if(o){var f=o.match(le);if(null===f)throw new Error(o+" is not a valid digit info");var p=f[1],_=f[3],m=f[5];null!=p&&(c=xe(p)),null!=_&&(h=xe(_)),null!=m?d=xe(m):null!=_&&h>d&&(d=h)}!function(e,t,n){if(t>n)throw new Error("The minimum number of digits after fraction ("+t+") is higher than the maximum ("+n+").");var r=e.digits,i=r.length-e.integerLen,o=Math.min(Math.max(t,i),n),a=o+e.integerLen,s=r[a];if(a>0){r.splice(Math.max(e.integerLen,a));for(var u=a;u<r.length;u++)r[u]=0}else{i=Math.max(0,i),e.integerLen=1,r.length=Math.max(1,a=o+1),r[0]=0;for(var l=1;l<a;l++)r[l]=0}if(s>=5)if(a-1<0){for(var c=0;c>a;c--)r.unshift(0),e.integerLen++;r.unshift(1),e.integerLen++}else r[a-1]++;for(;i<Math.max(0,o);i++)r.push(0);var h=0!==o,d=t+e.integerLen,f=r.reduceRight(function(e,t,n,r){return r[n]=(t+=e)<10?t:t-10,h&&(0===r[n]&&n>=d?r.pop():h=!1),t>=10?1:0},0);f&&(r.unshift(f),e.integerLen++)}(l,h,d);var g=l.digits,v=l.integerLen,b=l.exponent,T=[];for(u=g.every(function(e){return!e});v<c;v++)g.unshift(0);for(;v<0;v++)g.unshift(0);v>0?T=g.splice(v,g.length):(T=g,g=[0]);var E=[];for(g.length>=t.lgSize&&E.unshift(g.splice(-t.lgSize,g.length).join(""));g.length>t.gSize;)E.unshift(g.splice(-t.gSize,g.length).join(""));g.length&&E.unshift(g.join("")),s=E.join(O(n,r)),T.length&&(s+=O(n,i)+T.join("")),b&&(s+=O(n,y.Exponential)+"+"+b)}else s=O(n,y.Infinity);return e<0&&!u?t.negPre+s+t.negSuf:t.posPre+s+t.posSuf}function ye(e,t,n,r,i){var o=Ee(w(t,p.Currency),O(t,y.MinusSign));return o.minFrac=z(r),o.maxFrac=o.minFrac,ve(e,o,t,y.CurrencyGroup,y.CurrencyDecimal,i).replace(me,n).replace(me,"")}function be(e,t,n){return ve(e,Ee(w(t,p.Percent),O(t,y.MinusSign)),t,y.Group,y.Decimal,n,!0).replace(new RegExp(ge,"g"),O(t,y.PercentSign))}function Te(e,t,n){return ve(e,Ee(w(t,p.Decimal),O(t,y.MinusSign)),t,y.Group,y.Decimal,n)}function Ee(e,t){void 0===t&&(t="-");var n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=e.split(fe),i=r[0],o=r[1],a=-1!==i.indexOf(he)?i.split(he):[i.substring(0,i.lastIndexOf(de)+1),i.substring(i.lastIndexOf(de)+1)],s=a[0],u=a[1]||"";n.posPre=s.substr(0,s.indexOf(_e));for(var l=0;l<u.length;l++){var c=u.charAt(l);c===de?n.minFrac=n.maxFrac=l+1:c===_e?n.maxFrac=l+1:n.posSuf+=c}var h=s.split(pe);if(n.gSize=h[1]?h[1].length:0,n.lgSize=h[2]||h[1]?(h[2]||h[1]).length:0,o){var d=i.length-n.posPre.length-n.posSuf.length,f=o.indexOf(_e);n.negPre=o.substr(0,f).replace(/'/g,""),n.negSuf=o.substr(f+d).replace(/'/g,"")}else n.negPre=t+n.posPre,n.negSuf=n.posSuf;return n}function xe(e){var t=parseInt(e);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+e);return t}var Me=new r.InjectionToken("UseV4Plurals"),Ae=function(){return function(){}}();function Se(e,t,n,r){var i="="+e;if(t.indexOf(i)>-1)return i;if(i=n.getPluralCategory(e,r),t.indexOf(i)>-1)return i;if(t.indexOf("other")>-1)return"other";throw new Error('No plural message found for value "'+e+'"')}var Ce=function(e){function t(t,n){var r=e.call(this)||this;return r.locale=t,r.deprecatedPluralFn=n,r}return Object(i.__extends)(t,e),t.prototype.getPluralCategory=function(e,t){switch(this.deprecatedPluralFn?this.deprecatedPluralFn(t||this.locale,e):F(t||this.locale)(e)){case _.Zero:return"zero";case _.One:return"one";case _.Two:return"two";case _.Few:return"few";case _.Many:return"many";default:return"other"}},t}(Ae);function Pe(e,t){"string"==typeof t&&(t=parseInt(t,10));var n=t,r=n.toString().replace(/^[^.]*\.?/,""),i=Math.floor(Math.abs(n)),o=r.length,a=parseInt(r,10),s=parseInt(n.toString().replace(/^[^.]*\.?|0+$/g,""),10)||0;switch(e.split("-")[0].toLowerCase()){case"af":case"asa":case"az":case"bem":case"bez":case"bg":case"brx":case"ce":case"cgg":case"chr":case"ckb":case"ee":case"el":case"eo":case"es":case"eu":case"fo":case"fur":case"gsw":case"ha":case"haw":case"hu":case"jgo":case"jmc":case"ka":case"kk":case"kkj":case"kl":case"ks":case"ksb":case"ky":case"lb":case"lg":case"mas":case"mgo":case"ml":case"mn":case"nb":case"nd":case"ne":case"nn":case"nnh":case"nyn":case"om":case"or":case"os":case"ps":case"rm":case"rof":case"rwk":case"saq":case"seh":case"sn":case"so":case"sq":case"ta":case"te":case"teo":case"tk":case"tr":case"ug":case"uz":case"vo":case"vun":case"wae":case"xog":return 1===n?_.One:_.Other;case"ak":case"ln":case"mg":case"pa":case"ti":return n===Math.floor(n)&&n>=0&&n<=1?_.One:_.Other;case"am":case"as":case"bn":case"fa":case"gu":case"hi":case"kn":case"mr":case"zu":return 0===i||1===n?_.One:_.Other;case"ar":return 0===n?_.Zero:1===n?_.One:2===n?_.Two:n%100===Math.floor(n%100)&&n%100>=3&&n%100<=10?_.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=99?_.Many:_.Other;case"ast":case"ca":case"de":case"en":case"et":case"fi":case"fy":case"gl":case"it":case"nl":case"sv":case"sw":case"ur":case"yi":return 1===i&&0===o?_.One:_.Other;case"be":return n%10==1&&n%100!=11?_.One:n%10===Math.floor(n%10)&&n%10>=2&&n%10<=4&&!(n%100>=12&&n%100<=14)?_.Few:n%10==0||n%10===Math.floor(n%10)&&n%10>=5&&n%10<=9||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=14?_.Many:_.Other;case"br":return n%10==1&&n%100!=11&&n%100!=71&&n%100!=91?_.One:n%10==2&&n%100!=12&&n%100!=72&&n%100!=92?_.Two:n%10===Math.floor(n%10)&&(n%10>=3&&n%10<=4||n%10==9)&&!(n%100>=10&&n%100<=19||n%100>=70&&n%100<=79||n%100>=90&&n%100<=99)?_.Few:0!==n&&n%1e6==0?_.Many:_.Other;case"bs":case"hr":case"sr":return 0===o&&i%10==1&&i%100!=11||a%10==1&&a%100!=11?_.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)||a%10===Math.floor(a%10)&&a%10>=2&&a%10<=4&&!(a%100>=12&&a%100<=14)?_.Few:_.Other;case"cs":case"sk":return 1===i&&0===o?_.One:i===Math.floor(i)&&i>=2&&i<=4&&0===o?_.Few:0!==o?_.Many:_.Other;case"cy":return 0===n?_.Zero:1===n?_.One:2===n?_.Two:3===n?_.Few:6===n?_.Many:_.Other;case"da":return 1===n||0!==s&&(0===i||1===i)?_.One:_.Other;case"dsb":case"hsb":return 0===o&&i%100==1||a%100==1?_.One:0===o&&i%100==2||a%100==2?_.Two:0===o&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||a%100===Math.floor(a%100)&&a%100>=3&&a%100<=4?_.Few:_.Other;case"ff":case"fr":case"hy":case"kab":return 0===i||1===i?_.One:_.Other;case"fil":return 0===o&&(1===i||2===i||3===i)||0===o&&i%10!=4&&i%10!=6&&i%10!=9||0!==o&&a%10!=4&&a%10!=6&&a%10!=9?_.One:_.Other;case"ga":return 1===n?_.One:2===n?_.Two:n===Math.floor(n)&&n>=3&&n<=6?_.Few:n===Math.floor(n)&&n>=7&&n<=10?_.Many:_.Other;case"gd":return 1===n||11===n?_.One:2===n||12===n?_.Two:n===Math.floor(n)&&(n>=3&&n<=10||n>=13&&n<=19)?_.Few:_.Other;case"gv":return 0===o&&i%10==1?_.One:0===o&&i%10==2?_.Two:0!==o||i%100!=0&&i%100!=20&&i%100!=40&&i%100!=60&&i%100!=80?0!==o?_.Many:_.Other:_.Few;case"he":return 1===i&&0===o?_.One:2===i&&0===o?_.Two:0!==o||n>=0&&n<=10||n%10!=0?_.Other:_.Many;case"is":return 0===s&&i%10==1&&i%100!=11||0!==s?_.One:_.Other;case"ksh":return 0===n?_.Zero:1===n?_.One:_.Other;case"kw":case"naq":case"se":case"smn":return 1===n?_.One:2===n?_.Two:_.Other;case"lag":return 0===n?_.Zero:0!==i&&1!==i||0===n?_.Other:_.One;case"lt":return n%10!=1||n%100>=11&&n%100<=19?n%10===Math.floor(n%10)&&n%10>=2&&n%10<=9&&!(n%100>=11&&n%100<=19)?_.Few:0!==a?_.Many:_.Other:_.One;case"lv":case"prg":return n%10==0||n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19||2===o&&a%100===Math.floor(a%100)&&a%100>=11&&a%100<=19?_.Zero:n%10==1&&n%100!=11||2===o&&a%10==1&&a%100!=11||2!==o&&a%10==1?_.One:_.Other;case"mk":return 0===o&&i%10==1||a%10==1?_.One:_.Other;case"mt":return 1===n?_.One:0===n||n%100===Math.floor(n%100)&&n%100>=2&&n%100<=10?_.Few:n%100===Math.floor(n%100)&&n%100>=11&&n%100<=19?_.Many:_.Other;case"pl":return 1===i&&0===o?_.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?_.Few:0===o&&1!==i&&i%10===Math.floor(i%10)&&i%10>=0&&i%10<=1||0===o&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===o&&i%100===Math.floor(i%100)&&i%100>=12&&i%100<=14?_.Many:_.Other;case"pt":return n===Math.floor(n)&&n>=0&&n<=2&&2!==n?_.One:_.Other;case"ro":return 1===i&&0===o?_.One:0!==o||0===n||1!==n&&n%100===Math.floor(n%100)&&n%100>=1&&n%100<=19?_.Few:_.Other;case"ru":case"uk":return 0===o&&i%10==1&&i%100!=11?_.One:0===o&&i%10===Math.floor(i%10)&&i%10>=2&&i%10<=4&&!(i%100>=12&&i%100<=14)?_.Few:0===o&&i%10==0||0===o&&i%10===Math.floor(i%10)&&i%10>=5&&i%10<=9||0===o&&i%100===Math.floor(i%100)&&i%100>=11&&i%100<=14?_.Many:_.Other;case"shi":return 0===i||1===n?_.One:n===Math.floor(n)&&n>=2&&n<=10?_.Few:_.Other;case"si":return 0===n||1===n||0===i&&1===a?_.One:_.Other;case"sl":return 0===o&&i%100==1?_.One:0===o&&i%100==2?_.Two:0===o&&i%100===Math.floor(i%100)&&i%100>=3&&i%100<=4||0!==o?_.Few:_.Other;case"tzm":return n===Math.floor(n)&&n>=0&&n<=1||n===Math.floor(n)&&n>=11&&n<=99?_.One:_.Other;default:return _.Other}}function Re(e,t,n){"string"!=typeof t&&(n=t,t=e[r["\u0275LocaleDataIndex"].LocaleId]),t=t.toLowerCase().replace(/_/g,"-"),r["\u0275LOCALE_DATA"][t]=e,n&&(r["\u0275LOCALE_DATA"][t][r["\u0275LocaleDataIndex"].ExtraData]=n)}function De(e,t){var n,r;t=encodeURIComponent(t);try{for(var o=Object(i.__values)(e.split(";")),a=o.next();!a.done;a=o.next()){var s=a.value,u=s.indexOf("="),l=Object(i.__read)(-1==u?[s,""]:[s.slice(0,u),s.slice(u+1)],2),c=l[1];if(l[0].trim()===t)return decodeURIComponent(c)}}catch(h){n={error:h}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return null}var Oe=function(){function e(e,t){this._name=e,this._options=t,this.value=null,this._lastSetValue=null,this._lastSetValueType=0,this._lastSetValueIdentityChange=!1}return e.prototype.setValue=function(e){if(Array.isArray(e))this._lastSetValueType=4;else if(e instanceof Set)this._lastSetValueType=8;else if(e&&"string"==typeof e){if(!(4&this._options))throw new Error(this._name+" string values are not allowed");this._lastSetValueType=1}else this._lastSetValueType=e?2:0;this._lastSetValueIdentityChange=!0,this._lastSetValue=e||null},e.prototype.hasValueChanged=function(){var e=this._lastSetValueIdentityChange;if(!(e||14&this._lastSetValueType))return!1;var t=null,n=!!(1&this._options),r=!!(8&this._options),i=!!(2&this._options);switch(this._lastSetValueType){case 1:var o=this._lastSetValue.split(/\s+/g);16&this._options?(t={},o.forEach(function(e,n){return t[e]=!0})):t=o.reduce(function(e,t,n){return e+(n?" ":"")+t});break;case 2:var a=this._lastSetValue,s=Object.keys(a);e||(e=!this.value||function(e,t,n){var r=e;if(!Ne(Object.keys(t),r))return!0;for(var i=0;i<r.length;i++){var o=r[i];if(t[o]!==n[o])return!0}return!1}(s,this.value,a)),e&&(t=we(this._name,n,r,i,a,s));break;case 4:case 8:var u=Array.from(this._lastSetValue);e||(e=!Ne(Object.keys(this.value),u)),e&&(t=we(this._name,n,r,i,u));break;default:t=null}return e&&(this.value=t),e},e}();function we(e,t,n,r,i,o){var a={};if(o)for(var s=0;s<o.length;s++){var u=o[s];Ie(a,u=t?u.trim():u,l=i[u],n,r)}else for(s=0;s<i.length;s++){var l;Le(e,l=i[s]),Ie(a,l=t?l.trim():l,!0,!1,r)}return a}function Le(e,t){if("string"!=typeof t)throw new Error(e+" can only toggle CSS classes expressed as strings, got "+t)}function Ie(e,t,n,r,i){if(i&&t.indexOf(" ")>0)for(var o=t.split(/\s+/g),a=0;a<o.length;a++)Fe(e,o[a],n,r);else Fe(e,t,n,r)}function Fe(e,t,n,r){if(r){var i=function(e,t){var n=e.indexOf(".");if(n>0){var r=e.substr(n+1);e=e.substring(0,n),null!=t&&(t+=r)}return{key:e,value:t}}(t,n);n=i.value,t=i.key}e[t]=n}function Ne(e,t){if(e&&t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(-1===t.indexOf(e[n]))return!1;return!0}return!1}var Be=function(){return function(){}}(),ke=function(){function e(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._initialClasses=[]}return e.prototype.getValue=function(){return null},e.prototype.setClass=function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)},e.prototype.setNgClass=function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(Object(r["\u0275isListLikeIterable"])(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())},e.prototype.applyChanges=function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}},e.prototype._applyKeyValueChanges=function(e){var t=this;e.forEachAddedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachRemovedItem(function(e){e.previousValue&&t._toggleClass(e.key,!1)})},e.prototype._applyIterableChanges=function(e){var t=this;e.forEachAddedItem(function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r["\u0275stringify"])(e.item));t._toggleClass(e.item,!0)}),e.forEachRemovedItem(function(e){return t._toggleClass(e.item,!1)})},e.prototype._applyClasses=function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!0)}):Object.keys(e).forEach(function(n){return t._toggleClass(n,!!e[n])}))},e.prototype._removeClasses=function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!1)}):Object.keys(e).forEach(function(e){return t._toggleClass(e,!1)}))},e.prototype._toggleClass=function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach(function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)})},e}(),Ue=function(){function e(){this._value=null,this._ngClassDiffer=new Oe("NgClass",23),this._classStringDiffer=null}return e.prototype.getValue=function(){return this._value},e.prototype.setClass=function(e){(e||this._classStringDiffer)&&(this._classStringDiffer=this._classStringDiffer||new Oe("class",20),this._classStringDiffer.setValue(e))},e.prototype.setNgClass=function(e){this._ngClassDiffer.setValue(e)},e.prototype.applyChanges=function(){var e=!!this._classStringDiffer&&this._classStringDiffer.hasValueChanged(),t=this._ngClassDiffer.hasValueChanged();if(e||t){var n=this._ngClassDiffer.value;if(this._classStringDiffer){var r=this._classStringDiffer.value;r&&(n=n?Object(i.__assign)({},r,n):r)}this._value=n}},e}(),Ve={provide:Be,useClass:ke},Ge={provide:Be,useClass:Ue},je=Ve,ze=Object(r["\u0275\u0275defineDirective"])({type:function(){},selectors:null,factory:function(){},hostBindings:function(e,t,n){1&e&&Object(r["\u0275\u0275styling"])(),2&e&&(Object(r["\u0275\u0275classMap"])(t.getValue()),Object(r["\u0275\u0275stylingApply"])())}}),Ye=function(){function e(e){this._delegate=e}return e.prototype.getValue=function(){return this._delegate.getValue()},e.ngDirectiveDef=void 0,e}(),He=function(e){function t(t){return e.call(this,t)||this}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"klass",{set:function(e){this._delegate.setClass(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ngClass",{set:function(e){this._delegate.setNgClass(e)},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){this._delegate.applyChanges()},t}(Ye),We=function(){function e(e){this._viewContainerRef=e,this._componentRef=null,this._moduleRef=null}return e.prototype.ngOnChanges=function(e){if(this._viewContainerRef.clear(),this._componentRef=null,this.ngComponentOutlet){var t=this.ngComponentOutletInjector||this._viewContainerRef.parentInjector;if(e.ngComponentOutletNgModuleFactory)if(this._moduleRef&&this._moduleRef.destroy(),this.ngComponentOutletNgModuleFactory){var n=t.get(r.NgModuleRef);this._moduleRef=this.ngComponentOutletNgModuleFactory.create(n.injector)}else this._moduleRef=null;var i=(this._moduleRef?this._moduleRef.componentFactoryResolver:t.get(r.ComponentFactoryResolver)).resolveComponentFactory(this.ngComponentOutlet);this._componentRef=this._viewContainerRef.createComponent(i,this._viewContainerRef.length,t,this.ngComponentOutletContent)}},e.prototype.ngOnDestroy=function(){this._moduleRef&&this._moduleRef.destroy()},e}(),Xe=function(){function e(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}return Object.defineProperty(e.prototype,"first",{get:function(){return 0===this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this.index===this.count-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"even",{get:function(){return this.index%2==0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"odd",{get:function(){return!this.even},enumerable:!0,configurable:!0}),e}(),Ke=function(){function e(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOfDirty=!0,this._differ=null}return Object.defineProperty(e.prototype,"ngForOf",{set:function(e){this._ngForOf=e,this._ngForOfDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTrackBy",{get:function(){return this._trackByFn},set:function(e){Object(r.isDevMode)()&&null!=e&&"function"!=typeof e&&console&&console.warn&&console.warn("trackBy must be a function, but received "+JSON.stringify(e)+". See https://angular.io/docs/ts/latest/api/common/index/NgFor-directive.html#!#change-propagation for more information."),this._trackByFn=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngForTemplate",{set:function(e){e&&(this._template=e)},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){if(this._ngForOfDirty){this._ngForOfDirty=!1;var e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error("Cannot find a differ supporting object '"+e+"' of type '"+((t=e).name||typeof t)+"'. NgFor only supports binding to Iterables such as Arrays.")}}var t;if(this._differ){var n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}},e.prototype._applyChanges=function(e){var t=this,n=[];e.forEachOperation(function(e,r,i){if(null==e.previousIndex){var o=t._viewContainer.createEmbeddedView(t._template,new Xe(null,t._ngForOf,-1,-1),i),a=new Qe(e,o);n.push(a)}else null==i?t._viewContainer.remove(r):(o=t._viewContainer.get(r),t._viewContainer.move(o,i),a=new Qe(e,o),n.push(a))});for(var r=0;r<n.length;r++)this._perViewChange(n[r].view,n[r].record);r=0;for(var i=this._viewContainer.length;r<i;r++){var o=this._viewContainer.get(r);o.context.index=r,o.context.count=i,o.context.ngForOf=this._ngForOf}e.forEachIdentityChange(function(e){t._viewContainer.get(e.currentIndex).context.$implicit=e.item})},e.prototype._perViewChange=function(e,t){e.context.$implicit=t.item},e.ngTemplateContextGuard=function(e,t){return!0},e}(),Qe=function(){return function(e,t){this.record=e,this.view=t}}(),qe=function(){function e(e,t){this._viewContainer=e,this._context=new Ze,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}return Object.defineProperty(e.prototype,"ngIf",{set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfThen",{set:function(e){Je("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ngIfElse",{set:function(e){Je("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()},enumerable:!0,configurable:!0}),e.prototype._updateView=function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))},e}(),Ze=function(){return function(){this.$implicit=null,this.ngIf=null}}();function Je(e,t){if(t&&!t.createEmbeddedView)throw new Error(e+" must be a TemplateRef, but received '"+Object(r["\u0275stringify"])(t)+"'.")}var $e=function(){function e(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}return e.prototype.create=function(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)},e.prototype.destroy=function(){this._created=!1,this._viewContainerRef.clear()},e.prototype.enforceState=function(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()},e}(),et=function(){function e(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}return Object.defineProperty(e.prototype,"ngSwitch",{set:function(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)},enumerable:!0,configurable:!0}),e.prototype._addCase=function(){return this._caseCount++},e.prototype._addDefault=function(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)},e.prototype._matchCase=function(e){var t=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||t,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),t},e.prototype._updateDefaultCases=function(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(var t=0;t<this._defaultViews.length;t++)this._defaultViews[t].enforceState(e)}},e}(),tt=function(){function e(e,t,n){this.ngSwitch=n,n._addCase(),this._view=new $e(e,t)}return e.prototype.ngDoCheck=function(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))},e}(),nt=function(){return function(e,t,n){n._addDefault(new $e(e,t))}}(),rt=function(){function e(e){this._localization=e,this._caseViews={}}return Object.defineProperty(e.prototype,"ngPlural",{set:function(e){this._switchValue=e,this._updateView()},enumerable:!0,configurable:!0}),e.prototype.addCase=function(e,t){this._caseViews[e]=t},e.prototype._updateView=function(){this._clearViews();var e=Object.keys(this._caseViews),t=Se(this._switchValue,e,this._localization);this._activateView(this._caseViews[t])},e.prototype._clearViews=function(){this._activeView&&this._activeView.destroy()},e.prototype._activateView=function(e){e&&(this._activeView=e,this._activeView.create())},e}(),it=function(){return function(e,t,n,r){this.value=e;var i=!isNaN(Number(e));r.addCase(i?"="+e:e,new $e(n,t))}}(),ot=function(){return function(){}}(),at=function(){function e(e,t,n){this._ngEl=e,this._differs=t,this._renderer=n}return e.prototype.getValue=function(){return null},e.prototype.setNgStyle=function(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())},e.prototype.applyChanges=function(){if(this._differ){var e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}},e.prototype._applyChanges=function(e){var t=this;e.forEachRemovedItem(function(e){return t._setStyle(e.key,null)}),e.forEachAddedItem(function(e){return t._setStyle(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._setStyle(e.key,e.currentValue)})},e.prototype._setStyle=function(e,t){var n=Object(i.__read)(e.split("."),2),r=n[0],o=n[1];null!=(t=null!=t&&o?""+t+o:t)?this._renderer.setStyle(this._ngEl.nativeElement,r,t):this._renderer.removeStyle(this._ngEl.nativeElement,r)},e}(),st=function(){function e(){this._differ=new Oe("NgStyle",8),this._value=null}return e.prototype.getValue=function(){return this._value},e.prototype.setNgStyle=function(e){this._differ.setValue(e)},e.prototype.applyChanges=function(){this._differ.hasValueChanged()&&(this._value=this._differ.value)},e}(),ut={provide:ot,useClass:at},lt={provide:ot,useClass:st},ct=ut,ht=Object(r["\u0275\u0275defineDirective"])({type:function(){},selectors:null,factory:function(){},hostBindings:function(e,t,n){1&e&&Object(r["\u0275\u0275styling"])(),2&e&&(Object(r["\u0275\u0275styleMap"])(t.getValue()),Object(r["\u0275\u0275stylingApply"])())}}),dt=function(){function e(e){this._delegate=e}return e.prototype.getValue=function(){return this._delegate.getValue()},e.ngDirectiveDef=void 0,e}(),ft=function(e){function t(t){return e.call(this,t)||this}return Object(i.__extends)(t,e),Object.defineProperty(t.prototype,"ngStyle",{set:function(e){this._delegate.setNgStyle(e)},enumerable:!0,configurable:!0}),t.prototype.ngDoCheck=function(){this._delegate.applyChanges()},t}(dt),pt=function(){function e(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}return e.prototype.ngOnChanges=function(e){this._shouldRecreateView(e)?(this._viewRef&&this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._viewRef)),this.ngTemplateOutlet&&(this._viewRef=this._viewContainerRef.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext))):this._viewRef&&this.ngTemplateOutletContext&&this._updateExistingContext(this.ngTemplateOutletContext)},e.prototype._shouldRecreateView=function(e){var t=e.ngTemplateOutletContext;return!!e.ngTemplateOutlet||t&&this._hasContextShapeChanged(t)},e.prototype._hasContextShapeChanged=function(e){var t,n,r=Object.keys(e.previousValue||{}),o=Object.keys(e.currentValue||{});if(r.length===o.length){try{for(var a=Object(i.__values)(o),s=a.next();!s.done;s=a.next())if(-1===r.indexOf(s.value))return!0}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return!1}return!0},e.prototype._updateExistingContext=function(e){var t,n;try{for(var r=Object(i.__values)(Object.keys(e)),o=r.next();!o.done;o=r.next()){var a=o.value;this._viewRef.context[a]=this.ngTemplateOutletContext[a]}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},e}(),_t=[He,We,Ke,qe,pt,ft,et,tt,nt,rt,it];function mt(e,t){return Error("InvalidPipeArgument: '"+t+"' for pipe '"+Object(r["\u0275stringify"])(e)+"'")}var gt=function(){function e(){}return e.format=function(e,t,n,r){void 0===r&&(r={});var i=r.currency,o=r.currencyAsSymbol,a=void 0!==o&&o,s={minimumIntegerDigits:r.minimumIntegerDigits,minimumFractionDigits:r.minimumFractionDigits,maximumFractionDigits:r.maximumFractionDigits,style:p[n].toLowerCase()};return n==p.Currency&&(s.currency="string"==typeof i?i:void 0,s.currencyDisplay=a?"symbol":"code"),new Intl.NumberFormat(t,s).format(e)},e}(),vt=/((?:[^yMLdHhmsazZEwGjJ']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|J+|j+|m+|s+|a|z|Z|G+|w+))(.*)/,yt={yMMMdjms:Dt(Rt([Ct("year",1),Pt("month",3),Ct("day",1),Ct("hour",1),Ct("minute",1),Ct("second",1)])),yMdjm:Dt(Rt([Ct("year",1),Ct("month",1),Ct("day",1),Ct("hour",1),Ct("minute",1)])),yMMMMEEEEd:Dt(Rt([Ct("year",1),Pt("month",4),Pt("weekday",4),Ct("day",1)])),yMMMMd:Dt(Rt([Ct("year",1),Pt("month",4),Ct("day",1)])),yMMMd:Dt(Rt([Ct("year",1),Pt("month",3),Ct("day",1)])),yMd:Dt(Rt([Ct("year",1),Ct("month",1),Ct("day",1)])),jms:Dt(Rt([Ct("hour",1),Ct("second",1),Ct("minute",1)])),jm:Dt(Rt([Ct("hour",1),Ct("minute",1)]))},bt={yyyy:Dt(Ct("year",4)),yy:Dt(Ct("year",2)),y:Dt(Ct("year",1)),MMMM:Dt(Pt("month",4)),MMM:Dt(Pt("month",3)),MM:Dt(Ct("month",2)),M:Dt(Ct("month",1)),LLLL:Dt(Pt("month",4)),L:Dt(Pt("month",1)),dd:Dt(Ct("day",2)),d:Dt(Ct("day",1)),HH:Tt(xt(Dt(St(Ct("hour",2),!1)))),H:xt(Dt(St(Ct("hour",1),!1))),hh:Tt(xt(Dt(St(Ct("hour",2),!0)))),h:xt(Dt(St(Ct("hour",1),!0))),jj:Dt(Ct("hour",2)),j:Dt(Ct("hour",1)),mm:Tt(Dt(Ct("minute",2))),m:Dt(Ct("minute",1)),ss:Tt(Dt(Ct("second",2))),s:Dt(Ct("second",1)),sss:Dt(Ct("second",3)),EEEE:Dt(Pt("weekday",4)),EEE:Dt(Pt("weekday",3)),EE:Dt(Pt("weekday",2)),E:Dt(Pt("weekday",1)),a:Et(Dt(St(Ct("hour",1),!0))),Z:At("short"),z:At("long"),ww:Dt({}),w:Dt({}),G:Dt(Pt("era",1)),GG:Dt(Pt("era",2)),GGG:Dt(Pt("era",3)),GGGG:Dt(Pt("era",4))};function Tt(e){return function(t,n){var r=e(t,n);return 1==r.length?"0"+r:r}}function Et(e){return function(t,n){return e(t,n).split(" ")[1]}}function xt(e){return function(t,n){return e(t,n).split(" ")[0]}}function Mt(e,t,n){return new Intl.DateTimeFormat(t,n).format(e).replace(/[\u200e\u200f]/g,"")}function At(e){var t={hour:"2-digit",hour12:!1,timeZoneName:e};return function(e,n){var r=Mt(e,n,t);return r?r.substring(3):""}}function St(e,t){return e.hour12=t,e}function Ct(e,t){var n={};return n[e]=2===t?"2-digit":"numeric",n}function Pt(e,t){var n={};return n[e]=t<4?t>1?"short":"narrow":"long",n}function Rt(e){return e.reduce(function(e,t){return Object(i.__assign)({},e,t)},{})}function Dt(e){return function(t,n){return Mt(t,n,e)}}var Ot=new Map,wt=function(){function e(){}return e.format=function(e,t,n){return function(e,t,n){var r=yt[e];if(r)return r(t,n);var i=e,o=Ot.get(i);if(!o){o=[];var a=void 0;vt.exec(e);for(var s=e;s;)(a=vt.exec(s))?s=(o=o.concat(a.slice(1))).pop():(o.push(s),s=null);Ot.set(i,o)}return o.reduce(function(e,r){var i=bt[r];return e+(i?i(t,n):function(e){return"''"===e?"'":e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}(r))},"")}(n,e,t)},e}(),Lt=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n){if(void 0===n&&(n="mediumDate"),null==e||""===e||e!=e)return null;var r;if("string"==typeof e&&(e=e.trim()),It(e))r=e;else if(isNaN(e-parseFloat(e)))if("string"==typeof e&&/^(\d{4}-\d{1,2}-\d{1,2})$/.test(e)){var o=Object(i.__read)(e.split("-").map(function(e){return parseInt(e,10)}),3);r=new Date(o[0],o[1]-1,o[2])}else r=new Date(e);else r=new Date(parseFloat(e));if(!It(r)){var a=void 0;if("string"!=typeof e||!(a=e.match(Y)))throw mt(t,e);r=se(a)}return wt.format(r,this._locale,t._ALIASES[n]||n)},e._ALIASES={medium:"yMMMdjms",short:"yMdjm",fullDate:"yMMMMEEEEd",longDate:"yMMMMd",mediumDate:"yMMMd",shortDate:"yMd",mediumTime:"jms",shortTime:"jm"},e}();function It(e){return e instanceof Date&&!isNaN(e.valueOf())}function Ft(e,t,n,r,i,o,a){if(void 0===o&&(o=null),void 0===a&&(a=!1),null==n)return null;if("number"!=typeof(n="string"!=typeof n||isNaN(+n-parseFloat(n))?n:+n))throw mt(e,n);var s,u,l;if(r!==p.Currency&&(s=1,u=0,l=3),i){var c=i.match(le);if(null===c)throw new Error(i+" is not a valid digit info for number pipes");null!=c[1]&&(s=xe(c[1])),null!=c[3]&&(u=xe(c[3])),null!=c[5]&&(l=xe(c[5]))}return gt.format(n,t,r,{minimumIntegerDigits:s,minimumFractionDigits:u,maximumFractionDigits:l,currency:o,currencyAsSymbol:a})}var Nt=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n){return Ft(t,this._locale,e,p.Decimal,n)},e}(),Bt=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n){return Ft(t,this._locale,e,p.Percent,n)},e}(),kt=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n,r,i){return void 0===n&&(n="USD"),void 0===r&&(r=!1),Ft(t,this._locale,e,p.Currency,i,n,r)},e}(),Ut=[Nt,Bt,kt,Lt],Vt=function(){function e(){}return e.prototype.createSubscription=function(e,t){return e.subscribe({next:t,error:function(e){throw e}})},e.prototype.dispose=function(e){e.unsubscribe()},e.prototype.onDestroy=function(e){e.unsubscribe()},e}(),Gt=new(function(){function e(){}return e.prototype.createSubscription=function(e,t){return e.then(t,function(e){throw e})},e.prototype.dispose=function(e){},e.prototype.onDestroy=function(e){},e}()),jt=new Vt,zt=function(){function e(e){this._ref=e,this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null,this._strategy=null}var t;return t=e,e.prototype.ngOnDestroy=function(){this._subscription&&this._dispose()},e.prototype.transform=function(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):Object(r["\u0275looseIdentical"])(this._latestValue,this._latestReturnedValue)?this._latestReturnedValue:(this._latestReturnedValue=this._latestValue,r.WrappedValue.wrap(this._latestValue)):(e&&this._subscribe(e),this._latestReturnedValue=this._latestValue,this._latestValue)},e.prototype._subscribe=function(e){var t=this;this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,function(n){return t._updateLatestValue(e,n)})},e.prototype._selectStrategy=function(e){if(Object(r["\u0275isPromise"])(e))return Gt;if(Object(r["\u0275isObservable"])(e))return jt;throw mt(t,e)},e.prototype._dispose=function(){this._strategy.dispose(this._subscription),this._latestValue=null,this._latestReturnedValue=null,this._subscription=null,this._obj=null},e.prototype._updateLatestValue=function(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())},e}(),Yt=function(){function e(){}var t;return t=e,e.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw mt(t,e);return e.toLowerCase()},e}(),Ht=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g,Wt=function(){function e(){}var t;return t=e,e.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw mt(t,e);return e.replace(Ht,function(e){return e[0].toUpperCase()+e.substr(1).toLowerCase()})},e}(),Xt=function(){function e(){}var t;return t=e,e.prototype.transform=function(e){if(!e)return e;if("string"!=typeof e)throw mt(t,e);return e.toUpperCase()},e}(),Kt=function(){function e(e){this.locale=e}var t;return t=e,e.prototype.transform=function(e,n,r,i){if(void 0===n&&(n="mediumDate"),null==e||""===e||e!=e)return null;try{return q(e,n,i||this.locale,r)}catch(o){throw mt(t,o.message)}},e}(),Qt=/#/g,qt=function(){function e(e){this._localization=e}var t;return t=e,e.prototype.transform=function(e,n,r){if(null==e)return"";if("object"!=typeof n||null===n)throw mt(t,n);return n[Se(e,Object.keys(n),this._localization,r)].replace(Qt,e.toString())},e}(),Zt=function(){function e(){}var t;return t=e,e.prototype.transform=function(e,n){if(null==e)return"";if("object"!=typeof n||"string"!=typeof e)throw mt(t,n);return n.hasOwnProperty(e)?n[e]:n.hasOwnProperty("other")?n.other:""},e}(),Jt=function(){function e(){}return e.prototype.transform=function(e){return JSON.stringify(e,null,2)},e}(),$t=function(){function e(e){this.differs=e,this.keyValues=[]}return e.prototype.transform=function(e,t){var n=this;if(void 0===t&&(t=en),!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());var r=this.differ.diff(e);return r&&(this.keyValues=[],r.forEachItem(function(e){n.keyValues.push({key:e.key,value:e.currentValue})}),this.keyValues.sort(t)),this.keyValues},e}();function en(e,t){var n=e.key,r=t.key;if(n===r)return 0;if(void 0===n)return 1;if(void 0===r)return-1;if(null===n)return 1;if(null===r)return-1;if("string"==typeof n&&"string"==typeof r)return n<r?-1:1;if("number"==typeof n&&"number"==typeof r)return n-r;if("boolean"==typeof n&&"boolean"==typeof r)return n<r?-1:1;var i=String(n),o=String(r);return i==o?0:i<o?-1:1}var tn=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n,r){if(on(e))return null;r=r||this._locale;try{return Te(an(e),r,n)}catch(i){throw mt(t,i.message)}},e}(),nn=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n,r){if(on(e))return null;r=r||this._locale;try{return be(an(e),r,n)}catch(i){throw mt(t,i.message)}},e}(),rn=function(){function e(e){this._locale=e}var t;return t=e,e.prototype.transform=function(e,n,r,i,o){if(void 0===r&&(r="symbol"),on(e))return null;o=o||this._locale,"boolean"==typeof r&&(console&&console.warn&&console.warn('Warning: the currency pipe has been changed in Angular v5. The symbolDisplay option (third parameter) is now a string instead of a boolean. The accepted values are "code", "symbol" or "symbol-narrow".'),r=r?"symbol":"code");var a=n||"USD";"code"!==r&&(a="symbol"===r||"symbol-narrow"===r?G(a,"symbol"===r?"wide":"narrow",o):r);try{return ye(an(e),o,a,n,i)}catch(s){throw mt(t,s.message)}},e}();function on(e){return null==e||""===e||e!=e}function an(e){if("string"==typeof e&&!isNaN(Number(e)-parseFloat(e)))return Number(e);if("number"!=typeof e)throw new Error(e+" is not a number");return e}var sn=function(){function e(){}var t;return t=e,e.prototype.transform=function(e,n,r){if(null==e)return e;if(!this.supports(e))throw mt(t,e);return e.slice(n,r)},e.prototype.supports=function(e){return"string"==typeof e||Array.isArray(e)},e}(),un=[zt,Xt,Yt,Jt,sn,tn,nn,Wt,rn,Kt,qt,Zt,$t],ln=function(){return function(){}}(),cn=function(){return function(){}}(),hn=new r.InjectionToken("DocumentToken"),dn="browser",fn="server",pn="browserWorkerApp",_n="browserWorkerUi";function mn(e){return e===dn}function gn(e){return e===fn}function vn(e){return e===pn}function yn(e){return e===_n}var bn=new r.Version("8.1.1"),Tn=function(){function e(){}return e.ngInjectableDef=Object(r["\u0275\u0275defineInjectable"])({token:e,providedIn:"root",factory:function(){return new En(Object(r["\u0275\u0275inject"])(hn),window,Object(r["\u0275\u0275inject"])(r.ErrorHandler))}}),e}(),En=function(){function e(e,t,n){this.document=e,this.window=t,this.errorHandler=n,this.offset=function(){return[0,0]}}return e.prototype.setOffset=function(e){this.offset=Array.isArray(e)?function(){return e}:e},e.prototype.getScrollPosition=function(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]},e.prototype.scrollToPosition=function(e){this.supportScrollRestoration()&&this.window.scrollTo(e[0],e[1])},e.prototype.scrollToAnchor=function(e){if(this.supportScrollRestoration()){e=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(e):e.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{var t=this.document.querySelector("#"+e);if(t)return void this.scrollToElement(t);var n=this.document.querySelector("[name='"+e+"']");if(n)return void this.scrollToElement(n)}catch(r){this.errorHandler.handleError(r)}}},e.prototype.setHistoryScrollRestoration=function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}},e.prototype.scrollToElement=function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])},e.prototype.supportScrollRestoration=function(){try{return!!this.window&&!!this.window.scrollTo}catch(e){return!1}},e}(),xn=function(){function e(){}return e.prototype.setOffset=function(e){},e.prototype.getScrollPosition=function(){return[0,0]},e.prototype.scrollToPosition=function(e){},e.prototype.scrollToAnchor=function(e){},e.prototype.setHistoryScrollRestoration=function(e){},e}()},"Ivi+":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ko",{months:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),monthsShort:"1\uc6d4_2\uc6d4_3\uc6d4_4\uc6d4_5\uc6d4_6\uc6d4_7\uc6d4_8\uc6d4_9\uc6d4_10\uc6d4_11\uc6d4_12\uc6d4".split("_"),weekdays:"\uc77c\uc694\uc77c_\uc6d4\uc694\uc77c_\ud654\uc694\uc77c_\uc218\uc694\uc77c_\ubaa9\uc694\uc77c_\uae08\uc694\uc77c_\ud1a0\uc694\uc77c".split("_"),weekdaysShort:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),weekdaysMin:"\uc77c_\uc6d4_\ud654_\uc218_\ubaa9_\uae08_\ud1a0".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY\ub144 MMMM D\uc77c",LLL:"YYYY\ub144 MMMM D\uc77c A h:mm",LLLL:"YYYY\ub144 MMMM D\uc77c dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY\ub144 MMMM D\uc77c",lll:"YYYY\ub144 MMMM D\uc77c A h:mm",llll:"YYYY\ub144 MMMM D\uc77c dddd A h:mm"},calendar:{sameDay:"\uc624\ub298 LT",nextDay:"\ub0b4\uc77c LT",nextWeek:"dddd LT",lastDay:"\uc5b4\uc81c LT",lastWeek:"\uc9c0\ub09c\uc8fc dddd LT",sameElse:"L"},relativeTime:{future:"%s \ud6c4",past:"%s \uc804",s:"\uba87 \ucd08",ss:"%d\ucd08",m:"1\ubd84",mm:"%d\ubd84",h:"\ud55c \uc2dc\uac04",hh:"%d\uc2dc\uac04",d:"\ud558\ub8e8",dd:"%d\uc77c",M:"\ud55c \ub2ec",MM:"%d\ub2ec",y:"\uc77c \ub144",yy:"%d\ub144"},dayOfMonthOrdinalParse:/\d{1,2}(\uc77c|\uc6d4|\uc8fc)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"\uc77c";case"M":return e+"\uc6d4";case"w":case"W":return e+"\uc8fc";default:return e}},meridiemParse:/\uc624\uc804|\uc624\ud6c4/,isPM:function(e){return"\uc624\ud6c4"===e},meridiem:function(e,t,n){return e<12?"\uc624\uc804":"\uc624\ud6c4"}})}()},"JCF/":function(e,t,n){!function(e){"use strict";var t={1:"\u0661",2:"\u0662",3:"\u0663",4:"\u0664",5:"\u0665",6:"\u0666",7:"\u0667",8:"\u0668",9:"\u0669",0:"\u0660"},n={"\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u0660":"0"},r=["\u06a9\u0627\u0646\u0648\u0646\u06cc \u062f\u0648\u0648\u06d5\u0645","\u0634\u0648\u0628\u0627\u062a","\u0626\u0627\u0632\u0627\u0631","\u0646\u06cc\u0633\u0627\u0646","\u0626\u0627\u06cc\u0627\u0631","\u062d\u0648\u0632\u06d5\u06cc\u0631\u0627\u0646","\u062a\u06d5\u0645\u0645\u0648\u0632","\u0626\u0627\u0628","\u0626\u06d5\u06cc\u0644\u0648\u0648\u0644","\u062a\u0634\u0631\u06cc\u0646\u06cc \u06cc\u06d5\u0643\u06d5\u0645","\u062a\u0634\u0631\u06cc\u0646\u06cc \u062f\u0648\u0648\u06d5\u0645","\u0643\u0627\u0646\u0648\u0646\u06cc \u06cc\u06d5\u06a9\u06d5\u0645"];e.defineLocale("ku",{months:r,monthsShort:r,weekdays:"\u06cc\u0647\u200c\u0643\u0634\u0647\u200c\u0645\u0645\u0647\u200c_\u062f\u0648\u0648\u0634\u0647\u200c\u0645\u0645\u0647\u200c_\u0633\u06ce\u0634\u0647\u200c\u0645\u0645\u0647\u200c_\u0686\u0648\u0627\u0631\u0634\u0647\u200c\u0645\u0645\u0647\u200c_\u067e\u06ce\u0646\u062c\u0634\u0647\u200c\u0645\u0645\u0647\u200c_\u0647\u0647\u200c\u06cc\u0646\u06cc_\u0634\u0647\u200c\u0645\u0645\u0647\u200c".split("_"),weekdaysShort:"\u06cc\u0647\u200c\u0643\u0634\u0647\u200c\u0645_\u062f\u0648\u0648\u0634\u0647\u200c\u0645_\u0633\u06ce\u0634\u0647\u200c\u0645_\u0686\u0648\u0627\u0631\u0634\u0647\u200c\u0645_\u067e\u06ce\u0646\u062c\u0634\u0647\u200c\u0645_\u0647\u0647\u200c\u06cc\u0646\u06cc_\u0634\u0647\u200c\u0645\u0645\u0647\u200c".split("_"),weekdaysMin:"\u06cc_\u062f_\u0633_\u0686_\u067e_\u0647_\u0634".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u0626\u06ce\u0648\u0627\u0631\u0647\u200c|\u0628\u0647\u200c\u06cc\u0627\u0646\u06cc/,isPM:function(e){return/\u0626\u06ce\u0648\u0627\u0631\u0647\u200c/.test(e)},meridiem:function(e,t,n){return e<12?"\u0628\u0647\u200c\u06cc\u0627\u0646\u06cc":"\u0626\u06ce\u0648\u0627\u0631\u0647\u200c"},calendar:{sameDay:"[\u0626\u0647\u200c\u0645\u0631\u06c6 \u0643\u0627\u062a\u0698\u0645\u06ce\u0631] LT",nextDay:"[\u0628\u0647\u200c\u06cc\u0627\u0646\u06cc \u0643\u0627\u062a\u0698\u0645\u06ce\u0631] LT",nextWeek:"dddd [\u0643\u0627\u062a\u0698\u0645\u06ce\u0631] LT",lastDay:"[\u062f\u0648\u06ce\u0646\u06ce \u0643\u0627\u062a\u0698\u0645\u06ce\u0631] LT",lastWeek:"dddd [\u0643\u0627\u062a\u0698\u0645\u06ce\u0631] LT",sameElse:"L"},relativeTime:{future:"\u0644\u0647\u200c %s",past:"%s",s:"\u0686\u0647\u200c\u0646\u062f \u0686\u0631\u0643\u0647\u200c\u06cc\u0647\u200c\u0643",ss:"\u0686\u0631\u0643\u0647\u200c %d",m:"\u06cc\u0647\u200c\u0643 \u062e\u0648\u0644\u0647\u200c\u0643",mm:"%d \u062e\u0648\u0644\u0647\u200c\u0643",h:"\u06cc\u0647\u200c\u0643 \u0643\u0627\u062a\u0698\u0645\u06ce\u0631",hh:"%d \u0643\u0627\u062a\u0698\u0645\u06ce\u0631",d:"\u06cc\u0647\u200c\u0643 \u0695\u06c6\u0698",dd:"%d \u0695\u06c6\u0698",M:"\u06cc\u0647\u200c\u0643 \u0645\u0627\u0646\u06af",MM:"%d \u0645\u0627\u0646\u06af",y:"\u06cc\u0647\u200c\u0643 \u0633\u0627\u06b5",yy:"%d \u0633\u0627\u06b5"},preparse:function(e){return e.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(e){return n[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"\u060c")},week:{dow:6,doy:12}})}(n("wd/R"))},JVSJ:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"ss":return r+(1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi");case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+(1===e?"minuta":2===e||3===e||4===e?"minute":"minuta");case"h":return t?"jedan sat":"jednog sata";case"hh":return r+(1===e?"sat":2===e||3===e||4===e?"sata":"sati");case"dd":return r+(1===e?"dan":"dana");case"MM":return r+(1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci");case"yy":return r+(1===e?"godina":2===e||3===e||4===e?"godine":"godina")}}n("wd/R").defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010der u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[pro\u0161lu] dddd [u] LT";case 6:return"[pro\u0161le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[pro\u0161li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}()},JcRv:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("xTla"),i=function(e){return function(t){var n=e[r.a]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}},JvlW:function(e,t,n){!function(e){"use strict";var t={ss:"sekund\u0117_sekund\u017ei\u0173_sekundes",m:"minut\u0117_minut\u0117s_minut\u0119",mm:"minut\u0117s_minu\u010di\u0173_minutes",h:"valanda_valandos_valand\u0105",hh:"valandos_valand\u0173_valandas",d:"diena_dienos_dien\u0105",dd:"dienos_dien\u0173_dienas",M:"m\u0117nuo_m\u0117nesio_m\u0117nes\u012f",MM:"m\u0117nesiai_m\u0117nesi\u0173_m\u0117nesius",y:"metai_met\u0173_metus",yy:"metai_met\u0173_metus"};function n(e,t,n,r){return t?i(n)[0]:r?i(n)[1]:i(n)[2]}function r(e){return e%10==0||e>10&&e<20}function i(e){return t[e].split("_")}function o(e,t,o,a){var s=e+" ";return 1===e?s+n(0,t,o[0],a):t?s+(r(e)?i(o)[1]:i(o)[0]):a?s+i(o)[1]:s+(r(e)?i(o)[1]:i(o)[2])}e.defineLocale("lt",{months:{format:"sausio_vasario_kovo_baland\u017eio_gegu\u017e\u0117s_bir\u017eelio_liepos_rugpj\u016b\u010dio_rugs\u0117jo_spalio_lapkri\u010dio_gruod\u017eio".split("_"),standalone:"sausis_vasaris_kovas_balandis_gegu\u017e\u0117_bir\u017eelis_liepa_rugpj\u016btis_rugs\u0117jis_spalis_lapkritis_gruodis".split("_"),isFormat:/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/},monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:{format:"sekmadien\u012f_pirmadien\u012f_antradien\u012f_tre\u010diadien\u012f_ketvirtadien\u012f_penktadien\u012f_\u0161e\u0161tadien\u012f".split("_"),standalone:"sekmadienis_pirmadienis_antradienis_tre\u010diadienis_ketvirtadienis_penktadienis_\u0161e\u0161tadienis".split("_"),isFormat:/dddd HH:mm/},weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_\u0160e\u0161".split("_"),weekdaysMin:"S_P_A_T_K_Pn_\u0160".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], HH:mm [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], HH:mm [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]"},calendar:{sameDay:"[\u0160iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Pra\u0117jus\u012f] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie\u0161 %s",s:function(e,t,n,r){return t?"kelios sekund\u0117s":r?"keli\u0173 sekund\u017ei\u0173":"kelias sekundes"},ss:o,m:n,mm:o,h:n,hh:o,d:n,dd:o,M:n,MM:o,y:n,yy:o},dayOfMonthOrdinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(n("wd/R"))},"K/tc":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[M\xf4re om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",ss:"%d sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}()},K9Ia:function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return h});var r=n("mrSG"),i=n("6blF"),o=n("FFOo"),a=n("pugT"),s=n("8g8A"),u=n("uMaO"),l=n("L/V9"),c=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return r.__extends(t,e),t}(o.a),h=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return r.__extends(t,e),t.prototype[l.a]=function(){return new c(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.a;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.a;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.a;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.a;return this.hasError?(e.error(this.thrownError),a.a.EMPTY):this.isStopped?(e.complete(),a.a.EMPTY):(this.observers.push(e),new u.a(this,e))},t.prototype.asObservable=function(){var e=new i.a;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.a),d=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return r.__extends(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):a.a.EMPTY},t}(h)},KSF8:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("vi",{months:"th\xe1ng 1_th\xe1ng 2_th\xe1ng 3_th\xe1ng 4_th\xe1ng 5_th\xe1ng 6_th\xe1ng 7_th\xe1ng 8_th\xe1ng 9_th\xe1ng 10_th\xe1ng 11_th\xe1ng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),monthsParseExact:!0,weekdays:"ch\u1ee7 nh\u1eadt_th\u1ee9 hai_th\u1ee9 ba_th\u1ee9 t\u01b0_th\u1ee9 n\u0103m_th\u1ee9 s\xe1u_th\u1ee9 b\u1ea3y".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysParseExact:!0,meridiemParse:/sa|ch/i,isPM:function(e){return/^ch$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"sa":"SA":n?"ch":"CH"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM [n\u0103m] YYYY",LLL:"D MMMM [n\u0103m] YYYY HH:mm",LLLL:"dddd, D MMMM [n\u0103m] YYYY HH:mm",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[H\xf4m nay l\xfac] LT",nextDay:"[Ng\xe0y mai l\xfac] LT",nextWeek:"dddd [tu\u1ea7n t\u1edbi l\xfac] LT",lastDay:"[H\xf4m qua l\xfac] LT",lastWeek:"dddd [tu\u1ea7n r\u1ed3i l\xfac] LT",sameElse:"L"},relativeTime:{future:"%s t\u1edbi",past:"%s tr\u01b0\u1edbc",s:"v\xe0i gi\xe2y",ss:"%d gi\xe2y",m:"m\u1ed9t ph\xfat",mm:"%d ph\xfat",h:"m\u1ed9t gi\u1edd",hh:"%d gi\u1edd",d:"m\u1ed9t ng\xe0y",dd:"%d ng\xe0y",M:"m\u1ed9t th\xe1ng",MM:"%d th\xe1ng",y:"m\u1ed9t n\u0103m",yy:"%d n\u0103m"},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}()},KTz0:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekund","sekunda","sekundi"],m:["jedan minut","jednog minuta"],mm:["minut","minuta","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mjesec","mjeseca","mjeseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("me",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sjutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010de u] LT",lastWeek:function(){return["[pro\u0161le] [nedjelje] [u] LT","[pro\u0161log] [ponedjeljka] [u] LT","[pro\u0161log] [utorka] [u] LT","[pro\u0161le] [srijede] [u] LT","[pro\u0161log] [\u010detvrtka] [u] LT","[pro\u0161log] [petka] [u] LT","[pro\u0161le] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mjesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n("wd/R"))},"L/V9":function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},Loxo:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("uz",{months:"\u044f\u043d\u0432\u0430\u0440_\u0444\u0435\u0432\u0440\u0430\u043b_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440_\u043e\u043a\u0442\u044f\u0431\u0440_\u043d\u043e\u044f\u0431\u0440_\u0434\u0435\u043a\u0430\u0431\u0440".split("_"),monthsShort:"\u044f\u043d\u0432_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433_\u0441\u0435\u043d_\u043e\u043a\u0442_\u043d\u043e\u044f_\u0434\u0435\u043a".split("_"),weekdays:"\u042f\u043a\u0448\u0430\u043d\u0431\u0430_\u0414\u0443\u0448\u0430\u043d\u0431\u0430_\u0421\u0435\u0448\u0430\u043d\u0431\u0430_\u0427\u043e\u0440\u0448\u0430\u043d\u0431\u0430_\u041f\u0430\u0439\u0448\u0430\u043d\u0431\u0430_\u0416\u0443\u043c\u0430_\u0428\u0430\u043d\u0431\u0430".split("_"),weekdaysShort:"\u042f\u043a\u0448_\u0414\u0443\u0448_\u0421\u0435\u0448_\u0427\u043e\u0440_\u041f\u0430\u0439_\u0416\u0443\u043c_\u0428\u0430\u043d".split("_"),weekdaysMin:"\u042f\u043a_\u0414\u0443_\u0421\u0435_\u0427\u043e_\u041f\u0430_\u0416\u0443_\u0428\u0430".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"D MMMM YYYY, dddd HH:mm"},calendar:{sameDay:"[\u0411\u0443\u0433\u0443\u043d \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",nextDay:"[\u042d\u0440\u0442\u0430\u0433\u0430] LT [\u0434\u0430]",nextWeek:"dddd [\u043a\u0443\u043d\u0438 \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",lastDay:"[\u041a\u0435\u0447\u0430 \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",lastWeek:"[\u0423\u0442\u0433\u0430\u043d] dddd [\u043a\u0443\u043d\u0438 \u0441\u043e\u0430\u0442] LT [\u0434\u0430]",sameElse:"L"},relativeTime:{future:"\u042f\u043a\u0438\u043d %s \u0438\u0447\u0438\u0434\u0430",past:"\u0411\u0438\u0440 \u043d\u0435\u0447\u0430 %s \u043e\u043b\u0434\u0438\u043d",s:"\u0444\u0443\u0440\u0441\u0430\u0442",ss:"%d \u0444\u0443\u0440\u0441\u0430\u0442",m:"\u0431\u0438\u0440 \u0434\u0430\u043a\u0438\u043a\u0430",mm:"%d \u0434\u0430\u043a\u0438\u043a\u0430",h:"\u0431\u0438\u0440 \u0441\u043e\u0430\u0442",hh:"%d \u0441\u043e\u0430\u0442",d:"\u0431\u0438\u0440 \u043a\u0443\u043d",dd:"%d \u043a\u0443\u043d",M:"\u0431\u0438\u0440 \u043e\u0439",MM:"%d \u043e\u0439",y:"\u0431\u0438\u0440 \u0439\u0438\u043b",yy:"%d \u0439\u0438\u043b"},week:{dow:1,doy:7}})}()},LvDl:function(e,t,n){(function(e){var r;(function(){var i,o=200,a="Expected a function",s="__lodash_placeholder__",u=1,l=2,c=4,h=1,d=2,f=1,p=2,_=4,m=8,g=16,v=32,y=64,b=128,T=256,E=512,x=800,M=16,A=1/0,S=9007199254740991,C=17976931348623157e292,P=NaN,R=4294967295,D=R-1,O=R>>>1,w=[["ary",b],["bind",f],["bindKey",p],["curry",m],["curryRight",g],["flip",E],["partial",v],["partialRight",y],["rearg",T]],L="[object Arguments]",I="[object Array]",F="[object AsyncFunction]",N="[object Boolean]",B="[object Date]",k="[object DOMException]",U="[object Error]",V="[object Function]",G="[object GeneratorFunction]",j="[object Map]",z="[object Number]",Y="[object Null]",H="[object Object]",W="[object Proxy]",X="[object RegExp]",K="[object Set]",Q="[object String]",q="[object Symbol]",Z="[object Undefined]",J="[object WeakMap]",$="[object ArrayBuffer]",ee="[object DataView]",te="[object Float32Array]",ne="[object Float64Array]",re="[object Int8Array]",ie="[object Int16Array]",oe="[object Int32Array]",ae="[object Uint8Array]",se="[object Uint8ClampedArray]",ue="[object Uint16Array]",le="[object Uint32Array]",ce=/\b__p \+= '';/g,he=/\b(__p \+=) '' \+/g,de=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fe=/&(?:amp|lt|gt|quot|#39);/g,pe=/[&<>"']/g,_e=RegExp(fe.source),me=RegExp(pe.source),ge=/<%-([\s\S]+?)%>/g,ve=/<%([\s\S]+?)%>/g,ye=/<%=([\s\S]+?)%>/g,be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/,Ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xe=/[\\^$.*+?()[\]{}|]/g,Me=RegExp(xe.source),Ae=/^\s+|\s+$/g,Se=/^\s+/,Ce=/\s+$/,Pe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Re=/\{\n\/\* \[wrapped with (.+)\] \*/,De=/,? & /,Oe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,we=/\\(\\)?/g,Le=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ie=/\w*$/,Fe=/^[-+]0x[0-9a-f]+$/i,Ne=/^0b[01]+$/i,Be=/^\[object .+?Constructor\]$/,ke=/^0o[0-7]+$/i,Ue=/^(?:0|[1-9]\d*)$/,Ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ge=/($^)/,je=/['\n\r\u2028\u2029\\]/g,ze="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ye="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",He="["+Ye+"]",We="["+ze+"]",Xe="\\d+",Ke="[a-z\\xdf-\\xf6\\xf8-\\xff]",Qe="[^\\ud800-\\udfff"+Ye+Xe+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",qe="\\ud83c[\\udffb-\\udfff]",Ze="[^\\ud800-\\udfff]",Je="(?:\\ud83c[\\udde6-\\uddff]){2}",$e="[\\ud800-\\udbff][\\udc00-\\udfff]",et="[A-Z\\xc0-\\xd6\\xd8-\\xde]",tt="(?:"+Ke+"|"+Qe+")",nt="(?:"+et+"|"+Qe+")",rt="(?:"+We+"|"+qe+")?",it="[\\ufe0e\\ufe0f]?"+rt+"(?:\\u200d(?:"+[Ze,Je,$e].join("|")+")[\\ufe0e\\ufe0f]?"+rt+")*",ot="(?:"+["[\\u2700-\\u27bf]",Je,$e].join("|")+")"+it,at="(?:"+[Ze+We+"?",We,Je,$e,"[\\ud800-\\udfff]"].join("|")+")",st=RegExp("['\u2019]","g"),ut=RegExp(We,"g"),lt=RegExp(qe+"(?="+qe+")|"+at+it,"g"),ct=RegExp([et+"?"+Ke+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[He,et,"$"].join("|")+")",nt+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[He,et+tt,"$"].join("|")+")",et+"?"+tt+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",et+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xe,ot].join("|"),"g"),ht=RegExp("[\\u200d\\ud800-\\udfff"+ze+"\\ufe0e\\ufe0f]"),dt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ft=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],pt=-1,_t={};_t[te]=_t[ne]=_t[re]=_t[ie]=_t[oe]=_t[ae]=_t[se]=_t[ue]=_t[le]=!0,_t[L]=_t[I]=_t[$]=_t[N]=_t[ee]=_t[B]=_t[U]=_t[V]=_t[j]=_t[z]=_t[H]=_t[X]=_t[K]=_t[Q]=_t[J]=!1;var mt={};mt[L]=mt[I]=mt[$]=mt[ee]=mt[N]=mt[B]=mt[te]=mt[ne]=mt[re]=mt[ie]=mt[oe]=mt[j]=mt[z]=mt[H]=mt[X]=mt[K]=mt[Q]=mt[q]=mt[ae]=mt[se]=mt[ue]=mt[le]=!0,mt[U]=mt[V]=mt[J]=!1;var gt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},vt=parseFloat,yt=parseInt,bt="object"==typeof global&&global&&global.Object===Object&&global,Tt="object"==typeof self&&self&&self.Object===Object&&self,Et=bt||Tt||Function("return this")(),xt=t&&!t.nodeType&&t,Mt=xt&&"object"==typeof e&&e&&!e.nodeType&&e,At=Mt&&Mt.exports===xt,St=At&&bt.process,Ct=function(){try{return Mt&&Mt.require&&Mt.require("util").types||St&&St.binding&&St.binding("util")}catch(e){}}(),Pt=Ct&&Ct.isArrayBuffer,Rt=Ct&&Ct.isDate,Dt=Ct&&Ct.isMap,Ot=Ct&&Ct.isRegExp,wt=Ct&&Ct.isSet,Lt=Ct&&Ct.isTypedArray;function It(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Ft(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Nt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function kt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Ut(e,t){return!(null==e||!e.length)&&Qt(e,t,0)>-1}function Vt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Gt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function jt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function zt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Yt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ht(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Wt=$t("length");function Xt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Kt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Qt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Kt(e,Zt,n)}function qt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Zt(e){return e!=e}function Jt(e,t){var n=null==e?0:e.length;return n?nn(e,t)/n:P}function $t(e){return function(t){return null==t?i:t[e]}}function en(e){return function(t){return null==e?i:e[t]}}function tn(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function nn(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function rn(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function on(e){return function(t){return e(t)}}function an(e,t){return Gt(t,function(t){return e[t]})}function sn(e,t){return e.has(t)}function un(e,t){for(var n=-1,r=e.length;++n<r&&Qt(t,e[n],0)>-1;);return n}function ln(e,t){for(var n=e.length;n--&&Qt(t,e[n],0)>-1;);return n}var cn=en({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),hn=en({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function dn(e){return"\\"+gt[e]}function fn(e){return ht.test(e)}function pn(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function _n(e,t){return function(n){return e(t(n))}}function mn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function gn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function vn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function yn(e){return fn(e)?function(e){for(var t=lt.lastIndex=0;lt.test(e);)++t;return t}(e):Wt(e)}function bn(e){return fn(e)?function(e){return e.match(lt)||[]}(e):function(e){return e.split("")}(e)}var Tn=en({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),En=function e(t){var n,r=(t=null==t?Et:En.defaults(Et.Object(),t,En.pick(Et,ft))).Array,ze=t.Date,Ye=t.Error,He=t.Function,We=t.Math,Xe=t.Object,Ke=t.RegExp,Qe=t.String,qe=t.TypeError,Ze=r.prototype,Je=Xe.prototype,$e=t["__core-js_shared__"],et=He.prototype.toString,tt=Je.hasOwnProperty,nt=0,rt=(n=/[^.]+$/.exec($e&&$e.keys&&$e.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",it=Je.toString,ot=et.call(Xe),at=Et._,lt=Ke("^"+et.call(tt).replace(xe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=At?t.Buffer:i,gt=t.Symbol,bt=t.Uint8Array,Tt=ht?ht.allocUnsafe:i,xt=_n(Xe.getPrototypeOf,Xe),Mt=Xe.create,St=Je.propertyIsEnumerable,Ct=Ze.splice,Wt=gt?gt.isConcatSpreadable:i,en=gt?gt.iterator:i,xn=gt?gt.toStringTag:i,Mn=function(){try{var e=xo(Xe,"defineProperty");return e({},"",{}),e}catch(t){}}(),An=t.clearTimeout!==Et.clearTimeout&&t.clearTimeout,Sn=ze&&ze.now!==Et.Date.now&&ze.now,Cn=t.setTimeout!==Et.setTimeout&&t.setTimeout,Pn=We.ceil,Rn=We.floor,Dn=Xe.getOwnPropertySymbols,On=ht?ht.isBuffer:i,wn=t.isFinite,Ln=Ze.join,In=_n(Xe.keys,Xe),Fn=We.max,Nn=We.min,Bn=ze.now,kn=t.parseInt,Un=We.random,Vn=Ze.reverse,Gn=xo(t,"DataView"),jn=xo(t,"Map"),zn=xo(t,"Promise"),Yn=xo(t,"Set"),Hn=xo(t,"WeakMap"),Wn=xo(Xe,"create"),Xn=Hn&&new Hn,Kn={},Qn=Qo(Gn),qn=Qo(jn),Zn=Qo(zn),Jn=Qo(Yn),$n=Qo(Hn),er=gt?gt.prototype:i,tr=er?er.valueOf:i,nr=er?er.toString:i;function rr(e){if(ds(e)&&!ts(e)&&!(e instanceof sr)){if(e instanceof ar)return e;if(tt.call(e,"__wrapped__"))return qo(e)}return new ar(e)}var ir=function(){function e(){}return function(t){if(!hs(t))return{};if(Mt)return Mt(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function or(){}function ar(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function sr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=R,this.__views__=[]}function ur(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function lr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function cr(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function hr(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new cr;++t<n;)this.add(e[t])}function dr(e){var t=this.__data__=new lr(e);this.size=t.size}function fr(e,t){var n=ts(e),r=!n&&es(e),i=!n&&!r&&os(e),o=!n&&!r&&!i&&bs(e),a=n||r||i||o,s=a?rn(e.length,Qe):[],u=s.length;for(var l in e)!t&&!tt.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Do(l,u))||s.push(l);return s}function pr(e){var t=e.length;return t?e[ui(0,t-1)]:i}function _r(e,t,n){(n===i||Za(e[t],n))&&(n!==i||t in e)||br(e,t,n)}function mr(e,t,n){var r=e[t];tt.call(e,t)&&Za(r,n)&&(n!==i||t in e)||br(e,t,n)}function gr(e,t){for(var n=e.length;n--;)if(Za(e[n][0],t))return n;return-1}function vr(e,t,n,r){return Cr(e,function(e,i,o){t(r,e,n(e),o)}),r}function yr(e,t){return e&&Gi(t,js(t),e)}function br(e,t,n){"__proto__"==t&&Mn?Mn(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Tr(e,t){for(var n=-1,o=t.length,a=r(o),s=null==e;++n<o;)a[n]=s?i:Bs(e,t[n]);return a}function Er(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function xr(e,t,n,r,o,a){var s,h=t&u,d=t&l,f=t&c;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!hs(e))return e;var p=ts(e);if(p){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&tt.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!h)return Vi(e,s)}else{var _=So(e),m=_==V||_==G;if(os(e))return Ii(e,h);if(_==H||_==L||m&&!o){if(s=d||m?{}:Po(e),!h)return d?function(e,t){return Gi(e,Ao(e),t)}(e,function(t,n){return t&&Gi(e,zs(e),t)}(s)):function(e,t){return Gi(e,Mo(e),t)}(e,yr(s,e))}else{if(!mt[_])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case $:return Fi(e);case N:case B:return new r(+e);case ee:return function(e,t){var n=t?Fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case te:case ne:case re:case ie:case oe:case ae:case se:case ue:case le:return Ni(e,n);case j:return new r;case z:case Q:return new r(e);case X:return function(e){var t=new e.constructor(e.source,Ie.exec(e));return t.lastIndex=e.lastIndex,t}(e);case K:return new r;case q:return tr?Xe(tr.call(e)):{}}}(e,_,h)}}a||(a=new dr);var g=a.get(e);if(g)return g;a.set(e,s),gs(e)?e.forEach(function(r){s.add(xr(r,t,n,r,e,a))}):fs(e)&&e.forEach(function(r,i){s.set(i,xr(r,t,n,i,e,a))});var v=p?i:(f?d?mo:_o:d?zs:js)(e);return Nt(v||e,function(r,i){v&&(r=e[i=r]),mr(s,i,xr(r,t,n,i,e,a))}),s}function Mr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Xe(e);r--;){var o=n[r],a=e[o];if(a===i&&!(o in e)||!(0,t[o])(a))return!1}return!0}function Ar(e,t,n){if("function"!=typeof e)throw new qe(a);return jo(function(){e.apply(i,n)},t)}function Sr(e,t,n,r){var i=-1,a=Ut,s=!0,u=e.length,l=[],c=t.length;if(!u)return l;n&&(t=Gt(t,on(n))),r?(a=Vt,s=!1):t.length>=o&&(a=sn,s=!1,t=new hr(t));e:for(;++i<u;){var h=e[i],d=null==n?h:n(h);if(h=r||0!==h?h:0,s&&d==d){for(var f=c;f--;)if(t[f]===d)continue e;l.push(h)}else a(t,d,r)||l.push(h)}return l}rr.templateSettings={escape:ge,evaluate:ve,interpolate:ye,variable:"",imports:{_:rr}},(rr.prototype=or.prototype).constructor=rr,(ar.prototype=ir(or.prototype)).constructor=ar,(sr.prototype=ir(or.prototype)).constructor=sr,ur.prototype.clear=function(){this.__data__=Wn?Wn(null):{},this.size=0},ur.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ur.prototype.get=function(e){var t=this.__data__;if(Wn){var n=t[e];return"__lodash_hash_undefined__"===n?i:n}return tt.call(t,e)?t[e]:i},ur.prototype.has=function(e){var t=this.__data__;return Wn?t[e]!==i:tt.call(t,e)},ur.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Wn&&t===i?"__lodash_hash_undefined__":t,this},lr.prototype.clear=function(){this.__data__=[],this.size=0},lr.prototype.delete=function(e){var t=this.__data__,n=gr(t,e);return!(n<0||(n==t.length-1?t.pop():Ct.call(t,n,1),--this.size,0))},lr.prototype.get=function(e){var t=this.__data__,n=gr(t,e);return n<0?i:t[n][1]},lr.prototype.has=function(e){return gr(this.__data__,e)>-1},lr.prototype.set=function(e,t){var n=this.__data__,r=gr(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},cr.prototype.clear=function(){this.size=0,this.__data__={hash:new ur,map:new(jn||lr),string:new ur}},cr.prototype.delete=function(e){var t=To(this,e).delete(e);return this.size-=t?1:0,t},cr.prototype.get=function(e){return To(this,e).get(e)},cr.prototype.has=function(e){return To(this,e).has(e)},cr.prototype.set=function(e,t){var n=To(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},hr.prototype.add=hr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},hr.prototype.has=function(e){return this.__data__.has(e)},dr.prototype.clear=function(){this.__data__=new lr,this.size=0},dr.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},dr.prototype.get=function(e){return this.__data__.get(e)},dr.prototype.has=function(e){return this.__data__.has(e)},dr.prototype.set=function(e,t){var n=this.__data__;if(n instanceof lr){var r=n.__data__;if(!jn||r.length<o-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new cr(r)}return n.set(e,t),this.size=n.size,this};var Cr=Yi(Fr),Pr=Yi(Nr,!0);function Rr(e,t){var n=!0;return Cr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function Dr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(u===i?s==s&&!ys(s):n(s,u)))var u=s,l=a}return l}function Or(e,t){var n=[];return Cr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function wr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=Ro),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?wr(s,t-1,n,r,i):jt(i,s):r||(i[i.length]=s)}return i}var Lr=Hi(),Ir=Hi(!0);function Fr(e,t){return e&&Lr(e,t,js)}function Nr(e,t){return e&&Ir(e,t,js)}function Br(e,t){return kt(t,function(t){return us(e[t])})}function kr(e,t){for(var n=0,r=(t=Di(t,e)).length;null!=e&&n<r;)e=e[Ko(t[n++])];return n&&n==r?e:i}function Ur(e,t,n){var r=t(e);return ts(e)?r:jt(r,n(e))}function Vr(e){return null==e?e===i?Z:Y:xn&&xn in Xe(e)?function(e){var t=tt.call(e,xn),n=e[xn];try{e[xn]=i;var r=!0}catch(a){}var o=it.call(e);return r&&(t?e[xn]=n:delete e[xn]),o}(e):function(e){return it.call(e)}(e)}function Gr(e,t){return e>t}function jr(e,t){return null!=e&&tt.call(e,t)}function zr(e,t){return null!=e&&t in Xe(e)}function Yr(e,t,n){for(var o=n?Vt:Ut,a=e[0].length,s=e.length,u=s,l=r(s),c=1/0,h=[];u--;){var d=e[u];u&&t&&(d=Gt(d,on(t))),c=Nn(d.length,c),l[u]=!n&&(t||a>=120&&d.length>=120)?new hr(u&&d):i}d=e[0];var f=-1,p=l[0];e:for(;++f<a&&h.length<c;){var _=d[f],m=t?t(_):_;if(_=n||0!==_?_:0,!(p?sn(p,m):o(h,m,n))){for(u=s;--u;){var g=l[u];if(!(g?sn(g,m):o(e[u],m,n)))continue e}p&&p.push(m),h.push(_)}}return h}function Hr(e,t,n){var r=null==(e=Uo(e,t=Di(t,e)))?e:e[Ko(sa(t))];return null==r?i:It(r,e,n)}function Wr(e){return ds(e)&&Vr(e)==L}function Xr(e,t,n,r,o){return e===t||(null==e||null==t||!ds(e)&&!ds(t)?e!=e&&t!=t:function(e,t,n,r,o,a){var s=ts(e),u=ts(t),l=s?I:So(e),c=u?I:So(t),f=(l=l==L?H:l)==H,p=(c=c==L?H:c)==H,_=l==c;if(_&&os(e)){if(!os(t))return!1;s=!0,f=!1}if(_&&!f)return a||(a=new dr),s||bs(e)?fo(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(l){case ee:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case $:return!(e.byteLength!=t.byteLength||!o(new bt(e),new bt(t)));case N:case B:case z:return Za(+e,+t);case U:return e.name==t.name&&e.message==t.message;case X:case Q:return e==t+"";case j:var s=pn;case K:if(s||(s=gn),e.size!=t.size&&!(r&h))return!1;var u=a.get(e);if(u)return u==t;r|=d,a.set(e,t);var c=fo(s(e),s(t),r,i,o,a);return a.delete(e),c;case q:if(tr)return tr.call(e)==tr.call(t)}return!1}(e,t,0,n,r,o,a);if(!(n&h)){var m=f&&tt.call(e,"__wrapped__"),g=p&&tt.call(t,"__wrapped__");if(m||g){var v=m?e.value():e,y=g?t.value():t;return a||(a=new dr),o(v,y,n,r,a)}}return!!_&&(a||(a=new dr),function(e,t,n,r,o,a){var s=n&h,u=_o(e),l=u.length;if(l!=_o(t).length&&!s)return!1;for(var c=l;c--;){var d=u[c];if(!(s?d in t:tt.call(t,d)))return!1}var f=a.get(e);if(f&&a.get(t))return f==t;var p=!0;a.set(e,t),a.set(t,e);for(var _=s;++c<l;){var m=e[d=u[c]],g=t[d];if(r)var v=s?r(g,m,d,t,e,a):r(m,g,d,e,t,a);if(!(v===i?m===g||o(m,g,n,r,a):v)){p=!1;break}_||(_="constructor"==d)}if(p&&!_){var y=e.constructor,b=t.constructor;y!=b&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b)&&(p=!1)}return a.delete(e),a.delete(t),p}(e,t,n,r,o,a))}(e,t,n,r,Xr,o))}function Kr(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=Xe(e);o--;){var u=n[o];if(s&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){var l=(u=n[o])[0],c=e[l],f=u[1];if(s&&u[2]){if(c===i&&!(l in e))return!1}else{var p=new dr;if(r)var _=r(c,f,l,e,t,p);if(!(_===i?Xr(f,c,h|d,r,p):_))return!1}}return!0}function Qr(e){return!(!hs(e)||(t=e,rt&&rt in t))&&(us(e)?lt:Be).test(Qo(e));var t}function qr(e){return"function"==typeof e?e:null==e?pu:"object"==typeof e?ts(e)?ti(e[0],e[1]):ei(e):xu(e)}function Zr(e){if(!Fo(e))return In(e);var t=[];for(var n in Xe(e))tt.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Jr(e,t){return e<t}function $r(e,t){var n=-1,i=rs(e)?r(e.length):[];return Cr(e,function(e,r,o){i[++n]=t(e,r,o)}),i}function ei(e){var t=Eo(e);return 1==t.length&&t[0][2]?Bo(t[0][0],t[0][1]):function(n){return n===e||Kr(n,e,t)}}function ti(e,t){return wo(e)&&No(t)?Bo(Ko(e),t):function(n){var r=Bs(n,e);return r===i&&r===t?ks(n,e):Xr(t,r,h|d)}}function ni(e,t,n,r,o){e!==t&&Lr(t,function(a,s){if(o||(o=new dr),hs(a))!function(e,t,n,r,o,a,s){var u=Vo(e,n),l=Vo(t,n),c=s.get(l);if(c)_r(e,n,c);else{var h=a?a(u,l,n+"",e,t,s):i,d=h===i;if(d){var f=ts(l),p=!f&&os(l),_=!f&&!p&&bs(l);h=l,f||p||_?ts(u)?h=u:is(u)?h=Vi(u):p?(d=!1,h=Ii(l,!0)):_?(d=!1,h=Ni(l,!0)):h=[]:_s(l)||es(l)?(h=u,es(u)?h=Ps(u):hs(u)&&!us(u)||(h=Po(l))):d=!1}d&&(s.set(l,h),o(h,l,r,a,s),s.delete(l)),_r(e,n,h)}}(e,t,s,n,ni,r,o);else{var u=r?r(Vo(e,s),a,s+"",e,t,o):i;u===i&&(u=a),_r(e,s,u)}},zs)}function ri(e,t){var n=e.length;if(n)return Do(t+=t<0?n:0,n)?e[t]:i}function ii(e,t,n){var r=-1;return t=Gt(t.length?t:[pu],on(bo())),function(e,t){var r=e.length;for(e.sort(function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var u=Bi(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)});r--;)e[r]=e[r].value;return e}($r(e,function(e,n,i){return{criteria:Gt(t,function(t){return t(e)}),index:++r,value:e}}))}function oi(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=kr(e,a);n(s,a)&&hi(o,Di(a,e),s)}return o}function ai(e,t,n,r){var i=r?qt:Qt,o=-1,a=t.length,s=e;for(e===t&&(t=Vi(t)),n&&(s=Gt(e,on(n)));++o<a;)for(var u=0,l=t[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==e&&Ct.call(s,u,1),Ct.call(e,u,1);return e}function si(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;Do(i)?Ct.call(e,i,1):Ei(e,i)}}return e}function ui(e,t){return e+Rn(Un()*(t-e+1))}function li(e,t){var n="";if(!e||t<1||t>S)return n;do{t%2&&(n+=e),(t=Rn(t/2))&&(e+=e)}while(t);return n}function ci(e,t){return zo(ko(e,t,pu),e+"")}function hi(e,t,n,r){if(!hs(e))return e;for(var o=-1,a=(t=Di(t,e)).length,s=a-1,u=e;null!=u&&++o<a;){var l=Ko(t[o]),c=n;if(o!=s){var h=u[l];(c=r?r(h,l,u):i)===i&&(c=hs(h)?h:Do(t[o+1])?[]:{})}mr(u,l,c),u=u[l]}return e}var di=Xn?function(e,t){return Xn.set(e,t),e}:pu,fi=Mn?function(e,t){return Mn(e,"toString",{configurable:!0,enumerable:!1,value:hu(t),writable:!0})}:pu;function pi(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function _i(e,t){var n;return Cr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function mi(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=O){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!ys(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return gi(e,t,pu,n)}function gi(e,t,n,r){t=n(t);for(var o=0,a=null==e?0:e.length,s=t!=t,u=null===t,l=ys(t),c=t===i;o<a;){var h=Rn((o+a)/2),d=n(e[h]),f=d!==i,p=null===d,_=d==d,m=ys(d);if(s)var g=r||_;else g=c?_&&(r||f):u?_&&f&&(r||!p):l?_&&f&&!p&&(r||!m):!p&&!m&&(r?d<=t:d<t);g?o=h+1:a=h}return Nn(a,D)}function vi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Za(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function yi(e){return"number"==typeof e?e:ys(e)?P:+e}function bi(e){if("string"==typeof e)return e;if(ts(e))return Gt(e,bi)+"";if(ys(e))return nr?nr.call(e):"";var t=e+"";return"0"==t&&1/e==-A?"-0":t}function Ti(e,t,n){var r=-1,i=Ut,a=e.length,s=!0,u=[],l=u;if(n)s=!1,i=Vt;else if(a>=o){var c=t?null:ao(e);if(c)return gn(c);s=!1,i=sn,l=new hr}else l=t?[]:u;e:for(;++r<a;){var h=e[r],d=t?t(h):h;if(h=n||0!==h?h:0,s&&d==d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),u.push(h)}else i(l,d,n)||(l!==u&&l.push(d),u.push(h))}return u}function Ei(e,t){return null==(e=Uo(e,t=Di(t,e)))||delete e[Ko(sa(t))]}function xi(e,t,n,r){return hi(e,t,n(kr(e,t)),r)}function Mi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?pi(e,r?0:o,r?o+1:i):pi(e,r?o+1:0,r?i:o)}function Ai(e,t){var n=e;return n instanceof sr&&(n=n.value()),zt(t,function(e,t){return t.func.apply(t.thisArg,jt([e],t.args))},n)}function Si(e,t,n){var i=e.length;if(i<2)return i?Ti(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],u=-1;++u<i;)u!=o&&(a[o]=Sr(a[o]||s,e[u],t,n));return Ti(wr(a,1),t,n)}function Ci(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;)n(s,e[r],r<a?t[r]:i);return s}function Pi(e){return is(e)?e:[]}function Ri(e){return"function"==typeof e?e:pu}function Di(e,t){return ts(e)?e:wo(e,t)?[e]:Xo(Rs(e))}var Oi=ci;function wi(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:pi(e,t,n)}var Li=An||function(e){return Et.clearTimeout(e)};function Ii(e,t){if(t)return e.slice();var n=e.length,r=Tt?Tt(n):new e.constructor(n);return e.copy(r),r}function Fi(e){var t=new e.constructor(e.byteLength);return new bt(t).set(new bt(e)),t}function Ni(e,t){var n=t?Fi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Bi(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,a=ys(e),s=t!==i,u=null===t,l=t==t,c=ys(t);if(!u&&!c&&!a&&e>t||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!o)return 1;if(!r&&!a&&!c&&e<t||c&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}function ki(e,t,n,i){for(var o=-1,a=e.length,s=n.length,u=-1,l=t.length,c=Fn(a-s,0),h=r(l+c),d=!i;++u<l;)h[u]=t[u];for(;++o<s;)(d||o<a)&&(h[n[o]]=e[o]);for(;c--;)h[u++]=e[o++];return h}function Ui(e,t,n,i){for(var o=-1,a=e.length,s=-1,u=n.length,l=-1,c=t.length,h=Fn(a-u,0),d=r(h+c),f=!i;++o<h;)d[o]=e[o];for(var p=o;++l<c;)d[p+l]=t[l];for(;++s<u;)(f||o<a)&&(d[p+n[s]]=e[o++]);return d}function Vi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function Gi(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var u=t[a],l=r?r(n[u],e[u],u,n,e):i;l===i&&(l=e[u]),o?br(n,u,l):mr(n,u,l)}return n}function ji(e,t){return function(n,r){var i=ts(n)?Ft:vr,o=t?t():{};return i(n,e,bo(r,2),o)}}function zi(e){return ci(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&Oo(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=Xe(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t})}function Yi(e,t){return function(n,r){if(null==n)return n;if(!rs(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Xe(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Hi(e){return function(t,n,r){for(var i=-1,o=Xe(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}function Wi(e){return function(t){var n=fn(t=Rs(t))?bn(t):i,r=n?n[0]:t.charAt(0),o=n?wi(n,1).join(""):t.slice(1);return r[e]()+o}}function Xi(e){return function(t){return zt(uu(eu(t).replace(st,"")),e,"")}}function Ki(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=ir(e.prototype),r=e.apply(n,t);return hs(r)?r:n}}function Qi(e){return function(t,n,r){var o=Xe(t);if(!rs(t)){var a=bo(n,3);t=js(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function qi(e){return po(function(t){var n=t.length,r=n,o=ar.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new qe(a);if(o&&!u&&"wrapper"==vo(s))var u=new ar([],!0)}for(r=u?r:n;++r<n;){var l=vo(s=t[r]),c="wrapper"==l?go(s):i;u=c&&Lo(c[0])&&c[1]==(b|m|v|T)&&!c[4].length&&1==c[9]?u[vo(c[0])].apply(u,c[3]):1==s.length&&Lo(s)?u[l]():u.thru(s)}return function(){var e=arguments,r=e[0];if(u&&1==e.length&&ts(r))return u.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function Zi(e,t,n,o,a,s,u,l,c,h){var d=t&b,_=t&f,v=t&p,y=t&(m|g),T=t&E,x=v?i:Ki(e);return function f(){for(var p=arguments.length,m=r(p),g=p;g--;)m[g]=arguments[g];if(y)var b=yo(f),E=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(m,b);if(o&&(m=ki(m,o,a,y)),s&&(m=Ui(m,s,u,y)),p-=E,y&&p<h){var M=mn(m,b);return io(e,t,Zi,f.placeholder,n,m,M,l,c,h-p)}var A=_?n:this,S=v?A[e]:e;return p=m.length,l?m=function(e,t){for(var n=e.length,r=Nn(t.length,n),o=Vi(e);r--;){var a=t[r];e[r]=Do(a,n)?o[a]:i}return e}(m,l):T&&p>1&&m.reverse(),d&&c<p&&(m.length=c),this&&this!==Et&&this instanceof f&&(S=x||Ki(S)),S.apply(A,m)}}function Ji(e,t){return function(n,r){return function(e,t,n,r){return Fr(e,function(e,i,o){t(r,n(e),i,o)}),r}(n,e,t(r),{})}}function $i(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=bi(n),r=bi(r)):(n=yi(n),r=yi(r)),o=e(n,r)}return o}}function eo(e){return po(function(t){return t=Gt(t,on(bo())),ci(function(n){var r=this;return e(t,function(e){return It(e,r,n)})})})}function to(e,t){var n=(t=t===i?" ":bi(t)).length;if(n<2)return n?li(t,e):t;var r=li(t,Pn(e/yn(t)));return fn(t)?wi(bn(r),0,e).join(""):r.slice(0,e)}function no(e){return function(t,n,o){return o&&"number"!=typeof o&&Oo(t,n,o)&&(n=o=i),t=Ms(t),n===i?(n=t,t=0):n=Ms(n),function(e,t,n,i){for(var o=-1,a=Fn(Pn((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,o=o===i?t<n?1:-1:Ms(o),e)}}function ro(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Cs(t),n=Cs(n)),e(t,n)}}function io(e,t,n,r,o,a,s,u,l,c){var h=t&m;t|=h?v:y,(t&=~(h?y:v))&_||(t&=~(f|p));var d=[e,t,o,h?a:i,h?s:i,h?i:a,h?i:s,u,l,c],g=n.apply(i,d);return Lo(e)&&Go(g,d),g.placeholder=r,Yo(g,e,t)}function oo(e){var t=We[e];return function(e,n){if(e=Cs(e),(n=null==n?0:Nn(As(n),292))&&wn(e)){var r=(Rs(e)+"e").split("e");return+((r=(Rs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var ao=Yn&&1/gn(new Yn([,-0]))[1]==A?function(e){return new Yn(e)}:yu;function so(e){return function(t){var n=So(t);return n==j?pn(t):n==K?vn(t):function(e,t){return Gt(t,function(t){return[t,e[t]]})}(t,e(t))}}function uo(e,t,n,o,u,l,c,h){var d=t&p;if(!d&&"function"!=typeof e)throw new qe(a);var E=o?o.length:0;if(E||(t&=~(v|y),o=u=i),c=c===i?c:Fn(As(c),0),h=h===i?h:As(h),E-=u?u.length:0,t&y){var x=o,M=u;o=u=i}var A=d?i:go(e),S=[e,t,n,o,u,x,M,l,c,h];if(A&&function(e,t){var n=e[1],r=t[1],i=n|r;if(!(i<(f|p|b)||r==b&&n==m||r==b&&n==T&&e[7].length<=t[8]||r==(b|T)&&t[7].length<=t[8]&&n==m))return e;r&f&&(e[2]=t[2],i|=n&f?0:_);var o=t[3];if(o){var a=e[3];e[3]=a?ki(a,o,t[4]):o,e[4]=a?mn(e[3],s):t[4]}(o=t[5])&&(e[5]=(a=e[5])?Ui(a,o,t[6]):o,e[6]=a?mn(e[5],s):t[6]),(o=t[7])&&(e[7]=o),r&b&&(e[8]=null==e[8]?t[8]:Nn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(S,A),e=S[0],t=S[1],n=S[2],o=S[3],u=S[4],!(h=S[9]=S[9]===i?d?0:e.length:Fn(S[9]-E,0))&&t&(m|g)&&(t&=~(m|g)),t&&t!=f)C=t==m||t==g?function(e,t,n){var o=Ki(e);return function a(){for(var s=arguments.length,u=r(s),l=s,c=yo(a);l--;)u[l]=arguments[l];var h=s<3&&u[0]!==c&&u[s-1]!==c?[]:mn(u,c);return(s-=h.length)<n?io(e,t,Zi,a.placeholder,i,u,h,i,i,n-s):It(this&&this!==Et&&this instanceof a?o:e,this,u)}}(e,t,h):t!=v&&t!=(f|v)||u.length?Zi.apply(i,S):function(e,t,n,i){var o=t&f,a=Ki(e);return function t(){for(var s=-1,u=arguments.length,l=-1,c=i.length,h=r(c+u),d=this&&this!==Et&&this instanceof t?a:e;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++s];return It(d,o?n:this,h)}}(e,t,n,o);else var C=function(e,t,n){var r=t&f,i=Ki(e);return function t(){return(this&&this!==Et&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Yo((A?di:Go)(C,S),e,t)}function lo(e,t,n,r){return e===i||Za(e,Je[n])&&!tt.call(r,n)?t:e}function co(e,t,n,r,o,a){return hs(e)&&hs(t)&&(a.set(t,e),ni(e,t,i,co,a),a.delete(t)),e}function ho(e){return _s(e)?i:e}function fo(e,t,n,r,o,a){var s=n&h,u=e.length,l=t.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(e);if(c&&a.get(t))return c==t;var f=-1,p=!0,_=n&d?new hr:i;for(a.set(e,t),a.set(t,e);++f<u;){var m=e[f],g=t[f];if(r)var v=s?r(g,m,f,t,e,a):r(m,g,f,e,t,a);if(v!==i){if(v)continue;p=!1;break}if(_){if(!Ht(t,function(e,t){if(!sn(_,t)&&(m===e||o(m,e,n,r,a)))return _.push(t)})){p=!1;break}}else if(m!==g&&!o(m,g,n,r,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function po(e){return zo(ko(e,i,na),e+"")}function _o(e){return Ur(e,js,Mo)}function mo(e){return Ur(e,zs,Ao)}var go=Xn?function(e){return Xn.get(e)}:yu;function vo(e){for(var t=e.name+"",n=Kn[t],r=tt.call(Kn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function yo(e){return(tt.call(rr,"placeholder")?rr:e).placeholder}function bo(){var e=rr.iteratee||_u;return e=e===_u?qr:e,arguments.length?e(arguments[0],arguments[1]):e}function To(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Eo(e){for(var t=js(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,No(i)]}return t}function xo(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return Qr(n)?n:i}var Mo=Dn?function(e){return null==e?[]:(e=Xe(e),kt(Dn(e),function(t){return St.call(e,t)}))}:Su,Ao=Dn?function(e){for(var t=[];e;)jt(t,Mo(e)),e=xt(e);return t}:Su,So=Vr;function Co(e,t,n){for(var r=-1,i=(t=Di(t,e)).length,o=!1;++r<i;){var a=Ko(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&cs(i)&&Do(a,i)&&(ts(e)||es(e))}function Po(e){return"function"!=typeof e.constructor||Fo(e)?{}:ir(xt(e))}function Ro(e){return ts(e)||es(e)||!!(Wt&&e&&e[Wt])}function Do(e,t){var n=typeof e;return!!(t=null==t?S:t)&&("number"==n||"symbol"!=n&&Ue.test(e))&&e>-1&&e%1==0&&e<t}function Oo(e,t,n){if(!hs(n))return!1;var r=typeof t;return!!("number"==r?rs(n)&&Do(t,n.length):"string"==r&&t in n)&&Za(n[t],e)}function wo(e,t){if(ts(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ys(e))||Te.test(e)||!be.test(e)||null!=t&&e in Xe(t)}function Lo(e){var t=vo(e),n=rr[t];if("function"!=typeof n||!(t in sr.prototype))return!1;if(e===n)return!0;var r=go(n);return!!r&&e===r[0]}(Gn&&So(new Gn(new ArrayBuffer(1)))!=ee||jn&&So(new jn)!=j||zn&&"[object Promise]"!=So(zn.resolve())||Yn&&So(new Yn)!=K||Hn&&So(new Hn)!=J)&&(So=function(e){var t=Vr(e),n=t==H?e.constructor:i,r=n?Qo(n):"";if(r)switch(r){case Qn:return ee;case qn:return j;case Zn:return"[object Promise]";case Jn:return K;case $n:return J}return t});var Io=$e?us:Cu;function Fo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Je)}function No(e){return e==e&&!hs(e)}function Bo(e,t){return function(n){return null!=n&&n[e]===t&&(t!==i||e in Xe(n))}}function ko(e,t,n){return t=Fn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=Fn(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var u=r(t+1);++o<t;)u[o]=i[o];return u[t]=n(s),It(e,this,u)}}function Uo(e,t){return t.length<2?e:kr(e,pi(t,0,-1))}function Vo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Go=Ho(di),jo=Cn||function(e,t){return Et.setTimeout(e,t)},zo=Ho(fi);function Yo(e,t,n){var r=t+"";return zo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Pe,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Nt(w,function(n){var r="_."+n[0];t&n[1]&&!Ut(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(Re);return t?t[1].split(De):[]}(r),n)))}function Ho(e){var t=0,n=0;return function(){var r=Bn(),o=M-(r-n);if(n=r,o>0){if(++t>=x)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Wo(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=ui(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var Xo=function(e){var t=Ha(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ee,function(e,n,r,i){t.push(r?i.replace(we,"$1"):n||e)}),t},function(e){return 500===n.size&&n.clear(),e}),n=t.cache;return t}();function Ko(e){if("string"==typeof e||ys(e))return e;var t=e+"";return"0"==t&&1/e==-A?"-0":t}function Qo(e){if(null!=e){try{return et.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function qo(e){if(e instanceof sr)return e.clone();var t=new ar(e.__wrapped__,e.__chain__);return t.__actions__=Vi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Zo=ci(function(e,t){return is(e)?Sr(e,wr(t,1,is,!0)):[]}),Jo=ci(function(e,t){var n=sa(t);return is(n)&&(n=i),is(e)?Sr(e,wr(t,1,is,!0),bo(n,2)):[]}),$o=ci(function(e,t){var n=sa(t);return is(n)&&(n=i),is(e)?Sr(e,wr(t,1,is,!0),i,n):[]});function ea(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:As(n);return i<0&&(i=Fn(r+i,0)),Kt(e,bo(t,3),i)}function ta(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=As(n),o=n<0?Fn(r+o,0):Nn(o,r-1)),Kt(e,bo(t,3),o,!0)}function na(e){return null!=e&&e.length?wr(e,1):[]}function ra(e){return e&&e.length?e[0]:i}var ia=ci(function(e){var t=Gt(e,Pi);return t.length&&t[0]===e[0]?Yr(t):[]}),oa=ci(function(e){var t=sa(e),n=Gt(e,Pi);return t===sa(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Yr(n,bo(t,2)):[]}),aa=ci(function(e){var t=sa(e),n=Gt(e,Pi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Yr(n,i,t):[]});function sa(e){var t=null==e?0:e.length;return t?e[t-1]:i}var ua=ci(la);function la(e,t){return e&&e.length&&t&&t.length?ai(e,t):e}var ca=po(function(e,t){var n=null==e?0:e.length,r=Tr(e,t);return si(e,Gt(t,function(e){return Do(e,n)?+e:e}).sort(Bi)),r});function ha(e){return null==e?e:Vn.call(e)}var da=ci(function(e){return Ti(wr(e,1,is,!0))}),fa=ci(function(e){var t=sa(e);return is(t)&&(t=i),Ti(wr(e,1,is,!0),bo(t,2))}),pa=ci(function(e){var t=sa(e);return t="function"==typeof t?t:i,Ti(wr(e,1,is,!0),i,t)});function _a(e){if(!e||!e.length)return[];var t=0;return e=kt(e,function(e){if(is(e))return t=Fn(e.length,t),!0}),rn(t,function(t){return Gt(e,$t(t))})}function ma(e,t){if(!e||!e.length)return[];var n=_a(e);return null==t?n:Gt(n,function(e){return It(t,i,e)})}var ga=ci(function(e,t){return is(e)?Sr(e,t):[]}),va=ci(function(e){return Si(kt(e,is))}),ya=ci(function(e){var t=sa(e);return is(t)&&(t=i),Si(kt(e,is),bo(t,2))}),ba=ci(function(e){var t=sa(e);return t="function"==typeof t?t:i,Si(kt(e,is),i,t)}),Ta=ci(_a),Ea=ci(function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ma(e,n)});function xa(e){var t=rr(e);return t.__chain__=!0,t}function Ma(e,t){return t(e)}var Aa=po(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return Tr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof sr&&Do(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Ma,args:[o],thisArg:i}),new ar(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(i),e})):this.thru(o)}),Sa=ji(function(e,t,n){tt.call(e,n)?++e[n]:br(e,n,1)}),Ca=Qi(ea),Pa=Qi(ta);function Ra(e,t){return(ts(e)?Nt:Cr)(e,bo(t,3))}function Da(e,t){return(ts(e)?function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}:Pr)(e,bo(t,3))}var Oa=ji(function(e,t,n){tt.call(e,n)?e[n].push(t):br(e,n,[t])}),wa=ci(function(e,t,n){var i=-1,o="function"==typeof t,a=rs(e)?r(e.length):[];return Cr(e,function(e){a[++i]=o?It(t,e,n):Hr(e,t,n)}),a}),La=ji(function(e,t,n){br(e,n,t)});function Ia(e,t){return(ts(e)?Gt:$r)(e,bo(t,3))}var Fa=ji(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Na=ci(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Oo(e,t[0],t[1])?t=[]:n>2&&Oo(t[0],t[1],t[2])&&(t=[t[0]]),ii(e,wr(t,1),[])}),Ba=Sn||function(){return Et.Date.now()};function ka(e,t,n){return t=n?i:t,uo(e,b,i,i,i,i,t=e&&null==t?e.length:t)}function Ua(e,t){var n;if("function"!=typeof t)throw new qe(a);return e=As(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Va=ci(function(e,t,n){var r=f;if(n.length){var i=mn(n,yo(Va));r|=v}return uo(e,r,t,n,i)}),Ga=ci(function(e,t,n){var r=f|p;if(n.length){var i=mn(n,yo(Ga));r|=v}return uo(t,r,e,n,i)});function ja(e,t,n){var r,o,s,u,l,c,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new qe(a);function _(t){var n=r,a=o;return r=o=i,h=t,u=e.apply(a,n)}function m(e){var n=e-c;return c===i||n>=t||n<0||f&&e-h>=s}function g(){var e=Ba();if(m(e))return v(e);l=jo(g,function(e){var n=t-(e-c);return f?Nn(n,s-(e-h)):n}(e))}function v(e){return l=i,p&&r?_(e):(r=o=i,u)}function y(){var e=Ba(),n=m(e);if(r=arguments,o=this,c=e,n){if(l===i)return function(e){return h=e,l=jo(g,t),d?_(e):u}(c);if(f)return Li(l),l=jo(g,t),_(c)}return l===i&&(l=jo(g,t)),u}return t=Cs(t)||0,hs(n)&&(d=!!n.leading,s=(f="maxWait"in n)?Fn(Cs(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),y.cancel=function(){l!==i&&Li(l),h=0,r=c=o=l=i},y.flush=function(){return l===i?u:v(Ba())},y}var za=ci(function(e,t){return Ar(e,1,t)}),Ya=ci(function(e,t,n){return Ar(e,Cs(t)||0,n)});function Ha(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new qe(a);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ha.Cache||cr),n}function Wa(e){if("function"!=typeof e)throw new qe(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ha.Cache=cr;var Xa=Oi(function(e,t){var n=(t=1==t.length&&ts(t[0])?Gt(t[0],on(bo())):Gt(wr(t,1),on(bo()))).length;return ci(function(r){for(var i=-1,o=Nn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return It(e,this,r)})}),Ka=ci(function(e,t){var n=mn(t,yo(Ka));return uo(e,v,i,t,n)}),Qa=ci(function(e,t){var n=mn(t,yo(Qa));return uo(e,y,i,t,n)}),qa=po(function(e,t){return uo(e,T,i,i,i,t)});function Za(e,t){return e===t||e!=e&&t!=t}var Ja=ro(Gr),$a=ro(function(e,t){return e>=t}),es=Wr(function(){return arguments}())?Wr:function(e){return ds(e)&&tt.call(e,"callee")&&!St.call(e,"callee")},ts=r.isArray,ns=Pt?on(Pt):function(e){return ds(e)&&Vr(e)==$};function rs(e){return null!=e&&cs(e.length)&&!us(e)}function is(e){return ds(e)&&rs(e)}var os=On||Cu,as=Rt?on(Rt):function(e){return ds(e)&&Vr(e)==B};function ss(e){if(!ds(e))return!1;var t=Vr(e);return t==U||t==k||"string"==typeof e.message&&"string"==typeof e.name&&!_s(e)}function us(e){if(!hs(e))return!1;var t=Vr(e);return t==V||t==G||t==F||t==W}function ls(e){return"number"==typeof e&&e==As(e)}function cs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=S}function hs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ds(e){return null!=e&&"object"==typeof e}var fs=Dt?on(Dt):function(e){return ds(e)&&So(e)==j};function ps(e){return"number"==typeof e||ds(e)&&Vr(e)==z}function _s(e){if(!ds(e)||Vr(e)!=H)return!1;var t=xt(e);if(null===t)return!0;var n=tt.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&et.call(n)==ot}var ms=Ot?on(Ot):function(e){return ds(e)&&Vr(e)==X},gs=wt?on(wt):function(e){return ds(e)&&So(e)==K};function vs(e){return"string"==typeof e||!ts(e)&&ds(e)&&Vr(e)==Q}function ys(e){return"symbol"==typeof e||ds(e)&&Vr(e)==q}var bs=Lt?on(Lt):function(e){return ds(e)&&cs(e.length)&&!!_t[Vr(e)]},Ts=ro(Jr),Es=ro(function(e,t){return e<=t});function xs(e){if(!e)return[];if(rs(e))return vs(e)?bn(e):Vi(e);if(en&&e[en])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[en]());var t=So(e);return(t==j?pn:t==K?gn:Zs)(e)}function Ms(e){return e?(e=Cs(e))===A||e===-A?(e<0?-1:1)*C:e==e?e:0:0===e?e:0}function As(e){var t=Ms(e),n=t%1;return t==t?n?t-n:t:0}function Ss(e){return e?Er(As(e),0,R):0}function Cs(e){if("number"==typeof e)return e;if(ys(e))return P;if(hs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=hs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Ae,"");var n=Ne.test(e);return n||ke.test(e)?yt(e.slice(2),n?2:8):Fe.test(e)?P:+e}function Ps(e){return Gi(e,zs(e))}function Rs(e){return null==e?"":bi(e)}var Ds=zi(function(e,t){if(Fo(t)||rs(t))Gi(t,js(t),e);else for(var n in t)tt.call(t,n)&&mr(e,n,t[n])}),Os=zi(function(e,t){Gi(t,zs(t),e)}),ws=zi(function(e,t,n,r){Gi(t,zs(t),e,r)}),Ls=zi(function(e,t,n,r){Gi(t,js(t),e,r)}),Is=po(Tr),Fs=ci(function(e,t){e=Xe(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&Oo(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=zs(a),u=-1,l=s.length;++u<l;){var c=s[u],h=e[c];(h===i||Za(h,Je[c])&&!tt.call(e,c))&&(e[c]=a[c])}return e}),Ns=ci(function(e){return e.push(i,co),It(Hs,i,e)});function Bs(e,t,n){var r=null==e?i:kr(e,t);return r===i?n:r}function ks(e,t){return null!=e&&Co(e,t,zr)}var Us=Ji(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=it.call(t)),e[t]=n},hu(pu)),Vs=Ji(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=it.call(t)),tt.call(e,t)?e[t].push(n):e[t]=[n]},bo),Gs=ci(Hr);function js(e){return rs(e)?fr(e):Zr(e)}function zs(e){return rs(e)?fr(e,!0):function(e){if(!hs(e))return function(e){var t=[];if(null!=e)for(var n in Xe(e))t.push(n);return t}(e);var t=Fo(e),n=[];for(var r in e)("constructor"!=r||!t&&tt.call(e,r))&&n.push(r);return n}(e)}var Ys=zi(function(e,t,n){ni(e,t,n)}),Hs=zi(function(e,t,n,r){ni(e,t,n,r)}),Ws=po(function(e,t){var n={};if(null==e)return n;var r=!1;t=Gt(t,function(t){return t=Di(t,e),r||(r=t.length>1),t}),Gi(e,mo(e),n),r&&(n=xr(n,u|l|c,ho));for(var i=t.length;i--;)Ei(n,t[i]);return n}),Xs=po(function(e,t){return null==e?{}:function(e,t){return oi(e,t,function(t,n){return ks(e,n)})}(e,t)});function Ks(e,t){if(null==e)return{};var n=Gt(mo(e),function(e){return[e]});return t=bo(t),oi(e,n,function(e,n){return t(e,n[0])})}var Qs=so(js),qs=so(zs);function Zs(e){return null==e?[]:an(e,js(e))}var Js=Xi(function(e,t,n){return t=t.toLowerCase(),e+(n?$s(t):t)});function $s(e){return su(Rs(e).toLowerCase())}function eu(e){return(e=Rs(e))&&e.replace(Ve,cn).replace(ut,"")}var tu=Xi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),nu=Xi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),ru=Wi("toLowerCase"),iu=Xi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),ou=Xi(function(e,t,n){return e+(n?" ":"")+su(t)}),au=Xi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),su=Wi("toUpperCase");function uu(e,t,n){return e=Rs(e),(t=n?i:t)===i?function(e){return dt.test(e)}(e)?function(e){return e.match(ct)||[]}(e):function(e){return e.match(Oe)||[]}(e):e.match(t)||[]}var lu=ci(function(e,t){try{return It(e,i,t)}catch(n){return ss(n)?n:new Ye(n)}}),cu=po(function(e,t){return Nt(t,function(t){t=Ko(t),br(e,t,Va(e[t],e))}),e});function hu(e){return function(){return e}}var du=qi(),fu=qi(!0);function pu(e){return e}function _u(e){return qr("function"==typeof e?e:xr(e,u))}var mu=ci(function(e,t){return function(n){return Hr(n,e,t)}}),gu=ci(function(e,t){return function(n){return Hr(e,n,t)}});function vu(e,t,n){var r=js(t),i=Br(t,r);null!=n||hs(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Br(t,js(t)));var o=!(hs(n)&&"chain"in n&&!n.chain),a=us(e);return Nt(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Vi(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,jt([this.value()],arguments))})}),e}function yu(){}var bu=eo(Gt),Tu=eo(Bt),Eu=eo(Ht);function xu(e){return wo(e)?$t(Ko(e)):function(e){return function(t){return kr(t,e)}}(e)}var Mu=no(),Au=no(!0);function Su(){return[]}function Cu(){return!1}var Pu,Ru=$i(function(e,t){return e+t},0),Du=oo("ceil"),Ou=$i(function(e,t){return e/t},1),wu=oo("floor"),Lu=$i(function(e,t){return e*t},1),Iu=oo("round"),Fu=$i(function(e,t){return e-t},0);return rr.after=function(e,t){if("function"!=typeof t)throw new qe(a);return e=As(e),function(){if(--e<1)return t.apply(this,arguments)}},rr.ary=ka,rr.assign=Ds,rr.assignIn=Os,rr.assignInWith=ws,rr.assignWith=Ls,rr.at=Is,rr.before=Ua,rr.bind=Va,rr.bindAll=cu,rr.bindKey=Ga,rr.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return ts(e)?e:[e]},rr.chain=xa,rr.chunk=function(e,t,n){t=(n?Oo(e,t,n):t===i)?1:Fn(As(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,u=r(Pn(o/t));a<o;)u[s++]=pi(e,a,a+=t);return u},rr.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},rr.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return jt(ts(n)?Vi(n):[n],wr(t,1))},rr.cond=function(e){var t=null==e?0:e.length,n=bo();return e=t?Gt(e,function(e){if("function"!=typeof e[1])throw new qe(a);return[n(e[0]),e[1]]}):[],ci(function(n){for(var r=-1;++r<t;){var i=e[r];if(It(i[0],this,n))return It(i[1],this,n)}})},rr.conforms=function(e){return function(e){var t=js(e);return function(n){return Mr(n,e,t)}}(xr(e,u))},rr.constant=hu,rr.countBy=Sa,rr.create=function(e,t){var n=ir(e);return null==t?n:yr(n,t)},rr.curry=function e(t,n,r){var o=uo(t,m,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},rr.curryRight=function e(t,n,r){var o=uo(t,g,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},rr.debounce=ja,rr.defaults=Fs,rr.defaultsDeep=Ns,rr.defer=za,rr.delay=Ya,rr.difference=Zo,rr.differenceBy=Jo,rr.differenceWith=$o,rr.drop=function(e,t,n){var r=null==e?0:e.length;return r?pi(e,(t=n||t===i?1:As(t))<0?0:t,r):[]},rr.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?pi(e,0,(t=r-(t=n||t===i?1:As(t)))<0?0:t):[]},rr.dropRightWhile=function(e,t){return e&&e.length?Mi(e,bo(t,3),!0,!0):[]},rr.dropWhile=function(e,t){return e&&e.length?Mi(e,bo(t,3),!0):[]},rr.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&Oo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=As(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:As(r))<0&&(r+=o),r=n>r?0:Ss(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},rr.filter=function(e,t){return(ts(e)?kt:Or)(e,bo(t,3))},rr.flatMap=function(e,t){return wr(Ia(e,t),1)},rr.flatMapDeep=function(e,t){return wr(Ia(e,t),A)},rr.flatMapDepth=function(e,t,n){return n=n===i?1:As(n),wr(Ia(e,t),n)},rr.flatten=na,rr.flattenDeep=function(e){return null!=e&&e.length?wr(e,A):[]},rr.flattenDepth=function(e,t){return null!=e&&e.length?wr(e,t=t===i?1:As(t)):[]},rr.flip=function(e){return uo(e,E)},rr.flow=du,rr.flowRight=fu,rr.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},rr.functions=function(e){return null==e?[]:Br(e,js(e))},rr.functionsIn=function(e){return null==e?[]:Br(e,zs(e))},rr.groupBy=Oa,rr.initial=function(e){return null!=e&&e.length?pi(e,0,-1):[]},rr.intersection=ia,rr.intersectionBy=oa,rr.intersectionWith=aa,rr.invert=Us,rr.invertBy=Vs,rr.invokeMap=wa,rr.iteratee=_u,rr.keyBy=La,rr.keys=js,rr.keysIn=zs,rr.map=Ia,rr.mapKeys=function(e,t){var n={};return t=bo(t,3),Fr(e,function(e,r,i){br(n,t(e,r,i),e)}),n},rr.mapValues=function(e,t){var n={};return t=bo(t,3),Fr(e,function(e,r,i){br(n,r,t(e,r,i))}),n},rr.matches=function(e){return ei(xr(e,u))},rr.matchesProperty=function(e,t){return ti(e,xr(t,u))},rr.memoize=Ha,rr.merge=Ys,rr.mergeWith=Hs,rr.method=mu,rr.methodOf=gu,rr.mixin=vu,rr.negate=Wa,rr.nthArg=function(e){return e=As(e),ci(function(t){return ri(t,e)})},rr.omit=Ws,rr.omitBy=function(e,t){return Ks(e,Wa(bo(t)))},rr.once=function(e){return Ua(2,e)},rr.orderBy=function(e,t,n,r){return null==e?[]:(ts(t)||(t=null==t?[]:[t]),ts(n=r?i:n)||(n=null==n?[]:[n]),ii(e,t,n))},rr.over=bu,rr.overArgs=Xa,rr.overEvery=Tu,rr.overSome=Eu,rr.partial=Ka,rr.partialRight=Qa,rr.partition=Fa,rr.pick=Xs,rr.pickBy=Ks,rr.property=xu,rr.propertyOf=function(e){return function(t){return null==e?i:kr(e,t)}},rr.pull=ua,rr.pullAll=la,rr.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?ai(e,t,bo(n,2)):e},rr.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?ai(e,t,i,n):e},rr.pullAt=ca,rr.range=Mu,rr.rangeRight=Au,rr.rearg=qa,rr.reject=function(e,t){return(ts(e)?kt:Or)(e,Wa(bo(t,3)))},rr.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=bo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return si(e,i),n},rr.rest=function(e,t){if("function"!=typeof e)throw new qe(a);return ci(e,t=t===i?t:As(t))},rr.reverse=ha,rr.sampleSize=function(e,t,n){return t=(n?Oo(e,t,n):t===i)?1:As(t),(ts(e)?function(e,t){return Wo(Vi(e),Er(t,0,e.length))}:function(e,t){var n=Zs(e);return Wo(n,Er(t,0,n.length))})(e,t)},rr.set=function(e,t,n){return null==e?e:hi(e,t,n)},rr.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:hi(e,t,n,r)},rr.shuffle=function(e){return(ts(e)?function(e){return Wo(Vi(e))}:function(e){return Wo(Zs(e))})(e)},rr.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Oo(e,t,n)?(t=0,n=r):(t=null==t?0:As(t),n=n===i?r:As(n)),pi(e,t,n)):[]},rr.sortBy=Na,rr.sortedUniq=function(e){return e&&e.length?vi(e):[]},rr.sortedUniqBy=function(e,t){return e&&e.length?vi(e,bo(t,2)):[]},rr.split=function(e,t,n){return n&&"number"!=typeof n&&Oo(e,t,n)&&(t=n=i),(n=n===i?R:n>>>0)?(e=Rs(e))&&("string"==typeof t||null!=t&&!ms(t))&&!(t=bi(t))&&fn(e)?wi(bn(e),0,n):e.split(t,n):[]},rr.spread=function(e,t){if("function"!=typeof e)throw new qe(a);return t=null==t?0:Fn(As(t),0),ci(function(n){var r=n[t],i=wi(n,0,t);return r&&jt(i,r),It(e,this,i)})},rr.tail=function(e){var t=null==e?0:e.length;return t?pi(e,1,t):[]},rr.take=function(e,t,n){return e&&e.length?pi(e,0,(t=n||t===i?1:As(t))<0?0:t):[]},rr.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?pi(e,(t=r-(t=n||t===i?1:As(t)))<0?0:t,r):[]},rr.takeRightWhile=function(e,t){return e&&e.length?Mi(e,bo(t,3),!1,!0):[]},rr.takeWhile=function(e,t){return e&&e.length?Mi(e,bo(t,3)):[]},rr.tap=function(e,t){return t(e),e},rr.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new qe(a);return hs(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ja(e,t,{leading:r,maxWait:t,trailing:i})},rr.thru=Ma,rr.toArray=xs,rr.toPairs=Qs,rr.toPairsIn=qs,rr.toPath=function(e){return ts(e)?Gt(e,Ko):ys(e)?[e]:Vi(Xo(Rs(e)))},rr.toPlainObject=Ps,rr.transform=function(e,t,n){var r=ts(e),i=r||os(e)||bs(e);if(t=bo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:hs(e)&&us(o)?ir(xt(e)):{}}return(i?Nt:Fr)(e,function(e,r,i){return t(n,e,r,i)}),n},rr.unary=function(e){return ka(e,1)},rr.union=da,rr.unionBy=fa,rr.unionWith=pa,rr.uniq=function(e){return e&&e.length?Ti(e):[]},rr.uniqBy=function(e,t){return e&&e.length?Ti(e,bo(t,2)):[]},rr.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?Ti(e,i,t):[]},rr.unset=function(e,t){return null==e||Ei(e,t)},rr.unzip=_a,rr.unzipWith=ma,rr.update=function(e,t,n){return null==e?e:xi(e,t,Ri(n))},rr.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:xi(e,t,Ri(n),r)},rr.values=Zs,rr.valuesIn=function(e){return null==e?[]:an(e,zs(e))},rr.without=ga,rr.words=uu,rr.wrap=function(e,t){return Ka(Ri(t),e)},rr.xor=va,rr.xorBy=ya,rr.xorWith=ba,rr.zip=Ta,rr.zipObject=function(e,t){return Ci(e||[],t||[],mr)},rr.zipObjectDeep=function(e,t){return Ci(e||[],t||[],hi)},rr.zipWith=Ea,rr.entries=Qs,rr.entriesIn=qs,rr.extend=Os,rr.extendWith=ws,vu(rr,rr),rr.add=Ru,rr.attempt=lu,rr.camelCase=Js,rr.capitalize=$s,rr.ceil=Du,rr.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=Cs(n))==n?n:0),t!==i&&(t=(t=Cs(t))==t?t:0),Er(Cs(e),t,n)},rr.clone=function(e){return xr(e,c)},rr.cloneDeep=function(e){return xr(e,u|c)},rr.cloneDeepWith=function(e,t){return xr(e,u|c,t="function"==typeof t?t:i)},rr.cloneWith=function(e,t){return xr(e,c,t="function"==typeof t?t:i)},rr.conformsTo=function(e,t){return null==t||Mr(e,t,js(t))},rr.deburr=eu,rr.defaultTo=function(e,t){return null==e||e!=e?t:e},rr.divide=Ou,rr.endsWith=function(e,t,n){e=Rs(e),t=bi(t);var r=e.length,o=n=n===i?r:Er(As(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},rr.eq=Za,rr.escape=function(e){return(e=Rs(e))&&me.test(e)?e.replace(pe,hn):e},rr.escapeRegExp=function(e){return(e=Rs(e))&&Me.test(e)?e.replace(xe,"\\$&"):e},rr.every=function(e,t,n){var r=ts(e)?Bt:Rr;return n&&Oo(e,t,n)&&(t=i),r(e,bo(t,3))},rr.find=Ca,rr.findIndex=ea,rr.findKey=function(e,t){return Xt(e,bo(t,3),Fr)},rr.findLast=Pa,rr.findLastIndex=ta,rr.findLastKey=function(e,t){return Xt(e,bo(t,3),Nr)},rr.floor=wu,rr.forEach=Ra,rr.forEachRight=Da,rr.forIn=function(e,t){return null==e?e:Lr(e,bo(t,3),zs)},rr.forInRight=function(e,t){return null==e?e:Ir(e,bo(t,3),zs)},rr.forOwn=function(e,t){return e&&Fr(e,bo(t,3))},rr.forOwnRight=function(e,t){return e&&Nr(e,bo(t,3))},rr.get=Bs,rr.gt=Ja,rr.gte=$a,rr.has=function(e,t){return null!=e&&Co(e,t,jr)},rr.hasIn=ks,rr.head=ra,rr.identity=pu,rr.includes=function(e,t,n,r){e=rs(e)?e:Zs(e),n=n&&!r?As(n):0;var i=e.length;return n<0&&(n=Fn(i+n,0)),vs(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Qt(e,t,n)>-1},rr.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:As(n);return i<0&&(i=Fn(r+i,0)),Qt(e,t,i)},rr.inRange=function(e,t,n){return t=Ms(t),n===i?(n=t,t=0):n=Ms(n),function(e,t,n){return e>=Nn(t,n)&&e<Fn(t,n)}(e=Cs(e),t,n)},rr.invoke=Gs,rr.isArguments=es,rr.isArray=ts,rr.isArrayBuffer=ns,rr.isArrayLike=rs,rr.isArrayLikeObject=is,rr.isBoolean=function(e){return!0===e||!1===e||ds(e)&&Vr(e)==N},rr.isBuffer=os,rr.isDate=as,rr.isElement=function(e){return ds(e)&&1===e.nodeType&&!_s(e)},rr.isEmpty=function(e){if(null==e)return!0;if(rs(e)&&(ts(e)||"string"==typeof e||"function"==typeof e.splice||os(e)||bs(e)||es(e)))return!e.length;var t=So(e);if(t==j||t==K)return!e.size;if(Fo(e))return!Zr(e).length;for(var n in e)if(tt.call(e,n))return!1;return!0},rr.isEqual=function(e,t){return Xr(e,t)},rr.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Xr(e,t,i,n):!!r},rr.isError=ss,rr.isFinite=function(e){return"number"==typeof e&&wn(e)},rr.isFunction=us,rr.isInteger=ls,rr.isLength=cs,rr.isMap=fs,rr.isMatch=function(e,t){return e===t||Kr(e,t,Eo(t))},rr.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Kr(e,t,Eo(t),n)},rr.isNaN=function(e){return ps(e)&&e!=+e},rr.isNative=function(e){if(Io(e))throw new Ye("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Qr(e)},rr.isNil=function(e){return null==e},rr.isNull=function(e){return null===e},rr.isNumber=ps,rr.isObject=hs,rr.isObjectLike=ds,rr.isPlainObject=_s,rr.isRegExp=ms,rr.isSafeInteger=function(e){return ls(e)&&e>=-S&&e<=S},rr.isSet=gs,rr.isString=vs,rr.isSymbol=ys,rr.isTypedArray=bs,rr.isUndefined=function(e){return e===i},rr.isWeakMap=function(e){return ds(e)&&So(e)==J},rr.isWeakSet=function(e){return ds(e)&&"[object WeakSet]"==Vr(e)},rr.join=function(e,t){return null==e?"":Ln.call(e,t)},rr.kebabCase=tu,rr.last=sa,rr.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=As(n))<0?Fn(r+o,0):Nn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Kt(e,Zt,o,!0)},rr.lowerCase=nu,rr.lowerFirst=ru,rr.lt=Ts,rr.lte=Es,rr.max=function(e){return e&&e.length?Dr(e,pu,Gr):i},rr.maxBy=function(e,t){return e&&e.length?Dr(e,bo(t,2),Gr):i},rr.mean=function(e){return Jt(e,pu)},rr.meanBy=function(e,t){return Jt(e,bo(t,2))},rr.min=function(e){return e&&e.length?Dr(e,pu,Jr):i},rr.minBy=function(e,t){return e&&e.length?Dr(e,bo(t,2),Jr):i},rr.stubArray=Su,rr.stubFalse=Cu,rr.stubObject=function(){return{}},rr.stubString=function(){return""},rr.stubTrue=function(){return!0},rr.multiply=Lu,rr.nth=function(e,t){return e&&e.length?ri(e,As(t)):i},rr.noConflict=function(){return Et._===this&&(Et._=at),this},rr.noop=yu,rr.now=Ba,rr.pad=function(e,t,n){e=Rs(e);var r=(t=As(t))?yn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return to(Rn(i),n)+e+to(Pn(i),n)},rr.padEnd=function(e,t,n){e=Rs(e);var r=(t=As(t))?yn(e):0;return t&&r<t?e+to(t-r,n):e},rr.padStart=function(e,t,n){e=Rs(e);var r=(t=As(t))?yn(e):0;return t&&r<t?to(t-r,n)+e:e},rr.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),kn(Rs(e).replace(Se,""),t||0)},rr.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Oo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=Ms(e),t===i?(t=e,e=0):t=Ms(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Un();return Nn(e+o*(t-e+vt("1e-"+((o+"").length-1))),t)}return ui(e,t)},rr.reduce=function(e,t,n){var r=ts(e)?zt:tn,i=arguments.length<3;return r(e,bo(t,4),n,i,Cr)},rr.reduceRight=function(e,t,n){var r=ts(e)?Yt:tn,i=arguments.length<3;return r(e,bo(t,4),n,i,Pr)},rr.repeat=function(e,t,n){return t=(n?Oo(e,t,n):t===i)?1:As(t),li(Rs(e),t)},rr.replace=function(){var e=arguments,t=Rs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},rr.result=function(e,t,n){var r=-1,o=(t=Di(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[Ko(t[r])];a===i&&(r=o,a=n),e=us(a)?a.call(e):a}return e},rr.round=Iu,rr.runInContext=e,rr.sample=function(e){return(ts(e)?pr:function(e){return pr(Zs(e))})(e)},rr.size=function(e){if(null==e)return 0;if(rs(e))return vs(e)?yn(e):e.length;var t=So(e);return t==j||t==K?e.size:Zr(e).length},rr.snakeCase=iu,rr.some=function(e,t,n){var r=ts(e)?Ht:_i;return n&&Oo(e,t,n)&&(t=i),r(e,bo(t,3))},rr.sortedIndex=function(e,t){return mi(e,t)},rr.sortedIndexBy=function(e,t,n){return gi(e,t,bo(n,2))},rr.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=mi(e,t);if(r<n&&Za(e[r],t))return r}return-1},rr.sortedLastIndex=function(e,t){return mi(e,t,!0)},rr.sortedLastIndexBy=function(e,t,n){return gi(e,t,bo(n,2),!0)},rr.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=mi(e,t,!0)-1;if(Za(e[n],t))return n}return-1},rr.startCase=ou,rr.startsWith=function(e,t,n){return e=Rs(e),n=null==n?0:Er(As(n),0,e.length),t=bi(t),e.slice(n,n+t.length)==t},rr.subtract=Fu,rr.sum=function(e){return e&&e.length?nn(e,pu):0},rr.sumBy=function(e,t){return e&&e.length?nn(e,bo(t,2)):0},rr.template=function(e,t,n){var r=rr.templateSettings;n&&Oo(e,t,n)&&(t=i),e=Rs(e),t=ws({},t,r,lo);var o,a,s=ws({},t.imports,r.imports,lo),u=js(s),l=an(s,u),c=0,h=t.interpolate||Ge,d="__p += '",f=Ke((t.escape||Ge).source+"|"+h.source+"|"+(h===ye?Le:Ge).source+"|"+(t.evaluate||Ge).source+"|$","g"),p="//# sourceURL="+(tt.call(t,"sourceURL")?(t.sourceURL+"").replace(/[\r\n]/g," "):"lodash.templateSources["+ ++pt+"]")+"\n";e.replace(f,function(t,n,r,i,s,u){return r||(r=i),d+=e.slice(c,u).replace(je,dn),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+t.length,t}),d+="';\n";var _=tt.call(t,"variable")&&t.variable;_||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(ce,""):d).replace(he,"$1").replace(de,"$1;"),d="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var m=lu(function(){return He(u,p+"return "+d).apply(i,l)});if(m.source=d,ss(m))throw m;return m},rr.times=function(e,t){if((e=As(e))<1||e>S)return[];var n=R,r=Nn(e,R);t=bo(t),e-=R;for(var i=rn(r,t);++n<e;)t(n);return i},rr.toFinite=Ms,rr.toInteger=As,rr.toLength=Ss,rr.toLower=function(e){return Rs(e).toLowerCase()},rr.toNumber=Cs,rr.toSafeInteger=function(e){return e?Er(As(e),-S,S):0===e?e:0},rr.toString=Rs,rr.toUpper=function(e){return Rs(e).toUpperCase()},rr.trim=function(e,t,n){if((e=Rs(e))&&(n||t===i))return e.replace(Ae,"");if(!e||!(t=bi(t)))return e;var r=bn(e),o=bn(t);return wi(r,un(r,o),ln(r,o)+1).join("")},rr.trimEnd=function(e,t,n){if((e=Rs(e))&&(n||t===i))return e.replace(Ce,"");if(!e||!(t=bi(t)))return e;var r=bn(e);return wi(r,0,ln(r,bn(t))+1).join("")},rr.trimStart=function(e,t,n){if((e=Rs(e))&&(n||t===i))return e.replace(Se,"");if(!e||!(t=bi(t)))return e;var r=bn(e);return wi(r,un(r,bn(t))).join("")},rr.truncate=function(e,t){var n=30,r="...";if(hs(t)){var o="separator"in t?t.separator:o;n="length"in t?As(t.length):n,r="omission"in t?bi(t.omission):r}var a=(e=Rs(e)).length;if(fn(e)){var s=bn(e);a=s.length}if(n>=a)return e;var u=n-yn(r);if(u<1)return r;var l=s?wi(s,0,u).join(""):e.slice(0,u);if(o===i)return l+r;if(s&&(u+=l.length-u),ms(o)){if(e.slice(u).search(o)){var c,h=l;for(o.global||(o=Ke(o.source,Rs(Ie.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var d=c.index;l=l.slice(0,d===i?u:d)}}else if(e.indexOf(bi(o),u)!=u){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+r},rr.unescape=function(e){return(e=Rs(e))&&_e.test(e)?e.replace(fe,Tn):e},rr.uniqueId=function(e){var t=++nt;return Rs(e)+t},rr.upperCase=au,rr.upperFirst=su,rr.each=Ra,rr.eachRight=Da,rr.first=ra,vu(rr,(Pu={},Fr(rr,function(e,t){tt.call(rr.prototype,t)||(Pu[t]=e)}),Pu),{chain:!1}),rr.VERSION="4.17.14",Nt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){rr[e].placeholder=rr}),Nt(["drop","take"],function(e,t){sr.prototype[e]=function(n){n=n===i?1:Fn(As(n),0);var r=this.__filtered__&&!t?new sr(this):this.clone();return r.__filtered__?r.__takeCount__=Nn(n,r.__takeCount__):r.__views__.push({size:Nn(n,R),type:e+(r.__dir__<0?"Right":"")}),r},sr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Nt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;sr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:bo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Nt(["head","last"],function(e,t){var n="take"+(t?"Right":"");sr.prototype[e]=function(){return this[n](1).value()[0]}}),Nt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");sr.prototype[e]=function(){return this.__filtered__?new sr(this):this[n](1)}}),sr.prototype.compact=function(){return this.filter(pu)},sr.prototype.find=function(e){return this.filter(e).head()},sr.prototype.findLast=function(e){return this.reverse().find(e)},sr.prototype.invokeMap=ci(function(e,t){return"function"==typeof e?new sr(this):this.map(function(n){return Hr(n,e,t)})}),sr.prototype.reject=function(e){return this.filter(Wa(bo(e)))},sr.prototype.slice=function(e,t){e=As(e);var n=this;return n.__filtered__&&(e>0||t<0)?new sr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=As(t))<0?n.dropRight(-t):n.take(t-e)),n)},sr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},sr.prototype.toArray=function(){return this.take(R)},Fr(sr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=rr[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(rr.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,u=t instanceof sr,l=s[0],c=u||ts(t),h=function(e){var t=o.apply(rr,jt([e],s));return r&&d?t[0]:t};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,_=u&&!f;if(!a&&c){t=_?t:new sr(this);var m=e.apply(t,s);return m.__actions__.push({func:Ma,args:[h],thisArg:i}),new ar(m,d)}return p&&_?e.apply(this,s):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})}),Nt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ze[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);rr.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(ts(i)?i:[],e)}return this[n](function(n){return t.apply(ts(n)?n:[],e)})}}),Fr(sr.prototype,function(e,t){var n=rr[t];if(n){var r=n.name+"";tt.call(Kn,r)||(Kn[r]=[]),Kn[r].push({name:t,func:n})}}),Kn[Zi(i,p).name]=[{name:"wrapper",func:i}],sr.prototype.clone=function(){var e=new sr(this.__wrapped__);return e.__actions__=Vi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Vi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Vi(this.__views__),e},sr.prototype.reverse=function(){if(this.__filtered__){var e=new sr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},sr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=ts(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Nn(t,e+a);break;case"takeRight":e=Fn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,d=0,f=Nn(u,this.__takeCount__);if(!n||!r&&i==u&&f==u)return Ai(e,this.__actions__);var p=[];e:for(;u--&&d<f;){for(var _=-1,m=e[l+=t];++_<h;){var g=c[_],v=g.type,y=(0,g.iteratee)(m);if(2==v)m=y;else if(!y){if(1==v)continue e;break e}}p[d++]=m}return p},rr.prototype.at=Aa,rr.prototype.chain=function(){return xa(this)},rr.prototype.commit=function(){return new ar(this.value(),this.__chain__)},rr.prototype.next=function(){this.__values__===i&&(this.__values__=xs(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},rr.prototype.plant=function(e){for(var t,n=this;n instanceof or;){var r=qo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},rr.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof sr){var t=e;return this.__actions__.length&&(t=new sr(this)),(t=t.reverse()).__actions__.push({func:Ma,args:[ha],thisArg:i}),new ar(t,this.__chain__)}return this.thru(ha)},rr.prototype.toJSON=rr.prototype.valueOf=rr.prototype.value=function(){return Ai(this.__wrapped__,this.__actions__)},rr.prototype.first=rr.prototype.head,en&&(rr.prototype[en]=function(){return this}),rr}();Et._=En,(r=(function(){return En}).call(t,n,t,e))===i||(e.exports=r)}).call(this)}).call(this,n("YuTi")(e))},MGBS:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("mrSG"),i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n("FFOo").a)},"MO+k":function(e,t,n){e.exports=function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t={rgb2hsl:n,rgb2hsv:i,rgb2hwb:o,rgb2cmyk:a,rgb2keyword:s,rgb2xyz:u,rgb2lab:l,rgb2lch:function(e){return v(l(e))},hsl2rgb:c,hsl2hsv:function(e){var t=e[1]/100,n=e[2]/100;return 0===n?[0,0,0]:[e[0],2*(t*=(n*=2)<=1?n:2-n)/(n+t)*100,(n+t)/2*100]},hsl2hwb:function(e){return o(c(e))},hsl2cmyk:function(e){return a(c(e))},hsl2keyword:function(e){return s(c(e))},hsv2rgb:h,hsv2hsl:function(e){var t,n,r=e[1]/100,i=e[2]/100;return t=r*i,[e[0],100*(t=(t/=(n=(2-r)*i)<=1?n:2-n)||0),100*(n/=2)]},hsv2hwb:function(e){return o(h(e))},hsv2cmyk:function(e){return a(h(e))},hsv2keyword:function(e){return s(h(e))},hwb2rgb:d,hwb2hsl:function(e){return n(d(e))},hwb2hsv:function(e){return i(d(e))},hwb2cmyk:function(e){return a(d(e))},hwb2keyword:function(e){return s(d(e))},cmyk2rgb:f,cmyk2hsl:function(e){return n(f(e))},cmyk2hsv:function(e){return i(f(e))},cmyk2hwb:function(e){return o(f(e))},cmyk2keyword:function(e){return s(f(e))},keyword2rgb:E,keyword2hsl:function(e){return n(E(e))},keyword2hsv:function(e){return i(E(e))},keyword2hwb:function(e){return o(E(e))},keyword2cmyk:function(e){return a(E(e))},keyword2lab:function(e){return l(E(e))},keyword2xyz:function(e){return u(E(e))},xyz2rgb:p,xyz2lab:_,xyz2lch:function(e){return v(_(e))},lab2xyz:m,lab2rgb:y,lab2lch:v,lch2lab:T,lch2xyz:function(e){return m(T(e))},lch2rgb:function(e){return y(T(e))}};function n(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a;return s==a?t=0:r==s?t=(i-o)/u:i==s?t=2+(o-r)/u:o==s&&(t=4+(r-i)/u),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s==a?0:n<=.5?u/(s+a):u/(2-s-a)),100*n]}function i(e){var t,n,r=e[0],i=e[1],o=e[2],a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a;return n=0==s?0:u/s*1e3/10,s==a?t=0:r==s?t=(i-o)/u:i==s?t=2+(o-r)/u:o==s&&(t=4+(r-i)/u),(t=Math.min(60*t,360))<0&&(t+=360),[t,n,s/255*1e3/10]}function o(e){var t=e[0],r=e[1],i=e[2];return[n(e)[0],1/255*Math.min(t,Math.min(r,i))*100,100*(i=1-1/255*Math.max(t,Math.max(r,i)))]}function a(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-i)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]}function s(e){return M[JSON.stringify(e)]}function u(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]}function l(e){var t=u(e),n=t[0],r=t[1],i=t[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]}function c(e){var t,n,r,i,o,a=e[0]/360,s=e[1]/100,u=e[2]/100;if(0==s)return[o=255*u,o,o];t=2*u-(n=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var l=0;l<3;l++)(r=a+1/3*-(l-1))<0&&r++,r>1&&r--,i[l]=255*(o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t);return i}function h(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*o),u=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,u,a];case 1:return[s,r,a];case 2:return[a,r,u];case 3:return[a,s,r];case 4:return[u,a,r];case 5:return[r,a,s]}}function d(e){var t,n,i,o,a=e[0]/360,s=e[1]/100,u=e[2]/100,l=s+u;switch(l>1&&(s/=l,u/=l),i=6*a-(t=Math.floor(6*a)),0!=(1&t)&&(i=1-i),o=s+i*((n=1-u)-s),t){default:case 6:case 0:r=n,g=o,b=s;break;case 1:r=o,g=n,b=s;break;case 2:r=s,g=n,b=o;break;case 3:r=s,g=o,b=n;break;case 4:r=o,g=s,b=n;break;case 5:r=n,g=s,b=o}return[255*r,255*g,255*b]}function f(e){var t=e[1]/100,n=e[2]/100,r=e[3]/100;return[255*(1-Math.min(1,e[0]/100*(1-r)+r)),255*(1-Math.min(1,t*(1-r)+r)),255*(1-Math.min(1,n*(1-r)+r))]}function p(e){var t,n,r,i=e[0]/100,o=e[1]/100,a=e[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,t=(t=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]}function _(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]}function m(e){var t,n,r,i,o=e[0],a=e[1],s=e[2];return o<=8?i=(n=100*o/903.3)/100*7.787+16/116:(n=100*Math.pow((o+16)/116,3),i=Math.pow(n/100,1/3)),[t=t/95.047<=.008856?t=95.047*(a/500+i-16/116)/7.787:95.047*Math.pow(a/500+i,3),n,r=r/108.883<=.008859?r=108.883*(i-s/200-16/116)/7.787:108.883*Math.pow(i-s/200,3)]}function v(e){var t,n=e[0],r=e[1],i=e[2];return(t=360*Math.atan2(i,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+i*i),t]}function y(e){return p(m(e))}function T(e){var t,n=e[1];return t=e[2]/360*2*Math.PI,[e[0],n*Math.cos(t),n*Math.sin(t)]}function E(e){return x[e]}var x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},M={};for(var A in x)M[JSON.stringify(x[A])]=A;var S=function(){return new O};for(var C in t){S[C+"Raw"]=function(e){return function(n){return"number"==typeof n&&(n=Array.prototype.slice.call(arguments)),t[e](n)}}(C);var P=/(\w+)2(\w+)/.exec(C),R=P[1],D=P[2];(S[R]=S[R]||{})[D]=S[C]=function(e){return function(n){"number"==typeof n&&(n=Array.prototype.slice.call(arguments));var r=t[e](n);if("string"==typeof r||void 0===r)return r;for(var i=0;i<r.length;i++)r[i]=Math.round(r[i]);return r}}(C)}var O=function(){this.convs={}};O.prototype.routeSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n))},O.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},O.prototype.getValues=function(e){var t=this.convs[e];if(!t){var n=this.space;t=S[n][e](this.convs[n]),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(e){O.prototype[e]=function(t){return this.routeSpace(e,arguments)}});var w=S,L={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},I={getRgba:F,getHsla:N,getRgb:function(e){var t=F(e);return t&&t.slice(0,3)},getHsl:function(e){var t=N(e);return t&&t.slice(0,3)},getHwb:B,getAlpha:function(e){var t=F(e);return t?t[3]:(t=N(e))?t[3]:(t=B(e))?t[3]:void 0},hexString:function(e,t){return t=void 0!==t&&3===e.length?t:e[3],"#"+j(e[0])+j(e[1])+j(e[2])+(t>=0&&t<1?j(Math.round(255*t)):"")},rgbString:function(e,t){return t<1||e[3]&&e[3]<1?k(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},rgbaString:k,percentString:function(e,t){return t<1||e[3]&&e[3]<1?U(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"},percentaString:U,hslString:function(e,t){return t<1||e[3]&&e[3]<1?V(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"},hslaString:V,hwbString:function(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"},keyword:function(e){return z[e.slice(0,3)]}};function F(e){if(e){var t=[0,0,0],n=1,r=e.match(/^#([a-fA-F0-9]{3,4})$/i),i="";if(r){i=(r=r[1])[3];for(var o=0;o<t.length;o++)t[o]=parseInt(r[o]+r[o],16);i&&(n=Math.round(parseInt(i+i,16)/255*100)/100)}else if(r=e.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(i=r[2],r=r[1],o=0;o<t.length;o++)t[o]=parseInt(r.slice(2*o,2*o+2),16);i&&(n=Math.round(parseInt(i,16)/255*100)/100)}else if(r=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<t.length;o++)t[o]=parseInt(r[o+1]);n=parseFloat(r[4])}else if(r=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(o=0;o<t.length;o++)t[o]=Math.round(2.55*parseFloat(r[o+1]));n=parseFloat(r[4])}else if(r=e.match(/(\w+)/)){if("transparent"==r[1])return[0,0,0,0];if(!(t=L[r[1]]))return}for(o=0;o<t.length;o++)t[o]=G(t[o],0,255);return n=n||0==n?G(n,0,1):1,t[3]=n,t}}function N(e){if(e){var t=e.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[G(parseInt(t[1]),0,360),G(parseFloat(t[2]),0,100),G(parseFloat(t[3]),0,100),G(isNaN(n)?1:n,0,1)]}}}function B(e){if(e){var t=e.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(t){var n=parseFloat(t[4]);return[G(parseInt(t[1]),0,360),G(parseFloat(t[2]),0,100),G(parseFloat(t[3]),0,100),G(isNaN(n)?1:n,0,1)]}}}function k(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function U(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function V(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function G(e,t,n){return Math.min(Math.max(t,e),n)}function j(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var z={};for(var Y in L)z[L[Y]]=Y;var H=function(e){return e instanceof H?e:this instanceof H?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof e?(t=I.getRgba(e))?this.setValues("rgb",t):(t=I.getHsla(e))?this.setValues("hsl",t):(t=I.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t)))):new H(e);var t};H.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return I.hexString(this.values.rgb)},rgbString:function(){return I.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return I.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return I.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return I.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return I.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return I.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return I.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,n=(t[0]+e)%360;return t[0]=n<0?360+n:n,this.setValues("hsl",t),this},mix:function(e,t){var n=e,r=void 0===t?.5:t,i=2*r-1,o=this.alpha()-n.alpha(),a=((i*o==-1?i:(i+o)/(1+i*o))+1)/2,s=1-a;return this.rgb(a*this.red()+s*n.red(),a*this.green()+s*n.green(),a*this.blue()+s*n.blue()).alpha(this.alpha()*r+n.alpha()*(1-r))},toJSON:function(){return this.rgb()},clone:function(){var e,t,n=new H,r=this.values,i=n.values;for(var o in r)r.hasOwnProperty(o)&&("[object Array]"===(t={}.toString.call(e=r[o]))?i[o]=e.slice(0):"[object Number]"===t?i[o]=e:console.error("unexpected color value:",e));return n}},H.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},H.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},H.prototype.getValues=function(e){for(var t=this.values,n={},r=0;r<e.length;r++)n[e.charAt(r)]=t[e][r];return 1!==t.alpha&&(n.a=t.alpha),n},H.prototype.setValues=function(e,t){var n,r,i=this.values,o=this.spaces,a=this.maxes,s=1;if(this.valid=!0,"alpha"===e)s=t;else if(t.length)i[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(n=0;n<e.length;n++)i[e][n]=t[e.charAt(n)];s=t.a}else if(void 0!==t[o[e][0]]){var u=o[e];for(n=0;n<e.length;n++)i[e][n]=t[u[n]];s=t.alpha}if(i.alpha=Math.max(0,Math.min(1,void 0===s?i.alpha:s)),"alpha"===e)return!1;for(n=0;n<e.length;n++)r=Math.max(0,Math.min(a[e][n],i[e][n])),i[e][n]=Math.round(r);for(var l in o)l!==e&&(i[l]=w[e][l](i[e]));return!0},H.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},H.prototype.setChannel=function(e,t,n){var r=this.values[e];return void 0===n?r[t]:n===r[t]?this:(r[t]=n,this.setValues(e,r),this)},"undefined"!=typeof window&&(window.Color=H);var W,X=H,K={noop:function(){},uid:(W=0,function(){return W++}),isNullOrUndef:function(e){return null==e},isArray:function(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.substr(0,7)&&"Array]"===t.substr(-6)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},isFinite:function(e){return("number"==typeof e||e instanceof Number)&&isFinite(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,n){return K.valueOrDefault(K.isArray(e)?e[t]:e,n)},callback:function(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)},each:function(e,t,n,r){var i,o,a;if(K.isArray(e))if(o=e.length,r)for(i=o-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<o;i++)t.call(n,e[i],i);else if(K.isObject(e))for(o=(a=Object.keys(e)).length,i=0;i<o;i++)t.call(n,e[a[i]],a[i])},arrayEquals:function(e,t){var n,r,i,o;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(o=t[n],(i=e[n])instanceof Array&&o instanceof Array){if(!K.arrayEquals(i,o))return!1}else if(i!==o)return!1;return!0},clone:function(e){if(K.isArray(e))return e.map(K.clone);if(K.isObject(e)){for(var t={},n=Object.keys(e),r=n.length,i=0;i<r;++i)t[n[i]]=K.clone(e[n[i]]);return t}return e},_merger:function(e,t,n,r){var i=t[e],o=n[e];K.isObject(i)&&K.isObject(o)?K.merge(i,o,r):t[e]=K.clone(o)},_mergerIf:function(e,t,n){var r=t[e],i=n[e];K.isObject(r)&&K.isObject(i)?K.mergeIf(r,i):t.hasOwnProperty(e)||(t[e]=K.clone(i))},merge:function(e,t,n){var r,i,o,a,s,u=K.isArray(t)?t:[t],l=u.length;if(!K.isObject(e))return e;for(r=(n=n||{}).merger||K._merger,i=0;i<l;++i)if(K.isObject(t=u[i]))for(s=0,a=(o=Object.keys(t)).length;s<a;++s)r(o[s],e,t,n);return e},mergeIf:function(e,t){return K.merge(e,t,{merger:K._mergerIf})},extend:function(e){for(var t=function(t,n){e[n]=t},n=1,r=arguments.length;n<r;++n)K.each(arguments[n],t);return e},inherits:function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},r=function(){this.constructor=n};return r.prototype=t.prototype,n.prototype=new r,n.extend=K.inherits,e&&K.extend(n.prototype,e),n.__super__=t.prototype,n}},Q=K;K.callCallback=K.callback,K.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},K.getValueOrDefault=K.valueOrDefault,K.getValueAtIndexOrDefault=K.valueAtIndexOrDefault;var q={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.45),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-q.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*q.easeInBounce(2*e):.5*q.easeOutBounce(2*e-1)+.5}},Z={effects:q};Q.easingEffects=q;var J=Math.PI,$=J/180,ee=2*J,te=J/2,ne=J/4,re=2*J/3,ie={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,n,r,i,o){if(o){var a=Math.min(o,i/2,r/2),s=t+a,u=n+a,l=t+r-a,c=n+i-a;e.moveTo(t,u),s<l&&u<c?(e.arc(s,u,a,-J,-te),e.arc(l,u,a,-te,0),e.arc(l,c,a,0,te),e.arc(s,c,a,te,J)):s<l?(e.moveTo(s,n),e.arc(l,u,a,-te,te),e.arc(s,u,a,te,J+te)):u<c?(e.arc(s,u,a,-J,0),e.arc(s,c,a,0,J)):e.arc(s,u,a,-J,J),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,r,i)},drawPoint:function(e,t,n,r,i,o){var a,s,u,l,c,h=(o||0)*$;if(!t||"object"!=typeof t||"[object HTMLImageElement]"!==(a=t.toString())&&"[object HTMLCanvasElement]"!==a){if(!(isNaN(n)||n<=0)){switch(e.beginPath(),t){default:e.arc(r,i,n,0,ee),e.closePath();break;case"triangle":e.moveTo(r+Math.sin(h)*n,i-Math.cos(h)*n),h+=re,e.lineTo(r+Math.sin(h)*n,i-Math.cos(h)*n),h+=re,e.lineTo(r+Math.sin(h)*n,i-Math.cos(h)*n),e.closePath();break;case"rectRounded":l=n-(c=.516*n),s=Math.cos(h+ne)*l,u=Math.sin(h+ne)*l,e.arc(r-s,i-u,c,h-J,h-te),e.arc(r+u,i-s,c,h-te,h),e.arc(r+s,i+u,c,h,h+te),e.arc(r-u,i+s,c,h+te,h+J),e.closePath();break;case"rect":if(!o){l=Math.SQRT1_2*n,e.rect(r-l,i-l,2*l,2*l);break}h+=ne;case"rectRot":s=Math.cos(h)*n,u=Math.sin(h)*n,e.moveTo(r-s,i-u),e.lineTo(r+u,i-s),e.lineTo(r+s,i+u),e.lineTo(r-u,i+s),e.closePath();break;case"crossRot":h+=ne;case"cross":s=Math.cos(h)*n,u=Math.sin(h)*n,e.moveTo(r-s,i-u),e.lineTo(r+s,i+u),e.moveTo(r+u,i-s),e.lineTo(r-u,i+s);break;case"star":s=Math.cos(h)*n,u=Math.sin(h)*n,e.moveTo(r-s,i-u),e.lineTo(r+s,i+u),e.moveTo(r+u,i-s),e.lineTo(r-u,i+s),h+=ne,s=Math.cos(h)*n,u=Math.sin(h)*n,e.moveTo(r-s,i-u),e.lineTo(r+s,i+u),e.moveTo(r+u,i-s),e.lineTo(r-u,i+s);break;case"line":s=Math.cos(h)*n,u=Math.sin(h)*n,e.moveTo(r-s,i-u),e.lineTo(r+s,i+u);break;case"dash":e.moveTo(r,i),e.lineTo(r+Math.cos(h)*n,i+Math.sin(h)*n)}e.fill(),e.stroke()}}else e.drawImage(t,r-t.width/2,i-t.height/2,t.width,t.height)},_isPointInArea:function(e,t){return e.x>t.left-1e-6&&e.x<t.right+1e-6&&e.y>t.top-1e-6&&e.y<t.bottom+1e-6},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,n,r){var i=n.steppedLine;if(i){if("middle"===i){var o=(t.x+n.x)/2;e.lineTo(o,r?n.y:t.y),e.lineTo(o,r?t.y:n.y)}else"after"===i&&!r||"after"!==i&&r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}else n.tension?e.bezierCurveTo(r?t.controlPointPreviousX:t.controlPointNextX,r?t.controlPointPreviousY:t.controlPointNextY,r?n.controlPointNextX:n.controlPointPreviousX,r?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):e.lineTo(n.x,n.y)}},oe=ie;Q.clear=ie.clear,Q.drawRoundedRectangle=function(e){e.beginPath(),ie.roundedRect.apply(ie,arguments)};var ae={_set:function(e,t){return Q.merge(this[e]||(this[e]={}),t)}};ae._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var se=ae,ue=Q.valueOrDefault,le={toLineHeight:function(e,t){var n=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,n,r,i;return Q.isObject(e)?(t=+e.top||0,n=+e.right||0,r=+e.bottom||0,i=+e.left||0):t=n=r=i=+e||0,{top:t,right:n,bottom:r,left:i,height:t+r,width:i+n}},_parseFont:function(e){var t=se.global,n=ue(e.fontSize,t.defaultFontSize),r={family:ue(e.fontFamily,t.defaultFontFamily),lineHeight:Q.options.toLineHeight(ue(e.lineHeight,t.defaultLineHeight),n),size:n,style:ue(e.fontStyle,t.defaultFontStyle),weight:null,string:""};return r.string=function(e){return!e||Q.isNullOrUndef(e.size)||Q.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r},resolve:function(e,t,n){var r,i,o;for(r=0,i=e.length;r<i;++r)if(void 0!==(o=e[r])&&(void 0!==t&&"function"==typeof o&&(o=o(t)),void 0!==n&&Q.isArray(o)&&(o=o[n]),void 0!==o))return o}},ce=Q,he=oe,de=le;ce.easing=Z,ce.canvas=he,ce.options=de;var fe=function(e){ce.extend(this,e),this.initialize.apply(this,arguments)};ce.extend(fe.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=ce.clone(e._model)),e._start={},e},transition:function(e){var t=this,n=t._model,r=t._start,i=t._view;return n&&1!==e?(i||(i=t._view={}),r||(r=t._start={}),function(e,t,n,r){var i,o,a,s,u,l,c,h,d,f=Object.keys(n);for(i=0,o=f.length;i<o;++i)if(l=n[a=f[i]],t.hasOwnProperty(a)||(t[a]=l),(s=t[a])!==l&&"_"!==a[0]){if(e.hasOwnProperty(a)||(e[a]=s),(c=typeof l)==typeof(u=e[a]))if("string"===c){if((h=X(u)).valid&&(d=X(l)).valid){t[a]=d.mix(h,r).rgbString();continue}}else if(ce.isFinite(u)&&ce.isFinite(l)){t[a]=u+(l-u)*r;continue}t[a]=l}}(r,i,n,e),t):(t._view=n,t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return ce.isNumber(this._model.x)&&ce.isNumber(this._model.y)}}),fe.extend=ce.inherits;var pe=fe,_e=pe.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),me=_e;Object.defineProperty(_e.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(_e.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}}),se._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:ce.noop,onComplete:ce.noop}});var ge={animations:[],request:null,addAnimation:function(e,t,n,r){var i,o,a=this.animations;for(t.chart=e,t.startTime=Date.now(),t.duration=n,r||(e.animating=!0),i=0,o=a.length;i<o;++i)if(a[i].chart===e)return void(a[i]=t);a.push(t),1===a.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=ce.findIndex(this.animations,function(t){return t.chart===e});-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=ce.requestAnimFrame.call(window,function(){e.request=null,e.startDigest()}))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var e,t,n,r,i=this.animations,o=0;o<i.length;)t=(e=i[o]).chart,n=e.numSteps,r=Math.floor((Date.now()-e.startTime)/e.duration*n)+1,e.currentStep=Math.min(r,n),ce.callback(e.render,[t,e],t),ce.callback(e.onAnimationProgress,[e],t),e.currentStep>=n?(ce.callback(e.onAnimationComplete,[e],t),t.animating=!1,i.splice(o,1)):++o}},ve=ce.options.resolve,ye=["push","pop","shift","splice","unshift"];function be(e,t){var n=e._chartjs;if(n){var r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(ye.forEach(function(t){delete e[t]}),delete e._chartjs)}}var Te=function(e,t){this.initialize(e,t)};ce.extend(Te.prototype,{datasetElementType:null,dataElementType:null,initialize:function(e,t){this.chart=e,this.index=t,this.linkScales(),this.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),n=e.getDataset();null!==t.xAxisID&&t.xAxisID in e.chart.scales||(t.xAxisID=n.xAxisID||e.chart.options.scales.xAxes[0].id),null!==t.yAxisID&&t.yAxisID in e.chart.scales||(t.yAxisID=n.yAxisID||e.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this.update(!0)},destroy:function(){this._data&&be(this._data,this)},createMetaDataset:function(){var e=this.datasetElementType;return e&&new e({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(e){var t=this.dataElementType;return t&&new t({_chart:this.chart,_datasetIndex:this.index,_index:e})},addElements:function(){var e,t,n=this.getMeta(),r=this.getDataset().data||[],i=n.data;for(e=0,t=r.length;e<t;++e)i[e]=i[e]||this.createMetaData(e);n.dataset=n.dataset||this.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e,t,n=this,r=n.getDataset(),i=r.data||(r.data=[]);n._data!==i&&(n._data&&be(n._data,n),i&&Object.isExtensible(i)&&(t=n,(e=i)._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ye.forEach(function(t){var n="onData"+t.charAt(0).toUpperCase()+t.slice(1),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),i=r.apply(this,t);return ce.each(e._chartjs.listeners,function(e){"function"==typeof e[n]&&e[n].apply(e,t)}),i}})}))),n._data=i),n.resyncElements()},update:ce.noop,transition:function(e){for(var t=this.getMeta(),n=t.data||[],r=n.length,i=0;i<r;++i)n[i].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],n=t.length,r=0;for(e.dataset&&e.dataset.draw();r<n;++r)t[r].draw()},removeHoverStyle:function(e){ce.merge(e._model,e.$previousStyle||{}),delete e.$previousStyle},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},i=e._model,o=ce.getHoverColor;e.$previousStyle={backgroundColor:i.backgroundColor,borderColor:i.borderColor,borderWidth:i.borderWidth},i.backgroundColor=ve([r.hoverBackgroundColor,t.hoverBackgroundColor,o(i.backgroundColor)],void 0,n),i.borderColor=ve([r.hoverBorderColor,t.hoverBorderColor,o(i.borderColor)],void 0,n),i.borderWidth=ve([r.hoverBorderWidth,t.hoverBorderWidth,i.borderWidth],void 0,n)},resyncElements:function(){var e=this.getMeta(),t=this.getDataset().data,n=e.data.length,r=t.length;r<n?e.data.splice(r,n-r):r>n&&this.insertElements(n,r-n)},insertElements:function(e,t){for(var n=0;n<t;++n)this.addElementAndReset(e+n)},onDataPush:function(){var e=arguments.length;this.insertElements(this.getDataset().data.length-e,e)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),Te.extend=ce.inherits;var Ee=Te;se._set("global",{elements:{arc:{backgroundColor:se.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var xe=pe.extend({inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var n=this._view;if(n){for(var r=ce.getAngleFromPoint(n,{x:e,y:t}),i=r.angle,o=r.distance,a=n.startAngle,s=n.endAngle;s<a;)s+=2*Math.PI;for(;i>s;)i-=2*Math.PI;for(;i<a;)i+=2*Math.PI;return i>=a&&i<=s&&o>=n.innerRadius&&o<=n.outerRadius}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,n=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,n=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},draw:function(){var e,t=this._chart.ctx,n=this._view,r=n.startAngle,i=n.endAngle,o="inner"===n.borderAlign?.33:0;t.save(),t.beginPath(),t.arc(n.x,n.y,Math.max(n.outerRadius-o,0),r,i),t.arc(n.x,n.y,n.innerRadius,i,r,!0),t.closePath(),t.fillStyle=n.backgroundColor,t.fill(),n.borderWidth&&("inner"===n.borderAlign?(t.beginPath(),t.arc(n.x,n.y,n.outerRadius,r-(e=o/n.outerRadius),i+e),n.innerRadius>o?t.arc(n.x,n.y,n.innerRadius-o,i+(e=o/n.innerRadius),r-e,!0):t.arc(n.x,n.y,o,i+Math.PI/2,r-Math.PI/2),t.closePath(),t.clip(),t.beginPath(),t.arc(n.x,n.y,n.outerRadius,r,i),t.arc(n.x,n.y,n.innerRadius,i,r,!0),t.closePath(),t.lineWidth=2*n.borderWidth,t.lineJoin="round"):(t.lineWidth=n.borderWidth,t.lineJoin="bevel"),t.strokeStyle=n.borderColor,t.stroke()),t.restore()}}),Me=ce.valueOrDefault,Ae=se.global.defaultColor;se._set("global",{elements:{line:{tension:.4,backgroundColor:Ae,borderWidth:3,borderColor:Ae,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var Se=pe.extend({draw:function(){var e,t,n,r,i=this._view,o=this._chart.ctx,a=i.spanGaps,s=this._children.slice(),u=se.global,l=u.elements.line,c=-1;for(this._loop&&s.length&&s.push(s[0]),o.save(),o.lineCap=i.borderCapStyle||l.borderCapStyle,o.setLineDash&&o.setLineDash(i.borderDash||l.borderDash),o.lineDashOffset=Me(i.borderDashOffset,l.borderDashOffset),o.lineJoin=i.borderJoinStyle||l.borderJoinStyle,o.lineWidth=Me(i.borderWidth,l.borderWidth),o.strokeStyle=i.borderColor||u.defaultColor,o.beginPath(),c=-1,e=0;e<s.length;++e)t=s[e],n=ce.previousItem(s,e),r=t._view,0===e?r.skip||(o.moveTo(r.x,r.y),c=e):(n=-1===c?n:s[c],r.skip||(c!==e-1&&!a||-1===c?o.moveTo(r.x,r.y):ce.canvas.lineTo(o,n._view,t._view),c=e));o.stroke(),o.restore()}}),Ce=ce.valueOrDefault,Pe=se.global.defaultColor;function Re(e){var t=this._view;return!!t&&Math.abs(e-t.x)<t.radius+t.hitRadius}se._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Pe,borderColor:Pe,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var De=pe.extend({inRange:function(e,t){var n=this._view;return!!n&&Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:Re,inXRange:Re,inYRange:function(e){var t=this._view;return!!t&&Math.abs(e-t.y)<t.radius+t.hitRadius},getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,n=this._chart.ctx,r=t.pointStyle,i=t.rotation,o=t.radius,a=t.x,s=t.y,u=se.global,l=u.defaultColor;t.skip||(void 0===e||ce.canvas._isPointInArea(t,e))&&(n.strokeStyle=t.borderColor||l,n.lineWidth=Ce(t.borderWidth,u.elements.point.borderWidth),n.fillStyle=t.backgroundColor||l,ce.canvas.drawPoint(n,r,o,a,s,i))}}),Oe=se.global.defaultColor;function we(e){return e&&void 0!==e.width}function Le(e){var t,n,r,i,o;return we(e)?(t=e.x-(o=e.width/2),n=e.x+o,r=Math.min(e.y,e.base),i=Math.max(e.y,e.base)):(o=e.height/2,t=Math.min(e.x,e.base),n=Math.max(e.x,e.base),r=e.y-o,i=e.y+o),{left:t,top:r,right:n,bottom:i}}function Ie(e,t,n){return e===t?n:e===n?t:e}function Fe(e,t,n){var r=null===t,i=null===n,o=!(!e||r&&i)&&Le(e);return o&&(r||t>=o.left&&t<=o.right)&&(i||n>=o.top&&n<=o.bottom)}se._set("global",{elements:{rectangle:{backgroundColor:Oe,borderColor:Oe,borderSkipped:"bottom",borderWidth:0}}});var Ne=pe.extend({draw:function(){var e=this._chart.ctx,t=this._view,n=function(e){var t=Le(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){var r,i,o,a,s=e.borderWidth,u=function(e){var t=e.borderSkipped,n={};return t?(e.horizontal?e.base>e.x&&(t=Ie(t,"left","right")):e.base<e.y&&(t=Ie(t,"bottom","top")),n[t]=!0,n):n}(e);return ce.isObject(s)?(r=+s.top||0,i=+s.right||0,o=+s.bottom||0,a=+s.left||0):r=i=o=a=+s||0,{t:u.top||r<0?0:r>n?n:r,r:u.right||i<0?0:i>t?t:i,b:u.bottom||o<0?0:o>n?n:o,l:u.left||a<0?0:a>t?t:a}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b}}}(t),r=n.outer,i=n.inner;e.fillStyle=t.backgroundColor,e.fillRect(r.x,r.y,r.w,r.h),r.w===i.w&&r.h===i.h||(e.save(),e.beginPath(),e.rect(r.x,r.y,r.w,r.h),e.clip(),e.fillStyle=t.borderColor,e.rect(i.x,i.y,i.w,i.h),e.fill("evenodd"),e.restore())},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){return Fe(this._view,e,t)},inLabelRange:function(e,t){var n=this._view;return we(n)?Fe(n,e,null):Fe(n,null,t)},inXRange:function(e){return Fe(this._view,e,null)},inYRange:function(e){return Fe(this._view,null,e)},getCenterPoint:function(){var e,t,n=this._view;return we(n)?(e=n.x,t=(n.y+n.base)/2):(e=(n.x+n.base)/2,t=n.y),{x:e,y:t}},getArea:function(){var e=this._view;return we(e)?e.width*Math.abs(e.y-e.base):e.height*Math.abs(e.x-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}}),Be={},ke=Se,Ue=De,Ve=Ne;Be.Arc=xe,Be.Line=ke,Be.Point=Ue,Be.Rectangle=Ve;var Ge=ce.options.resolve;se._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}});var je=Ee.extend({dataElementType:Be.Rectangle,initialize:function(){var e,t=this;Ee.prototype.initialize.apply(t,arguments),(e=t.getMeta()).stack=t.getDataset().stack,e.bar=!0},update:function(e){var t,n,r=this.getMeta().data;for(this._ruler=this.getRuler(),t=0,n=r.length;t<n;++t)this.updateElement(r[t],t,e)},updateElement:function(e,t,n){var r=this,i=r.getMeta(),o=r.getDataset(),a=r._resolveElementOptions(e,t);e._xScale=r.getScaleForId(i.xAxisID),e._yScale=r.getScaleForId(i.yAxisID),e._datasetIndex=r.index,e._index=t,e._model={backgroundColor:a.backgroundColor,borderColor:a.borderColor,borderSkipped:a.borderSkipped,borderWidth:a.borderWidth,datasetLabel:o.label,label:r.chart.data.labels[t]},r._updateElementGeometry(e,t,n),e.pivot()},_updateElementGeometry:function(e,t,n){var r=this,i=e._model,o=r._getValueScale(),a=o.getBasePixel(),s=o.isHorizontal(),u=r._ruler||r.getRuler(),l=r.calculateBarValuePixels(r.index,t),c=r.calculateBarIndexPixels(r.index,t,u);i.horizontal=s,i.base=n?a:l.base,i.x=s?n?a:l.head:c.center,i.y=s?c.center:n?a:l.head,i.height=s?c.size:void 0,i.width=s?void 0:c.size},_getStacks:function(e){var t,n,r=this.chart,i=this._getIndexScale().options.stacked,o=void 0===e?r.data.datasets.length:e+1,a=[];for(t=0;t<o;++t)(n=r.getDatasetMeta(t)).bar&&r.isDatasetVisible(t)&&(!1===i||!0===i&&-1===a.indexOf(n.stack)||void 0===i&&(void 0===n.stack||-1===a.indexOf(n.stack)))&&a.push(n.stack);return a},getStackCount:function(){return this._getStacks().length},getStackIndex:function(e,t){var n=this._getStacks(e),r=void 0!==t?n.indexOf(t):-1;return-1===r?n.length-1:r},getRuler:function(){var e,t,n=this._getIndexScale(),r=this.getStackCount(),i=this.index,o=n.isHorizontal(),a=o?n.left:n.top,s=a+(o?n.width:n.height),u=[];for(e=0,t=this.getMeta().data.length;e<t;++e)u.push(n.getPixelForValue(null,e,i));return{min:ce.isNullOrUndef(n.options.barThickness)?function(e,t){var n,r,i,o,a=e.isHorizontal()?e.width:e.height,s=e.getTicks();for(i=1,o=t.length;i<o;++i)a=Math.min(a,Math.abs(t[i]-t[i-1]));for(i=0,o=s.length;i<o;++i)r=e.getPixelForTick(i),a=i>0?Math.min(a,r-n):a,n=r;return a}(n,u):-1,pixels:u,start:a,end:s,stackCount:r,scale:n}},calculateBarValuePixels:function(e,t){var n,r,i,o,a,s,u=this.chart,l=this.getMeta(),c=this._getValueScale(),h=c.isHorizontal(),d=u.data.datasets,f=+c.getRightValue(d[e].data[t]),p=c.options.minBarLength,_=c.options.stacked,m=l.stack,g=0;if(_||void 0===_&&void 0!==m)for(n=0;n<e;++n)(r=u.getDatasetMeta(n)).bar&&r.stack===m&&r.controller._getValueScaleId()===c.id&&u.isDatasetVisible(n)&&(i=+c.getRightValue(d[n].data[t]),(f<0&&i<0||f>=0&&i>0)&&(g+=i));return o=c.getPixelForValue(g),s=(a=c.getPixelForValue(g+f))-o,void 0!==p&&Math.abs(s)<p&&(s=p,a=f>=0&&!h||f<0&&h?o-p:o+p),{size:s,base:o,head:a,center:a+s/2}},calculateBarIndexPixels:function(e,t,n){var r=n.scale.options,i="flex"===r.barThickness?function(e,t,n){var r,i=t.pixels,o=i[e],a=e>0?i[e-1]:null,s=e<i.length-1?i[e+1]:null,u=n.categoryPercentage;return null===a&&(a=o-(null===s?t.end-t.start:s-o)),null===s&&(s=o+o-a),r=o-(o-Math.min(a,s))/2*u,{chunk:Math.abs(s-a)/2*u/t.stackCount,ratio:n.barPercentage,start:r}}(t,n,r):function(e,t,n){var r,i,o=n.barThickness,a=t.stackCount,s=t.pixels[e];return ce.isNullOrUndef(o)?(r=t.min*n.categoryPercentage,i=n.barPercentage):(r=o*a,i=1),{chunk:r/a,ratio:i,start:s-r/2}}(t,n,r),o=this.getStackIndex(e,this.getMeta().stack),a=i.start+i.chunk*o+i.chunk/2,s=Math.min(ce.valueOrDefault(r.maxBarThickness,1/0),i.chunk*i.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}},draw:function(){var e=this.chart,t=this._getValueScale(),n=this.getMeta().data,r=this.getDataset(),i=n.length,o=0;for(ce.canvas.clipArea(e.ctx,e.chartArea);o<i;++o)isNaN(t.getRightValue(r.data[o]))||n[o].draw();ce.canvas.unclipArea(e.ctx)},_resolveElementOptions:function(e,t){var n,r,i,o=this.chart,a=o.data.datasets[this.index],s=e.custom||{},u=o.options.elements.rectangle,l={},c={chart:o,dataIndex:t,dataset:a,datasetIndex:this.index},h=["backgroundColor","borderColor","borderSkipped","borderWidth"];for(n=0,r=h.length;n<r;++n)l[i=h[n]]=Ge([s[i],a[i],u[i]],c,t);return l}}),ze=ce.valueOrDefault,Ye=ce.options.resolve;se._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return(t.datasets[e.datasetIndex].label||"")+": ("+e.xLabel+", "+e.yLabel+", "+t.datasets[e.datasetIndex].data[e.index].r+")"}}}});var He=Ee.extend({dataElementType:Be.Point,update:function(e){var t=this,n=t.getMeta();ce.each(n.data,function(n,r){t.updateElement(n,r,e)})},updateElement:function(e,t,n){var r=this,i=r.getMeta(),o=e.custom||{},a=r.getScaleForId(i.xAxisID),s=r.getScaleForId(i.yAxisID),u=r._resolveElementOptions(e,t),l=r.getDataset().data[t],c=r.index,h=n?a.getPixelForDecimal(.5):a.getPixelForValue("object"==typeof l?l:NaN,t,c),d=n?s.getBasePixel():s.getPixelForValue(l,t,c);e._xScale=a,e._yScale=s,e._options=u,e._datasetIndex=c,e._index=t,e._model={backgroundColor:u.backgroundColor,borderColor:u.borderColor,borderWidth:u.borderWidth,hitRadius:u.hitRadius,pointStyle:u.pointStyle,rotation:u.rotation,radius:n?0:u.radius,skip:o.skip||isNaN(h)||isNaN(d),x:h,y:d},e.pivot()},setHoverStyle:function(e){var t=e._model,n=e._options,r=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=ze(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=ze(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=ze(n.hoverBorderWidth,n.borderWidth),t.radius=n.radius+n.hoverRadius},_resolveElementOptions:function(e,t){var n,r,i,o=this.chart,a=o.data.datasets[this.index],s=e.custom||{},u=o.options.elements.point,l=a.data[t],c={},h={chart:o,dataIndex:t,dataset:a,datasetIndex:this.index},d=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"];for(n=0,r=d.length;n<r;++n)c[i=d[n]]=Ye([s[i],a[i],u[i]],h,t);return c.radius=Ye([s.radius,l?l.r:void 0,a.radius,u.radius],h,t),c}}),We=ce.options.resolve,Xe=ce.valueOrDefault;se._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var n=e.data,r=n.datasets,i=n.labels;if(r.length)for(var o=0;o<r[0].data.length;++o)t.push('<li><span style="background-color:'+r[0].backgroundColor[o]+'"></span>'),i[o]&&t.push(i[o]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,r){var i=e.getDatasetMeta(0),o=t.datasets[0],a=i.data[r],s=a&&a.custom||{},u=e.options.elements.arc;return{text:n,fillStyle:We([s.backgroundColor,o.backgroundColor,u.backgroundColor],void 0,r),strokeStyle:We([s.borderColor,o.borderColor,u.borderColor],void 0,r),lineWidth:We([s.borderWidth,o.borderWidth,u.borderWidth],void 0,r),hidden:isNaN(o.data[r])||i.data[r].hidden,index:r}}):[]}},onClick:function(e,t){var n,r,i,o=t.index,a=this.chart;for(n=0,r=(a.data.datasets||[]).length;n<r;++n)(i=a.getDatasetMeta(n)).data[o]&&(i.data[o].hidden=!i.data[o].hidden);a.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.labels[e.index],r=": "+t.datasets[e.datasetIndex].data[e.index];return ce.isArray(n)?(n=n.slice())[0]+=r:n+=r,n}}}});var Ke=Ee.extend({dataElementType:Be.Arc,linkScales:ce.noop,getRingIndex:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&++t;return t},update:function(e){var t,n,r=this,i=r.chart,o=i.chartArea,a=i.options,s=o.right-o.left,u=o.bottom-o.top,l=Math.min(s,u),c={x:0,y:0},h=r.getMeta(),d=h.data,f=a.cutoutPercentage,p=a.circumference,_=r._getRingWeight(r.index);if(p<2*Math.PI){var m=a.rotation%(2*Math.PI),g=(m+=2*Math.PI*(m>=Math.PI?-1:m<-Math.PI?1:0))+p,v={x:Math.cos(m),y:Math.sin(m)},y={x:Math.cos(g),y:Math.sin(g)},b=m<=0&&g>=0||m<=2*Math.PI&&2*Math.PI<=g,T=m<=.5*Math.PI&&.5*Math.PI<=g||m<=2.5*Math.PI&&2.5*Math.PI<=g,E=m<=-Math.PI&&-Math.PI<=g||m<=Math.PI&&Math.PI<=g,x=m<=.5*-Math.PI&&.5*-Math.PI<=g||m<=1.5*Math.PI&&1.5*Math.PI<=g,M=f/100,A={x:E?-1:Math.min(v.x*(v.x<0?1:M),y.x*(y.x<0?1:M)),y:x?-1:Math.min(v.y*(v.y<0?1:M),y.y*(y.y<0?1:M))},S={x:b?1:Math.max(v.x*(v.x>0?1:M),y.x*(y.x>0?1:M)),y:T?1:Math.max(v.y*(v.y>0?1:M),y.y*(y.y>0?1:M))},C={width:.5*(S.x-A.x),height:.5*(S.y-A.y)};l=Math.min(s/C.width,u/C.height),c={x:-.5*(S.x+A.x),y:-.5*(S.y+A.y)}}for(t=0,n=d.length;t<n;++t)d[t]._options=r._resolveElementOptions(d[t],t);for(i.borderWidth=r.getMaxBorderWidth(),i.outerRadius=Math.max((l-i.borderWidth)/2,0),i.innerRadius=Math.max(f?i.outerRadius/100*f:0,0),i.radiusLength=(i.outerRadius-i.innerRadius)/(r._getVisibleDatasetWeightTotal()||1),i.offsetX=c.x*i.outerRadius,i.offsetY=c.y*i.outerRadius,h.total=r.calculateTotal(),r.outerRadius=i.outerRadius-i.radiusLength*r._getRingWeightOffset(r.index),r.innerRadius=Math.max(r.outerRadius-i.radiusLength*_,0),t=0,n=d.length;t<n;++t)r.updateElement(d[t],t,e)},updateElement:function(e,t,n){var r=this,i=r.chart,o=i.chartArea,a=i.options,s=a.animation,u=(o.left+o.right)/2,l=(o.top+o.bottom)/2,c=a.rotation,h=a.rotation,d=r.getDataset(),f=n&&s.animateRotate?0:e.hidden?0:r.calculateCircumference(d.data[t])*(a.circumference/(2*Math.PI)),p=e._options||{};ce.extend(e,{_datasetIndex:r.index,_index:t,_model:{backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,borderAlign:p.borderAlign,x:u+i.offsetX,y:l+i.offsetY,startAngle:c,endAngle:h,circumference:f,outerRadius:n&&s.animateScale?0:r.outerRadius,innerRadius:n&&s.animateScale?0:r.innerRadius,label:ce.valueAtIndexOrDefault(d.label,t,i.data.labels[t])}});var _=e._model;n&&s.animateRotate||(_.startAngle=0===t?a.rotation:r.getMeta().data[t-1]._model.endAngle,_.endAngle=_.startAngle+_.circumference),e.pivot()},calculateTotal:function(){var e,t=this.getDataset(),n=this.getMeta(),r=0;return ce.each(n.data,function(n,i){e=t.data[i],isNaN(e)||n.hidden||(r+=Math.abs(e))}),r},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?2*Math.PI*(Math.abs(e)/t):0},getMaxBorderWidth:function(e){var t,n,r,i,o,a,s,u,l=0,c=this.chart;if(!e)for(t=0,n=c.data.datasets.length;t<n;++t)if(c.isDatasetVisible(t)){e=(r=c.getDatasetMeta(t)).data,t!==this.index&&(o=r.controller);break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)i=e[t],"inner"!==(a=o?o._resolveElementOptions(i,t):i._options).borderAlign&&(l=(u=a.hoverBorderWidth)>(l=(s=a.borderWidth)>l?s:l)?u:l);return l},setHoverStyle:function(e){var t=e._model,n=e._options,r=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=Xe(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=Xe(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=Xe(n.hoverBorderWidth,n.borderWidth)},_resolveElementOptions:function(e,t){var n,r,i,o=this.chart,a=this.getDataset(),s=e.custom||{},u=o.options.elements.arc,l={},c={chart:o,dataIndex:t,dataset:a,datasetIndex:this.index},h=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(n=0,r=h.length;n<r;++n)l[i=h[n]]=We([s[i],a[i],u[i]],c,t);return l},_getRingWeightOffset:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t},_getRingWeight:function(e){return Math.max(Xe(this.chart.data.datasets[e].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});se._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}});var Qe=je.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),qe=ce.valueOrDefault,Ze=ce.options.resolve,Je=ce.canvas._isPointInArea;function $e(e,t){return qe(e.showLine,t.showLines)}se._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var et=Ee.extend({datasetElementType:Be.Line,dataElementType:Be.Point,update:function(e){var t,n,r=this,i=r.getMeta(),o=i.dataset,a=i.data||[],s=r.getScaleForId(i.yAxisID),u=r.getDataset(),l=$e(u,r.chart.options);for(l&&(void 0!==u.tension&&void 0===u.lineTension&&(u.lineTension=u.tension),o._scale=s,o._datasetIndex=r.index,o._children=a,o._model=r._resolveLineOptions(o),o.pivot()),t=0,n=a.length;t<n;++t)r.updateElement(a[t],t,e);for(l&&0!==o._model.tension&&r.updateBezierControlPoints(),t=0,n=a.length;t<n;++t)a[t].pivot()},updateElement:function(e,t,n){var r,i,o=this,a=o.getMeta(),s=e.custom||{},u=o.getDataset(),l=o.index,c=u.data[t],h=o.getScaleForId(a.yAxisID),d=o.getScaleForId(a.xAxisID),f=a.dataset._model,p=o._resolvePointOptions(e,t);r=d.getPixelForValue("object"==typeof c?c:NaN,t,l),i=n?h.getBasePixel():o.calculatePointY(c,t,l),e._xScale=d,e._yScale=h,e._options=p,e._datasetIndex=l,e._index=t,e._model={x:r,y:i,skip:s.skip||isNaN(r)||isNaN(i),radius:p.radius,pointStyle:p.pointStyle,rotation:p.rotation,backgroundColor:p.backgroundColor,borderColor:p.borderColor,borderWidth:p.borderWidth,tension:qe(s.tension,f?f.tension:0),steppedLine:!!f&&f.steppedLine,hitRadius:p.hitRadius}},_resolvePointOptions:function(e,t){var n,r,i,o=this.chart,a=o.data.datasets[this.index],s=e.custom||{},u=o.options.elements.point,l={},c={chart:o,dataIndex:t,dataset:a,datasetIndex:this.index},h={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},d=Object.keys(h);for(n=0,r=d.length;n<r;++n)l[i=d[n]]=Ze([s[i],a[h[i]],a[i],u[i]],c,t);return l},_resolveLineOptions:function(e){var t,n,r,i=this.chart,o=i.data.datasets[this.index],a=e.custom||{},s=i.options,u=s.elements.line,l={},c=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill","cubicInterpolationMode"];for(t=0,n=c.length;t<n;++t)l[r=c[t]]=Ze([a[r],o[r],u[r]]);return l.spanGaps=qe(o.spanGaps,s.spanGaps),l.tension=qe(o.lineTension,u.tension),l.steppedLine=Ze([a.steppedLine,o.steppedLine,u.stepped]),l},calculatePointY:function(e,t,n){var r,i,o,a=this.chart,s=this.getMeta(),u=this.getScaleForId(s.yAxisID),l=0,c=0;if(u.options.stacked){for(r=0;r<n;r++)if(i=a.data.datasets[r],"line"===(o=a.getDatasetMeta(r)).type&&o.yAxisID===u.id&&a.isDatasetVisible(r)){var h=Number(u.getRightValue(i.data[t]));h<0?c+=h||0:l+=h||0}var d=Number(u.getRightValue(e));return u.getPixelForValue(d<0?c+d:l+d)}return u.getPixelForValue(e)},updateBezierControlPoints:function(){var e,t,n,r,i=this.chart,o=this.getMeta(),a=o.dataset._model,s=i.chartArea,u=o.data||[];function l(e,t,n){return Math.max(Math.min(e,n),t)}if(a.spanGaps&&(u=u.filter(function(e){return!e._model.skip})),"monotone"===a.cubicInterpolationMode)ce.splineCurveMonotone(u);else for(e=0,t=u.length;e<t;++e)n=u[e]._model,r=ce.splineCurve(ce.previousItem(u,e)._model,n,ce.nextItem(u,e)._model,a.tension),n.controlPointPreviousX=r.previous.x,n.controlPointPreviousY=r.previous.y,n.controlPointNextX=r.next.x,n.controlPointNextY=r.next.y;if(i.options.elements.line.capBezierPoints)for(e=0,t=u.length;e<t;++e)Je(n=u[e]._model,s)&&(e>0&&Je(u[e-1]._model,s)&&(n.controlPointPreviousX=l(n.controlPointPreviousX,s.left,s.right),n.controlPointPreviousY=l(n.controlPointPreviousY,s.top,s.bottom)),e<u.length-1&&Je(u[e+1]._model,s)&&(n.controlPointNextX=l(n.controlPointNextX,s.left,s.right),n.controlPointNextY=l(n.controlPointNextY,s.top,s.bottom)))},draw:function(){var e,t=this.chart,n=this.getMeta(),r=n.data||[],i=t.chartArea,o=r.length,a=0;for($e(this.getDataset(),t.options)&&(ce.canvas.clipArea(t.ctx,{left:i.left,right:i.right,top:i.top-(e=(n.dataset._model.borderWidth||0)/2),bottom:i.bottom+e}),n.dataset.draw(),ce.canvas.unclipArea(t.ctx));a<o;++a)r[a].draw(i)},setHoverStyle:function(e){var t=e._model,n=e._options,r=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=qe(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=qe(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=qe(n.hoverBorderWidth,n.borderWidth),t.radius=qe(n.hoverRadius,n.radius)}}),tt=ce.options.resolve;se._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var n=e.data,r=n.datasets,i=n.labels;if(r.length)for(var o=0;o<r[0].data.length;++o)t.push('<li><span style="background-color:'+r[0].backgroundColor[o]+'"></span>'),i[o]&&t.push(i[o]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,r){var i=e.getDatasetMeta(0),o=t.datasets[0],a=i.data[r].custom||{},s=e.options.elements.arc;return{text:n,fillStyle:tt([a.backgroundColor,o.backgroundColor,s.backgroundColor],void 0,r),strokeStyle:tt([a.borderColor,o.borderColor,s.borderColor],void 0,r),lineWidth:tt([a.borderWidth,o.borderWidth,s.borderWidth],void 0,r),hidden:isNaN(o.data[r])||i.data[r].hidden,index:r}}):[]}},onClick:function(e,t){var n,r,i,o=t.index,a=this.chart;for(n=0,r=(a.data.datasets||[]).length;n<r;++n)(i=a.getDatasetMeta(n)).data[o].hidden=!i.data[o].hidden;a.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}});var nt=Ee.extend({dataElementType:Be.Arc,linkScales:ce.noop,update:function(e){var t,n,r,i=this,o=i.getDataset(),a=i.getMeta(),s=i.chart.options.startAngle||0,u=i._starts=[],l=i._angles=[],c=a.data;for(i._updateRadius(),a.count=i.countVisibleElements(),t=0,n=o.data.length;t<n;t++)u[t]=s,r=i._computeAngle(t),l[t]=r,s+=r;for(t=0,n=c.length;t<n;++t)c[t]._options=i._resolveElementOptions(c[t],t),i.updateElement(c[t],t,e)},_updateRadius:function(){var e=this,t=e.chart,n=t.chartArea,r=t.options,i=Math.min(n.right-n.left,n.bottom-n.top);t.outerRadius=Math.max(i/2,0),t.innerRadius=Math.max(r.cutoutPercentage?t.outerRadius/100*r.cutoutPercentage:1,0),t.radiusLength=(t.outerRadius-t.innerRadius)/t.getVisibleDatasetCount(),e.outerRadius=t.outerRadius-t.radiusLength*e.index,e.innerRadius=e.outerRadius-t.radiusLength},updateElement:function(e,t,n){var r=this,i=r.chart,o=r.getDataset(),a=i.options,s=a.animation,u=i.scale,l=i.data.labels,c=u.xCenter,h=u.yCenter,d=a.startAngle,f=e.hidden?0:u.getDistanceFromCenterForValue(o.data[t]),p=r._starts[t],_=p+(e.hidden?0:r._angles[t]),m=s.animateScale?0:u.getDistanceFromCenterForValue(o.data[t]),g=e._options||{};ce.extend(e,{_datasetIndex:r.index,_index:t,_scale:u,_model:{backgroundColor:g.backgroundColor,borderColor:g.borderColor,borderWidth:g.borderWidth,borderAlign:g.borderAlign,x:c,y:h,innerRadius:0,outerRadius:n?m:f,startAngle:n&&s.animateRotate?d:p,endAngle:n&&s.animateRotate?d:_,label:ce.valueAtIndexOrDefault(l,t,l[t])}}),e.pivot()},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),n=0;return ce.each(t.data,function(t,r){isNaN(e.data[r])||t.hidden||n++}),n},setHoverStyle:function(e){var t=e._model,n=e._options,r=ce.getHoverColor,i=ce.valueOrDefault;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth},t.backgroundColor=i(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=i(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=i(n.hoverBorderWidth,n.borderWidth)},_resolveElementOptions:function(e,t){var n,r,i,o=this.chart,a=this.getDataset(),s=e.custom||{},u=o.options.elements.arc,l={},c={chart:o,dataIndex:t,dataset:a,datasetIndex:this.index},h=["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"];for(n=0,r=h.length;n<r;++n)l[i=h[n]]=tt([s[i],a[i],u[i]],c,t);return l},_computeAngle:function(e){var t=this,n=this.getMeta().count,r=t.getDataset(),i=t.getMeta();return isNaN(r.data[e])||i.data[e].hidden?0:tt([t.chart.options.elements.arc.angle,2*Math.PI/n],{chart:t.chart,dataIndex:e,dataset:r,datasetIndex:t.index},e)}});se._set("pie",ce.clone(se.doughnut)),se._set("pie",{cutoutPercentage:0});var rt=Ke,it=ce.valueOrDefault,ot=ce.options.resolve;se._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}});var at=Ee.extend({datasetElementType:Be.Line,dataElementType:Be.Point,linkScales:ce.noop,update:function(e){var t,n,r=this,i=r.getMeta(),o=i.dataset,a=i.data||[],s=r.chart.scale,u=r.getDataset();for(void 0!==u.tension&&void 0===u.lineTension&&(u.lineTension=u.tension),o._scale=s,o._datasetIndex=r.index,o._children=a,o._loop=!0,o._model=r._resolveLineOptions(o),o.pivot(),t=0,n=a.length;t<n;++t)r.updateElement(a[t],t,e);for(r.updateBezierControlPoints(),t=0,n=a.length;t<n;++t)a[t].pivot()},updateElement:function(e,t,n){var r=this,i=e.custom||{},o=r.getDataset(),a=r.chart.scale,s=a.getPointPositionForValue(t,o.data[t]),u=r._resolvePointOptions(e,t),l=r.getMeta().dataset._model,c=n?a.xCenter:s.x,h=n?a.yCenter:s.y;e._scale=a,e._options=u,e._datasetIndex=r.index,e._index=t,e._model={x:c,y:h,skip:i.skip||isNaN(c)||isNaN(h),radius:u.radius,pointStyle:u.pointStyle,rotation:u.rotation,backgroundColor:u.backgroundColor,borderColor:u.borderColor,borderWidth:u.borderWidth,tension:it(i.tension,l?l.tension:0),hitRadius:u.hitRadius}},_resolvePointOptions:function(e,t){var n,r,i,o=this.chart,a=o.data.datasets[this.index],s=e.custom||{},u=o.options.elements.point,l={},c={chart:o,dataIndex:t,dataset:a,datasetIndex:this.index},h={backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},d=Object.keys(h);for(n=0,r=d.length;n<r;++n)l[i=d[n]]=ot([s[i],a[h[i]],a[i],u[i]],c,t);return l},_resolveLineOptions:function(e){var t,n,r,i=this.chart,o=i.data.datasets[this.index],a=e.custom||{},s=i.options.elements.line,u={},l=["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"];for(t=0,n=l.length;t<n;++t)u[r=l[t]]=ot([a[r],o[r],s[r]]);return u.tension=it(o.lineTension,s.tension),u},updateBezierControlPoints:function(){var e,t,n,r,i=this.getMeta(),o=this.chart.chartArea,a=i.data||[];function s(e,t,n){return Math.max(Math.min(e,n),t)}for(e=0,t=a.length;e<t;++e)n=a[e]._model,r=ce.splineCurve(ce.previousItem(a,e,!0)._model,n,ce.nextItem(a,e,!0)._model,n.tension),n.controlPointPreviousX=s(r.previous.x,o.left,o.right),n.controlPointPreviousY=s(r.previous.y,o.top,o.bottom),n.controlPointNextX=s(r.next.x,o.left,o.right),n.controlPointNextY=s(r.next.y,o.top,o.bottom)},setHoverStyle:function(e){var t=e._model,n=e._options,r=ce.getHoverColor;e.$previousStyle={backgroundColor:t.backgroundColor,borderColor:t.borderColor,borderWidth:t.borderWidth,radius:t.radius},t.backgroundColor=it(n.hoverBackgroundColor,r(n.backgroundColor)),t.borderColor=it(n.hoverBorderColor,r(n.borderColor)),t.borderWidth=it(n.hoverBorderWidth,n.borderWidth),t.radius=it(n.hoverRadius,n.radius)}});se._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}});var st={bar:je,bubble:He,doughnut:Ke,horizontalBar:Qe,line:et,polarArea:nt,pie:rt,radar:at,scatter:et};function ut(e,t){return e.native?{x:e.x,y:e.y}:ce.getRelativePosition(e,t)}function lt(e,t){var n,r,i,o,a;for(r=0,o=e.data.datasets.length;r<o;++r)if(e.isDatasetVisible(r))for(i=0,a=(n=e.getDatasetMeta(r)).data.length;i<a;++i){var s=n.data[i];s._view.skip||t(s)}}function ct(e,t){var n=[];return lt(e,function(e){e.inRange(t.x,t.y)&&n.push(e)}),n}function ht(e,t,n,r){var i=Number.POSITIVE_INFINITY,o=[];return lt(e,function(e){if(!n||e.inRange(t.x,t.y)){var a=e.getCenterPoint(),s=r(t,a);s<i?(o=[e],i=s):s===i&&o.push(e)}}),o}function dt(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){var i=t?Math.abs(e.x-r.x):0,o=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function ft(e,t,n){var r=ut(t,e);n.axis=n.axis||"x";var i=dt(n.axis),o=n.intersect?ct(e,r):ht(e,r,!1,i),a=[];return o.length?(e.data.datasets.forEach(function(t,n){if(e.isDatasetVisible(n)){var r=e.getDatasetMeta(n).data[o[0]._index];r&&!r._view.skip&&a.push(r)}}),a):[]}var pt={modes:{single:function(e,t){var n=ut(t,e),r=[];return lt(e,function(e){if(e.inRange(n.x,n.y))return r.push(e),r}),r.slice(0,1)},label:ft,index:ft,dataset:function(e,t,n){var r=ut(t,e);n.axis=n.axis||"xy";var i=dt(n.axis),o=n.intersect?ct(e,r):ht(e,r,!1,i);return o.length>0&&(o=e.getDatasetMeta(o[0]._datasetIndex).data),o},"x-axis":function(e,t){return ft(e,t,{intersect:!1})},point:function(e,t){return ct(e,ut(t,e))},nearest:function(e,t,n){var r=ut(t,e);n.axis=n.axis||"xy";var i=dt(n.axis);return ht(e,r,n.intersect,i)},x:function(e,t,n){var r=ut(t,e),i=[],o=!1;return lt(e,function(e){e.inXRange(r.x)&&i.push(e),e.inRange(r.x,r.y)&&(o=!0)}),n.intersect&&!o&&(i=[]),i},y:function(e,t,n){var r=ut(t,e),i=[],o=!1;return lt(e,function(e){e.inYRange(r.y)&&i.push(e),e.inRange(r.x,r.y)&&(o=!0)}),n.intersect&&!o&&(i=[]),i}}};function _t(e,t){return ce.where(e,function(e){return e.position===t})}function mt(e,t){e.forEach(function(e,t){return e._tmpIndex_=t,e}),e.sort(function(e,n){var r=t?n:e,i=t?e:n;return r.weight===i.weight?r._tmpIndex_-i._tmpIndex_:r.weight-i.weight}),e.forEach(function(e){delete e._tmpIndex_})}function gt(e,t){ce.each(e,function(e){t[e.position]+=e.isHorizontal()?e.height:e.width})}se._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var vt,yt={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure:function(e,t,n){for(var r,i=["fullWidth","position","weight"],o=i.length,a=0;a<o;++a)n.hasOwnProperty(r=i[a])&&(t[r]=n[r])},update:function(e,t,n){if(e){var r=ce.options.toPadding((e.options.layout||{}).padding),i=r.left,o=r.right,a=r.top,s=r.bottom,u=_t(e.boxes,"left"),l=_t(e.boxes,"right"),c=_t(e.boxes,"top"),h=_t(e.boxes,"bottom"),d=_t(e.boxes,"chartArea");mt(u,!0),mt(l,!1),mt(c,!0),mt(h,!1);var f,p=u.concat(l),_=c.concat(h),m=p.concat(_),g=t-i-o,v=n-a-s,y=(t-g/2)/p.length,b=g,T=v,E={top:a,left:i,bottom:s,right:o},x=[];ce.each(m,function(e){var t,n=e.isHorizontal();n?(t=e.update(e.fullWidth?g:b,v/2),T-=t.height):(t=e.update(y,T),b-=t.width),x.push({horizontal:n,width:t.width,box:e})}),f=function(e){var t=0,n=0,r=0,i=0;return ce.each(m,function(e){if(e.getPadding){var o=e.getPadding();t=Math.max(t,o.top),n=Math.max(n,o.left),r=Math.max(r,o.bottom),i=Math.max(i,o.right)}}),{top:t,left:n,bottom:r,right:i}}(),ce.each(p,D),gt(p,E),ce.each(_,D),gt(_,E),ce.each(p,function(e){var t=ce.findNextWhere(x,function(t){return t.box===e});t&&e.update(t.width,T,{left:0,right:0,top:E.top,bottom:E.bottom})}),gt(m,E={top:a,left:i,bottom:s,right:o});var M=Math.max(f.left-E.left,0);E.left+=M,E.right+=Math.max(f.right-E.right,0);var A=Math.max(f.top-E.top,0);E.top+=A,E.bottom+=Math.max(f.bottom-E.bottom,0);var S=n-E.top-E.bottom,C=t-E.left-E.right;C===b&&S===T||(ce.each(p,function(e){e.height=S}),ce.each(_,function(e){e.fullWidth||(e.width=C)}),T=S,b=C);var P=i+M,R=a+A;ce.each(u.concat(c),O),P+=b,R+=T,ce.each(l,O),ce.each(h,O),e.chartArea={left:E.left,top:E.top,right:E.left+b,bottom:E.top+T},ce.each(d,function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update(b,T)})}function D(e){var t=ce.findNextWhere(x,function(t){return t.box===e});if(t)if(t.horizontal){var n={left:Math.max(E.left,f.left),right:Math.max(E.right,f.right),top:0,bottom:0};e.update(e.fullWidth?g:b,v/2,n)}else e.update(t.width,T)}function O(e){e.isHorizontal()?(e.left=e.fullWidth?i:E.left,e.right=e.fullWidth?t-o:E.left+b,e.top=R,e.bottom=R+e.height,R=e.bottom):(e.left=P,e.right=P+e.width,e.top=E.top,e.bottom=E.top+T,P=e.right)}}},bt=(vt=Object.freeze({default:"/*\n * DOM element rendering detection\n * https://davidwalsh.name/detect-node-insertion\n */\n@keyframes chartjs-render-animation {\n\tfrom { opacity: 0.99; }\n\tto { opacity: 1; }\n}\n\n.chartjs-render-monitor {\n\tanimation: chartjs-render-animation 0.001s;\n}\n\n/*\n * DOM element resizing detection\n * https://github.com/marcj/css-element-queries\n */\n.chartjs-size-monitor,\n.chartjs-size-monitor-expand,\n.chartjs-size-monitor-shrink {\n\tposition: absolute;\n\tdirection: ltr;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n\tpointer-events: none;\n\tvisibility: hidden;\n\tz-index: -1;\n}\n\n.chartjs-size-monitor-expand > div {\n\tposition: absolute;\n\twidth: 1000000px;\n\theight: 1000000px;\n\tleft: 0;\n\ttop: 0;\n}\n\n.chartjs-size-monitor-shrink > div {\n\tposition: absolute;\n\twidth: 200%;\n\theight: 200%;\n\tleft: 0;\n\ttop: 0;\n}\n"}))&&vt.default||vt,Tt=["animationstart","webkitAnimationStart"],Et={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function xt(e,t){var n=ce.getStyle(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?Number(r[1]):void 0}var Mt=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(n){}return e}()&&{passive:!0};function At(e,t,n){e.addEventListener(t,n,Mt)}function St(e,t,n){e.removeEventListener(t,n,Mt)}function Ct(e,t,n,r,i){return{type:e,chart:t,native:i||null,x:void 0!==n?n:null,y:void 0!==r?r:null}}function Pt(e){var t=document.createElement("div");return t.className=e||"",t}var Rt={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(){this._loaded||(this._loaded=!0,this.disableCSSInjection||function(e,t){var n=e._style||document.createElement("style");e._style||(e._style=n,t="/* Chart.js */\n"+t,n.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(n)),n.appendChild(document.createTextNode(t))}(this,bt))},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var n=e&&e.getContext&&e.getContext("2d");return this._ensureLoaded(),n&&n.canvas===e?(function(e,t){var n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e.$chartjs={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===i||""===i){var o=xt(e,"width");void 0!==o&&(e.width=o)}if(null===r||""===r)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var a=xt(e,"height");void 0!==o&&(e.height=a)}}(e,t),n):null},releaseContext:function(e){var t=e.canvas;if(t.$chartjs){var n=t.$chartjs.initial;["height","width"].forEach(function(e){var r=n[e];ce.isNullOrUndef(r)?t.removeAttribute(e):t.setAttribute(e,r)}),ce.each(n.style||{},function(e,n){t.style[n]=e}),t.width=t.width,delete t.$chartjs}},addEventListener:function(e,t,n){var r=e.canvas;if("resize"!==t){var i=n.$chartjs||(n.$chartjs={});At(r,t,(i.proxies||(i.proxies={}))[e.id+"_"+t]=function(t){n(function(e,t){var n=Et[e.type]||e.type,r=ce.getRelativePosition(e,t);return Ct(n,t,r.x,r.y,e)}(t,e))})}else!function(e,t,n){var r,i,o,a,s=e.$chartjs||(e.$chartjs={}),u=s.resizer=function(e){var t=Pt("chartjs-size-monitor"),n=Pt("chartjs-size-monitor-expand"),r=Pt("chartjs-size-monitor-shrink");n.appendChild(Pt()),r.appendChild(Pt()),t.appendChild(n),t.appendChild(r),t._reset=function(){n.scrollLeft=1e6,n.scrollTop=1e6,r.scrollLeft=1e6,r.scrollTop=1e6};var i=function(){t._reset(),e()};return At(n,"scroll",i.bind(n,"expand")),At(r,"scroll",i.bind(r,"shrink")),t}((r=function(){if(s.resizer){var r=n.options.maintainAspectRatio&&e.parentNode,i=r?r.clientWidth:0;t(Ct("resize",n)),r&&r.clientWidth<i&&n.canvas&&t(Ct("resize",n))}},o=!1,a=[],function(){a=Array.prototype.slice.call(arguments),i=i||this,o||(o=!0,ce.requestAnimFrame.call(window,function(){o=!1,r.apply(i,a)}))}));!function(e,t){var n=e.$chartjs||(e.$chartjs={}),r=n.renderProxy=function(e){"chartjs-render-animation"===e.animationName&&t()};ce.each(Tt,function(t){At(e,t,r)}),n.reflow=!!e.offsetParent,e.classList.add("chartjs-render-monitor")}(e,function(){if(s.resizer){var t=e.parentNode;t&&t!==u.parentNode&&t.insertBefore(u,t.firstChild),u._reset()}})}(r,n,e)},removeEventListener:function(e,t,n){var r=e.canvas;if("resize"!==t){var i=((n.$chartjs||{}).proxies||{})[e.id+"_"+t];i&&St(r,t,i)}else!function(e){var t=e.$chartjs||{},n=t.resizer;delete t.resizer,function(e){var t=e.$chartjs||{},n=t.renderProxy;n&&(ce.each(Tt,function(t){St(e,t,n)}),delete t.renderProxy),e.classList.remove("chartjs-render-monitor")}(e),n&&n.parentNode&&n.parentNode.removeChild(n)}(r)}};ce.addEvent=At,ce.removeEvent=St;var Dt=ce.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},Rt._enabled?Rt:{acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}});se._set("global",{plugins:{}});var Ot={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach(function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,n){var r,i,o,a,s,u=this.descriptors(e),l=u.length;for(r=0;r<l;++r)if("function"==typeof(s=(o=(i=u[r]).plugin)[t])&&((a=[e].concat(n||[])).push(i.options),!1===s.apply(o,a)))return!1;return!0},descriptors:function(e){var t=e.$plugins||(e.$plugins={});if(t.id===this._cacheId)return t.descriptors;var n=[],r=[],i=e&&e.config||{},o=i.options&&i.options.plugins||{};return this._plugins.concat(i.plugins||[]).forEach(function(e){if(-1===n.indexOf(e)){var t=e.id,i=o[t];!1!==i&&(!0===i&&(i=ce.clone(se.global.plugins[t])),n.push(e),r.push({plugin:e,options:i||{}}))}}),t.descriptors=r,t.id=this._cacheId,r},_invalidate:function(e){delete e.$plugins}},wt={constructors:{},defaults:{},registerScaleType:function(e,t,n){this.constructors[e]=t,this.defaults[e]=ce.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?ce.merge({},[se.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){this.defaults.hasOwnProperty(e)&&(this.defaults[e]=ce.extend(this.defaults[e],t))},addScalesToLayout:function(e){ce.each(e.scales,function(t){t.fullWidth=t.options.fullWidth,t.position=t.options.position,t.weight=t.options.weight,yt.addBox(e,t)})}},Lt=ce.valueOrDefault;se._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:ce.noop,title:function(e,t){var n="",r=t.labels,i=r?r.length:0;if(e.length>0){var o=e[0];o.label?n=o.label:o.xLabel?n=o.xLabel:i>0&&o.index<i&&(n=r[o.index])}return n},afterTitle:ce.noop,beforeBody:ce.noop,beforeLabel:ce.noop,label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n&&(n+=": "),ce.isNullOrUndef(e.value)?n+=e.yLabel:n+=e.value,n},labelColor:function(e,t){var n=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:ce.noop,afterBody:ce.noop,beforeFooter:ce.noop,footer:ce.noop,afterFooter:ce.noop}}});var It={average:function(e){if(!e.length)return!1;var t,n,r=0,i=0,o=0;for(t=0,n=e.length;t<n;++t){var a=e[t];if(a&&a.hasValue()){var s=a.tooltipPosition();r+=s.x,i+=s.y,++o}}return{x:r/o,y:i/o}},nearest:function(e,t){var n,r,i,o=t.x,a=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){var u=e[n];if(u&&u.hasValue()){var l=u.getCenterPoint(),c=ce.distanceBetweenPoints(t,l);c<s&&(s=c,i=u)}}if(i){var h=i.tooltipPosition();o=h.x,a=h.y}return{x:o,y:a}}};function Ft(e,t){return t&&(ce.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Nt(e){return("string"==typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Bt(e){var t=se.global;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,bodyFontColor:e.bodyFontColor,_bodyFontFamily:Lt(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:Lt(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:Lt(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:Lt(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:Lt(e.titleFontStyle,t.defaultFontStyle),titleFontSize:Lt(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:Lt(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:Lt(e.footerFontStyle,t.defaultFontStyle),footerFontSize:Lt(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function kt(e,t){return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-e.xPadding:e.x+e.xPadding}function Ut(e){return Ft([],Nt(e))}var Vt=pe.extend({initialize:function(){this._model=Bt(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options,n=t.callbacks,r=n.beforeTitle.apply(e,arguments),i=n.title.apply(e,arguments),o=n.afterTitle.apply(e,arguments),a=[];return a=Ft(a,Nt(r)),a=Ft(a,Nt(i)),Ft(a,Nt(o))},getBeforeBody:function(){return Ut(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(e,t){var n=this,r=n._options.callbacks,i=[];return ce.each(e,function(e){var o={before:[],lines:[],after:[]};Ft(o.before,Nt(r.beforeLabel.call(n,e,t))),Ft(o.lines,r.label.call(n,e,t)),Ft(o.after,Nt(r.afterLabel.call(n,e,t))),i.push(o)}),i},getAfterBody:function(){return Ut(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var e=this,t=e._options.callbacks,n=t.beforeFooter.apply(e,arguments),r=t.footer.apply(e,arguments),i=t.afterFooter.apply(e,arguments),o=[];return o=Ft(o,Nt(n)),o=Ft(o,Nt(r)),Ft(o,Nt(i))},update:function(e){var t,n,r,i,o,a,s,u,l,c,h=this,d=h._options,f=h._model,p=h._model=Bt(d),_=h._active,m=h._data,g={xAlign:f.xAlign,yAlign:f.yAlign},v={x:f.x,y:f.y},y={width:f.width,height:f.height},b={x:f.caretX,y:f.caretY};if(_.length){p.opacity=1;var T=[],E=[];b=It[d.position].call(h,_,h._eventPosition);var x=[];for(t=0,n=_.length;t<n;++t)x.push((i=void 0,o=void 0,u=void 0,l=void 0,c=void 0,i=(r=_[t])._xScale,o=r._yScale||r._scale,a=r._index,l=(u=r._chart.getDatasetMeta(s=r._datasetIndex).controller)._getIndexScale(),c=u._getValueScale(),{xLabel:i?i.getLabelForIndex(a,s):"",yLabel:o?o.getLabelForIndex(a,s):"",label:l?""+l.getLabelForIndex(a,s):"",value:c?""+c.getLabelForIndex(a,s):"",index:a,datasetIndex:s,x:r._model.x,y:r._model.y}));d.filter&&(x=x.filter(function(e){return d.filter(e,m)})),d.itemSort&&(x=x.sort(function(e,t){return d.itemSort(e,t,m)})),ce.each(x,function(e){T.push(d.callbacks.labelColor.call(h,e,h._chart)),E.push(d.callbacks.labelTextColor.call(h,e,h._chart))}),p.title=h.getTitle(x,m),p.beforeBody=h.getBeforeBody(x,m),p.body=h.getBody(x,m),p.afterBody=h.getAfterBody(x,m),p.footer=h.getFooter(x,m),p.x=b.x,p.y=b.y,p.caretPadding=d.caretPadding,p.labelColors=T,p.labelTextColors=E,p.dataPoints=x,v=function(e,t,n,r){var i=p.x,o=p.y,a=p.caretPadding,s=n.xAlign,u=n.yAlign,l=p.caretSize+a,c=p.cornerRadius+a;return"right"===s?i-=y.width:"center"===s&&((i-=y.width/2)+y.width>r.width&&(i=r.width-y.width),i<0&&(i=0)),"top"===u?o+=l:o-="bottom"===u?y.height+l:y.height/2,"center"===u?"left"===s?i+=l:"right"===s&&(i-=l):"left"===s?i-=c:"right"===s&&(i+=c),{x:i,y:o}}(0,0,g=function(e,t){var n,r,i,o,a,s=e._model,u=e._chart,l=e._chart.chartArea,c="center",h="center";s.y<t.height?h="top":s.y>u.height-t.height&&(h="bottom");var d=(l.left+l.right)/2,f=(l.top+l.bottom)/2;"center"===h?(n=function(e){return e<=d},r=function(e){return e>d}):(n=function(e){return e<=t.width/2},r=function(e){return e>=u.width-t.width/2}),i=function(e){return e+t.width+s.caretSize+s.caretPadding>u.width},o=function(e){return e-t.width-s.caretSize-s.caretPadding<0},a=function(e){return e<=f?"top":"bottom"},n(s.x)?(c="left",i(s.x)&&(c="center",h=a(s.y))):r(s.x)&&(c="right",o(s.x)&&(c="center",h=a(s.y)));var p=e._options;return{xAlign:p.xAlign?p.xAlign:c,yAlign:p.yAlign?p.yAlign:h}}(this,y=function(e,t){var n=e._chart.ctx,r=2*t.yPadding,i=0,o=t.body,a=o.reduce(function(e,t){return e+t.before.length+t.lines.length+t.after.length},0),s=t.title.length,u=t.footer.length,l=t.titleFontSize,c=t.bodyFontSize,h=t.footerFontSize;r+=s*l,r+=s?(s-1)*t.titleSpacing:0,r+=s?t.titleMarginBottom:0,r+=(a+=t.beforeBody.length+t.afterBody.length)*c,r+=a?(a-1)*t.bodySpacing:0,r+=u?t.footerMarginTop:0,r+=u*h,r+=u?(u-1)*t.footerSpacing:0;var d=0,f=function(e){i=Math.max(i,n.measureText(e).width+d)};return n.font=ce.fontString(l,t._titleFontStyle,t._titleFontFamily),ce.each(t.title,f),n.font=ce.fontString(c,t._bodyFontStyle,t._bodyFontFamily),ce.each(t.beforeBody.concat(t.afterBody),f),d=t.displayColors?c+2:0,ce.each(o,function(e){ce.each(e.before,f),ce.each(e.lines,f),ce.each(e.after,f)}),d=0,n.font=ce.fontString(h,t._footerFontStyle,t._footerFontFamily),ce.each(t.footer,f),{width:i+=2*t.xPadding,height:r}}(this,p)),h._chart)}else p.opacity=0;return p.xAlign=g.xAlign,p.yAlign=g.yAlign,p.x=v.x,p.y=v.y,p.width=y.width,p.height=y.height,p.caretX=b.x,p.caretY=b.y,h._model=p,e&&d.custom&&d.custom.call(h,p),h},drawCaret:function(e,t){var n=this._chart.ctx,r=this.getCaretPosition(e,t,this._view);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)},getCaretPosition:function(e,t,n){var r,i,o,a,s,u,l=n.caretSize,c=n.cornerRadius,h=n.xAlign,d=n.yAlign,f=e.x,p=e.y,_=t.width,m=t.height;if("center"===d)s=p+m/2,"left"===h?(i=(r=f)-l,o=r,a=s+l,u=s-l):(i=(r=f+_)+l,o=r,a=s-l,u=s+l);else if("left"===h?(r=(i=f+c+l)-l,o=i+l):"right"===h?(r=(i=f+_-c-l)-l,o=i+l):(r=(i=n.caretX)-l,o=i+l),"top"===d)s=(a=p)-l,u=a;else{s=(a=p+m)+l,u=a;var g=o;o=r,r=g}return{x1:r,x2:i,x3:o,y1:a,y2:s,y3:u}},drawTitle:function(e,t,n){var r=t.title;if(r.length){e.x=kt(t,t._titleAlign),n.textAlign=t._titleAlign,n.textBaseline="top";var i,o,a=t.titleFontSize,s=t.titleSpacing;for(n.fillStyle=t.titleFontColor,n.font=ce.fontString(a,t._titleFontStyle,t._titleFontFamily),i=0,o=r.length;i<o;++i)n.fillText(r[i],e.x,e.y),e.y+=a+s,i+1===r.length&&(e.y+=t.titleMarginBottom-s)}},drawBody:function(e,t,n){var r,i=t.bodyFontSize,o=t.bodySpacing,a=t._bodyAlign,s=t.body,u=t.displayColors,l=t.labelColors,c=0,h=u?kt(t,"left"):0;n.textAlign=a,n.textBaseline="top",n.font=ce.fontString(i,t._bodyFontStyle,t._bodyFontFamily),e.x=kt(t,a);var d=function(t){n.fillText(t,e.x+c,e.y),e.y+=i+o};n.fillStyle=t.bodyFontColor,ce.each(t.beforeBody,d),c=u&&"right"!==a?"center"===a?i/2+1:i+2:0,ce.each(s,function(o,a){n.fillStyle=r=t.labelTextColors[a],ce.each(o.before,d),ce.each(o.lines,function(o){u&&(n.fillStyle=t.legendColorBackground,n.fillRect(h,e.y,i,i),n.lineWidth=1,n.strokeStyle=l[a].borderColor,n.strokeRect(h,e.y,i,i),n.fillStyle=l[a].backgroundColor,n.fillRect(h+1,e.y+1,i-2,i-2),n.fillStyle=r),d(o)}),ce.each(o.after,d)}),c=0,ce.each(t.afterBody,d),e.y-=o},drawFooter:function(e,t,n){var r=t.footer;r.length&&(e.x=kt(t,t._footerAlign),e.y+=t.footerMarginTop,n.textAlign=t._footerAlign,n.textBaseline="top",n.fillStyle=t.footerFontColor,n.font=ce.fontString(t.footerFontSize,t._footerFontStyle,t._footerFontFamily),ce.each(r,function(r){n.fillText(r,e.x,e.y),e.y+=t.footerFontSize+t.footerSpacing}))},drawBackground:function(e,t,n,r){n.fillStyle=t.backgroundColor,n.strokeStyle=t.borderColor,n.lineWidth=t.borderWidth;var i=t.xAlign,o=t.yAlign,a=e.x,s=e.y,u=r.width,l=r.height,c=t.cornerRadius;n.beginPath(),n.moveTo(a+c,s),"top"===o&&this.drawCaret(e,r),n.lineTo(a+u-c,s),n.quadraticCurveTo(a+u,s,a+u,s+c),"center"===o&&"right"===i&&this.drawCaret(e,r),n.lineTo(a+u,s+l-c),n.quadraticCurveTo(a+u,s+l,a+u-c,s+l),"bottom"===o&&this.drawCaret(e,r),n.lineTo(a+c,s+l),n.quadraticCurveTo(a,s+l,a,s+l-c),"center"===o&&"left"===i&&this.drawCaret(e,r),n.lineTo(a,s+c),n.quadraticCurveTo(a,s,a+c,s),n.closePath(),n.fill(),t.borderWidth>0&&n.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var n={width:t.width,height:t.height},r={x:t.x,y:t.y},i=Math.abs(t.opacity<.001)?0:t.opacity;this._options.enabled&&(t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length)&&(e.save(),e.globalAlpha=i,this.drawBackground(r,t,e,n),r.y+=t.yPadding,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),e.restore())}},handleEvent:function(e){var t,n=this,r=n._options;return n._lastActive=n._lastActive||[],n._active="mouseout"===e.type?[]:n._chart.getElementsAtEventForMode(e,r.mode,r),(t=!ce.arrayEquals(n._active,n._lastActive))&&(n._lastActive=n._active,(r.enabled||r.custom)&&(n._eventPosition={x:e.x,y:e.y},n.update(!0),n.pivot())),t}});Vt.positioners=It;var Gt=ce.valueOrDefault;function jt(){return ce.merge({},[].slice.call(arguments),{merger:function(e,t,n,r){if("xAxes"===e||"yAxes"===e){var i,o,a,s=n[e].length;for(t[e]||(t[e]=[]),i=0;i<s;++i)o=Gt((a=n[e][i]).type,"xAxes"===e?"category":"linear"),i>=t[e].length&&t[e].push({}),ce.merge(t[e][i],!t[e][i].type||a.type&&a.type!==t[e][i].type?[wt.getScaleDefaults(o),a]:a)}else ce._merger(e,t,n,r)}})}function zt(){return ce.merge({},[].slice.call(arguments),{merger:function(e,t,n,r){var i=t[e]||{},o=n[e];"scales"===e?t[e]=jt(i,o):"scale"===e?t[e]=ce.merge(i,[wt.getScaleDefaults(o.type),o]):ce._merger(e,t,n,r)}})}function Yt(e){var t=e.options;ce.each(e.scales,function(t){yt.removeBox(e,t)}),t=zt(se.global,se[e.config.type],t),e.options=e.config.options=t,e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.tooltip._options=t.tooltips,e.tooltip.initialize()}function Ht(e){return"top"===e||"bottom"===e}se._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var Wt=function(e,t){return this.construct(e,t),this};ce.extend(Wt.prototype,{construct:function(e,t){var n=this;t=function(e){var t=(e=e||{}).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=zt(se.global,se[e.type],e.options||{}),e}(t);var r=Dt.acquireContext(e,t),i=r&&r.canvas,o=i&&i.height,a=i&&i.width;n.id=ce.uid(),n.ctx=r,n.canvas=i,n.config=t,n.width=a,n.height=o,n.aspectRatio=o?a/o:null,n.options=t.options,n._bufferedRender=!1,n.chart=n,n.controller=n,Wt.instances[n.id]=n,Object.defineProperty(n,"data",{get:function(){return n.config.data},set:function(e){n.config.data=e}}),r&&i?(n.initialize(),n.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return Ot.notify(e,"beforeInit"),ce.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.ensureScalesHaveIDs(),e.buildOrUpdateScales(),e.initToolTip(),Ot.notify(e,"afterInit"),e},clear:function(){return ce.canvas.clear(this),this},stop:function(){return ge.cancelAnimation(this),this},resize:function(e){var t=this,n=t.options,r=t.canvas,i=n.maintainAspectRatio&&t.aspectRatio||null,o=Math.max(0,Math.floor(ce.getMaximumWidth(r))),a=Math.max(0,Math.floor(i?o/i:ce.getMaximumHeight(r)));if((t.width!==o||t.height!==a)&&(r.width=t.width=o,r.height=t.height=a,r.style.width=o+"px",r.style.height=a+"px",ce.retinaScale(t,n.devicePixelRatio),!e)){var s={width:o,height:a};Ot.notify(t,"resize",[s]),n.onResize&&n.onResize(t,s),t.stop(),t.update({duration:n.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},n=e.scale;ce.each(t.xAxes,function(e,t){e.id=e.id||"x-axis-"+t}),ce.each(t.yAxes,function(e,t){e.id=e.id||"y-axis-"+t}),n&&(n.id=n.id||"scale")},buildOrUpdateScales:function(){var e=this,t=e.options,n=e.scales||{},r=[],i=Object.keys(n).reduce(function(e,t){return e[t]=!1,e},{});t.scales&&(r=r.concat((t.scales.xAxes||[]).map(function(e){return{options:e,dtype:"category",dposition:"bottom"}}),(t.scales.yAxes||[]).map(function(e){return{options:e,dtype:"linear",dposition:"left"}}))),t.scale&&r.push({options:t.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),ce.each(r,function(t){var r=t.options,o=r.id,a=Gt(r.type,t.dtype);Ht(r.position)!==Ht(t.dposition)&&(r.position=t.dposition),i[o]=!0;var s=null;if(o in n&&n[o].type===a)(s=n[o]).options=r,s.ctx=e.ctx,s.chart=e;else{var u=wt.getScaleConstructor(a);if(!u)return;s=new u({id:o,type:a,options:r,ctx:e.ctx,chart:e}),n[s.id]=s}s.mergeTicksOptions(),t.isDefault&&(e.scale=s)}),ce.each(i,function(e,t){e||delete n[t]}),e.scales=n,wt.addScalesToLayout(this)},buildOrUpdateControllers:function(){var e=this,t=[];return ce.each(e.data.datasets,function(n,r){var i=e.getDatasetMeta(r),o=n.type||e.config.type;if(i.type&&i.type!==o&&(e.destroyDatasetMeta(r),i=e.getDatasetMeta(r)),i.type=o,i.controller)i.controller.updateIndex(r),i.controller.linkScales();else{var a=st[i.type];if(void 0===a)throw new Error('"'+i.type+'" is not a chart type.');i.controller=new a(e,r),t.push(i.controller)}},e),t},resetElements:function(){var e=this;ce.each(e.data.datasets,function(t,n){e.getDatasetMeta(n).controller.reset()},e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),Yt(t),Ot._invalidate(t),!1!==Ot.notify(t,"beforeUpdate")){t.tooltip._data=t.data;var n=t.buildOrUpdateControllers();ce.each(t.data.datasets,function(e,n){t.getDatasetMeta(n).controller.buildOrUpdateElements()},t),t.updateLayout(),t.options.animation&&t.options.animation.duration&&ce.each(n,function(e){e.reset()}),t.updateDatasets(),t.tooltip.initialize(),t.lastActive=[],Ot.notify(t,"afterUpdate"),t._bufferedRender?t._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:t.render(e)}},updateLayout:function(){!1!==Ot.notify(this,"beforeLayout")&&(yt.update(this,this.width,this.height),Ot.notify(this,"afterScaleUpdate"),Ot.notify(this,"afterLayout"))},updateDatasets:function(){if(!1!==Ot.notify(this,"beforeDatasetsUpdate")){for(var e=0,t=this.data.datasets.length;e<t;++e)this.updateDataset(e);Ot.notify(this,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this.getDatasetMeta(e),n={meta:t,index:e};!1!==Ot.notify(this,"beforeDatasetUpdate",[n])&&(t.controller.update(),Ot.notify(this,"afterDatasetUpdate",[n]))},render:function(e){var t=this;e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]});var n=t.options.animation,r=Gt(e.duration,n&&n.duration),i=e.lazy;if(!1!==Ot.notify(t,"beforeRender")){var o=function(e){Ot.notify(t,"afterRender"),ce.callback(n&&n.onComplete,[e],t)};if(n&&r){var a=new me({numSteps:r/16.66,easing:e.easing||n.easing,render:function(e,t){var n=t.currentStep,r=n/t.numSteps;e.draw((0,ce.easing.effects[t.easing])(r),r,n)},onAnimationProgress:n.onProgress,onAnimationComplete:o});ge.addAnimation(t,a,r,i)}else t.draw(),o(new me({numSteps:0,chart:t}));return t}},draw:function(e){var t=this;t.clear(),ce.isNullOrUndef(e)&&(e=1),t.transition(e),t.width<=0||t.height<=0||!1!==Ot.notify(t,"beforeDraw",[e])&&(ce.each(t.boxes,function(e){e.draw(t.chartArea)},t),t.drawDatasets(e),t._drawTooltip(e),Ot.notify(t,"afterDraw",[e]))},transition:function(e){for(var t=0,n=(this.data.datasets||[]).length;t<n;++t)this.isDatasetVisible(t)&&this.getDatasetMeta(t).controller.transition(e);this.tooltip.transition(e)},drawDatasets:function(e){var t=this;if(!1!==Ot.notify(t,"beforeDatasetsDraw",[e])){for(var n=(t.data.datasets||[]).length-1;n>=0;--n)t.isDatasetVisible(n)&&t.drawDataset(n,e);Ot.notify(t,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var n=this.getDatasetMeta(e),r={meta:n,index:e,easingValue:t};!1!==Ot.notify(this,"beforeDatasetDraw",[r])&&(n.controller.draw(t),Ot.notify(this,"afterDatasetDraw",[r]))},_drawTooltip:function(e){var t=this.tooltip,n={tooltip:t,easingValue:e};!1!==Ot.notify(this,"beforeTooltipDraw",[n])&&(t.draw(),Ot.notify(this,"afterTooltipDraw",[n]))},getElementAtEvent:function(e){return pt.modes.single(this,e)},getElementsAtEvent:function(e){return pt.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return pt.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,n){var r=pt.modes[t];return"function"==typeof r?r(this,e,n):[]},getDatasetAtEvent:function(e){return pt.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this.data.datasets[e];t._meta||(t._meta={});var n=t._meta[this.id];return n||(n=t._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),n},getVisibleDatasetCount:function(){for(var e=0,t=0,n=this.data.datasets.length;t<n;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,n=this.data.datasets[e],r=n._meta&&n._meta[t];r&&(r.controller.destroy(),delete n._meta[t])},destroy:function(){var e,t,n=this,r=n.canvas;for(n.stop(),e=0,t=n.data.datasets.length;e<t;++e)n.destroyDatasetMeta(e);r&&(n.unbindEvents(),ce.canvas.clear(n),Dt.releaseContext(n.ctx),n.canvas=null,n.ctx=null),Ot.notify(n,"destroy"),delete Wt.instances[n.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var e=this;e.tooltip=new Vt({_chart:e,_chartInstance:e,_data:e.data,_options:e.options.tooltips},e)},bindEvents:function(){var e=this,t=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};ce.each(e.options.events,function(r){Dt.addEventListener(e,r,n),t[r]=n}),e.options.responsive&&(n=function(){e.resize()},Dt.addEventListener(e,"resize",n),t.resize=n)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,ce.each(t,function(t,n){Dt.removeEventListener(e,n,t)}))},updateHoverStyle:function(e,t,n){var r,i,o,a=n?"setHoverStyle":"removeHoverStyle";for(i=0,o=e.length;i<o;++i)(r=e[i])&&this.getDatasetMeta(r._datasetIndex).controller[a](r)},eventHandler:function(e){var t=this,n=t.tooltip;if(!1!==Ot.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var r=t.handleEvent(e);n&&(r=n._start?n.handleEvent(e):r|n.handleEvent(e)),Ot.notify(t,"afterEvent",[e]);var i=t._bufferedRequest;return i?t.render(i):r&&!t.animating&&(t.stop(),t.render({duration:t.options.hover.animationDuration,lazy:!0})),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t,n=this,r=n.options||{},i=r.hover;return n.lastActive=n.lastActive||[],n.active="mouseout"===e.type?[]:n.getElementsAtEventForMode(e,i.mode,i),ce.callback(r.onHover||r.hover.onHover,[e.native,n.active],n),"mouseup"!==e.type&&"click"!==e.type||r.onClick&&r.onClick.call(n,e.native,n.active),n.lastActive.length&&n.updateHoverStyle(n.lastActive,i.mode,!1),n.active.length&&i.mode&&n.updateHoverStyle(n.active,i.mode,!0),t=!ce.arrayEquals(n.active,n.lastActive),n.lastActive=n.active,t}}),Wt.instances={};var Xt=Wt;function Kt(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function Qt(e){this.options=e||{}}Wt.Controller=Wt,Wt.types={},ce.configMerge=zt,ce.scaleMerge=jt,ce.extend(Qt.prototype,{formats:Kt,parse:Kt,format:Kt,add:Kt,diff:Kt,startOf:Kt,endOf:Kt,_create:function(e){return e}}),Qt.override=function(e){ce.extend(Qt.prototype,e)};var qt={_date:Qt},Zt={formatters:{values:function(e){return ce.isArray(e)?e:""+e},linear:function(e,t,n){var r=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(r)>1&&e!==Math.floor(e)&&(r=e-Math.floor(e));var i=ce.log10(Math.abs(r)),o="";if(0!==e)if(Math.max(Math.abs(n[0]),Math.abs(n[n.length-1]))<1e-4){var a=ce.log10(Math.abs(e));o=e.toExponential(Math.floor(a)-Math.floor(i))}else{var s=-1*Math.floor(i);s=Math.max(Math.min(s,20),0),o=e.toFixed(s)}else o="0";return o},logarithmic:function(e,t,n){var r=e/Math.pow(10,Math.floor(ce.log10(e)));return 0===e?"0":1===r||2===r||5===r||0===t||t===n.length-1?e.toExponential():""}}},Jt=ce.valueOrDefault,$t=ce.valueAtIndexOrDefault;function en(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t)r.push(e[t].label);return r}function tn(e,t,n){return ce.isArray(t)?ce.longestText(e,n,t):e.measureText(t).width}se._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Zt.formatters.values,minor:{},major:{}}});var nn=pe.extend({getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var e=this.options.ticks;for(var t in!1===e.minor&&(e.minor={display:!1}),!1===e.major&&(e.major={display:!1}),e)"major"!==t&&"minor"!==t&&(void 0===e.minor[t]&&(e.minor[t]=e[t]),void 0===e.major[t]&&(e.major[t]=e[t]))},beforeUpdate:function(){ce.callback(this.options.beforeUpdate,[this])},update:function(e,t,n){var r,i,o,a,s,u,l=this;for(l.beforeUpdate(),l.maxWidth=e,l.maxHeight=t,l.margins=ce.extend({left:0,right:0,top:0,bottom:0},n),l._maxLabelLines=0,l.longestLabelWidth=0,l.longestTextCache=l.longestTextCache||{},l.beforeSetDimensions(),l.setDimensions(),l.afterSetDimensions(),l.beforeDataLimits(),l.determineDataLimits(),l.afterDataLimits(),l.beforeBuildTicks(),s=l.buildTicks()||[],s=l.afterBuildTicks(s)||s,l.beforeTickToLabelConversion(),o=l.convertTicksToLabels(s)||l.ticks,l.afterTickToLabelConversion(),l.ticks=o,r=0,i=o.length;r<i;++r)a=o[r],(u=s[r])?u.label=a:s.push(u={label:a,major:!1});return l._ticks=s,l.beforeCalculateTickRotation(),l.calculateTickRotation(),l.afterCalculateTickRotation(),l.beforeFit(),l.fit(),l.afterFit(),l.afterUpdate(),l.minSize},afterUpdate:function(){ce.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){ce.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){ce.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){ce.callback(this.options.beforeDataLimits,[this])},determineDataLimits:ce.noop,afterDataLimits:function(){ce.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){ce.callback(this.options.beforeBuildTicks,[this])},buildTicks:ce.noop,afterBuildTicks:function(e){var t=this;return ce.isArray(e)&&e.length?ce.callback(t.options.afterBuildTicks,[t,e]):(t.ticks=ce.callback(t.options.afterBuildTicks,[t,t.ticks])||t.ticks,e)},beforeTickToLabelConversion:function(){ce.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this.options.ticks;this.ticks=this.ticks.map(e.userCallback||e.callback,this)},afterTickToLabelConversion:function(){ce.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){ce.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e=this,t=e.ctx,n=e.options.ticks,r=en(e._ticks),i=ce.options._parseFont(n);t.font=i.string;var o=n.minRotation||0;if(r.length&&e.options.display&&e.isHorizontal())for(var a,s=ce.longestText(t,i.string,r,e.longestTextCache),u=s,l=e.getPixelForTick(1)-e.getPixelForTick(0)-6;u>l&&o<n.maxRotation;){var c=ce.toRadians(o);if(a=Math.cos(c),Math.sin(c)*s>e.maxHeight){o--;break}o++,u=a*s}e.labelRotation=o},afterCalculateTickRotation:function(){ce.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){ce.callback(this.options.beforeFit,[this])},fit:function(){var e=this,t=e.minSize={width:0,height:0},n=en(e._ticks),r=e.options,i=r.ticks,o=r.scaleLabel,a=r.gridLines,s=e._isVisible(),u=r.position,l=e.isHorizontal(),c=ce.options._parseFont,h=c(i),d=r.gridLines.tickMarkLength;if(t.width=l?e.isFullWidth()?e.maxWidth-e.margins.left-e.margins.right:e.maxWidth:s&&a.drawTicks?d:0,t.height=l?s&&a.drawTicks?d:0:e.maxHeight,o.display&&s){var f=c(o),p=ce.options.toPadding(o.padding),_=f.lineHeight+p.height;l?t.height+=_:t.width+=_}if(i.display&&s){var m=ce.longestText(e.ctx,h.string,n,e.longestTextCache),g=ce.numberOfLabelLines(n),v=.5*h.size,y=e.options.ticks.padding;if(e._maxLabelLines=g,e.longestLabelWidth=m,l){var b=ce.toRadians(e.labelRotation),T=Math.cos(b),E=Math.sin(b);t.height=Math.min(e.maxHeight,t.height+(E*m+h.lineHeight*g+v)+y),e.ctx.font=h.string;var x,M,A=tn(e.ctx,n[0],h.string),S=tn(e.ctx,n[n.length-1],h.string),C=e.getPixelForTick(0)-e.left,P=e.right-e.getPixelForTick(n.length-1);0!==e.labelRotation?(x="bottom"===u?T*A:T*v,M="bottom"===u?T*v:T*S):(x=A/2,M=S/2),e.paddingLeft=Math.max(x-C,0)+3,e.paddingRight=Math.max(M-P,0)+3}else i.mirror?m=0:m+=y+v,t.width=Math.min(e.maxWidth,t.width+m),e.paddingTop=h.size/2,e.paddingBottom=h.size/2}e.handleMargins(),e.width=t.width,e.height=t.height},handleMargins:function(){var e=this;e.margins&&(e.paddingLeft=Math.max(e.paddingLeft-e.margins.left,0),e.paddingTop=Math.max(e.paddingTop-e.margins.top,0),e.paddingRight=Math.max(e.paddingRight-e.margins.right,0),e.paddingBottom=Math.max(e.paddingBottom-e.margins.bottom,0))},afterFit:function(){ce.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(ce.isNullOrUndef(e))return NaN;if(("number"==typeof e||e instanceof Number)&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},getLabelForIndex:ce.noop,getPixelForValue:ce.noop,getValueForPixel:ce.noop,getPixelForTick:function(e){var t=this,n=t.options.offset;if(t.isHorizontal()){var r=(t.width-(t.paddingLeft+t.paddingRight))/Math.max(t._ticks.length-(n?0:1),1),i=r*e+t.paddingLeft;return n&&(i+=r/2),t.left+i+(t.isFullWidth()?t.margins.left:0)}return t.top+e*((t.height-(t.paddingTop+t.paddingBottom))/(t._ticks.length-1))},getPixelForDecimal:function(e){var t=this;return t.isHorizontal()?t.left+((t.width-(t.paddingLeft+t.paddingRight))*e+t.paddingLeft)+(t.isFullWidth()?t.margins.left:0):t.top+e*t.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this.min,t=this.max;return this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0},_autoSkip:function(e){var t,n,r=this,i=r.isHorizontal(),o=e.length,a=!1,s=r.options.ticks.minor.maxTicksLimit,u=r._tickSize()*(o-1),l=i?r.width-(r.paddingLeft+r.paddingRight):r.height-(r.paddingTop+r.PaddingBottom),c=[];for(u>l&&(a=1+Math.floor(u/l)),o>s&&(a=Math.max(a,1+Math.floor(o/s))),t=0;t<o;t++)n=e[t],a>1&&t%a>0&&delete n.label,c.push(n);return c},_tickSize:function(){var e=this,t=e.isHorizontal(),n=e.options.ticks.minor,r=ce.toRadians(e.labelRotation),i=Math.abs(Math.cos(r)),o=Math.abs(Math.sin(r)),a=n.autoSkipPadding||0,s=e.longestLabelWidth+a||0,u=ce.options._parseFont(n),l=e._maxLabelLines*u.lineHeight+a||0;return t?l*i>s*o?s/i:l/o:l*o<s*i?l/i:s/o},_isVisible:function(){var e,t,n,r=this.chart,i=this.options.display;if("auto"!==i)return!!i;for(e=0,t=r.data.datasets.length;e<t;++e)if(r.isDatasetVisible(e)&&((n=r.getDatasetMeta(e)).xAxisID===this.id||n.yAxisID===this.id))return!0;return!1},draw:function(e){var t=this,n=t.options;if(t._isVisible()){var r,i,o,a=t.chart,s=t.ctx,u=se.global.defaultFontColor,l=n.ticks.minor,c=n.ticks.major||l,h=n.gridLines,d=n.scaleLabel,f=n.position,p=0!==t.labelRotation,_=l.mirror,m=t.isHorizontal(),g=ce.options._parseFont,v=l.display&&l.autoSkip?t._autoSkip(t.getTicks()):t.getTicks(),y=Jt(l.fontColor,u),b=g(l),T=b.lineHeight,E=Jt(c.fontColor,u),x=g(c),M=l.padding,A=l.labelOffset,S=h.drawTicks?h.tickMarkLength:0,C=Jt(d.fontColor,u),P=g(d),R=ce.options.toPadding(d.padding),D=ce.toRadians(t.labelRotation),O=[],w=h.drawBorder?$t(h.lineWidth,0,0):0,L=ce._alignPixel;if("top"===f?(r=L(a,t.bottom,w),i=t.bottom-S,o=r-w/2):"bottom"===f?(r=L(a,t.top,w),i=r+w/2,o=t.top+S):"left"===f?(r=L(a,t.right,w),i=t.right-S,o=r-w/2):(r=L(a,t.left,w),i=r+w/2,o=t.left+S),ce.each(v,function(r,s){if(!ce.isNullOrUndef(r.label)){var u,l,c,d,g,v,y,b,E,x,C,P,R,I,F,N,B=r.label;s===t.zeroLineIndex&&n.offset===h.offsetGridLines?(u=h.zeroLineWidth,l=h.zeroLineColor,c=h.zeroLineBorderDash||[],d=h.zeroLineBorderDashOffset||0):(u=$t(h.lineWidth,s),l=$t(h.color,s),c=h.borderDash||[],d=h.borderDashOffset||0);var k=ce.isArray(B)?B.length:1,U=function(e,t,n){var r=e.getPixelForTick(t);return n&&(1===e.getTicks().length?r-=e.isHorizontal()?Math.max(r-e.left,e.right-r):Math.max(r-e.top,e.bottom-r):r-=0===t?(e.getPixelForTick(1)-r)/2:(r-e.getPixelForTick(t-1))/2),r}(t,s,h.offsetGridLines);if(m){var V=S+M;U<t.left-1e-7&&(l="rgba(0,0,0,0)"),g=y=E=C=L(a,U,u),v=i,b=o,R=t.getPixelForTick(s)+A,"top"===f?(x=L(a,e.top,w)+w/2,P=e.bottom,F=((p?1:.5)-k)*T,N=p?"left":"center",I=t.bottom-V):(x=e.top,P=L(a,e.bottom,w)-w/2,F=(p?0:.5)*T,N=p?"right":"center",I=t.top+V)}else{var G=(_?0:S)+M;U<t.top-1e-7&&(l="rgba(0,0,0,0)"),g=i,y=o,v=b=x=P=L(a,U,u),I=t.getPixelForTick(s)+A,F=(1-k)*T/2,"left"===f?(E=L(a,e.left,w)+w/2,C=e.right,N=_?"left":"right",R=t.right-G):(E=e.left,C=L(a,e.right,w)-w/2,N=_?"right":"left",R=t.left+G)}O.push({tx1:g,ty1:v,tx2:y,ty2:b,x1:E,y1:x,x2:C,y2:P,labelX:R,labelY:I,glWidth:u,glColor:l,glBorderDash:c,glBorderDashOffset:d,rotation:-1*D,label:B,major:r.major,textOffset:F,textAlign:N})}}),ce.each(O,function(e){var t=e.glWidth,n=e.glColor;if(h.display&&t&&n&&(s.save(),s.lineWidth=t,s.strokeStyle=n,s.setLineDash&&(s.setLineDash(e.glBorderDash),s.lineDashOffset=e.glBorderDashOffset),s.beginPath(),h.drawTicks&&(s.moveTo(e.tx1,e.ty1),s.lineTo(e.tx2,e.ty2)),h.drawOnChartArea&&(s.moveTo(e.x1,e.y1),s.lineTo(e.x2,e.y2)),s.stroke(),s.restore()),l.display){s.save(),s.translate(e.labelX,e.labelY),s.rotate(e.rotation),s.font=e.major?x.string:b.string,s.fillStyle=e.major?E:y,s.textBaseline="middle",s.textAlign=e.textAlign;var r=e.label,i=e.textOffset;if(ce.isArray(r))for(var o=0;o<r.length;++o)s.fillText(""+r[o],0,i),i+=T;else s.fillText(r,0,i);s.restore()}}),d.display){var I,F,N=0,B=P.lineHeight/2;if(m)I=t.left+(t.right-t.left)/2,F="bottom"===f?t.bottom-B-R.bottom:t.top+B+R.top;else{var k="left"===f;I=k?t.left+B+R.top:t.right-B-R.top,F=t.top+(t.bottom-t.top)/2,N=k?-.5*Math.PI:.5*Math.PI}s.save(),s.translate(I,F),s.rotate(N),s.textAlign="center",s.textBaseline="middle",s.fillStyle=C,s.font=P.string,s.fillText(d.labelString,0,0),s.restore()}if(w){var U,V,G,j,z=w,Y=$t(h.lineWidth,v.length-1,0);m?(U=L(a,t.left,z)-z/2,V=L(a,t.right,Y)+Y/2,G=j=r):(G=L(a,t.top,z)-z/2,j=L(a,t.bottom,Y)+Y/2,U=V=r),s.lineWidth=w,s.strokeStyle=$t(h.color,0),s.beginPath(),s.moveTo(U,G),s.lineTo(V,j),s.stroke()}}}}),rn=nn.extend({getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels},determineDataLimits:function(){var e,t=this,n=t.getLabels();t.minIndex=0,t.maxIndex=n.length-1,void 0!==t.options.ticks.min&&(e=n.indexOf(t.options.ticks.min),t.minIndex=-1!==e?e:t.minIndex),void 0!==t.options.ticks.max&&(e=n.indexOf(t.options.ticks.max),t.maxIndex=-1!==e?e:t.maxIndex),t.min=n[t.minIndex],t.max=n[t.maxIndex]},buildTicks:function(){var e=this,t=e.getLabels();e.ticks=0===e.minIndex&&e.maxIndex===t.length-1?t:t.slice(e.minIndex,e.maxIndex+1)},getLabelForIndex:function(e,t){var n=this,r=n.chart;return r.getDatasetMeta(t).controller._getValueScaleId()===n.id?n.getRightValue(r.data.datasets[t].data[e]):n.ticks[e-n.minIndex]},getPixelForValue:function(e,t){var n,r=this,i=r.options.offset,o=Math.max(r.maxIndex+1-r.minIndex-(i?0:1),1);if(null!=e&&(n=r.isHorizontal()?e.x:e.y),void 0!==n||void 0!==e&&isNaN(t)){var a=r.getLabels().indexOf(e=n||e);t=-1!==a?a:t}if(r.isHorizontal()){var s=r.width/o,u=s*(t-r.minIndex);return i&&(u+=s/2),r.left+u}var l=r.height/o,c=l*(t-r.minIndex);return i&&(c+=l/2),r.top+c},getPixelForTick:function(e){return this.getPixelForValue(this.ticks[e],e+this.minIndex,null)},getValueForPixel:function(e){var t=this,n=t.options.offset,r=Math.max(t._ticks.length-(n?0:1),1),i=t.isHorizontal(),o=(i?t.width:t.height)/r;return e-=i?t.left:t.top,n&&(e-=o/2),(e<=0?0:Math.round(e/o))+t.minIndex},getBasePixel:function(){return this.bottom}});rn._defaults={position:"bottom"};var on=ce.isNullOrUndef,an=nn.extend({getRightValue:function(e){return"string"==typeof e?+e:nn.prototype.getRightValue.call(this,e)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var n=ce.sign(e.min),r=ce.sign(e.max);n<0&&r<0?e.max=0:n>0&&r>0&&(e.min=0)}var i=void 0!==t.min||void 0!==t.suggestedMin,o=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(e.min=null===e.min?t.suggestedMin:Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(e.max=null===e.max?t.suggestedMax:Math.max(e.max,t.suggestedMax)),i!==o&&e.min>=e.max&&(i?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:function(){var e,t=this.options.ticks,n=t.stepSize,r=t.maxTicksLimit;return n?e=Math.ceil(this.max/n)-Math.floor(this.min/n)+1:(e=this._computeTickLimit(),r=r||11),r&&(e=Math.min(r,e)),e},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:ce.noop,buildTicks:function(){var e=this,t=e.options.ticks,n=e.getTickLimit(),r={maxTicks:n=Math.max(2,n),min:t.min,max:t.max,precision:t.precision,stepSize:ce.valueOrDefault(t.fixedStepSize,t.stepSize)},i=e.ticks=function(t,n){var i,o,a,s,u=[],l=r.stepSize,c=l||1,h=r.maxTicks-1,d=r.min,f=r.max,p=r.precision,_=e.min,m=e.max,g=ce.niceNum((m-_)/h/c)*c;if(g<1e-14&&on(d)&&on(f))return[_,m];(s=Math.ceil(m/g)-Math.floor(_/g))>h&&(g=ce.niceNum(s*g/h/c)*c),l||on(p)?i=Math.pow(10,ce._decimalPlaces(g)):(i=Math.pow(10,p),g=Math.ceil(g*i)/i),o=Math.floor(_/g)*g,a=Math.ceil(m/g)*g,l&&(!on(d)&&ce.almostWhole(d/g,g/1e3)&&(o=d),!on(f)&&ce.almostWhole(f/g,g/1e3)&&(a=f)),s=ce.almostEquals(s=(a-o)/g,Math.round(s),g/1e3)?Math.round(s):Math.ceil(s),o=Math.round(o*i)/i,a=Math.round(a*i)/i,u.push(on(d)?o:d);for(var v=1;v<s;++v)u.push(Math.round((o+v*g)*i)/i);return u.push(on(f)?a:f),u}();e.handleDirectionalChanges(),e.max=ce.max(i),e.min=ce.min(i),t.reverse?(i.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var e=this;e.ticksAsNumbers=e.ticks.slice(),e.zeroLineIndex=e.ticks.indexOf(0),nn.prototype.convertTicksToLabels.call(e)}}),sn={position:"left",ticks:{callback:Zt.formatters.linear}},un=an.extend({determineDataLimits:function(){var e=this,t=e.options,n=e.chart,r=n.data.datasets,i=e.isHorizontal();function o(t){return i?t.xAxisID===e.id:t.yAxisID===e.id}e.min=null,e.max=null;var a=t.stacked;if(void 0===a&&ce.each(r,function(e,t){if(!a){var r=n.getDatasetMeta(t);n.isDatasetVisible(t)&&o(r)&&void 0!==r.stack&&(a=!0)}}),t.stacked||a){var s={};ce.each(r,function(r,i){var a=n.getDatasetMeta(i),u=[a.type,void 0===t.stacked&&void 0===a.stack?i:"",a.stack].join(".");void 0===s[u]&&(s[u]={positiveValues:[],negativeValues:[]});var l=s[u].positiveValues,c=s[u].negativeValues;n.isDatasetVisible(i)&&o(a)&&ce.each(r.data,function(n,r){var i=+e.getRightValue(n);isNaN(i)||a.data[r].hidden||(l[r]=l[r]||0,c[r]=c[r]||0,t.relativePoints?l[r]=100:i<0?c[r]+=i:l[r]+=i)})}),ce.each(s,function(t){var n=t.positiveValues.concat(t.negativeValues),r=ce.min(n),i=ce.max(n);e.min=null===e.min?r:Math.min(e.min,r),e.max=null===e.max?i:Math.max(e.max,i)})}else ce.each(r,function(t,r){var i=n.getDatasetMeta(r);n.isDatasetVisible(r)&&o(i)&&ce.each(t.data,function(t,n){var r=+e.getRightValue(t);isNaN(r)||i.data[n].hidden||(null===e.min?e.min=r:r<e.min&&(e.min=r),null===e.max?e.max=r:r>e.max&&(e.max=r))})});e.min=isFinite(e.min)&&!isNaN(e.min)?e.min:0,e.max=isFinite(e.max)&&!isNaN(e.max)?e.max:1,this.handleTickRangeOptions()},_computeTickLimit:function(){var e;return this.isHorizontal()?Math.ceil(this.width/40):(e=ce.options._parseFont(this.options.ticks),Math.ceil(this.height/e.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t=this,n=t.start,r=+t.getRightValue(e),i=t.end-n;return t.isHorizontal()?t.left+t.width/i*(r-n):t.bottom-t.height/i*(r-n)},getValueForPixel:function(e){var t=this,n=t.isHorizontal();return t.start+(n?e-t.left:t.bottom-e)/(n?t.width:t.height)*(t.end-t.start)},getPixelForTick:function(e){return this.getPixelForValue(this.ticksAsNumbers[e])}});un._defaults=sn;var ln=ce.valueOrDefault,cn={position:"left",ticks:{callback:Zt.formatters.logarithmic}};function hn(e,t){return ce.isFinite(e)&&e>=0?e:t}var dn=nn.extend({determineDataLimits:function(){var e=this,t=e.options,n=e.chart,r=n.data.datasets,i=e.isHorizontal();function o(t){return i?t.xAxisID===e.id:t.yAxisID===e.id}e.min=null,e.max=null,e.minNotZero=null;var a=t.stacked;if(void 0===a&&ce.each(r,function(e,t){if(!a){var r=n.getDatasetMeta(t);n.isDatasetVisible(t)&&o(r)&&void 0!==r.stack&&(a=!0)}}),t.stacked||a){var s={};ce.each(r,function(r,i){var a=n.getDatasetMeta(i),u=[a.type,void 0===t.stacked&&void 0===a.stack?i:"",a.stack].join(".");n.isDatasetVisible(i)&&o(a)&&(void 0===s[u]&&(s[u]=[]),ce.each(r.data,function(t,n){var r=s[u],i=+e.getRightValue(t);isNaN(i)||a.data[n].hidden||i<0||(r[n]=r[n]||0,r[n]+=i)}))}),ce.each(s,function(t){if(t.length>0){var n=ce.min(t),r=ce.max(t);e.min=null===e.min?n:Math.min(e.min,n),e.max=null===e.max?r:Math.max(e.max,r)}})}else ce.each(r,function(t,r){var i=n.getDatasetMeta(r);n.isDatasetVisible(r)&&o(i)&&ce.each(t.data,function(t,n){var r=+e.getRightValue(t);isNaN(r)||i.data[n].hidden||r<0||(null===e.min?e.min=r:r<e.min&&(e.min=r),null===e.max?e.max=r:r>e.max&&(e.max=r),0!==r&&(null===e.minNotZero||r<e.minNotZero)&&(e.minNotZero=r))})});this.handleTickRangeOptions()},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;e.min=hn(t.min,e.min),e.max=hn(t.max,e.max),e.min===e.max&&(0!==e.min&&null!==e.min?(e.min=Math.pow(10,Math.floor(ce.log10(e.min))-1),e.max=Math.pow(10,Math.floor(ce.log10(e.max))+1)):(e.min=1,e.max=10)),null===e.min&&(e.min=Math.pow(10,Math.floor(ce.log10(e.max))-1)),null===e.max&&(e.max=0!==e.min?Math.pow(10,Math.floor(ce.log10(e.min))+1):10),null===e.minNotZero&&(e.minNotZero=e.min>0?e.min:e.max<1?Math.pow(10,Math.floor(ce.log10(e.max))):1)},buildTicks:function(){var e=this,t=e.options.ticks,n=!e.isHorizontal(),r={min:hn(t.min),max:hn(t.max)},i=e.ticks=function(e,t){var n,r,i=[],o=ln(e.min,Math.pow(10,Math.floor(ce.log10(t.min)))),a=Math.floor(ce.log10(t.max)),s=Math.ceil(t.max/Math.pow(10,a));0===o?(n=Math.floor(ce.log10(t.minNotZero)),r=Math.floor(t.minNotZero/Math.pow(10,n)),i.push(o),o=r*Math.pow(10,n)):(n=Math.floor(ce.log10(o)),r=Math.floor(o/Math.pow(10,n)));var u=n<0?Math.pow(10,Math.abs(n)):1;do{i.push(o),10==++r&&(r=1,u=++n>=0?1:u),o=Math.round(r*Math.pow(10,n)*u)/u}while(n<a||n===a&&r<s);var l=ln(e.max,o);return i.push(l),i}(r,e);e.max=ce.max(i),e.min=ce.min(i),t.reverse?(n=!n,e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max),n&&i.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),nn.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){return this.getPixelForValue(this.tickValues[e])},_getFirstTickValue:function(e){var t=Math.floor(ce.log10(e));return Math.floor(e/Math.pow(10,t))*Math.pow(10,t)},getPixelForValue:function(e){var t,n,r,i,o,a=this,s=a.options.ticks,u=s.reverse,l=ce.log10,c=a._getFirstTickValue(a.minNotZero),h=0;return e=+a.getRightValue(e),u?(r=a.end,i=a.start,o=-1):(r=a.start,i=a.end,o=1),a.isHorizontal()?(t=a.width,n=u?a.right:a.left):(t=a.height,o*=-1,n=u?a.top:a.bottom),e!==r&&(0===r&&(t-=h=ln(s.fontSize,se.global.defaultFontSize),r=c),0!==e&&(h+=t/(l(i)-l(r))*(l(e)-l(r))),n+=o*h),n},getValueForPixel:function(e){var t,n,r,i,o=this,a=o.options.ticks,s=a.reverse,u=ce.log10,l=o._getFirstTickValue(o.minNotZero);if(s?(n=o.end,r=o.start):(n=o.start,r=o.end),o.isHorizontal()?(t=o.width,i=s?o.right-e:e-o.left):(t=o.height,i=s?e-o.top:o.bottom-e),i!==n){if(0===n){var c=ln(a.fontSize,se.global.defaultFontSize);i-=c,t-=c,n=l}i*=u(r)-u(n),i/=t,i=Math.pow(10,u(n)+i)}return i}});dn._defaults=cn;var fn=ce.valueOrDefault,pn=ce.valueAtIndexOrDefault,_n=ce.options.resolve,mn={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Zt.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}};function gn(e){var t=e.options;return t.angleLines.display||t.pointLabels.display?e.chart.data.labels.length:0}function vn(e){var t=e.ticks;return t.display&&e.display?fn(t.fontSize,se.global.defaultFontSize)+2*t.backdropPaddingY:0}function yn(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function bn(e){return 0===e||180===e?"center":e<180?"left":"right"}function Tn(e,t,n,r){var i,o,a=n.y+r/2;if(ce.isArray(t))for(i=0,o=t.length;i<o;++i)e.fillText(t[i],n.x,a),a+=r;else e.fillText(t,n.x,a)}function En(e,t,n){90===e||270===e?n.y-=t.h/2:(e>270||e<90)&&(n.y-=t.h)}function xn(e){return ce.isNumber(e)?e:0}var Mn=an.extend({setDimensions:function(){var e=this;e.width=e.maxWidth,e.height=e.maxHeight,e.paddingTop=vn(e.options)/2,e.xCenter=Math.floor(e.width/2),e.yCenter=Math.floor((e.height-e.paddingTop)/2),e.drawingArea=Math.min(e.height-e.paddingTop,e.width)/2},determineDataLimits:function(){var e=this,t=e.chart,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;ce.each(t.data.datasets,function(i,o){if(t.isDatasetVisible(o)){var a=t.getDatasetMeta(o);ce.each(i.data,function(t,i){var o=+e.getRightValue(t);isNaN(o)||a.data[i].hidden||(n=Math.min(o,n),r=Math.max(o,r))})}}),e.min=n===Number.POSITIVE_INFINITY?0:n,e.max=r===Number.NEGATIVE_INFINITY?0:r,e.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/vn(this.options))},convertTicksToLabels:function(){var e=this;an.prototype.convertTicksToLabels.call(e),e.pointLabels=e.chart.data.labels.map(e.options.pointLabels.callback,e)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e=this.options;e.display&&e.pointLabels.display?function(e){var t,n,r,i=ce.options._parseFont(e.options.pointLabels),o={l:0,r:e.width,t:0,b:e.height-e.paddingTop},a={};e.ctx.font=i.string,e._pointLabelSizes=[];var s,u,l,c=gn(e);for(t=0;t<c;t++){r=e.getPointPosition(t,e.drawingArea+5),s=e.ctx,u=i.lineHeight,n=ce.isArray(l=e.pointLabels[t]||"")?{w:ce.longestText(s,s.font,l),h:l.length*u}:{w:s.measureText(l).width,h:u},e._pointLabelSizes[t]=n;var h=e.getIndexAngle(t),d=ce.toDegrees(h)%360,f=yn(d,r.x,n.w,0,180),p=yn(d,r.y,n.h,90,270);f.start<o.l&&(o.l=f.start,a.l=h),f.end>o.r&&(o.r=f.end,a.r=h),p.start<o.t&&(o.t=p.start,a.t=h),p.end>o.b&&(o.b=p.end,a.b=h)}e.setReductions(e.drawingArea,o,a)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(e,t,n){var r=this,i=t.l/Math.sin(n.l),o=Math.max(t.r-r.width,0)/Math.sin(n.r),a=-t.t/Math.cos(n.t),s=-Math.max(t.b-(r.height-r.paddingTop),0)/Math.cos(n.b);i=xn(i),o=xn(o),a=xn(a),s=xn(s),r.drawingArea=Math.min(Math.floor(e-(i+o)/2),Math.floor(e-(a+s)/2)),r.setCenterPoint(i,o,a,s)},setCenterPoint:function(e,t,n,r){var i=this,o=n+i.drawingArea,a=i.height-i.paddingTop-r-i.drawingArea;i.xCenter=Math.floor((e+i.drawingArea+(i.width-t-i.drawingArea))/2+i.left),i.yCenter=Math.floor((o+a)/2+i.top+i.paddingTop)},getIndexAngle:function(e){return e*(2*Math.PI/gn(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(null===e)return 0;var n=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*n:(e-t.min)*n},getPointPosition:function(e,t){var n=this.getIndexAngle(e)-Math.PI/2;return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(){var e=this.min,t=this.max;return this.getPointPositionForValue(0,this.beginAtZero?0:e<0&&t<0?t:e>0&&t>0?e:0)},draw:function(){var e=this,t=e.options,n=t.gridLines,r=t.ticks;if(t.display){var i=e.ctx,o=this.getIndexAngle(0),a=ce.options._parseFont(r);(t.angleLines.display||t.pointLabels.display)&&function(e){var t=e.ctx,n=e.options,r=n.angleLines,i=n.gridLines,o=n.pointLabels,a=fn(r.lineWidth,i.lineWidth),s=fn(r.color,i.color),u=vn(n);t.save(),t.lineWidth=a,t.strokeStyle=s,t.setLineDash&&(t.setLineDash(_n([r.borderDash,i.borderDash,[]])),t.lineDashOffset=_n([r.borderDashOffset,i.borderDashOffset,0]));var l=e.getDistanceFromCenterForValue(n.ticks.reverse?e.min:e.max),c=ce.options._parseFont(o);t.font=c.string,t.textBaseline="middle";for(var h=gn(e)-1;h>=0;h--){if(r.display&&a&&s){var d=e.getPointPosition(h,l);t.beginPath(),t.moveTo(e.xCenter,e.yCenter),t.lineTo(d.x,d.y),t.stroke()}if(o.display){var f=e.getPointPosition(h,l+(0===h?u/2:0)+5),p=pn(o.fontColor,h,se.global.defaultFontColor);t.fillStyle=p;var _=e.getIndexAngle(h),m=ce.toDegrees(_);t.textAlign=bn(m),En(m,e._pointLabelSizes[h],f),Tn(t,e.pointLabels[h]||"",f,c.lineHeight)}}t.restore()}(e),ce.each(e.ticks,function(t,s){if(s>0||r.reverse){var u=e.getDistanceFromCenterForValue(e.ticksAsNumbers[s]);if(n.display&&0!==s&&function(e,t,n,r){var i,o=e.ctx,a=t.circular,s=gn(e),u=pn(t.color,r-1),l=pn(t.lineWidth,r-1);if((a||s)&&u&&l){if(o.save(),o.strokeStyle=u,o.lineWidth=l,o.setLineDash&&(o.setLineDash(t.borderDash||[]),o.lineDashOffset=t.borderDashOffset||0),o.beginPath(),a)o.arc(e.xCenter,e.yCenter,n,0,2*Math.PI);else{i=e.getPointPosition(0,n),o.moveTo(i.x,i.y);for(var c=1;c<s;c++)i=e.getPointPosition(c,n),o.lineTo(i.x,i.y)}o.closePath(),o.stroke(),o.restore()}}(e,n,u,s),r.display){var l=fn(r.fontColor,se.global.defaultFontColor);if(i.font=a.string,i.save(),i.translate(e.xCenter,e.yCenter),i.rotate(o),r.showLabelBackdrop){var c=i.measureText(t).width;i.fillStyle=r.backdropColor,i.fillRect(-c/2-r.backdropPaddingX,-u-a.size/2-r.backdropPaddingY,c+2*r.backdropPaddingX,a.size+2*r.backdropPaddingY)}i.textAlign="center",i.textBaseline="middle",i.fillStyle=l,i.fillText(t,0,-u),i.restore()}}})}}});Mn._defaults=mn;var An=ce.valueOrDefault,Sn=Number.MIN_SAFE_INTEGER||-9007199254740991,Cn=Number.MAX_SAFE_INTEGER||9007199254740991,Pn={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,15,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,15,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},Rn=Object.keys(Pn);function Dn(e,t){return e-t}function On(e){var t,n,r,i={},o=[];for(t=0,n=e.length;t<n;++t)i[r=e[t]]||(i[r]=!0,o.push(r));return o}function wn(e,t,n,r){var i=function(e,t,n){for(var r,i,o,a=0,s=e.length-1;a>=0&&a<=s;){if(o=e[r=a+s>>1],!(i=e[r-1]||null))return{lo:null,hi:o};if(o[t]<n)a=r+1;else{if(!(i[t]>n))return{lo:i,hi:o};s=r-1}}return{lo:o,hi:null}}(e,t,n),o=i.lo?i.hi?i.lo:e[e.length-2]:e[0],a=i.lo?i.hi?i.hi:e[e.length-1]:e[1],s=a[t]-o[t];return o[r]+(a[r]-o[r])*(s?(n-o[t])/s:0)}function Ln(e,t){var n=e._adapter,r=e.options.time,i=r.parser,o=i||r.format,a=t;return"function"==typeof i&&(a=i(a)),ce.isFinite(a)||(a="string"==typeof o?n.parse(a,o):n.parse(a)),null!==a?+a:(i||"function"!=typeof o||(a=o(t),ce.isFinite(a)||(a=n.parse(a))),a)}function In(e,t){if(ce.isNullOrUndef(t))return null;var n=e.options.time,r=Ln(e,e.getRightValue(t));return null===r?r:(n.round&&(r=+e._adapter.startOf(r,n.round)),r)}function Fn(e){for(var t=Rn.indexOf(e)+1,n=Rn.length;t<n;++t)if(Pn[Rn[t]].common)return Rn[t]}var Nn=nn.extend({initialize:function(){this.mergeTicksOptions(),nn.prototype.initialize.call(this)},update:function(){var e=this,t=e.options,n=t.time||(t.time={}),r=e._adapter=new qt._date(t.adapters.date);return n.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),ce.mergeIf(n.displayFormats,r.formats()),nn.prototype.update.apply(e,arguments)},getRightValue:function(e){return e&&void 0!==e.t&&(e=e.t),nn.prototype.getRightValue.call(this,e)},determineDataLimits:function(){var e,t,n,r,i,o,a=this,s=a.chart,u=a._adapter,l=a.options.time,c=l.unit||"day",h=Cn,d=Sn,f=[],p=[],_=[],m=s.data.labels||[];for(e=0,n=m.length;e<n;++e)_.push(In(a,m[e]));for(e=0,n=(s.data.datasets||[]).length;e<n;++e)if(s.isDatasetVisible(e))if(ce.isObject((i=s.data.datasets[e].data)[0]))for(p[e]=[],t=0,r=i.length;t<r;++t)o=In(a,i[t]),f.push(o),p[e][t]=o;else{for(t=0,r=_.length;t<r;++t)f.push(_[t]);p[e]=_.slice(0)}else p[e]=[];_.length&&(_=On(_).sort(Dn),h=Math.min(h,_[0]),d=Math.max(d,_[_.length-1])),f.length&&(f=On(f).sort(Dn),h=Math.min(h,f[0]),d=Math.max(d,f[f.length-1])),h=In(a,l.min)||h,d=In(a,l.max)||d,h=h===Cn?+u.startOf(Date.now(),c):h,d=d===Sn?+u.endOf(Date.now(),c)+1:d,a.min=Math.min(h,d),a.max=Math.max(h+1,d),a._horizontal=a.isHorizontal(),a._table=[],a._timestamps={data:f,datasets:p,labels:_}},buildTicks:function(){var e,t,n,r=this,i=r.min,o=r.max,a=r.options,s=a.time,u=[],l=[];switch(a.ticks.source){case"data":u=r._timestamps.data;break;case"labels":u=r._timestamps.labels;break;case"auto":default:u=function(e,t,n,r){var i,o=e._adapter,a=e.options,s=a.time,u=s.unit||function(e,t,n,r){var i,o,a,u=Rn.length;for(i=Rn.indexOf(s.minUnit);i<u-1;++i)if(a=(o=Pn[Rn[i]]).steps?o.steps[o.steps.length-1]:Cn,o.common&&Math.ceil((n-t)/(a*o.size))<=r)return Rn[i];return Rn[u-1]}(0,t,n,r),l=Fn(u),c=An(s.stepSize,s.unitStepSize),h="week"===u&&s.isoWeekday,d=a.ticks.major.enabled,f=Pn[u],p=t,_=n,m=[];for(c||(c=function(e,t,n,r){var i,o,a,s=t-e,l=Pn[u],c=l.size,h=l.steps;if(!h)return Math.ceil(s/(r*c));for(i=0,o=h.length;i<o&&(a=h[i],!(Math.ceil(s/(c*a))<=r));++i);return a}(t,n,0,r)),h&&(p=+o.startOf(p,"isoWeek",h),_=+o.startOf(_,"isoWeek",h)),p=+o.startOf(p,h?"day":u),(_=+o.startOf(_,h?"day":u))<n&&(_=+o.add(_,1,u)),i=p,d&&l&&!h&&!s.round&&(i=+o.startOf(i,l),i=+o.add(i,~~((p-i)/(f.size*c))*c,u));i<_;i=+o.add(i,c,u))m.push(+i);return m.push(+i),m}(r,i,o,r.getLabelCapacity(i))}for("ticks"===a.bounds&&u.length&&(i=u[0],o=u[u.length-1]),i=In(r,s.min)||i,o=In(r,s.max)||o,e=0,t=u.length;e<t;++e)(n=u[e])>=i&&n<=o&&l.push(n);return r.min=i,r.max=o,r._unit=s.unit||function(e,t,n,r,i){var o,a;for(o=Rn.length-1;o>=Rn.indexOf(n);o--)if(Pn[a=Rn[o]].common&&e._adapter.diff(i,r,a)>=t.length)return a;return Rn[n?Rn.indexOf(n):0]}(r,l,s.minUnit,r.min,r.max),r._majorUnit=Fn(r._unit),r._table=function(e,t,n,r){if("linear"===a.distribution||!e.length)return[{time:t,pos:0},{time:n,pos:1}];var i,o,s,u,l,c=[],h=[t];for(i=0,o=e.length;i<o;++i)(u=e[i])>t&&u<n&&h.push(u);for(h.push(n),i=0,o=h.length;i<o;++i)l=h[i+1],u=h[i],void 0!==(s=h[i-1])&&void 0!==l&&Math.round((l+s)/2)===u||c.push({time:u,pos:i/(o-1)});return c}(r._timestamps.data,i,o),r._offsets=function(e,t,n,r,i){var o,a,s=0,u=0;return i.offset&&t.length&&(i.time.min||(o=wn(e,"time",t[0],"pos"),s=1===t.length?1-o:(wn(e,"time",t[1],"pos")-o)/2),i.time.max||(a=wn(e,"time",t[t.length-1],"pos"),u=1===t.length?a:(a-wn(e,"time",t[t.length-2],"pos"))/2)),{start:s,end:u}}(r._table,l,0,0,a),a.ticks.reverse&&l.reverse(),function(e,t,n){var r,i,o,a,s=[];for(r=0,i=t.length;r<i;++r)o=t[r],a=!!n&&o===+e._adapter.startOf(o,n),s.push({value:o,major:a});return s}(r,l,r._majorUnit)},getLabelForIndex:function(e,t){var n=this,r=n._adapter,i=n.chart.data,o=n.options.time,a=i.labels&&e<i.labels.length?i.labels[e]:"",s=i.datasets[t].data[e];return ce.isObject(s)&&(a=n.getRightValue(s)),o.tooltipFormat?r.format(Ln(n,a),o.tooltipFormat):"string"==typeof a?a:r.format(Ln(n,a),o.displayFormats.datetime)},tickFormatFunction:function(e,t,n,r){var i=this._adapter,o=this.options,a=o.time.displayFormats,s=a[this._unit],u=this._majorUnit,l=a[u],c=+i.startOf(e,u),h=o.ticks.major,d=h.enabled&&u&&l&&e===c,f=i.format(e,r||(d?l:s)),p=d?h:o.ticks.minor,_=An(p.callback,p.userCallback);return _?_(f,t,n):f},convertTicksToLabels:function(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t)r.push(this.tickFormatFunction(e[t].value,t,e));return r},getPixelForOffset:function(e){var t=this,n=t.options.ticks.reverse,r=t._horizontal?t.width:t.height,i=t._horizontal?n?t.right:t.left:n?t.bottom:t.top,o=wn(t._table,"time",e,"pos"),a=r*(t._offsets.start+o)/(t._offsets.start+1+t._offsets.end);return n?i-a:i+a},getPixelForValue:function(e,t,n){var r=null;if(void 0!==t&&void 0!==n&&(r=this._timestamps.datasets[n][t]),null===r&&(r=In(this,e)),null!==r)return this.getPixelForOffset(r)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,n=t._horizontal?t.width:t.height,r=wn(t._table,"pos",(n?(e-(t._horizontal?t.left:t.top))/n:0)*(t._offsets.start+1+t._offsets.start)-t._offsets.end,"time");return t._adapter._create(r)},getLabelWidth:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,r=ce.toRadians(t.maxRotation),i=Math.cos(r),o=Math.sin(r);return n*i+An(t.fontSize,se.global.defaultFontSize)*o},getLabelCapacity:function(e){var t=this,n=t.tickFormatFunction(e,0,[],t.options.time.displayFormats.millisecond),r=t.getLabelWidth(n),i=t.isHorizontal()?t.width:t.height,o=Math.floor(i/r);return o>0?o:1}});Nn._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var Bn={category:rn,linear:un,logarithmic:dn,radialLinear:Mn,time:Nn},kn={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};qt._date.override("function"==typeof e?{_id:"moment",formats:function(){return kn},parse:function(t,n){return"string"==typeof t&&"string"==typeof n?t=e(t,n):t instanceof e||(t=e(t)),t.isValid()?t.valueOf():null},format:function(t,n){return e(t).format(n)},add:function(t,n,r){return e(t).add(n,r).valueOf()},diff:function(t,n,r){return e.duration(e(t).diff(e(n))).as(r)},startOf:function(t,n,r){return t=e(t),"isoWeek"===n?t.isoWeekday(r).valueOf():t.startOf(n).valueOf()},endOf:function(t,n){return e(t).endOf(n).valueOf()},_create:function(t){return e(t)}}:{}),se._set("global",{plugins:{filler:{propagate:!0}}});var Un={dataset:function(e){var t=e.fill,n=e.chart,r=n.getDatasetMeta(t),i=r&&n.isDatasetVisible(t)&&r.dataset._children||[],o=i.length||0;return o?function(e,t){return t<o&&i[t]._view||null}:null},boundary:function(e){var t=e.boundary,n=t?t.x:null,r=t?t.y:null;return function(e){return{x:null===n?e.x:n,y:null===r?e.y:r}}}};function Vn(e,t,n){var r,i=e._model||{},o=i.fill;if(void 0===o&&(o=!!i.backgroundColor),!1===o||null===o)return!1;if(!0===o)return"origin";if(r=parseFloat(o,10),isFinite(r)&&Math.floor(r)===r)return"-"!==o[0]&&"+"!==o[0]||(r=t+r),!(r===t||r<0||r>=n)&&r;switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return!1}}function Gn(e){var t,n=e.el._model||{},r=e.el._scale||{},i=e.fill,o=null;if(isFinite(i))return null;if("start"===i?o=void 0===n.scaleBottom?r.bottom:n.scaleBottom:"end"===i?o=void 0===n.scaleTop?r.top:n.scaleTop:void 0!==n.scaleZero?o=n.scaleZero:r.getBasePosition?o=r.getBasePosition():r.getBasePixel&&(o=r.getBasePixel()),null!=o){if(void 0!==o.x&&void 0!==o.y)return o;if(ce.isFinite(o))return{x:(t=r.isHorizontal())?o:null,y:t?null:o}}return null}function jn(e,t,n){var r,i=e[t].fill,o=[t];if(!n)return i;for(;!1!==i&&-1===o.indexOf(i);){if(!isFinite(i))return i;if(!(r=e[i]))return!1;if(r.visible)return i;o.push(i),i=r.fill}return!1}function zn(e){var t=e.fill,n="dataset";return!1===t?null:(isFinite(t)||(n="boundary"),Un[n](e))}function Yn(e){return e&&!e.skip}function Hn(e,t,n,r,i){var o;if(r&&i){for(e.moveTo(t[0].x,t[0].y),o=1;o<r;++o)ce.canvas.lineTo(e,t[o-1],t[o]);for(e.lineTo(n[i-1].x,n[i-1].y),o=i-1;o>0;--o)ce.canvas.lineTo(e,n[o],n[o-1],!0)}}var Wn={id:"filler",afterDatasetsUpdate:function(e,t){var n,r,i,o,a=(e.data.datasets||[]).length,s=t.propagate,u=[];for(r=0;r<a;++r)o=null,(i=(n=e.getDatasetMeta(r)).dataset)&&i._model&&i instanceof Be.Line&&(o={visible:e.isDatasetVisible(r),fill:Vn(i,r,a),chart:e,el:i}),n.$filler=o,u.push(o);for(r=0;r<a;++r)(o=u[r])&&(o.fill=jn(u,r,s),o.boundary=Gn(o),o.mapper=zn(o))},beforeDatasetDraw:function(e,t){var n=t.meta.$filler;if(n){var r=e.ctx,i=n.el,o=i._view,a=i._children||[],s=n.mapper,u=o.backgroundColor||se.global.defaultColor;s&&u&&a.length&&(ce.canvas.clipArea(r,e.chartArea),function(e,t,n,r,i,o){var a,s,u,l,c,h,d,f=t.length,p=r.spanGaps,_=[],m=[],g=0,v=0;for(e.beginPath(),a=0,s=f+!!o;a<s;++a)c=n(l=t[u=a%f]._view,u,r),h=Yn(l),d=Yn(c),h&&d?(g=_.push(l),v=m.push(c)):g&&v&&(p?(h&&_.push(l),d&&m.push(c)):(Hn(e,_,m,g,v),g=v=0,_=[],m=[]));Hn(e,_,m,g,v),e.closePath(),e.fillStyle=i,e.fill()}(r,a,s,o,u,i._loop),ce.canvas.unclipArea(r))}}},Xn=ce.noop,Kn=ce.valueOrDefault;function Qn(e,t){return e.usePointStyle&&e.boxWidth>t?t:e.boxWidth}se._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var n=t.datasetIndex,r=this.chart,i=r.getDatasetMeta(n);i.hidden=null===i.hidden?!r.data.datasets[n].hidden:null,r.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data;return ce.isArray(t.datasets)?t.datasets.map(function(t,n){return{text:t.label,fillStyle:ce.isArray(t.backgroundColor)?t.backgroundColor[0]:t.backgroundColor,hidden:!e.isDatasetVisible(n),lineCap:t.borderCapStyle,lineDash:t.borderDash,lineDashOffset:t.borderDashOffset,lineJoin:t.borderJoinStyle,lineWidth:t.borderWidth,strokeStyle:t.borderColor,pointStyle:t.pointStyle,datasetIndex:n}},this):[]}}},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');for(var n=0;n<e.data.datasets.length;n++)t.push('<li><span style="background-color:'+e.data.datasets[n].backgroundColor+'"></span>'),e.data.datasets[n].label&&t.push(e.data.datasets[n].label),t.push("</li>");return t.push("</ul>"),t.join("")}});var qn=pe.extend({initialize:function(e){ce.extend(this,e),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:Xn,update:function(e,t,n){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:Xn,beforeSetDimensions:Xn,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:Xn,beforeBuildLabels:Xn,buildLabels:function(){var e=this,t=e.options.labels||{},n=ce.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(n=n.filter(function(n){return t.filter(n,e.chart.data)})),e.options.reverse&&n.reverse(),e.legendItems=n},afterBuildLabels:Xn,beforeFit:Xn,fit:function(){var e=this,t=e.options,n=t.labels,r=t.display,i=e.ctx,o=ce.options._parseFont(n),a=o.size,s=e.legendHitBoxes=[],u=e.minSize,l=e.isHorizontal();if(l?(u.width=e.maxWidth,u.height=r?10:0):(u.width=r?10:0,u.height=e.maxHeight),r)if(i.font=o.string,l){var c=e.lineWidths=[0],h=0;i.textAlign="left",i.textBaseline="top",ce.each(e.legendItems,function(e,t){var r=Qn(n,a)+a/2+i.measureText(e.text).width;(0===t||c[c.length-1]+r+n.padding>u.width)&&(h+=a+n.padding,c[c.length-(t>0?0:1)]=n.padding),s[t]={left:0,top:0,width:r,height:a},c[c.length-1]+=r+n.padding}),u.height+=h}else{var d=n.padding,f=e.columnWidths=[],p=n.padding,_=0,m=0,g=a+d;ce.each(e.legendItems,function(e,t){var r=Qn(n,a)+a/2+i.measureText(e.text).width;t>0&&m+g>u.height-d&&(p+=_+n.padding,f.push(_),_=0,m=0),_=Math.max(_,r),m+=g,s[t]={left:0,top:0,width:r,height:a}}),p+=_,f.push(_),u.width+=p}e.width=u.width,e.height=u.height},afterFit:Xn,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,t=e.options,n=t.labels,r=se.global,i=r.defaultColor,o=r.elements.line,a=e.width,s=e.lineWidths;if(t.display){var u,l=e.ctx,c=Kn(n.fontColor,r.defaultFontColor),h=ce.options._parseFont(n),d=h.size;l.textAlign="left",l.textBaseline="middle",l.lineWidth=.5,l.strokeStyle=c,l.fillStyle=c,l.font=h.string;var f=Qn(n,d),p=e.legendHitBoxes,_=e.isHorizontal();u=_?{x:e.left+(a-s[0])/2+n.padding,y:e.top+n.padding,line:0}:{x:e.left+n.padding,y:e.top+n.padding,line:0};var m=d+n.padding;ce.each(e.legendItems,function(r,c){var h=l.measureText(r.text).width,g=f+d/2+h,v=u.x,y=u.y;_?c>0&&v+g+n.padding>e.left+e.minSize.width&&(y=u.y+=m,u.line++,v=u.x=e.left+(a-s[u.line])/2+n.padding):c>0&&y+m>e.top+e.minSize.height&&(v=u.x=v+e.columnWidths[u.line]+n.padding,y=u.y=e.top+n.padding,u.line++),function(e,n,r){if(!(isNaN(f)||f<=0)){l.save();var a=Kn(r.lineWidth,o.borderWidth);if(l.fillStyle=Kn(r.fillStyle,i),l.lineCap=Kn(r.lineCap,o.borderCapStyle),l.lineDashOffset=Kn(r.lineDashOffset,o.borderDashOffset),l.lineJoin=Kn(r.lineJoin,o.borderJoinStyle),l.lineWidth=a,l.strokeStyle=Kn(r.strokeStyle,i),l.setLineDash&&l.setLineDash(Kn(r.lineDash,o.borderDash)),t.labels&&t.labels.usePointStyle){var s=f*Math.SQRT2/2;ce.canvas.drawPoint(l,r.pointStyle,s,e+f/2,n+d/2)}else 0!==a&&l.strokeRect(e,n,f,d),l.fillRect(e,n,f,d);l.restore()}}(v,y,r),p[c].left=v,p[c].top=y,function(e,t,n,r){var i=d/2,o=f+i+e,a=t+i;l.fillText(n.text,o,a),n.hidden&&(l.beginPath(),l.lineWidth=2,l.moveTo(o,a),l.lineTo(o+r,a),l.stroke())}(v,y,r,h),_?u.x+=g+n.padding:u.y+=m})}},_getLegendItemAt:function(e,t){var n,r,i,o=this;if(e>=o.left&&e<=o.right&&t>=o.top&&t<=o.bottom)for(i=o.legendHitBoxes,n=0;n<i.length;++n)if(e>=(r=i[n]).left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height)return o.legendItems[n];return null},handleEvent:function(e){var t,n=this,r=n.options,i="mouseup"===e.type?"click":e.type;if("mousemove"===i){if(!r.onHover&&!r.onLeave)return}else{if("click"!==i)return;if(!r.onClick)return}t=n._getLegendItemAt(e.x,e.y),"click"===i?t&&r.onClick&&r.onClick.call(n,e.native,t):(r.onLeave&&t!==n._hoveredItem&&(n._hoveredItem&&r.onLeave.call(n,e.native,n._hoveredItem),n._hoveredItem=t),r.onHover&&t&&r.onHover.call(n,e.native,t))}});function Zn(e,t){var n=new qn({ctx:e.ctx,options:t,chart:e});yt.configure(e,n,t),yt.addBox(e,n),e.legend=n}var Jn={id:"legend",_element:qn,beforeInit:function(e){var t=e.options.legend;t&&Zn(e,t)},beforeUpdate:function(e){var t=e.options.legend,n=e.legend;t?(ce.mergeIf(t,se.global.legend),n?(yt.configure(e,n,t),n.options=t):Zn(e,t)):n&&(yt.removeBox(e,n),delete e.legend)},afterEvent:function(e,t){var n=e.legend;n&&n.handleEvent(t)}},$n=ce.noop;se._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var er=pe.extend({initialize:function(e){ce.extend(this,e),this.legendHitBoxes=[]},beforeUpdate:$n,update:function(e,t,n){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:$n,beforeSetDimensions:$n,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:$n,beforeBuildLabels:$n,buildLabels:$n,afterBuildLabels:$n,beforeFit:$n,fit:function(){var e=this,t=e.options,n=t.display,r=e.minSize,i=ce.isArray(t.text)?t.text.length:1,o=ce.options._parseFont(t),a=n?i*o.lineHeight+2*t.padding:0;e.isHorizontal()?(r.width=e.maxWidth,r.height=a):(r.width=a,r.height=e.maxHeight),e.width=r.width,e.height=r.height},afterFit:$n,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,n=e.options;if(n.display){var r,i,o,a=ce.options._parseFont(n),s=a.lineHeight,u=s/2+n.padding,l=0,c=e.top,h=e.left,d=e.bottom,f=e.right;t.fillStyle=ce.valueOrDefault(n.fontColor,se.global.defaultFontColor),t.font=a.string,e.isHorizontal()?(i=h+(f-h)/2,o=c+u,r=f-h):(i="left"===n.position?h+u:f-u,o=c+(d-c)/2,r=d-c,l=Math.PI*("left"===n.position?-.5:.5)),t.save(),t.translate(i,o),t.rotate(l),t.textAlign="center",t.textBaseline="middle";var p=n.text;if(ce.isArray(p))for(var _=0,m=0;m<p.length;++m)t.fillText(p[m],0,_,r),_+=s;else t.fillText(p,0,0,r);t.restore()}}});function tr(e,t){var n=new er({ctx:e.ctx,options:t,chart:e});yt.configure(e,n,t),yt.addBox(e,n),e.titleBlock=n}var nr={},rr=Wn,ir=Jn,or={id:"title",_element:er,beforeInit:function(e){var t=e.options.title;t&&tr(e,t)},beforeUpdate:function(e){var t=e.options.title,n=e.titleBlock;t?(ce.mergeIf(t,se.global.title),n?(yt.configure(e,n,t),n.options=t):tr(e,t)):n&&(yt.removeBox(e,n),delete e.titleBlock)}};for(var ar in nr.filler=rr,nr.legend=ir,nr.title=or,Xt.helpers=ce,function(){function e(e,t,n){var r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}function t(e){return null!=e&&"none"!==e}function n(n,r,i){var o=document.defaultView,a=ce._getParentNode(n),s=o.getComputedStyle(n)[r],u=o.getComputedStyle(a)[r],l=t(s),c=t(u),h=Number.POSITIVE_INFINITY;return l||c?Math.min(l?e(s,n,i):h,c?e(u,a,i):h):"none"}ce.where=function(e,t){if(ce.isArray(e)&&Array.prototype.filter)return e.filter(t);var n=[];return ce.each(e,function(e){t(e)&&n.push(e)}),n},ce.findIndex=Array.prototype.findIndex?function(e,t,n){return e.findIndex(t,n)}:function(e,t,n){n=void 0===n?e:n;for(var r=0,i=e.length;r<i;++r)if(t.call(n,e[r],r,e))return r;return-1},ce.findNextWhere=function(e,t,n){ce.isNullOrUndef(n)&&(n=-1);for(var r=n+1;r<e.length;r++){var i=e[r];if(t(i))return i}},ce.findPreviousWhere=function(e,t,n){ce.isNullOrUndef(n)&&(n=e.length);for(var r=n-1;r>=0;r--){var i=e[r];if(t(i))return i}},ce.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ce.almostEquals=function(e,t,n){return Math.abs(e-t)<n},ce.almostWhole=function(e,t){var n=Math.round(e);return n-t<e&&n+t>e},ce.max=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.max(e,t)},Number.NEGATIVE_INFINITY)},ce.min=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.min(e,t)},Number.POSITIVE_INFINITY)},ce.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},ce.log10=Math.log10?function(e){return Math.log10(e)}:function(e){var t=Math.log(e)*Math.LOG10E,n=Math.round(t);return e===Math.pow(10,n)?n:t},ce.toRadians=function(e){return e*(Math.PI/180)},ce.toDegrees=function(e){return e*(180/Math.PI)},ce._decimalPlaces=function(e){if(ce.isFinite(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}},ce.getAngleFromPoint=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r),o=Math.atan2(r,n);return o<-.5*Math.PI&&(o+=2*Math.PI),{angle:o,distance:i}},ce.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},ce.aliasPixel=function(e){return e%2==0?0:.5},ce._alignPixel=function(e,t,n){var r=e.currentDevicePixelRatio,i=n/2;return Math.round((t-i)*r)/r+i},ce.splineCurve=function(e,t,n,r){var i=e.skip?t:e,o=t,a=n.skip?t:n,s=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)),u=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2)),l=s/(s+u),c=u/(s+u),h=r*(l=isNaN(l)?0:l),d=r*(c=isNaN(c)?0:c);return{previous:{x:o.x-h*(a.x-i.x),y:o.y-h*(a.y-i.y)},next:{x:o.x+d*(a.x-i.x),y:o.y+d*(a.y-i.y)}}},ce.EPSILON=Number.EPSILON||1e-14,ce.splineCurveMonotone=function(e){var t,n,r,i,o,a,s,u,l,c=(e||[]).map(function(e){return{model:e._model,deltaK:0,mK:0}}),h=c.length;for(t=0;t<h;++t)if(!(r=c[t]).model.skip){if(n=t>0?c[t-1]:null,(i=t<h-1?c[t+1]:null)&&!i.model.skip){var d=i.model.x-r.model.x;r.deltaK=0!==d?(i.model.y-r.model.y)/d:0}r.mK=!n||n.model.skip?r.deltaK:!i||i.model.skip?n.deltaK:this.sign(n.deltaK)!==this.sign(r.deltaK)?0:(n.deltaK+r.deltaK)/2}for(t=0;t<h-1;++t)i=c[t+1],(r=c[t]).model.skip||i.model.skip||(ce.almostEquals(r.deltaK,0,this.EPSILON)?r.mK=i.mK=0:(o=r.mK/r.deltaK,a=i.mK/r.deltaK,(u=Math.pow(o,2)+Math.pow(a,2))<=9||(s=3/Math.sqrt(u),r.mK=o*s*r.deltaK,i.mK=a*s*r.deltaK)));for(t=0;t<h;++t)(r=c[t]).model.skip||(i=t<h-1?c[t+1]:null,(n=t>0?c[t-1]:null)&&!n.model.skip&&(r.model.controlPointPreviousX=r.model.x-(l=(r.model.x-n.model.x)/3),r.model.controlPointPreviousY=r.model.y-l*r.mK),i&&!i.model.skip&&(r.model.controlPointNextX=r.model.x+(l=(i.model.x-r.model.x)/3),r.model.controlPointNextY=r.model.y+l*r.mK))},ce.nextItem=function(e,t,n){return n?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},ce.previousItem=function(e,t,n){return n?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},ce.niceNum=function(e,t){var n=Math.floor(ce.log10(e)),r=e/Math.pow(10,n);return(t?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,n)},ce.requestAnimFrame="undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)},ce.getRelativePosition=function(e,t){var n,r,i=e.originalEvent||e,o=e.target||e.srcElement,a=o.getBoundingClientRect(),s=i.touches;s&&s.length>0?(n=s[0].clientX,r=s[0].clientY):(n=i.clientX,r=i.clientY);var u=parseFloat(ce.getStyle(o,"padding-left")),l=parseFloat(ce.getStyle(o,"padding-top")),c=parseFloat(ce.getStyle(o,"padding-right")),h=parseFloat(ce.getStyle(o,"padding-bottom")),d=a.bottom-a.top-l-h;return{x:n=Math.round((n-a.left-u)/(a.right-a.left-u-c)*o.width/t.currentDevicePixelRatio),y:r=Math.round((r-a.top-l)/d*o.height/t.currentDevicePixelRatio)}},ce.getConstraintWidth=function(e){return n(e,"max-width","clientWidth")},ce.getConstraintHeight=function(e){return n(e,"max-height","clientHeight")},ce._calculatePadding=function(e,t,n){return(t=ce.getStyle(e,t)).indexOf("%")>-1?n*parseInt(t,10)/100:parseInt(t,10)},ce._getParentNode=function(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t},ce.getMaximumWidth=function(e){var t=ce._getParentNode(e);if(!t)return e.clientWidth;var n=t.clientWidth,r=n-ce._calculatePadding(t,"padding-left",n)-ce._calculatePadding(t,"padding-right",n),i=ce.getConstraintWidth(e);return isNaN(i)?r:Math.min(r,i)},ce.getMaximumHeight=function(e){var t=ce._getParentNode(e);if(!t)return e.clientHeight;var n=t.clientHeight,r=n-ce._calculatePadding(t,"padding-top",n)-ce._calculatePadding(t,"padding-bottom",n),i=ce.getConstraintHeight(e);return isNaN(i)?r:Math.min(r,i)},ce.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},ce.retinaScale=function(e,t){var n=e.currentDevicePixelRatio=t||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==n){var r=e.canvas,i=e.height,o=e.width;r.height=i*n,r.width=o*n,e.ctx.scale(n,n),r.style.height||r.style.width||(r.style.height=i+"px",r.style.width=o+"px")}},ce.fontString=function(e,t,n){return t+" "+e+"px "+n},ce.longestText=function(e,t,n,r){var i=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},o=r.garbageCollect=[],r.font=t),e.font=t;var a=0;ce.each(n,function(t){null!=t&&!0!==ce.isArray(t)?a=ce.measureText(e,i,o,a,t):ce.isArray(t)&&ce.each(t,function(t){null==t||ce.isArray(t)||(a=ce.measureText(e,i,o,a,t))})});var s=o.length/2;if(s>n.length){for(var u=0;u<s;u++)delete i[o[u]];o.splice(0,s)}return a},ce.measureText=function(e,t,n,r,i){var o=t[i];return o||(o=t[i]=e.measureText(i).width,n.push(i)),o>r&&(r=o),r},ce.numberOfLabelLines=function(e){var t=1;return ce.each(e,function(e){ce.isArray(e)&&e.length>t&&(t=e.length)}),t},ce.color=X?function(e){return e instanceof CanvasGradient&&(e=se.global.defaultColor),X(e)}:function(e){return console.error("Color.js not found!"),e},ce.getHoverColor=function(e){return e instanceof CanvasPattern||e instanceof CanvasGradient?e:ce.color(e).saturate(.5).darken(.1).rgbString()}}(),Xt._adapters=qt,Xt.Animation=me,Xt.animationService=ge,Xt.controllers=st,Xt.DatasetController=Ee,Xt.defaults=se,Xt.Element=pe,Xt.elements=Be,Xt.Interaction=pt,Xt.layouts=yt,Xt.platform=Dt,Xt.plugins=Ot,Xt.Scale=nn,Xt.scaleService=wt,Xt.Ticks=Zt,Xt.Tooltip=Vt,Xt.helpers.each(Bn,function(e,t){Xt.scaleService.registerScaleType(t,e,e._defaults)}),nr)nr.hasOwnProperty(ar)&&Xt.plugins.register(nr[ar]);Xt.platform.initialize();var sr=Xt;return"undefined"!=typeof window&&(window.Chart=Xt),Xt.Chart=Xt,Xt.Legend=nr.legend._element,Xt.Title=nr.title._element,Xt.pluginService=Xt.plugins,Xt.PluginBase=Xt.Element.extend({}),Xt.canvasHelpers=Xt.helpers.canvas,Xt.layoutService=Xt.layouts,Xt.LinearScaleBase=an,Xt.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(e){Xt[e]=function(t,n){return new Xt(t,Xt.helpers.merge(n||{},{type:e.charAt(0).toLowerCase()+e.slice(1)}))}}),sr}(function(){try{return n("wd/R")}catch(e){}}())},McSo:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,"a",function(){return r})},OIYi:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}()},Oaa7:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}()},Ob0Z:function(e,t,n){!function(e){"use strict";var t={1:"\u0967",2:"\u0968",3:"\u0969",4:"\u096a",5:"\u096b",6:"\u096c",7:"\u096d",8:"\u096e",9:"\u096f",0:"\u0966"},n={"\u0967":"1","\u0968":"2","\u0969":"3","\u096a":"4","\u096b":"5","\u096c":"6","\u096d":"7","\u096e":"8","\u096f":"9","\u0966":"0"};function r(e,t,n,r){var i="";if(t)switch(n){case"s":i="\u0915\u093e\u0939\u0940 \u0938\u0947\u0915\u0902\u0926";break;case"ss":i="%d \u0938\u0947\u0915\u0902\u0926";break;case"m":i="\u090f\u0915 \u092e\u093f\u0928\u093f\u091f";break;case"mm":i="%d \u092e\u093f\u0928\u093f\u091f\u0947";break;case"h":i="\u090f\u0915 \u0924\u093e\u0938";break;case"hh":i="%d \u0924\u093e\u0938";break;case"d":i="\u090f\u0915 \u0926\u093f\u0935\u0938";break;case"dd":i="%d \u0926\u093f\u0935\u0938";break;case"M":i="\u090f\u0915 \u092e\u0939\u093f\u0928\u093e";break;case"MM":i="%d \u092e\u0939\u093f\u0928\u0947";break;case"y":i="\u090f\u0915 \u0935\u0930\u094d\u0937";break;case"yy":i="%d \u0935\u0930\u094d\u0937\u0947"}else switch(n){case"s":i="\u0915\u093e\u0939\u0940 \u0938\u0947\u0915\u0902\u0926\u093e\u0902";break;case"ss":i="%d \u0938\u0947\u0915\u0902\u0926\u093e\u0902";break;case"m":i="\u090f\u0915\u093e \u092e\u093f\u0928\u093f\u091f\u093e";break;case"mm":i="%d \u092e\u093f\u0928\u093f\u091f\u093e\u0902";break;case"h":i="\u090f\u0915\u093e \u0924\u093e\u0938\u093e";break;case"hh":i="%d \u0924\u093e\u0938\u093e\u0902";break;case"d":i="\u090f\u0915\u093e \u0926\u093f\u0935\u0938\u093e";break;case"dd":i="%d \u0926\u093f\u0935\u0938\u093e\u0902";break;case"M":i="\u090f\u0915\u093e \u092e\u0939\u093f\u0928\u094d\u092f\u093e";break;case"MM":i="%d \u092e\u0939\u093f\u0928\u094d\u092f\u093e\u0902";break;case"y":i="\u090f\u0915\u093e \u0935\u0930\u094d\u0937\u093e";break;case"yy":i="%d \u0935\u0930\u094d\u0937\u093e\u0902"}return i.replace(/%d/i,e)}e.defineLocale("mr",{months:"\u091c\u093e\u0928\u0947\u0935\u093e\u0930\u0940_\u092b\u0947\u092c\u094d\u0930\u0941\u0935\u093e\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u090f\u092a\u094d\u0930\u093f\u0932_\u092e\u0947_\u091c\u0942\u0928_\u091c\u0941\u0932\u0948_\u0911\u0917\u0938\u094d\u091f_\u0938\u092a\u094d\u091f\u0947\u0902\u092c\u0930_\u0911\u0915\u094d\u091f\u094b\u092c\u0930_\u0928\u094b\u0935\u094d\u0939\u0947\u0902\u092c\u0930_\u0921\u093f\u0938\u0947\u0902\u092c\u0930".split("_"),monthsShort:"\u091c\u093e\u0928\u0947._\u092b\u0947\u092c\u094d\u0930\u0941._\u092e\u093e\u0930\u094d\u091a._\u090f\u092a\u094d\u0930\u093f._\u092e\u0947._\u091c\u0942\u0928._\u091c\u0941\u0932\u0948._\u0911\u0917._\u0938\u092a\u094d\u091f\u0947\u0902._\u0911\u0915\u094d\u091f\u094b._\u0928\u094b\u0935\u094d\u0939\u0947\u0902._\u0921\u093f\u0938\u0947\u0902.".split("_"),monthsParseExact:!0,weekdays:"\u0930\u0935\u093f\u0935\u093e\u0930_\u0938\u094b\u092e\u0935\u093e\u0930_\u092e\u0902\u0917\u0933\u0935\u093e\u0930_\u092c\u0941\u0927\u0935\u093e\u0930_\u0917\u0941\u0930\u0942\u0935\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u0935\u093e\u0930_\u0936\u0928\u093f\u0935\u093e\u0930".split("_"),weekdaysShort:"\u0930\u0935\u093f_\u0938\u094b\u092e_\u092e\u0902\u0917\u0933_\u092c\u0941\u0927_\u0917\u0941\u0930\u0942_\u0936\u0941\u0915\u094d\u0930_\u0936\u0928\u093f".split("_"),weekdaysMin:"\u0930_\u0938\u094b_\u092e\u0902_\u092c\u0941_\u0917\u0941_\u0936\u0941_\u0936".split("_"),longDateFormat:{LT:"A h:mm \u0935\u093e\u091c\u0924\u093e",LTS:"A h:mm:ss \u0935\u093e\u091c\u0924\u093e",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u0935\u093e\u091c\u0924\u093e",LLLL:"dddd, D MMMM YYYY, A h:mm \u0935\u093e\u091c\u0924\u093e"},calendar:{sameDay:"[\u0906\u091c] LT",nextDay:"[\u0909\u0926\u094d\u092f\u093e] LT",nextWeek:"dddd, LT",lastDay:"[\u0915\u093e\u0932] LT",lastWeek:"[\u092e\u093e\u0917\u0940\u0932] dddd, LT",sameElse:"L"},relativeTime:{future:"%s\u092e\u0927\u094d\u092f\u0947",past:"%s\u092a\u0942\u0930\u094d\u0935\u0940",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/\u0930\u093e\u0924\u094d\u0930\u0940|\u0938\u0915\u093e\u0933\u0940|\u0926\u0941\u092a\u093e\u0930\u0940|\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u0930\u093e\u0924\u094d\u0930\u0940"===t?e<4?e:e+12:"\u0938\u0915\u093e\u0933\u0940"===t?e:"\u0926\u0941\u092a\u093e\u0930\u0940"===t?e>=10?e:e+12:"\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"\u0930\u093e\u0924\u094d\u0930\u0940":e<10?"\u0938\u0915\u093e\u0933\u0940":e<17?"\u0926\u0941\u092a\u093e\u0930\u0940":e<20?"\u0938\u093e\u092f\u0902\u0915\u093e\u0933\u0940":"\u0930\u093e\u0924\u094d\u0930\u0940"},week:{dow:0,doy:6}})}(n("wd/R"))},OjkT:function(e,t,n){!function(e){"use strict";var t={1:"\u0967",2:"\u0968",3:"\u0969",4:"\u096a",5:"\u096b",6:"\u096c",7:"\u096d",8:"\u096e",9:"\u096f",0:"\u0966"},n={"\u0967":"1","\u0968":"2","\u0969":"3","\u096a":"4","\u096b":"5","\u096c":"6","\u096d":"7","\u096e":"8","\u096f":"9","\u0966":"0"};e.defineLocale("ne",{months:"\u091c\u0928\u0935\u0930\u0940_\u092b\u0947\u092c\u094d\u0930\u0941\u0935\u0930\u0940_\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u093f\u0932_\u092e\u0908_\u091c\u0941\u0928_\u091c\u0941\u0932\u093e\u0908_\u0905\u0917\u0937\u094d\u091f_\u0938\u0947\u092a\u094d\u091f\u0947\u092e\u094d\u092c\u0930_\u0905\u0915\u094d\u091f\u094b\u092c\u0930_\u0928\u094b\u092d\u0947\u092e\u094d\u092c\u0930_\u0921\u093f\u0938\u0947\u092e\u094d\u092c\u0930".split("_"),monthsShort:"\u091c\u0928._\u092b\u0947\u092c\u094d\u0930\u0941._\u092e\u093e\u0930\u094d\u091a_\u0905\u092a\u094d\u0930\u093f._\u092e\u0908_\u091c\u0941\u0928_\u091c\u0941\u0932\u093e\u0908._\u0905\u0917._\u0938\u0947\u092a\u094d\u091f._\u0905\u0915\u094d\u091f\u094b._\u0928\u094b\u092d\u0947._\u0921\u093f\u0938\u0947.".split("_"),monthsParseExact:!0,weekdays:"\u0906\u0907\u0924\u092c\u093e\u0930_\u0938\u094b\u092e\u092c\u093e\u0930_\u092e\u0919\u094d\u0917\u0932\u092c\u093e\u0930_\u092c\u0941\u0927\u092c\u093e\u0930_\u092c\u093f\u0939\u093f\u092c\u093e\u0930_\u0936\u0941\u0915\u094d\u0930\u092c\u093e\u0930_\u0936\u0928\u093f\u092c\u093e\u0930".split("_"),weekdaysShort:"\u0906\u0907\u0924._\u0938\u094b\u092e._\u092e\u0919\u094d\u0917\u0932._\u092c\u0941\u0927._\u092c\u093f\u0939\u093f._\u0936\u0941\u0915\u094d\u0930._\u0936\u0928\u093f.".split("_"),weekdaysMin:"\u0906._\u0938\u094b._\u092e\u0902._\u092c\u0941._\u092c\u093f._\u0936\u0941._\u0936.".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"A\u0915\u094b h:mm \u092c\u091c\u0947",LTS:"A\u0915\u094b h:mm:ss \u092c\u091c\u0947",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A\u0915\u094b h:mm \u092c\u091c\u0947",LLLL:"dddd, D MMMM YYYY, A\u0915\u094b h:mm \u092c\u091c\u0947"},preparse:function(e){return e.replace(/[\u0967\u0968\u0969\u096a\u096b\u096c\u096d\u096e\u096f\u0966]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/\u0930\u093e\u0924\u093f|\u092c\u093f\u0939\u093e\u0928|\u0926\u093f\u0909\u0901\u0938\u094b|\u0938\u093e\u0901\u091d/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u0930\u093e\u0924\u093f"===t?e<4?e:e+12:"\u092c\u093f\u0939\u093e\u0928"===t?e:"\u0926\u093f\u0909\u0901\u0938\u094b"===t?e>=10?e:e+12:"\u0938\u093e\u0901\u091d"===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"\u0930\u093e\u0924\u093f":e<12?"\u092c\u093f\u0939\u093e\u0928":e<16?"\u0926\u093f\u0909\u0901\u0938\u094b":e<20?"\u0938\u093e\u0901\u091d":"\u0930\u093e\u0924\u093f"},calendar:{sameDay:"[\u0906\u091c] LT",nextDay:"[\u092d\u094b\u0932\u093f] LT",nextWeek:"[\u0906\u0909\u0901\u0926\u094b] dddd[,] LT",lastDay:"[\u0939\u093f\u091c\u094b] LT",lastWeek:"[\u0917\u090f\u0915\u094b] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s\u092e\u093e",past:"%s \u0905\u0917\u093e\u0921\u093f",s:"\u0915\u0947\u0939\u0940 \u0915\u094d\u0937\u0923",ss:"%d \u0938\u0947\u0915\u0947\u0923\u094d\u0921",m:"\u090f\u0915 \u092e\u093f\u0928\u0947\u091f",mm:"%d \u092e\u093f\u0928\u0947\u091f",h:"\u090f\u0915 \u0918\u0923\u094d\u091f\u093e",hh:"%d \u0918\u0923\u094d\u091f\u093e",d:"\u090f\u0915 \u0926\u093f\u0928",dd:"%d \u0926\u093f\u0928",M:"\u090f\u0915 \u092e\u0939\u093f\u0928\u093e",MM:"%d \u092e\u0939\u093f\u0928\u093e",y:"\u090f\u0915 \u092c\u0930\u094d\u0937",yy:"%d \u092c\u0930\u094d\u0937"},week:{dow:0,doy:6}})}(n("wd/R"))},Oxv6:function(e,t,n){!function(e){"use strict";var t={0:"-\u0443\u043c",1:"-\u0443\u043c",2:"-\u044e\u043c",3:"-\u044e\u043c",4:"-\u0443\u043c",5:"-\u0443\u043c",6:"-\u0443\u043c",7:"-\u0443\u043c",8:"-\u0443\u043c",9:"-\u0443\u043c",10:"-\u0443\u043c",12:"-\u0443\u043c",13:"-\u0443\u043c",20:"-\u0443\u043c",30:"-\u044e\u043c",40:"-\u0443\u043c",50:"-\u0443\u043c",60:"-\u0443\u043c",70:"-\u0443\u043c",80:"-\u0443\u043c",90:"-\u0443\u043c",100:"-\u0443\u043c"};e.defineLocale("tg",{months:"\u044f\u043d\u0432\u0430\u0440_\u0444\u0435\u0432\u0440\u0430\u043b_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440_\u043e\u043a\u0442\u044f\u0431\u0440_\u043d\u043e\u044f\u0431\u0440_\u0434\u0435\u043a\u0430\u0431\u0440".split("_"),monthsShort:"\u044f\u043d\u0432_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u0438\u044e\u043d_\u0438\u044e\u043b_\u0430\u0432\u0433_\u0441\u0435\u043d_\u043e\u043a\u0442_\u043d\u043e\u044f_\u0434\u0435\u043a".split("_"),weekdays:"\u044f\u043a\u0448\u0430\u043d\u0431\u0435_\u0434\u0443\u0448\u0430\u043d\u0431\u0435_\u0441\u0435\u0448\u0430\u043d\u0431\u0435_\u0447\u043e\u0440\u0448\u0430\u043d\u0431\u0435_\u043f\u0430\u043d\u04b7\u0448\u0430\u043d\u0431\u0435_\u04b7\u0443\u043c\u044a\u0430_\u0448\u0430\u043d\u0431\u0435".split("_"),weekdaysShort:"\u044f\u0448\u0431_\u0434\u0448\u0431_\u0441\u0448\u0431_\u0447\u0448\u0431_\u043f\u0448\u0431_\u04b7\u0443\u043c_\u0448\u043d\u0431".split("_"),weekdaysMin:"\u044f\u0448_\u0434\u0448_\u0441\u0448_\u0447\u0448_\u043f\u0448_\u04b7\u043c_\u0448\u0431".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0418\u043c\u0440\u04ef\u0437 \u0441\u043e\u0430\u0442\u0438] LT",nextDay:"[\u041f\u0430\u0433\u043e\u04b3 \u0441\u043e\u0430\u0442\u0438] LT",lastDay:"[\u0414\u0438\u0440\u04ef\u0437 \u0441\u043e\u0430\u0442\u0438] LT",nextWeek:"dddd[\u0438] [\u04b3\u0430\u0444\u0442\u0430\u0438 \u043e\u044f\u043d\u0434\u0430 \u0441\u043e\u0430\u0442\u0438] LT",lastWeek:"dddd[\u0438] [\u04b3\u0430\u0444\u0442\u0430\u0438 \u0433\u0443\u0437\u0430\u0448\u0442\u0430 \u0441\u043e\u0430\u0442\u0438] LT",sameElse:"L"},relativeTime:{future:"\u0431\u0430\u044a\u0434\u0438 %s",past:"%s \u043f\u0435\u0448",s:"\u044f\u043a\u0447\u0430\u043d\u0434 \u0441\u043e\u043d\u0438\u044f",m:"\u044f\u043a \u0434\u0430\u049b\u0438\u049b\u0430",mm:"%d \u0434\u0430\u049b\u0438\u049b\u0430",h:"\u044f\u043a \u0441\u043e\u0430\u0442",hh:"%d \u0441\u043e\u0430\u0442",d:"\u044f\u043a \u0440\u04ef\u0437",dd:"%d \u0440\u04ef\u0437",M:"\u044f\u043a \u043c\u043e\u04b3",MM:"%d \u043c\u043e\u04b3",y:"\u044f\u043a \u0441\u043e\u043b",yy:"%d \u0441\u043e\u043b"},meridiemParse:/\u0448\u0430\u0431|\u0441\u0443\u0431\u04b3|\u0440\u04ef\u0437|\u0431\u0435\u0433\u043e\u04b3/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u0448\u0430\u0431"===t?e<4?e:e+12:"\u0441\u0443\u0431\u04b3"===t?e:"\u0440\u04ef\u0437"===t?e>=11?e:e+12:"\u0431\u0435\u0433\u043e\u04b3"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"\u0448\u0430\u0431":e<11?"\u0441\u0443\u0431\u04b3":e<16?"\u0440\u04ef\u0437":e<19?"\u0431\u0435\u0433\u043e\u04b3":"\u0448\u0430\u0431"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0443\u043c|\u044e\u043c)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n("wd/R"))},PA2r:function(e,t,n){!function(e){"use strict";var t="leden_\xfanor_b\u0159ezen_duben_kv\u011bten_\u010derven_\u010dervenec_srpen_z\xe1\u0159\xed_\u0159\xedjen_listopad_prosinec".split("_"),n="led_\xfano_b\u0159e_dub_kv\u011b_\u010dvn_\u010dvc_srp_z\xe1\u0159_\u0159\xedj_lis_pro".split("_"),r=[/^led/i,/^\xfano/i,/^b\u0159e/i,/^dub/i,/^kv\u011b/i,/^(\u010dvn|\u010derven$|\u010dervna)/i,/^(\u010dvc|\u010dervenec|\u010dervence)/i,/^srp/i,/^z\xe1\u0159/i,/^\u0159\xedj/i,/^lis/i,/^pro/i],i=/^(leden|\xfanor|b\u0159ezen|duben|kv\u011bten|\u010dervenec|\u010dervence|\u010derven|\u010dervna|srpen|z\xe1\u0159\xed|\u0159\xedjen|listopad|prosinec|led|\xfano|b\u0159e|dub|kv\u011b|\u010dvn|\u010dvc|srp|z\xe1\u0159|\u0159\xedj|lis|pro)/i;function o(e){return e>1&&e<5&&1!=~~(e/10)}function a(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"p\xe1r sekund":"p\xe1r sekundami";case"ss":return t||r?i+(o(e)?"sekundy":"sekund"):i+"sekundami";case"m":return t?"minuta":r?"minutu":"minutou";case"mm":return t||r?i+(o(e)?"minuty":"minut"):i+"minutami";case"h":return t?"hodina":r?"hodinu":"hodinou";case"hh":return t||r?i+(o(e)?"hodiny":"hodin"):i+"hodinami";case"d":return t||r?"den":"dnem";case"dd":return t||r?i+(o(e)?"dny":"dn\xed"):i+"dny";case"M":return t||r?"m\u011bs\xedc":"m\u011bs\xedcem";case"MM":return t||r?i+(o(e)?"m\u011bs\xedce":"m\u011bs\xedc\u016f"):i+"m\u011bs\xedci";case"y":return t||r?"rok":"rokem";case"yy":return t||r?i+(o(e)?"roky":"let"):i+"lety"}}e.defineLocale("cs",{months:t,monthsShort:n,monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(leden|ledna|\xfanora|\xfanor|b\u0159ezen|b\u0159ezna|duben|dubna|kv\u011bten|kv\u011btna|\u010dervenec|\u010dervence|\u010derven|\u010dervna|srpen|srpna|z\xe1\u0159\xed|\u0159\xedjen|\u0159\xedjna|listopadu|listopad|prosinec|prosince)/i,monthsShortStrictRegex:/^(led|\xfano|b\u0159e|dub|kv\u011b|\u010dvn|\u010dvc|srp|z\xe1\u0159|\u0159\xedj|lis|pro)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"ned\u011ble_pond\u011bl\xed_\xfater\xfd_st\u0159eda_\u010dtvrtek_p\xe1tek_sobota".split("_"),weekdaysShort:"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),weekdaysMin:"ne_po_\xfat_st_\u010dt_p\xe1_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm",l:"D. M. YYYY"},calendar:{sameDay:"[dnes v] LT",nextDay:"[z\xedtra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v ned\u011bli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve st\u0159edu v] LT";case 4:return"[ve \u010dtvrtek v] LT";case 5:return"[v p\xe1tek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[v\u010dera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou ned\u011bli v] LT";case 1:case 2:return"[minul\xe9] dddd [v] LT";case 3:return"[minulou st\u0159edu v] LT";case 4:case 5:return"[minul\xfd] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"p\u0159ed %s",s:a,ss:a,m:a,mm:a,h:a,hh:a,d:a,dd:a,M:a,MM:a,y:a,yy:a},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n("wd/R"))},PeUW:function(e,t,n){!function(e){"use strict";var t={1:"\u0be7",2:"\u0be8",3:"\u0be9",4:"\u0bea",5:"\u0beb",6:"\u0bec",7:"\u0bed",8:"\u0bee",9:"\u0bef",0:"\u0be6"},n={"\u0be7":"1","\u0be8":"2","\u0be9":"3","\u0bea":"4","\u0beb":"5","\u0bec":"6","\u0bed":"7","\u0bee":"8","\u0bef":"9","\u0be6":"0"};e.defineLocale("ta",{months:"\u0b9c\u0ba9\u0bb5\u0bb0\u0bbf_\u0baa\u0bbf\u0baa\u0bcd\u0bb0\u0bb5\u0bb0\u0bbf_\u0bae\u0bbe\u0bb0\u0bcd\u0b9a\u0bcd_\u0b8f\u0baa\u0bcd\u0bb0\u0bb2\u0bcd_\u0bae\u0bc7_\u0b9c\u0bc2\u0ba9\u0bcd_\u0b9c\u0bc2\u0bb2\u0bc8_\u0b86\u0b95\u0bb8\u0bcd\u0b9f\u0bcd_\u0b9a\u0bc6\u0baa\u0bcd\u0b9f\u0bc6\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b85\u0b95\u0bcd\u0b9f\u0bc7\u0bbe\u0baa\u0bb0\u0bcd_\u0ba8\u0bb5\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b9f\u0bbf\u0b9a\u0bae\u0bcd\u0baa\u0bb0\u0bcd".split("_"),monthsShort:"\u0b9c\u0ba9\u0bb5\u0bb0\u0bbf_\u0baa\u0bbf\u0baa\u0bcd\u0bb0\u0bb5\u0bb0\u0bbf_\u0bae\u0bbe\u0bb0\u0bcd\u0b9a\u0bcd_\u0b8f\u0baa\u0bcd\u0bb0\u0bb2\u0bcd_\u0bae\u0bc7_\u0b9c\u0bc2\u0ba9\u0bcd_\u0b9c\u0bc2\u0bb2\u0bc8_\u0b86\u0b95\u0bb8\u0bcd\u0b9f\u0bcd_\u0b9a\u0bc6\u0baa\u0bcd\u0b9f\u0bc6\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b85\u0b95\u0bcd\u0b9f\u0bc7\u0bbe\u0baa\u0bb0\u0bcd_\u0ba8\u0bb5\u0bae\u0bcd\u0baa\u0bb0\u0bcd_\u0b9f\u0bbf\u0b9a\u0bae\u0bcd\u0baa\u0bb0\u0bcd".split("_"),weekdays:"\u0b9e\u0bbe\u0baf\u0bbf\u0bb1\u0bcd\u0bb1\u0bc1\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0ba4\u0bbf\u0b99\u0bcd\u0b95\u0b9f\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0b9a\u0bc6\u0bb5\u0bcd\u0bb5\u0bbe\u0baf\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0baa\u0bc1\u0ba4\u0ba9\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0bb5\u0bbf\u0baf\u0bbe\u0bb4\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0bb5\u0bc6\u0bb3\u0bcd\u0bb3\u0bbf\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8_\u0b9a\u0ba9\u0bbf\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8".split("_"),weekdaysShort:"\u0b9e\u0bbe\u0baf\u0bbf\u0bb1\u0bc1_\u0ba4\u0bbf\u0b99\u0bcd\u0b95\u0bb3\u0bcd_\u0b9a\u0bc6\u0bb5\u0bcd\u0bb5\u0bbe\u0baf\u0bcd_\u0baa\u0bc1\u0ba4\u0ba9\u0bcd_\u0bb5\u0bbf\u0baf\u0bbe\u0bb4\u0ba9\u0bcd_\u0bb5\u0bc6\u0bb3\u0bcd\u0bb3\u0bbf_\u0b9a\u0ba9\u0bbf".split("_"),weekdaysMin:"\u0b9e\u0bbe_\u0ba4\u0bbf_\u0b9a\u0bc6_\u0baa\u0bc1_\u0bb5\u0bbf_\u0bb5\u0bc6_\u0b9a".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, HH:mm",LLLL:"dddd, D MMMM YYYY, HH:mm"},calendar:{sameDay:"[\u0b87\u0ba9\u0bcd\u0bb1\u0bc1] LT",nextDay:"[\u0ba8\u0bbe\u0bb3\u0bc8] LT",nextWeek:"dddd, LT",lastDay:"[\u0ba8\u0bc7\u0bb1\u0bcd\u0bb1\u0bc1] LT",lastWeek:"[\u0b95\u0b9f\u0ba8\u0bcd\u0ba4 \u0bb5\u0bbe\u0bb0\u0bae\u0bcd] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0b87\u0bb2\u0bcd",past:"%s \u0bae\u0bc1\u0ba9\u0bcd",s:"\u0b92\u0bb0\u0bc1 \u0b9a\u0bbf\u0bb2 \u0bb5\u0bbf\u0ba8\u0bbe\u0b9f\u0bbf\u0b95\u0bb3\u0bcd",ss:"%d \u0bb5\u0bbf\u0ba8\u0bbe\u0b9f\u0bbf\u0b95\u0bb3\u0bcd",m:"\u0b92\u0bb0\u0bc1 \u0ba8\u0bbf\u0bae\u0bbf\u0b9f\u0bae\u0bcd",mm:"%d \u0ba8\u0bbf\u0bae\u0bbf\u0b9f\u0b99\u0bcd\u0b95\u0bb3\u0bcd",h:"\u0b92\u0bb0\u0bc1 \u0bae\u0ba3\u0bbf \u0ba8\u0bc7\u0bb0\u0bae\u0bcd",hh:"%d \u0bae\u0ba3\u0bbf \u0ba8\u0bc7\u0bb0\u0bae\u0bcd",d:"\u0b92\u0bb0\u0bc1 \u0ba8\u0bbe\u0bb3\u0bcd",dd:"%d \u0ba8\u0bbe\u0b9f\u0bcd\u0b95\u0bb3\u0bcd",M:"\u0b92\u0bb0\u0bc1 \u0bae\u0bbe\u0ba4\u0bae\u0bcd",MM:"%d \u0bae\u0bbe\u0ba4\u0b99\u0bcd\u0b95\u0bb3\u0bcd",y:"\u0b92\u0bb0\u0bc1 \u0bb5\u0bb0\u0bc1\u0b9f\u0bae\u0bcd",yy:"%d \u0b86\u0ba3\u0bcd\u0b9f\u0bc1\u0b95\u0bb3\u0bcd"},dayOfMonthOrdinalParse:/\d{1,2}\u0bb5\u0ba4\u0bc1/,ordinal:function(e){return e+"\u0bb5\u0ba4\u0bc1"},preparse:function(e){return e.replace(/[\u0be7\u0be8\u0be9\u0bea\u0beb\u0bec\u0bed\u0bee\u0bef\u0be6]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/\u0baf\u0bbe\u0bae\u0bae\u0bcd|\u0bb5\u0bc8\u0b95\u0bb1\u0bc8|\u0b95\u0bbe\u0bb2\u0bc8|\u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd|\u0b8e\u0bb1\u0bcd\u0baa\u0bbe\u0b9f\u0bc1|\u0bae\u0bbe\u0bb2\u0bc8/,meridiem:function(e,t,n){return e<2?" \u0baf\u0bbe\u0bae\u0bae\u0bcd":e<6?" \u0bb5\u0bc8\u0b95\u0bb1\u0bc8":e<10?" \u0b95\u0bbe\u0bb2\u0bc8":e<14?" \u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd":e<18?" \u0b8e\u0bb1\u0bcd\u0baa\u0bbe\u0b9f\u0bc1":e<22?" \u0bae\u0bbe\u0bb2\u0bc8":" \u0baf\u0bbe\u0bae\u0bae\u0bcd"},meridiemHour:function(e,t){return 12===e&&(e=0),"\u0baf\u0bbe\u0bae\u0bae\u0bcd"===t?e<2?e:e+12:"\u0bb5\u0bc8\u0b95\u0bb1\u0bc8"===t||"\u0b95\u0bbe\u0bb2\u0bc8"===t?e:"\u0ba8\u0ba3\u0bcd\u0baa\u0b95\u0bb2\u0bcd"===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(n("wd/R"))},PpIw:function(e,t,n){!function(e){"use strict";var t={1:"\u0ce7",2:"\u0ce8",3:"\u0ce9",4:"\u0cea",5:"\u0ceb",6:"\u0cec",7:"\u0ced",8:"\u0cee",9:"\u0cef",0:"\u0ce6"},n={"\u0ce7":"1","\u0ce8":"2","\u0ce9":"3","\u0cea":"4","\u0ceb":"5","\u0cec":"6","\u0ced":"7","\u0cee":"8","\u0cef":"9","\u0ce6":"0"};e.defineLocale("kn",{months:"\u0c9c\u0ca8\u0cb5\u0cb0\u0cbf_\u0cab\u0cc6\u0cac\u0ccd\u0cb0\u0cb5\u0cb0\u0cbf_\u0cae\u0cbe\u0cb0\u0ccd\u0c9a\u0ccd_\u0c8f\u0caa\u0ccd\u0cb0\u0cbf\u0cb2\u0ccd_\u0cae\u0cc6\u0cd5_\u0c9c\u0cc2\u0ca8\u0ccd_\u0c9c\u0cc1\u0cb2\u0cc6\u0cd6_\u0c86\u0c97\u0cb8\u0ccd\u0c9f\u0ccd_\u0cb8\u0cc6\u0caa\u0ccd\u0c9f\u0cc6\u0c82\u0cac\u0cb0\u0ccd_\u0c85\u0c95\u0ccd\u0c9f\u0cc6\u0cc2\u0cd5\u0cac\u0cb0\u0ccd_\u0ca8\u0cb5\u0cc6\u0c82\u0cac\u0cb0\u0ccd_\u0ca1\u0cbf\u0cb8\u0cc6\u0c82\u0cac\u0cb0\u0ccd".split("_"),monthsShort:"\u0c9c\u0ca8_\u0cab\u0cc6\u0cac\u0ccd\u0cb0_\u0cae\u0cbe\u0cb0\u0ccd\u0c9a\u0ccd_\u0c8f\u0caa\u0ccd\u0cb0\u0cbf\u0cb2\u0ccd_\u0cae\u0cc6\u0cd5_\u0c9c\u0cc2\u0ca8\u0ccd_\u0c9c\u0cc1\u0cb2\u0cc6\u0cd6_\u0c86\u0c97\u0cb8\u0ccd\u0c9f\u0ccd_\u0cb8\u0cc6\u0caa\u0ccd\u0c9f\u0cc6\u0c82_\u0c85\u0c95\u0ccd\u0c9f\u0cc6\u0cc2\u0cd5_\u0ca8\u0cb5\u0cc6\u0c82_\u0ca1\u0cbf\u0cb8\u0cc6\u0c82".split("_"),monthsParseExact:!0,weekdays:"\u0cad\u0cbe\u0ca8\u0cc1\u0cb5\u0cbe\u0cb0_\u0cb8\u0cc6\u0cc2\u0cd5\u0cae\u0cb5\u0cbe\u0cb0_\u0cae\u0c82\u0c97\u0cb3\u0cb5\u0cbe\u0cb0_\u0cac\u0cc1\u0ca7\u0cb5\u0cbe\u0cb0_\u0c97\u0cc1\u0cb0\u0cc1\u0cb5\u0cbe\u0cb0_\u0cb6\u0cc1\u0c95\u0ccd\u0cb0\u0cb5\u0cbe\u0cb0_\u0cb6\u0ca8\u0cbf\u0cb5\u0cbe\u0cb0".split("_"),weekdaysShort:"\u0cad\u0cbe\u0ca8\u0cc1_\u0cb8\u0cc6\u0cc2\u0cd5\u0cae_\u0cae\u0c82\u0c97\u0cb3_\u0cac\u0cc1\u0ca7_\u0c97\u0cc1\u0cb0\u0cc1_\u0cb6\u0cc1\u0c95\u0ccd\u0cb0_\u0cb6\u0ca8\u0cbf".split("_"),weekdaysMin:"\u0cad\u0cbe_\u0cb8\u0cc6\u0cc2\u0cd5_\u0cae\u0c82_\u0cac\u0cc1_\u0c97\u0cc1_\u0cb6\u0cc1_\u0cb6".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[\u0c87\u0c82\u0ca6\u0cc1] LT",nextDay:"[\u0ca8\u0cbe\u0cb3\u0cc6] LT",nextWeek:"dddd, LT",lastDay:"[\u0ca8\u0cbf\u0ca8\u0ccd\u0ca8\u0cc6] LT",lastWeek:"[\u0c95\u0cc6\u0cc2\u0ca8\u0cc6\u0caf] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0ca8\u0c82\u0ca4\u0cb0",past:"%s \u0cb9\u0cbf\u0c82\u0ca6\u0cc6",s:"\u0c95\u0cc6\u0cb2\u0cb5\u0cc1 \u0c95\u0ccd\u0cb7\u0ca3\u0c97\u0cb3\u0cc1",ss:"%d \u0cb8\u0cc6\u0c95\u0cc6\u0c82\u0ca1\u0cc1\u0c97\u0cb3\u0cc1",m:"\u0c92\u0c82\u0ca6\u0cc1 \u0ca8\u0cbf\u0cae\u0cbf\u0cb7",mm:"%d \u0ca8\u0cbf\u0cae\u0cbf\u0cb7",h:"\u0c92\u0c82\u0ca6\u0cc1 \u0c97\u0c82\u0c9f\u0cc6",hh:"%d \u0c97\u0c82\u0c9f\u0cc6",d:"\u0c92\u0c82\u0ca6\u0cc1 \u0ca6\u0cbf\u0ca8",dd:"%d \u0ca6\u0cbf\u0ca8",M:"\u0c92\u0c82\u0ca6\u0cc1 \u0ca4\u0cbf\u0c82\u0c97\u0cb3\u0cc1",MM:"%d \u0ca4\u0cbf\u0c82\u0c97\u0cb3\u0cc1",y:"\u0c92\u0c82\u0ca6\u0cc1 \u0cb5\u0cb0\u0ccd\u0cb7",yy:"%d \u0cb5\u0cb0\u0ccd\u0cb7"},preparse:function(e){return e.replace(/[\u0ce7\u0ce8\u0ce9\u0cea\u0ceb\u0cec\u0ced\u0cee\u0cef\u0ce6]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf|\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6|\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8|\u0cb8\u0c82\u0c9c\u0cc6/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf"===t?e<4?e:e+12:"\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6"===t?e:"\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8"===t?e>=10?e:e+12:"\u0cb8\u0c82\u0c9c\u0cc6"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf":e<10?"\u0cac\u0cc6\u0cb3\u0cbf\u0c97\u0ccd\u0c97\u0cc6":e<17?"\u0cae\u0ca7\u0ccd\u0caf\u0cbe\u0cb9\u0ccd\u0ca8":e<20?"\u0cb8\u0c82\u0c9c\u0cc6":"\u0cb0\u0cbe\u0ca4\u0ccd\u0cb0\u0cbf"},dayOfMonthOrdinalParse:/\d{1,2}(\u0ca8\u0cc6\u0cd5)/,ordinal:function(e){return e+"\u0ca8\u0cc6\u0cd5"},week:{dow:0,doy:6}})}(n("wd/R"))},Qj4J:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ar-kw",{months:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),monthsShort:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648\u0632_\u063a\u0634\u062a_\u0634\u062a\u0646\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0646\u0628\u0631_\u062f\u062c\u0646\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062a\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0627\u062d\u062f_\u0627\u062a\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},week:{dow:0,doy:12}})}()},RAwQ:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?i[n][0]:i[n][1]}function r(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10;return r(0===t?e/10:t)}if(e<1e4){for(;e>=10;)e/=10;return r(e)}return r(e/=1e3)}n("wd/R").defineLocale("lb",{months:"Januar_Februar_M\xe4erz_Abr\xebll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonndeg_M\xe9indeg_D\xebnschdeg_M\xebttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M\xe9._D\xeb._M\xeb._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M\xe9_D\xeb_M\xeb_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm [Auer]",LLLL:"dddd, D. MMMM YYYY H:mm [Auer]"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[G\xebschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:function(e){return r(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e},past:function(e){return r(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e},s:"e puer Sekonnen",ss:"%d Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d M\xe9int",y:t,yy:"%d Joer"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},RnhZ:function(e,t,n){var r={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-SG":"zavE","./en-SG.js":"zavE","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="RnhZ"},S5XQ:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("DKTb"),i=function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,r.a),t}}},S6ln:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=e+" ";switch(n){case"ss":return r+(1===e?"sekunda":2===e||3===e||4===e?"sekunde":"sekundi");case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+(1===e?"minuta":2===e||3===e||4===e?"minute":"minuta");case"h":return t?"jedan sat":"jednog sata";case"hh":return r+(1===e?"sat":2===e||3===e||4===e?"sata":"sati");case"dd":return r+(1===e?"dan":"dana");case"MM":return r+(1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci");case"yy":return r+(1===e?"godina":2===e||3===e||4===e?"godine":"godina")}}n("wd/R").defineLocale("hr",{months:{format:"sije\u010dnja_velja\u010de_o\u017eujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca".split("_"),standalone:"sije\u010danj_velja\u010da_o\u017eujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_")},monthsShort:"sij._velj._o\u017eu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),monthsParseExact:!0,weekdays:"nedjelja_ponedjeljak_utorak_srijeda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010der u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[pro\u0161lu] dddd [u] LT";case 6:return"[pro\u0161le] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[pro\u0161li] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",ss:t,m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}()},SFxW:function(e,t,n){!function(e){"use strict";var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-\xfcnc\xfc",4:"-\xfcnc\xfc",100:"-\xfcnc\xfc",6:"-nc\u0131",9:"-uncu",10:"-uncu",30:"-uncu",60:"-\u0131nc\u0131",90:"-\u0131nc\u0131"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ert\u0259si_\xc7\u0259r\u015f\u0259nb\u0259 ax\u015fam\u0131_\xc7\u0259r\u015f\u0259nb\u0259_C\xfcm\u0259 ax\u015fam\u0131_C\xfcm\u0259_\u015e\u0259nb\u0259".split("_"),weekdaysShort:"Baz_BzE_\xc7Ax_\xc7\u0259r_CAx_C\xfcm_\u015e\u0259n".split("_"),weekdaysMin:"Bz_BE_\xc7A_\xc7\u0259_CA_C\xfc_\u015e\u0259".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[bug\xfcn saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[g\u0259l\u0259n h\u0259ft\u0259] dddd [saat] LT",lastDay:"[d\xfcn\u0259n] LT",lastWeek:"[ke\xe7\u0259n h\u0259ft\u0259] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s \u0259vv\u0259l",s:"birne\xe7\u0259 saniy\u0259",ss:"%d saniy\u0259",m:"bir d\u0259qiq\u0259",mm:"%d d\u0259qiq\u0259",h:"bir saat",hh:"%d saat",d:"bir g\xfcn",dd:"%d g\xfcn",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gec\u0259|s\u0259h\u0259r|g\xfcnd\xfcz|ax\u015fam/,isPM:function(e){return/^(g\xfcnd\xfcz|ax\u015fam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gec\u0259":e<12?"s\u0259h\u0259r":e<17?"g\xfcnd\xfcz":"ax\u015fam"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0131nc\u0131|inci|nci|\xfcnc\xfc|nc\u0131|uncu)/,ordinal:function(e){if(0===e)return e+"-\u0131nc\u0131";var n=e%10;return e+(t[n]||t[e%100-n]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n("wd/R"))},SatO:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("zh-hk",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u9031\u65e5_\u9031\u4e00_\u9031\u4e8c_\u9031\u4e09_\u9031\u56db_\u9031\u4e94_\u9031\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u51cc\u6668"===t||"\u65e9\u4e0a"===t||"\u4e0a\u5348"===t?e:"\u4e2d\u5348"===t?e>=11?e:e+12:"\u4e0b\u5348"===t||"\u665a\u4e0a"===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"\u51cc\u6668":r<900?"\u65e9\u4e0a":r<1130?"\u4e0a\u5348":r<1230?"\u4e2d\u5348":r<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929]LT",nextDay:"[\u660e\u5929]LT",nextWeek:"[\u4e0b]ddddLT",lastDay:"[\u6628\u5929]LT",lastWeek:"[\u4e0a]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"\u65e5";case"M":return e+"\u6708";case"w":case"W":return e+"\u9031";default:return e}},relativeTime:{future:"%s\u5167",past:"%s\u524d",s:"\u5e7e\u79d2",ss:"%d \u79d2",m:"1 \u5206\u9418",mm:"%d \u5206\u9418",h:"1 \u5c0f\u6642",hh:"%d \u5c0f\u6642",d:"1 \u5929",dd:"%d \u5929",M:"1 \u500b\u6708",MM:"%d \u500b\u6708",y:"1 \u5e74",yy:"%d \u5e74"}})}()},UDhR:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Agt_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",ss:"%d detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}()},USCx:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ga",{months:["Ean\xe1ir","Feabhra","M\xe1rta","Aibre\xe1n","Bealtaine","M\xe9itheamh","I\xfail","L\xfanasa","Me\xe1n F\xf3mhair","Deaireadh F\xf3mhair","Samhain","Nollaig"],monthsShort:["Ean\xe1","Feab","M\xe1rt","Aibr","Beal","M\xe9it","I\xfail","L\xfana","Me\xe1n","Deai","Samh","Noll"],monthsParseExact:!0,weekdays:["D\xe9 Domhnaigh","D\xe9 Luain","D\xe9 M\xe1irt","D\xe9 C\xe9adaoin","D\xe9ardaoin","D\xe9 hAoine","D\xe9 Satharn"],weekdaysShort:["Dom","Lua","M\xe1i","C\xe9a","D\xe9a","hAo","Sat"],weekdaysMin:["Do","Lu","M\xe1","Ce","D\xe9","hA","Sa"],longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Inniu ag] LT",nextDay:"[Am\xe1rach ag] LT",nextWeek:"dddd [ag] LT",lastDay:"[Inn\xe9 aig] LT",lastWeek:"dddd [seo caite] [ag] LT",sameElse:"L"},relativeTime:{future:"i %s",past:"%s \xf3 shin",s:"c\xfapla soicind",ss:"%d soicind",m:"n\xf3im\xe9ad",mm:"%d n\xf3im\xe9ad",h:"uair an chloig",hh:"%d uair an chloig",d:"l\xe1",dd:"%d l\xe1",M:"m\xed",MM:"%d m\xed",y:"bliain",yy:"%d bliain"},dayOfMonthOrdinalParse:/\d{1,2}(d|na|mh)/,ordinal:function(e){return e+(1===e?"d":e%10==2?"na":"mh")},week:{dow:1,doy:4}})}()},UpQW:function(e,t,n){!function(e){"use strict";var t=["\u062c\u0646\u0648\u0631\u06cc","\u0641\u0631\u0648\u0631\u06cc","\u0645\u0627\u0631\u0686","\u0627\u067e\u0631\u06cc\u0644","\u0645\u0626\u06cc","\u062c\u0648\u0646","\u062c\u0648\u0644\u0627\u0626\u06cc","\u0627\u06af\u0633\u062a","\u0633\u062a\u0645\u0628\u0631","\u0627\u06a9\u062a\u0648\u0628\u0631","\u0646\u0648\u0645\u0628\u0631","\u062f\u0633\u0645\u0628\u0631"],r=["\u0627\u062a\u0648\u0627\u0631","\u067e\u06cc\u0631","\u0645\u0646\u06af\u0644","\u0628\u062f\u06be","\u062c\u0645\u0639\u0631\u0627\u062a","\u062c\u0645\u0639\u06c1","\u06c1\u0641\u062a\u06c1"];n("wd/R").defineLocale("ur",{months:t,monthsShort:t,weekdays:r,weekdaysShort:r,weekdaysMin:r,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd\u060c D MMMM YYYY HH:mm"},meridiemParse:/\u0635\u0628\u062d|\u0634\u0627\u0645/,isPM:function(e){return"\u0634\u0627\u0645"===e},meridiem:function(e,t,n){return e<12?"\u0635\u0628\u062d":"\u0634\u0627\u0645"},calendar:{sameDay:"[\u0622\u062c \u0628\u0648\u0642\u062a] LT",nextDay:"[\u06a9\u0644 \u0628\u0648\u0642\u062a] LT",nextWeek:"dddd [\u0628\u0648\u0642\u062a] LT",lastDay:"[\u06af\u0630\u0634\u062a\u06c1 \u0631\u0648\u0632 \u0628\u0648\u0642\u062a] LT",lastWeek:"[\u06af\u0630\u0634\u062a\u06c1] dddd [\u0628\u0648\u0642\u062a] LT",sameElse:"L"},relativeTime:{future:"%s \u0628\u0639\u062f",past:"%s \u0642\u0628\u0644",s:"\u0686\u0646\u062f \u0633\u06cc\u06a9\u0646\u0688",ss:"%d \u0633\u06cc\u06a9\u0646\u0688",m:"\u0627\u06cc\u06a9 \u0645\u0646\u0679",mm:"%d \u0645\u0646\u0679",h:"\u0627\u06cc\u06a9 \u06af\u06be\u0646\u0679\u06c1",hh:"%d \u06af\u06be\u0646\u0679\u06d2",d:"\u0627\u06cc\u06a9 \u062f\u0646",dd:"%d \u062f\u0646",M:"\u0627\u06cc\u06a9 \u0645\u0627\u06c1",MM:"%d \u0645\u0627\u06c1",y:"\u0627\u06cc\u06a9 \u0633\u0627\u0644",yy:"%d \u0633\u0627\u0644"},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"\u060c")},week:{dow:1,doy:4}})}()},Ur1D:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ss",{months:"Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split("_"),monthsShort:"Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo".split("_"),weekdays:"Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo".split("_"),weekdaysShort:"Lis_Umb_Lsb_Les_Lsi_Lsh_Umg".split("_"),weekdaysMin:"Li_Us_Lb_Lt_Ls_Lh_Ug".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Namuhla nga] LT",nextDay:"[Kusasa nga] LT",nextWeek:"dddd [nga] LT",lastDay:"[Itolo nga] LT",lastWeek:"dddd [leliphelile] [nga] LT",sameElse:"L"},relativeTime:{future:"nga %s",past:"wenteka nga %s",s:"emizuzwana lomcane",ss:"%d mzuzwana",m:"umzuzu",mm:"%d emizuzu",h:"lihora",hh:"%d emahora",d:"lilanga",dd:"%d emalanga",M:"inyanga",MM:"%d tinyanga",y:"umnyaka",yy:"%d iminyaka"},meridiemParse:/ekuseni|emini|entsambama|ebusuku/,meridiem:function(e,t,n){return e<11?"ekuseni":e<15?"emini":e<19?"entsambama":"ebusuku"},meridiemHour:function(e,t){return 12===e&&(e=0),"ekuseni"===t?e:"emini"===t?e>=11?e:e+12:"entsambama"===t||"ebusuku"===t?0===e?0:e+12:void 0},dayOfMonthOrdinalParse:/\d{1,2}/,ordinal:"%d",week:{dow:1,doy:4}})}()},V2x9:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("tet",{months:"Janeiru_Fevereiru_Marsu_Abril_Maiu_Ju\xf1u_Jullu_Agustu_Setembru_Outubru_Novembru_Dezembru".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),weekdays:"Domingu_Segunda_Tersa_Kuarta_Kinta_Sesta_Sabadu".split("_"),weekdaysShort:"Dom_Seg_Ters_Kua_Kint_Sest_Sab".split("_"),weekdaysMin:"Do_Seg_Te_Ku_Ki_Ses_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Ohin iha] LT",nextDay:"[Aban iha] LT",nextWeek:"dddd [iha] LT",lastDay:"[Horiseik iha] LT",lastWeek:"dddd [semana kotuk] [iha] LT",sameElse:"L"},relativeTime:{future:"iha %s",past:"%s liuba",s:"minutu balun",ss:"minutu %d",m:"minutu ida",mm:"minutu %d",h:"oras ida",hh:"oras %d",d:"loron ida",dd:"loron %d",M:"fulan ida",MM:"fulan %d",y:"tinan ida",yy:"tinan %d"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}()},Vclq:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es-us",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"MM/DD/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY h:mm A",LLLL:"dddd, D [de] MMMM [de] YYYY h:mm A"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:0,doy:6}})}(n("wd/R"))},WYrj:function(e,t,n){!function(e){"use strict";var t=["\u0796\u07ac\u0782\u07aa\u0787\u07a6\u0783\u07a9","\u078a\u07ac\u0784\u07b0\u0783\u07aa\u0787\u07a6\u0783\u07a9","\u0789\u07a7\u0783\u07a8\u0797\u07aa","\u0787\u07ad\u0795\u07b0\u0783\u07a9\u078d\u07aa","\u0789\u07ad","\u0796\u07ab\u0782\u07b0","\u0796\u07aa\u078d\u07a6\u0787\u07a8","\u0787\u07af\u078e\u07a6\u0790\u07b0\u0793\u07aa","\u0790\u07ac\u0795\u07b0\u0793\u07ac\u0789\u07b0\u0784\u07a6\u0783\u07aa","\u0787\u07ae\u0786\u07b0\u0793\u07af\u0784\u07a6\u0783\u07aa","\u0782\u07ae\u0788\u07ac\u0789\u07b0\u0784\u07a6\u0783\u07aa","\u0791\u07a8\u0790\u07ac\u0789\u07b0\u0784\u07a6\u0783\u07aa"],r=["\u0787\u07a7\u078b\u07a8\u0787\u07b0\u078c\u07a6","\u0780\u07af\u0789\u07a6","\u0787\u07a6\u0782\u07b0\u078e\u07a7\u0783\u07a6","\u0784\u07aa\u078b\u07a6","\u0784\u07aa\u0783\u07a7\u0790\u07b0\u078a\u07a6\u078c\u07a8","\u0780\u07aa\u0786\u07aa\u0783\u07aa","\u0780\u07ae\u0782\u07a8\u0780\u07a8\u0783\u07aa"];n("wd/R").defineLocale("dv",{months:t,monthsShort:t,weekdays:r,weekdaysShort:r,weekdaysMin:"\u0787\u07a7\u078b\u07a8_\u0780\u07af\u0789\u07a6_\u0787\u07a6\u0782\u07b0_\u0784\u07aa\u078b\u07a6_\u0784\u07aa\u0783\u07a7_\u0780\u07aa\u0786\u07aa_\u0780\u07ae\u0782\u07a8".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/M/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0789\u0786|\u0789\u078a/,isPM:function(e){return"\u0789\u078a"===e},meridiem:function(e,t,n){return e<12?"\u0789\u0786":"\u0789\u078a"},calendar:{sameDay:"[\u0789\u07a8\u0787\u07a6\u078b\u07aa] LT",nextDay:"[\u0789\u07a7\u078b\u07a6\u0789\u07a7] LT",nextWeek:"dddd LT",lastDay:"[\u0787\u07a8\u0787\u07b0\u0794\u07ac] LT",lastWeek:"[\u078a\u07a7\u0787\u07a8\u078c\u07aa\u0788\u07a8] dddd LT",sameElse:"L"},relativeTime:{future:"\u078c\u07ac\u0783\u07ad\u078e\u07a6\u0787\u07a8 %s",past:"\u0786\u07aa\u0783\u07a8\u0782\u07b0 %s",s:"\u0790\u07a8\u0786\u07aa\u0782\u07b0\u078c\u07aa\u0786\u07ae\u0785\u07ac\u0787\u07b0",ss:"d% \u0790\u07a8\u0786\u07aa\u0782\u07b0\u078c\u07aa",m:"\u0789\u07a8\u0782\u07a8\u0793\u07ac\u0787\u07b0",mm:"\u0789\u07a8\u0782\u07a8\u0793\u07aa %d",h:"\u078e\u07a6\u0791\u07a8\u0787\u07a8\u0783\u07ac\u0787\u07b0",hh:"\u078e\u07a6\u0791\u07a8\u0787\u07a8\u0783\u07aa %d",d:"\u078b\u07aa\u0788\u07a6\u0780\u07ac\u0787\u07b0",dd:"\u078b\u07aa\u0788\u07a6\u0790\u07b0 %d",M:"\u0789\u07a6\u0780\u07ac\u0787\u07b0",MM:"\u0789\u07a6\u0790\u07b0 %d",y:"\u0787\u07a6\u0780\u07a6\u0783\u07ac\u0787\u07b0",yy:"\u0787\u07a6\u0780\u07a6\u0783\u07aa %d"},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"\u060c")},week:{dow:7,doy:12}})}()},WxRl:function(e,t,n){!function(e){"use strict";var t="vas\xe1rnap h\xe9tf\u0151n kedden szerd\xe1n cs\xfct\xf6rt\xf6k\xf6n p\xe9nteken szombaton".split(" ");function n(e,t,n,r){var i=e;switch(n){case"s":return r||t?"n\xe9h\xe1ny m\xe1sodperc":"n\xe9h\xe1ny m\xe1sodperce";case"ss":return i+(r||t)?" m\xe1sodperc":" m\xe1sodperce";case"m":return"egy"+(r||t?" perc":" perce");case"mm":return i+(r||t?" perc":" perce");case"h":return"egy"+(r||t?" \xf3ra":" \xf3r\xe1ja");case"hh":return i+(r||t?" \xf3ra":" \xf3r\xe1ja");case"d":return"egy"+(r||t?" nap":" napja");case"dd":return i+(r||t?" nap":" napja");case"M":return"egy"+(r||t?" h\xf3nap":" h\xf3napja");case"MM":return i+(r||t?" h\xf3nap":" h\xf3napja");case"y":return"egy"+(r||t?" \xe9v":" \xe9ve");case"yy":return i+(r||t?" \xe9v":" \xe9ve")}return""}function r(e){return(e?"":"[m\xfalt] ")+"["+t[this.day()]+"] LT[-kor]"}e.defineLocale("hu",{months:"janu\xe1r_febru\xe1r_m\xe1rcius_\xe1prilis_m\xe1jus_j\xfanius_j\xfalius_augusztus_szeptember_okt\xf3ber_november_december".split("_"),monthsShort:"jan_feb_m\xe1rc_\xe1pr_m\xe1j_j\xfan_j\xfal_aug_szept_okt_nov_dec".split("_"),weekdays:"vas\xe1rnap_h\xe9tf\u0151_kedd_szerda_cs\xfct\xf6rt\xf6k_p\xe9ntek_szombat".split("_"),weekdaysShort:"vas_h\xe9t_kedd_sze_cs\xfct_p\xe9n_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D. H:mm",LLLL:"YYYY. MMMM D., dddd H:mm"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return r.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return r.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s m\xfalva",past:"%s",s:n,ss:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n("wd/R"))},X709:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"s\xf6ndag_m\xe5ndag_tisdag_onsdag_torsdag_fredag_l\xf6rdag".split("_"),weekdaysShort:"s\xf6n_m\xe5n_tis_ons_tor_fre_l\xf6r".split("_"),weekdaysMin:"s\xf6_m\xe5_ti_on_to_fr_l\xf6".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [kl.] HH:mm",LLLL:"dddd D MMMM YYYY [kl.] HH:mm",lll:"D MMM YYYY HH:mm",llll:"ddd D MMM YYYY HH:mm"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Ig\xe5r] LT",nextWeek:"[P\xe5] dddd LT",lastWeek:"[I] dddd[s] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"f\xf6r %s sedan",s:"n\xe5gra sekunder",ss:"%d sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en m\xe5nad",MM:"%d m\xe5nader",y:"ett \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t?"a":2===t?"a":"e")},week:{dow:1,doy:4}})}()},XDpg:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("zh-cn",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u5468\u65e5_\u5468\u4e00_\u5468\u4e8c_\u5468\u4e09_\u5468\u56db_\u5468\u4e94_\u5468\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u70b9mm\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5ddddAh\u70b9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u51cc\u6668"===t||"\u65e9\u4e0a"===t||"\u4e0a\u5348"===t?e:"\u4e0b\u5348"===t||"\u665a\u4e0a"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"\u51cc\u6668":r<900?"\u65e9\u4e0a":r<1130?"\u4e0a\u5348":r<1230?"\u4e2d\u5348":r<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929]LT",nextDay:"[\u660e\u5929]LT",nextWeek:"[\u4e0b]ddddLT",lastDay:"[\u6628\u5929]LT",lastWeek:"[\u4e0a]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u5468)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"\u65e5";case"M":return e+"\u6708";case"w":case"W":return e+"\u5468";default:return e}},relativeTime:{future:"%s\u5185",past:"%s\u524d",s:"\u51e0\u79d2",ss:"%d \u79d2",m:"1 \u5206\u949f",mm:"%d \u5206\u949f",h:"1 \u5c0f\u65f6",hh:"%d \u5c0f\u65f6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4e2a\u6708",MM:"%d \u4e2a\u6708",y:"1 \u5e74",yy:"%d \u5e74"},week:{dow:1,doy:4}})}()},XLvN:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("te",{months:"\u0c1c\u0c28\u0c35\u0c30\u0c3f_\u0c2b\u0c3f\u0c2c\u0c4d\u0c30\u0c35\u0c30\u0c3f_\u0c2e\u0c3e\u0c30\u0c4d\u0c1a\u0c3f_\u0c0f\u0c2a\u0c4d\u0c30\u0c3f\u0c32\u0c4d_\u0c2e\u0c47_\u0c1c\u0c42\u0c28\u0c4d_\u0c1c\u0c41\u0c32\u0c48_\u0c06\u0c17\u0c38\u0c4d\u0c1f\u0c41_\u0c38\u0c46\u0c2a\u0c4d\u0c1f\u0c46\u0c02\u0c2c\u0c30\u0c4d_\u0c05\u0c15\u0c4d\u0c1f\u0c4b\u0c2c\u0c30\u0c4d_\u0c28\u0c35\u0c02\u0c2c\u0c30\u0c4d_\u0c21\u0c3f\u0c38\u0c46\u0c02\u0c2c\u0c30\u0c4d".split("_"),monthsShort:"\u0c1c\u0c28._\u0c2b\u0c3f\u0c2c\u0c4d\u0c30._\u0c2e\u0c3e\u0c30\u0c4d\u0c1a\u0c3f_\u0c0f\u0c2a\u0c4d\u0c30\u0c3f._\u0c2e\u0c47_\u0c1c\u0c42\u0c28\u0c4d_\u0c1c\u0c41\u0c32\u0c48_\u0c06\u0c17._\u0c38\u0c46\u0c2a\u0c4d._\u0c05\u0c15\u0c4d\u0c1f\u0c4b._\u0c28\u0c35._\u0c21\u0c3f\u0c38\u0c46.".split("_"),monthsParseExact:!0,weekdays:"\u0c06\u0c26\u0c3f\u0c35\u0c3e\u0c30\u0c02_\u0c38\u0c4b\u0c2e\u0c35\u0c3e\u0c30\u0c02_\u0c2e\u0c02\u0c17\u0c33\u0c35\u0c3e\u0c30\u0c02_\u0c2c\u0c41\u0c27\u0c35\u0c3e\u0c30\u0c02_\u0c17\u0c41\u0c30\u0c41\u0c35\u0c3e\u0c30\u0c02_\u0c36\u0c41\u0c15\u0c4d\u0c30\u0c35\u0c3e\u0c30\u0c02_\u0c36\u0c28\u0c3f\u0c35\u0c3e\u0c30\u0c02".split("_"),weekdaysShort:"\u0c06\u0c26\u0c3f_\u0c38\u0c4b\u0c2e_\u0c2e\u0c02\u0c17\u0c33_\u0c2c\u0c41\u0c27_\u0c17\u0c41\u0c30\u0c41_\u0c36\u0c41\u0c15\u0c4d\u0c30_\u0c36\u0c28\u0c3f".split("_"),weekdaysMin:"\u0c06_\u0c38\u0c4b_\u0c2e\u0c02_\u0c2c\u0c41_\u0c17\u0c41_\u0c36\u0c41_\u0c36".split("_"),longDateFormat:{LT:"A h:mm",LTS:"A h:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm",LLLL:"dddd, D MMMM YYYY, A h:mm"},calendar:{sameDay:"[\u0c28\u0c47\u0c21\u0c41] LT",nextDay:"[\u0c30\u0c47\u0c2a\u0c41] LT",nextWeek:"dddd, LT",lastDay:"[\u0c28\u0c3f\u0c28\u0c4d\u0c28] LT",lastWeek:"[\u0c17\u0c24] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u0c32\u0c4b",past:"%s \u0c15\u0c4d\u0c30\u0c3f\u0c24\u0c02",s:"\u0c15\u0c4a\u0c28\u0c4d\u0c28\u0c3f \u0c15\u0c4d\u0c37\u0c23\u0c3e\u0c32\u0c41",ss:"%d \u0c38\u0c46\u0c15\u0c28\u0c4d\u0c32\u0c41",m:"\u0c12\u0c15 \u0c28\u0c3f\u0c2e\u0c3f\u0c37\u0c02",mm:"%d \u0c28\u0c3f\u0c2e\u0c3f\u0c37\u0c3e\u0c32\u0c41",h:"\u0c12\u0c15 \u0c17\u0c02\u0c1f",hh:"%d \u0c17\u0c02\u0c1f\u0c32\u0c41",d:"\u0c12\u0c15 \u0c30\u0c4b\u0c1c\u0c41",dd:"%d \u0c30\u0c4b\u0c1c\u0c41\u0c32\u0c41",M:"\u0c12\u0c15 \u0c28\u0c46\u0c32",MM:"%d \u0c28\u0c46\u0c32\u0c32\u0c41",y:"\u0c12\u0c15 \u0c38\u0c02\u0c35\u0c24\u0c4d\u0c38\u0c30\u0c02",yy:"%d \u0c38\u0c02\u0c35\u0c24\u0c4d\u0c38\u0c30\u0c3e\u0c32\u0c41"},dayOfMonthOrdinalParse:/\d{1,2}\u0c35/,ordinal:"%d\u0c35",meridiemParse:/\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f|\u0c09\u0c26\u0c2f\u0c02|\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02|\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f"===t?e<4?e:e+12:"\u0c09\u0c26\u0c2f\u0c02"===t?e:"\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02"===t?e>=10?e:e+12:"\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f":e<10?"\u0c09\u0c26\u0c2f\u0c02":e<17?"\u0c2e\u0c27\u0c4d\u0c2f\u0c3e\u0c39\u0c4d\u0c28\u0c02":e<20?"\u0c38\u0c3e\u0c2f\u0c02\u0c24\u0c4d\u0c30\u0c02":"\u0c30\u0c3e\u0c24\u0c4d\u0c30\u0c3f"},week:{dow:0,doy:6}})}()},YRex:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ug-cn",{months:"\u064a\u0627\u0646\u06cb\u0627\u0631_\u0641\u06d0\u06cb\u0631\u0627\u0644_\u0645\u0627\u0631\u062a_\u0626\u0627\u067e\u0631\u06d0\u0644_\u0645\u0627\u064a_\u0626\u0649\u064a\u06c7\u0646_\u0626\u0649\u064a\u06c7\u0644_\u0626\u0627\u06cb\u063a\u06c7\u0633\u062a_\u0633\u06d0\u0646\u062a\u06d5\u0628\u0649\u0631_\u0626\u06c6\u0643\u062a\u06d5\u0628\u0649\u0631_\u0646\u0648\u064a\u0627\u0628\u0649\u0631_\u062f\u06d0\u0643\u0627\u0628\u0649\u0631".split("_"),monthsShort:"\u064a\u0627\u0646\u06cb\u0627\u0631_\u0641\u06d0\u06cb\u0631\u0627\u0644_\u0645\u0627\u0631\u062a_\u0626\u0627\u067e\u0631\u06d0\u0644_\u0645\u0627\u064a_\u0626\u0649\u064a\u06c7\u0646_\u0626\u0649\u064a\u06c7\u0644_\u0626\u0627\u06cb\u063a\u06c7\u0633\u062a_\u0633\u06d0\u0646\u062a\u06d5\u0628\u0649\u0631_\u0626\u06c6\u0643\u062a\u06d5\u0628\u0649\u0631_\u0646\u0648\u064a\u0627\u0628\u0649\u0631_\u062f\u06d0\u0643\u0627\u0628\u0649\u0631".split("_"),weekdays:"\u064a\u06d5\u0643\u0634\u06d5\u0646\u0628\u06d5_\u062f\u06c8\u0634\u06d5\u0646\u0628\u06d5_\u0633\u06d5\u064a\u0634\u06d5\u0646\u0628\u06d5_\u0686\u0627\u0631\u0634\u06d5\u0646\u0628\u06d5_\u067e\u06d5\u064a\u0634\u06d5\u0646\u0628\u06d5_\u062c\u06c8\u0645\u06d5_\u0634\u06d5\u0646\u0628\u06d5".split("_"),weekdaysShort:"\u064a\u06d5_\u062f\u06c8_\u0633\u06d5_\u0686\u0627_\u067e\u06d5_\u062c\u06c8_\u0634\u06d5".split("_"),weekdaysMin:"\u064a\u06d5_\u062f\u06c8_\u0633\u06d5_\u0686\u0627_\u067e\u06d5_\u062c\u06c8_\u0634\u06d5".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY-\u064a\u0649\u0644\u0649M-\u0626\u0627\u064a\u0646\u0649\u06adD-\u0643\u06c8\u0646\u0649",LLL:"YYYY-\u064a\u0649\u0644\u0649M-\u0626\u0627\u064a\u0646\u0649\u06adD-\u0643\u06c8\u0646\u0649\u060c HH:mm",LLLL:"dddd\u060c YYYY-\u064a\u0649\u0644\u0649M-\u0626\u0627\u064a\u0646\u0649\u06adD-\u0643\u06c8\u0646\u0649\u060c HH:mm"},meridiemParse:/\u064a\u06d0\u0631\u0649\u0645 \u0643\u06d0\u0686\u06d5|\u0633\u06d5\u06be\u06d5\u0631|\u0686\u06c8\u0634\u062a\u0649\u0646 \u0628\u06c7\u0631\u06c7\u0646|\u0686\u06c8\u0634|\u0686\u06c8\u0634\u062a\u0649\u0646 \u0643\u06d0\u064a\u0649\u0646|\u0643\u06d5\u0686/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u064a\u06d0\u0631\u0649\u0645 \u0643\u06d0\u0686\u06d5"===t||"\u0633\u06d5\u06be\u06d5\u0631"===t||"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0628\u06c7\u0631\u06c7\u0646"===t?e:"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0643\u06d0\u064a\u0649\u0646"===t||"\u0643\u06d5\u0686"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"\u064a\u06d0\u0631\u0649\u0645 \u0643\u06d0\u0686\u06d5":r<900?"\u0633\u06d5\u06be\u06d5\u0631":r<1130?"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0628\u06c7\u0631\u06c7\u0646":r<1230?"\u0686\u06c8\u0634":r<1800?"\u0686\u06c8\u0634\u062a\u0649\u0646 \u0643\u06d0\u064a\u0649\u0646":"\u0643\u06d5\u0686"},calendar:{sameDay:"[\u0628\u06c8\u06af\u06c8\u0646 \u0633\u0627\u0626\u06d5\u062a] LT",nextDay:"[\u0626\u06d5\u062a\u06d5 \u0633\u0627\u0626\u06d5\u062a] LT",nextWeek:"[\u0643\u06d0\u0644\u06d5\u0631\u0643\u0649] dddd [\u0633\u0627\u0626\u06d5\u062a] LT",lastDay:"[\u062a\u06c6\u0646\u06c8\u06af\u06c8\u0646] LT",lastWeek:"[\u0626\u0627\u0644\u062f\u0649\u0646\u0642\u0649] dddd [\u0633\u0627\u0626\u06d5\u062a] LT",sameElse:"L"},relativeTime:{future:"%s \u0643\u06d0\u064a\u0649\u0646",past:"%s \u0628\u06c7\u0631\u06c7\u0646",s:"\u0646\u06d5\u0686\u0686\u06d5 \u0633\u06d0\u0643\u0648\u0646\u062a",ss:"%d \u0633\u06d0\u0643\u0648\u0646\u062a",m:"\u0628\u0649\u0631 \u0645\u0649\u0646\u06c7\u062a",mm:"%d \u0645\u0649\u0646\u06c7\u062a",h:"\u0628\u0649\u0631 \u0633\u0627\u0626\u06d5\u062a",hh:"%d \u0633\u0627\u0626\u06d5\u062a",d:"\u0628\u0649\u0631 \u0643\u06c8\u0646",dd:"%d \u0643\u06c8\u0646",M:"\u0628\u0649\u0631 \u0626\u0627\u064a",MM:"%d \u0626\u0627\u064a",y:"\u0628\u0649\u0631 \u064a\u0649\u0644",yy:"%d \u064a\u0649\u0644"},dayOfMonthOrdinalParse:/\d{1,2}(-\u0643\u06c8\u0646\u0649|-\u0626\u0627\u064a|-\u06be\u06d5\u067e\u062a\u06d5)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"-\u0643\u06c8\u0646\u0649";case"w":case"W":return e+"-\u06be\u06d5\u067e\u062a\u06d5";default:return e}},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"\u060c")},week:{dow:1,doy:7}})}()},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},Yzuk:function(e,t,n){"undefined"!=typeof self?self:"undefined"!=typeof global&&global,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=129)}([function(e,t,n){"use strict";n.d(t,"u",function(){return a}),n.d(t,"v",function(){return s}),n.d(t,"h",function(){return u}),n.d(t,"e",function(){return l}),n.d(t,"f",function(){return c}),n.d(t,"w",function(){return h}),n.d(t,"x",function(){return d}),n.d(t,"y",function(){return f}),n.d(t,"r",function(){return p}),n.d(t,"q",function(){return _}),n.d(t,"j",function(){return m}),n.d(t,"n",function(){return g}),n.d(t,"z",function(){return v}),n.d(t,"i",function(){return y}),n.d(t,"s",function(){return r}),n.d(t,"c",function(){return T}),n.d(t,"d",function(){return E}),n.d(t,"k",function(){return b}),n.d(t,"a",function(){return x}),n.d(t,"b",function(){return M}),n.d(t,"l",function(){return A}),n.d(t,"m",function(){return S}),n.d(t,"g",function(){return C}),n.d(t,"p",function(){return P}),n.d(t,"o",function(){return R}),n.d(t,"t",function(){return D});var r,i=n(34),o=n(12),a=1/2.2,s=2.2,u=.001,l=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.r=e,this.g=t,this.b=n}return e.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+"}"},e.prototype.getClassName=function(){return"Color3"},e.prototype.getHashCode=function(){var e=this.r||0;return 397*(e=397*e^(this.g||0))^(this.b||0)},e.prototype.toArray=function(e,t){return void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,this},e.prototype.toColor4=function(e){return void 0===e&&(e=1),new c(this.r,this.g,this.b,e)},e.prototype.asArray=function(){var e=new Array;return this.toArray(e,0),e},e.prototype.toLuminance=function(){return.3*this.r+.59*this.g+.11*this.b},e.prototype.multiply=function(t){return new e(this.r*t.r,this.g*t.g,this.b*t.b)},e.prototype.multiplyToRef=function(e,t){return t.r=this.r*e.r,t.g=this.g*e.g,t.b=this.b*e.b,this},e.prototype.equals=function(e){return e&&this.r===e.r&&this.g===e.g&&this.b===e.b},e.prototype.equalsFloats=function(e,t,n){return this.r===e&&this.g===t&&this.b===n},e.prototype.scale=function(t){return new e(this.r*t,this.g*t,this.b*t)},e.prototype.scaleToRef=function(e,t){return t.r=this.r*e,t.g=this.g*e,t.b=this.b*e,this},e.prototype.scaleAndAddToRef=function(e,t){return t.r+=this.r*e,t.g+=this.g*e,t.b+=this.b*e,this},e.prototype.clampToRef=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=1),n.r=o.a.Clamp(this.r,e,t),n.g=o.a.Clamp(this.g,e,t),n.b=o.a.Clamp(this.b,e,t),this},e.prototype.add=function(t){return new e(this.r+t.r,this.g+t.g,this.b+t.b)},e.prototype.addToRef=function(e,t){return t.r=this.r+e.r,t.g=this.g+e.g,t.b=this.b+e.b,this},e.prototype.subtract=function(t){return new e(this.r-t.r,this.g-t.g,this.b-t.b)},e.prototype.subtractToRef=function(e,t){return t.r=this.r-e.r,t.g=this.g-e.g,t.b=this.b-e.b,this},e.prototype.clone=function(){return new e(this.r,this.g,this.b)},e.prototype.copyFrom=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},e.prototype.copyFromFloats=function(e,t,n){return this.r=e,this.g=t,this.b=n,this},e.prototype.set=function(e,t,n){return this.copyFromFloats(e,t,n)},e.prototype.toHexString=function(){var e=255*this.g|0,t=255*this.b|0;return"#"+o.a.ToHex(255*this.r|0)+o.a.ToHex(e)+o.a.ToHex(t)},e.prototype.toLinearSpace=function(){var t=new e;return this.toLinearSpaceToRef(t),t},e.prototype.toLinearSpaceToRef=function(e){return e.r=Math.pow(this.r,s),e.g=Math.pow(this.g,s),e.b=Math.pow(this.b,s),this},e.prototype.toGammaSpace=function(){var t=new e;return this.toGammaSpaceToRef(t),t},e.prototype.toGammaSpaceToRef=function(e){return e.r=Math.pow(this.r,a),e.g=Math.pow(this.g,a),e.b=Math.pow(this.b,a),this},e.FromHexString=function(t){if("#"!==t.substring(0,1)||7!==t.length)return new e(0,0,0);var n=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16);return e.FromInts(n,r,i)},e.FromArray=function(t,n){return void 0===n&&(n=0),new e(t[n],t[n+1],t[n+2])},e.FromInts=function(t,n,r){return new e(t/255,n/255,r/255)},e.Lerp=function(t,n,r){var i=new e(0,0,0);return e.LerpToRef(t,n,r,i),i},e.LerpToRef=function(e,t,n,r){r.r=e.r+(t.r-e.r)*n,r.g=e.g+(t.g-e.g)*n,r.b=e.b+(t.b-e.b)*n},e.Red=function(){return new e(1,0,0)},e.Green=function(){return new e(0,1,0)},e.Blue=function(){return new e(0,0,1)},e.Black=function(){return new e(0,0,0)},Object.defineProperty(e,"BlackReadOnly",{get:function(){return e._BlackReadOnly},enumerable:!0,configurable:!0}),e.White=function(){return new e(1,1,1)},e.Purple=function(){return new e(.5,0,.5)},e.Magenta=function(){return new e(1,0,1)},e.Yellow=function(){return new e(1,1,0)},e.Gray=function(){return new e(.5,.5,.5)},e.Teal=function(){return new e(0,1,1)},e.Random=function(){return new e(Math.random(),Math.random(),Math.random())},e._BlackReadOnly=e.Black(),e}(),c=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r}return e.prototype.addInPlace=function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this.a+=e.a,this},e.prototype.asArray=function(){var e=new Array;return this.toArray(e,0),e},e.prototype.toArray=function(e,t){return void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e[t+3]=this.a,this},e.prototype.equals=function(e){return e&&this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a},e.prototype.add=function(t){return new e(this.r+t.r,this.g+t.g,this.b+t.b,this.a+t.a)},e.prototype.subtract=function(t){return new e(this.r-t.r,this.g-t.g,this.b-t.b,this.a-t.a)},e.prototype.subtractToRef=function(e,t){return t.r=this.r-e.r,t.g=this.g-e.g,t.b=this.b-e.b,t.a=this.a-e.a,this},e.prototype.scale=function(t){return new e(this.r*t,this.g*t,this.b*t,this.a*t)},e.prototype.scaleToRef=function(e,t){return t.r=this.r*e,t.g=this.g*e,t.b=this.b*e,t.a=this.a*e,this},e.prototype.scaleAndAddToRef=function(e,t){return t.r+=this.r*e,t.g+=this.g*e,t.b+=this.b*e,t.a+=this.a*e,this},e.prototype.clampToRef=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=1),n.r=o.a.Clamp(this.r,e,t),n.g=o.a.Clamp(this.g,e,t),n.b=o.a.Clamp(this.b,e,t),n.a=o.a.Clamp(this.a,e,t),this},e.prototype.multiply=function(t){return new e(this.r*t.r,this.g*t.g,this.b*t.b,this.a*t.a)},e.prototype.multiplyToRef=function(e,t){return t.r=this.r*e.r,t.g=this.g*e.g,t.b=this.b*e.b,t.a=this.a*e.a,t},e.prototype.toString=function(){return"{R: "+this.r+" G:"+this.g+" B:"+this.b+" A:"+this.a+"}"},e.prototype.getClassName=function(){return"Color4"},e.prototype.getHashCode=function(){var e=this.r||0;return 397*(e=397*(e=397*e^(this.g||0))^(this.b||0))^(this.a||0)},e.prototype.clone=function(){return new e(this.r,this.g,this.b,this.a)},e.prototype.copyFrom=function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this},e.prototype.copyFromFloats=function(e,t,n,r){return this.r=e,this.g=t,this.b=n,this.a=r,this},e.prototype.set=function(e,t,n,r){return this.copyFromFloats(e,t,n,r)},e.prototype.toHexString=function(){var e=255*this.g|0,t=255*this.b|0,n=255*this.a|0;return"#"+o.a.ToHex(255*this.r|0)+o.a.ToHex(e)+o.a.ToHex(t)+o.a.ToHex(n)},e.prototype.toLinearSpace=function(){var t=new e;return this.toLinearSpaceToRef(t),t},e.prototype.toLinearSpaceToRef=function(e){return e.r=Math.pow(this.r,s),e.g=Math.pow(this.g,s),e.b=Math.pow(this.b,s),e.a=this.a,this},e.prototype.toGammaSpace=function(){var t=new e;return this.toGammaSpaceToRef(t),t},e.prototype.toGammaSpaceToRef=function(e){return e.r=Math.pow(this.r,a),e.g=Math.pow(this.g,a),e.b=Math.pow(this.b,a),e.a=this.a,this},e.FromHexString=function(t){if("#"!==t.substring(0,1)||9!==t.length)return new e(0,0,0,0);var n=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),i=parseInt(t.substring(5,7),16),o=parseInt(t.substring(7,9),16);return e.FromInts(n,r,i,o)},e.Lerp=function(t,n,r){var i=new e(0,0,0,0);return e.LerpToRef(t,n,r,i),i},e.LerpToRef=function(e,t,n,r){r.r=e.r+(t.r-e.r)*n,r.g=e.g+(t.g-e.g)*n,r.b=e.b+(t.b-e.b)*n,r.a=e.a+(t.a-e.a)*n},e.FromColor3=function(t,n){return void 0===n&&(n=1),new e(t.r,t.g,t.b,n)},e.FromArray=function(t,n){return void 0===n&&(n=0),new e(t[n],t[n+1],t[n+2],t[n+3])},e.FromInts=function(t,n,r,i){return new e(t/255,n/255,r/255,i/255)},e.CheckColors4=function(e,t){if(e.length===3*t){for(var n=[],r=0;r<e.length;r+=3){var i=r/3*4;n[i]=e[r],n[i+1]=e[r+1],n[i+2]=e[r+2],n[i+3]=1}return n}return e},e}(),h=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.x=e,this.y=t}return e.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+"}"},e.prototype.getClassName=function(){return"Vector2"},e.prototype.getHashCode=function(){return 397*(this.x||0)^(this.y||0)},e.prototype.toArray=function(e,t){return void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,this},e.prototype.asArray=function(){var e=new Array;return this.toArray(e,0),e},e.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this},e.prototype.copyFromFloats=function(e,t){return this.x=e,this.y=t,this},e.prototype.set=function(e,t){return this.copyFromFloats(e,t)},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.addToRef=function(e,t){return t.x=this.x+e.x,t.y=this.y+e.y,this},e.prototype.addInPlace=function(e){return this.x+=e.x,this.y+=e.y,this},e.prototype.addVector3=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.subtractToRef=function(e,t){return t.x=this.x-e.x,t.y=this.y-e.y,this},e.prototype.subtractInPlace=function(e){return this.x-=e.x,this.y-=e.y,this},e.prototype.multiplyInPlace=function(e){return this.x*=e.x,this.y*=e.y,this},e.prototype.multiply=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.multiplyToRef=function(e,t){return t.x=this.x*e.x,t.y=this.y*e.y,this},e.prototype.multiplyByFloats=function(t,n){return new e(this.x*t,this.y*n)},e.prototype.divide=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.divideToRef=function(e,t){return t.x=this.x/e.x,t.y=this.y/e.y,this},e.prototype.divideInPlace=function(e){return this.divideToRef(e,this)},e.prototype.negate=function(){return new e(-this.x,-this.y)},e.prototype.scaleInPlace=function(e){return this.x*=e,this.y*=e,this},e.prototype.scale=function(t){var n=new e(0,0);return this.scaleToRef(t,n),n},e.prototype.scaleToRef=function(e,t){return t.x=this.x*e,t.y=this.y*e,this},e.prototype.scaleAndAddToRef=function(e,t){return t.x+=this.x*e,t.y+=this.y*e,this},e.prototype.equals=function(e){return e&&this.x===e.x&&this.y===e.y},e.prototype.equalsWithEpsilon=function(e,t){return void 0===t&&(t=u),e&&o.a.WithinEpsilon(this.x,e.x,t)&&o.a.WithinEpsilon(this.y,e.y,t)},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e.prototype.fract=function(){return new e(this.x-Math.floor(this.x),this.y-Math.floor(this.y))},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var e=this.length();if(0===e)return this;var t=1/e;return this.x*=t,this.y*=t,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.Zero=function(){return new e(0,0)},e.One=function(){return new e(1,1)},e.FromArray=function(t,n){return void 0===n&&(n=0),new e(t[n],t[n+1])},e.FromArrayToRef=function(e,t,n){n.x=e[t],n.y=e[t+1]},e.CatmullRom=function(t,n,r,i,o){var a=o*o,s=o*a;return new e(.5*(2*n.x+(-t.x+r.x)*o+(2*t.x-5*n.x+4*r.x-i.x)*a+(3*n.x-t.x-3*r.x+i.x)*s),.5*(2*n.y+(-t.y+r.y)*o+(2*t.y-5*n.y+4*r.y-i.y)*a+(3*n.y-t.y-3*r.y+i.y)*s))},e.Clamp=function(t,n,r){var i=t.x;i=(i=i>r.x?r.x:i)<n.x?n.x:i;var o=t.y;return new e(i,o=(o=o>r.y?r.y:o)<n.y?n.y:o)},e.Hermite=function(t,n,r,i,o){var a=o*o,s=o*a,u=2*s-3*a+1,l=-2*s+3*a,c=s-2*a+o,h=s-a;return new e(t.x*u+r.x*l+n.x*c+i.x*h,t.y*u+r.y*l+n.y*c+i.y*h)},e.Lerp=function(t,n,r){return new e(t.x+(n.x-t.x)*r,t.y+(n.y-t.y)*r)},e.Dot=function(e,t){return e.x*t.x+e.y*t.y},e.Normalize=function(e){var t=e.clone();return t.normalize(),t},e.Minimize=function(t,n){return new e(t.x<n.x?t.x:n.x,t.y<n.y?t.y:n.y)},e.Maximize=function(t,n){return new e(t.x>n.x?t.x:n.x,t.y>n.y?t.y:n.y)},e.Transform=function(t,n){var r=e.Zero();return e.TransformToRef(t,n,r),r},e.TransformToRef=function(e,t,n){var r=t.m,i=e.x*r[1]+e.y*r[5]+r[13];n.x=e.x*r[0]+e.y*r[4]+r[12],n.y=i},e.PointInTriangle=function(e,t,n,r){var i=.5*(-n.y*r.x+t.y*(-n.x+r.x)+t.x*(n.y-r.y)+n.x*r.y),o=i<0?-1:1,a=(t.y*r.x-t.x*r.y+(r.y-t.y)*e.x+(t.x-r.x)*e.y)*o,s=(t.x*n.y-t.y*n.x+(t.y-n.y)*e.x+(n.x-t.x)*e.y)*o;return a>0&&s>0&&a+s<2*i*o},e.Distance=function(t,n){return Math.sqrt(e.DistanceSquared(t,n))},e.DistanceSquared=function(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},e.Center=function(e,t){var n=e.add(t);return n.scaleInPlace(.5),n},e.DistanceOfPointFromSegment=function(t,n,r){var i=e.DistanceSquared(n,r);if(0===i)return e.Distance(t,n);var o=r.subtract(n),a=Math.max(0,Math.min(1,e.Dot(t.subtract(n),o)/i)),s=n.add(o.multiplyByFloats(a,a));return e.Distance(t,s)},e}(),d=function(){function e(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.x=e,this.y=t,this.z=n}return e.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+"}"},e.prototype.getClassName=function(){return"Vector3"},e.prototype.getHashCode=function(){var e=this.x||0;return 397*(e=397*e^(this.y||0))^(this.z||0)},e.prototype.asArray=function(){var e=[];return this.toArray(e,0),e},e.prototype.toArray=function(e,t){return void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,this},e.prototype.toQuaternion=function(){return _.RotationYawPitchRoll(this.y,this.x,this.z)},e.prototype.addInPlace=function(e){return this.addInPlaceFromFloats(e.x,e.y,e.z)},e.prototype.addInPlaceFromFloats=function(e,t,n){return this.x+=e,this.y+=t,this.z+=n,this},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z)},e.prototype.addToRef=function(e,t){return t.copyFromFloats(this.x+e.x,this.y+e.y,this.z+e.z)},e.prototype.subtractInPlace=function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z)},e.prototype.subtractToRef=function(e,t){return this.subtractFromFloatsToRef(e.x,e.y,e.z,t)},e.prototype.subtractFromFloats=function(t,n,r){return new e(this.x-t,this.y-n,this.z-r)},e.prototype.subtractFromFloatsToRef=function(e,t,n,r){return r.copyFromFloats(this.x-e,this.y-t,this.z-n)},e.prototype.negate=function(){return new e(-this.x,-this.y,-this.z)},e.prototype.scaleInPlace=function(e){return this.x*=e,this.y*=e,this.z*=e,this},e.prototype.scale=function(t){return new e(this.x*t,this.y*t,this.z*t)},e.prototype.scaleToRef=function(e,t){return t.copyFromFloats(this.x*e,this.y*e,this.z*e)},e.prototype.scaleAndAddToRef=function(e,t){return t.addInPlaceFromFloats(this.x*e,this.y*e,this.z*e)},e.prototype.equals=function(e){return e&&this.x===e.x&&this.y===e.y&&this.z===e.z},e.prototype.equalsWithEpsilon=function(e,t){return void 0===t&&(t=u),e&&o.a.WithinEpsilon(this.x,e.x,t)&&o.a.WithinEpsilon(this.y,e.y,t)&&o.a.WithinEpsilon(this.z,e.z,t)},e.prototype.equalsToFloats=function(e,t,n){return this.x===e&&this.y===t&&this.z===n},e.prototype.multiplyInPlace=function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this},e.prototype.multiply=function(e){return this.multiplyByFloats(e.x,e.y,e.z)},e.prototype.multiplyToRef=function(e,t){return t.copyFromFloats(this.x*e.x,this.y*e.y,this.z*e.z)},e.prototype.multiplyByFloats=function(t,n,r){return new e(this.x*t,this.y*n,this.z*r)},e.prototype.divide=function(t){return new e(this.x/t.x,this.y/t.y,this.z/t.z)},e.prototype.divideToRef=function(e,t){return t.copyFromFloats(this.x/e.x,this.y/e.y,this.z/e.z)},e.prototype.divideInPlace=function(e){return this.divideToRef(e,this)},e.prototype.minimizeInPlace=function(e){return this.minimizeInPlaceFromFloats(e.x,e.y,e.z)},e.prototype.maximizeInPlace=function(e){return this.maximizeInPlaceFromFloats(e.x,e.y,e.z)},e.prototype.minimizeInPlaceFromFloats=function(e,t,n){return e<this.x&&(this.x=e),t<this.y&&(this.y=t),n<this.z&&(this.z=n),this},e.prototype.maximizeInPlaceFromFloats=function(e,t,n){return e>this.x&&(this.x=e),t>this.y&&(this.y=t),n>this.z&&(this.z=n),this},e.prototype.isNonUniformWithinEpsilon=function(e){var t=Math.abs(this.x),n=Math.abs(this.y);if(!o.a.WithinEpsilon(t,n,e))return!0;var r=Math.abs(this.z);return!o.a.WithinEpsilon(t,r,e)||!o.a.WithinEpsilon(n,r,e)},Object.defineProperty(e.prototype,"isNonUniform",{get:function(){var e=Math.abs(this.x),t=Math.abs(this.y);if(e!==t)return!0;var n=Math.abs(this.z);return e!==n||t!==n},enumerable:!0,configurable:!0}),e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z))},e.prototype.fract=function(){return new e(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z))},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},e.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z},e.prototype.normalize=function(){return this.normalizeFromLength(this.length())},e.prototype.reorderInPlace=function(e){var t=this;return"xyz"===(e=e.toLowerCase())?this:(O.Vector3[0].copyFrom(this),["x","y","z"].forEach(function(n,r){t[n]=O.Vector3[0][e[r]]}),this)},e.prototype.rotateByQuaternionToRef=function(t,n){return t.toRotationMatrix(O.Matrix[0]),e.TransformCoordinatesToRef(this,O.Matrix[0],n),n},e.prototype.rotateByQuaternionAroundPointToRef=function(e,t,n){return this.subtractToRef(t,O.Vector3[0]),O.Vector3[0].rotateByQuaternionToRef(e,O.Vector3[0]),t.addToRef(O.Vector3[0],n),n},e.prototype.normalizeFromLength=function(e){return 0===e||1===e?this:this.scaleInPlace(1/e)},e.prototype.normalizeToNew=function(){var t=new e(0,0,0);return this.normalizeToRef(t),t},e.prototype.normalizeToRef=function(e){var t=this.length();return 0===t||1===t?e.copyFromFloats(this.x,this.y,this.z):this.scaleToRef(1/t,e)},e.prototype.clone=function(){return new e(this.x,this.y,this.z)},e.prototype.copyFrom=function(e){return this.copyFromFloats(e.x,e.y,e.z)},e.prototype.copyFromFloats=function(e,t,n){return this.x=e,this.y=t,this.z=n,this},e.prototype.set=function(e,t,n){return this.copyFromFloats(e,t,n)},e.prototype.setAll=function(e){return this.x=this.y=this.z=e,this},e.GetClipFactor=function(t,n,r,i){var o=e.Dot(t,r)-i;return o/(o-(e.Dot(n,r)-i))},e.GetAngleBetweenVectors=function(t,n,r){var i=t.normalizeToRef(O.Vector3[1]),o=n.normalizeToRef(O.Vector3[2]),a=e.Dot(i,o),s=O.Vector3[3];return e.CrossToRef(i,o,s),e.Dot(s,r)>0?Math.acos(a):-Math.acos(a)},e.FromArray=function(t,n){return void 0===n&&(n=0),new e(t[n],t[n+1],t[n+2])},e.FromFloatArray=function(t,n){return e.FromArray(t,n)},e.FromArrayToRef=function(e,t,n){n.x=e[t],n.y=e[t+1],n.z=e[t+2]},e.FromFloatArrayToRef=function(t,n,r){return e.FromArrayToRef(t,n,r)},e.FromFloatsToRef=function(e,t,n,r){r.copyFromFloats(e,t,n)},e.Zero=function(){return new e(0,0,0)},e.One=function(){return new e(1,1,1)},e.Up=function(){return new e(0,1,0)},Object.defineProperty(e,"UpReadOnly",{get:function(){return e._UpReadOnly},enumerable:!0,configurable:!0}),e.Down=function(){return new e(0,-1,0)},e.Forward=function(){return new e(0,0,1)},e.Backward=function(){return new e(0,0,-1)},e.Right=function(){return new e(1,0,0)},e.Left=function(){return new e(-1,0,0)},e.TransformCoordinates=function(t,n){var r=e.Zero();return e.TransformCoordinatesToRef(t,n,r),r},e.TransformCoordinatesToRef=function(t,n,r){e.TransformCoordinatesFromFloatsToRef(t.x,t.y,t.z,n,r)},e.TransformCoordinatesFromFloatsToRef=function(e,t,n,r,i){var o=r.m,a=e*o[1]+t*o[5]+n*o[9]+o[13],s=e*o[2]+t*o[6]+n*o[10]+o[14],u=1/(e*o[3]+t*o[7]+n*o[11]+o[15]);i.x=(e*o[0]+t*o[4]+n*o[8]+o[12])*u,i.y=a*u,i.z=s*u},e.TransformNormal=function(t,n){var r=e.Zero();return e.TransformNormalToRef(t,n,r),r},e.TransformNormalToRef=function(e,t,n){this.TransformNormalFromFloatsToRef(e.x,e.y,e.z,t,n)},e.TransformNormalFromFloatsToRef=function(e,t,n,r,i){var o=r.m;i.x=e*o[0]+t*o[4]+n*o[8],i.y=e*o[1]+t*o[5]+n*o[9],i.z=e*o[2]+t*o[6]+n*o[10]},e.CatmullRom=function(t,n,r,i,o){var a=o*o,s=o*a;return new e(.5*(2*n.x+(-t.x+r.x)*o+(2*t.x-5*n.x+4*r.x-i.x)*a+(3*n.x-t.x-3*r.x+i.x)*s),.5*(2*n.y+(-t.y+r.y)*o+(2*t.y-5*n.y+4*r.y-i.y)*a+(3*n.y-t.y-3*r.y+i.y)*s),.5*(2*n.z+(-t.z+r.z)*o+(2*t.z-5*n.z+4*r.z-i.z)*a+(3*n.z-t.z-3*r.z+i.z)*s))},e.Clamp=function(t,n,r){var i=new e;return e.ClampToRef(t,n,r,i),i},e.ClampToRef=function(e,t,n,r){var i=e.x;i=(i=i>n.x?n.x:i)<t.x?t.x:i;var o=e.y;o=(o=o>n.y?n.y:o)<t.y?t.y:o;var a=e.z;a=(a=a>n.z?n.z:a)<t.z?t.z:a,r.copyFromFloats(i,o,a)},e.Hermite=function(t,n,r,i,o){var a=o*o,s=o*a,u=2*s-3*a+1,l=-2*s+3*a,c=s-2*a+o,h=s-a;return new e(t.x*u+r.x*l+n.x*c+i.x*h,t.y*u+r.y*l+n.y*c+i.y*h,t.z*u+r.z*l+n.z*c+i.z*h)},e.Lerp=function(t,n,r){var i=new e(0,0,0);return e.LerpToRef(t,n,r,i),i},e.LerpToRef=function(e,t,n,r){r.x=e.x+(t.x-e.x)*n,r.y=e.y+(t.y-e.y)*n,r.z=e.z+(t.z-e.z)*n},e.Dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},e.Cross=function(t,n){var r=e.Zero();return e.CrossToRef(t,n,r),r},e.CrossToRef=function(e,t,n){n.copyFromFloats(e.y*t.z-e.z*t.y,e.z*t.x-e.x*t.z,e.x*t.y-e.y*t.x)},e.Normalize=function(t){var n=e.Zero();return e.NormalizeToRef(t,n),n},e.NormalizeToRef=function(e,t){e.normalizeToRef(t)},e.Project=function(t,n,r,i){var o=i.width,a=i.height,s=O.Matrix[1];m.FromValuesToRef(o/2,0,0,0,0,-a/2,0,0,0,0,.5,0,i.x+o/2,a/2+i.y,.5,1,s);var u=O.Matrix[0];return n.multiplyToRef(r,u),u.multiplyToRef(s,u),e.TransformCoordinates(t,u)},e._UnprojectFromInvertedMatrixToRef=function(t,n,r){e.TransformCoordinatesToRef(t,n,r);var i=n.m,a=t.x*i[3]+t.y*i[7]+t.z*i[11]+i[15];o.a.WithinEpsilon(a,1)&&r.scaleInPlace(1/a)},e.UnprojectFromTransform=function(t,n,r,i,o){var a=O.Matrix[0];i.multiplyToRef(o,a),a.invert(),t.x=t.x/n*2-1,t.y=-(t.y/r*2-1);var s=new e;return e._UnprojectFromInvertedMatrixToRef(t,a,s),s},e.Unproject=function(t,n,r,i,o,a){var s=e.Zero();return e.UnprojectToRef(t,n,r,i,o,a,s),s},e.UnprojectToRef=function(t,n,r,i,o,a,s){e.UnprojectFloatsToRef(t.x,t.y,t.z,n,r,i,o,a,s)},e.UnprojectFloatsToRef=function(t,n,r,i,o,a,s,u,l){var c=O.Matrix[0];a.multiplyToRef(s,c),c.multiplyToRef(u,c),c.invert();var h=O.Vector3[0];h.x=t/i*2-1,h.y=-(n/o*2-1),h.z=2*r-1,e._UnprojectFromInvertedMatrixToRef(h,c,l)},e.Minimize=function(e,t){var n=e.clone();return n.minimizeInPlace(t),n},e.Maximize=function(e,t){var n=e.clone();return n.maximizeInPlace(t),n},e.Distance=function(t,n){return Math.sqrt(e.DistanceSquared(t,n))},e.DistanceSquared=function(e,t){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z;return n*n+r*r+i*i},e.Center=function(e,t){var n=e.add(t);return n.scaleInPlace(.5),n},e.RotationFromAxis=function(t,n,r){var i=e.Zero();return e.RotationFromAxisToRef(t,n,r,i),i},e.RotationFromAxisToRef=function(e,t,n,r){var i=O.Quaternion[0];_.RotationQuaternionFromAxisToRef(e,t,n,i),i.toEulerAnglesToRef(r)},e._UpReadOnly=e.Up(),e}(),f=function(){function e(e,t,n,r){this.x=e,this.y=t,this.z=n,this.w=r}return e.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},e.prototype.getClassName=function(){return"Vector4"},e.prototype.getHashCode=function(){var e=this.x||0;return 397*(e=397*(e=397*e^(this.y||0))^(this.z||0))^(this.w||0)},e.prototype.asArray=function(){var e=new Array;return this.toArray(e,0),e},e.prototype.toArray=function(e,t){return void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,this},e.prototype.addInPlace=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)},e.prototype.addToRef=function(e,t){return t.x=this.x+e.x,t.y=this.y+e.y,t.z=this.z+e.z,t.w=this.w+e.w,this},e.prototype.subtractInPlace=function(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)},e.prototype.subtractToRef=function(e,t){return t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z,t.w=this.w-e.w,this},e.prototype.subtractFromFloats=function(t,n,r,i){return new e(this.x-t,this.y-n,this.z-r,this.w-i)},e.prototype.subtractFromFloatsToRef=function(e,t,n,r,i){return i.x=this.x-e,i.y=this.y-t,i.z=this.z-n,i.w=this.w-r,this},e.prototype.negate=function(){return new e(-this.x,-this.y,-this.z,-this.w)},e.prototype.scaleInPlace=function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},e.prototype.scale=function(t){return new e(this.x*t,this.y*t,this.z*t,this.w*t)},e.prototype.scaleToRef=function(e,t){return t.x=this.x*e,t.y=this.y*e,t.z=this.z*e,t.w=this.w*e,this},e.prototype.scaleAndAddToRef=function(e,t){return t.x+=this.x*e,t.y+=this.y*e,t.z+=this.z*e,t.w+=this.w*e,this},e.prototype.equals=function(e){return e&&this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w},e.prototype.equalsWithEpsilon=function(e,t){return void 0===t&&(t=u),e&&o.a.WithinEpsilon(this.x,e.x,t)&&o.a.WithinEpsilon(this.y,e.y,t)&&o.a.WithinEpsilon(this.z,e.z,t)&&o.a.WithinEpsilon(this.w,e.w,t)},e.prototype.equalsToFloats=function(e,t,n,r){return this.x===e&&this.y===t&&this.z===n&&this.w===r},e.prototype.multiplyInPlace=function(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this},e.prototype.multiply=function(t){return new e(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)},e.prototype.multiplyToRef=function(e,t){return t.x=this.x*e.x,t.y=this.y*e.y,t.z=this.z*e.z,t.w=this.w*e.w,this},e.prototype.multiplyByFloats=function(t,n,r,i){return new e(this.x*t,this.y*n,this.z*r,this.w*i)},e.prototype.divide=function(t){return new e(this.x/t.x,this.y/t.y,this.z/t.z,this.w/t.w)},e.prototype.divideToRef=function(e,t){return t.x=this.x/e.x,t.y=this.y/e.y,t.z=this.z/e.z,t.w=this.w/e.w,this},e.prototype.divideInPlace=function(e){return this.divideToRef(e,this)},e.prototype.minimizeInPlace=function(e){return e.x<this.x&&(this.x=e.x),e.y<this.y&&(this.y=e.y),e.z<this.z&&(this.z=e.z),e.w<this.w&&(this.w=e.w),this},e.prototype.maximizeInPlace=function(e){return e.x>this.x&&(this.x=e.x),e.y>this.y&&(this.y=e.y),e.z>this.z&&(this.z=e.z),e.w>this.w&&(this.w=e.w),this},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y),Math.floor(this.z),Math.floor(this.w))},e.prototype.fract=function(){return new e(this.x-Math.floor(this.x),this.y-Math.floor(this.y),this.z-Math.floor(this.z),this.w-Math.floor(this.w))},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},e.prototype.lengthSquared=function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},e.prototype.normalize=function(){var e=this.length();return 0===e?this:this.scaleInPlace(1/e)},e.prototype.toVector3=function(){return new d(this.x,this.y,this.z)},e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.w)},e.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},e.prototype.copyFromFloats=function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},e.prototype.set=function(e,t,n,r){return this.copyFromFloats(e,t,n,r)},e.prototype.setAll=function(e){return this.x=this.y=this.z=this.w=e,this},e.FromArray=function(t,n){return n||(n=0),new e(t[n],t[n+1],t[n+2],t[n+3])},e.FromArrayToRef=function(e,t,n){n.x=e[t],n.y=e[t+1],n.z=e[t+2],n.w=e[t+3]},e.FromFloatArrayToRef=function(t,n,r){e.FromArrayToRef(t,n,r)},e.FromFloatsToRef=function(e,t,n,r,i){i.x=e,i.y=t,i.z=n,i.w=r},e.Zero=function(){return new e(0,0,0,0)},e.One=function(){return new e(1,1,1,1)},e.Normalize=function(t){var n=e.Zero();return e.NormalizeToRef(t,n),n},e.NormalizeToRef=function(e,t){t.copyFrom(e),t.normalize()},e.Minimize=function(e,t){var n=e.clone();return n.minimizeInPlace(t),n},e.Maximize=function(e,t){var n=e.clone();return n.maximizeInPlace(t),n},e.Distance=function(t,n){return Math.sqrt(e.DistanceSquared(t,n))},e.DistanceSquared=function(e,t){var n=e.x-t.x,r=e.y-t.y,i=e.z-t.z,o=e.w-t.w;return n*n+r*r+i*i+o*o},e.Center=function(e,t){var n=e.add(t);return n.scaleInPlace(.5),n},e.TransformNormal=function(t,n){var r=e.Zero();return e.TransformNormalToRef(t,n,r),r},e.TransformNormalToRef=function(e,t,n){var r=t.m,i=e.x*r[1]+e.y*r[5]+e.z*r[9],o=e.x*r[2]+e.y*r[6]+e.z*r[10];n.x=e.x*r[0]+e.y*r[4]+e.z*r[8],n.y=i,n.z=o,n.w=e.w},e.TransformNormalFromFloatsToRef=function(e,t,n,r,i,o){var a=i.m;o.x=e*a[0]+t*a[4]+n*a[8],o.y=e*a[1]+t*a[5]+n*a[9],o.z=e*a[2]+t*a[6]+n*a[10],o.w=r},e.FromVector3=function(t,n){return void 0===n&&(n=0),new e(t.x,t.y,t.z,n)},e}(),p=function(){function e(e,t){this.width=e,this.height=t}return e.prototype.toString=function(){return"{W: "+this.width+", H: "+this.height+"}"},e.prototype.getClassName=function(){return"Size"},e.prototype.getHashCode=function(){return 397*(this.width||0)^(this.height||0)},e.prototype.copyFrom=function(e){this.width=e.width,this.height=e.height},e.prototype.copyFromFloats=function(e,t){return this.width=e,this.height=t,this},e.prototype.set=function(e,t){return this.copyFromFloats(e,t)},e.prototype.multiplyByFloats=function(t,n){return new e(this.width*t,this.height*n)},e.prototype.clone=function(){return new e(this.width,this.height)},e.prototype.equals=function(e){return!!e&&this.width===e.width&&this.height===e.height},Object.defineProperty(e.prototype,"surface",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),e.Zero=function(){return new e(0,0)},e.prototype.add=function(t){return new e(this.width+t.width,this.height+t.height)},e.prototype.subtract=function(t){return new e(this.width-t.width,this.height-t.height)},e.Lerp=function(t,n,r){return new e(t.width+(n.width-t.width)*r,t.height+(n.height-t.height)*r)},e}(),_=function(){function e(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),this.x=e,this.y=t,this.z=n,this.w=r}return e.prototype.toString=function(){return"{X: "+this.x+" Y:"+this.y+" Z:"+this.z+" W:"+this.w+"}"},e.prototype.getClassName=function(){return"Quaternion"},e.prototype.getHashCode=function(){var e=this.x||0;return 397*(e=397*(e=397*e^(this.y||0))^(this.z||0))^(this.w||0)},e.prototype.asArray=function(){return[this.x,this.y,this.z,this.w]},e.prototype.equals=function(e){return e&&this.x===e.x&&this.y===e.y&&this.z===e.z&&this.w===e.w},e.prototype.clone=function(){return new e(this.x,this.y,this.z,this.w)},e.prototype.copyFrom=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},e.prototype.copyFromFloats=function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},e.prototype.set=function(e,t,n,r){return this.copyFromFloats(e,t,n,r)},e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)},e.prototype.addInPlace=function(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this},e.prototype.subtract=function(t){return new e(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)},e.prototype.scale=function(t){return new e(this.x*t,this.y*t,this.z*t,this.w*t)},e.prototype.scaleToRef=function(e,t){return t.x=this.x*e,t.y=this.y*e,t.z=this.z*e,t.w=this.w*e,this},e.prototype.scaleInPlace=function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},e.prototype.scaleAndAddToRef=function(e,t){return t.x+=this.x*e,t.y+=this.y*e,t.z+=this.z*e,t.w+=this.w*e,this},e.prototype.multiply=function(t){var n=new e(0,0,0,1);return this.multiplyToRef(t,n),n},e.prototype.multiplyToRef=function(e,t){return t.copyFromFloats(this.x*e.w+this.y*e.z-this.z*e.y+this.w*e.x,-this.x*e.z+this.y*e.w+this.z*e.x+this.w*e.y,this.x*e.y-this.y*e.x+this.z*e.w+this.w*e.z,-this.x*e.x-this.y*e.y-this.z*e.z+this.w*e.w),this},e.prototype.multiplyInPlace=function(e){return this.multiplyToRef(e,this),this},e.prototype.conjugateToRef=function(e){return e.copyFromFloats(-this.x,-this.y,-this.z,this.w),this},e.prototype.conjugateInPlace=function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},e.prototype.conjugate=function(){return new e(-this.x,-this.y,-this.z,this.w)},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},e.prototype.normalize=function(){var e=this.length();if(0===e)return this;var t=1/e;return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},e.prototype.toEulerAngles=function(e){void 0===e&&(e="YZX");var t=d.Zero();return this.toEulerAnglesToRef(t),t},e.prototype.toEulerAnglesToRef=function(e){var t=this.z,n=this.x,r=this.y,i=this.w,o=i*i,a=t*t,s=n*n,u=r*r,l=r*t-n*i;return l<-.4999999?(e.y=2*Math.atan2(r,i),e.x=Math.PI/2,e.z=0):l>.4999999?(e.y=2*Math.atan2(r,i),e.x=-Math.PI/2,e.z=0):(e.z=Math.atan2(2*(n*r+t*i),-a-s+u+o),e.x=Math.asin(-2*(t*r-n*i)),e.y=Math.atan2(2*(t*n+r*i),a-s-u+o)),this},e.prototype.toRotationMatrix=function(e){return m.FromQuaternionToRef(this,e),this},e.prototype.fromRotationMatrix=function(t){return e.FromRotationMatrixToRef(t,this),this},e.FromRotationMatrix=function(t){var n=new e;return e.FromRotationMatrixToRef(t,n),n},e.FromRotationMatrixToRef=function(e,t){var n,r=e.m,i=r[0],o=r[4],a=r[8],s=r[1],u=r[5],l=r[9],c=r[2],h=r[6],d=r[10],f=i+u+d;f>0?(n=.5/Math.sqrt(f+1),t.w=.25/n,t.x=(h-l)*n,t.y=(a-c)*n,t.z=(s-o)*n):i>u&&i>d?(n=2*Math.sqrt(1+i-u-d),t.w=(h-l)/n,t.x=.25*n,t.y=(o+s)/n,t.z=(a+c)/n):u>d?(n=2*Math.sqrt(1+u-i-d),t.w=(a-c)/n,t.x=(o+s)/n,t.y=.25*n,t.z=(l+h)/n):(n=2*Math.sqrt(1+d-i-u),t.w=(s-o)/n,t.x=(a+c)/n,t.y=(l+h)/n,t.z=.25*n)},e.Dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w},e.AreClose=function(t,n){return e.Dot(t,n)>=0},e.Zero=function(){return new e(0,0,0,0)},e.Inverse=function(t){return new e(-t.x,-t.y,-t.z,t.w)},e.InverseToRef=function(e,t){return t.set(-e.x,-e.y,-e.z,e.w),t},e.Identity=function(){return new e(0,0,0,1)},e.IsIdentity=function(e){return e&&0===e.x&&0===e.y&&0===e.z&&1===e.w},e.RotationAxis=function(t,n){return e.RotationAxisToRef(t,n,new e)},e.RotationAxisToRef=function(e,t,n){var r=Math.sin(t/2);return e.normalize(),n.w=Math.cos(t/2),n.x=e.x*r,n.y=e.y*r,n.z=e.z*r,n},e.FromArray=function(t,n){return n||(n=0),new e(t[n],t[n+1],t[n+2],t[n+3])},e.FromEulerAngles=function(t,n,r){var i=new e;return e.RotationYawPitchRollToRef(n,t,r,i),i},e.FromEulerAnglesToRef=function(t,n,r,i){return e.RotationYawPitchRollToRef(n,t,r,i),i},e.FromEulerVector=function(t){var n=new e;return e.RotationYawPitchRollToRef(t.y,t.x,t.z,n),n},e.FromEulerVectorToRef=function(t,n){return e.RotationYawPitchRollToRef(t.y,t.x,t.z,n),n},e.RotationYawPitchRoll=function(t,n,r){var i=new e;return e.RotationYawPitchRollToRef(t,n,r,i),i},e.RotationYawPitchRollToRef=function(e,t,n,r){var i=.5*n,o=.5*t,a=.5*e,s=Math.sin(i),u=Math.cos(i),l=Math.sin(o),c=Math.cos(o),h=Math.sin(a),d=Math.cos(a);r.x=d*l*u+h*c*s,r.y=h*c*u-d*l*s,r.z=d*c*s-h*l*u,r.w=d*c*u+h*l*s},e.RotationAlphaBetaGamma=function(t,n,r){var i=new e;return e.RotationAlphaBetaGammaToRef(t,n,r,i),i},e.RotationAlphaBetaGammaToRef=function(e,t,n,r){var i=.5*(n+e),o=.5*(n-e),a=.5*t;r.x=Math.cos(o)*Math.sin(a),r.y=Math.sin(o)*Math.sin(a),r.z=Math.sin(i)*Math.cos(a),r.w=Math.cos(i)*Math.cos(a)},e.RotationQuaternionFromAxis=function(t,n,r){var i=new e(0,0,0,0);return e.RotationQuaternionFromAxisToRef(t,n,r,i),i},e.RotationQuaternionFromAxisToRef=function(t,n,r,i){var o=O.Matrix[0];m.FromXYZAxesToRef(t.normalize(),n.normalize(),r.normalize(),o),e.FromRotationMatrixToRef(o,i)},e.Slerp=function(t,n,r){var i=e.Identity();return e.SlerpToRef(t,n,r,i),i},e.SlerpToRef=function(e,t,n,r){var i,o,a=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w,s=!1;if(a<0&&(s=!0,a=-a),a>.999999)o=1-n,i=s?-n:n;else{var u=Math.acos(a),l=1/Math.sin(u);o=Math.sin((1-n)*u)*l,i=s?-Math.sin(n*u)*l:Math.sin(n*u)*l}r.x=o*e.x+i*t.x,r.y=o*e.y+i*t.y,r.z=o*e.z+i*t.z,r.w=o*e.w+i*t.w},e.Hermite=function(t,n,r,i,o){var a=o*o,s=o*a,u=2*s-3*a+1,l=-2*s+3*a,c=s-2*a+o,h=s-a;return new e(t.x*u+r.x*l+n.x*c+i.x*h,t.y*u+r.y*l+n.y*c+i.y*h,t.z*u+r.z*l+n.z*c+i.z*h,t.w*u+r.w*l+n.w*c+i.w*h)},e}(),m=function(){function e(){this._isIdentity=!1,this._isIdentityDirty=!0,this._isIdentity3x2=!0,this._isIdentity3x2Dirty=!0,this.updateFlag=-1,this._m=new Float32Array(16),this._updateIdentityStatus(!1)}return Object.defineProperty(e.prototype,"m",{get:function(){return this._m},enumerable:!0,configurable:!0}),e.prototype._markAsUpdated=function(){this.updateFlag=e._updateFlagSeed++,this._isIdentity=!1,this._isIdentity3x2=!1,this._isIdentityDirty=!0,this._isIdentity3x2Dirty=!0},e.prototype._updateIdentityStatus=function(t,n,r,i){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!0),this.updateFlag=e._updateFlagSeed++,this._isIdentity=t,this._isIdentity3x2=t||r,this._isIdentityDirty=!this._isIdentity&&n,this._isIdentity3x2Dirty=!this._isIdentity3x2&&i},e.prototype.isIdentity=function(){if(this._isIdentityDirty){this._isIdentityDirty=!1;var e=this._m;this._isIdentity=1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&0===e[12]&&0===e[13]&&0===e[14]&&1===e[15]}return this._isIdentity},e.prototype.isIdentityAs3x2=function(){return this._isIdentity3x2Dirty&&(this._isIdentity3x2Dirty=!1,this._isIdentity3x2=1===this._m[0]&&1===this._m[5]&&1===this._m[15]&&0===this._m[1]&&0===this._m[2]&&0===this._m[3]&&0===this._m[4]&&0===this._m[6]&&0===this._m[7]&&0===this._m[8]&&0===this._m[9]&&0===this._m[10]&&0===this._m[11]&&0===this._m[12]&&0===this._m[13]&&0===this._m[14]),this._isIdentity3x2},e.prototype.determinant=function(){if(!0===this._isIdentity)return 1;var e=this._m,t=e[4],n=e[5],r=e[6],i=e[7],o=e[8],a=e[9],s=e[10],u=e[11],l=e[12],c=e[13],h=e[14],d=e[15],f=s*d-h*u,p=a*d-c*u,_=a*h-c*s,m=o*d-l*u,g=o*h-s*l,v=o*c-l*a;return e[0]*+(n*f-r*p+i*_)+e[1]*-(t*f-r*m+i*g)+e[2]*+(t*p-n*m+i*v)+e[3]*-(t*_-n*g+r*v)},e.prototype.toArray=function(){return this._m},e.prototype.asArray=function(){return this._m},e.prototype.invert=function(){return this.invertToRef(this),this},e.prototype.reset=function(){return e.FromValuesToRef(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,this),this._updateIdentityStatus(!1),this},e.prototype.add=function(t){var n=new e;return this.addToRef(t,n),n},e.prototype.addToRef=function(e,t){for(var n=this._m,r=t._m,i=e.m,o=0;o<16;o++)r[o]=n[o]+i[o];return t._markAsUpdated(),this},e.prototype.addToSelf=function(e){for(var t=this._m,n=e.m,r=0;r<16;r++)t[r]+=n[r];return this._markAsUpdated(),this},e.prototype.invertToRef=function(t){if(!0===this._isIdentity)return e.IdentityToRef(t),this;var n=this._m,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],d=n[9],f=n[10],p=n[11],_=n[12],m=n[13],g=n[14],v=n[15],y=f*v-g*p,b=d*v-m*p,T=d*g-m*f,E=h*v-_*p,x=h*g-f*_,M=h*m-_*d,A=+(u*y-l*b+c*T),S=-(s*y-l*E+c*x),C=+(s*b-u*E+c*M),P=-(s*T-u*x+l*M),R=r*A+i*S+o*C+a*P;if(0===R)return t.copyFrom(this),this;var D=1/R,O=l*v-g*c,w=u*v-m*c,L=u*g-m*l,I=s*v-_*c,F=s*g-_*l,N=s*m-_*u,B=l*p-f*c,k=u*p-d*c,U=u*f-d*l,V=s*p-h*c,G=s*f-h*l,j=s*d-h*u;return e.FromValuesToRef(A*D,-(i*y-o*b+a*T)*D,+(i*O-o*w+a*L)*D,-(i*B-o*k+a*U)*D,S*D,+(r*y-o*E+a*x)*D,-(r*O-o*I+a*F)*D,+(r*B-o*V+a*G)*D,C*D,-(r*b-i*E+a*M)*D,+(r*w-i*I+a*N)*D,-(r*k-i*V+a*j)*D,P*D,+(r*T-i*x+o*M)*D,-(r*L-i*F+o*N)*D,+(r*U-i*G+o*j)*D,t),this},e.prototype.addAtIndex=function(e,t){return this._m[e]+=t,this._markAsUpdated(),this},e.prototype.multiplyAtIndex=function(e,t){return this._m[e]*=t,this._markAsUpdated(),this},e.prototype.setTranslationFromFloats=function(e,t,n){return this._m[12]=e,this._m[13]=t,this._m[14]=n,this._markAsUpdated(),this},e.prototype.addTranslationFromFloats=function(e,t,n){return this._m[12]+=e,this._m[13]+=t,this._m[14]+=n,this._markAsUpdated(),this},e.prototype.setTranslation=function(e){return this.setTranslationFromFloats(e.x,e.y,e.z)},e.prototype.getTranslation=function(){return new d(this._m[12],this._m[13],this._m[14])},e.prototype.getTranslationToRef=function(e){return e.x=this._m[12],e.y=this._m[13],e.z=this._m[14],this},e.prototype.removeRotationAndScaling=function(){var t=this.m;return e.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],this),this._updateIdentityStatus(0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),this},e.prototype.multiply=function(t){var n=new e;return this.multiplyToRef(t,n),n},e.prototype.copyFrom=function(e){return e.copyToArray(this._m),this._updateIdentityStatus(e._isIdentity,e._isIdentityDirty,e._isIdentity3x2,e._isIdentity3x2Dirty),this},e.prototype.copyToArray=function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)e[t+n]=this._m[n];return this},e.prototype.multiplyToRef=function(e,t){return this._isIdentity?(t.copyFrom(e),this):e._isIdentity?(t.copyFrom(this),this):(this.multiplyToArray(e,t._m,0),t._markAsUpdated(),this)},e.prototype.multiplyToArray=function(e,t,n){var r=this._m,i=e.m,o=r[0],a=r[1],s=r[2],u=r[3],l=r[4],c=r[5],h=r[6],d=r[7],f=r[8],p=r[9],_=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15],T=i[0],E=i[1],x=i[2],M=i[3],A=i[4],S=i[5],C=i[6],P=i[7],R=i[8],D=i[9],O=i[10],w=i[11],L=i[12],I=i[13],F=i[14],N=i[15];return t[n]=o*T+a*A+s*R+u*L,t[n+1]=o*E+a*S+s*D+u*I,t[n+2]=o*x+a*C+s*O+u*F,t[n+3]=o*M+a*P+s*w+u*N,t[n+4]=l*T+c*A+h*R+d*L,t[n+5]=l*E+c*S+h*D+d*I,t[n+6]=l*x+c*C+h*O+d*F,t[n+7]=l*M+c*P+h*w+d*N,t[n+8]=f*T+p*A+_*R+m*L,t[n+9]=f*E+p*S+_*D+m*I,t[n+10]=f*x+p*C+_*O+m*F,t[n+11]=f*M+p*P+_*w+m*N,t[n+12]=g*T+v*A+y*R+b*L,t[n+13]=g*E+v*S+y*D+b*I,t[n+14]=g*x+v*C+y*O+b*F,t[n+15]=g*M+v*P+y*w+b*N,this},e.prototype.equals=function(e){if(!e)return!1;if((this._isIdentity||e._isIdentity)&&!this._isIdentityDirty&&!e._isIdentityDirty)return this._isIdentity&&e._isIdentity;var t=this.m,n=e.m;return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},e.prototype.clone=function(){var t=new e;return t.copyFrom(this),t},e.prototype.getClassName=function(){return"Matrix"},e.prototype.getHashCode=function(){for(var e=this._m[0]||0,t=1;t<16;t++)e=397*e^(this._m[t]||0);return e},e.prototype.decompose=function(t,n,r){if(this._isIdentity)return r&&r.setAll(0),t&&t.setAll(1),n&&n.copyFromFloats(0,0,0,1),!0;var i=this._m;if(r&&r.copyFromFloats(i[12],i[13],i[14]),(t=t||O.Vector3[0]).x=Math.sqrt(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]),t.y=Math.sqrt(i[4]*i[4]+i[5]*i[5]+i[6]*i[6]),t.z=Math.sqrt(i[8]*i[8]+i[9]*i[9]+i[10]*i[10]),this.determinant()<=0&&(t.y*=-1),0===t.x||0===t.y||0===t.z)return n&&n.copyFromFloats(0,0,0,1),!1;if(n){var o=1/t.x,a=1/t.y,s=1/t.z;e.FromValuesToRef(i[0]*o,i[1]*o,i[2]*o,0,i[4]*a,i[5]*a,i[6]*a,0,i[8]*s,i[9]*s,i[10]*s,0,0,0,0,1,O.Matrix[0]),_.FromRotationMatrixToRef(O.Matrix[0],n)}return!0},e.prototype.getRow=function(e){if(e<0||e>3)return null;var t=4*e;return new f(this._m[t+0],this._m[t+1],this._m[t+2],this._m[t+3])},e.prototype.setRow=function(e,t){return this.setRowFromFloats(e,t.x,t.y,t.z,t.w)},e.prototype.transpose=function(){return e.Transpose(this)},e.prototype.transposeToRef=function(t){return e.TransposeToRef(this,t),this},e.prototype.setRowFromFloats=function(e,t,n,r,i){if(e<0||e>3)return this;var o=4*e;return this._m[o+0]=t,this._m[o+1]=n,this._m[o+2]=r,this._m[o+3]=i,this._markAsUpdated(),this},e.prototype.scale=function(t){var n=new e;return this.scaleToRef(t,n),n},e.prototype.scaleToRef=function(e,t){for(var n=0;n<16;n++)t._m[n]=this._m[n]*e;return t._markAsUpdated(),this},e.prototype.scaleAndAddToRef=function(e,t){for(var n=0;n<16;n++)t._m[n]+=this._m[n]*e;return t._markAsUpdated(),this},e.prototype.toNormalMatrix=function(t){var n=O.Matrix[0];this.invertToRef(n),n.transposeToRef(t);var r=t._m;e.FromValuesToRef(r[0],r[1],r[2],0,r[4],r[5],r[6],0,r[8],r[9],r[10],0,0,0,0,1,t)},e.prototype.getRotationMatrix=function(){var t=new e;return this.getRotationMatrixToRef(t),t},e.prototype.getRotationMatrixToRef=function(t){var n=O.Vector3[0];if(!this.decompose(n))return e.IdentityToRef(t),this;var r=this._m,i=1/n.x,o=1/n.y,a=1/n.z;return e.FromValuesToRef(r[0]*i,r[1]*i,r[2]*i,0,r[4]*o,r[5]*o,r[6]*o,0,r[8]*a,r[9]*a,r[10]*a,0,0,0,0,1,t),this},e.prototype.toggleModelMatrixHandInPlace=function(){var e=this._m;e[2]*=-1,e[6]*=-1,e[8]*=-1,e[9]*=-1,e[14]*=-1,this._markAsUpdated()},e.prototype.toggleProjectionMatrixHandInPlace=function(){var e=this._m;e[8]*=-1,e[9]*=-1,e[10]*=-1,e[11]*=-1,this._markAsUpdated()},e.FromArray=function(t,n){void 0===n&&(n=0);var r=new e;return e.FromArrayToRef(t,n,r),r},e.FromArrayToRef=function(e,t,n){for(var r=0;r<16;r++)n._m[r]=e[r+t];n._markAsUpdated()},e.FromFloat32ArrayToRefScaled=function(e,t,n,r){for(var i=0;i<16;i++)r._m[i]=e[i+t]*n;r._markAsUpdated()},Object.defineProperty(e,"IdentityReadOnly",{get:function(){return e._identityReadOnly},enumerable:!0,configurable:!0}),e.FromValuesToRef=function(e,t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m){var g=m._m;g[0]=e,g[1]=t,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=a,g[7]=s,g[8]=u,g[9]=l,g[10]=c,g[11]=h,g[12]=d,g[13]=f,g[14]=p,g[15]=_,m._markAsUpdated()},e.FromValues=function(t,n,r,i,o,a,s,u,l,c,h,d,f,p,_,m){var g=new e,v=g._m;return v[0]=t,v[1]=n,v[2]=r,v[3]=i,v[4]=o,v[5]=a,v[6]=s,v[7]=u,v[8]=l,v[9]=c,v[10]=h,v[11]=d,v[12]=f,v[13]=p,v[14]=_,v[15]=m,g._markAsUpdated(),g},e.Compose=function(t,n,r){var i=new e;return e.ComposeToRef(t,n,r,i),i},e.ComposeToRef=function(e,t,n,r){var i=r._m,o=t.x,a=t.y,s=t.z,u=t.w,l=o+o,c=a+a,h=s+s,d=o*l,f=o*c,p=o*h,_=a*c,m=a*h,g=s*h,v=u*l,y=u*c,b=u*h,T=e.x,E=e.y,x=e.z;i[0]=(1-(_+g))*T,i[1]=(f+b)*T,i[2]=(p-y)*T,i[3]=0,i[4]=(f-b)*E,i[5]=(1-(d+g))*E,i[6]=(m+v)*E,i[7]=0,i[8]=(p+y)*x,i[9]=(m-v)*x,i[10]=(1-(d+_))*x,i[11]=0,i[12]=n.x,i[13]=n.y,i[14]=n.z,i[15]=1,r._markAsUpdated()},e.Identity=function(){var t=e.FromValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return t._updateIdentityStatus(!0),t},e.IdentityToRef=function(t){e.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,t),t._updateIdentityStatus(!0)},e.Zero=function(){var t=e.FromValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return t._updateIdentityStatus(!1),t},e.RotationX=function(t){var n=new e;return e.RotationXToRef(t,n),n},e.Invert=function(t){var n=new e;return t.invertToRef(n),n},e.RotationXToRef=function(t,n){var r=Math.sin(t),i=Math.cos(t);e.FromValuesToRef(1,0,0,0,0,i,r,0,0,-r,i,0,0,0,0,1,n),n._updateIdentityStatus(1===i&&0===r)},e.RotationY=function(t){var n=new e;return e.RotationYToRef(t,n),n},e.RotationYToRef=function(t,n){var r=Math.sin(t),i=Math.cos(t);e.FromValuesToRef(i,0,-r,0,0,1,0,0,r,0,i,0,0,0,0,1,n),n._updateIdentityStatus(1===i&&0===r)},e.RotationZ=function(t){var n=new e;return e.RotationZToRef(t,n),n},e.RotationZToRef=function(t,n){var r=Math.sin(t),i=Math.cos(t);e.FromValuesToRef(i,r,0,0,-r,i,0,0,0,0,1,0,0,0,0,1,n),n._updateIdentityStatus(1===i&&0===r)},e.RotationAxis=function(t,n){var r=new e;return e.RotationAxisToRef(t,n,r),r},e.RotationAxisToRef=function(e,t,n){var r=Math.sin(-t),i=Math.cos(-t),o=1-i;e.normalize();var a=n._m;a[0]=e.x*e.x*o+i,a[1]=e.x*e.y*o-e.z*r,a[2]=e.x*e.z*o+e.y*r,a[3]=0,a[4]=e.y*e.x*o+e.z*r,a[5]=e.y*e.y*o+i,a[6]=e.y*e.z*o-e.x*r,a[7]=0,a[8]=e.z*e.x*o-e.y*r,a[9]=e.z*e.y*o+e.x*r,a[10]=e.z*e.z*o+i,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,n._markAsUpdated()},e.RotationAlignToRef=function(e,t,n){var r=d.Cross(t,e),i=d.Dot(t,e),o=1/(1+i),a=n._m;a[0]=r.x*r.x*o+i,a[1]=r.y*r.x*o-r.z,a[2]=r.z*r.x*o+r.y,a[3]=0,a[4]=r.x*r.y*o+r.z,a[5]=r.y*r.y*o+i,a[6]=r.z*r.y*o-r.x,a[7]=0,a[8]=r.x*r.z*o-r.y,a[9]=r.y*r.z*o+r.x,a[10]=r.z*r.z*o+i,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,n._markAsUpdated()},e.RotationYawPitchRoll=function(t,n,r){var i=new e;return e.RotationYawPitchRollToRef(t,n,r,i),i},e.RotationYawPitchRollToRef=function(e,t,n,r){_.RotationYawPitchRollToRef(e,t,n,O.Quaternion[0]),O.Quaternion[0].toRotationMatrix(r)},e.Scaling=function(t,n,r){var i=new e;return e.ScalingToRef(t,n,r,i),i},e.ScalingToRef=function(t,n,r,i){e.FromValuesToRef(t,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1,i),i._updateIdentityStatus(1===t&&1===n&&1===r)},e.Translation=function(t,n,r){var i=new e;return e.TranslationToRef(t,n,r,i),i},e.TranslationToRef=function(t,n,r,i){e.FromValuesToRef(1,0,0,0,0,1,0,0,0,0,1,0,t,n,r,1,i),i._updateIdentityStatus(0===t&&0===n&&0===r)},e.Lerp=function(t,n,r){var i=new e;return e.LerpToRef(t,n,r,i),i},e.LerpToRef=function(e,t,n,r){for(var i=r._m,o=e.m,a=t.m,s=0;s<16;s++)i[s]=o[s]*(1-n)+a[s]*n;r._markAsUpdated()},e.DecomposeLerp=function(t,n,r){var i=new e;return e.DecomposeLerpToRef(t,n,r,i),i},e.DecomposeLerpToRef=function(t,n,r,i){var o=O.Vector3[0],a=O.Quaternion[0],s=O.Vector3[1];t.decompose(o,a,s);var u=O.Vector3[2],l=O.Quaternion[1],c=O.Vector3[3];n.decompose(u,l,c);var h=O.Vector3[4];d.LerpToRef(o,u,r,h);var f=O.Quaternion[2];_.SlerpToRef(a,l,r,f);var p=O.Vector3[5];d.LerpToRef(s,c,r,p),e.ComposeToRef(h,f,p,i)},e.LookAtLH=function(t,n,r){var i=new e;return e.LookAtLHToRef(t,n,r,i),i},e.LookAtLHToRef=function(t,n,r,i){var o=O.Vector3[0],a=O.Vector3[1],s=O.Vector3[2];n.subtractToRef(t,s),s.normalize(),d.CrossToRef(r,s,o);var u=o.lengthSquared();0===u?o.x=1:o.normalizeFromLength(Math.sqrt(u)),d.CrossToRef(s,o,a),a.normalize();var l=-d.Dot(o,t),c=-d.Dot(a,t),h=-d.Dot(s,t);e.FromValuesToRef(o.x,a.x,s.x,0,o.y,a.y,s.y,0,o.z,a.z,s.z,0,l,c,h,1,i)},e.LookAtRH=function(t,n,r){var i=new e;return e.LookAtRHToRef(t,n,r,i),i},e.LookAtRHToRef=function(t,n,r,i){var o=O.Vector3[0],a=O.Vector3[1],s=O.Vector3[2];t.subtractToRef(n,s),s.normalize(),d.CrossToRef(r,s,o);var u=o.lengthSquared();0===u?o.x=1:o.normalizeFromLength(Math.sqrt(u)),d.CrossToRef(s,o,a),a.normalize();var l=-d.Dot(o,t),c=-d.Dot(a,t),h=-d.Dot(s,t);e.FromValuesToRef(o.x,a.x,s.x,0,o.y,a.y,s.y,0,o.z,a.z,s.z,0,l,c,h,1,i)},e.OrthoLH=function(t,n,r,i){var o=new e;return e.OrthoLHToRef(t,n,r,i,o),o},e.OrthoLHToRef=function(t,n,r,i,o){var a=2/t,s=2/n,u=2/(i-r),l=-(i+r)/(i-r);e.FromValuesToRef(a,0,0,0,0,s,0,0,0,0,u,0,0,0,l,1,o),o._updateIdentityStatus(1===a&&1===s&&1===u&&0===l)},e.OrthoOffCenterLH=function(t,n,r,i,o,a){var s=new e;return e.OrthoOffCenterLHToRef(t,n,r,i,o,a,s),s},e.OrthoOffCenterLHToRef=function(t,n,r,i,o,a,s){e.FromValuesToRef(2/(n-t),0,0,0,0,2/(i-r),0,0,0,0,2/(a-o),0,(t+n)/(t-n),(i+r)/(r-i),-(a+o)/(a-o),1,s),s._markAsUpdated()},e.OrthoOffCenterRH=function(t,n,r,i,o,a){var s=new e;return e.OrthoOffCenterRHToRef(t,n,r,i,o,a,s),s},e.OrthoOffCenterRHToRef=function(t,n,r,i,o,a,s){e.OrthoOffCenterLHToRef(t,n,r,i,o,a,s),s._m[10]*=-1},e.PerspectiveLH=function(t,n,r,i){var o=new e;return e.FromValuesToRef(2*r/t,0,0,0,0,2*r/n,0,0,0,0,(i+r)/(i-r),1,0,0,-2*i*r/(i-r),0,o),o._updateIdentityStatus(!1),o},e.PerspectiveFovLH=function(t,n,r,i){var o=new e;return e.PerspectiveFovLHToRef(t,n,r,i,o),o},e.PerspectiveFovLHToRef=function(t,n,r,i,o,a){void 0===a&&(a=!0);var s=r,u=i,l=1/Math.tan(.5*t);e.FromValuesToRef(a?l/n:l,0,0,0,0,a?l:l*n,0,0,0,0,(u+s)/(u-s),1,0,0,-2*u*s/(u-s),0,o),o._updateIdentityStatus(!1)},e.PerspectiveFovRH=function(t,n,r,i){var o=new e;return e.PerspectiveFovRHToRef(t,n,r,i,o),o},e.PerspectiveFovRHToRef=function(t,n,r,i,o,a){void 0===a&&(a=!0);var s=r,u=i,l=1/Math.tan(.5*t);e.FromValuesToRef(a?l/n:l,0,0,0,0,a?l:l*n,0,0,0,0,-(u+s)/(u-s),-1,0,0,-2*u*s/(u-s),0,o),o._updateIdentityStatus(!1)},e.PerspectiveFovWebVRToRef=function(e,t,n,r,i){void 0===i&&(i=!1);var o=i?-1:1,a=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),u=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),c=2/(u+l),h=2/(a+s),d=r._m;d[0]=c,d[1]=d[2]=d[3]=d[4]=0,d[5]=h,d[6]=d[7]=0,d[8]=(u-l)*c*.5,d[9]=-(a-s)*h*.5,d[10]=-n/(t-n),d[11]=1*o,d[12]=d[13]=d[15]=0,d[14]=-2*n*t/(n-t),r._markAsUpdated()},e.GetFinalMatrix=function(t,n,r,i,o,a){var s=t.width,u=t.height,l=e.FromValues(s/2,0,0,0,0,-u/2,0,0,0,0,a-o,0,t.x+s/2,u/2+t.y,o,1),c=O.Matrix[0];return n.multiplyToRef(r,c),c.multiplyToRef(i,c),c.multiply(l)},e.GetAsMatrix2x2=function(e){var t=e.m;return new Float32Array([t[0],t[1],t[4],t[5]])},e.GetAsMatrix3x3=function(e){var t=e.m;return new Float32Array([t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]])},e.Transpose=function(t){var n=new e;return e.TransposeToRef(t,n),n},e.TransposeToRef=function(e,t){var n=t._m,r=e.m;n[0]=r[0],n[1]=r[4],n[2]=r[8],n[3]=r[12],n[4]=r[1],n[5]=r[5],n[6]=r[9],n[7]=r[13],n[8]=r[2],n[9]=r[6],n[10]=r[10],n[11]=r[14],n[12]=r[3],n[13]=r[7],n[14]=r[11],n[15]=r[15],t._updateIdentityStatus(e._isIdentity,e._isIdentityDirty)},e.Reflection=function(t){var n=new e;return e.ReflectionToRef(t,n),n},e.ReflectionToRef=function(t,n){t.normalize();var r=t.normal.x,i=t.normal.y,o=t.normal.z,a=-2*r,s=-2*i,u=-2*o;e.FromValuesToRef(a*r+1,s*r,u*r,0,a*i,s*i+1,u*i,0,a*o,s*o,u*o+1,0,a*t.d,s*t.d,u*t.d,1,n)},e.FromXYZAxesToRef=function(t,n,r,i){e.FromValuesToRef(t.x,t.y,t.z,0,n.x,n.y,n.z,0,r.x,r.y,r.z,0,0,0,0,1,i)},e.FromQuaternionToRef=function(e,t){var n=e.x*e.x,r=e.y*e.y,i=e.z*e.z,o=e.x*e.y,a=e.z*e.w,s=e.z*e.x,u=e.y*e.w,l=e.y*e.z,c=e.x*e.w;t._m[0]=1-2*(r+i),t._m[1]=2*(o+a),t._m[2]=2*(s-u),t._m[3]=0,t._m[4]=2*(o-a),t._m[5]=1-2*(i+n),t._m[6]=2*(l+c),t._m[7]=0,t._m[8]=2*(s+u),t._m[9]=2*(l-c),t._m[10]=1-2*(r+n),t._m[11]=0,t._m[12]=0,t._m[13]=0,t._m[14]=0,t._m[15]=1,t._markAsUpdated()},e._updateFlagSeed=0,e._identityReadOnly=e.Identity(),e}(),g=function(){function e(e,t,n,r){this.normal=new d(e,t,n),this.d=r}return e.prototype.asArray=function(){return[this.normal.x,this.normal.y,this.normal.z,this.d]},e.prototype.clone=function(){return new e(this.normal.x,this.normal.y,this.normal.z,this.d)},e.prototype.getClassName=function(){return"Plane"},e.prototype.getHashCode=function(){return 397*this.normal.getHashCode()^(this.d||0)},e.prototype.normalize=function(){var e=Math.sqrt(this.normal.x*this.normal.x+this.normal.y*this.normal.y+this.normal.z*this.normal.z),t=0;return 0!==e&&(t=1/e),this.normal.x*=t,this.normal.y*=t,this.normal.z*=t,this.d*=t,this},e.prototype.transform=function(t){var n=O.Matrix[0];m.TransposeToRef(t,n);var r=n.m,i=this.normal.x,o=this.normal.y,a=this.normal.z,s=this.d;return new e(i*r[0]+o*r[1]+a*r[2]+s*r[3],i*r[4]+o*r[5]+a*r[6]+s*r[7],i*r[8]+o*r[9]+a*r[10]+s*r[11],i*r[12]+o*r[13]+a*r[14]+s*r[15])},e.prototype.dotCoordinate=function(e){return this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z+this.d},e.prototype.copyFromPoints=function(e,t,n){var r,i=t.x-e.x,o=t.y-e.y,a=t.z-e.z,s=n.x-e.x,u=n.y-e.y,l=n.z-e.z,c=o*l-a*u,h=a*s-i*l,d=i*u-o*s,f=Math.sqrt(c*c+h*h+d*d);return this.normal.x=c*(r=0!==f?1/f:0),this.normal.y=h*r,this.normal.z=d*r,this.d=-(this.normal.x*e.x+this.normal.y*e.y+this.normal.z*e.z),this},e.prototype.isFrontFacingTo=function(e,t){return d.Dot(this.normal,e)<=t},e.prototype.signedDistanceTo=function(e){return d.Dot(e,this.normal)+this.d},e.FromArray=function(t){return new e(t[0],t[1],t[2],t[3])},e.FromPoints=function(t,n,r){var i=new e(0,0,0,0);return i.copyFromPoints(t,n,r),i},e.FromPositionAndNormal=function(t,n){var r=new e(0,0,0,0);return n.normalize(),r.normal=n,r.d=-(n.x*t.x+n.y*t.y+n.z*t.z),r},e.SignedDistanceToPlaneFromPositionAndNormal=function(e,t,n){var r=-(t.x*e.x+t.y*e.y+t.z*e.z);return d.Dot(n,t)+r},e}(),v=function(){function e(e,t,n,r){this.x=e,this.y=t,this.width=n,this.height=r}return e.prototype.toGlobal=function(t,n){return new e(this.x*t,this.y*n,this.width*t,this.height*n)},e.prototype.toGlobalToRef=function(e,t,n){return n.x=this.x*e,n.y=this.y*t,n.width=this.width*e,n.height=this.height*t,this},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e}(),y=function(){function e(){}return e.GetPlanes=function(t){for(var n=[],r=0;r<6;r++)n.push(new g(0,0,0,0));return e.GetPlanesToRef(t,n),n},e.GetNearPlaneToRef=function(e,t){var n=e.m;t.normal.x=n[3]+n[2],t.normal.y=n[7]+n[6],t.normal.z=n[11]+n[10],t.d=n[15]+n[14],t.normalize()},e.GetFarPlaneToRef=function(e,t){var n=e.m;t.normal.x=n[3]-n[2],t.normal.y=n[7]-n[6],t.normal.z=n[11]-n[10],t.d=n[15]-n[14],t.normalize()},e.GetLeftPlaneToRef=function(e,t){var n=e.m;t.normal.x=n[3]+n[0],t.normal.y=n[7]+n[4],t.normal.z=n[11]+n[8],t.d=n[15]+n[12],t.normalize()},e.GetRightPlaneToRef=function(e,t){var n=e.m;t.normal.x=n[3]-n[0],t.normal.y=n[7]-n[4],t.normal.z=n[11]-n[8],t.d=n[15]-n[12],t.normalize()},e.GetTopPlaneToRef=function(e,t){var n=e.m;t.normal.x=n[3]-n[1],t.normal.y=n[7]-n[5],t.normal.z=n[11]-n[9],t.d=n[15]-n[13],t.normalize()},e.GetBottomPlaneToRef=function(e,t){var n=e.m;t.normal.x=n[3]+n[1],t.normal.y=n[7]+n[5],t.normal.z=n[11]+n[9],t.d=n[15]+n[13],t.normalize()},e.GetPlanesToRef=function(t,n){e.GetNearPlaneToRef(t,n[0]),e.GetFarPlaneToRef(t,n[1]),e.GetLeftPlaneToRef(t,n[2]),e.GetRightPlaneToRef(t,n[3]),e.GetTopPlaneToRef(t,n[4]),e.GetBottomPlaneToRef(t,n[5])},e}();!function(e){e[e.LOCAL=0]="LOCAL",e[e.WORLD=1]="WORLD",e[e.BONE=2]="BONE"}(r||(r={}));var b,T=function(){function e(){}return e.X=new d(1,0,0),e.Y=new d(0,1,0),e.Z=new d(0,0,1),e}(),E=function(){function e(){}return e.Interpolate=function(e,t,n,r,i){for(var o=1-3*r+3*t,a=3*r-6*t,s=3*t,u=e,l=0;l<5;l++){var c=u*u;u-=1/(3*o*c+2*a*u+s)*(o*(c*u)+a*c+s*u-e),u=Math.min(1,Math.max(0,u))}return 3*Math.pow(1-u,2)*u*n+3*(1-u)*Math.pow(u,2)*i+Math.pow(u,3)},e}();!function(e){e[e.CW=0]="CW",e[e.CCW=1]="CCW"}(b||(b={}));var x=function(){function e(e){this._radians=e,this._radians<0&&(this._radians+=2*Math.PI)}return e.prototype.degrees=function(){return 180*this._radians/Math.PI},e.prototype.radians=function(){return this._radians},e.BetweenTwoPoints=function(t,n){var r=n.subtract(t);return new e(Math.atan2(r.y,r.x))},e.FromRadians=function(t){return new e(t)},e.FromDegrees=function(t){return new e(t*Math.PI/180)},e}(),M=function(e,t,n){this.startPoint=e,this.midPoint=t,this.endPoint=n;var r=Math.pow(t.x,2)+Math.pow(t.y,2),i=(Math.pow(e.x,2)+Math.pow(e.y,2)-r)/2,o=(r-Math.pow(n.x,2)-Math.pow(n.y,2))/2,a=(e.x-t.x)*(t.y-n.y)-(t.x-n.x)*(e.y-t.y);this.centerPoint=new h((i*(t.y-n.y)-o*(e.y-t.y))/a,((e.x-t.x)*o-(t.x-n.x)*i)/a),this.radius=this.centerPoint.subtract(this.startPoint).length(),this.startAngle=x.BetweenTwoPoints(this.centerPoint,this.startPoint);var s=this.startAngle.degrees(),u=x.BetweenTwoPoints(this.centerPoint,this.midPoint).degrees(),l=x.BetweenTwoPoints(this.centerPoint,this.endPoint).degrees();u-s>180&&(u-=360),u-s<-180&&(u+=360),l-u>180&&(l-=360),l-u<-180&&(l+=360),this.orientation=u-s<0?b.CW:b.CCW,this.angle=x.FromDegrees(this.orientation===b.CW?s-l:l-s)},A=function(){function e(e,t){this._points=new Array,this._length=0,this.closed=!1,this._points.push(new h(e,t))}return e.prototype.addLineTo=function(e,t){if(this.closed)return this;var n=new h(e,t),r=this._points[this._points.length-1];return this._points.push(n),this._length+=n.subtract(r).length(),this},e.prototype.addArcTo=function(e,t,n,r,i){if(void 0===i&&(i=36),this.closed)return this;var o=this._points[this._points.length-1],a=new h(e,t),s=new h(n,r),u=new M(o,a,s),l=u.angle.radians()/i;u.orientation===b.CW&&(l*=-1);for(var c=u.startAngle.radians()+l,d=0;d<i;d++){var f=Math.cos(c)*u.radius+u.centerPoint.x,p=Math.sin(c)*u.radius+u.centerPoint.y;this.addLineTo(f,p),c+=l}return this},e.prototype.close=function(){return this.closed=!0,this},e.prototype.length=function(){var e=this._length;return this.closed||(e+=this._points[0].subtract(this._points[this._points.length-1]).length()),e},e.prototype.getPoints=function(){return this._points},e.prototype.getPointAtLengthPosition=function(e){if(e<0||e>1)return h.Zero();for(var t=e*this.length(),n=0,r=0;r<this._points.length;r++){var i=this._points[r],o=this._points[(r+1)%this._points.length].subtract(i),a=o.length()+n;if(t>=n&&t<=a){var s=o.normalize(),u=t-n;return new h(i.x+s.x*u,i.y+s.y*u)}n=a}return h.Zero()},e.StartingAt=function(t,n){return new e(t,n)},e}(),S=function(){function e(e,t,n){void 0===t&&(t=null),this.path=e,this._curve=new Array,this._distances=new Array,this._tangents=new Array,this._normals=new Array,this._binormals=new Array;for(var r=0;r<e.length;r++)this._curve[r]=e[r].clone();this._raw=n||!1,this._compute(t)}return e.prototype.getCurve=function(){return this._curve},e.prototype.getTangents=function(){return this._tangents},e.prototype.getNormals=function(){return this._normals},e.prototype.getBinormals=function(){return this._binormals},e.prototype.getDistances=function(){return this._distances},e.prototype.update=function(e,t){void 0===t&&(t=null);for(var n=0;n<e.length;n++)this._curve[n].x=e[n].x,this._curve[n].y=e[n].y,this._curve[n].z=e[n].z;return this._compute(t),this},e.prototype._compute=function(e){var t=this._curve.length;this._tangents[0]=this._getFirstNonNullVector(0),this._raw||this._tangents[0].normalize(),this._tangents[t-1]=this._curve[t-1].subtract(this._curve[t-2]),this._raw||this._tangents[t-1].normalize();var n,r,i,o=this._tangents[0],a=this._normalVector(o,e);this._normals[0]=a,this._raw||this._normals[0].normalize(),this._binormals[0]=d.Cross(o,this._normals[0]),this._raw||this._binormals[0].normalize(),this._distances[0]=0;for(var s=1;s<t;s++)n=this._getLastNonNullVector(s),s<t-1&&(r=this._getFirstNonNullVector(s),this._tangents[s]=n.add(r),this._tangents[s].normalize()),this._distances[s]=this._distances[s-1]+n.length(),this._normals[s]=d.Cross(this._binormals[s-1],i=this._tangents[s]),this._raw||this._normals[s].normalize(),this._binormals[s]=d.Cross(i,this._normals[s]),this._raw||this._binormals[s].normalize()},e.prototype._getFirstNonNullVector=function(e){for(var t=1,n=this._curve[e+t].subtract(this._curve[e]);0===n.length()&&e+t+1<this._curve.length;)n=this._curve[e+ ++t].subtract(this._curve[e]);return n},e.prototype._getLastNonNullVector=function(e){for(var t=1,n=this._curve[e].subtract(this._curve[e-t]);0===n.length()&&e>t+1;)n=this._curve[e].subtract(this._curve[e-++t]);return n},e.prototype._normalVector=function(e,t){var n,r,i=e.length();return 0===i&&(i=1),null==t?(r=o.a.WithinEpsilon(Math.abs(e.y)/i,1,u)?o.a.WithinEpsilon(Math.abs(e.x)/i,1,u)?o.a.WithinEpsilon(Math.abs(e.z)/i,1,u)?d.Zero():new d(0,0,1):new d(1,0,0):new d(0,-1,0),n=d.Cross(e,r)):(n=d.Cross(e,t),d.CrossToRef(n,e,n)),n.normalize(),n},e}(),C=function(){function e(e){this._length=0,this._points=e,this._length=this._computeLength(e)}return e.CreateQuadraticBezier=function(t,n,r,i){i=i>2?i:3;for(var o=new Array,a=function(e,t,n,r){return(1-e)*(1-e)*t+2*e*(1-e)*n+e*e*r},s=0;s<=i;s++)o.push(new d(a(s/i,t.x,n.x,r.x),a(s/i,t.y,n.y,r.y),a(s/i,t.z,n.z,r.z)));return new e(o)},e.CreateCubicBezier=function(t,n,r,i,o){o=o>3?o:4;for(var a=new Array,s=function(e,t,n,r,i){return(1-e)*(1-e)*(1-e)*t+3*e*(1-e)*(1-e)*n+3*e*e*(1-e)*r+e*e*e*i},u=0;u<=o;u++)a.push(new d(s(u/o,t.x,n.x,r.x,i.x),s(u/o,t.y,n.y,r.y,i.y),s(u/o,t.z,n.z,r.z,i.z)));return new e(a)},e.CreateHermiteSpline=function(t,n,r,i,o){for(var a=new Array,s=1/o,u=0;u<=o;u++)a.push(d.Hermite(t,n,r,i,u*s));return new e(a)},e.CreateCatmullRomSpline=function(t,n,r){var i=new Array,o=1/n,a=0;if(r){for(var s=t.length,u=0;u<s;u++){a=0;for(var l=0;l<n;l++)i.push(d.CatmullRom(t[u%s],t[(u+1)%s],t[(u+2)%s],t[(u+3)%s],a)),a+=o}i.push(i[0])}else{var c=new Array;for(c.push(t[0].clone()),Array.prototype.push.apply(c,t),c.push(t[t.length-1].clone()),u=0;u<c.length-3;u++)for(a=0,l=0;l<n;l++)i.push(d.CatmullRom(c[u],c[u+1],c[u+2],c[u+3],a)),a+=o;i.push(d.CatmullRom(c[--u],c[u+1],c[u+2],c[u+3],a))}return new e(i)},e.prototype.getPoints=function(){return this._points},e.prototype.length=function(){return this._length},e.prototype.continue=function(t){for(var n=this._points[this._points.length-1],r=this._points.slice(),i=t.getPoints(),o=1;o<i.length;o++)r.push(i[o].subtract(i[0]).add(n));return new e(r)},e.prototype._computeLength=function(e){for(var t=0,n=1;n<e.length;n++)t+=e[n].subtract(e[n-1]).length();return t},e}(),P=function(){function e(e,t){void 0===e&&(e=d.Zero()),void 0===t&&(t=d.Up()),this.position=e,this.normal=t}return e.prototype.clone=function(){return new e(this.position.clone(),this.normal.clone())},e}(),R=function(){function e(e,t,n){void 0===e&&(e=d.Zero()),void 0===t&&(t=d.Up()),void 0===n&&(n=h.Zero()),this.position=e,this.normal=t,this.uv=n}return e.prototype.clone=function(){return new e(this.position.clone(),this.normal.clone(),this.uv.clone())},e}(),D=function(){function e(){}return e.Color3=i.a.BuildArray(3,l.Black),e.Color4=i.a.BuildArray(3,function(){return new c(0,0,0,0)}),e.Vector2=i.a.BuildArray(3,h.Zero),e.Vector3=i.a.BuildArray(13,d.Zero),e.Vector4=i.a.BuildArray(3,f.Zero),e.Quaternion=i.a.BuildArray(2,_.Zero),e.Matrix=i.a.BuildArray(8,m.Identity),e}(),O=function(){function e(){}return e.Vector3=i.a.BuildArray(6,d.Zero),e.Matrix=i.a.BuildArray(2,m.Identity),e.Quaternion=i.a.BuildArray(3,_.Zero),e}()},function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"e",function(){return u});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function s(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function u(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}},function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"c",function(){return d}),n.d(t,"m",function(){return f}),n.d(t,"e",function(){return p}),n.d(t,"h",function(){return _}),n.d(t,"n",function(){return m}),n.d(t,"o",function(){return g}),n.d(t,"k",function(){return v}),n.d(t,"g",function(){return y}),n.d(t,"f",function(){return b}),n.d(t,"i",function(){return T}),n.d(t,"l",function(){return E}),n.d(t,"j",function(){return x}),n.d(t,"d",function(){return M}),n.d(t,"a",function(){return A});var r=n(29),i=n(0),o=n(19),a={},s={},u=function(e,t,n){var i=e();r.a&&r.a.AddTagsTo(i,t.tags);var o=l(i);for(var a in o){var s=t[a];if(null!=s&&"uniqueId"!==a)switch(o[a].type){case 0:case 6:case 11:i[a]=s;break;case 1:i[a]=n||s.isRenderTarget?s:s.clone();break;case 2:case 3:case 4:case 5:case 7:case 10:case 12:i[a]=n?s:s.clone()}}return i};function l(e){var t=e.getClassName();if(s[t])return s[t];s[t]={};for(var n=s[t],r=e,i=t;i;){var o=a[i];for(var u in o)n[u]=o[u];var l=void 0,c=!1;do{if(!(l=Object.getPrototypeOf(r)).getClassName){c=!0;break}if(l.getClassName()!==i)break;r=l}while(l);if(c)break;i=l.getClassName(),r=l}return n}function c(e,t){return function(n,r){var i=function(e){var t=n.getClassName();return a[t]||(a[t]={}),a[t]}();i[r]||(i[r]={type:e,sourceName:t})}}function h(e,t){return void 0===t&&(t=null),function(e,t){return void 0===t&&(t=null),function(n,r){var i=t||"_"+r;Object.defineProperty(n,r,{get:function(){return this[i]},set:function(t){this[i]!==t&&(this[i]=t,n[e].apply(this))},enumerable:!0,configurable:!0})}}(e,t)}function d(e){return c(0,e)}function f(e){return c(1,e)}function p(e){return c(2,e)}function _(e){return c(3,e)}function m(e){return c(4,e)}function g(e){return c(5,e)}function v(e){return c(6,e)}function y(e){return c(7,e)}function b(e){return c(8,e)}function T(e){return c(9,e)}function E(e){return c(10,e)}function x(e){return c(12,e)}function M(e){return c(11,e)}var A=function(){function e(){}return e.AppendSerializedAnimations=function(e,t){if(e.animations){t.animations=[];for(var n=0;n<e.animations.length;n++)t.animations.push(e.animations[n].serialize())}},e.Serialize=function(e,t){t||(t={}),r.a&&(t.tags=r.a.GetTags(e));var n=l(e);for(var i in n){var o=n[i],a=o.sourceName||i,s=e[i];if(null!=s)switch(o.type){case 0:t[a]=s;break;case 1:t[a]=s.serialize();break;case 2:t[a]=s.asArray();break;case 3:t[a]=s.serialize();break;case 4:case 5:t[a]=s.asArray();break;case 6:t[a]=s.id;break;case 7:t[a]=s.serialize();break;case 8:t[a]=s.asArray();break;case 9:t[a]=s.serialize();break;case 10:t[a]=s.asArray();break;case 11:t[a]=s.id;case 12:t[a]=s.asArray()}}return t},e.Parse=function(t,n,o,a){void 0===a&&(a=null);var s=t();a||(a=""),r.a&&r.a.AddTagsTo(s,n.tags);var u=l(s);for(var c in u){var h=u[c],d=n[h.sourceName||c];if(null!=d){var f=s;switch(h.type){case 0:f[c]=d;break;case 1:o&&(f[c]=e._TextureParser(d,o,a));break;case 2:f[c]=i.e.FromArray(d);break;case 3:f[c]=e._FresnelParametersParser(d);break;case 4:f[c]=i.w.FromArray(d);break;case 5:f[c]=i.x.FromArray(d);break;case 6:o&&(f[c]=o.getLastMeshByID(d));break;case 7:f[c]=e._ColorCurvesParser(d);break;case 8:f[c]=i.f.FromArray(d);break;case 9:f[c]=e._ImageProcessingConfigurationParser(d);break;case 10:f[c]=i.q.FromArray(d);break;case 11:o&&(f[c]=o.getCameraByID(d));case 12:f[c]=i.j.FromArray(d)}}}return s},e.Clone=function(e,t){return u(e,t,!1)},e.Instanciate=function(e,t){return u(e,t,!0)},e._ImageProcessingConfigurationParser=function(e){throw o.a.WarnImport("ImageProcessingConfiguration")},e._FresnelParametersParser=function(e){throw o.a.WarnImport("FresnelParameters")},e._ColorCurvesParser=function(e){throw o.a.WarnImport("ColorCurves")},e._TextureParser=function(e,t,n){throw o.a.WarnImport("Texture")},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.ALPHA_DISABLE=0,e.ALPHA_ADD=1,e.ALPHA_COMBINE=2,e.ALPHA_SUBTRACT=3,e.ALPHA_MULTIPLY=4,e.ALPHA_MAXIMIZED=5,e.ALPHA_ONEONE=6,e.ALPHA_PREMULTIPLIED=7,e.ALPHA_PREMULTIPLIED_PORTERDUFF=8,e.ALPHA_INTERPOLATE=9,e.ALPHA_SCREENMODE=10,e.DELAYLOADSTATE_NONE=0,e.DELAYLOADSTATE_LOADED=1,e.DELAYLOADSTATE_LOADING=2,e.DELAYLOADSTATE_NOTLOADED=4,e.NEVER=512,e.ALWAYS=519,e.LESS=513,e.EQUAL=514,e.LEQUAL=515,e.GREATER=516,e.GEQUAL=518,e.NOTEQUAL=517,e.KEEP=7680,e.REPLACE=7681,e.INCR=7682,e.DECR=7683,e.INVERT=5386,e.INCR_WRAP=34055,e.DECR_WRAP=34056,e.TEXTURE_CLAMP_ADDRESSMODE=0,e.TEXTURE_WRAP_ADDRESSMODE=1,e.TEXTURE_MIRROR_ADDRESSMODE=2,e.TEXTUREFORMAT_ALPHA=0,e.TEXTUREFORMAT_LUMINANCE=1,e.TEXTUREFORMAT_LUMINANCE_ALPHA=2,e.TEXTUREFORMAT_RGB=4,e.TEXTUREFORMAT_RGBA=5,e.TEXTUREFORMAT_RED=6,e.TEXTUREFORMAT_R=6,e.TEXTUREFORMAT_RG=7,e.TEXTUREFORMAT_RED_INTEGER=8,e.TEXTUREFORMAT_R_INTEGER=8,e.TEXTUREFORMAT_RG_INTEGER=9,e.TEXTUREFORMAT_RGB_INTEGER=10,e.TEXTUREFORMAT_RGBA_INTEGER=11,e.TEXTURETYPE_UNSIGNED_BYTE=0,e.TEXTURETYPE_UNSIGNED_INT=0,e.TEXTURETYPE_FLOAT=1,e.TEXTURETYPE_HALF_FLOAT=2,e.TEXTURETYPE_BYTE=3,e.TEXTURETYPE_SHORT=4,e.TEXTURETYPE_UNSIGNED_SHORT=5,e.TEXTURETYPE_INT=6,e.TEXTURETYPE_UNSIGNED_INTEGER=7,e.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4=8,e.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1=9,e.TEXTURETYPE_UNSIGNED_SHORT_5_6_5=10,e.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV=11,e.TEXTURETYPE_UNSIGNED_INT_24_8=12,e.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV=13,e.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV=14,e.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV=15,e.TEXTURE_NEAREST_SAMPLINGMODE=1,e.TEXTURE_BILINEAR_SAMPLINGMODE=2,e.TEXTURE_TRILINEAR_SAMPLINGMODE=3,e.TEXTURE_NEAREST_NEAREST_MIPLINEAR=1,e.TEXTURE_LINEAR_LINEAR_MIPNEAREST=2,e.TEXTURE_LINEAR_LINEAR_MIPLINEAR=3,e.TEXTURE_NEAREST_NEAREST_MIPNEAREST=4,e.TEXTURE_NEAREST_LINEAR_MIPNEAREST=5,e.TEXTURE_NEAREST_LINEAR_MIPLINEAR=6,e.TEXTURE_NEAREST_LINEAR=7,e.TEXTURE_NEAREST_NEAREST=8,e.TEXTURE_LINEAR_NEAREST_MIPNEAREST=9,e.TEXTURE_LINEAR_NEAREST_MIPLINEAR=10,e.TEXTURE_LINEAR_LINEAR=11,e.TEXTURE_LINEAR_NEAREST=12,e.TEXTURE_EXPLICIT_MODE=0,e.TEXTURE_SPHERICAL_MODE=1,e.TEXTURE_PLANAR_MODE=2,e.TEXTURE_CUBIC_MODE=3,e.TEXTURE_PROJECTION_MODE=4,e.TEXTURE_SKYBOX_MODE=5,e.TEXTURE_INVCUBIC_MODE=6,e.TEXTURE_EQUIRECTANGULAR_MODE=7,e.TEXTURE_FIXED_EQUIRECTANGULAR_MODE=8,e.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE=9,e.SCALEMODE_FLOOR=1,e.SCALEMODE_NEAREST=2,e.SCALEMODE_CEILING=3,e.MATERIAL_TextureDirtyFlag=1,e.MATERIAL_LightDirtyFlag=2,e.MATERIAL_FresnelDirtyFlag=4,e.MATERIAL_AttributesDirtyFlag=8,e.MATERIAL_MiscDirtyFlag=16,e.MATERIAL_AllDirtyFlag=31,e.MATERIAL_TriangleFillMode=0,e.MATERIAL_WireFrameFillMode=1,e.MATERIAL_PointFillMode=2,e.MATERIAL_PointListDrawMode=3,e.MATERIAL_LineListDrawMode=4,e.MATERIAL_LineLoopDrawMode=5,e.MATERIAL_LineStripDrawMode=6,e.MATERIAL_TriangleStripDrawMode=7,e.MATERIAL_TriangleFanDrawMode=8,e.MATERIAL_ClockWiseSideOrientation=0,e.MATERIAL_CounterClockWiseSideOrientation=1,e.ACTION_NothingTrigger=0,e.ACTION_OnPickTrigger=1,e.ACTION_OnLeftPickTrigger=2,e.ACTION_OnRightPickTrigger=3,e.ACTION_OnCenterPickTrigger=4,e.ACTION_OnPickDownTrigger=5,e.ACTION_OnDoublePickTrigger=6,e.ACTION_OnPickUpTrigger=7,e.ACTION_OnPickOutTrigger=16,e.ACTION_OnLongPressTrigger=8,e.ACTION_OnPointerOverTrigger=9,e.ACTION_OnPointerOutTrigger=10,e.ACTION_OnEveryFrameTrigger=11,e.ACTION_OnIntersectionEnterTrigger=12,e.ACTION_OnIntersectionExitTrigger=13,e.ACTION_OnKeyDownTrigger=14,e.ACTION_OnKeyUpTrigger=15,e.PARTICLES_BILLBOARDMODE_Y=2,e.PARTICLES_BILLBOARDMODE_ALL=7,e.PARTICLES_BILLBOARDMODE_STRETCHED=8,e.PARTICLES_BaseAssetsUrl="https://assets.babylonjs.com/particles",e.MESHES_CULLINGSTRATEGY_STANDARD=0,e.MESHES_CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY=1,e.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION=2,e.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY=3,e.SCENELOADER_NO_LOGGING=0,e.SCENELOADER_MINIMAL_LOGGING=1,e.SCENELOADER_SUMMARY_LOGGING=2,e.SCENELOADER_DETAILED_LOGGING=3,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r=function(){function e(e,t,n,r,i,o,a){void 0===r&&(r=0),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===a&&(a=!1),this._engine=e.getScene?e.getScene().getEngine():e,this._updatable=n,this._instanced=o,this._data=t,this.byteStride=a?r:r*Float32Array.BYTES_PER_ELEMENT,i||this.create()}return e.prototype.createVertexBuffer=function(e,t,n,r,o,a){void 0===a&&(a=!1);var s=a?t:t*Float32Array.BYTES_PER_ELEMENT,u=r?a?r:r*Float32Array.BYTES_PER_ELEMENT:this.byteStride;return new i(this._engine,this,e,this._updatable,!0,u,void 0===o?this._instanced:o,s,n,void 0,void 0,!0)},e.prototype.isUpdatable=function(){return this._updatable},e.prototype.getData=function(){return this._data},e.prototype.getBuffer=function(){return this._buffer},e.prototype.getStrideSize=function(){return this.byteStride/Float32Array.BYTES_PER_ELEMENT},e.prototype.create=function(e){void 0===e&&(e=null),!e&&this._buffer||(e=e||this._data)&&(this._buffer?this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,e),this._data=e):this._updatable?(this._buffer=this._engine.createDynamicVertexBuffer(e),this._data=e):this._buffer=this._engine.createVertexBuffer(e))},e.prototype._rebuild=function(){this._buffer=null,this.create(this._data)},e.prototype.update=function(e){this.create(e)},e.prototype.updateDirectly=function(e,t,n,r){void 0===r&&(r=!1),this._buffer&&this._updatable&&(this._engine.updateDynamicVertexBuffer(this._buffer,e,r?t:t*Float32Array.BYTES_PER_ELEMENT,n?n*this.byteStride:void 0),this._data=null)},e.prototype.dispose=function(){this._buffer&&this._engine._releaseBuffer(this._buffer)&&(this._buffer=null)},e}(),i=function(){function e(t,n,i,o,a,s,u,l,c,h,d,f){if(void 0===d&&(d=!1),void 0===f&&(f=!1),n instanceof r?(this._buffer=n,this._ownsBuffer=!1):(this._buffer=new r(t,n,o,s,a,u,f),this._ownsBuffer=!0),this._kind=i,null==h){var p=this.getData();this.type=e.FLOAT,p instanceof Int8Array?this.type=e.BYTE:p instanceof Uint8Array?this.type=e.UNSIGNED_BYTE:p instanceof Int16Array?this.type=e.SHORT:p instanceof Uint16Array?this.type=e.UNSIGNED_SHORT:p instanceof Int32Array?this.type=e.INT:p instanceof Uint32Array&&(this.type=e.UNSIGNED_INT)}else this.type=h;var _=e.GetTypeByteLength(this.type);f?(this._size=c||(s?s/_:e.DeduceStride(i)),this.byteStride=s||this._buffer.byteStride||this._size*_,this.byteOffset=l||0):(this._size=c||s||e.DeduceStride(i),this.byteStride=s?s*_:this._buffer.byteStride||this._size*_,this.byteOffset=(l||0)*_),this.normalized=d,this._instanced=void 0!==u&&u,this._instanceDivisor=u?1:0}return Object.defineProperty(e.prototype,"instanceDivisor",{get:function(){return this._instanceDivisor},set:function(e){this._instanceDivisor=e,this._instanced=0!=e},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){this._buffer&&this._buffer._rebuild()},e.prototype.getKind=function(){return this._kind},e.prototype.isUpdatable=function(){return this._buffer.isUpdatable()},e.prototype.getData=function(){return this._buffer.getData()},e.prototype.getBuffer=function(){return this._buffer.getBuffer()},e.prototype.getStrideSize=function(){return this.byteStride/e.GetTypeByteLength(this.type)},e.prototype.getOffset=function(){return this.byteOffset/e.GetTypeByteLength(this.type)},e.prototype.getSize=function(){return this._size},e.prototype.getIsInstanced=function(){return this._instanced},e.prototype.getInstanceDivisor=function(){return this._instanceDivisor},e.prototype.create=function(e){this._buffer.create(e)},e.prototype.update=function(e){this._buffer.update(e)},e.prototype.updateDirectly=function(e,t,n){void 0===n&&(n=!1),this._buffer.updateDirectly(e,t,void 0,n)},e.prototype.dispose=function(){this._ownsBuffer&&this._buffer.dispose()},e.prototype.forEach=function(t,n){e.ForEach(this._buffer.getData(),this.byteOffset,this.byteStride,this._size,this.type,t,this.normalized,n)},e.DeduceStride=function(t){switch(t){case e.UVKind:case e.UV2Kind:case e.UV3Kind:case e.UV4Kind:case e.UV5Kind:case e.UV6Kind:return 2;case e.NormalKind:case e.PositionKind:return 3;case e.ColorKind:case e.MatricesIndicesKind:case e.MatricesIndicesExtraKind:case e.MatricesWeightsKind:case e.MatricesWeightsExtraKind:case e.TangentKind:return 4;default:throw new Error("Invalid kind '"+t+"'")}},e.GetTypeByteLength=function(t){switch(t){case e.BYTE:case e.UNSIGNED_BYTE:return 1;case e.SHORT:case e.UNSIGNED_SHORT:return 2;case e.INT:case e.FLOAT:return 4;default:throw new Error("Invalid type '"+t+"'")}},e.ForEach=function(t,n,r,i,o,a,s,u){if(t instanceof Array)for(var l=n/4,c=r/4,h=0;h<a;h+=i){for(var d=0;d<i;d++)u(t[l+d],h+d);l+=c}else{var f=t instanceof ArrayBuffer?new DataView(t):new DataView(t.buffer,t.byteOffset,t.byteLength),p=e.GetTypeByteLength(o);for(h=0;h<a;h+=i){var _=n;for(d=0;d<i;d++)u(e._GetFloatValue(f,o,_,s),h+d),_+=p;n+=r}}},e._GetFloatValue=function(t,n,r,i){switch(n){case e.BYTE:var o=t.getInt8(r);return i&&(o=Math.max(o/127,-1)),o;case e.UNSIGNED_BYTE:return o=t.getUint8(r),i&&(o/=255),o;case e.SHORT:return o=t.getInt16(r,!0),i&&(o=Math.max(o/16383,-1)),o;case e.UNSIGNED_SHORT:return o=t.getUint16(r,!0),i&&(o/=65535),o;case e.FLOAT:return t.getFloat32(r,!0);default:throw new Error("Invalid component type "+n)}},e.BYTE=5120,e.UNSIGNED_BYTE=5121,e.SHORT=5122,e.UNSIGNED_SHORT=5123,e.INT=5124,e.UNSIGNED_INT=5125,e.FLOAT=5126,e.PositionKind="position",e.NormalKind="normal",e.TangentKind="tangent",e.UVKind="uv",e.UV2Kind="uv2",e.UV3Kind="uv3",e.UV4Kind="uv4",e.UV5Kind="uv5",e.UV6Kind="uv6",e.ColorKind="color",e.MatricesIndicesKind="matricesIndices",e.MatricesWeightsKind="matricesWeights",e.MatricesIndicesExtraKind="matricesIndicesExtra",e.MatricesWeightsExtraKind="matricesWeightsExtra",e}()},function(e,t,n){"use strict";n.d(t,"c",function(){return s}),n.d(t,"b",function(){return u}),n.d(t,"a",function(){return l});var r=n(8),i=n(3),o=n(35),a=n(6),s=function(){function e(){this._defines={},this._currentRank=32,this._maxRank=-1,this._mesh=null}return e.prototype.unBindMesh=function(){this._mesh=null},e.prototype.addFallback=function(e,t){this._defines[e]||(e<this._currentRank&&(this._currentRank=e),e>this._maxRank&&(this._maxRank=e),this._defines[e]=new Array),this._defines[e].push(t)},e.prototype.addCPUSkinningFallback=function(e,t){this._mesh=t,e<this._currentRank&&(this._currentRank=e),e>this._maxRank&&(this._maxRank=e)},Object.defineProperty(e.prototype,"isMoreFallbacks",{get:function(){return this._currentRank<=this._maxRank},enumerable:!0,configurable:!0}),e.prototype.reduce=function(e,t){if(this._mesh&&this._mesh.computeBonesUsingShaders&&this._mesh.numBoneInfluencers>0&&this._mesh.material){this._mesh.computeBonesUsingShaders=!1,e=e.replace("#define NUM_BONE_INFLUENCERS "+this._mesh.numBoneInfluencers,"#define NUM_BONE_INFLUENCERS 0"),t._bonesComputationForcedToCPU=!0;for(var n=this._mesh.getScene(),r=0;r<n.meshes.length;r++){var i=n.meshes[r];if(i.material&&i.computeBonesUsingShaders&&0!==i.numBoneInfluencers)if(i.material.getEffect()===t)i.computeBonesUsingShaders=!1;else if(i.subMeshes)for(var o=0,a=i.subMeshes;o<a.length;o++)if(a[o].effect===t){i.computeBonesUsingShaders=!1;break}}}else{var s=this._defines[this._currentRank];if(s)for(r=0;r<s.length;r++)e=e.replace("#define "+s[r],"");this._currentRank++}return e},e}(),u=function(){},l=function(){function e(t,n,i,o,a,s,u,l,c,h){var d,f,p=this;if(void 0===o&&(o=null),void 0===s&&(s=null),void 0===u&&(u=null),void 0===l&&(l=null),void 0===c&&(c=null),this.name=null,this.defines="",this.onCompiled=null,this.onError=null,this.onBind=null,this.uniqueId=0,this.onCompileObservable=new r.c,this.onErrorObservable=new r.c,this._onBindObservable=null,this._bonesComputationForcedToCPU=!1,this._uniformBuffersNames={},this._samplers={},this._isReady=!1,this._compilationError="",this._uniforms={},this._key="",this._fallbacks=null,this._vertexSourceCode="",this._fragmentSourceCode="",this._vertexSourceCodeOverride="",this._fragmentSourceCodeOverride="",this._transformFeedbackVaryings=null,this._pipelineContext=null,this._valueCache={},this.name=t,n.attributes){var _=n;if(this._engine=i,this._attributesNames=_.attributes,this._uniformsNames=_.uniformsNames.concat(_.samplers),this._samplerList=_.samplers.slice(),this.defines=_.defines,this.onError=_.onError,this.onCompiled=_.onCompiled,this._fallbacks=_.fallbacks,this._indexParameters=_.indexParameters,this._transformFeedbackVaryings=_.transformFeedbackVaryings,_.uniformBuffersNames)for(var m=0;m<_.uniformBuffersNames.length;m++)this._uniformBuffersNames[_.uniformBuffersNames[m]]=m}else this._engine=a,this.defines=null==s?"":s,this._uniformsNames=i.concat(o),this._samplerList=o?o.slice():[],this._attributesNames=n,this.onError=c,this.onCompiled=l,this._indexParameters=h,this._fallbacks=u;this.uniqueId=e._uniqueIdSeed++,t.vertexElement?(d=document.getElementById(t.vertexElement))||(d=t.vertexElement):d=t.vertex||t,t.fragmentElement?(f=document.getElementById(t.fragmentElement))||(f=t.fragmentElement):f=t.fragment||t,this._loadVertexShader(d,function(e){p._processIncludes(e,function(e){p._processShaderConversion(e,!1,function(e){p._loadFragmentShader(f,function(n){p._processIncludes(n,function(n){p._processShaderConversion(n,!0,function(n){if(t){var r=t.fragmentElement||t.fragment||t;p._vertexSourceCode="#define SHADER_NAME vertex:"+(t.vertexElement||t.vertex||t)+"\n"+e,p._fragmentSourceCode="#define SHADER_NAME fragment:"+r+"\n"+n}else p._vertexSourceCode=e,p._fragmentSourceCode=n;p._prepareEffect()})})})})})})}return Object.defineProperty(e.prototype,"onBindObservable",{get:function(){return this._onBindObservable||(this._onBindObservable=new r.c),this._onBindObservable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),e.prototype.isReady=function(){return!!this._isReady||!!this._pipelineContext&&this._pipelineContext.isReady},e.prototype.getEngine=function(){return this._engine},e.prototype.getPipelineContext=function(){return this._pipelineContext},e.prototype.getAttributesNames=function(){return this._attributesNames},e.prototype.getAttributeLocation=function(e){return this._attributes[e]},e.prototype.getAttributeLocationByName=function(e){var t=this._attributesNames.indexOf(e);return this._attributes[t]},e.prototype.getAttributesCount=function(){return this._attributes.length},e.prototype.getUniformIndex=function(e){return this._uniformsNames.indexOf(e)},e.prototype.getUniform=function(e){return this._uniforms[e]},e.prototype.getSamplers=function(){return this._samplerList},e.prototype.getCompilationError=function(){return this._compilationError},e.prototype.executeWhenCompiled=function(e){var t=this;this.isReady()?e(this):(this.onCompileObservable.add(function(t){e(t)}),this._pipelineContext&&!this._pipelineContext.isAsync||setTimeout(function(){t._checkIsReady()},16))},e.prototype._checkIsReady=function(){var e=this;this.isReady()||setTimeout(function(){e._checkIsReady()},16)},e.prototype._loadVertexShader=function(t,n){var r;o.a.IsWindowObjectExist()&&t instanceof HTMLElement?n(o.a.GetDOMTextContent(t)):"base64:"!==t.substr(0,7)?e.ShadersStore[t+"VertexShader"]?n(e.ShadersStore[t+"VertexShader"]):(r="."===t[0]||"/"===t[0]||t.indexOf("http")>-1?t:e.ShadersRepository+t,this._engine._loadFile(r+".vertex.fx",n)):n(window.atob(t.substr(7)))},e.prototype._loadFragmentShader=function(t,n){var r;o.a.IsWindowObjectExist()&&t instanceof HTMLElement?n(o.a.GetDOMTextContent(t)):"base64:"!==t.substr(0,7)?e.ShadersStore[t+"PixelShader"]?n(e.ShadersStore[t+"PixelShader"]):e.ShadersStore[t+"FragmentShader"]?n(e.ShadersStore[t+"FragmentShader"]):(r="."===t[0]||"/"===t[0]||t.indexOf("http")>-1?t:e.ShadersRepository+t,this._engine._loadFile(r+".fragment.fx",n)):n(window.atob(t.substr(7)))},e.prototype._dumpShadersSource=function(e,t,n){var r=(this._engine.webGLVersion>1?"#version 300 es\n#define WEBGL2 \n":"")+(n?n+"\n":"");t=r+t;var i=2,o=/\n/gm,s="\n1\t"+(e=r+e).replace(o,function(){return"\n"+i+++"\t"});i=2;var u="\n1\t"+t.replace(o,function(){return"\n"+i+++"\t"});this.name.vertexElement?(a.a.Error("Vertex shader: "+this.name.vertexElement+s),a.a.Error("Fragment shader: "+this.name.fragmentElement+u)):this.name.vertex?(a.a.Error("Vertex shader: "+this.name.vertex+s),a.a.Error("Fragment shader: "+this.name.fragment+u)):(a.a.Error("Vertex shader: "+this.name+s),a.a.Error("Fragment shader: "+this.name+u))},e.prototype._processShaderConversion=function(e,t,n){var r=this._processPrecision(e);if(1!=this._engine.webGLVersion)if(-1===r.indexOf("#version 3")){var i=-1!==r.search(/#extension.+GL_EXT_draw_buffers.+require/),o=r.replace(/#extension.+(GL_OVR_multiview2|GL_OES_standard_derivatives|GL_EXT_shader_texture_lod|GL_EXT_frag_depth|GL_EXT_draw_buffers).+(enable|require)/g,"");o=(o=(o=(o=o.replace(/varying(?![\n\r])\s/g,t?"in ":"out ")).replace(/attribute[ \t]/g,"in ")).replace(/[ \t]attribute/g," in")).replace(/texture2D\s*\(/g,"texture("),t&&(o=(o=(o=(o=(o=(o=(o=o.replace(/texture2DLodEXT\s*\(/g,"textureLod(")).replace(/textureCubeLodEXT\s*\(/g,"textureLod(")).replace(/textureCube\s*\(/g,"texture(")).replace(/gl_FragDepthEXT/g,"gl_FragDepth")).replace(/gl_FragColor/g,"glFragColor")).replace(/gl_FragData/g,"glFragData")).replace(/void\s+?main\s*\(/g,(i?"":"out vec4 glFragColor;\n")+"void main(")),-1!==this.defines.indexOf("#define MULTIVIEW\n")&&!t&&(o="#extension GL_OVR_multiview2 : require\nlayout (num_views = 2) in;\n"+o),n(o)}else n(r.replace("#version 300 es",""));else n(r)},e.prototype._processIncludes=function(t,n){for(var r=this,i=/#include<(.+)>(\((.*)\))*(\[(.*)\])*/g,o=i.exec(t),a=new String(t);null!=o;){var s=o[1];if(-1!==s.indexOf("__decl__")&&(s=s.replace(/__decl__/,""),this._engine.supportsUniformBuffers&&(s=(s=s.replace(/Vertex/,"Ubo")).replace(/Fragment/,"Ubo")),s+="Declaration"),!e.IncludesShadersStore[s])return void this._engine._loadFile(e.ShadersRepository+"ShadersInclude/"+s+".fx",function(t){e.IncludesShadersStore[s]=t,r._processIncludes(a,n)});var u=e.IncludesShadersStore[s];if(o[2])for(var l=o[3].split(","),c=0;c<l.length;c+=2){var h=new RegExp(l[c],"g");u=u.replace(h,l[c+1])}if(o[4]){var d=o[5];if(-1!==d.indexOf("..")){var f=d.split(".."),p=parseInt(f[0]),_=parseInt(f[1]),m=u.slice(0);u="",isNaN(_)&&(_=this._indexParameters[f[1]]);for(var g=p;g<_;g++)this._engine.supportsUniformBuffers||(m=m.replace(/light\{X\}.(\w*)/g,function(e,t){return t+"{X}"})),u+=m.replace(/\{X\}/g,g.toString())+"\n"}else this._engine.supportsUniformBuffers||(u=u.replace(/light\{X\}.(\w*)/g,function(e,t){return t+"{X}"})),u=u.replace(/\{X\}/g,d)}a=a.replace(o[0],u),o=i.exec(t)}n(a)},e.prototype._processPrecision=function(e){var t=this._engine._shouldUseHighPrecisionShader;return-1===e.indexOf("precision highp float")?e=t?"precision highp float;\n"+e:"precision mediump float;\n"+e:t||(e=e.replace("precision highp float","precision mediump float")),e},e.prototype._rebuildProgram=function(e,t,n,r){var o=this;this._isReady=!1,this._vertexSourceCodeOverride=e,this._fragmentSourceCodeOverride=t,this.onError=function(e,t){r&&r(t)},this.onCompiled=function(){for(var e=o.getEngine().scenes,t=0;t<e.length;t++)e[t].markAllMaterialsAsDirty(i.a.MATERIAL_AllDirtyFlag);o._pipelineContext._handlesSpectorRebuildCallback(n)},this._fallbacks=null,this._prepareEffect()},e.prototype._prepareEffect=function(){var e=this,t=this._attributesNames,n=this.defines,r=this._fallbacks;this._valueCache={};var i=this._pipelineContext;try{var o=this._engine;this._pipelineContext=o.createPipelineContext();var s=this._rebuildProgram.bind(this);this._vertexSourceCodeOverride&&this._fragmentSourceCodeOverride?o._preparePipelineContext(this._pipelineContext,this._vertexSourceCodeOverride,this._fragmentSourceCodeOverride,!0,s,null,this._transformFeedbackVaryings):o._preparePipelineContext(this._pipelineContext,this._vertexSourceCode,this._fragmentSourceCode,!1,s,n,this._transformFeedbackVaryings),o._executeWhenRenderingStateIsCompiled(this._pipelineContext,function(){if(o.supportsUniformBuffers)for(var n in e._uniformBuffersNames)e.bindUniformBlock(n,e._uniformBuffersNames[n]);var r;for(o.getUniforms(e._pipelineContext,e._uniformsNames).forEach(function(t,n){e._uniforms[e._uniformsNames[n]]=t}),e._attributes=o.getAttributes(e._pipelineContext,t),r=0;r<e._samplerList.length;r++)null==e.getUniform(e._samplerList[r])&&(e._samplerList.splice(r,1),r--);e._samplerList.forEach(function(t,n){e._samplers[t]=n}),o.bindSamplers(e),e._compilationError="",e._isReady=!0,e.onCompiled&&e.onCompiled(e),e.onCompileObservable.notifyObservers(e),e.onCompileObservable.clear(),e._fallbacks&&e._fallbacks.unBindMesh(),i&&e.getEngine()._deletePipelineContext(i)}),this._pipelineContext.isAsync&&this._checkIsReady()}catch(e){this._compilationError=e.message,a.a.Error("Unable to compile effect:"),a.a.Error("Uniforms: "+this._uniformsNames.map(function(e){return" "+e})),a.a.Error("Attributes: "+t.map(function(e){return" "+e})),a.a.Error("Error: "+this._compilationError),i&&(this._pipelineContext=i,this._isReady=!0,this.onError&&this.onError(this,this._compilationError),this.onErrorObservable.notifyObservers(this)),r&&r.isMoreFallbacks?(a.a.Error("Trying next fallback."),this.defines=r.reduce(this.defines,this),this._prepareEffect()):(this.onError&&this.onError(this,this._compilationError),this.onErrorObservable.notifyObservers(this),this.onErrorObservable.clear(),this._fallbacks&&this._fallbacks.unBindMesh())}},Object.defineProperty(e.prototype,"isSupported",{get:function(){return""===this._compilationError},enumerable:!0,configurable:!0}),e.prototype._bindTexture=function(e,t){this._engine._bindTexture(this._samplers[e],t)},e.prototype.setTexture=function(e,t){this._engine.setTexture(this._samplers[e],this._uniforms[e],t)},e.prototype.setDepthStencilTexture=function(e,t){this._engine.setDepthStencilTexture(this._samplers[e],this._uniforms[e],t)},e.prototype.setTextureArray=function(e,t){var n=e+"Ex";if(-1===this._samplerList.indexOf(n))for(var r=this._samplers[e],i=1;i<t.length;i++)this._samplerList.splice(r+i,0,n),this._samplers[n]=r+i;this._engine.setTextureArray(this._samplers[e],this._uniforms[e],t)},e.prototype.setTextureFromPostProcess=function(e,t){this._engine.setTextureFromPostProcess(this._samplers[e],t)},e.prototype.setTextureFromPostProcessOutput=function(e,t){this._engine.setTextureFromPostProcessOutput(this._samplers[e],t)},e.prototype._cacheMatrix=function(e,t){var n=this._valueCache[e],r=t.updateFlag;return(void 0===n||n!==r)&&(this._valueCache[e]=r,!0)},e.prototype._cacheFloat2=function(e,t,n){var r=this._valueCache[e];if(!r)return this._valueCache[e]=r=[t,n],!0;var i=!1;return r[0]!==t&&(r[0]=t,i=!0),r[1]!==n&&(r[1]=n,i=!0),i},e.prototype._cacheFloat3=function(e,t,n,r){var i=this._valueCache[e];if(!i)return this._valueCache[e]=i=[t,n,r],!0;var o=!1;return i[0]!==t&&(i[0]=t,o=!0),i[1]!==n&&(i[1]=n,o=!0),i[2]!==r&&(i[2]=r,o=!0),o},e.prototype._cacheFloat4=function(e,t,n,r,i){var o=this._valueCache[e];if(!o)return this._valueCache[e]=o=[t,n,r,i],!0;var a=!1;return o[0]!==t&&(o[0]=t,a=!0),o[1]!==n&&(o[1]=n,a=!0),o[2]!==r&&(o[2]=r,a=!0),o[3]!==i&&(o[3]=i,a=!0),a},e.prototype.bindUniformBuffer=function(t,n){var r=this._uniformBuffersNames[n];void 0!==r&&e._baseCache[r]!==t&&(e._baseCache[r]=t,this._engine.bindUniformBufferBase(t,r))},e.prototype.bindUniformBlock=function(e,t){this._engine.bindUniformBlock(this._pipelineContext,e,t)},e.prototype.setInt=function(e,t){var n=this._valueCache[e];return void 0!==n&&n===t?this:(this._valueCache[e]=t,this._engine.setInt(this._uniforms[e],t),this)},e.prototype.setIntArray=function(e,t){return this._valueCache[e]=null,this._engine.setIntArray(this._uniforms[e],t),this},e.prototype.setIntArray2=function(e,t){return this._valueCache[e]=null,this._engine.setIntArray2(this._uniforms[e],t),this},e.prototype.setIntArray3=function(e,t){return this._valueCache[e]=null,this._engine.setIntArray3(this._uniforms[e],t),this},e.prototype.setIntArray4=function(e,t){return this._valueCache[e]=null,this._engine.setIntArray4(this._uniforms[e],t),this},e.prototype.setFloatArray=function(e,t){return this._valueCache[e]=null,this._engine.setFloatArray(this._uniforms[e],t),this},e.prototype.setFloatArray2=function(e,t){return this._valueCache[e]=null,this._engine.setFloatArray2(this._uniforms[e],t),this},e.prototype.setFloatArray3=function(e,t){return this._valueCache[e]=null,this._engine.setFloatArray3(this._uniforms[e],t),this},e.prototype.setFloatArray4=function(e,t){return this._valueCache[e]=null,this._engine.setFloatArray4(this._uniforms[e],t),this},e.prototype.setArray=function(e,t){return this._valueCache[e]=null,this._engine.setArray(this._uniforms[e],t),this},e.prototype.setArray2=function(e,t){return this._valueCache[e]=null,this._engine.setArray2(this._uniforms[e],t),this},e.prototype.setArray3=function(e,t){return this._valueCache[e]=null,this._engine.setArray3(this._uniforms[e],t),this},e.prototype.setArray4=function(e,t){return this._valueCache[e]=null,this._engine.setArray4(this._uniforms[e],t),this},e.prototype.setMatrices=function(e,t){return t?(this._valueCache[e]=null,this._engine.setMatrices(this._uniforms[e],t),this):this},e.prototype.setMatrix=function(e,t){return this._cacheMatrix(e,t)&&this._engine.setMatrix(this._uniforms[e],t),this},e.prototype.setMatrix3x3=function(e,t){return this._valueCache[e]=null,this._engine.setMatrix3x3(this._uniforms[e],t),this},e.prototype.setMatrix2x2=function(e,t){return this._valueCache[e]=null,this._engine.setMatrix2x2(this._uniforms[e],t),this},e.prototype.setFloat=function(e,t){var n=this._valueCache[e];return void 0!==n&&n===t?this:(this._valueCache[e]=t,this._engine.setFloat(this._uniforms[e],t),this)},e.prototype.setBool=function(e,t){var n=this._valueCache[e];return void 0!==n&&n===t?this:(this._valueCache[e]=t,this._engine.setBool(this._uniforms[e],t?1:0),this)},e.prototype.setVector2=function(e,t){return this._cacheFloat2(e,t.x,t.y)&&this._engine.setFloat2(this._uniforms[e],t.x,t.y),this},e.prototype.setFloat2=function(e,t,n){return this._cacheFloat2(e,t,n)&&this._engine.setFloat2(this._uniforms[e],t,n),this},e.prototype.setVector3=function(e,t){return this._cacheFloat3(e,t.x,t.y,t.z)&&this._engine.setFloat3(this._uniforms[e],t.x,t.y,t.z),this},e.prototype.setFloat3=function(e,t,n,r){return this._cacheFloat3(e,t,n,r)&&this._engine.setFloat3(this._uniforms[e],t,n,r),this},e.prototype.setVector4=function(e,t){return this._cacheFloat4(e,t.x,t.y,t.z,t.w)&&this._engine.setFloat4(this._uniforms[e],t.x,t.y,t.z,t.w),this},e.prototype.setFloat4=function(e,t,n,r,i){return this._cacheFloat4(e,t,n,r,i)&&this._engine.setFloat4(this._uniforms[e],t,n,r,i),this},e.prototype.setColor3=function(e,t){return this._cacheFloat3(e,t.r,t.g,t.b)&&this._engine.setColor3(this._uniforms[e],t),this},e.prototype.setColor4=function(e,t,n){return this._cacheFloat4(e,t.r,t.g,t.b,n)&&this._engine.setColor4(this._uniforms[e],t,n),this},e.prototype.setDirectColor4=function(e,t){return this._cacheFloat4(e,t.r,t.g,t.b,t.a)&&this._engine.setDirectColor4(this._uniforms[e],t),this},e.prototype.dispose=function(){this._engine._releaseEffect(this)},e.RegisterShader=function(t,n,r){n&&(e.ShadersStore[t+"PixelShader"]=n),r&&(e.ShadersStore[t+"VertexShader"]=r)},e.ResetCache=function(){e._baseCache={}},e.ShadersRepository="src/Shaders/",e._uniqueIdSeed=0,e._baseCache={},e.ShadersStore={},e.IncludesShadersStore={},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e._AddLogEntry=function(t){e._LogCache=t+e._LogCache,e.OnNewCacheEntry&&e.OnNewCacheEntry(t)},e._FormatMessage=function(e){var t=function(e){return e<10?"0"+e:""+e},n=new Date;return"["+t(n.getHours())+":"+t(n.getMinutes())+":"+t(n.getSeconds())+"]: "+e},e._LogDisabled=function(e){},e._LogEnabled=function(t){var n=e._FormatMessage(t);console.log("BJS - "+n),e._AddLogEntry("<div style='color:white'>"+n+"</div><br>")},e._WarnDisabled=function(e){},e._WarnEnabled=function(t){var n=e._FormatMessage(t);console.warn("BJS - "+n),e._AddLogEntry("<div style='color:orange'>"+n+"</div><br>")},e._ErrorDisabled=function(e){},e._ErrorEnabled=function(t){e.errorsCount++;var n=e._FormatMessage(t);console.error("BJS - "+n),e._AddLogEntry("<div style='color:red'>"+n+"</div><br>")},Object.defineProperty(e,"LogCache",{get:function(){return e._LogCache},enumerable:!0,configurable:!0}),e.ClearLogCache=function(){e._LogCache="",e.errorsCount=0},Object.defineProperty(e,"LogLevels",{set:function(t){e.Log=(t&e.MessageLogLevel)===e.MessageLogLevel?e._LogEnabled:e._LogDisabled,e.Warn=(t&e.WarningLogLevel)===e.WarningLogLevel?e._WarnEnabled:e._WarnDisabled,e.Error=(t&e.ErrorLogLevel)===e.ErrorLogLevel?e._ErrorEnabled:e._ErrorDisabled},enumerable:!0,configurable:!0}),e.NoneLogLevel=0,e.MessageLogLevel=1,e.WarningLogLevel=2,e.ErrorLogLevel=4,e.AllLogLevel=7,e._LogCache="",e.errorsCount=0,e.Log=e._LogEnabled,e.Warn=e._WarnEnabled,e.Error=e._ErrorEnabled,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(1),i=n(2),o=n(8),a=n(9),s=n(0),u=n(44),l=n(3),c=n(22),h=n(19),d=function(e){function t(n,r,i,s,u,c,h,d,f,p){void 0===i&&(i=!1),void 0===s&&(s=!0),void 0===u&&(u=t.TRILINEAR_SAMPLINGMODE),void 0===c&&(c=null),void 0===h&&(h=null),void 0===d&&(d=null),void 0===f&&(f=!1);var _=e.call(this,r)||this;if(_.url=null,_.uOffset=0,_.vOffset=0,_.uScale=1,_.vScale=1,_.uAng=0,_.vAng=0,_.wAng=0,_.uRotationCenter=.5,_.vRotationCenter=.5,_.wRotationCenter=.5,_.inspectableCustomProperties=null,_._noMipmap=!1,_._invertY=!1,_._rowGenerationMatrix=null,_._cachedTextureMatrix=null,_._projectionModeMatrix=null,_._t0=null,_._t1=null,_._t2=null,_._cachedUOffset=-1,_._cachedVOffset=-1,_._cachedUScale=0,_._cachedVScale=0,_._cachedUAng=-1,_._cachedVAng=-1,_._cachedWAng=-1,_._cachedProjectionMatrixId=-1,_._cachedCoordinatesMode=-1,_._initialSamplingMode=t.BILINEAR_SAMPLINGMODE,_._buffer=null,_._deleteBuffer=!1,_._format=null,_._delayedOnLoad=null,_._delayedOnError=null,_.onLoadObservable=new o.c,_._isBlocking=!0,_.name=n||"",_.url=n,_._noMipmap=i,_._invertY=s,_._initialSamplingMode=u,_._buffer=d,_._deleteBuffer=f,p&&(_._format=p),!(r=_.getScene()))return _;r.getEngine().onBeforeTextureInitObservable.notifyObservers(_);var m=function(){_._texture&&_._texture._invertVScale&&(_.vScale=-1),_.onLoadObservable.hasObservers()&&_.onLoadObservable.notifyObservers(_),c&&c(),!_.isBlocking&&r&&r.resetCachedMaterial()};return _.url?(_._texture=_._getFromCache(_.url,i,u,s),_._texture?_._texture.isReady?a.h.SetImmediate(function(){return m()}):_._texture.onLoadedObservable.add(m):r.useDelayedTextureLoading?(_.delayLoadState=l.a.DELAYLOADSTATE_NOTLOADED,_._delayedOnLoad=m,_._delayedOnError=h):(_._texture=r.getEngine().createTexture(_.url,i,s,r,u,m,h,_._buffer,void 0,_._format),f&&delete _._buffer),_):(_._delayedOnLoad=m,_._delayedOnError=h,_)}return r.d(t,e),Object.defineProperty(t.prototype,"noMipmap",{get:function(){return this._noMipmap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBlocking",{get:function(){return this._isBlocking},set:function(e){this._isBlocking=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"samplingMode",{get:function(){return this._texture?this._texture.samplingMode:this._initialSamplingMode},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invertY",{get:function(){return this._invertY},enumerable:!0,configurable:!0}),t.prototype.updateURL=function(e,t,n){void 0===t&&(t=null),this.url&&(this.releaseInternalTexture(),this.getScene().markAllMaterialsAsDirty(l.a.MATERIAL_TextureDirtyFlag)),this.url=e,this._buffer=t,this.delayLoadState=l.a.DELAYLOADSTATE_NOTLOADED,n&&(this._delayedOnLoad=n),this.delayLoad()},t.prototype.delayLoad=function(){if(this.delayLoadState===l.a.DELAYLOADSTATE_NOTLOADED){var e=this.getScene();e&&(this.delayLoadState=l.a.DELAYLOADSTATE_LOADED,this._texture=this._getFromCache(this.url,this._noMipmap,this.samplingMode,this._invertY),this._texture?this._delayedOnLoad&&(this._texture.isReady?a.h.SetImmediate(this._delayedOnLoad):this._texture.onLoadedObservable.add(this._delayedOnLoad)):(this._texture=e.getEngine().createTexture(this.url,this._noMipmap,this._invertY,e,this.samplingMode,this._delayedOnLoad,this._delayedOnError,this._buffer,null,this._format),this._deleteBuffer&&delete this._buffer),this._delayedOnLoad=null,this._delayedOnError=null)}},t.prototype._prepareRowForTextureGeneration=function(e,t,n,r){e*=this.uScale,t*=this.vScale,s.x.TransformCoordinatesFromFloatsToRef(e-=this.uRotationCenter*this.uScale,t-=this.vRotationCenter*this.vScale,n-=this.wRotationCenter,this._rowGenerationMatrix,r),r.x+=this.uRotationCenter*this.uScale+this.uOffset,r.y+=this.vRotationCenter*this.vScale+this.vOffset,r.z+=this.wRotationCenter},t.prototype.getTextureMatrix=function(){var e=this;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale===this._cachedUScale&&this.vScale===this._cachedVScale&&this.uAng===this._cachedUAng&&this.vAng===this._cachedVAng&&this.wAng===this._cachedWAng)return this._cachedTextureMatrix;this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale,this._cachedVScale=this.vScale,this._cachedUAng=this.uAng,this._cachedVAng=this.vAng,this._cachedWAng=this.wAng,this._cachedTextureMatrix||(this._cachedTextureMatrix=s.j.Zero(),this._rowGenerationMatrix=new s.j,this._t0=s.x.Zero(),this._t1=s.x.Zero(),this._t2=s.x.Zero()),s.j.RotationYawPitchRollToRef(this.vAng,this.uAng,this.wAng,this._rowGenerationMatrix),this._prepareRowForTextureGeneration(0,0,0,this._t0),this._prepareRowForTextureGeneration(1,0,0,this._t1),this._prepareRowForTextureGeneration(0,1,0,this._t2),this._t1.subtractInPlace(this._t0),this._t2.subtractInPlace(this._t0),s.j.FromValuesToRef(this._t1.x,this._t1.y,this._t1.z,0,this._t2.x,this._t2.y,this._t2.z,0,this._t0.x,this._t0.y,this._t0.z,0,0,0,0,1,this._cachedTextureMatrix);var t=this.getScene();return t?(t.markAllMaterialsAsDirty(l.a.MATERIAL_TextureDirtyFlag,function(t){return t.hasTexture(e)}),this._cachedTextureMatrix):this._cachedTextureMatrix},t.prototype.getReflectionTextureMatrix=function(){var e=this,n=this.getScene();if(!n)return this._cachedTextureMatrix;if(this.uOffset===this._cachedUOffset&&this.vOffset===this._cachedVOffset&&this.uScale===this._cachedUScale&&this.vScale===this._cachedVScale&&this.coordinatesMode===this._cachedCoordinatesMode){if(this.coordinatesMode!==t.PROJECTION_MODE)return this._cachedTextureMatrix;if(this._cachedProjectionMatrixId===n.getProjectionMatrix().updateFlag)return this._cachedTextureMatrix}switch(this._cachedTextureMatrix||(this._cachedTextureMatrix=s.j.Zero()),this._projectionModeMatrix||(this._projectionModeMatrix=s.j.Zero()),this._cachedUOffset=this.uOffset,this._cachedVOffset=this.vOffset,this._cachedUScale=this.uScale,this._cachedVScale=this.vScale,this._cachedCoordinatesMode=this.coordinatesMode,this.coordinatesMode){case t.PLANAR_MODE:s.j.IdentityToRef(this._cachedTextureMatrix),this._cachedTextureMatrix[0]=this.uScale,this._cachedTextureMatrix[5]=this.vScale,this._cachedTextureMatrix[12]=this.uOffset,this._cachedTextureMatrix[13]=this.vOffset;break;case t.PROJECTION_MODE:s.j.FromValuesToRef(.5,0,0,0,0,-.5,0,0,0,0,0,0,.5,.5,1,1,this._projectionModeMatrix);var r=n.getProjectionMatrix();this._cachedProjectionMatrixId=r.updateFlag,r.multiplyToRef(this._projectionModeMatrix,this._cachedTextureMatrix);break;default:s.j.IdentityToRef(this._cachedTextureMatrix)}return n.markAllMaterialsAsDirty(l.a.MATERIAL_TextureDirtyFlag,function(t){return-1!==t.getActiveTextures().indexOf(e)}),this._cachedTextureMatrix},t.prototype.clone=function(){var e=this;return i.a.Clone(function(){return new t(e._texture?e._texture.url:null,e.getScene(),e._noMipmap,e._invertY,e.samplingMode,void 0,void 0,e._texture?e._texture._buffer:void 0)},this)},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return"string"==typeof this._buffer&&"data:"===this._buffer.substr(0,5)&&(t.base64String=this._buffer,t.name=t.name.replace("data:","")),t.invertY=this._invertY,t.samplingMode=this.samplingMode,t},t.prototype.getClassName=function(){return"Texture"},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.onLoadObservable.clear(),this._delayedOnLoad=null,this._delayedOnError=null},t.Parse=function(e,n,r){if(e.customType){var o=a.h.Instantiate(e.customType).Parse(e,n,r);return e.samplingMode&&o.updateSamplingMode&&o._samplingMode&&o._samplingMode!==e.samplingMode&&o.updateSamplingMode(e.samplingMode),o}if(e.isCube&&!e.isRenderTarget)return t._CubeTextureParser(e,n,r);if(!e.name&&!e.isRenderTarget)return null;var u=i.a.Parse(function(){var i,o=!0;if(e.noMipmap&&(o=!1),e.mirrorPlane){var a=t._CreateMirror(e.name,e.renderTargetSize,n,o);return a._waitingRenderList=e.renderList,a.mirrorPlane=s.n.FromArray(e.mirrorPlane),a}if(e.isRenderTarget){var u=null;if(e.isCube){if(n.reflectionProbes)for(var l=0;l<n.reflectionProbes.length;l++){var c=n.reflectionProbes[l];if(c.name===e.name)return c.cubeTexture}}else(u=t._CreateRenderTargetTexture(e.name,e.renderTargetSize,n,o))._waitingRenderList=e.renderList;return u}if(e.base64String)i=t.CreateFromBase64String(e.base64String,e.name,n,!o);else{var h=r+e.name;t.UseSerializedUrlIfAny&&e.url&&(h=e.url),i=new t(h,n,!o,e.invertY)}return i},e,n);if(e.samplingMode){var l=e.samplingMode;u&&u.samplingMode!==l&&u.updateSamplingMode(l)}if(u&&e.animations)for(var h=0;h<e.animations.length;h++){var d=e.animations[h],f=c.a.GetClass("BABYLON.Animation");f&&u.animations.push(f.Parse(d))}return u},t.CreateFromBase64String=function(e,n,r,i,o,a,s,u,c){return void 0===a&&(a=t.TRILINEAR_SAMPLINGMODE),void 0===s&&(s=null),void 0===u&&(u=null),void 0===c&&(c=l.a.TEXTUREFORMAT_RGBA),new t("data:"+n,r,i,o,a,s,u,e,!1,c)},t.LoadFromDataString=function(e,n,r,i,o,a,s,u,c,h){return void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===a&&(a=!0),void 0===s&&(s=t.TRILINEAR_SAMPLINGMODE),void 0===u&&(u=null),void 0===c&&(c=null),void 0===h&&(h=l.a.TEXTUREFORMAT_RGBA),"data:"!==e.substr(0,5)&&(e="data:"+e),new t(e,r,o,a,s,u,c,n,i,h)},t._CubeTextureParser=function(e,t,n){throw h.a.WarnImport("CubeTexture")},t._CreateMirror=function(e,t,n,r){throw h.a.WarnImport("MirrorTexture")},t._CreateRenderTargetTexture=function(e,t,n,r){throw h.a.WarnImport("RenderTargetTexture")},t.NEAREST_SAMPLINGMODE=l.a.TEXTURE_NEAREST_SAMPLINGMODE,t.NEAREST_NEAREST_MIPLINEAR=l.a.TEXTURE_NEAREST_NEAREST_MIPLINEAR,t.BILINEAR_SAMPLINGMODE=l.a.TEXTURE_BILINEAR_SAMPLINGMODE,t.LINEAR_LINEAR_MIPNEAREST=l.a.TEXTURE_LINEAR_LINEAR_MIPNEAREST,t.TRILINEAR_SAMPLINGMODE=l.a.TEXTURE_TRILINEAR_SAMPLINGMODE,t.LINEAR_LINEAR_MIPLINEAR=l.a.TEXTURE_LINEAR_LINEAR_MIPLINEAR,t.NEAREST_NEAREST_MIPNEAREST=l.a.TEXTURE_NEAREST_NEAREST_MIPNEAREST,t.NEAREST_LINEAR_MIPNEAREST=l.a.TEXTURE_NEAREST_LINEAR_MIPNEAREST,t.NEAREST_LINEAR_MIPLINEAR=l.a.TEXTURE_NEAREST_LINEAR_MIPLINEAR,t.NEAREST_LINEAR=l.a.TEXTURE_NEAREST_LINEAR,t.NEAREST_NEAREST=l.a.TEXTURE_NEAREST_NEAREST,t.LINEAR_NEAREST_MIPNEAREST=l.a.TEXTURE_LINEAR_NEAREST_MIPNEAREST,t.LINEAR_NEAREST_MIPLINEAR=l.a.TEXTURE_LINEAR_NEAREST_MIPLINEAR,t.LINEAR_LINEAR=l.a.TEXTURE_LINEAR_LINEAR,t.LINEAR_NEAREST=l.a.TEXTURE_LINEAR_NEAREST,t.EXPLICIT_MODE=l.a.TEXTURE_EXPLICIT_MODE,t.SPHERICAL_MODE=l.a.TEXTURE_SPHERICAL_MODE,t.PLANAR_MODE=l.a.TEXTURE_PLANAR_MODE,t.CUBIC_MODE=l.a.TEXTURE_CUBIC_MODE,t.PROJECTION_MODE=l.a.TEXTURE_PROJECTION_MODE,t.SKYBOX_MODE=l.a.TEXTURE_SKYBOX_MODE,t.INVCUBIC_MODE=l.a.TEXTURE_INVCUBIC_MODE,t.EQUIRECTANGULAR_MODE=l.a.TEXTURE_EQUIRECTANGULAR_MODE,t.FIXED_EQUIRECTANGULAR_MODE=l.a.TEXTURE_FIXED_EQUIRECTANGULAR_MODE,t.FIXED_EQUIRECTANGULAR_MIRRORED_MODE=l.a.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE,t.CLAMP_ADDRESSMODE=l.a.TEXTURE_CLAMP_ADDRESSMODE,t.WRAP_ADDRESSMODE=l.a.TEXTURE_WRAP_ADDRESSMODE,t.MIRROR_ADDRESSMODE=l.a.TEXTURE_MIRROR_ADDRESSMODE,t.UseSerializedUrlIfAny=!1,r.c([Object(i.c)()],t.prototype,"url",void 0),r.c([Object(i.c)()],t.prototype,"uOffset",void 0),r.c([Object(i.c)()],t.prototype,"vOffset",void 0),r.c([Object(i.c)()],t.prototype,"uScale",void 0),r.c([Object(i.c)()],t.prototype,"vScale",void 0),r.c([Object(i.c)()],t.prototype,"uAng",void 0),r.c([Object(i.c)()],t.prototype,"vAng",void 0),r.c([Object(i.c)()],t.prototype,"wAng",void 0),r.c([Object(i.c)()],t.prototype,"uRotationCenter",void 0),r.c([Object(i.c)()],t.prototype,"vRotationCenter",void 0),r.c([Object(i.c)()],t.prototype,"wRotationCenter",void 0),r.c([Object(i.c)()],t.prototype,"isBlocking",null),t}(u.a);i.a._TextureParser=d.Parse},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"d",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a});var r=function(){function e(e,t,n,r){void 0===t&&(t=!1),this.initalize(e,t,n,r)}return e.prototype.initalize=function(e,t,n,r){return void 0===t&&(t=!1),this.mask=e,this.skipNextObservers=t,this.target=n,this.currentTarget=r,this},e}(),i=function(e,t,n){void 0===n&&(n=null),this.callback=e,this.mask=t,this.scope=n,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1},o=function(){function e(){}return e.prototype.dispose=function(){if(this._observers&&this._observables)for(var e=0;e<this._observers.length;e++)this._observables[e].remove(this._observers[e]);this._observers=null,this._observables=null},e.Watch=function(t,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=null);var o=new e;o._observers=new Array,o._observables=t;for(var a=0,s=t;a<s.length;a++){var u=s[a].add(n,r,!1,i);u&&o._observers.push(u)}return o},e}(),a=function(){function e(e){this._observers=new Array,this._eventState=new r(0),e&&(this._onObserverAdded=e)}return e.prototype.add=function(e,t,n,r,o){if(void 0===t&&(t=-1),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===o&&(o=!1),!e)return null;var a=new i(e,t,r);return a.unregisterOnNextCall=o,n?this._observers.unshift(a):this._observers.push(a),this._onObserverAdded&&this._onObserverAdded(a),a},e.prototype.addOnce=function(e){return this.add(e,void 0,void 0,void 0,!0)},e.prototype.remove=function(e){return!!e&&-1!==this._observers.indexOf(e)&&(this._deferUnregister(e),!0)},e.prototype.removeCallback=function(e,t){for(var n=0;n<this._observers.length;n++)if(this._observers[n].callback===e&&(!t||t===this._observers[n].scope))return this._deferUnregister(this._observers[n]),!0;return!1},e.prototype._deferUnregister=function(e){var t=this;e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,setTimeout(function(){t._remove(e)},0)},e.prototype._remove=function(e){if(!e)return!1;var t=this._observers.indexOf(e);return-1!==t&&(this._observers.splice(t,1),!0)},e.prototype.makeObserverTopPriority=function(e){this._remove(e),this._observers.unshift(e)},e.prototype.makeObserverBottomPriority=function(e){this._remove(e),this._observers.push(e)},e.prototype.notifyObservers=function(e,t,n,r){if(void 0===t&&(t=-1),!this._observers.length)return!0;var i=this._eventState;i.mask=t,i.target=n,i.currentTarget=r,i.skipNextObservers=!1,i.lastReturnValue=e;for(var o=0,a=this._observers;o<a.length;o++){var s=a[o];if(!s._willBeUnregistered&&(s.mask&t&&(i.lastReturnValue=s.scope?s.callback.apply(s.scope,[e,i]):s.callback(e,i),s.unregisterOnNextCall&&this._deferUnregister(s)),i.skipNextObservers))return!1}return!0},e.prototype.notifyObserversWithPromise=function(e,t,n,r){var i=this;void 0===t&&(t=-1);var o=Promise.resolve(e);if(!this._observers.length)return o;var a=this._eventState;return a.mask=t,a.target=n,a.currentTarget=r,a.skipNextObservers=!1,this._observers.forEach(function(n){a.skipNextObservers||n._willBeUnregistered||n.mask&t&&(o=o.then(n.scope?function(t){return a.lastReturnValue=t,n.callback.apply(n.scope,[e,a])}:function(t){return a.lastReturnValue=t,n.callback(e,a)}),n.unregisterOnNextCall&&i._deferUnregister(n))}),o.then(function(){return e})},e.prototype.notifyObserver=function(e,t,n){void 0===n&&(n=-1);var r=this._eventState;r.mask=n,r.skipNextObservers=!1,e.callback(t,r)},e.prototype.hasObservers=function(){return this._observers.length>0},e.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},e.prototype.clone=function(){var t=new e;return t._observers=this._observers.slice(0),t},e.prototype.hasSpecificMask=function(e){void 0===e&&(e=-1);for(var t=0,n=this._observers;t<n.length;t++){var r=n[t];if(r.mask&e||r.mask===e)return!0}return!1},e}()},function(e,t,n){"use strict";n.d(t,"c",function(){return m}),n.d(t,"b",function(){return g}),n.d(t,"d",function(){return v}),n.d(t,"e",function(){return y}),n.d(t,"g",function(){return b}),n.d(t,"h",function(){return T}),n.d(t,"f",function(){return E}),n.d(t,"i",function(){return x}),n.d(t,"a",function(){return M});var r=n(1),i=n(0),o=n(12),a=n(8),s=n(59),u=n(3),l=n(35),c=n(6),h=n(22),d=n(32),f=n(47),p=n(19),_=n(60),m=function(){function e(){}return e.prototype.getColorToRef=function(e){this.color2?i.f.LerpToRef(this.color1,this.color2,Math.random(),e):e.copyFrom(this.color1)},e}(),g=function(){},v=function(){function e(){}return e.prototype.getFactor=function(){return void 0===this.factor2?this.factor1:o.a.Lerp(this.factor1,this.factor2,Math.random())},e}(),y=function(e){function t(n,r){var i=e.call(this,n)||this;return i.request=r,i.name="LoadFileError",t._setPrototypeOf(i,t.prototype),i}return r.d(t,e),t._setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t}(Error),b=function(){function e(){}return e.ExponentialBackoff=function(e,t){return void 0===e&&(e=3),void 0===t&&(t=500),function(n,r,i){return 0!==r.status||i>=e||-1!==n.indexOf("file:")?-1:Math.pow(2,i)*t}},e}(),T=function(){function e(){}return e.FetchToRef=function(e,t,n,r,i,o){var a=4*((Math.abs(e)*n%n|0)+(Math.abs(t)*r%r|0)*n);o.r=i[a]/255,o.g=i[a+1]/255,o.b=i[a+2]/255,o.a=i[a+3]/255},e.Mix=function(e,t,n){return e*(1-n)+t*n},e.Instantiate=function(t){if(e.RegisteredExternalClasses&&e.RegisteredExternalClasses[t])return e.RegisteredExternalClasses[t];var n=h.a.GetClass(t);if(n)return n;c.a.Warn(t+" not found, you may have missed an import.");for(var r=t.split("."),i=window||this,o=0,a=r.length;o<a;o++)i=i[r[o]];return"function"!=typeof i?null:i},e.Slice=function(e,t,n){return e.slice?e.slice(t,n):Array.prototype.slice.call(e,t,n)},e.SetImmediate=function(e){l.a.IsWindowObjectExist()&&window.setImmediate?window.setImmediate(e):setTimeout(e,1)},e.IsExponentOfTwo=function(e){var t=1;do{t*=2}while(t<e);return t===e},e.FloatRound=function(t){return Math.fround?Math.fround(t):e._tmpFloatArray[0]=t},e.CeilingPOT=function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e},e.FloorPOT=function(e){return e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,(e|=e>>16)-(e>>1)},e.NearestPOT=function(t){var n=e.CeilingPOT(t),r=e.FloorPOT(t);return n-t>t-r?r:n},e.GetExponentOfTwo=function(t,n,r){var i;switch(void 0===r&&(r=u.a.SCALEMODE_NEAREST),r){case u.a.SCALEMODE_FLOOR:i=e.FloorPOT(t);break;case u.a.SCALEMODE_NEAREST:i=e.NearestPOT(t);break;case u.a.SCALEMODE_CEILING:default:i=e.CeilingPOT(t)}return Math.min(i,n)},e.GetFilename=function(e){var t=e.lastIndexOf("/");return t<0?e:e.substring(t+1)},e.GetFolderPath=function(e,t){void 0===t&&(t=!1);var n=e.lastIndexOf("/");return n<0?t?e:"":e.substring(0,n+1)},e.ToDegrees=function(e){return 180*e/Math.PI},e.ToRadians=function(e){return e*Math.PI/180},e.EncodeArrayBufferTobase64=function(e){for(var t,n,r,i,o,a,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0,h=new Uint8Array(e);c<h.length;)i=(t=h[c++])>>2,o=(3&t)<<4|(n=c<h.length?h[c++]:Number.NaN)>>4,a=(15&n)<<2|(r=c<h.length?h[c++]:Number.NaN)>>6,s=63&r,isNaN(n)?a=s=64:isNaN(r)&&(s=64),l+=u.charAt(i)+u.charAt(o)+u.charAt(a)+u.charAt(s);return"data:image/png;base64,"+l},e.ExtractMinAndMaxIndexed=function(e,t,n,r,o){void 0===o&&(o=null);for(var a=new i.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),s=new i.x(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),u=n;u<n+r;u++){var l=3*t[u],c=e[l],h=e[l+1],d=e[l+2];a.minimizeInPlaceFromFloats(c,h,d),s.maximizeInPlaceFromFloats(c,h,d)}return o&&(a.x-=a.x*o.x+o.y,a.y-=a.y*o.x+o.y,a.z-=a.z*o.x+o.y,s.x+=s.x*o.x+o.y,s.y+=s.y*o.x+o.y,s.z+=s.z*o.x+o.y),{minimum:a,maximum:s}},e.ExtractMinAndMax=function(e,t,n,r,o){void 0===r&&(r=null);var a=new i.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),s=new i.x(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);o||(o=3);for(var u=t,l=t*o;u<t+n;u++,l+=o){var c=e[l],h=e[l+1],d=e[l+2];a.minimizeInPlaceFromFloats(c,h,d),s.maximizeInPlaceFromFloats(c,h,d)}return r&&(a.x-=a.x*r.x+r.y,a.y-=a.y*r.x+r.y,a.z-=a.z*r.x+r.y,s.x+=s.x*r.x+r.y,s.y+=s.y*r.x+r.y,s.z+=s.z*r.x+r.y),{minimum:a,maximum:s}},e.MakeArray=function(e,t){return!0===t||void 0!==e&&null!=e?Array.isArray(e)?e:[e]:null},e.GetPointerPrefix=function(){var e="pointer";return!l.a.IsWindowObjectExist()||window.PointerEvent||navigator.pointerEnabled||(e="mouse"),e},e.QueueNewFrame=function(e,t){return l.a.IsWindowObjectExist()?(t||(t=window),t.requestAnimationFrame?t.requestAnimationFrame(e):t.msRequestAnimationFrame?t.msRequestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.mozRequestAnimationFrame?t.mozRequestAnimationFrame(e):t.oRequestAnimationFrame?t.oRequestAnimationFrame(e):window.setTimeout(e,16)):setTimeout(e,16)},e.RequestFullscreen=function(e){var t=e.requestFullscreen||e.msRequestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen;t&&t.call(e)},e.ExitFullscreen=function(){var e=document;document.exitFullscreen?document.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msCancelFullScreen&&e.msCancelFullScreen()},e.SetCorsBehavior=function(t,n){if((!t||0!==t.indexOf("data:"))&&e.CorsBehavior)if("string"==typeof e.CorsBehavior||e.CorsBehavior instanceof String)n.crossOrigin=e.CorsBehavior;else{var r=e.CorsBehavior(t);r&&(n.crossOrigin=r)}},e.CleanUrl=function(e){return e.replace(/#/gm,"%23")},e.LoadImage=function(t,n,r,i){var o,a=!1;t instanceof ArrayBuffer?(o=URL.createObjectURL(new Blob([t])),a=!0):t instanceof Blob?(o=URL.createObjectURL(t),a=!0):(o=e.CleanUrl(t),o=e.PreprocessUrl(t));var u=new Image;e.SetCorsBehavior(o,u);var l=function(){u.removeEventListener("load",l),u.removeEventListener("error",h),n(u),a&&u.src&&URL.revokeObjectURL(u.src)},h=function(e){u.removeEventListener("load",l),u.removeEventListener("error",h),c.a.Error("Error while trying to load image: "+t),r&&r("Error while trying to load image: "+t,e),a&&u.src&&URL.revokeObjectURL(u.src)};u.addEventListener("load",l),u.addEventListener("error",h);var d=function(){u.src=o};if("data:"!==o.substr(0,5)&&i&&i.enableTexturesOffline)i.open(function(){i&&i.loadImage(o,u)},d);else{if(-1!==o.indexOf("file:")){var f=decodeURIComponent(o.substring(5).toLowerCase());if(s.a.FilesToLoad[f]){try{var p;try{p=URL.createObjectURL(s.a.FilesToLoad[f])}catch(e){p=URL.createObjectURL(s.a.FilesToLoad[f])}u.src=p,a=!0}catch(e){u.src=""}return u}}d()}return u},e.LoadFile=function(t,n,r,i,o,u){if(t=e.CleanUrl(t),-1!==(t=e.PreprocessUrl(t)).indexOf("file:")){var c=decodeURIComponent(t.substring(5).toLowerCase());if(s.a.FilesToLoad[c])return e.ReadFile(s.a.FilesToLoad[c],n,r,o)}var h=e.BaseUrl+t,d=!1,f={onCompleteObservable:new a.c,abort:function(){return d=!0}},p=function(){var t=new _.a,i=null;f.abort=function(){d=!0,t.readyState!==(XMLHttpRequest.DONE||4)&&t.abort(),null!==i&&(clearTimeout(i),i=null)};var a=function(s){t.open("GET",h),o&&(t.responseType="arraybuffer"),r&&t.addEventListener("progress",r);var c=function(){t.removeEventListener("loadend",c),f.onCompleteObservable.notifyObservers(f),f.onCompleteObservable.clear()};t.addEventListener("loadend",c);var p=function(){if(!d&&t.readyState===(XMLHttpRequest.DONE||4)){if(t.removeEventListener("readystatechange",p),t.status>=200&&t.status<300||0===t.status&&(!l.a.IsWindowObjectExist()||e.IsFileURL()))return void n(o?t.response:t.responseText,t.responseURL);var r=e.DefaultRetryStrategy;if(r){var f=r(h,t,s);if(-1!==f)return t.removeEventListener("loadend",c),t=new _.a,void(i=setTimeout(function(){return a(s+1)},f))}var m=new y("Error status: "+t.status+" "+t.statusText+" - Unable to load "+h,t);if(!u)throw m;u(t,m)}};t.addEventListener("readystatechange",p),t.send()};a(0)};if(i&&i.enableSceneOffline){var m=function(e){e&&e.status>400?u&&u(e):d||p()};i.open(function(){d||i&&i.loadFile(t,function(e){d||n(e),f.onCompleteObservable.notifyObservers(f)},r?function(e){d||r(e)}:void 0,m,o)},m)}else p();return f},e.LoadScript=function(e,t,n,r){if(l.a.IsWindowObjectExist()){var i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",e),r&&(o.id=r),o.onload=function(){t&&t()},o.onerror=function(t){n&&n("Unable to load script '"+e+"'",t)},i.appendChild(o)}},e.LoadScriptAsync=function(e,t){return new Promise(function(n,r){if(l.a.IsWindowObjectExist()){var i=document.getElementsByTagName("head")[0],o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("src",e),t&&(o.id=t),o.onload=function(){n(!0)},o.onerror=function(e){n(!1)},i.appendChild(o)}else n(!1)})},e.ReadFileAsDataURL=function(e,t,n){var r=new FileReader,i={onCompleteObservable:new a.c,abort:function(){return r.abort()}};return r.onloadend=function(e){i.onCompleteObservable.notifyObservers(i)},r.onload=function(e){t(e.target.result)},r.onprogress=n,r.readAsDataURL(e),i},e.ReadFile=function(e,t,n,r){var i=new FileReader,o={onCompleteObservable:new a.c,abort:function(){return i.abort()}};return i.onloadend=function(e){return o.onCompleteObservable.notifyObservers(o)},i.onerror=function(n){c.a.Log("Error while reading file: "+e.name),t(JSON.stringify({autoClear:!0,clearColor:[1,0,0],ambientColor:[0,0,0],gravity:[0,-9.807,0],meshes:[],cameras:[],lights:[]}))},i.onload=function(e){t(e.target.result)},n&&(i.onprogress=n),r?i.readAsArrayBuffer(e):i.readAsText(e),o},e.FileAsURL=function(e){var t=new Blob([e]);return(window.URL||window.webkitURL).createObjectURL(t)},e.Format=function(e,t){return void 0===t&&(t=2),e.toFixed(t)},e.CheckExtends=function(e,t,n){t.minimizeInPlace(e),n.maximizeInPlace(e)},e.DeepCopy=function(e,t,n,r){d.a.DeepCopy(e,t,n,r)},e.IsEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},e.EndsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},e.RegisterTopRootEvents=function(e){for(var t=0;t<e.length;t++){var n=e[t];window.addEventListener(n.name,n.handler,!1);try{window.parent&&window.parent.addEventListener(n.name,n.handler,!1)}catch(e){}}},e.UnregisterTopRootEvents=function(e){for(var t=0;t<e.length;t++){var n=e[t];window.removeEventListener(n.name,n.handler);try{window.parent&&window.parent.removeEventListener(n.name,n.handler)}catch(e){}}},e.DumpFramebuffer=function(t,n,r,i,o,a){void 0===o&&(o="image/png");for(var s=4*t,u=n/2,l=r.readPixels(0,0,t,n),c=0;c<u;c++)for(var h=0;h<s;h++){var d=h+c*s,f=h+(n-c-1)*s,p=l[d];l[d]=l[f],l[f]=p}e._ScreenshotCanvas||(e._ScreenshotCanvas=document.createElement("canvas")),e._ScreenshotCanvas.width=t,e._ScreenshotCanvas.height=n;var _=e._ScreenshotCanvas.getContext("2d");if(_){var m=_.createImageData(t,n);m.data.set(l),_.putImageData(m,0,0),e.EncodeScreenshotCanvasData(i,o,a)}},e.ToBlob=function(e,t,n){void 0===n&&(n="image/png"),e.toBlob||(e.toBlob=function(e,t,n){var r=this;setTimeout(function(){for(var i=atob(r.toDataURL(t,n).split(",")[1]),o=i.length,a=new Uint8Array(o),s=0;s<o;s++)a[s]=i.charCodeAt(s);e(new Blob([a]))})}),e.toBlob(function(e){t(e)},n)},e.EncodeScreenshotCanvasData=function(t,n,r){void 0===n&&(n="image/png"),t?t(e._ScreenshotCanvas.toDataURL(n)):this.ToBlob(e._ScreenshotCanvas,function(t){if("download"in document.createElement("a")){if(!r){var n=new Date,i=(n.getFullYear()+"-"+(n.getMonth()+1)).slice(2)+"-"+n.getDate()+"_"+n.getHours()+"-"+("0"+n.getMinutes()).slice(-2);r="screenshot_"+i+".png"}e.Download(t,r)}else{var o=URL.createObjectURL(t),a=window.open("");if(!a)return;var s=a.document.createElement("img");s.onload=function(){URL.revokeObjectURL(o)},s.src=o,a.document.body.appendChild(s)}},n)},e.Download=function(e,t){if(navigator&&navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{var n=window.URL.createObjectURL(e),r=document.createElement("a");document.body.appendChild(r),r.style.display="none",r.href=n,r.download=t,r.addEventListener("click",function(){r.parentElement&&r.parentElement.removeChild(r)}),r.click(),window.URL.revokeObjectURL(n)}},e.CreateScreenshot=function(e,t,n,r,i){throw void 0===i&&(i="image/png"),p.a.WarnImport("ScreenshotTools")},e.CreateScreenshotUsingRenderTarget=function(e,t,n,r,i,o,a,s){throw void 0===i&&(i="image/png"),void 0===o&&(o=1),void 0===a&&(a=!1),p.a.WarnImport("ScreenshotTools")},e.RandomId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},e.IsBase64=function(e){return!(e.length<5)&&"data:"===e.substr(0,5)},e.DecodeBase64=function(e){for(var t=atob(e.split(",")[1]),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r.buffer},e.GetAbsoluteUrl=function(e){var t=document.createElement("a");return t.href=e,t.href},Object.defineProperty(e,"errorsCount",{get:function(){return c.a.errorsCount},enumerable:!0,configurable:!0}),e.Log=function(e){c.a.Log(e)},e.Warn=function(e){c.a.Warn(e)},e.Error=function(e){c.a.Error(e)},Object.defineProperty(e,"LogCache",{get:function(){return c.a.LogCache},enumerable:!0,configurable:!0}),e.ClearLogCache=function(){c.a.ClearLogCache()},Object.defineProperty(e,"LogLevels",{set:function(e){c.a.LogLevels=e},enumerable:!0,configurable:!0}),e.IsFileURL=function(){return"file:"===location.protocol},Object.defineProperty(e,"PerformanceLogLevel",{set:function(t){return(t&e.PerformanceUserMarkLogLevel)===e.PerformanceUserMarkLogLevel?(e.StartPerformanceCounter=e._StartUserMark,void(e.EndPerformanceCounter=e._EndUserMark)):(t&e.PerformanceConsoleLogLevel)===e.PerformanceConsoleLogLevel?(e.StartPerformanceCounter=e._StartPerformanceConsole,void(e.EndPerformanceCounter=e._EndPerformanceConsole)):(e.StartPerformanceCounter=e._StartPerformanceCounterDisabled,void(e.EndPerformanceCounter=e._EndPerformanceCounterDisabled))},enumerable:!0,configurable:!0}),e._StartPerformanceCounterDisabled=function(e,t){},e._EndPerformanceCounterDisabled=function(e,t){},e._StartUserMark=function(t,n){if(void 0===n&&(n=!0),!e._performance){if(!l.a.IsWindowObjectExist())return;e._performance=window.performance}n&&e._performance.mark&&e._performance.mark(t+"-Begin")},e._EndUserMark=function(t,n){void 0===n&&(n=!0),n&&e._performance.mark&&(e._performance.mark(t+"-End"),e._performance.measure(t,t+"-Begin",t+"-End"))},e._StartPerformanceConsole=function(t,n){void 0===n&&(n=!0),n&&(e._StartUserMark(t,n),console.time&&console.time(t))},e._EndPerformanceConsole=function(t,n){void 0===n&&(n=!0),n&&(e._EndUserMark(t,n),console.time&&console.timeEnd(t))},Object.defineProperty(e,"Now",{get:function(){return f.a.Now},enumerable:!0,configurable:!0}),e.GetClassName=function(e,t){void 0===t&&(t=!1);var n=null;return!t&&e.getClassName?n=e.getClassName():(e instanceof Object&&(n=(t?e:Object.getPrototypeOf(e)).constructor.__bjsclassName__),n||(n=typeof e)),n},e.First=function(e,t){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(t(i))return i}return null},e.getFullClassName=function(e,t){void 0===t&&(t=!1);var n=null,r=null;if(!t&&e.getClassName)n=e.getClassName();else{if(e instanceof Object){var i=t?e:Object.getPrototypeOf(e);n=i.constructor.__bjsclassName__,r=i.constructor.__bjsmoduleName__}n||(n=typeof e)}return n?(null!=r?r+".":"")+n:null},e.DelayAsync=function(e){return new Promise(function(t){setTimeout(function(){t()},e)})},e.GetCurrentGradient=function(e,t,n){for(var r=0;r<t.length-1;r++){var i=t[r],o=t[r+1];if(e>=i.gradient&&e<=o.gradient)return void n(i,o,(e-i.gradient)/(o.gradient-i.gradient))}var a=t.length-1;n(t[a],t[a],1)},e.BaseUrl="",e.UseCustomRequestHeaders=!1,e.CustomRequestHeaders=_.a.CustomRequestHeaders,e.DefaultRetryStrategy=b.ExponentialBackoff(),e.CorsBehavior="anonymous",e.UseFallbackTexture=!0,e.RegisteredExternalClasses={},e.fallbackTexture="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/4QBmRXhpZgAATU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAAExAAIAAAAQAAAATgAAAAAAAABgAAAAAQAAAGAAAAABcGFpbnQubmV0IDQuMC41AP/bAEMABAIDAwMCBAMDAwQEBAQFCQYFBQUFCwgIBgkNCw0NDQsMDA4QFBEODxMPDAwSGBITFRYXFxcOERkbGRYaFBYXFv/bAEMBBAQEBQUFCgYGChYPDA8WFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFv/AABEIAQABAAMBIgACEQEDEQH/xAAfAAABBQEBAQEBAQAAAAAAAAAAAQIDBAUGBwgJCgv/xAC1EAACAQMDAgQDBQUEBAAAAX0BAgMABBEFEiExQQYTUWEHInEUMoGRoQgjQrHBFVLR8CQzYnKCCQoWFxgZGiUmJygpKjQ1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4eLj5OXm5+jp6vHy8/T19vf4+fr/xAAfAQADAQEBAQEBAQEBAAAAAAAAAQIDBAUGBwgJCgv/xAC1EQACAQIEBAMEBwUEBAABAncAAQIDEQQFITEGEkFRB2FxEyIygQgUQpGhscEJIzNS8BVictEKFiQ04SXxFxgZGiYnKCkqNTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqCg4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2dri4+Tl5ufo6ery8/T19vf4+fr/2gAMAwEAAhEDEQA/APH6KKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76CiiigD5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BQooooA+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/voKKKKAPl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FCiiigD6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++gooooA+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gUKKKKAPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76Pl+iiivuj+BT6gooor4U/vo+X6KKK+6P4FPqCiiivhT++j5fooor7o/gU+oKKKK+FP76P//Z",e._tmpFloatArray=new Float32Array(1),e.GetDOMTextContent=l.a.GetDOMTextContent,e.PreprocessUrl=function(e){return e},e.NoneLogLevel=c.a.NoneLogLevel,e.MessageLogLevel=c.a.MessageLogLevel,e.WarningLogLevel=c.a.WarningLogLevel,e.ErrorLogLevel=c.a.ErrorLogLevel,e.AllLogLevel=c.a.AllLogLevel,e.IsWindowObjectExist=l.a.IsWindowObjectExist,e.PerformanceNoneLogLevel=0,e.PerformanceUserMarkLogLevel=1,e.PerformanceConsoleLogLevel=2,e.StartPerformanceCounter=e._StartPerformanceCounterDisabled,e.EndPerformanceCounter=e._EndPerformanceCounterDisabled,e}(),E=function(){function e(){this._startMonitoringTime=0,this._min=0,this._max=0,this._average=0,this._lastSecAverage=0,this._current=0,this._totalValueCount=0,this._totalAccumulated=0,this._lastSecAccumulated=0,this._lastSecTime=0,this._lastSecValueCount=0}return Object.defineProperty(e.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"average",{get:function(){return this._average},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastSecAverage",{get:function(){return this._lastSecAverage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"total",{get:function(){return this._totalAccumulated},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._totalValueCount},enumerable:!0,configurable:!0}),e.prototype.fetchNewFrame=function(){this._totalValueCount++,this._current=0,this._lastSecValueCount++},e.prototype.addCount=function(t,n){e.Enabled&&(this._current+=t,n&&this._fetchResult())},e.prototype.beginMonitoring=function(){e.Enabled&&(this._startMonitoringTime=f.a.Now)},e.prototype.endMonitoring=function(t){void 0===t&&(t=!0),e.Enabled&&(t&&this.fetchNewFrame(),this._current=f.a.Now-this._startMonitoringTime,t&&this._fetchResult())},e.prototype._fetchResult=function(){this._totalAccumulated+=this._current,this._lastSecAccumulated+=this._current,this._min=Math.min(this._min,this._current),this._max=Math.max(this._max,this._current),this._average=this._totalAccumulated/this._totalValueCount;var e=f.a.Now;e-this._lastSecTime>1e3&&(this._lastSecAverage=this._lastSecAccumulated/this._lastSecValueCount,this._lastSecTime=e,this._lastSecAccumulated=0,this._lastSecValueCount=0)},e.Enabled=!0,e}();function x(e,t){return function(n){n.__bjsclassName__=e,n.__bjsmoduleName__=null!=t?t:null}}var M=function(){function e(e,t,n,r){void 0===r&&(r=0),this.iterations=e,this.index=r-1,this._done=!1,this._fn=t,this._successCallback=n}return e.prototype.executeNext=function(){this._done||(this.index+1<this.iterations?(++this.index,this._fn(this)):this.breakLoop())},e.prototype.breakLoop=function(){this._done=!0,this._successCallback()},e.Run=function(t,n,r,i){void 0===i&&(i=0);var o=new e(t,n,r,i);return o.executeNext(),o},e.SyncAsyncForLoop=function(t,n,r,i,o,a){return void 0===a&&(a=0),e.Run(Math.ceil(t/n),function(e){o&&o()?e.breakLoop():setTimeout(function(){for(var i=0;i<n;++i){var a=e.index*n+i;if(a>=t)break;if(r(a),o&&o()){e.breakLoop();break}}e.executeNext()},a)},i)},e}()},function(e,t,n){"use strict";n.d(t,"d",function(){return M}),n.d(t,"a",function(){return A}),n.d(t,"c",function(){return S}),n.d(t,"b",function(){return C});var r=n(1),i=n(8),o=n(105),a=n(61),s=n(106),u=n(9),l=n(0),c=n(12),h=n(5),d=n(20),f=n(26),p=n(94),_=n(3),m=n(35),g=n(6),v=n(23),y=n(92),b=n(19),T=n(107),E=n(73),x=function(){},M=function(){},A=function(){},S=function(){},C=function(){function e(t,n,r,a){var c=this;void 0===a&&(a=!1),this.forcePOTTextures=!1,this.isFullscreen=!1,this.isPointerLock=!1,this.cullBackFaces=!0,this.renderEvenInBackground=!0,this.preventCacheWipeBetweenFrames=!1,this.enableOfflineSupport=!1,this.disableManifestCheck=!1,this.scenes=new Array,this.onNewSceneAddedObservable=new i.c,this.postProcesses=new Array,this.validateShaderPrograms=!1,this.onResizeObservable=new i.c,this.onCanvasBlurObservable=new i.c,this.onCanvasFocusObservable=new i.c,this.onCanvasPointerOutObservable=new i.c,this.onBeforeTextureInitObservable=new i.c,this.disableUniformBuffers=!1,this._uniformBuffers=new Array,this.onBeginFrameObservable=new i.c,this.customAnimationFrameRequester=null,this.onEndFrameObservable=new i.c,this.onBeforeShaderCompilationObservable=new i.c,this.onAfterShaderCompilationObservable=new i.c,this._windowIsBackground=!1,this._webGLVersion=1,this._highPrecisionShadersAllowed=!0,this._badOS=!1,this._badDesktopOS=!1,this._colorWrite=!0,this._drawCalls=new u.f,this._renderingQueueLaunched=!1,this._activeRenderLoops=new Array,this._deterministicLockstep=!1,this._lockstepMaxSteps=4,this.onContextLostObservable=new i.c,this.onContextRestoredObservable=new i.c,this._contextWasLost=!1,this._doNotHandleContextLost=!1,this._performanceMonitor=new o.a,this._fps=60,this._deltaTime=0,this.disablePerformanceMonitorInBackground=!1,this.disableVertexArrayObjects=!1,this._depthCullingState=new p.b,this._stencilState=new p.c,this._alphaState=new p.a,this._alphaMode=e.ALPHA_DISABLE,this._internalTexturesCache=new Array,this._activeChannel=0,this._currentTextureChannel=-1,this._boundTexturesCache={},this._compiledEffects={},this._vertexAttribArraysEnabled=[],this._uintIndicesCurrentlySet=!1,this._currentBoundBuffer=new Array,this._currentFramebuffer=null,this._currentBufferPointers=new Array,this._currentInstanceLocations=new Array,this._currentInstanceBuffers=new Array,this._vaoRecordInProgress=!1,this._mustWipeVertexAttributes=!1,this._nextFreeTextureSlots=new Array,this._maxSimultaneousTextures=0,this._activeRequests=new Array,this._texturesSupported=new Array,this.premultipliedAlpha=!0,this._viewportCached=new l.y(0,0,0,0),this._unpackFlipYCached=null,this.enableUnpackFlipYCached=!0,this._boundUniforms={},s.a.Apply();var h=null;if(e.Instances.push(this),t){if(r=r||{},t.getContext){if(this._renderingCanvas=h=t,null!=n&&(r.antialias=n),void 0===r.deterministicLockstep&&(r.deterministicLockstep=!1),void 0===r.lockstepMaxSteps&&(r.lockstepMaxSteps=4),void 0===r.preserveDrawingBuffer&&(r.preserveDrawingBuffer=!1),void 0===r.audioEngine&&(r.audioEngine=!0),void 0===r.stencil&&(r.stencil=!0),!1===r.premultipliedAlpha&&(this.premultipliedAlpha=!1),this._deterministicLockstep=r.deterministicLockstep,this._lockstepMaxSteps=r.lockstepMaxSteps,this._doNotHandleContextLost=!!r.doNotHandleContextLost,navigator&&navigator.userAgent)for(var d=navigator.userAgent,f=0,_=e.ExceptionList;f<_.length;f++){var v=_[f],y=v.targets;if(new RegExp(v.key).test(d)){if(v.capture&&v.captureConstraint){var b=v.captureConstraint,T=new RegExp(v.capture).exec(d);if(T&&T.length>0&&parseInt(T[T.length-1])>=b)continue}for(var E=0,M=y;E<M.length;E++)switch(M[E]){case"uniformBuffer":this.disableUniformBuffers=!0;break;case"vao":this.disableVertexArrayObjects=!0}}}if(!r.disableWebGL2Support)try{this._gl=h.getContext("webgl2",r)||h.getContext("experimental-webgl2",r),this._gl&&(this._webGLVersion=2,this._gl.deleteQuery||(this._webGLVersion=1))}catch(e){}if(!this._gl){if(!h)throw new Error("The provided canvas is null or undefined.");try{this._gl=h.getContext("webgl",r)||h.getContext("experimental-webgl",r)}catch(e){throw new Error("WebGL not supported")}}if(!this._gl)throw new Error("WebGL not supported");this._gl.pixelStorei(this._gl.UNPACK_COLORSPACE_CONVERSION_WEBGL,this._gl.NONE),this._onCanvasFocus=function(){c.onCanvasFocusObservable.notifyObservers(c)},this._onCanvasBlur=function(){c.onCanvasBlurObservable.notifyObservers(c)},h.addEventListener("focus",this._onCanvasFocus),h.addEventListener("blur",this._onCanvasBlur),this._onBlur=function(){c.disablePerformanceMonitorInBackground&&c._performanceMonitor.disable(),c._windowIsBackground=!0},this._onFocus=function(){c.disablePerformanceMonitorInBackground&&c._performanceMonitor.enable(),c._windowIsBackground=!1},this._onCanvasPointerOut=function(e){c.onCanvasPointerOutObservable.notifyObservers(e)},m.a.IsWindowObjectExist()&&(window.addEventListener("blur",this._onBlur),window.addEventListener("focus",this._onFocus)),h.addEventListener("pointerout",this._onCanvasPointerOut),this._doNotHandleContextLost||(this._onContextLost=function(e){e.preventDefault(),c._contextWasLost=!0,g.a.Warn("WebGL context lost."),c.onContextLostObservable.notifyObservers(c)},this._onContextRestored=function(){setTimeout(function(){c._initGLContext(),c._rebuildEffects(),c._rebuildInternalTextures(),c._rebuildBuffers(),c.wipeCaches(!0),g.a.Warn("WebGL context successfully restored."),c.onContextRestoredObservable.notifyObservers(c),c._contextWasLost=!1},0)},h.addEventListener("webglcontextlost",this._onContextLost,!1),h.addEventListener("webglcontextrestored",this._onContextRestored,!1)),r.doNotHandleTouchAction||this._disableTouchAction()}else{this._gl=t,this._renderingCanvas=this._gl.canvas,this._gl.renderbufferStorageMultisample&&(this._webGLVersion=2);var A=this._gl.getContextAttributes();A&&(r.stencil=A.stencil)}void 0!==r.useHighPrecisionFloats&&(this._highPrecisionShadersAllowed=r.useHighPrecisionFloats);var S=m.a.IsWindowObjectExist()&&window.devicePixelRatio||1;if(this._hardwareScalingLevel=a?1/Math.min(r.limitDeviceRatio||S,S):1,this.resize(),this._isStencilEnable=!!r.stencil,this._initGLContext(),h){var C=document;this._onFullscreenChange=function(){void 0!==C.fullscreen?c.isFullscreen=C.fullscreen:void 0!==C.mozFullScreen?c.isFullscreen=C.mozFullScreen:void 0!==C.webkitIsFullScreen?c.isFullscreen=C.webkitIsFullScreen:void 0!==C.msIsFullScreen&&(c.isFullscreen=C.msIsFullScreen),c.isFullscreen&&c._pointerLockRequested&&h&&(h.requestPointerLock=h.requestPointerLock||h.msRequestPointerLock||h.mozRequestPointerLock||h.webkitRequestPointerLock,h.requestPointerLock&&h.requestPointerLock())},document.addEventListener("fullscreenchange",this._onFullscreenChange,!1),document.addEventListener("mozfullscreenchange",this._onFullscreenChange,!1),document.addEventListener("webkitfullscreenchange",this._onFullscreenChange,!1),document.addEventListener("msfullscreenchange",this._onFullscreenChange,!1),this._onPointerLockChange=function(){c.isPointerLock=C.mozPointerLockElement===h||C.webkitPointerLockElement===h||C.msPointerLockElement===h||C.pointerLockElement===h},document.addEventListener("pointerlockchange",this._onPointerLockChange,!1),document.addEventListener("mspointerlockchange",this._onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this._onPointerLockChange,!1),document.addEventListener("webkitpointerlockchange",this._onPointerLockChange,!1),this._connectVREvents(h,C)}!e.audioEngine&&r.audioEngine&&e.AudioEngineFactory&&(e.audioEngine=e.AudioEngineFactory(this.getRenderingCanvas()));for(var P=0;P<this._caps.maxVertexAttribs;P++)this._currentBufferPointers[P]=new x;this._prepareVRComponent(),r.autoEnableWebVR&&this.initWebVR(),this._badOS=/iPad/i.test(navigator.userAgent)||/iPhone/i.test(navigator.userAgent),this._badDesktopOS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),console.log("Babylon.js v"+e.Version+" - "+this.description),this.enableOfflineSupport=void 0!==e.OfflineProviderFactory}}return Object.defineProperty(e,"Instances",{get:function(){return v.a.Instances},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LastCreatedEngine",{get:function(){return v.a.LastCreatedEngine},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LastCreatedScene",{get:function(){return v.a.LastCreatedScene},enumerable:!0,configurable:!0}),e.MarkAllMaterialsAsDirty=function(t,n){for(var r=0;r<e.Instances.length;r++)for(var i=e.Instances[r],o=0;o<i.scenes.length;o++)i.scenes[o].markAllMaterialsAsDirty(t,n)},Object.defineProperty(e,"NpmPackage",{get:function(){return"babylonjs@4.0.3"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"Version",{get:function(){return"4.0.3"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){var e="WebGL"+this.webGLVersion;return this._caps.parallelShaderCompile&&(e+=" - Parallel shader compilation"),e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ShadersRepository",{get:function(){return h.a.ShadersRepository},set:function(e){h.a.ShadersRepository=e},enumerable:!0,configurable:!0}),e.DefaultLoadingScreenFactory=function(e){throw b.a.WarnImport("LoadingScreen")},Object.defineProperty(e.prototype,"supportsUniformBuffers",{get:function(){return this.webGLVersion>1&&!this.disableUniformBuffers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_shouldUseHighPrecisionShader",{get:function(){return this._caps.highPrecisionShaderSupported&&this._highPrecisionShadersAllowed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needPOTTextures",{get:function(){return this._webGLVersion<2||this.forcePOTTextures},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doNotHandleContextLost",{get:function(){return this._doNotHandleContextLost},set:function(e){this._doNotHandleContextLost=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"performanceMonitor",{get:function(){return this._performanceMonitor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texturesSupported",{get:function(){return this._texturesSupported},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureFormatInUse",{get:function(){return this._textureFormatInUse},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentViewport",{get:function(){return this._cachedViewport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptyTexture",{get:function(){return this._emptyTexture||(this._emptyTexture=this.createRawTexture(new Uint8Array(4),1,1,e.TEXTUREFORMAT_RGBA,!1,!1,e.TEXTURE_NEAREST_SAMPLINGMODE)),this._emptyTexture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptyTexture3D",{get:function(){return this._emptyTexture3D||(this._emptyTexture3D=this.createRawTexture3D(new Uint8Array(4),1,1,1,e.TEXTUREFORMAT_RGBA,!1,!1,e.TEXTURE_NEAREST_SAMPLINGMODE)),this._emptyTexture3D},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptyCubeTexture",{get:function(){if(!this._emptyCubeTexture){var t=new Uint8Array(4);this._emptyCubeTexture=this.createRawCubeTexture([t,t,t,t,t,t],1,e.TEXTUREFORMAT_RGBA,e.TEXTURETYPE_UNSIGNED_INT,!1,!1,e.TEXTURE_NEAREST_SAMPLINGMODE)}return this._emptyCubeTexture},enumerable:!0,configurable:!0}),e.prototype.initWebVR=function(){throw b.a.WarnImport("WebVRCamera")},e.prototype._prepareVRComponent=function(){},e.prototype._connectVREvents=function(e,t){},e.prototype._submitVRFrame=function(){},e.prototype.disableVR=function(){},e.prototype.isVRPresenting=function(){return!1},e.prototype._requestVRFrame=function(){},e.prototype._disableTouchAction=function(){this._renderingCanvas&&(this._renderingCanvas.setAttribute("touch-action","none"),this._renderingCanvas.style.touchAction="none",this._renderingCanvas.style.msTouchAction="none")},e.prototype._rebuildInternalTextures=function(){for(var e=0,t=this._internalTexturesCache.slice();e<t.length;e++)t[e]._rebuild()},e.prototype._rebuildEffects=function(){for(var e in this._compiledEffects)this._compiledEffects[e]._prepareEffect();h.a.ResetCache()},e.prototype.areAllEffectsReady=function(){for(var e in this._compiledEffects)if(!this._compiledEffects[e].isReady())return!1;return!0},e.prototype._rebuildBuffers=function(){for(var e=0,t=this.scenes;e<t.length;e++){var n=t[e];n.resetCachedMaterial(),n._rebuildGeometries(),n._rebuildTextures()}for(var r=0,i=this._uniformBuffers;r<i.length;r++)i[r]._rebuild()},e.prototype._initGLContext=function(){this._caps=new S,this._caps.maxTexturesImageUnits=this._gl.getParameter(this._gl.MAX_TEXTURE_IMAGE_UNITS),this._caps.maxCombinedTexturesImageUnits=this._gl.getParameter(this._gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this._caps.maxVertexTextureImageUnits=this._gl.getParameter(this._gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this._caps.maxTextureSize=this._gl.getParameter(this._gl.MAX_TEXTURE_SIZE),this._caps.maxCubemapTextureSize=this._gl.getParameter(this._gl.MAX_CUBE_MAP_TEXTURE_SIZE),this._caps.maxRenderTextureSize=this._gl.getParameter(this._gl.MAX_RENDERBUFFER_SIZE),this._caps.maxVertexAttribs=this._gl.getParameter(this._gl.MAX_VERTEX_ATTRIBS),this._caps.maxVaryingVectors=this._gl.getParameter(this._gl.MAX_VARYING_VECTORS),this._caps.maxFragmentUniformVectors=this._gl.getParameter(this._gl.MAX_FRAGMENT_UNIFORM_VECTORS),this._caps.maxVertexUniformVectors=this._gl.getParameter(this._gl.MAX_VERTEX_UNIFORM_VECTORS),this._glVersion=this._gl.getParameter(this._gl.VERSION);var e=this._gl.getExtension("WEBGL_debug_renderer_info");if(null!=e&&(this._glRenderer=this._gl.getParameter(e.UNMASKED_RENDERER_WEBGL),this._glVendor=this._gl.getParameter(e.UNMASKED_VENDOR_WEBGL)),this._glVendor||(this._glVendor="Unknown vendor"),this._glRenderer||(this._glRenderer="Unknown renderer"),this._gl.HALF_FLOAT_OES=36193,34842!==this._gl.RGBA16F&&(this._gl.RGBA16F=34842),34836!==this._gl.RGBA32F&&(this._gl.RGBA32F=34836),35056!==this._gl.DEPTH24_STENCIL8&&(this._gl.DEPTH24_STENCIL8=35056),this._caps.standardDerivatives=this._webGLVersion>1||null!==this._gl.getExtension("OES_standard_derivatives"),this._caps.astc=this._gl.getExtension("WEBGL_compressed_texture_astc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_astc"),this._caps.s3tc=this._gl.getExtension("WEBGL_compressed_texture_s3tc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"),this._caps.pvrtc=this._gl.getExtension("WEBGL_compressed_texture_pvrtc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this._caps.etc1=this._gl.getExtension("WEBGL_compressed_texture_etc1")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc1"),this._caps.etc2=this._gl.getExtension("WEBGL_compressed_texture_etc")||this._gl.getExtension("WEBKIT_WEBGL_compressed_texture_etc")||this._gl.getExtension("WEBGL_compressed_texture_es3_0"),this._caps.textureAnisotropicFilterExtension=this._gl.getExtension("EXT_texture_filter_anisotropic")||this._gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this._gl.getExtension("MOZ_EXT_texture_filter_anisotropic"),this._caps.maxAnisotropy=this._caps.textureAnisotropicFilterExtension?this._gl.getParameter(this._caps.textureAnisotropicFilterExtension.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,this._caps.uintIndices=this._webGLVersion>1||null!==this._gl.getExtension("OES_element_index_uint"),this._caps.fragmentDepthSupported=this._webGLVersion>1||null!==this._gl.getExtension("EXT_frag_depth"),this._caps.highPrecisionShaderSupported=!1,this._caps.timerQuery=this._gl.getExtension("EXT_disjoint_timer_query_webgl2")||this._gl.getExtension("EXT_disjoint_timer_query"),this._caps.timerQuery&&(1===this._webGLVersion&&(this._gl.getQuery=this._caps.timerQuery.getQueryEXT.bind(this._caps.timerQuery)),this._caps.canUseTimestampForTimerQuery=this._gl.getQuery(this._caps.timerQuery.TIMESTAMP_EXT,this._caps.timerQuery.QUERY_COUNTER_BITS_EXT)>0),this._caps.colorBufferFloat=this._webGLVersion>1&&this._gl.getExtension("EXT_color_buffer_float"),this._caps.textureFloat=!!(this._webGLVersion>1||this._gl.getExtension("OES_texture_float")),this._caps.textureFloatLinearFiltering=!(!this._caps.textureFloat||!this._gl.getExtension("OES_texture_float_linear")),this._caps.textureFloatRender=!(!this._caps.textureFloat||!this._canRenderToFloatFramebuffer()),this._caps.textureHalfFloat=!!(this._webGLVersion>1||this._gl.getExtension("OES_texture_half_float")),this._caps.textureHalfFloatLinearFiltering=!!(this._webGLVersion>1||this._caps.textureHalfFloat&&this._gl.getExtension("OES_texture_half_float_linear")),this._webGLVersion>1&&(this._gl.HALF_FLOAT_OES=5131),this._caps.textureHalfFloatRender=this._caps.textureHalfFloat&&this._canRenderToHalfFloatFramebuffer(),this._caps.textureLOD=!!(this._webGLVersion>1||this._gl.getExtension("EXT_shader_texture_lod")),this._caps.multiview=this._gl.getExtension("OVR_multiview2"),this._webGLVersion>1)this._caps.drawBuffersExtension=!0;else{var t=this._gl.getExtension("WEBGL_draw_buffers");if(null!==t){this._caps.drawBuffersExtension=!0,this._gl.drawBuffers=t.drawBuffersWEBGL.bind(t),this._gl.DRAW_FRAMEBUFFER=this._gl.FRAMEBUFFER;for(var n=0;n<16;n++)this._gl["COLOR_ATTACHMENT"+n+"_WEBGL"]=t["COLOR_ATTACHMENT"+n+"_WEBGL"]}else this._caps.drawBuffersExtension=!1}if(this._caps.parallelShaderCompile=this._gl.getExtension("KHR_parallel_shader_compile"),this._webGLVersion>1)this._caps.depthTextureExtension=!0;else{var r=this._gl.getExtension("WEBGL_depth_texture");null!=r&&(this._caps.depthTextureExtension=!0,this._gl.UNSIGNED_INT_24_8=r.UNSIGNED_INT_24_8_WEBGL)}if(this.disableVertexArrayObjects)this._caps.vertexArrayObject=!1;else if(this._webGLVersion>1)this._caps.vertexArrayObject=!0;else{var i=this._gl.getExtension("OES_vertex_array_object");null!=i?(this._caps.vertexArrayObject=!0,this._gl.createVertexArray=i.createVertexArrayOES.bind(i),this._gl.bindVertexArray=i.bindVertexArrayOES.bind(i),this._gl.deleteVertexArray=i.deleteVertexArrayOES.bind(i)):this._caps.vertexArrayObject=!1}if(this._webGLVersion>1)this._caps.instancedArrays=!0;else{var o=this._gl.getExtension("ANGLE_instanced_arrays");null!=o?(this._caps.instancedArrays=!0,this._gl.drawArraysInstanced=o.drawArraysInstancedANGLE.bind(o),this._gl.drawElementsInstanced=o.drawElementsInstancedANGLE.bind(o),this._gl.vertexAttribDivisor=o.vertexAttribDivisorANGLE.bind(o)):this._caps.instancedArrays=!1}if(this._caps.astc&&this.texturesSupported.push("-astc.ktx"),this._caps.s3tc&&this.texturesSupported.push("-dxt.ktx"),this._caps.pvrtc&&this.texturesSupported.push("-pvrtc.ktx"),this._caps.etc2&&this.texturesSupported.push("-etc2.ktx"),this._caps.etc1&&this.texturesSupported.push("-etc1.ktx"),this._gl.getShaderPrecisionFormat){var a=this._gl.getShaderPrecisionFormat(this._gl.VERTEX_SHADER,this._gl.HIGH_FLOAT),s=this._gl.getShaderPrecisionFormat(this._gl.FRAGMENT_SHADER,this._gl.HIGH_FLOAT);a&&s&&(this._caps.highPrecisionShaderSupported=0!==a.precision&&0!==s.precision)}this.setDepthBuffer(!0),this.setDepthFunctionToLessOrEqual(),this.setDepthWrite(!0),this._maxSimultaneousTextures=this._caps.maxCombinedTexturesImageUnits;for(var u=0;u<this._maxSimultaneousTextures;u++)this._nextFreeTextureSlots.push(u)},Object.defineProperty(e.prototype,"webGLVersion",{get:function(){return this._webGLVersion},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStencilEnable",{get:function(){return this._isStencilEnable},enumerable:!0,configurable:!0}),e.prototype._prepareWorkingCanvas=function(){if(!this._workingCanvas){this._workingCanvas=document.createElement("canvas");var e=this._workingCanvas.getContext("2d");e&&(this._workingContext=e)}},e.prototype.resetTextureCache=function(){for(var e in this._boundTexturesCache)this._boundTexturesCache.hasOwnProperty(e)&&(this._boundTexturesCache[e]=null);this._currentTextureChannel=-1},e.prototype.isDeterministicLockStep=function(){return this._deterministicLockstep},e.prototype.getLockstepMaxSteps=function(){return this._lockstepMaxSteps},e.prototype.getGlInfo=function(){return{vendor:this._glVendor,renderer:this._glRenderer,version:this._glVersion}},e.prototype.getAspectRatio=function(e,t){void 0===t&&(t=!1);var n=e.viewport;return this.getRenderWidth(t)*n.width/(this.getRenderHeight(t)*n.height)},e.prototype.getScreenAspectRatio=function(){return this.getRenderWidth(!0)/this.getRenderHeight(!0)},e.prototype.getRenderWidth=function(e){return void 0===e&&(e=!1),!e&&this._currentRenderTarget?this._currentRenderTarget.width:this._gl.drawingBufferWidth},e.prototype.getRenderHeight=function(e){return void 0===e&&(e=!1),!e&&this._currentRenderTarget?this._currentRenderTarget.height:this._gl.drawingBufferHeight},e.prototype.getRenderingCanvas=function(){return this._renderingCanvas},e.prototype.getRenderingCanvasClientRect=function(){return this._renderingCanvas?this._renderingCanvas.getBoundingClientRect():null},e.prototype.setHardwareScalingLevel=function(e){this._hardwareScalingLevel=e,this.resize()},e.prototype.getHardwareScalingLevel=function(){return this._hardwareScalingLevel},e.prototype.getLoadedTexturesCache=function(){return this._internalTexturesCache},e.prototype.getCaps=function(){return this._caps},e.prototype.getDepthFunction=function(){return this._depthCullingState.depthFunc},e.prototype.setDepthFunction=function(e){this._depthCullingState.depthFunc=e},e.prototype.setDepthFunctionToGreater=function(){this._depthCullingState.depthFunc=this._gl.GREATER},e.prototype.setDepthFunctionToGreaterOrEqual=function(){this._depthCullingState.depthFunc=this._gl.GEQUAL},e.prototype.setDepthFunctionToLess=function(){this._depthCullingState.depthFunc=this._gl.LESS},e.prototype.cacheStencilState=function(){this._cachedStencilBuffer=this.getStencilBuffer(),this._cachedStencilFunction=this.getStencilFunction(),this._cachedStencilMask=this.getStencilMask(),this._cachedStencilOperationPass=this.getStencilOperationPass(),this._cachedStencilOperationFail=this.getStencilOperationFail(),this._cachedStencilOperationDepthFail=this.getStencilOperationDepthFail(),this._cachedStencilReference=this.getStencilFunctionReference()},e.prototype.restoreStencilState=function(){this.setStencilFunction(this._cachedStencilFunction),this.setStencilMask(this._cachedStencilMask),this.setStencilBuffer(this._cachedStencilBuffer),this.setStencilOperationPass(this._cachedStencilOperationPass),this.setStencilOperationFail(this._cachedStencilOperationFail),this.setStencilOperationDepthFail(this._cachedStencilOperationDepthFail),this.setStencilFunctionReference(this._cachedStencilReference)},e.prototype.setDepthFunctionToLessOrEqual=function(){this._depthCullingState.depthFunc=this._gl.LEQUAL},e.prototype.getStencilBuffer=function(){return this._stencilState.stencilTest},e.prototype.setStencilBuffer=function(e){this._stencilState.stencilTest=e},e.prototype.getStencilMask=function(){return this._stencilState.stencilMask},e.prototype.setStencilMask=function(e){this._stencilState.stencilMask=e},e.prototype.getStencilFunction=function(){return this._stencilState.stencilFunc},e.prototype.getStencilFunctionReference=function(){return this._stencilState.stencilFuncRef},e.prototype.getStencilFunctionMask=function(){return this._stencilState.stencilFuncMask},e.prototype.setStencilFunction=function(e){this._stencilState.stencilFunc=e},e.prototype.setStencilFunctionReference=function(e){this._stencilState.stencilFuncRef=e},e.prototype.setStencilFunctionMask=function(e){this._stencilState.stencilFuncMask=e},e.prototype.getStencilOperationFail=function(){return this._stencilState.stencilOpStencilFail},e.prototype.getStencilOperationDepthFail=function(){return this._stencilState.stencilOpDepthFail},e.prototype.getStencilOperationPass=function(){return this._stencilState.stencilOpStencilDepthPass},e.prototype.setStencilOperationFail=function(e){this._stencilState.stencilOpStencilFail=e},e.prototype.setStencilOperationDepthFail=function(e){this._stencilState.stencilOpDepthFail=e},e.prototype.setStencilOperationPass=function(e){this._stencilState.stencilOpStencilDepthPass=e},e.prototype.setDitheringState=function(e){e?this._gl.enable(this._gl.DITHER):this._gl.disable(this._gl.DITHER)},e.prototype.setRasterizerState=function(e){e?this._gl.disable(this._gl.RASTERIZER_DISCARD):this._gl.enable(this._gl.RASTERIZER_DISCARD)},e.prototype.stopRenderLoop=function(e){if(e){var t=this._activeRenderLoops.indexOf(e);t>=0&&this._activeRenderLoops.splice(t,1)}else this._activeRenderLoops=[]},e.prototype._renderLoop=function(){if(!this._contextWasLost){var e=!0;if(!this.renderEvenInBackground&&this._windowIsBackground&&(e=!1),e){this.beginFrame();for(var t=0;t<this._activeRenderLoops.length;t++)(0,this._activeRenderLoops[t])();this.endFrame()}}this._activeRenderLoops.length>0?this.customAnimationFrameRequester?(this.customAnimationFrameRequester.requestID=u.h.QueueNewFrame(this.customAnimationFrameRequester.renderFunction||this._bindedRenderFunction,this.customAnimationFrameRequester),this._frameHandler=this.customAnimationFrameRequester.requestID):this.isVRPresenting()?this._requestVRFrame():this._frameHandler=u.h.QueueNewFrame(this._bindedRenderFunction):this._renderingQueueLaunched=!1},e.prototype.runRenderLoop=function(e){-1===this._activeRenderLoops.indexOf(e)&&(this._activeRenderLoops.push(e),this._renderingQueueLaunched||(this._renderingQueueLaunched=!0,this._bindedRenderFunction=this._renderLoop.bind(this),this._frameHandler=u.h.QueueNewFrame(this._bindedRenderFunction)))},e.prototype.switchFullscreen=function(e){this.isFullscreen?this.exitFullscreen():this.enterFullscreen(e)},e.prototype.enterFullscreen=function(e){this.isFullscreen||(this._pointerLockRequested=e,this._renderingCanvas&&u.h.RequestFullscreen(this._renderingCanvas))},e.prototype.exitFullscreen=function(){this.isFullscreen&&u.h.ExitFullscreen()},e.prototype.clear=function(e,t,n,r){void 0===r&&(r=!1),this.applyStates();var i=0;t&&e&&(this._gl.clearColor(e.r,e.g,e.b,void 0!==e.a?e.a:1),i|=this._gl.COLOR_BUFFER_BIT),n&&(this._gl.clearDepth(1),i|=this._gl.DEPTH_BUFFER_BIT),r&&(this._gl.clearStencil(0),i|=this._gl.STENCIL_BUFFER_BIT),this._gl.clear(i)},e.prototype.scissorClear=function(e,t,n,r,i){this.enableScissor(e,t,n,r),this.clear(i,!0,!0,!0),this.disableScissor()},e.prototype.enableScissor=function(e,t,n,r){var i=this._gl;i.enable(i.SCISSOR_TEST),i.scissor(e,t,n,r)},e.prototype.disableScissor=function(){var e=this._gl;e.disable(e.SCISSOR_TEST)},e.prototype._viewport=function(e,t,n,r){e===this._viewportCached.x&&t===this._viewportCached.y&&n===this._viewportCached.z&&r===this._viewportCached.w||(this._viewportCached.x=e,this._viewportCached.y=t,this._viewportCached.z=n,this._viewportCached.w=r,this._gl.viewport(e,t,n,r))},e.prototype.setViewport=function(e,t,n){var r=t||this.getRenderWidth(),i=n||this.getRenderHeight(),o=e.x||0,a=e.y||0;this._cachedViewport=e,this._viewport(o*r,a*i,r*e.width,i*e.height)},e.prototype.setDirectViewport=function(e,t,n,r){var i=this._cachedViewport;return this._cachedViewport=null,this._viewport(e,t,n,r),i},e.prototype.beginFrame=function(){this.onBeginFrameObservable.notifyObservers(this),this._measureFps()},e.prototype.endFrame=function(){this._badOS&&this.flushFramebuffer(),this._submitVRFrame(),this.onEndFrameObservable.notifyObservers(this)},e.prototype.resize=function(){if(!this.isVRPresenting()){var e=this._renderingCanvas?this._renderingCanvas.clientWidth:window.innerWidth,t=this._renderingCanvas?this._renderingCanvas.clientHeight:window.innerHeight;this.setSize(e/this._hardwareScalingLevel,t/this._hardwareScalingLevel)}},e.prototype.setSize=function(e,t){if(this._renderingCanvas&&(this._renderingCanvas.width!==e||this._renderingCanvas.height!==t)){this._renderingCanvas.width=e,this._renderingCanvas.height=t;for(var n=0;n<this.scenes.length;n++)for(var r=this.scenes[n],i=0;i<r.cameras.length;i++)r.cameras[i]._currentRenderId=0;this.onResizeObservable.hasObservers&&this.onResizeObservable.notifyObservers(this)}},e.prototype.bindFramebuffer=function(e,t,n,r,i,o,a){void 0===a&&(a=0),this._currentRenderTarget&&this.unBindFramebuffer(this._currentRenderTarget),this._currentRenderTarget=e,this._bindUnboundFramebuffer(e._MSAAFramebuffer?e._MSAAFramebuffer:e._framebuffer);var s=this._gl;e.isCube&&(void 0===t&&(t=0),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+t,e._webGLTexture,a),o&&s.framebufferTexture2D(s.FRAMEBUFFER,o._generateStencilBuffer?s.DEPTH_STENCIL_ATTACHMENT:s.DEPTH_ATTACHMENT,s.TEXTURE_CUBE_MAP_POSITIVE_X+t,o._webGLTexture,a)),this._cachedViewport&&!i?this.setViewport(this._cachedViewport,n,r):(n||(n=e.width,a&&(n/=Math.pow(2,a))),r||(r=e.height,a&&(r/=Math.pow(2,a))),this._viewport(0,0,n,r)),this.wipeCaches()},e.prototype._bindUnboundFramebuffer=function(e){this._currentFramebuffer!==e&&(this._gl.bindFramebuffer(this._gl.FRAMEBUFFER,e),this._currentFramebuffer=e)},e.prototype.unBindFramebuffer=function(e,t,n){void 0===t&&(t=!1),this._currentRenderTarget=null;var r=this._gl;e._MSAAFramebuffer&&(r.bindFramebuffer(r.READ_FRAMEBUFFER,e._MSAAFramebuffer),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,e._framebuffer),r.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,r.COLOR_BUFFER_BIT,r.NEAREST)),!e.generateMipMaps||t||e.isCube||(this._bindTextureDirectly(r.TEXTURE_2D,e,!0),r.generateMipmap(r.TEXTURE_2D),this._bindTextureDirectly(r.TEXTURE_2D,null)),n&&(e._MSAAFramebuffer&&this._bindUnboundFramebuffer(e._framebuffer),n()),this._bindUnboundFramebuffer(null)},e.prototype.generateMipMapsForCubemap=function(e){if(e.generateMipMaps){var t=this._gl;this._bindTextureDirectly(t.TEXTURE_CUBE_MAP,e,!0),t.generateMipmap(t.TEXTURE_CUBE_MAP),this._bindTextureDirectly(t.TEXTURE_CUBE_MAP,null)}},e.prototype.flushFramebuffer=function(){this._gl.flush()},e.prototype.restoreDefaultFramebuffer=function(){this._currentRenderTarget?this.unBindFramebuffer(this._currentRenderTarget):this._bindUnboundFramebuffer(null),this._cachedViewport&&this.setViewport(this._cachedViewport),this.wipeCaches()},e.prototype.createUniformBuffer=function(e){var t=this._gl.createBuffer();if(!t)throw new Error("Unable to create uniform buffer");var n=new E.a(t);return this.bindUniformBuffer(n),e instanceof Float32Array?this._gl.bufferData(this._gl.UNIFORM_BUFFER,e,this._gl.STATIC_DRAW):this._gl.bufferData(this._gl.UNIFORM_BUFFER,new Float32Array(e),this._gl.STATIC_DRAW),this.bindUniformBuffer(null),n.references=1,n},e.prototype.createDynamicUniformBuffer=function(e){var t=this._gl.createBuffer();if(!t)throw new Error("Unable to create dynamic uniform buffer");var n=new E.a(t);return this.bindUniformBuffer(n),e instanceof Float32Array?this._gl.bufferData(this._gl.UNIFORM_BUFFER,e,this._gl.DYNAMIC_DRAW):this._gl.bufferData(this._gl.UNIFORM_BUFFER,new Float32Array(e),this._gl.DYNAMIC_DRAW),this.bindUniformBuffer(null),n.references=1,n},e.prototype.updateUniformBuffer=function(e,t,n,r){this.bindUniformBuffer(e),void 0===n&&(n=0),void 0===r?t instanceof Float32Array?this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,n,t):this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,n,new Float32Array(t)):t instanceof Float32Array?this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,0,t.subarray(n,n+r)):this._gl.bufferSubData(this._gl.UNIFORM_BUFFER,0,new Float32Array(t).subarray(n,n+r)),this.bindUniformBuffer(null)},e.prototype._resetVertexBufferBinding=function(){this.bindArrayBuffer(null),this._cachedVertexBuffers=null},e.prototype.createVertexBuffer=function(e){var t=this._gl.createBuffer();if(!t)throw new Error("Unable to create vertex buffer");var n=new E.a(t);return this.bindArrayBuffer(n),e instanceof Array?this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(e),this._gl.STATIC_DRAW):this._gl.bufferData(this._gl.ARRAY_BUFFER,e,this._gl.STATIC_DRAW),this._resetVertexBufferBinding(),n.references=1,n},e.prototype.createDynamicVertexBuffer=function(e){var t=this._gl.createBuffer();if(!t)throw new Error("Unable to create dynamic vertex buffer");var n=new E.a(t);return this.bindArrayBuffer(n),e instanceof Array?this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array(e),this._gl.DYNAMIC_DRAW):this._gl.bufferData(this._gl.ARRAY_BUFFER,e,this._gl.DYNAMIC_DRAW),this._resetVertexBufferBinding(),n.references=1,n},e.prototype.updateDynamicIndexBuffer=function(e,t,n){var r;void 0===n&&(n=0),this._currentBoundBuffer[this._gl.ELEMENT_ARRAY_BUFFER]=null,this.bindIndexBuffer(e),r=t instanceof Uint16Array||t instanceof Uint32Array?t:e.is32Bits?new Uint32Array(t):new Uint16Array(t),this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,r,this._gl.DYNAMIC_DRAW),this._resetIndexBufferBinding()},e.prototype.updateDynamicVertexBuffer=function(e,t,n,r){this.bindArrayBuffer(e),void 0===n&&(n=0),void 0===r?t instanceof Array?this._gl.bufferSubData(this._gl.ARRAY_BUFFER,n,new Float32Array(t)):this._gl.bufferSubData(this._gl.ARRAY_BUFFER,n,t):t instanceof Array?this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,new Float32Array(t).subarray(n,n+r)):(t=t instanceof ArrayBuffer?new Uint8Array(t,n,r):new Uint8Array(t.buffer,t.byteOffset+n,r),this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,t)),this._resetVertexBufferBinding()},e.prototype._resetIndexBufferBinding=function(){this.bindIndexBuffer(null),this._cachedIndexBuffer=null},e.prototype.createIndexBuffer=function(e,t){var n,r=this._gl.createBuffer(),i=new E.a(r);if(!r)throw new Error("Unable to create index buffer");this.bindIndexBuffer(i);var o=!1;if(e instanceof Uint16Array)n=e;else if(this._caps.uintIndices)if(e instanceof Uint32Array)n=e,o=!0;else{for(var a=0;a<e.length;a++)if(e[a]>65535){o=!0;break}n=o?new Uint32Array(e):new Uint16Array(e)}else n=new Uint16Array(e);return this._gl.bufferData(this._gl.ELEMENT_ARRAY_BUFFER,n,t?this._gl.DYNAMIC_DRAW:this._gl.STATIC_DRAW),this._resetIndexBufferBinding(),i.references=1,i.is32Bits=o,i},e.prototype.bindArrayBuffer=function(e){this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.bindBuffer(e,this._gl.ARRAY_BUFFER)},e.prototype.bindUniformBuffer=function(e){this._gl.bindBuffer(this._gl.UNIFORM_BUFFER,e?e.underlyingResource:null)},e.prototype.bindUniformBufferBase=function(e,t){this._gl.bindBufferBase(this._gl.UNIFORM_BUFFER,t,e?e.underlyingResource:null)},e.prototype.bindUniformBlock=function(e,t,n){var r=e.program,i=this._gl.getUniformBlockIndex(r,t);this._gl.uniformBlockBinding(r,i,n)},e.prototype.bindIndexBuffer=function(e){this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.bindBuffer(e,this._gl.ELEMENT_ARRAY_BUFFER)},e.prototype.bindBuffer=function(e,t){(this._vaoRecordInProgress||this._currentBoundBuffer[t]!==e)&&(this._gl.bindBuffer(t,e?e.underlyingResource:null),this._currentBoundBuffer[t]=e)},e.prototype.updateArrayBuffer=function(e){this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,e)},e.prototype._vertexAttribPointer=function(e,t,n,r,i,o,a){var s=this._currentBufferPointers[t],u=!1;s.active?(s.buffer!==e&&(s.buffer=e,u=!0),s.size!==n&&(s.size=n,u=!0),s.type!==r&&(s.type=r,u=!0),s.normalized!==i&&(s.normalized=i,u=!0),s.stride!==o&&(s.stride=o,u=!0),s.offset!==a&&(s.offset=a,u=!0)):(u=!0,s.active=!0,s.index=t,s.size=n,s.type=r,s.normalized=i,s.stride=o,s.offset=a,s.buffer=e),(u||this._vaoRecordInProgress)&&(this.bindArrayBuffer(e),this._gl.vertexAttribPointer(t,n,r,i,o,a))},e.prototype._bindIndexBufferWithCache=function(e){null!=e&&this._cachedIndexBuffer!==e&&(this._cachedIndexBuffer=e,this.bindIndexBuffer(e),this._uintIndicesCurrentlySet=e.is32Bits)},e.prototype._bindVertexBuffersAttributes=function(e,t){var n=t.getAttributesNames();this._vaoRecordInProgress||this._unbindVertexArrayObject(),this.unbindAllAttributes();for(var r=0;r<n.length;r++){var i=t.getAttributeLocation(r);if(i>=0){var o=e[n[r]];if(!o)continue;this._gl.enableVertexAttribArray(i),this._vaoRecordInProgress||(this._vertexAttribArraysEnabled[i]=!0);var a=o.getBuffer();a&&(this._vertexAttribPointer(a,i,o.getSize(),o.type,o.normalized,o.byteStride,o.byteOffset),o.getIsInstanced()&&(this._gl.vertexAttribDivisor(i,o.getInstanceDivisor()),this._vaoRecordInProgress||(this._currentInstanceLocations.push(i),this._currentInstanceBuffers.push(a))))}}},e.prototype.recordVertexArrayObject=function(e,t,n){var r=this._gl.createVertexArray();return this._vaoRecordInProgress=!0,this._gl.bindVertexArray(r),this._mustWipeVertexAttributes=!0,this._bindVertexBuffersAttributes(e,n),this.bindIndexBuffer(t),this._vaoRecordInProgress=!1,this._gl.bindVertexArray(null),r},e.prototype.bindVertexArrayObject=function(e,t){this._cachedVertexArrayObject!==e&&(this._cachedVertexArrayObject=e,this._gl.bindVertexArray(e),this._cachedVertexBuffers=null,this._cachedIndexBuffer=null,this._uintIndicesCurrentlySet=null!=t&&t.is32Bits,this._mustWipeVertexAttributes=!0)},e.prototype.bindBuffersDirectly=function(e,t,n,r,i){if(this._cachedVertexBuffers!==e||this._cachedEffectForVertexBuffers!==i){this._cachedVertexBuffers=e,this._cachedEffectForVertexBuffers=i;var o=i.getAttributesCount();this._unbindVertexArrayObject(),this.unbindAllAttributes();for(var a=0,s=0;s<o;s++)if(s<n.length){var u=i.getAttributeLocation(s);u>=0&&(this._gl.enableVertexAttribArray(u),this._vertexAttribArraysEnabled[u]=!0,this._vertexAttribPointer(e,u,n[s],this._gl.FLOAT,!1,r,a)),a+=4*n[s]}}this._bindIndexBufferWithCache(t)},e.prototype._unbindVertexArrayObject=function(){this._cachedVertexArrayObject&&(this._cachedVertexArrayObject=null,this._gl.bindVertexArray(null))},e.prototype.bindBuffers=function(e,t,n){this._cachedVertexBuffers===e&&this._cachedEffectForVertexBuffers===n||(this._cachedVertexBuffers=e,this._cachedEffectForVertexBuffers=n,this._bindVertexBuffersAttributes(e,n)),this._bindIndexBufferWithCache(t)},e.prototype.unbindInstanceAttributes=function(){for(var e,t=0,n=this._currentInstanceLocations.length;t<n;t++){var r=this._currentInstanceBuffers[t];e!=r&&r.references&&(e=r,this.bindArrayBuffer(r)),this._gl.vertexAttribDivisor(this._currentInstanceLocations[t],0)}this._currentInstanceBuffers.length=0,this._currentInstanceLocations.length=0},e.prototype.releaseVertexArrayObject=function(e){this._gl.deleteVertexArray(e)},e.prototype._releaseBuffer=function(e){return e.references--,0===e.references&&(this._gl.deleteBuffer(e.underlyingResource),!0)},e.prototype.createInstancesBuffer=function(e){var t=this._gl.createBuffer();if(!t)throw new Error("Unable to create instance buffer");var n=new E.a(t);return n.capacity=e,this.bindArrayBuffer(n),this._gl.bufferData(this._gl.ARRAY_BUFFER,e,this._gl.DYNAMIC_DRAW),n},e.prototype.deleteInstancesBuffer=function(e){this._gl.deleteBuffer(e)},e.prototype.updateAndBindInstancesBuffer=function(e,t,n){if(this.bindArrayBuffer(e),t&&this._gl.bufferSubData(this._gl.ARRAY_BUFFER,0,t),void 0!==n[0].index){for(var r=0,i=0;i<n.length;i++)r+=4*(o=n[i]).attributeSize;for(i=0;i<n.length;i++){var o=n[i];this._vertexAttribArraysEnabled[o.index]||(this._gl.enableVertexAttribArray(o.index),this._vertexAttribArraysEnabled[o.index]=!0),this._vertexAttribPointer(e,o.index,o.attributeSize,o.attribyteType||this._gl.FLOAT,o.normalized||!1,r,o.offset),this._gl.vertexAttribDivisor(o.index,1),this._currentInstanceLocations.push(o.index),this._currentInstanceBuffers.push(e)}}else for(var a=0;a<4;a++){var s=n[a];this._vertexAttribArraysEnabled[s]||(this._gl.enableVertexAttribArray(s),this._vertexAttribArraysEnabled[s]=!0),this._vertexAttribPointer(e,s,4,this._gl.FLOAT,!1,64,16*a),this._gl.vertexAttribDivisor(s,1),this._currentInstanceLocations.push(s),this._currentInstanceBuffers.push(e)}},e.prototype.applyStates=function(){this._depthCullingState.apply(this._gl),this._stencilState.apply(this._gl),this._alphaState.apply(this._gl)},e.prototype.draw=function(e,t,n,r){this.drawElementsType(e?d.a.TriangleFillMode:d.a.WireFrameFillMode,t,n,r)},e.prototype.drawPointClouds=function(e,t,n){this.drawArraysType(d.a.PointFillMode,e,t,n)},e.prototype.drawUnIndexed=function(e,t,n,r){this.drawArraysType(e?d.a.TriangleFillMode:d.a.WireFrameFillMode,t,n,r)},e.prototype.drawElementsType=function(e,t,n,r){this.applyStates(),this._drawCalls.addCount(1,!1);var i=this._drawMode(e),o=this._uintIndicesCurrentlySet?this._gl.UNSIGNED_INT:this._gl.UNSIGNED_SHORT,a=this._uintIndicesCurrentlySet?4:2;r?this._gl.drawElementsInstanced(i,n,o,t*a,r):this._gl.drawElements(i,n,o,t*a)},e.prototype.drawArraysType=function(e,t,n,r){this.applyStates(),this._drawCalls.addCount(1,!1);var i=this._drawMode(e);r?this._gl.drawArraysInstanced(i,t,n,r):this._gl.drawArrays(i,t,n)},e.prototype._drawMode=function(e){switch(e){case d.a.TriangleFillMode:return this._gl.TRIANGLES;case d.a.PointFillMode:return this._gl.POINTS;case d.a.WireFrameFillMode:return this._gl.LINES;case d.a.PointListDrawMode:return this._gl.POINTS;case d.a.LineListDrawMode:return this._gl.LINES;case d.a.LineLoopDrawMode:return this._gl.LINE_LOOP;case d.a.LineStripDrawMode:return this._gl.LINE_STRIP;case d.a.TriangleStripDrawMode:return this._gl.TRIANGLE_STRIP;case d.a.TriangleFanDrawMode:return this._gl.TRIANGLE_FAN;default:return this._gl.TRIANGLES}},e.prototype._releaseEffect=function(e){this._compiledEffects[e._key]&&(delete this._compiledEffects[e._key],this._deletePipelineContext(e.getPipelineContext()))},e.prototype._deletePipelineContext=function(e){var t=e;t&&t.program&&(t.program.__SPECTOR_rebuildProgram=null,t.transformFeedback&&(this.deleteTransformFeedback(t.transformFeedback),t.transformFeedback=null),this._gl.deleteProgram(t.program))},e.prototype.createEffect=function(e,t,n,r,i,o,a,s,u){var l=(e.vertexElement||e.vertex||e)+"+"+(e.fragmentElement||e.fragment||e)+"@"+(i||t.defines);if(this._compiledEffects[l]){var c=this._compiledEffects[l];return a&&c.isReady()&&a(c),c}var d=new h.a(e,t,n,r,this,i,o,a,s,u);return d._key=l,this._compiledEffects[l]=d,d},e.prototype._compileShader=function(e,t,n,r){return this._compileRawShader(r+(n?n+"\n":"")+e,t)},e.prototype._compileRawShader=function(e,t){var n=this._gl,r=n.createShader("vertex"===t?n.VERTEX_SHADER:n.FRAGMENT_SHADER);if(!r)throw new Error("Something went wrong while compile the shader.");return n.shaderSource(r,e),n.compileShader(r),r},e.prototype.createRawShaderProgram=function(e,t,n,r,i){void 0===i&&(i=null),r=r||this._gl;var o=this._compileRawShader(t,"vertex"),a=this._compileRawShader(n,"fragment");return this._createShaderProgram(e,o,a,r,i)},e.prototype.createShaderProgram=function(e,t,n,r,i,o){void 0===o&&(o=null),i=i||this._gl,this.onBeforeShaderCompilationObservable.notifyObservers(this);var a=this._webGLVersion>1?"#version 300 es\n#define WEBGL2 \n":"",s=this._compileShader(t,"vertex",r,a),u=this._compileShader(n,"fragment",r,a),l=this._createShaderProgram(e,s,u,i,o);return this.onAfterShaderCompilationObservable.notifyObservers(this),l},e.prototype.createPipelineContext=function(){var e=new T.a;return e.engine=this,this._caps.parallelShaderCompile&&(e.isParallelCompiled=!0),e},e.prototype._createShaderProgram=function(e,t,n,r,i){void 0===i&&(i=null);var o=r.createProgram();if(e.program=o,!o)throw new Error("Unable to create program");if(r.attachShader(o,t),r.attachShader(o,n),this.webGLVersion>1&&i){var a=this.createTransformFeedback();this.bindTransformFeedback(a),this.setTranformFeedbackVaryings(o,i),e.transformFeedback=a}return r.linkProgram(o),this.webGLVersion>1&&i&&this.bindTransformFeedback(null),e.context=r,e.vertexShader=t,e.fragmentShader=n,e.isParallelCompiled||this._finalizePipelineContext(e),o},e.prototype._finalizePipelineContext=function(e){var t=e.context,n=e.vertexShader,r=e.fragmentShader,i=e.program;if(!t.getProgramParameter(i,t.LINK_STATUS)){var o,a;if(!this._gl.getShaderParameter(n,this._gl.COMPILE_STATUS)&&(o=this._gl.getShaderInfoLog(n)))throw new Error(o);if(!this._gl.getShaderParameter(r,this._gl.COMPILE_STATUS)&&(o=this._gl.getShaderInfoLog(r)))throw new Error(o);if(a=t.getProgramInfoLog(i))throw new Error(a)}if(this.validateShaderPrograms&&(t.validateProgram(i),!t.getProgramParameter(i,t.VALIDATE_STATUS)&&(a=t.getProgramInfoLog(i))))throw new Error(a);t.deleteShader(n),t.deleteShader(r),e.vertexShader=void 0,e.fragmentShader=void 0,e.onCompiled&&(e.onCompiled(),e.onCompiled=void 0)},e.prototype._preparePipelineContext=function(e,t,n,r,i,o,a){var s=e;s.program=r?this.createRawShaderProgram(s,t,n,void 0,a):this.createShaderProgram(s,t,n,o,void 0,a),s.program.__SPECTOR_rebuildProgram=i},e.prototype._isRenderingStateCompiled=function(e){var t=e;return!!this._gl.getProgramParameter(t.program,this._caps.parallelShaderCompile.COMPLETION_STATUS_KHR)&&(this._finalizePipelineContext(t),!0)},e.prototype._executeWhenRenderingStateIsCompiled=function(e,t){e.isParallelCompiled?e.onCompiled=t:t()},e.prototype.getUniforms=function(e,t){for(var n=new Array,r=e,i=0;i<t.length;i++)n.push(this._gl.getUniformLocation(r.program,t[i]));return n},e.prototype.getAttributes=function(e,t){for(var n=[],r=e,i=0;i<t.length;i++)try{n.push(this._gl.getAttribLocation(r.program,t[i]))}catch(e){n.push(-1)}return n},e.prototype.enableEffect=function(e){e&&e!==this._currentEffect&&(this.bindSamplers(e),this._currentEffect=e,e.onBind&&e.onBind(e),e._onBindObservable&&e._onBindObservable.notifyObservers(e))},e.prototype.setIntArray=function(e,t){e&&this._gl.uniform1iv(e,t)},e.prototype.setIntArray2=function(e,t){e&&t.length%2==0&&this._gl.uniform2iv(e,t)},e.prototype.setIntArray3=function(e,t){e&&t.length%3==0&&this._gl.uniform3iv(e,t)},e.prototype.setIntArray4=function(e,t){e&&t.length%4==0&&this._gl.uniform4iv(e,t)},e.prototype.setFloatArray=function(e,t){e&&this._gl.uniform1fv(e,t)},e.prototype.setFloatArray2=function(e,t){e&&t.length%2==0&&this._gl.uniform2fv(e,t)},e.prototype.setFloatArray3=function(e,t){e&&t.length%3==0&&this._gl.uniform3fv(e,t)},e.prototype.setFloatArray4=function(e,t){e&&t.length%4==0&&this._gl.uniform4fv(e,t)},e.prototype.setArray=function(e,t){e&&this._gl.uniform1fv(e,t)},e.prototype.setArray2=function(e,t){e&&t.length%2==0&&this._gl.uniform2fv(e,t)},e.prototype.setArray3=function(e,t){e&&t.length%3==0&&this._gl.uniform3fv(e,t)},e.prototype.setArray4=function(e,t){e&&t.length%4==0&&this._gl.uniform4fv(e,t)},e.prototype.setMatrices=function(e,t){e&&this._gl.uniformMatrix4fv(e,!1,t)},e.prototype.setMatrix=function(e,t){e&&this._gl.uniformMatrix4fv(e,!1,t.toArray())},e.prototype.setMatrix3x3=function(e,t){e&&this._gl.uniformMatrix3fv(e,!1,t)},e.prototype.setMatrix2x2=function(e,t){e&&this._gl.uniformMatrix2fv(e,!1,t)},e.prototype.setInt=function(e,t){e&&this._gl.uniform1i(e,t)},e.prototype.setFloat=function(e,t){e&&this._gl.uniform1f(e,t)},e.prototype.setFloat2=function(e,t,n){e&&this._gl.uniform2f(e,t,n)},e.prototype.setFloat3=function(e,t,n,r){e&&this._gl.uniform3f(e,t,n,r)},e.prototype.setBool=function(e,t){e&&this._gl.uniform1i(e,t)},e.prototype.setFloat4=function(e,t,n,r,i){e&&this._gl.uniform4f(e,t,n,r,i)},e.prototype.setColor3=function(e,t){e&&this._gl.uniform3f(e,t.r,t.g,t.b)},e.prototype.setColor4=function(e,t,n){e&&this._gl.uniform4f(e,t.r,t.g,t.b,n)},e.prototype.setDirectColor4=function(e,t){e&&this._gl.uniform4f(e,t.r,t.g,t.b,t.a)},e.prototype.setState=function(e,t,n,r){void 0===t&&(t=0),void 0===r&&(r=!1),(this._depthCullingState.cull!==e||n)&&(this._depthCullingState.cull=e);var i=this.cullBackFaces?this._gl.BACK:this._gl.FRONT;(this._depthCullingState.cullFace!==i||n)&&(this._depthCullingState.cullFace=i),this.setZOffset(t);var o=r?this._gl.CW:this._gl.CCW;(this._depthCullingState.frontFace!==o||n)&&(this._depthCullingState.frontFace=o)},e.prototype.setZOffset=function(e){this._depthCullingState.zOffset=e},e.prototype.getZOffset=function(){return this._depthCullingState.zOffset},e.prototype.setDepthBuffer=function(e){this._depthCullingState.depthTest=e},e.prototype.getDepthWrite=function(){return this._depthCullingState.depthMask},e.prototype.setDepthWrite=function(e){this._depthCullingState.depthMask=e},e.prototype.setColorWrite=function(e){this._gl.colorMask(e,e,e,e),this._colorWrite=e},e.prototype.getColorWrite=function(){return this._colorWrite},e.prototype.setAlphaConstants=function(e,t,n,r){this._alphaState.setAlphaBlendConstants(e,t,n,r)},e.prototype.setAlphaMode=function(t,n){if(void 0===n&&(n=!1),this._alphaMode!==t){switch(t){case e.ALPHA_DISABLE:this._alphaState.alphaBlend=!1;break;case e.ALPHA_PREMULTIPLIED:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case e.ALPHA_PREMULTIPLIED_PORTERDUFF:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0;break;case e.ALPHA_COMBINE:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_ALPHA,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case e.ALPHA_ONEONE:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case e.ALPHA_ADD:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE,this._gl.ZERO,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case e.ALPHA_SUBTRACT:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ZERO,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case e.ALPHA_MULTIPLY:this._alphaState.setAlphaBlendFunctionParameters(this._gl.DST_COLOR,this._gl.ZERO,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case e.ALPHA_MAXIMIZED:this._alphaState.setAlphaBlendFunctionParameters(this._gl.SRC_ALPHA,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE),this._alphaState.alphaBlend=!0;break;case e.ALPHA_INTERPOLATE:this._alphaState.setAlphaBlendFunctionParameters(this._gl.CONSTANT_COLOR,this._gl.ONE_MINUS_CONSTANT_COLOR,this._gl.CONSTANT_ALPHA,this._gl.ONE_MINUS_CONSTANT_ALPHA),this._alphaState.alphaBlend=!0;break;case e.ALPHA_SCREENMODE:this._alphaState.setAlphaBlendFunctionParameters(this._gl.ONE,this._gl.ONE_MINUS_SRC_COLOR,this._gl.ONE,this._gl.ONE_MINUS_SRC_ALPHA),this._alphaState.alphaBlend=!0}n||this.setDepthWrite(t===e.ALPHA_DISABLE),this._alphaMode=t}},e.prototype.getAlphaMode=function(){return this._alphaMode},e.prototype.clearInternalTexturesCache=function(){this._internalTexturesCache=[]},e.prototype.wipeCaches=function(e){this.preventCacheWipeBetweenFrames&&!e||(this._currentEffect=null,this._viewportCached.x=0,this._viewportCached.y=0,this._viewportCached.z=0,this._viewportCached.w=0,e&&(this.resetTextureCache(),this._currentProgram=null,this._stencilState.reset(),this._depthCullingState.reset(),this.setDepthFunctionToLessOrEqual(),this._alphaState.reset(),this._unpackFlipYCached=null),this._resetVertexBufferBinding(),this._cachedIndexBuffer=null,this._cachedEffectForVertexBuffers=null,this._unbindVertexArrayObject(),this.bindIndexBuffer(null))},e.prototype.setTextureFormatToUse=function(e){for(var t=0,n=this.texturesSupported.length;t<n;t++)for(var r=0,i=e.length;r<i;r++)if(this._texturesSupported[t]===e[r].toLowerCase())return this._textureFormatInUse=this._texturesSupported[t];return this._textureFormatInUse=null,null},e.prototype._getSamplingParameters=function(t,n){var r=this._gl,i=r.NEAREST,o=r.NEAREST;switch(t){case e.TEXTURE_BILINEAR_SAMPLINGMODE:i=r.LINEAR,o=n?r.LINEAR_MIPMAP_NEAREST:r.LINEAR;break;case e.TEXTURE_TRILINEAR_SAMPLINGMODE:i=r.LINEAR,o=n?r.LINEAR_MIPMAP_LINEAR:r.LINEAR;break;case e.TEXTURE_NEAREST_SAMPLINGMODE:i=r.NEAREST,o=n?r.NEAREST_MIPMAP_LINEAR:r.NEAREST;break;case e.TEXTURE_NEAREST_NEAREST_MIPNEAREST:i=r.NEAREST,o=n?r.NEAREST_MIPMAP_NEAREST:r.NEAREST;break;case e.TEXTURE_NEAREST_LINEAR_MIPNEAREST:i=r.NEAREST,o=n?r.LINEAR_MIPMAP_NEAREST:r.LINEAR;break;case e.TEXTURE_NEAREST_LINEAR_MIPLINEAR:i=r.NEAREST,o=n?r.LINEAR_MIPMAP_LINEAR:r.LINEAR;break;case e.TEXTURE_NEAREST_LINEAR:i=r.NEAREST,o=r.LINEAR;break;case e.TEXTURE_NEAREST_NEAREST:i=r.NEAREST,o=r.NEAREST;break;case e.TEXTURE_LINEAR_NEAREST_MIPNEAREST:i=r.LINEAR,o=n?r.NEAREST_MIPMAP_NEAREST:r.NEAREST;break;case e.TEXTURE_LINEAR_NEAREST_MIPLINEAR:i=r.LINEAR,o=n?r.NEAREST_MIPMAP_LINEAR:r.NEAREST;break;case e.TEXTURE_LINEAR_LINEAR:i=r.LINEAR,o=r.LINEAR;break;case e.TEXTURE_LINEAR_NEAREST:i=r.LINEAR,o=r.NEAREST}return{min:o,mag:i}},e.prototype._createTexture=function(){var e=this._gl.createTexture();if(!e)throw new Error("Unable to create texture");return e},e.prototype.createTexture=function(t,n,r,i,o,a,s,l,c,h,d,p){var _=this;void 0===o&&(o=e.TEXTURE_TRILINEAR_SAMPLINGMODE),void 0===a&&(a=null),void 0===s&&(s=null),void 0===l&&(l=null),void 0===c&&(c=null),void 0===h&&(h=null),void 0===d&&(d=null),void 0===p&&(p=[]);for(var m=String(t),g="data:"===m.substr(0,5),v="blob:"===m.substr(0,5),y=g&&-1!==m.indexOf(";base64,"),b=c||new f.a(this,f.a.DATASOURCE_URL),T=m.lastIndexOf("."),E=d||(T>-1?m.substring(T).toLowerCase():""),x=null,M=0,A=e._TextureLoaders;M<A.length;M++){var S=A[M];if(-1===p.indexOf(S)&&S.canLoad(E,this._textureFormatInUse,c,y,!!l)){x=S;break}}x&&(m=x.transformUrl(m,this._textureFormatInUse)),i&&i._addPendingData(b),b.url=m,b.generateMipMaps=!n,b.samplingMode=o,b.invertY=r,this._doNotHandleContextLost||(b._buffer=l);var C=null;a&&!c&&(C=b.onLoadedObservable.add(a)),c||this._internalTexturesCache.push(b);var P=function(e,r){i&&i._removePendingData(b);var a=!1;x&&x.getFallbackTextureUrl(m,_._textureFormatInUse)&&(a=!0,p.push(x),u.h.Warn(x.constructor.name+" failed when trying to load "+b.url+", falling back to the next supported loader"),_.createTexture(t,n,b.invertY,i,o,null,null,l,b,void 0,void 0,p)),a||(C&&b.onLoadedObservable.remove(C),u.h.UseFallbackTexture&&_.createTexture(u.h.fallbackTexture,n,b.invertY,i,o,null,null,l,b)),s&&s(e||"Unknown error",r)};if(x){var R=function(e){x.loadData(e,b,function(e,t,n,r,a,s){s?P("TextureLoader failed to load data"):_._prepareWebGLTexture(b,i,e,t,b.invertY,!n,r,function(){return a(),!1},o)})};l?R(l):this._loadFile(m,R,void 0,i?i.offlineProvider:void 0,!0,function(e,t){P("Unable to load "+t)})}else{var D=function(t){v&&!_._doNotHandleContextLost&&(b._buffer=t),_._prepareWebGLTexture(b,i,t.width,t.height,b.invertY,n,!1,function(n,r,o){var a=_._gl,s=t.width===n&&t.height===r,u=h?_._getInternalFormat(h):".jpg"===E?a.RGB:a.RGBA;if(s)return a.texImage2D(a.TEXTURE_2D,0,u,u,a.UNSIGNED_BYTE,t),!1;var l=_._caps.maxTextureSize;if(t.width>l||t.height>l||null===e._RescalePostProcessFactory)return _._prepareWorkingCanvas(),!(!_._workingCanvas||!_._workingContext||(_._workingCanvas.width=n,_._workingCanvas.height=r,_._workingContext.drawImage(t,0,0,t.width,t.height,0,0,n,r),a.texImage2D(a.TEXTURE_2D,0,u,u,a.UNSIGNED_BYTE,_._workingCanvas),b.width=n,b.height=r,1));var c=new f.a(_,f.a.DATASOURCE_TEMP);return _._bindTextureDirectly(a.TEXTURE_2D,c,!0),a.texImage2D(a.TEXTURE_2D,0,u,u,a.UNSIGNED_BYTE,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),_._rescaleTexture(c,b,i,u,function(){_._releaseTexture(c),_._bindTextureDirectly(a.TEXTURE_2D,b,!0),o()}),!0},o)};!g||y?l instanceof HTMLImageElement?D(l):u.h.LoadImage(m,D,P,i?i.offlineProvider:null):"string"==typeof l||l instanceof ArrayBuffer||l instanceof Blob?u.h.LoadImage(l,D,P,i?i.offlineProvider:null):D(l)}return b},e.prototype._rescaleTexture=function(t,n,r,i,o){var a=this,s=this.createRenderTargetTexture({width:n.width,height:n.height},{generateMipMaps:!1,type:e.TEXTURETYPE_UNSIGNED_INT,samplingMode:e.TEXTURE_BILINEAR_SAMPLINGMODE,generateDepthBuffer:!1,generateStencilBuffer:!1});!this._rescalePostProcess&&e._RescalePostProcessFactory&&(this._rescalePostProcess=e._RescalePostProcessFactory(this)),this._rescalePostProcess.getEffect().executeWhenCompiled(function(){a._rescalePostProcess.onApply=function(e){e._bindTexture("textureSampler",t)};var e=r;e||(e=a.scenes[a.scenes.length-1]),e.postProcessManager.directRender([a._rescalePostProcess],s,!0),a._bindTextureDirectly(a._gl.TEXTURE_2D,n,!0),a._gl.copyTexImage2D(a._gl.TEXTURE_2D,0,i,0,0,n.width,n.height,0),a.unBindFramebuffer(s),a._releaseTexture(s),o&&o()})},e.prototype.createRawTexture=function(t,n,r,i,o,a,s,u,l){throw void 0===u&&(u=null),void 0===l&&(l=e.TEXTURETYPE_UNSIGNED_INT),b.a.WarnImport("Engine.RawTexture")},e.prototype._unpackFlipY=function(e){this._unpackFlipYCached!==e&&(this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,e?1:0),this.enableUnpackFlipYCached&&(this._unpackFlipYCached=e))},e.prototype._getUnpackAlignement=function(){return this._gl.getParameter(this._gl.UNPACK_ALIGNMENT)},e.prototype.createDynamicTexture=function(e,t,n,r){var i=new f.a(this,f.a.DATASOURCE_DYNAMIC);return i.baseWidth=e,i.baseHeight=t,n&&(e=this.needPOTTextures?u.h.GetExponentOfTwo(e,this._caps.maxTextureSize):e,t=this.needPOTTextures?u.h.GetExponentOfTwo(t,this._caps.maxTextureSize):t),i.width=e,i.height=t,i.isReady=!1,i.generateMipMaps=n,i.samplingMode=r,this.updateTextureSamplingMode(r,i),this._internalTexturesCache.push(i),i},e.prototype.updateTextureSamplingMode=function(e,t){var n=this._getSamplingParameters(e,t.generateMipMaps);t.isCube?(this._setTextureParameterInteger(this._gl.TEXTURE_CUBE_MAP,this._gl.TEXTURE_MAG_FILTER,n.mag,t),this._setTextureParameterInteger(this._gl.TEXTURE_CUBE_MAP,this._gl.TEXTURE_MIN_FILTER,n.min),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null)):t.is3D?(this._setTextureParameterInteger(this._gl.TEXTURE_3D,this._gl.TEXTURE_MAG_FILTER,n.mag,t),this._setTextureParameterInteger(this._gl.TEXTURE_3D,this._gl.TEXTURE_MIN_FILTER,n.min),this._bindTextureDirectly(this._gl.TEXTURE_3D,null)):(this._setTextureParameterInteger(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,n.mag,t),this._setTextureParameterInteger(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,n.min),this._bindTextureDirectly(this._gl.TEXTURE_2D,null)),t.samplingMode=e},e.prototype.updateDynamicTexture=function(e,t,n,r,i,o){if(void 0===r&&(r=!1),void 0===o&&(o=!1),e){this._bindTextureDirectly(this._gl.TEXTURE_2D,e,!0,o),this._unpackFlipY(n),r&&this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1);var a=i?this._getInternalFormat(i):this._gl.RGBA;this._gl.texImage2D(this._gl.TEXTURE_2D,0,a,a,this._gl.UNSIGNED_BYTE,t),e.generateMipMaps&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(this._gl.TEXTURE_2D,null),r&&this._gl.pixelStorei(this._gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),e.isReady=!0}},e.prototype.updateVideoTexture=function(e,t,n){if(e&&!e._isDisabled){var r=this._bindTextureDirectly(this._gl.TEXTURE_2D,e,!0);this._unpackFlipY(!n);try{if(void 0===this._videoTextureSupported&&(this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,t),this._videoTextureSupported=0===this._gl.getError()),this._videoTextureSupported)this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,t);else{if(!e._workingCanvas){e._workingCanvas=document.createElement("canvas");var i=e._workingCanvas.getContext("2d");if(!i)throw new Error("Unable to get 2d context");e._workingContext=i,e._workingCanvas.width=e.width,e._workingCanvas.height=e.height}e._workingContext.drawImage(t,0,0,t.videoWidth,t.videoHeight,0,0,e.width,e.height),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,e._workingCanvas)}e.generateMipMaps&&this._gl.generateMipmap(this._gl.TEXTURE_2D),r||this._bindTextureDirectly(this._gl.TEXTURE_2D,null),e.isReady=!0}catch(t){e._isDisabled=!0}}},e.prototype.updateTextureComparisonFunction=function(t,n){if(1!==this.webGLVersion){var r=this._gl;t.isCube?(this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,t,!0),0===n?(r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_COMPARE_FUNC,e.LEQUAL),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_COMPARE_MODE,r.NONE)):(r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_COMPARE_FUNC,n),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE)),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null)):(this._bindTextureDirectly(this._gl.TEXTURE_2D,t,!0),0===n?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_COMPARE_FUNC,e.LEQUAL),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_COMPARE_MODE,r.NONE)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_COMPARE_FUNC,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE)),this._bindTextureDirectly(this._gl.TEXTURE_2D,null)),t._comparisonFunction=n}else g.a.Error("WebGL 1 does not support texture comparison.")},e.prototype._setupDepthStencilTexture=function(t,n,r,i,o){var a=n.width||n,s=n.height||n;t.baseWidth=a,t.baseHeight=s,t.width=a,t.height=s,t.isReady=!0,t.samples=1,t.generateMipMaps=!1,t._generateDepthBuffer=!0,t._generateStencilBuffer=r,t.samplingMode=i?e.TEXTURE_BILINEAR_SAMPLINGMODE:e.TEXTURE_NEAREST_SAMPLINGMODE,t.type=e.TEXTURETYPE_UNSIGNED_INT,t._comparisonFunction=o;var u=this._gl,l=t.isCube?u.TEXTURE_CUBE_MAP:u.TEXTURE_2D,c=this._getSamplingParameters(t.samplingMode,!1);u.texParameteri(l,u.TEXTURE_MAG_FILTER,c.mag),u.texParameteri(l,u.TEXTURE_MIN_FILTER,c.min),u.texParameteri(l,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(l,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),0===o?(u.texParameteri(l,u.TEXTURE_COMPARE_FUNC,e.LEQUAL),u.texParameteri(l,u.TEXTURE_COMPARE_MODE,u.NONE)):(u.texParameteri(l,u.TEXTURE_COMPARE_FUNC,o),u.texParameteri(l,u.TEXTURE_COMPARE_MODE,u.COMPARE_REF_TO_TEXTURE))},e.prototype.createDepthStencilTexture=function(e,t){return t.isCube?this._createDepthStencilCubeTexture(e.width||e,t):this._createDepthStencilTexture(e,t)},e.prototype._createDepthStencilTexture=function(e,t){var n=new f.a(this,f.a.DATASOURCE_DEPTHTEXTURE);if(!this._caps.depthTextureExtension)return g.a.Error("Depth texture is not supported by your browser or hardware."),n;var i=r.a({bilinearFiltering:!1,comparisonFunction:0,generateStencil:!1},t),o=this._gl;return this._bindTextureDirectly(o.TEXTURE_2D,n,!0),this._setupDepthStencilTexture(n,e,i.generateStencil,i.bilinearFiltering,i.comparisonFunction),this.webGLVersion>1?i.generateStencil?o.texImage2D(o.TEXTURE_2D,0,o.DEPTH24_STENCIL8,n.width,n.height,0,o.DEPTH_STENCIL,o.UNSIGNED_INT_24_8,null):o.texImage2D(o.TEXTURE_2D,0,o.DEPTH_COMPONENT24,n.width,n.height,0,o.DEPTH_COMPONENT,o.UNSIGNED_INT,null):i.generateStencil?o.texImage2D(o.TEXTURE_2D,0,o.DEPTH_STENCIL,n.width,n.height,0,o.DEPTH_STENCIL,o.UNSIGNED_INT_24_8,null):o.texImage2D(o.TEXTURE_2D,0,o.DEPTH_COMPONENT,n.width,n.height,0,o.DEPTH_COMPONENT,o.UNSIGNED_INT,null),this._bindTextureDirectly(o.TEXTURE_2D,null),n},e.prototype.setFrameBufferDepthStencilTexture=function(e){var t=e.getInternalTexture();if(t&&t._framebuffer&&e.depthStencilTexture){var n=this._gl,r=e.depthStencilTexture;this._bindUnboundFramebuffer(t._framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,r._generateStencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,r.isCube?n.TEXTURE_CUBE_MAP_POSITIVE_X:n.TEXTURE_2D,r._webGLTexture,0),this._bindUnboundFramebuffer(null)}},e.prototype.createRenderTargetTexture=function(t,n){var r=new y.a;void 0!==n&&"object"==typeof n?(r.generateMipMaps=n.generateMipMaps,r.generateDepthBuffer=void 0===n.generateDepthBuffer||n.generateDepthBuffer,r.generateStencilBuffer=r.generateDepthBuffer&&n.generateStencilBuffer,r.type=void 0===n.type?e.TEXTURETYPE_UNSIGNED_INT:n.type,r.samplingMode=void 0===n.samplingMode?e.TEXTURE_TRILINEAR_SAMPLINGMODE:n.samplingMode,r.format=void 0===n.format?e.TEXTUREFORMAT_RGBA:n.format):(r.generateMipMaps=n,r.generateDepthBuffer=!0,r.generateStencilBuffer=!1,r.type=e.TEXTURETYPE_UNSIGNED_INT,r.samplingMode=e.TEXTURE_TRILINEAR_SAMPLINGMODE,r.format=e.TEXTUREFORMAT_RGBA),(r.type!==e.TEXTURETYPE_FLOAT||this._caps.textureFloatLinearFiltering)&&(r.type!==e.TEXTURETYPE_HALF_FLOAT||this._caps.textureHalfFloatLinearFiltering)||(r.samplingMode=e.TEXTURE_NEAREST_SAMPLINGMODE);var i=this._gl,o=new f.a(this,f.a.DATASOURCE_RENDERTARGET);this._bindTextureDirectly(i.TEXTURE_2D,o,!0);var a=t.width||t,s=t.height||t,u=this._getSamplingParameters(r.samplingMode,!!r.generateMipMaps);r.type!==e.TEXTURETYPE_FLOAT||this._caps.textureFloat||(r.type=e.TEXTURETYPE_UNSIGNED_INT,g.a.Warn("Float textures are not supported. Render target forced to TEXTURETYPE_UNSIGNED_BYTE type")),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,u.mag),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,u.min),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texImage2D(i.TEXTURE_2D,0,this._getRGBABufferInternalSizedFormat(r.type,r.format),a,s,0,this._getInternalFormat(r.format),this._getWebGLTextureType(r.type),null);var l=this._currentFramebuffer,c=i.createFramebuffer();return this._bindUnboundFramebuffer(c),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,o._webGLTexture,0),o._depthStencilBuffer=this._setupFramebufferDepthAttachments(!!r.generateStencilBuffer,r.generateDepthBuffer,a,s),r.generateMipMaps&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(i.TEXTURE_2D,null),i.bindRenderbuffer(i.RENDERBUFFER,null),this._bindUnboundFramebuffer(l),o._framebuffer=c,o.baseWidth=a,o.baseHeight=s,o.width=a,o.height=s,o.isReady=!0,o.samples=1,o.generateMipMaps=!!r.generateMipMaps,o.samplingMode=r.samplingMode,o.type=r.type,o.format=r.format,o._generateDepthBuffer=r.generateDepthBuffer,o._generateStencilBuffer=!!r.generateStencilBuffer,this._internalTexturesCache.push(o),o},e.prototype._setupFramebufferDepthAttachments=function(e,t,n,r,i){void 0===i&&(i=1);var o=null,a=this._gl;return e?(o=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,o),i>1?a.renderbufferStorageMultisample(a.RENDERBUFFER,i,a.DEPTH24_STENCIL8,n,r):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,n,r),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,o)):t&&(o=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,o),i>1?a.renderbufferStorageMultisample(a.RENDERBUFFER,i,a.DEPTH_COMPONENT16,n,r):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,n,r),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,o)),o},e.prototype.updateRenderTargetTextureSampleCount=function(e,t){if(this.webGLVersion<2||!e)return 1;if(e.samples===t)return t;var n=this._gl;if(t=Math.min(t,n.getParameter(n.MAX_SAMPLES)),e._depthStencilBuffer&&(n.deleteRenderbuffer(e._depthStencilBuffer),e._depthStencilBuffer=null),e._MSAAFramebuffer&&(n.deleteFramebuffer(e._MSAAFramebuffer),e._MSAAFramebuffer=null),e._MSAARenderBuffer&&(n.deleteRenderbuffer(e._MSAARenderBuffer),e._MSAARenderBuffer=null),t>1){var r=n.createFramebuffer();if(!r)throw new Error("Unable to create multi sampled framebuffer");e._MSAAFramebuffer=r,this._bindUnboundFramebuffer(e._MSAAFramebuffer);var i=n.createRenderbuffer();if(!i)throw new Error("Unable to create multi sampled framebuffer");n.bindRenderbuffer(n.RENDERBUFFER,i),n.renderbufferStorageMultisample(n.RENDERBUFFER,t,this._getRGBAMultiSampleBufferFormat(e.type),e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i),e._MSAARenderBuffer=i}else this._bindUnboundFramebuffer(e._framebuffer);return e.samples=t,e._depthStencilBuffer=this._setupFramebufferDepthAttachments(e._generateStencilBuffer,e._generateDepthBuffer,e.width,e.height,t),n.bindRenderbuffer(n.RENDERBUFFER,null),this._bindUnboundFramebuffer(null),t},e.prototype._uploadCompressedDataToTextureDirectly=function(e,t,n,r,i,o,a){void 0===o&&(o=0),void 0===a&&(a=0);var s=this._gl,u=s.TEXTURE_2D;e.isCube&&(u=s.TEXTURE_CUBE_MAP_POSITIVE_X+o),this._gl.compressedTexImage2D(u,a,t,n,r,0,i)},e.prototype._uploadDataToTextureDirectly=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=this._gl,o=this._getWebGLTextureType(e.type),a=this._getInternalFormat(e.format),s=this._getRGBABufferInternalSizedFormat(e.type,a);this._unpackFlipY(e.invertY);var u=i.TEXTURE_2D;e.isCube&&(u=i.TEXTURE_CUBE_MAP_POSITIVE_X+n);var l=Math.round(c.a.Log2(e.width)),h=Math.round(c.a.Log2(e.height)),d=Math.pow(2,Math.max(l-r,0)),f=Math.pow(2,Math.max(h-r,0));i.texImage2D(u,r,s,d,f,0,a,o,t)},e.prototype._uploadArrayBufferViewToTexture=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=this._gl,o=e.isCube?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D;this._bindTextureDirectly(o,e,!0),this._uploadDataToTextureDirectly(e,t,n,r),this._bindTextureDirectly(o,null,!0)},e.prototype._uploadImageToTexture=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=this._gl,o=this._getWebGLTextureType(e.type),a=this._getInternalFormat(e.format),s=this._getRGBABufferInternalSizedFormat(e.type,a),u=e.isCube?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D;this._bindTextureDirectly(u,e,!0),this._unpackFlipY(e.invertY);var l=i.TEXTURE_2D;e.isCube&&(l=i.TEXTURE_CUBE_MAP_POSITIVE_X+n),i.texImage2D(l,r,s,a,o,t),this._bindTextureDirectly(u,null,!0)},e.prototype._setCubeMapTextureParams=function(e){var t=this._gl;t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this._bindTextureDirectly(t.TEXTURE_CUBE_MAP,null)},e.prototype.createRawCubeTexture=function(e,t,n,r,i,o,a,s){throw void 0===s&&(s=null),b.a.WarnImport("Engine.RawTexture")},e.prototype.createRawTexture3D=function(t,n,r,i,o,a,s,u,l,c){throw void 0===l&&(l=null),void 0===c&&(c=e.TEXTURETYPE_UNSIGNED_INT),b.a.WarnImport("Engine.RawTexture")},e.prototype._prepareWebGLTextureContinuation=function(e,t,n,r,i){var o=this._gl;if(o){var a=this._getSamplingParameters(i,!n);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,a.mag),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,a.min),n||r||o.generateMipmap(o.TEXTURE_2D),this._bindTextureDirectly(o.TEXTURE_2D,null),t&&t._removePendingData(e),e.onLoadedObservable.notifyObservers(e),e.onLoadedObservable.clear()}},e.prototype._prepareWebGLTexture=function(t,n,r,i,o,a,s,l,c){var h=this;void 0===c&&(c=e.TEXTURE_TRILINEAR_SAMPLINGMODE);var d=this.getCaps().maxTextureSize,f=Math.min(d,this.needPOTTextures?u.h.GetExponentOfTwo(r,d):r),p=Math.min(d,this.needPOTTextures?u.h.GetExponentOfTwo(i,d):i),_=this._gl;_&&(t._webGLTexture?(this._bindTextureDirectly(_.TEXTURE_2D,t,!0),this._unpackFlipY(void 0===o||!!o),t.baseWidth=r,t.baseHeight=i,t.width=f,t.height=p,t.isReady=!0,l(f,p,function(){h._prepareWebGLTextureContinuation(t,n,a,s,c)})||this._prepareWebGLTextureContinuation(t,n,a,s,c)):n&&n._removePendingData(t))},e.prototype._convertRGBtoRGBATextureData=function(t,n,r,i){var o;o=i===e.TEXTURETYPE_FLOAT?new Float32Array(n*r*4):new Uint32Array(n*r*4);for(var a=0;a<n;a++)for(var s=0;s<r;s++){var u=3*(s*n+a),l=4*(s*n+a);o[l+0]=t[u+0],o[l+1]=t[u+1],o[l+2]=t[u+2],o[l+3]=1}return o},e.prototype._releaseFramebufferObjects=function(e){var t=this._gl;e._framebuffer&&(t.deleteFramebuffer(e._framebuffer),e._framebuffer=null),e._depthStencilBuffer&&(t.deleteRenderbuffer(e._depthStencilBuffer),e._depthStencilBuffer=null),e._MSAAFramebuffer&&(t.deleteFramebuffer(e._MSAAFramebuffer),e._MSAAFramebuffer=null),e._MSAARenderBuffer&&(t.deleteRenderbuffer(e._MSAARenderBuffer),e._MSAARenderBuffer=null)},e.prototype._releaseTexture=function(e){var t=this._gl;this._releaseFramebufferObjects(e),t.deleteTexture(e._webGLTexture),this.unbindAllTextures();var n=this._internalTexturesCache.indexOf(e);-1!==n&&this._internalTexturesCache.splice(n,1),e._lodTextureHigh&&e._lodTextureHigh.dispose(),e._lodTextureMid&&e._lodTextureMid.dispose(),e._lodTextureLow&&e._lodTextureLow.dispose(),this.scenes.forEach(function(t){t.postProcesses.forEach(function(t){t._outputTexture==e&&(t._outputTexture=null)}),t.cameras.forEach(function(t){t._postProcesses.forEach(function(t){t&&t._outputTexture==e&&(t._outputTexture=null)})})})},e.prototype.setProgram=function(e){this._currentProgram!==e&&(this._gl.useProgram(e),this._currentProgram=e)},e.prototype.bindSamplers=function(e){var t=e.getPipelineContext();this.setProgram(t.program);for(var n=e.getSamplers(),r=0;r<n.length;r++){var i=e.getUniform(n[r]);i&&(this._boundUniforms[r]=i)}this._currentEffect=null},e.prototype._activateCurrentTexture=function(){this._currentTextureChannel!==this._activeChannel&&(this._gl.activeTexture(this._gl.TEXTURE0+this._activeChannel),this._currentTextureChannel=this._activeChannel)},e.prototype._bindTextureDirectly=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var i=!1,o=t&&t._associatedChannel>-1;return n&&o&&(this._activeChannel=t._associatedChannel),this._boundTexturesCache[this._activeChannel]!==t||r?(this._activateCurrentTexture(),this._gl.bindTexture(e,t&&t.isMultiview?t?t._colorTextureArray:null:t?t._webGLTexture:null),this._boundTexturesCache[this._activeChannel]=t,t&&(t._associatedChannel=this._activeChannel)):n&&(i=!0,this._activateCurrentTexture()),o&&!n&&this._bindSamplerUniformToChannel(t._associatedChannel,this._activeChannel),i},e.prototype._bindTexture=function(e,t){void 0!==e&&(t&&(t._associatedChannel=e),this._activeChannel=e,this._bindTextureDirectly(this._gl.TEXTURE_2D,t))},e.prototype.setTextureFromPostProcess=function(e,t){this._bindTexture(e,t?t._textures.data[t._currentRenderTextureInd]:null)},e.prototype.setTextureFromPostProcessOutput=function(e,t){this._bindTexture(e,t?t._outputTexture:null)},e.prototype.unbindAllTextures=function(){for(var e=0;e<this._maxSimultaneousTextures;e++)this._activeChannel=e,this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),this.webGLVersion>1&&this._bindTextureDirectly(this._gl.TEXTURE_3D,null)},e.prototype.setTexture=function(e,t,n){void 0!==e&&(t&&(this._boundUniforms[e]=t),this._setTexture(e,n))},e.prototype.setDepthStencilTexture=function(e,t,n){void 0!==e&&(t&&(this._boundUniforms[e]=t),n&&n.depthStencilTexture?this._setTexture(e,n,!1,!0):this._setTexture(e,null))},e.prototype._bindSamplerUniformToChannel=function(e,t){var n=this._boundUniforms[e];n._currentState!==t&&(this._gl.uniform1i(n,t),n._currentState=t)},e.prototype._getTextureWrapMode=function(t){switch(t){case e.TEXTURE_WRAP_ADDRESSMODE:return this._gl.REPEAT;case e.TEXTURE_CLAMP_ADDRESSMODE:return this._gl.CLAMP_TO_EDGE;case e.TEXTURE_MIRROR_ADDRESSMODE:return this._gl.MIRRORED_REPEAT}return this._gl.REPEAT},e.prototype._setTexture=function(t,n,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!1),!n)return null!=this._boundTexturesCache[t]&&(this._activeChannel=t,this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),this.webGLVersion>1&&this._bindTextureDirectly(this._gl.TEXTURE_3D,null)),!1;if(n.video)this._activeChannel=t,n.update();else if(n.delayLoadState===e.DELAYLOADSTATE_NOTLOADED)return n.delayLoad(),!1;var o;o=i?n.depthStencilTexture:n.isReady()?n.getInternalTexture():n.isCube?this.emptyCubeTexture:n.is3D?this.emptyTexture3D:this.emptyTexture,!r&&o&&(o._associatedChannel=t);var a=!0;if(this._boundTexturesCache[t]===o&&(r||this._bindSamplerUniformToChannel(o._associatedChannel,t),a=!1),this._activeChannel=t,o&&o.isMultiview)a&&this._bindTextureDirectly(this._gl.TEXTURE_2D_ARRAY,o,r);else if(o&&o.is3D)a&&this._bindTextureDirectly(this._gl.TEXTURE_3D,o,r),o&&o._cachedWrapU!==n.wrapU&&(o._cachedWrapU=n.wrapU,this._setTextureParameterInteger(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_S,this._getTextureWrapMode(n.wrapU),o)),o&&o._cachedWrapV!==n.wrapV&&(o._cachedWrapV=n.wrapV,this._setTextureParameterInteger(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_T,this._getTextureWrapMode(n.wrapV),o)),o&&o._cachedWrapR!==n.wrapR&&(o._cachedWrapR=n.wrapR,this._setTextureParameterInteger(this._gl.TEXTURE_3D,this._gl.TEXTURE_WRAP_R,this._getTextureWrapMode(n.wrapR),o)),this._setAnisotropicLevel(this._gl.TEXTURE_3D,n);else if(o&&o.isCube){if(a&&this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,o,r),o._cachedCoordinatesMode!==n.coordinatesMode){o._cachedCoordinatesMode=n.coordinatesMode;var s=n.coordinatesMode!==e.TEXTURE_CUBIC_MODE&&n.coordinatesMode!==e.TEXTURE_SKYBOX_MODE?this._gl.REPEAT:this._gl.CLAMP_TO_EDGE;this._setTextureParameterInteger(this._gl.TEXTURE_CUBE_MAP,this._gl.TEXTURE_WRAP_S,s,o),this._setTextureParameterInteger(this._gl.TEXTURE_CUBE_MAP,this._gl.TEXTURE_WRAP_T,s)}this._setAnisotropicLevel(this._gl.TEXTURE_CUBE_MAP,n)}else a&&this._bindTextureDirectly(this._gl.TEXTURE_2D,o,r),o&&o._cachedWrapU!==n.wrapU&&(o._cachedWrapU=n.wrapU,this._setTextureParameterInteger(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._getTextureWrapMode(n.wrapU),o)),o&&o._cachedWrapV!==n.wrapV&&(o._cachedWrapV=n.wrapV,this._setTextureParameterInteger(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._getTextureWrapMode(n.wrapV),o)),this._setAnisotropicLevel(this._gl.TEXTURE_2D,n);return!0},e.prototype.setTextureArray=function(e,t,n){if(void 0!==e&&t){this._textureUnits&&this._textureUnits.length===n.length||(this._textureUnits=new Int32Array(n.length));for(var r=0;r<n.length;r++){var i=n[r].getInternalTexture();i?(this._textureUnits[e+r]=e+r,i._associatedChannel=e+r):this._textureUnits[e+r]=-1}this._gl.uniform1iv(t,this._textureUnits);for(var o=0;o<n.length;o++)this._setTexture(this._textureUnits[o],n[o],!0)}},e.prototype._setAnisotropicLevel=function(t,n){var r=n.getInternalTexture();if(r){var i=this._caps.textureAnisotropicFilterExtension,o=n.anisotropicFilteringLevel;r.samplingMode!==e.TEXTURE_LINEAR_LINEAR_MIPNEAREST&&r.samplingMode!==e.TEXTURE_LINEAR_LINEAR_MIPLINEAR&&r.samplingMode!==e.TEXTURE_LINEAR_LINEAR&&(o=1),i&&r._cachedAnisotropicFilteringLevel!==o&&(this._setTextureParameterFloat(t,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o,this._caps.maxAnisotropy),r),r._cachedAnisotropicFilteringLevel=o)}},e.prototype._setTextureParameterFloat=function(e,t,n,r){this._bindTextureDirectly(e,r,!0,!0),this._gl.texParameterf(e,t,n)},e.prototype._setTextureParameterInteger=function(e,t,n,r){r&&this._bindTextureDirectly(e,r,!0,!0),this._gl.texParameteri(e,t,n)},e.prototype.readPixels=function(e,t,n,r){var i=new Uint8Array(r*n*4);return this._gl.readPixels(e,t,n,r,this._gl.RGBA,this._gl.UNSIGNED_BYTE,i),i},e.prototype.addExternalData=function(e,t){return this._externalData||(this._externalData=new a.a),this._externalData.add(e,t)},e.prototype.getExternalData=function(e){return this._externalData||(this._externalData=new a.a),this._externalData.get(e)},e.prototype.getOrAddExternalDataWithFactory=function(e,t){return this._externalData||(this._externalData=new a.a),this._externalData.getOrAddWithFactory(e,t)},e.prototype.removeExternalData=function(e){return this._externalData||(this._externalData=new a.a),this._externalData.remove(e)},e.prototype.unbindAllAttributes=function(){if(this._mustWipeVertexAttributes){this._mustWipeVertexAttributes=!1;for(var e=0;e<this._caps.maxVertexAttribs;e++)this._gl.disableVertexAttribArray(e),this._vertexAttribArraysEnabled[e]=!1,this._currentBufferPointers[e].active=!1}else{e=0;for(var t=this._vertexAttribArraysEnabled.length;e<t;e++)e>=this._caps.maxVertexAttribs||!this._vertexAttribArraysEnabled[e]||(this._gl.disableVertexAttribArray(e),this._vertexAttribArraysEnabled[e]=!1,this._currentBufferPointers[e].active=!1)}},e.prototype.releaseEffects=function(){for(var e in this._compiledEffects){var t=this._compiledEffects[e].getPipelineContext();this._deletePipelineContext(t)}this._compiledEffects={}},e.prototype.dispose=function(){for(this.hideLoadingUI(),this.stopRenderLoop(),this.onNewSceneAddedObservable.clear();this.postProcesses.length;)this.postProcesses[0].dispose();for(this._emptyTexture&&(this._releaseTexture(this._emptyTexture),this._emptyTexture=null),this._emptyCubeTexture&&(this._releaseTexture(this._emptyCubeTexture),this._emptyCubeTexture=null),this._rescalePostProcess&&this._rescalePostProcess.dispose();this.scenes.length;)this.scenes[0].dispose();1===e.Instances.length&&e.audioEngine&&e.audioEngine.dispose(),this.releaseEffects(),this.unbindAllAttributes(),this._boundUniforms=[],this._dummyFramebuffer&&this._gl.deleteFramebuffer(this._dummyFramebuffer),this.disableVR(),m.a.IsWindowObjectExist()&&(window.removeEventListener("blur",this._onBlur),window.removeEventListener("focus",this._onFocus),this._renderingCanvas&&(this._renderingCanvas.removeEventListener("focus",this._onCanvasFocus),this._renderingCanvas.removeEventListener("blur",this._onCanvasBlur),this._renderingCanvas.removeEventListener("pointerout",this._onCanvasPointerOut),this._doNotHandleContextLost||(this._renderingCanvas.removeEventListener("webglcontextlost",this._onContextLost),this._renderingCanvas.removeEventListener("webglcontextrestored",this._onContextRestored))),document.removeEventListener("fullscreenchange",this._onFullscreenChange),document.removeEventListener("mozfullscreenchange",this._onFullscreenChange),document.removeEventListener("webkitfullscreenchange",this._onFullscreenChange),document.removeEventListener("msfullscreenchange",this._onFullscreenChange),document.removeEventListener("pointerlockchange",this._onPointerLockChange),document.removeEventListener("mspointerlockchange",this._onPointerLockChange),document.removeEventListener("mozpointerlockchange",this._onPointerLockChange),document.removeEventListener("webkitpointerlockchange",this._onPointerLockChange));var t=e.Instances.indexOf(this);t>=0&&e.Instances.splice(t,1),this._workingCanvas=null,this._workingContext=null,this._currentBufferPointers=[],this._renderingCanvas=null,this._currentProgram=null,this._bindedRenderFunction=null,this.onResizeObservable.clear(),this.onCanvasBlurObservable.clear(),this.onCanvasFocusObservable.clear(),this.onCanvasPointerOutObservable.clear(),this.onBeginFrameObservable.clear(),this.onEndFrameObservable.clear(),h.a.ResetCache();for(var n=0,r=this._activeRequests;n<r.length;n++)r[n].abort()},e.prototype.displayLoadingUI=function(){if(m.a.IsWindowObjectExist()){var e=this.loadingScreen;e&&e.displayLoadingUI()}},e.prototype.hideLoadingUI=function(){if(m.a.IsWindowObjectExist()){var e=this._loadingScreen;e&&e.hideLoadingUI()}},Object.defineProperty(e.prototype,"loadingScreen",{get:function(){return!this._loadingScreen&&this._renderingCanvas&&(this._loadingScreen=e.DefaultLoadingScreenFactory(this._renderingCanvas)),this._loadingScreen},set:function(e){this._loadingScreen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadingUIText",{set:function(e){this.loadingScreen.loadingUIText=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadingUIBackgroundColor",{set:function(e){this.loadingScreen.loadingUIBackgroundColor=e},enumerable:!0,configurable:!0}),e.prototype.attachContextLostEvent=function(e){this._renderingCanvas&&this._renderingCanvas.addEventListener("webglcontextlost",e,!1)},e.prototype.attachContextRestoredEvent=function(e){this._renderingCanvas&&this._renderingCanvas.addEventListener("webglcontextrestored",e,!1)},e.prototype.getVertexShaderSource=function(e){var t=this._gl.getAttachedShaders(e);return t?this._gl.getShaderSource(t[0]):null},e.prototype.getFragmentShaderSource=function(e){var t=this._gl.getAttachedShaders(e);return t?this._gl.getShaderSource(t[1]):null},e.prototype.getError=function(){return this._gl.getError()},e.prototype.getFps=function(){return this._fps},e.prototype.getDeltaTime=function(){return this._deltaTime},e.prototype._measureFps=function(){this._performanceMonitor.sampleFrame(),this._fps=this._performanceMonitor.averageFPS,this._deltaTime=this._performanceMonitor.instantaneousFrameTime||0},e.prototype._readTexturePixels=function(e,t,n,r,i,o){void 0===r&&(r=-1),void 0===i&&(i=0),void 0===o&&(o=null);var a=this._gl;if(!this._dummyFramebuffer){var s=a.createFramebuffer();if(!s)throw new Error("Unable to create dummy framebuffer");this._dummyFramebuffer=s}a.bindFramebuffer(a.FRAMEBUFFER,this._dummyFramebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,r>-1?a.TEXTURE_CUBE_MAP_POSITIVE_X+r:a.TEXTURE_2D,e._webGLTexture,i);var u=void 0!==e.type?this._getWebGLTextureType(e.type):a.UNSIGNED_BYTE;switch(u){case a.UNSIGNED_BYTE:o||(o=new Uint8Array(4*t*n)),u=a.UNSIGNED_BYTE;break;default:o||(o=new Float32Array(4*t*n)),u=a.FLOAT}return a.readPixels(0,0,t,n,a.RGBA,u,o),a.bindFramebuffer(a.FRAMEBUFFER,this._currentFramebuffer),o},e.prototype._canRenderToFloatFramebuffer=function(){return this._webGLVersion>1?this._caps.colorBufferFloat:this._canRenderToFramebuffer(e.TEXTURETYPE_FLOAT)},e.prototype._canRenderToHalfFloatFramebuffer=function(){return this._webGLVersion>1?this._caps.colorBufferFloat:this._canRenderToFramebuffer(e.TEXTURETYPE_HALF_FLOAT)},e.prototype._canRenderToFramebuffer=function(e){for(var t=this._gl;t.getError()!==t.NO_ERROR;);var n=!0,r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,this._getRGBABufferInternalSizedFormat(e),1,1,0,t.RGBA,this._getWebGLTextureType(e),null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST);var i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var o=t.checkFramebufferStatus(t.FRAMEBUFFER);if((n=(n=n&&o===t.FRAMEBUFFER_COMPLETE)&&t.getError()===t.NO_ERROR)&&(t.clear(t.COLOR_BUFFER_BIT),n=n&&t.getError()===t.NO_ERROR),n){t.bindFramebuffer(t.FRAMEBUFFER,null);var a=t.RGBA,s=t.UNSIGNED_BYTE,u=new Uint8Array(4);t.readPixels(0,0,1,1,a,s,u),n=n&&t.getError()===t.NO_ERROR}for(t.deleteTexture(r),t.deleteFramebuffer(i),t.bindFramebuffer(t.FRAMEBUFFER,null);!n&&t.getError()!==t.NO_ERROR;);return n},e.prototype._getWebGLTextureType=function(t){if(1===this._webGLVersion){switch(t){case e.TEXTURETYPE_FLOAT:return this._gl.FLOAT;case e.TEXTURETYPE_HALF_FLOAT:return this._gl.HALF_FLOAT_OES;case e.TEXTURETYPE_UNSIGNED_BYTE:return this._gl.UNSIGNED_BYTE}return this._gl.UNSIGNED_BYTE}switch(t){case e.TEXTURETYPE_BYTE:return this._gl.BYTE;case e.TEXTURETYPE_UNSIGNED_BYTE:return this._gl.UNSIGNED_BYTE;case e.TEXTURETYPE_SHORT:return this._gl.SHORT;case e.TEXTURETYPE_UNSIGNED_SHORT:return this._gl.UNSIGNED_SHORT;case e.TEXTURETYPE_INT:return this._gl.INT;case e.TEXTURETYPE_UNSIGNED_INTEGER:return this._gl.UNSIGNED_INT;case e.TEXTURETYPE_FLOAT:return this._gl.FLOAT;case e.TEXTURETYPE_HALF_FLOAT:return this._gl.HALF_FLOAT;case e.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4:return this._gl.UNSIGNED_SHORT_4_4_4_4;case e.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1:return this._gl.UNSIGNED_SHORT_5_5_5_1;case e.TEXTURETYPE_UNSIGNED_SHORT_5_6_5:return this._gl.UNSIGNED_SHORT_5_6_5;case e.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV:return this._gl.UNSIGNED_INT_2_10_10_10_REV;case e.TEXTURETYPE_UNSIGNED_INT_24_8:return this._gl.UNSIGNED_INT_24_8;case e.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV:return this._gl.UNSIGNED_INT_10F_11F_11F_REV;case e.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV:return this._gl.UNSIGNED_INT_5_9_9_9_REV;case e.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV:return this._gl.FLOAT_32_UNSIGNED_INT_24_8_REV}return this._gl.UNSIGNED_BYTE},e.prototype._getInternalFormat=function(t){var n=this._gl.RGBA;switch(t){case e.TEXTUREFORMAT_ALPHA:n=this._gl.ALPHA;break;case e.TEXTUREFORMAT_LUMINANCE:n=this._gl.LUMINANCE;break;case e.TEXTUREFORMAT_LUMINANCE_ALPHA:n=this._gl.LUMINANCE_ALPHA;break;case e.TEXTUREFORMAT_RED:n=this._gl.RED;break;case e.TEXTUREFORMAT_RG:n=this._gl.RG;break;case e.TEXTUREFORMAT_RGB:n=this._gl.RGB;break;case e.TEXTUREFORMAT_RGBA:n=this._gl.RGBA}if(this._webGLVersion>1)switch(t){case e.TEXTUREFORMAT_RED_INTEGER:n=this._gl.RED_INTEGER;break;case e.TEXTUREFORMAT_RG_INTEGER:n=this._gl.RG_INTEGER;break;case e.TEXTUREFORMAT_RGB_INTEGER:n=this._gl.RGB_INTEGER;break;case e.TEXTUREFORMAT_RGBA_INTEGER:n=this._gl.RGBA_INTEGER}return n},e.prototype._getRGBABufferInternalSizedFormat=function(t,n){if(1===this._webGLVersion){if(void 0!==n)switch(n){case e.TEXTUREFORMAT_ALPHA:return this._gl.ALPHA;case e.TEXTUREFORMAT_LUMINANCE:return this._gl.LUMINANCE;case e.TEXTUREFORMAT_LUMINANCE_ALPHA:return this._gl.LUMINANCE_ALPHA}return this._gl.RGBA}switch(t){case e.TEXTURETYPE_BYTE:switch(n){case e.TEXTUREFORMAT_RED:return this._gl.R8_SNORM;case e.TEXTUREFORMAT_RG:return this._gl.RG8_SNORM;case e.TEXTUREFORMAT_RGB:return this._gl.RGB8_SNORM;case e.TEXTUREFORMAT_RED_INTEGER:return this._gl.R8I;case e.TEXTUREFORMAT_RG_INTEGER:return this._gl.RG8I;case e.TEXTUREFORMAT_RGB_INTEGER:return this._gl.RGB8I;case e.TEXTUREFORMAT_RGBA_INTEGER:return this._gl.RGBA8I;default:return this._gl.RGBA8_SNORM}case e.TEXTURETYPE_UNSIGNED_BYTE:switch(n){case e.TEXTUREFORMAT_RED:return this._gl.R8;case e.TEXTUREFORMAT_RG:return this._gl.RG8;case e.TEXTUREFORMAT_RGB:return this._gl.RGB8;case e.TEXTUREFORMAT_RGBA:return this._gl.RGBA8;case e.TEXTUREFORMAT_RED_INTEGER:return this._gl.R8UI;case e.TEXTUREFORMAT_RG_INTEGER:return this._gl.RG8UI;case e.TEXTUREFORMAT_RGB_INTEGER:return this._gl.RGB8UI;case e.TEXTUREFORMAT_RGBA_INTEGER:return this._gl.RGBA8UI;case e.TEXTUREFORMAT_ALPHA:return this._gl.ALPHA;case e.TEXTUREFORMAT_LUMINANCE:return this._gl.LUMINANCE;case e.TEXTUREFORMAT_LUMINANCE_ALPHA:return this._gl.LUMINANCE_ALPHA;default:return this._gl.RGBA8}case e.TEXTURETYPE_SHORT:switch(n){case e.TEXTUREFORMAT_RED_INTEGER:return this._gl.R16I;case e.TEXTUREFORMAT_RG_INTEGER:return this._gl.RG16I;case e.TEXTUREFORMAT_RGB_INTEGER:return this._gl.RGB16I;case e.TEXTUREFORMAT_RGBA_INTEGER:default:return this._gl.RGBA16I}case e.TEXTURETYPE_UNSIGNED_SHORT:switch(n){case e.TEXTUREFORMAT_RED_INTEGER:return this._gl.R16UI;case e.TEXTUREFORMAT_RG_INTEGER:return this._gl.RG16UI;case e.TEXTUREFORMAT_RGB_INTEGER:return this._gl.RGB16UI;case e.TEXTUREFORMAT_RGBA_INTEGER:default:return this._gl.RGBA16UI}case e.TEXTURETYPE_INT:switch(n){case e.TEXTUREFORMAT_RED_INTEGER:return this._gl.R32I;case e.TEXTUREFORMAT_RG_INTEGER:return this._gl.RG32I;case e.TEXTUREFORMAT_RGB_INTEGER:return this._gl.RGB32I;case e.TEXTUREFORMAT_RGBA_INTEGER:default:return this._gl.RGBA32I}case e.TEXTURETYPE_UNSIGNED_INTEGER:switch(n){case e.TEXTUREFORMAT_RED_INTEGER:return this._gl.R32UI;case e.TEXTUREFORMAT_RG_INTEGER:return this._gl.RG32UI;case e.TEXTUREFORMAT_RGB_INTEGER:return this._gl.RGB32UI;case e.TEXTUREFORMAT_RGBA_INTEGER:default:return this._gl.RGBA32UI}case e.TEXTURETYPE_FLOAT:switch(n){case e.TEXTUREFORMAT_RED:return this._gl.R32F;case e.TEXTUREFORMAT_RG:return this._gl.RG32F;case e.TEXTUREFORMAT_RGB:return this._gl.RGB32F;case e.TEXTUREFORMAT_RGBA:default:return this._gl.RGBA32F}case e.TEXTURETYPE_HALF_FLOAT:switch(n){case e.TEXTUREFORMAT_RED:return this._gl.R16F;case e.TEXTUREFORMAT_RG:return this._gl.RG16F;case e.TEXTUREFORMAT_RGB:return this._gl.RGB16F;case e.TEXTUREFORMAT_RGBA:default:return this._gl.RGBA16F}case e.TEXTURETYPE_UNSIGNED_SHORT_5_6_5:return this._gl.RGB565;case e.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV:return this._gl.R11F_G11F_B10F;case e.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV:return this._gl.RGB9_E5;case e.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4:return this._gl.RGBA4;case e.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1:return this._gl.RGB5_A1;case e.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV:switch(n){case e.TEXTUREFORMAT_RGBA:return this._gl.RGB10_A2;case e.TEXTUREFORMAT_RGBA_INTEGER:return this._gl.RGB10_A2UI;default:return this._gl.RGB10_A2}}return this._gl.RGBA8},e.prototype._getRGBAMultiSampleBufferFormat=function(t){return t===e.TEXTURETYPE_FLOAT?this._gl.RGBA32F:t===e.TEXTURETYPE_HALF_FLOAT?this._gl.RGBA16F:this._gl.RGBA8},e.prototype._loadFile=function(e,t,n,r,i,o){var a=this,s=u.h.LoadFile(e,t,n,r,i,o);return this._activeRequests.push(s),s.onCompleteObservable.add(function(e){a._activeRequests.splice(a._activeRequests.indexOf(e),1)}),s},e.prototype._loadFileAsync=function(e,t,n){var r=this;return new Promise(function(i,o){r._loadFile(e,function(e){i(e)},void 0,t,n,function(e,t){o(t)})})},e.isSupported=function(){try{var e=document.createElement("canvas");return null!=(e.getContext("webgl")||e.getContext("experimental-webgl"))&&!!window.WebGLRenderingContext}catch(e){return!1}},e.ExceptionList=[{key:"Chrome/63.0",capture:"63\\.0\\.3239\\.(\\d+)",captureConstraint:108,targets:["uniformBuffer"]},{key:"Firefox/58",capture:null,captureConstraint:null,targets:["uniformBuffer"]},{key:"Firefox/59",capture:null,captureConstraint:null,targets:["uniformBuffer"]},{key:"Chrome/72.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Chrome/73.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Chrome/74.+?Mobile",capture:null,captureConstraint:null,targets:["vao"]},{key:"Mac OS.+Chrome/71",capture:null,captureConstraint:null,targets:["vao"]},{key:"Mac OS.+Chrome/72",capture:null,captureConstraint:null,targets:["vao"]}],e._TextureLoaders=[],e.ALPHA_DISABLE=_.a.ALPHA_DISABLE,e.ALPHA_ADD=_.a.ALPHA_ADD,e.ALPHA_COMBINE=_.a.ALPHA_COMBINE,e.ALPHA_SUBTRACT=_.a.ALPHA_SUBTRACT,e.ALPHA_MULTIPLY=_.a.ALPHA_MULTIPLY,e.ALPHA_MAXIMIZED=_.a.ALPHA_MAXIMIZED,e.ALPHA_ONEONE=_.a.ALPHA_ONEONE,e.ALPHA_PREMULTIPLIED=_.a.ALPHA_PREMULTIPLIED,e.ALPHA_PREMULTIPLIED_PORTERDUFF=_.a.ALPHA_PREMULTIPLIED_PORTERDUFF,e.ALPHA_INTERPOLATE=_.a.ALPHA_INTERPOLATE,e.ALPHA_SCREENMODE=_.a.ALPHA_SCREENMODE,e.DELAYLOADSTATE_NONE=_.a.DELAYLOADSTATE_NONE,e.DELAYLOADSTATE_LOADED=_.a.DELAYLOADSTATE_LOADED,e.DELAYLOADSTATE_LOADING=_.a.DELAYLOADSTATE_LOADING,e.DELAYLOADSTATE_NOTLOADED=_.a.DELAYLOADSTATE_NOTLOADED,e.NEVER=_.a.NEVER,e.ALWAYS=_.a.ALWAYS,e.LESS=_.a.LESS,e.EQUAL=_.a.EQUAL,e.LEQUAL=_.a.LEQUAL,e.GREATER=_.a.GREATER,e.GEQUAL=_.a.GEQUAL,e.NOTEQUAL=_.a.NOTEQUAL,e.KEEP=_.a.KEEP,e.REPLACE=_.a.REPLACE,e.INCR=_.a.INCR,e.DECR=_.a.DECR,e.INVERT=_.a.INVERT,e.INCR_WRAP=_.a.INCR_WRAP,e.DECR_WRAP=_.a.DECR_WRAP,e.TEXTURE_CLAMP_ADDRESSMODE=_.a.TEXTURE_CLAMP_ADDRESSMODE,e.TEXTURE_WRAP_ADDRESSMODE=_.a.TEXTURE_WRAP_ADDRESSMODE,e.TEXTURE_MIRROR_ADDRESSMODE=_.a.TEXTURE_MIRROR_ADDRESSMODE,e.TEXTUREFORMAT_ALPHA=_.a.TEXTUREFORMAT_ALPHA,e.TEXTUREFORMAT_LUMINANCE=_.a.TEXTUREFORMAT_LUMINANCE,e.TEXTUREFORMAT_LUMINANCE_ALPHA=_.a.TEXTUREFORMAT_LUMINANCE_ALPHA,e.TEXTUREFORMAT_RGB=_.a.TEXTUREFORMAT_RGB,e.TEXTUREFORMAT_RGBA=_.a.TEXTUREFORMAT_RGBA,e.TEXTUREFORMAT_RED=_.a.TEXTUREFORMAT_RED,e.TEXTUREFORMAT_R=_.a.TEXTUREFORMAT_R,e.TEXTUREFORMAT_RG=_.a.TEXTUREFORMAT_RG,e.TEXTUREFORMAT_RED_INTEGER=_.a.TEXTUREFORMAT_RED_INTEGER,e.TEXTUREFORMAT_R_INTEGER=_.a.TEXTUREFORMAT_R_INTEGER,e.TEXTUREFORMAT_RG_INTEGER=_.a.TEXTUREFORMAT_RG_INTEGER,e.TEXTUREFORMAT_RGB_INTEGER=_.a.TEXTUREFORMAT_RGB_INTEGER,e.TEXTUREFORMAT_RGBA_INTEGER=_.a.TEXTUREFORMAT_RGBA_INTEGER,e.TEXTURETYPE_UNSIGNED_BYTE=_.a.TEXTURETYPE_UNSIGNED_BYTE,e.TEXTURETYPE_UNSIGNED_INT=_.a.TEXTURETYPE_UNSIGNED_INT,e.TEXTURETYPE_FLOAT=_.a.TEXTURETYPE_FLOAT,e.TEXTURETYPE_HALF_FLOAT=_.a.TEXTURETYPE_HALF_FLOAT,e.TEXTURETYPE_BYTE=_.a.TEXTURETYPE_BYTE,e.TEXTURETYPE_SHORT=_.a.TEXTURETYPE_SHORT,e.TEXTURETYPE_UNSIGNED_SHORT=_.a.TEXTURETYPE_UNSIGNED_SHORT,e.TEXTURETYPE_INT=_.a.TEXTURETYPE_INT,e.TEXTURETYPE_UNSIGNED_INTEGER=_.a.TEXTURETYPE_UNSIGNED_INTEGER,e.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4=_.a.TEXTURETYPE_UNSIGNED_SHORT_4_4_4_4,e.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1=_.a.TEXTURETYPE_UNSIGNED_SHORT_5_5_5_1,e.TEXTURETYPE_UNSIGNED_SHORT_5_6_5=_.a.TEXTURETYPE_UNSIGNED_SHORT_5_6_5,e.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV=_.a.TEXTURETYPE_UNSIGNED_INT_2_10_10_10_REV,e.TEXTURETYPE_UNSIGNED_INT_24_8=_.a.TEXTURETYPE_UNSIGNED_INT_24_8,e.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV=_.a.TEXTURETYPE_UNSIGNED_INT_10F_11F_11F_REV,e.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV=_.a.TEXTURETYPE_UNSIGNED_INT_5_9_9_9_REV,e.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV=_.a.TEXTURETYPE_FLOAT_32_UNSIGNED_INT_24_8_REV,e.TEXTURE_NEAREST_SAMPLINGMODE=_.a.TEXTURE_NEAREST_SAMPLINGMODE,e.TEXTURE_BILINEAR_SAMPLINGMODE=_.a.TEXTURE_BILINEAR_SAMPLINGMODE,e.TEXTURE_TRILINEAR_SAMPLINGMODE=_.a.TEXTURE_TRILINEAR_SAMPLINGMODE,e.TEXTURE_NEAREST_NEAREST_MIPLINEAR=_.a.TEXTURE_NEAREST_NEAREST_MIPLINEAR,e.TEXTURE_LINEAR_LINEAR_MIPNEAREST=_.a.TEXTURE_LINEAR_LINEAR_MIPNEAREST,e.TEXTURE_LINEAR_LINEAR_MIPLINEAR=_.a.TEXTURE_LINEAR_LINEAR_MIPLINEAR,e.TEXTURE_NEAREST_NEAREST_MIPNEAREST=_.a.TEXTURE_NEAREST_NEAREST_MIPNEAREST,e.TEXTURE_NEAREST_LINEAR_MIPNEAREST=_.a.TEXTURE_NEAREST_LINEAR_MIPNEAREST,e.TEXTURE_NEAREST_LINEAR_MIPLINEAR=_.a.TEXTURE_NEAREST_LINEAR_MIPLINEAR,e.TEXTURE_NEAREST_LINEAR=_.a.TEXTURE_NEAREST_LINEAR,e.TEXTURE_NEAREST_NEAREST=_.a.TEXTURE_NEAREST_NEAREST,e.TEXTURE_LINEAR_NEAREST_MIPNEAREST=_.a.TEXTURE_LINEAR_NEAREST_MIPNEAREST,e.TEXTURE_LINEAR_NEAREST_MIPLINEAR=_.a.TEXTURE_LINEAR_NEAREST_MIPLINEAR,e.TEXTURE_LINEAR_LINEAR=_.a.TEXTURE_LINEAR_LINEAR,e.TEXTURE_LINEAR_NEAREST=_.a.TEXTURE_LINEAR_NEAREST,e.TEXTURE_EXPLICIT_MODE=_.a.TEXTURE_EXPLICIT_MODE,e.TEXTURE_SPHERICAL_MODE=_.a.TEXTURE_SPHERICAL_MODE,e.TEXTURE_PLANAR_MODE=_.a.TEXTURE_PLANAR_MODE,e.TEXTURE_CUBIC_MODE=_.a.TEXTURE_CUBIC_MODE,e.TEXTURE_PROJECTION_MODE=_.a.TEXTURE_PROJECTION_MODE,e.TEXTURE_SKYBOX_MODE=_.a.TEXTURE_SKYBOX_MODE,e.TEXTURE_INVCUBIC_MODE=_.a.TEXTURE_INVCUBIC_MODE,e.TEXTURE_EQUIRECTANGULAR_MODE=_.a.TEXTURE_EQUIRECTANGULAR_MODE,e.TEXTURE_FIXED_EQUIRECTANGULAR_MODE=_.a.TEXTURE_FIXED_EQUIRECTANGULAR_MODE,e.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE=_.a.TEXTURE_FIXED_EQUIRECTANGULAR_MIRRORED_MODE,e.SCALEMODE_FLOOR=_.a.SCALEMODE_FLOOR,e.SCALEMODE_NEAREST=_.a.SCALEMODE_NEAREST,e.SCALEMODE_CEILING=_.a.SCALEMODE_CEILING,e.CollisionsEpsilon=.001,e._RescalePostProcessFactory=null,e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return S}),n.d(t,"c",function(){return P}),n.d(t,"a",function(){return D});var r=n(1),i=n(8),o=n(9),a=n(32),s=n(29),u=n(0),l=n(25),c=n(4),h=n(13),d=n(57),f=n(24),p=n(49),_=n(43),m=n(20),g=n(66),v=n(55),y=n(3),b=n(2),T=n(6),E=n(22),x=n(19),M=n(14),A=n(110),S=function(){},C=function(){this.visibleInstances={},this.batchCache=new P,this.instancesBufferSize=2048},P=function(){this.mustReturn=!1,this.visibleInstances=new Array,this.renderSelf=new Array,this.hardwareInstancedRendering=new Array},R=function(){this._areNormalsFrozen=!1,this._source=null,this.meshMap=null,this._preActivateId=-1,this._LODLevels=new Array,this._morphTargetManager=null},D=function(e){function t(n,r,i,o,u,l){void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),void 0===l&&(l=!0);var c=e.call(this,n,r)||this;if(c._internalMeshDataInfo=new R,c.delayLoadState=y.a.DELAYLOADSTATE_NONE,c.instances=new Array,c._creationDataStorage=null,c._geometry=null,c._instanceDataStorage=new C,c._effectiveMaterial=null,c._shouldGenerateFlatShading=!1,c._originalBuilderSideOrientation=t.DEFAULTSIDE,c.overrideMaterialSideOrientation=null,r=c.getScene(),o){if(o._geometry&&o._geometry.applyToMesh(c),a.a.DeepCopy(o,c,["name","material","skeleton","instances","parent","uniqueId","source","metadata","hasLODLevels","geometry","isBlocked","areNormalsFrozen","onBeforeDrawObservable","onBeforeRenderObservable","onAfterRenderObservable","onBeforeDraw","onAfterWorldMatrixUpdateObservable","onCollideObservable","onCollisionPositionChangeObservable","onRebuildObservable","onDisposeObservable"],["_poseMatrix"]),c._internalMeshDataInfo._source=o,r.useClonedMeshhMap&&(o._internalMeshDataInfo.meshMap||(o._internalMeshDataInfo.meshMap={}),o._internalMeshDataInfo.meshMap[c.uniqueId]=c),c._originalBuilderSideOrientation=o._originalBuilderSideOrientation,c._creationDataStorage=o._creationDataStorage,o._ranges){var h=o._ranges;for(var n in h)h.hasOwnProperty(n)&&h[n]&&c.createAnimationRange(n,h[n].from,h[n].to)}var d;if(c.metadata=o.metadata&&o.metadata.clone?o.metadata.clone():o.metadata,s.a&&s.a.HasTags(o)&&s.a.AddTagsTo(c,s.a.GetTags(o,!0)),c.parent=o.parent,c.setPivotMatrix(o.getPivotMatrix()),c.id=n+"."+o.id,c.material=o.material,!u)for(var f=o.getDescendants(!0),p=0;p<f.length;p++){var _=f[p];_.clone&&_.clone(n+"."+_.name,c)}if(r.getPhysicsEngine){var m=r.getPhysicsEngine();if(l&&m){var g=m.getImpostorForPhysicsObject(o);g&&(c.physicsImpostor=g.clone(c))}}for(d=0;d<r.particleSystems.length;d++){var v=r.particleSystems[d];v.emitter===o&&v.clone(v.name,c)}c.refreshBoundingInfo(),c.computeWorldMatrix(!0)}return null!==i&&(c.parent=i),c._instanceDataStorage.hardwareInstancedRendering=c.getEngine().getCaps().instancedArrays,c}return r.d(t,e),t._GetDefaultSideOrientation=function(e){return e||t.FRONTSIDE},Object.defineProperty(t.prototype,"onBeforeRenderObservable",{get:function(){return this._internalMeshDataInfo._onBeforeRenderObservable||(this._internalMeshDataInfo._onBeforeRenderObservable=new i.c),this._internalMeshDataInfo._onBeforeRenderObservable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onBeforeBindObservable",{get:function(){return this._internalMeshDataInfo._onBeforeBindObservable||(this._internalMeshDataInfo._onBeforeBindObservable=new i.c),this._internalMeshDataInfo._onBeforeBindObservable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onAfterRenderObservable",{get:function(){return this._internalMeshDataInfo._onAfterRenderObservable||(this._internalMeshDataInfo._onAfterRenderObservable=new i.c),this._internalMeshDataInfo._onAfterRenderObservable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onBeforeDrawObservable",{get:function(){return this._internalMeshDataInfo._onBeforeDrawObservable||(this._internalMeshDataInfo._onBeforeDrawObservable=new i.c),this._internalMeshDataInfo._onBeforeDrawObservable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onBeforeDraw",{set:function(e){this._onBeforeDrawObserver&&this.onBeforeDrawObservable.remove(this._onBeforeDrawObserver),this._onBeforeDrawObserver=this.onBeforeDrawObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"morphTargetManager",{get:function(){return this._internalMeshDataInfo._morphTargetManager},set:function(e){this._internalMeshDataInfo._morphTargetManager!==e&&(this._internalMeshDataInfo._morphTargetManager=e,this._syncGeometryWithMorphTargetManager())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"source",{get:function(){return this._internalMeshDataInfo._source},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUnIndexed",{get:function(){return this._unIndexed},set:function(e){this._unIndexed!==e&&(this._unIndexed=e,this._markSubMeshesAsAttributesDirty())},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"Mesh"},Object.defineProperty(t.prototype,"_isMesh",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.toString=function(t){var n=e.prototype.toString.call(this,t);if(n+=", n vertices: "+this.getTotalVertices(),n+=", parent: "+(this._waitingParentId?this._waitingParentId:this.parent?this.parent.name:"NONE"),this.animations)for(var r=0;r<this.animations.length;r++)n+=", animation[0]: "+this.animations[r].toString(t);if(t)if(this._geometry){var i=this.getIndices(),o=this.getVerticesData(c.b.PositionKind);o&&i&&(n+=", flat shading: "+(o.length/3===i.length?"YES":"NO"))}else n+=", flat shading: UNKNOWN";return n},t.prototype._unBindEffect=function(){e.prototype._unBindEffect.call(this);for(var t=0,n=this.instances;t<n.length;t++)n[t]._unBindEffect()},Object.defineProperty(t.prototype,"hasLODLevels",{get:function(){return this._internalMeshDataInfo._LODLevels.length>0},enumerable:!0,configurable:!0}),t.prototype.getLODLevels=function(){return this._internalMeshDataInfo._LODLevels},t.prototype._sortLODLevels=function(){this._internalMeshDataInfo._LODLevels.sort(function(e,t){return e.distance<t.distance?1:e.distance>t.distance?-1:0})},t.prototype.addLODLevel=function(e,t){if(t&&t._masterMesh)return T.a.Warn("You cannot use a mesh as LOD level twice"),this;var n=new A.a(e,t);return this._internalMeshDataInfo._LODLevels.push(n),t&&(t._masterMesh=this),this._sortLODLevels(),this},t.prototype.getLODLevelAtDistance=function(e){for(var t=this._internalMeshDataInfo,n=0;n<t._LODLevels.length;n++){var r=t._LODLevels[n];if(r.distance===e)return r.mesh}return null},t.prototype.removeLODLevel=function(e){for(var t=this._internalMeshDataInfo,n=0;n<t._LODLevels.length;n++)t._LODLevels[n].mesh===e&&(t._LODLevels.splice(n,1),e&&(e._masterMesh=null));return this._sortLODLevels(),this},t.prototype.getLOD=function(e,t){var n=this._internalMeshDataInfo;if(!n._LODLevels||0===n._LODLevels.length)return this;var r=(t||this.getBoundingInfo().boundingSphere).centerWorld.subtract(e.globalPosition).length();if(n._LODLevels[n._LODLevels.length-1].distance>r)return this.onLODLevelSelection&&this.onLODLevelSelection(r,this,n._LODLevels[n._LODLevels.length-1].mesh),this;for(var i=0;i<n._LODLevels.length;i++){var o=n._LODLevels[i];if(o.distance<r)return o.mesh&&(o.mesh._preActivate(),o.mesh._updateSubMeshesBoundingInfo(this.worldMatrixFromCache)),this.onLODLevelSelection&&this.onLODLevelSelection(r,this,o.mesh),o.mesh}return this.onLODLevelSelection&&this.onLODLevelSelection(r,this,this),this},Object.defineProperty(t.prototype,"geometry",{get:function(){return this._geometry},enumerable:!0,configurable:!0}),t.prototype.getTotalVertices=function(){return null==this._geometry?0:this._geometry.getTotalVertices()},t.prototype.getVerticesData=function(e,t,n){return this._geometry?this._geometry.getVerticesData(e,t,n):null},t.prototype.getVertexBuffer=function(e){return this._geometry?this._geometry.getVertexBuffer(e):null},t.prototype.isVerticesDataPresent=function(e){return this._geometry?this._geometry.isVerticesDataPresent(e):!!this._delayInfo&&-1!==this._delayInfo.indexOf(e)},t.prototype.isVertexBufferUpdatable=function(e){return this._geometry?this._geometry.isVertexBufferUpdatable(e):!!this._delayInfo&&-1!==this._delayInfo.indexOf(e)},t.prototype.getVerticesDataKinds=function(){if(!this._geometry){var e=new Array;return this._delayInfo&&this._delayInfo.forEach(function(t){e.push(t)}),e}return this._geometry.getVerticesDataKinds()},t.prototype.getTotalIndices=function(){return this._geometry?this._geometry.getTotalIndices():0},t.prototype.getIndices=function(e,t){return this._geometry?this._geometry.getIndices(e,t):[]},Object.defineProperty(t.prototype,"isBlocked",{get:function(){return null!=this._masterMesh},enumerable:!0,configurable:!0}),t.prototype.isReady=function(t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),this.delayLoadState===y.a.DELAYLOADSTATE_LOADING)return!1;if(!e.prototype.isReady.call(this,t))return!1;if(!this.subMeshes||0===this.subMeshes.length)return!0;if(!t)return!0;var r=this.getEngine(),i=this.getScene(),o=n||r.getCaps().instancedArrays&&this.instances.length>0;this.computeWorldMatrix();var a=this.material||i.defaultMaterial;if(a)if(a._storeEffectOnSubMeshes)for(var s=0,u=this.subMeshes;s<u.length;s++){var l=(_=u[s]).getMaterial();if(l)if(l._storeEffectOnSubMeshes){if(!l.isReadyForSubMesh(this,_,o))return!1}else if(!l.isReady(this,o))return!1}else if(!a.isReady(this,o))return!1;for(var c=0,h=this.lightSources;c<h.length;c++){var d=h[c].getShadowGenerator();if(d)for(var f=0,p=this.subMeshes;f<p.length;f++){var _=p[f];if(!d.isReady(_,o))return!1}}for(var m=0,g=this._internalMeshDataInfo._LODLevels;m<g.length;m++){var v=g[m];if(v.mesh&&!v.mesh.isReady(o))return!1}return!0},Object.defineProperty(t.prototype,"areNormalsFrozen",{get:function(){return this._internalMeshDataInfo._areNormalsFrozen},enumerable:!0,configurable:!0}),t.prototype.freezeNormals=function(){return this._internalMeshDataInfo._areNormalsFrozen=!0,this},t.prototype.unfreezeNormals=function(){return this._internalMeshDataInfo._areNormalsFrozen=!1,this},Object.defineProperty(t.prototype,"overridenInstanceCount",{set:function(e){this._instanceDataStorage.overridenInstanceCount=e},enumerable:!0,configurable:!0}),t.prototype._preActivate=function(){var e=this._internalMeshDataInfo,t=this.getScene().getRenderId();return e._preActivateId===t?this:(e._preActivateId=t,this._instanceDataStorage.visibleInstances=null,this)},t.prototype._preActivateForIntermediateRendering=function(e){return this._instanceDataStorage.visibleInstances&&(this._instanceDataStorage.visibleInstances.intermediateDefaultRenderId=e),this},t.prototype._registerInstanceForRenderId=function(e,t){return this._instanceDataStorage.visibleInstances||(this._instanceDataStorage.visibleInstances={defaultRenderId:t,selfDefaultRenderId:this._renderId}),this._instanceDataStorage.visibleInstances[t]||(this._instanceDataStorage.visibleInstances[t]=new Array),this._instanceDataStorage.visibleInstances[t].push(e),this},t.prototype.refreshBoundingInfo=function(e){if(void 0===e&&(e=!1),this._boundingInfo&&this._boundingInfo.isLocked)return this;var t=this.geometry?this.geometry.boundingBias:null;return this._refreshBoundingInfo(this._getPositionData(e),t),this},t.prototype._createGlobalSubMesh=function(e){var t=this.getTotalVertices();if(!t||!this.getIndices())return null;if(this.subMeshes&&this.subMeshes.length>0){var n=this.getIndices();if(!n)return null;var r=n.length,i=!1;if(e)i=!0;else for(var o=0,a=this.subMeshes;o<a.length;o++){var s=a[o];if(s.indexStart+s.indexCount>=r){i=!0;break}if(s.verticesStart+s.verticesCount>=t){i=!0;break}}if(!i)return this.subMeshes[0]}return this.releaseSubMeshes(),new p.b(0,0,t,0,this.getTotalIndices(),this)},t.prototype.subdivide=function(e){if(!(e<1)){for(var t=this.getTotalIndices(),n=t/e|0,r=0;n%3!=0;)n++;this.releaseSubMeshes();for(var i=0;i<e&&!(r>=t);i++)p.b.CreateFromIndices(0,r,Math.min(n,t-r),this),r+=n;this.synchronizeInstances()}},t.prototype.setVerticesData=function(e,t,n,r){if(void 0===n&&(n=!1),this._geometry)this._geometry.setVerticesData(e,t,n,r);else{var i=new h.a;i.set(t,e);var o=this.getScene();new d.a(d.a.RandomId(),o,i,n,this)}return this},t.prototype.markVerticesDataAsUpdatable=function(e,t){void 0===t&&(t=!0);var n=this.getVertexBuffer(e);n&&n.isUpdatable()!==t&&this.setVerticesData(e,this.getVerticesData(e),t)},t.prototype.setVerticesBuffer=function(e){return this._geometry||(this._geometry=d.a.CreateGeometryForMesh(this)),this._geometry.setVerticesBuffer(e),this},t.prototype.updateVerticesData=function(e,t,n,r){return this._geometry?(r?(this.makeGeometryUnique(),this.updateVerticesData(e,t,n,!1)):this._geometry.updateVerticesData(e,t,n),this):this},t.prototype.updateMeshPositions=function(e,t){void 0===t&&(t=!0);var n=this.getVerticesData(c.b.PositionKind);if(!n)return this;if(e(n),this.updateVerticesData(c.b.PositionKind,n,!1,!1),t){var r=this.getIndices(),i=this.getVerticesData(c.b.NormalKind);if(!i)return this;h.a.ComputeNormals(n,r,i),this.updateVerticesData(c.b.NormalKind,i,!1,!1)}return this},t.prototype.makeGeometryUnique=function(){if(!this._geometry)return this;var e=this._geometry,t=this._geometry.copy(d.a.RandomId());return e.releaseForMesh(this,!0),t.applyToMesh(this),this},t.prototype.setIndices=function(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!1),this._geometry)this._geometry.setIndices(e,t,n);else{var r=new h.a;r.indices=e;var i=this.getScene();new d.a(d.a.RandomId(),i,r,n,this)}return this},t.prototype.updateIndices=function(e,t,n){return void 0===n&&(n=!1),this._geometry?(this._geometry.updateIndices(e,t,n),this):this},t.prototype.toLeftHanded=function(){return this._geometry?(this._geometry.toLeftHanded(),this):this},t.prototype._bind=function(e,t,n){if(!this._geometry)return this;var r,i=this.getScene().getEngine();if(this._unIndexed)r=null;else switch(n){case m.a.PointFillMode:r=null;break;case m.a.WireFrameFillMode:r=e._getLinesIndexBuffer(this.getIndices(),i);break;default:case m.a.TriangleFillMode:r=this._geometry.getIndexBuffer()}return this._geometry._bind(t,r),this},t.prototype._draw=function(e,t,n){if(!this._geometry||!this._geometry.getVertexBuffers()||!this._unIndexed&&!this._geometry.getIndexBuffer())return this;this._internalMeshDataInfo._onBeforeDrawObservable&&this._internalMeshDataInfo._onBeforeDrawObservable.notifyObservers(this);var r=this.getScene().getEngine();return this._unIndexed||t==m.a.PointFillMode?r.drawArraysType(t,e.verticesStart,e.verticesCount,n):t==m.a.WireFrameFillMode?r.drawElementsType(t,0,e._linesIndexCount,n):r.drawElementsType(t,e.indexStart,e.indexCount,n),this},t.prototype.registerBeforeRender=function(e){return this.onBeforeRenderObservable.add(e),this},t.prototype.unregisterBeforeRender=function(e){return this.onBeforeRenderObservable.removeCallback(e),this},t.prototype.registerAfterRender=function(e){return this.onAfterRenderObservable.add(e),this},t.prototype.unregisterAfterRender=function(e){return this.onAfterRenderObservable.removeCallback(e),this},t.prototype._getInstancesRenderList=function(e){if(this._instanceDataStorage.isFrozen&&this._instanceDataStorage.previousBatch)return this._instanceDataStorage.previousBatch;var t=this.getScene(),n=t._isInIntermediateRendering(),r=n?this._internalAbstractMeshDataInfo._onlyForInstancesIntermediate:this._internalAbstractMeshDataInfo._onlyForInstances,i=this._instanceDataStorage.batchCache;if(i.mustReturn=!1,i.renderSelf[e]=!r&&this.isEnabled()&&this.isVisible,i.visibleInstances[e]=null,this._instanceDataStorage.visibleInstances){var o=this._instanceDataStorage.visibleInstances,a=t.getRenderId(),s=n?o.intermediateDefaultRenderId:o.defaultRenderId;i.visibleInstances[e]=o[a],!i.visibleInstances[e]&&s&&(i.visibleInstances[e]=o[s])}return i.hardwareInstancedRendering[e]=this._instanceDataStorage.hardwareInstancedRendering&&null!=i.visibleInstances[e],this._instanceDataStorage.previousBatch=i,i},t.prototype._renderWithInstances=function(e,t,n,r,i){var o=n.visibleInstances[e._id];if(!o)return this;for(var a=this._instanceDataStorage,s=a.instancesBufferSize,u=a.instancesBuffer,l=16*(o.length+1)*4;a.instancesBufferSize<l;)a.instancesBufferSize*=2;a.instancesData&&s==a.instancesBufferSize||(a.instancesData=new Float32Array(a.instancesBufferSize/4));var h=0,d=0,f=this._effectiveMesh.getWorldMatrix();if(n.renderSelf[e._id]&&(f.copyToArray(a.instancesData,h),h+=16,d++),o)for(var p=0;p<o.length;p++)o[p].getWorldMatrix().copyToArray(a.instancesData,h),h+=16,d++;return u&&s==a.instancesBufferSize?u.updateDirectly(a.instancesData,0,d):(u&&u.dispose(),u=new c.a(i,a.instancesData,!0,16,!1,!0),a.instancesBuffer=u,this.setVerticesBuffer(u.createVertexBuffer("world0",0,4)),this.setVerticesBuffer(u.createVertexBuffer("world1",4,4)),this.setVerticesBuffer(u.createVertexBuffer("world2",8,4)),this.setVerticesBuffer(u.createVertexBuffer("world3",12,4))),this._bind(e,r,t),this._draw(e,t,d),i.unbindInstanceAttributes(),this},t.prototype._processRendering=function(e,t,n,r,i,o,a){var s=this.getScene().getEngine();if(i)this._renderWithInstances(e,n,r,t,s);else{r.renderSelf[e._id]&&(o&&o(!1,this._effectiveMesh.getWorldMatrix(),a),this._draw(e,n,this._instanceDataStorage.overridenInstanceCount));var u=r.visibleInstances[e._id];if(u)for(var l=0;l<u.length;l++){var c=u[l].getWorldMatrix();o&&o(!0,c,a),this._draw(e,n)}}return this},t.prototype._freeze=function(){if(this._instanceDataStorage.isFrozen=!0,this.subMeshes)for(var e=0;e<this.subMeshes.length;e++)this._getInstancesRenderList(e)},t.prototype._unFreeze=function(){this._instanceDataStorage.isFrozen=!1},t.prototype.render=function(e,t){var n=this.getScene();if(n._isInIntermediateRendering()?this._internalAbstractMeshDataInfo._isActiveIntermediate=!1:this._internalAbstractMeshDataInfo._isActive=!1,this._checkOcclusionQuery())return this;var r=this._getInstancesRenderList(e._id);if(r.mustReturn)return this;if(!this._geometry||!this._geometry.getVertexBuffers()||!this._unIndexed&&!this._geometry.getIndexBuffer())return this;this._internalMeshDataInfo._onBeforeRenderObservable&&this._internalMeshDataInfo._onBeforeRenderObservable.notifyObservers(this);var i,o=n.getEngine(),a=r.hardwareInstancedRendering[e._id],s=this._instanceDataStorage,u=e.getMaterial();if(!u)return this;if(!s.isFrozen||!this._effectiveMaterial||this._effectiveMaterial!==u)if(this._effectiveMaterial=u,this._effectiveMaterial._storeEffectOnSubMeshes){if(!this._effectiveMaterial.isReadyForSubMesh(this,e,a))return this}else if(!this._effectiveMaterial.isReady(this,a))return this;t&&o.setAlphaMode(this._effectiveMaterial.alphaMode);for(var l=0,c=n._beforeRenderingMeshStage;l<c.length;l++)c[l].action(this,e,r);if(!(i=this._effectiveMaterial._storeEffectOnSubMeshes?e.effect:this._effectiveMaterial.getEffect()))return this;var h,d=this._effectiveMesh;s.isFrozen?h=s.sideOrientation:(null==(h=this.overrideMaterialSideOrientation)&&(h=this._effectiveMaterial.sideOrientation,d._getWorldMatrixDeterminant()<0&&(h=h===m.a.ClockWiseSideOrientation?m.a.CounterClockWiseSideOrientation:m.a.ClockWiseSideOrientation)),s.sideOrientation=h);var f=this._effectiveMaterial._preBind(i,h);this._effectiveMaterial.forceDepthWrite&&o.setDepthWrite(!0);var p=n.forcePointsCloud?m.a.PointFillMode:n.forceWireframe?m.a.WireFrameFillMode:this._effectiveMaterial.fillMode;this._internalMeshDataInfo._onBeforeBindObservable&&this._internalMeshDataInfo._onBeforeBindObservable.notifyObservers(this),a||this._bind(e,i,p);var _=d.getWorldMatrix();this._effectiveMaterial._storeEffectOnSubMeshes?this._effectiveMaterial.bindForSubMesh(_,this,e):this._effectiveMaterial.bind(_,this),!this._effectiveMaterial.backFaceCulling&&this._effectiveMaterial.separateCullingPass&&(o.setState(!0,this._effectiveMaterial.zOffset,!1,!f),this._processRendering(e,i,p,r,a,this._onBeforeDraw,this._effectiveMaterial),o.setState(!0,this._effectiveMaterial.zOffset,!1,f)),this._processRendering(e,i,p,r,a,this._onBeforeDraw,this._effectiveMaterial),this._effectiveMaterial.unbind();for(var g=0,v=n._afterRenderingMeshStage;g<v.length;g++)v[g].action(this,e,r);return this._internalMeshDataInfo._onAfterRenderObservable&&this._internalMeshDataInfo._onAfterRenderObservable.notifyObservers(this),this},t.prototype._onBeforeDraw=function(e,t,n){e&&n&&n.bindOnlyWorldMatrix(t)},t.prototype.cleanMatrixWeights=function(){this.isVerticesDataPresent(c.b.MatricesWeightsKind)&&(this.isVerticesDataPresent(c.b.MatricesWeightsExtraKind)?this.normalizeSkinWeightsAndExtra():this.normalizeSkinFourWeights())},t.prototype.normalizeSkinFourWeights=function(){for(var e=this.getVerticesData(c.b.MatricesWeightsKind),t=e.length,n=0;n<t;n+=4){var r=e[n]+e[n+1]+e[n+2]+e[n+3];if(0===r)e[n]=1;else{var i=1/r;e[n]*=i,e[n+1]*=i,e[n+2]*=i,e[n+3]*=i}}this.setVerticesData(c.b.MatricesWeightsKind,e)},t.prototype.normalizeSkinWeightsAndExtra=function(){for(var e=this.getVerticesData(c.b.MatricesWeightsExtraKind),t=this.getVerticesData(c.b.MatricesWeightsKind),n=t.length,r=0;r<n;r+=4){var i=t[r]+t[r+1]+t[r+2]+t[r+3];if(0===(i+=e[r]+e[r+1]+e[r+2]+e[r+3]))t[r]=1;else{var o=1/i;t[r]*=o,t[r+1]*=o,t[r+2]*=o,t[r+3]*=o,e[r]*=o,e[r+1]*=o,e[r+2]*=o,e[r+3]*=o}}this.setVerticesData(c.b.MatricesWeightsKind,t),this.setVerticesData(c.b.MatricesWeightsKind,e)},t.prototype.validateSkinning=function(){var e=this.getVerticesData(c.b.MatricesWeightsExtraKind),t=this.getVerticesData(c.b.MatricesWeightsKind);if(null===t||null==this.skeleton)return{skinned:!1,valid:!0,report:"not skinned"};for(var n=t.length,r=0,i=0,o=0,a=0,s=null===e?4:8,u=new Array,l=0;l<=s;l++)u[l]=0;for(l=0;l<n;l+=4){for(var h=t[l],d=h,f=0===d?0:1,p=1;p<s;p++){var _=p<4?t[l+p]:e[l+p-4];_>h&&r++,0!==_&&f++,d+=_,h=_}if(u[f]++,f>o&&(o=f),0===d)i++;else{var m=1/d,g=0;for(p=0;p<s;p++)g+=p<4?Math.abs(t[l+p]-t[l+p]*m):Math.abs(e[l+p-4]-e[l+p-4]*m);g>.001&&a++}}var v=this.skeleton.bones.length,y=this.getVerticesData(c.b.MatricesIndicesKind),b=this.getVerticesData(c.b.MatricesIndicesExtraKind),T=0;for(l=0;l<n;l++)for(p=0;p<s;p++){var E=p<4?y[p]:b[p-4];(E>=v||E<0)&&T++}return{skinned:!0,valid:0===i&&0===a&&0===T,report:"Number of Weights = "+n/4+"\nMaximum influences = "+o+"\nMissing Weights = "+i+"\nNot Sorted = "+r+"\nNot Normalized = "+a+"\nWeightCounts = ["+u+"]\nNumber of bones = "+v+"\nBad Bone Indices = "+T}},t.prototype._checkDelayState=function(){var e=this.getScene();return this._geometry?this._geometry.load(e):this.delayLoadState===y.a.DELAYLOADSTATE_NOTLOADED&&(this.delayLoadState=y.a.DELAYLOADSTATE_LOADING,this._queueLoad(e)),this},t.prototype._queueLoad=function(e){var t=this;e._addPendingData(this);var n=-1!==this.delayLoadingFile.indexOf(".babylonbinarymeshdata");return o.h.LoadFile(this.delayLoadingFile,function(n){n instanceof ArrayBuffer?t._delayLoadingFunction(n,t):t._delayLoadingFunction(JSON.parse(n),t),t.instances.forEach(function(e){e.refreshBoundingInfo(),e._syncSubMeshes()}),t.delayLoadState=y.a.DELAYLOADSTATE_LOADED,e._removePendingData(t)},function(){},e.offlineProvider,n),this},t.prototype.isInFrustum=function(t){return this.delayLoadState!==y.a.DELAYLOADSTATE_LOADING&&!!e.prototype.isInFrustum.call(this,t)&&(this._checkDelayState(),!0)},t.prototype.setMaterialByID=function(e){var t,n=this.getScene().materials;for(t=n.length-1;t>-1;t--)if(n[t].id===e)return this.material=n[t],this;var r=this.getScene().multiMaterials;for(t=r.length-1;t>-1;t--)if(r[t].id===e)return this.material=r[t],this;return this},t.prototype.getAnimatables=function(){var e=new Array;return this.material&&e.push(this.material),this.skeleton&&e.push(this.skeleton),e},t.prototype.bakeTransformIntoVertices=function(e){if(!this.isVerticesDataPresent(c.b.PositionKind))return this;var t=this.subMeshes.splice(0);this._resetPointsArrayCache();var n,r=this.getVerticesData(c.b.PositionKind),i=new Array;for(n=0;n<r.length;n+=3)u.x.TransformCoordinates(u.x.FromArray(r,n),e).toArray(i,n);if(this.setVerticesData(c.b.PositionKind,i,this.getVertexBuffer(c.b.PositionKind).isUpdatable()),this.isVerticesDataPresent(c.b.NormalKind)){for(r=this.getVerticesData(c.b.NormalKind),i=[],n=0;n<r.length;n+=3)u.x.TransformNormal(u.x.FromArray(r,n),e).normalize().toArray(i,n);this.setVerticesData(c.b.NormalKind,i,this.getVertexBuffer(c.b.NormalKind).isUpdatable())}return e.m[0]*e.m[5]*e.m[10]<0&&this.flipFaces(),this.releaseSubMeshes(),this.subMeshes=t,this},t.prototype.bakeCurrentTransformIntoVertices=function(){return this.bakeTransformIntoVertices(this.computeWorldMatrix(!0)),this.scaling.copyFromFloats(1,1,1),this.position.copyFromFloats(0,0,0),this.rotation.copyFromFloats(0,0,0),this.rotationQuaternion&&(this.rotationQuaternion=u.q.Identity()),this._worldMatrix=u.j.Identity(),this},Object.defineProperty(t.prototype,"_positions",{get:function(){return this._geometry?this._geometry._positions:null},enumerable:!0,configurable:!0}),t.prototype._resetPointsArrayCache=function(){return this._geometry&&this._geometry._resetPointsArrayCache(),this},t.prototype._generatePointsArray=function(){return!!this._geometry&&this._geometry._generatePointsArray()},t.prototype.clone=function(e,n,r,i){return void 0===e&&(e=""),void 0===i&&(i=!0),new t(e,this.getScene(),n,this,r,i)},t.prototype.dispose=function(t,n){void 0===n&&(n=!1),this.morphTargetManager=null,this._geometry&&this._geometry.releaseForMesh(this,!0);var r=this._internalMeshDataInfo;if(r._onBeforeDrawObservable&&r._onBeforeDrawObservable.clear(),r._onBeforeBindObservable&&r._onBeforeBindObservable.clear(),r._onBeforeRenderObservable&&r._onBeforeRenderObservable.clear(),r._onAfterRenderObservable&&r._onAfterRenderObservable.clear(),this._scene.useClonedMeshhMap){if(r.meshMap)for(var i in r.meshMap)(s=r.meshMap[i])&&(s._internalMeshDataInfo._source=null,r.meshMap[i]=void 0);r._source&&r._source._internalMeshDataInfo.meshMap&&(r._source._internalMeshDataInfo.meshMap[this.uniqueId]=void 0)}else for(var o=0,a=this.getScene().meshes;o<a.length;o++){var s;(s=a[o])._internalMeshDataInfo&&s._internalMeshDataInfo._source&&s._internalMeshDataInfo._source===this&&(s._internalMeshDataInfo._source=null)}for(r._source=null,this._instanceDataStorage.instancesBuffer&&(this._instanceDataStorage.instancesBuffer.dispose(),this._instanceDataStorage.instancesBuffer=null);this.instances.length;)this.instances[0].dispose();e.prototype.dispose.call(this,t,n)},t.prototype.applyDisplacementMap=function(e,t,n,r,i,a,s){var u=this;void 0===s&&(s=!1);var l=this.getScene();return o.h.LoadImage(e,function(e){var o=document.createElement("canvas"),l=o.getContext("2d"),c=e.width,h=e.height;o.width=c,o.height=h,l.drawImage(e,0,0);var d=l.getImageData(0,0,c,h).data;u.applyDisplacementMapFromBuffer(d,c,h,t,n,i,a,s),r&&r(u)},function(){},l.offlineProvider),this},t.prototype.applyDisplacementMapFromBuffer=function(e,t,n,r,i,o,a,s){if(void 0===s&&(s=!1),!this.isVerticesDataPresent(c.b.PositionKind)||!this.isVerticesDataPresent(c.b.NormalKind)||!this.isVerticesDataPresent(c.b.UVKind))return T.a.Warn("Cannot call applyDisplacementMap: Given mesh is not complete. Position, Normal or UV are missing"),this;var l=this.getVerticesData(c.b.PositionKind,!0,!0),d=this.getVerticesData(c.b.NormalKind),f=this.getVerticesData(c.b.UVKind),p=u.x.Zero(),_=u.x.Zero(),m=u.w.Zero();o=o||u.w.Zero(),a=a||new u.w(1,1);for(var g=0;g<l.length;g+=3){u.x.FromArrayToRef(l,g,p),u.x.FromArrayToRef(d,g,_),u.w.FromArrayToRef(f,g/3*2,m);var v=4*((Math.abs(m.x*a.x+o.x)*t%t|0)+(Math.abs(m.y*a.y+o.y)*n%n|0)*t),y=e[v]/255*.3+e[v+1]/255*.59+e[v+2]/255*.11;_.normalize(),_.scaleInPlace(r+(i-r)*y),(p=p.add(_)).toArray(l,g)}return h.a.ComputeNormals(l,this.getIndices(),d),s?(this.setVerticesData(c.b.PositionKind,l),this.setVerticesData(c.b.NormalKind,d)):(this.updateVerticesData(c.b.PositionKind,l),this.updateVerticesData(c.b.NormalKind,d)),this},t.prototype.convertToFlatShadedMesh=function(){var e,t,n=this.getVerticesDataKinds(),r={},i={},o={},a=!1;for(e=0;e<n.length;e++){var s=this.getVertexBuffer(t=n[e]);t!==c.b.NormalKind?(r[t]=s,i[t]=r[t].getData(),o[t]=[]):(a=s.isUpdatable(),n.splice(e,1),e--)}var l,h=this.subMeshes.slice(0),d=this.getIndices(),f=this.getTotalIndices();for(l=0;l<f;l++){var _=d[l];for(e=0;e<n.length;e++)for(var m=r[t=n[e]].getStrideSize(),g=0;g<m;g++)o[t].push(i[t][_*m+g])}var v=[],y=o[c.b.PositionKind];for(l=0;l<f;l+=3){d[l]=l,d[l+1]=l+1,d[l+2]=l+2;for(var b=u.x.FromArray(y,3*l),T=u.x.FromArray(y,3*(l+1)),E=u.x.FromArray(y,3*(l+2)),x=b.subtract(T),M=E.subtract(T),A=u.x.Normalize(u.x.Cross(x,M)),S=0;S<3;S++)v.push(A.x),v.push(A.y),v.push(A.z)}for(this.setIndices(d),this.setVerticesData(c.b.NormalKind,v,a),e=0;e<n.length;e++)this.setVerticesData(t=n[e],o[t],r[t].isUpdatable());this.releaseSubMeshes();for(var C=0;C<h.length;C++){var P=h[C];p.b.AddToMesh(P.materialIndex,P.indexStart,P.indexCount,P.indexStart,P.indexCount,this)}return this.synchronizeInstances(),this},t.prototype.convertToUnIndexedMesh=function(){var e,t,n=this.getVerticesDataKinds(),r={},i={},o={};for(e=0;e<n.length;e++){var a=this.getVertexBuffer(t=n[e]);r[t]=a,i[t]=r[t].getData(),o[t]=[]}var s,u=this.subMeshes.slice(0),l=this.getIndices(),c=this.getTotalIndices();for(s=0;s<c;s++){var h=l[s];for(e=0;e<n.length;e++)for(var d=r[t=n[e]].getStrideSize(),f=0;f<d;f++)o[t].push(i[t][h*d+f])}for(s=0;s<c;s+=3)l[s]=s,l[s+1]=s+1,l[s+2]=s+2;for(this.setIndices(l),e=0;e<n.length;e++)this.setVerticesData(t=n[e],o[t],r[t].isUpdatable());this.releaseSubMeshes();for(var _=0;_<u.length;_++){var m=u[_];p.b.AddToMesh(m.materialIndex,m.indexStart,m.indexCount,m.indexStart,m.indexCount,this)}return this._unIndexed=!0,this.synchronizeInstances(),this},t.prototype.flipFaces=function(e){void 0===e&&(e=!1);var t,n,r=h.a.ExtractFromMesh(this);if(e&&this.isVerticesDataPresent(c.b.NormalKind)&&r.normals)for(t=0;t<r.normals.length;t++)r.normals[t]*=-1;if(r.indices)for(t=0;t<r.indices.length;t+=3)n=r.indices[t+1],r.indices[t+1]=r.indices[t+2],r.indices[t+2]=n;return r.applyToMesh(this),this},t.prototype.increaseVertices=function(e){var t=h.a.ExtractFromMesh(this),n=t.uvs,r=t.indices,i=t.positions,o=t.normals;if(null===r||null===i||null===o||null===n)T.a.Warn("VertexData contains null entries");else{for(var a,s,l=e+1,c=new Array,d=0;d<l+1;d++)c[d]=new Array;var f,p=new u.x(0,0,0),_=new u.x(0,0,0),m=new u.w(0,0),g=new Array,v=new Array,y=new Array,b=i.length,E=n.length;for(d=0;d<r.length;d+=3){v[0]=r[d],v[1]=r[d+1],v[2]=r[d+2];for(var x=0;x<3;x++)if(s=v[(x+1)%3],void 0===y[a=v[x]]&&void 0===y[s]?(y[a]=new Array,y[s]=new Array):(void 0===y[a]&&(y[a]=new Array),void 0===y[s]&&(y[s]=new Array)),void 0===y[a][s]&&void 0===y[s][a]){y[a][s]=[],p.x=(i[3*s]-i[3*a])/l,p.y=(i[3*s+1]-i[3*a+1])/l,p.z=(i[3*s+2]-i[3*a+2])/l,_.x=(o[3*s]-o[3*a])/l,_.y=(o[3*s+1]-o[3*a+1])/l,_.z=(o[3*s+2]-o[3*a+2])/l,m.x=(n[2*s]-n[2*a])/l,m.y=(n[2*s+1]-n[2*a+1])/l,y[a][s].push(a);for(var M=1;M<l;M++)y[a][s].push(i.length/3),i[b]=i[3*a]+M*p.x,o[b++]=o[3*a]+M*_.x,i[b]=i[3*a+1]+M*p.y,o[b++]=o[3*a+1]+M*_.y,i[b]=i[3*a+2]+M*p.z,o[b++]=o[3*a+2]+M*_.z,n[E++]=n[2*a]+M*m.x,n[E++]=n[2*a+1]+M*m.y;y[a][s].push(s),y[s][a]=new Array,f=y[a][s].length;for(var A=0;A<f;A++)y[s][a][A]=y[a][s][f-1-A]}for(c[0][0]=r[d],c[1][0]=y[r[d]][r[d+1]][1],c[1][1]=y[r[d]][r[d+2]][1],M=2;M<l;M++)for(c[M][0]=y[r[d]][r[d+1]][M],c[M][M]=y[r[d]][r[d+2]][M],p.x=(i[3*c[M][M]]-i[3*c[M][0]])/M,p.y=(i[3*c[M][M]+1]-i[3*c[M][0]+1])/M,p.z=(i[3*c[M][M]+2]-i[3*c[M][0]+2])/M,_.x=(o[3*c[M][M]]-o[3*c[M][0]])/M,_.y=(o[3*c[M][M]+1]-o[3*c[M][0]+1])/M,_.z=(o[3*c[M][M]+2]-o[3*c[M][0]+2])/M,m.x=(n[2*c[M][M]]-n[2*c[M][0]])/M,m.y=(n[2*c[M][M]+1]-n[2*c[M][0]+1])/M,x=1;x<M;x++)c[M][x]=i.length/3,i[b]=i[3*c[M][0]]+x*p.x,o[b++]=o[3*c[M][0]]+x*_.x,i[b]=i[3*c[M][0]+1]+x*p.y,o[b++]=o[3*c[M][0]+1]+x*_.y,i[b]=i[3*c[M][0]+2]+x*p.z,o[b++]=o[3*c[M][0]+2]+x*_.z,n[E++]=n[2*c[M][0]]+x*m.x,n[E++]=n[2*c[M][0]+1]+x*m.y;for(c[l]=y[r[d+1]][r[d+2]],g.push(c[0][0],c[1][0],c[1][1]),M=1;M<l;M++){for(x=0;x<M;x++)g.push(c[M][x],c[M+1][x],c[M+1][x+1]),g.push(c[M][x],c[M+1][x+1],c[M][x+1]);g.push(c[M][x],c[M+1][x],c[M+1][x+1])}}t.indices=g,t.applyToMesh(this)}},t.prototype.forceSharedVertices=function(){var e=h.a.ExtractFromMesh(this),t=e.uvs,n=e.indices,r=e.positions;if(null===n||null===r||null===e.normals||null===t)T.a.Warn("VertexData contains null entries");else{for(var i,o,a=new Array,s=new Array,u=new Array,l=new Array,c=0,d=new Array,f=0;f<n.length;f+=3){o=[n[f],n[f+1],n[f+2]],l=new Array;for(var p=0;p<3;p++){l[p]="";for(var _=0;_<3;_++)Math.abs(r[3*o[p]+_])<1e-8&&(r[3*o[p]+_]=0),l[p]+=r[3*o[p]+_]+"|";l[p]=l[p].slice(0,-1)}if(l[0]!=l[1]&&l[0]!=l[2]&&l[1]!=l[2])for(p=0;p<3;p++){if((i=d.indexOf(l[p]))<0){for(d.push(l[p]),i=c++,_=0;_<3;_++)a.push(r[3*o[p]+_]);for(_=0;_<2;_++)u.push(t[2*o[p]+_])}s.push(i)}}var m=new Array;h.a.ComputeNormals(a,s,m),e.positions=a,e.indices=s,e.normals=m,e.uvs=u,e.applyToMesh(this)}},t._instancedMeshFactory=function(e,t){throw x.a.WarnImport("InstancedMesh")},t._PhysicsImpostorParser=function(e,t,n){throw x.a.WarnImport("PhysicsImpostor")},t.prototype.createInstance=function(e){return t._instancedMeshFactory(e,this)},t.prototype.synchronizeInstances=function(){for(var e=0;e<this.instances.length;e++)this.instances[e]._syncSubMeshes();return this},t.prototype.optimizeIndices=function(e){var t=this,n=this.getIndices(),r=this.getVerticesData(c.b.PositionKind);if(!r||!n)return this;for(var i=new Array,a=0;a<r.length;a+=3)i.push(u.x.FromArray(r,a));var s=new Array;return o.a.SyncAsyncForLoop(i.length,40,function(e){for(var t=i.length-1-e,n=i[t],r=0;r<t;++r)if(n.equals(i[r])){s[t]=r;break}},function(){for(var r=0;r<n.length;++r)n[r]=s[n[r]]||n[r];var i=t.subMeshes.slice(0);t.setIndices(n),t.subMeshes=i,e&&e(t)}),this},t.prototype.serialize=function(e){e.name=this.name,e.id=this.id,e.type=this.getClassName(),s.a&&s.a.HasTags(this)&&(e.tags=s.a.GetTags(this)),e.position=this.position.asArray(),this.rotationQuaternion?e.rotationQuaternion=this.rotationQuaternion.asArray():this.rotation&&(e.rotation=this.rotation.asArray()),e.scaling=this.scaling.asArray(),this._postMultiplyPivotMatrix?e.pivotMatrix=this.getPivotMatrix().asArray():e.localMatrix=this.getPivotMatrix().asArray(),e.isEnabled=this.isEnabled(!1),e.isVisible=this.isVisible,e.infiniteDistance=this.infiniteDistance,e.pickable=this.isPickable,e.receiveShadows=this.receiveShadows,e.billboardMode=this.billboardMode,e.visibility=this.visibility,e.checkCollisions=this.checkCollisions,e.isBlocker=this.isBlocker,this.parent&&(e.parentId=this.parent.id),e.isUnIndexed=this.isUnIndexed;var t=this._geometry;if(t){e.geometryId=t.id,e.subMeshes=[];for(var n=0;n<this.subMeshes.length;n++){var r=this.subMeshes[n];e.subMeshes.push({materialIndex:r.materialIndex,verticesStart:r.verticesStart,verticesCount:r.verticesCount,indexStart:r.indexStart,indexCount:r.indexCount})}}if(this.material?e.materialId=this.material.id:this.material=null,this.morphTargetManager&&(e.morphTargetManagerId=this.morphTargetManager.uniqueId),this.skeleton&&(e.skeletonId=this.skeleton.id),this.getScene()._getComponent(M.a.NAME_PHYSICSENGINE)){var i=this.getPhysicsImpostor();i&&(e.physicsMass=i.getParam("mass"),e.physicsFriction=i.getParam("friction"),e.physicsRestitution=i.getParam("mass"),e.physicsImpostor=i.type)}this.metadata&&(e.metadata=this.metadata),e.instances=[];for(var o=0;o<this.instances.length;o++){var a=this.instances[o];if(!a.doNotSerialize){var u={name:a.name,id:a.id,position:a.position.asArray(),scaling:a.scaling.asArray()};a.parent&&(u.parentId=a.parent.id),a.rotationQuaternion?u.rotationQuaternion=a.rotationQuaternion.asArray():a.rotation&&(u.rotation=a.rotation.asArray()),e.instances.push(u),b.a.AppendSerializedAnimations(a,u),u.ranges=a.serializeAnimationRanges()}}b.a.AppendSerializedAnimations(this,e),e.ranges=this.serializeAnimationRanges(),e.layerMask=this.layerMask,e.alphaIndex=this.alphaIndex,e.hasVertexAlpha=this.hasVertexAlpha,e.overlayAlpha=this.overlayAlpha,e.overlayColor=this.overlayColor.asArray(),e.renderOverlay=this.renderOverlay,e.applyFog=this.applyFog,this.actionManager&&(e.actions=this.actionManager.serialize(this.name))},t.prototype._syncGeometryWithMorphTargetManager=function(){if(this.geometry){this._markSubMeshesAsAttributesDirty();var e=this._internalMeshDataInfo._morphTargetManager;if(e&&e.vertexCount){if(e.vertexCount!==this.getTotalVertices())return T.a.Error("Mesh is incompatible with morph targets. Targets and mesh must all have the same vertices count."),void(this.morphTargetManager=null);for(var t=0;t<e.numInfluencers;t++){var n=e.getActiveTarget(t),r=n.getPositions();if(!r)return void T.a.Error("Invalid morph target. Target must have positions.");this.geometry.setVerticesData(c.b.PositionKind+t,r,!1,3);var i=n.getNormals();i&&this.geometry.setVerticesData(c.b.NormalKind+t,i,!1,3);var o=n.getTangents();o&&this.geometry.setVerticesData(c.b.TangentKind+t,o,!1,3)}}else for(t=0;this.geometry.isVerticesDataPresent(c.b.PositionKind+t);)this.geometry.removeVerticesData(c.b.PositionKind+t),this.geometry.isVerticesDataPresent(c.b.NormalKind+t)&&this.geometry.removeVerticesData(c.b.NormalKind+t),this.geometry.isVerticesDataPresent(c.b.TangentKind+t)&&this.geometry.removeVerticesData(c.b.TangentKind+t),t++}},t.Parse=function(e,n,r){var i;if((i=e.type&&"GroundMesh"===e.type?t._GroundMeshParser(e,n):new t(e.name,n)).id=e.id,s.a&&s.a.AddTagsTo(i,e.tags),i.position=u.x.FromArray(e.position),void 0!==e.metadata&&(i.metadata=e.metadata),e.rotationQuaternion?i.rotationQuaternion=u.q.FromArray(e.rotationQuaternion):e.rotation&&(i.rotation=u.x.FromArray(e.rotation)),i.scaling=u.x.FromArray(e.scaling),e.localMatrix?i.setPreTransformMatrix(u.j.FromArray(e.localMatrix)):e.pivotMatrix&&i.setPivotMatrix(u.j.FromArray(e.pivotMatrix)),i.setEnabled(e.isEnabled),i.isVisible=e.isVisible,i.infiniteDistance=e.infiniteDistance,i.showBoundingBox=e.showBoundingBox,i.showSubMeshesBoundingBox=e.showSubMeshesBoundingBox,void 0!==e.applyFog&&(i.applyFog=e.applyFog),void 0!==e.pickable&&(i.isPickable=e.pickable),void 0!==e.alphaIndex&&(i.alphaIndex=e.alphaIndex),i.receiveShadows=e.receiveShadows,i.billboardMode=e.billboardMode,void 0!==e.visibility&&(i.visibility=e.visibility),i.checkCollisions=e.checkCollisions,void 0!==e.isBlocker&&(i.isBlocker=e.isBlocker),i._shouldGenerateFlatShading=e.useFlatShading,e.freezeWorldMatrix&&(i._waitingData.freezeWorldMatrix=e.freezeWorldMatrix),e.parentId&&(i._waitingParentId=e.parentId),void 0!==e.actions&&(i._waitingData.actions=e.actions),void 0!==e.overlayAlpha&&(i.overlayAlpha=e.overlayAlpha),void 0!==e.overlayColor&&(i.overlayColor=u.e.FromArray(e.overlayColor)),void 0!==e.renderOverlay&&(i.renderOverlay=e.renderOverlay),i.isUnIndexed=!!e.isUnIndexed,i.hasVertexAlpha=e.hasVertexAlpha,e.delayLoadingFile?(i.delayLoadState=y.a.DELAYLOADSTATE_NOTLOADED,i.delayLoadingFile=r+e.delayLoadingFile,i._boundingInfo=new _.a(u.x.FromArray(e.boundingBoxMinimum),u.x.FromArray(e.boundingBoxMaximum)),e._binaryInfo&&(i._binaryInfo=e._binaryInfo),i._delayInfo=[],e.hasUVs&&i._delayInfo.push(c.b.UVKind),e.hasUVs2&&i._delayInfo.push(c.b.UV2Kind),e.hasUVs3&&i._delayInfo.push(c.b.UV3Kind),e.hasUVs4&&i._delayInfo.push(c.b.UV4Kind),e.hasUVs5&&i._delayInfo.push(c.b.UV5Kind),e.hasUVs6&&i._delayInfo.push(c.b.UV6Kind),e.hasColors&&i._delayInfo.push(c.b.ColorKind),e.hasMatricesIndices&&i._delayInfo.push(c.b.MatricesIndicesKind),e.hasMatricesWeights&&i._delayInfo.push(c.b.MatricesWeightsKind),i._delayLoadingFunction=d.a._ImportGeometry,v.a.ForceFullSceneLoadingForIncremental&&i._checkDelayState()):d.a._ImportGeometry(e,i),e.materialId?i.setMaterialByID(e.materialId):i.material=null,e.morphTargetManagerId>-1&&(i.morphTargetManager=n.getMorphTargetManagerById(e.morphTargetManagerId)),e.skeletonId>-1&&(i.skeleton=n.getLastSkeletonByID(e.skeletonId),e.numBoneInfluencers&&(i.numBoneInfluencers=e.numBoneInfluencers)),e.animations){for(var o=0;o<e.animations.length;o++){var a=e.animations[o];(m=E.a.GetClass("BABYLON.Animation"))&&i.animations.push(m.Parse(a))}l.a.ParseAnimationRanges(i,e,n)}if(e.autoAnimate&&n.beginAnimation(i,e.autoAnimateFrom,e.autoAnimateTo,e.autoAnimateLoop,e.autoAnimateSpeed||1),i.layerMask=e.layerMask&&!isNaN(e.layerMask)?Math.abs(parseInt(e.layerMask)):268435455,e.physicsImpostor&&t._PhysicsImpostorParser(n,i,e),e.lodMeshIds&&(i._waitingData.lods={ids:e.lodMeshIds,distances:e.lodDistances?e.lodDistances:null,coverages:e.lodCoverages?e.lodCoverages:null}),e.instances)for(var h=0;h<e.instances.length;h++){var f=e.instances[h],p=i.createInstance(f.name);if(f.id&&(p.id=f.id),s.a&&s.a.AddTagsTo(p,f.tags?f.tags:e.tags),p.position=u.x.FromArray(f.position),void 0!==f.metadata&&(p.metadata=f.metadata),f.parentId&&(p._waitingParentId=f.parentId),f.rotationQuaternion?p.rotationQuaternion=u.q.FromArray(f.rotationQuaternion):f.rotation&&(p.rotation=u.x.FromArray(f.rotation)),p.scaling=u.x.FromArray(f.scaling),null!=f.checkCollisions&&null!=f.checkCollisions&&(p.checkCollisions=f.checkCollisions),null!=f.pickable&&null!=f.pickable&&(p.isPickable=f.pickable),null!=f.showBoundingBox&&null!=f.showBoundingBox&&(p.showBoundingBox=f.showBoundingBox),null!=f.showSubMeshesBoundingBox&&null!=f.showSubMeshesBoundingBox&&(p.showSubMeshesBoundingBox=f.showSubMeshesBoundingBox),null!=f.alphaIndex&&null!=f.showSubMeshesBoundingBox&&(p.alphaIndex=f.alphaIndex),f.physicsImpostor&&t._PhysicsImpostorParser(n,p,f),f.animations){for(o=0;o<f.animations.length;o++){var m;a=f.animations[o],(m=E.a.GetClass("BABYLON.Animation"))&&p.animations.push(m.Parse(a))}l.a.ParseAnimationRanges(p,f,n),f.autoAnimate&&n.beginAnimation(p,f.autoAnimateFrom,f.autoAnimateTo,f.autoAnimateLoop,f.autoAnimateSpeed||1)}}return i},t.CreateRibbon=function(e,t,n,r,i,o,a,s,u){throw x.a.WarnImport("MeshBuilder")},t.CreateDisc=function(e,t,n,r,i,o){throw void 0===r&&(r=null),x.a.WarnImport("MeshBuilder")},t.CreateBox=function(e,t,n,r,i){throw void 0===n&&(n=null),x.a.WarnImport("MeshBuilder")},t.CreateSphere=function(e,t,n,r,i,o){throw x.a.WarnImport("MeshBuilder")},t.CreateHemisphere=function(e,t,n,r){throw x.a.WarnImport("MeshBuilder")},t.CreateCylinder=function(e,t,n,r,i,o,a,s,u){throw x.a.WarnImport("MeshBuilder")},t.CreateTorus=function(e,t,n,r,i,o,a){throw x.a.WarnImport("MeshBuilder")},t.CreateTorusKnot=function(e,t,n,r,i,o,a,s,u,l){throw x.a.WarnImport("MeshBuilder")},t.CreateLines=function(e,t,n,r,i){throw void 0===n&&(n=null),void 0===r&&(r=!1),void 0===i&&(i=null),x.a.WarnImport("MeshBuilder")},t.CreateDashedLines=function(e,t,n,r,i,o,a,s){throw void 0===o&&(o=null),x.a.WarnImport("MeshBuilder")},t.CreatePolygon=function(e,t,n,r,i,o,a){throw void 0===a&&(a=earcut),x.a.WarnImport("MeshBuilder")},t.ExtrudePolygon=function(e,t,n,r,i,o,a,s){throw void 0===s&&(s=earcut),x.a.WarnImport("MeshBuilder")},t.ExtrudeShape=function(e,t,n,r,i,o,a,s,u,l){throw void 0===a&&(a=null),x.a.WarnImport("MeshBuilder")},t.ExtrudeShapeCustom=function(e,t,n,r,i,o,a,s,u,l,c,h){throw x.a.WarnImport("MeshBuilder")},t.CreateLathe=function(e,t,n,r,i,o,a){throw x.a.WarnImport("MeshBuilder")},t.CreatePlane=function(e,t,n,r,i){throw x.a.WarnImport("MeshBuilder")},t.CreateGround=function(e,t,n,r,i,o){throw x.a.WarnImport("MeshBuilder")},t.CreateTiledGround=function(e,t,n,r,i,o,a,s,u){throw x.a.WarnImport("MeshBuilder")},t.CreateGroundFromHeightMap=function(e,t,n,r,i,o,a,s,u,l,c){throw x.a.WarnImport("MeshBuilder")},t.CreateTube=function(e,t,n,r,i,o,a,s,u,l){throw x.a.WarnImport("MeshBuilder")},t.CreatePolyhedron=function(e,t,n){throw x.a.WarnImport("MeshBuilder")},t.CreateIcoSphere=function(e,t,n){throw x.a.WarnImport("MeshBuilder")},t.CreateDecal=function(e,t,n,r,i,o){throw x.a.WarnImport("MeshBuilder")},t.prototype.setPositionsForCPUSkinning=function(){var e=this._internalMeshDataInfo;if(!e._sourcePositions){var t=this.getVerticesData(c.b.PositionKind);if(!t)return e._sourcePositions;e._sourcePositions=new Float32Array(t),this.isVertexBufferUpdatable(c.b.PositionKind)||this.setVerticesData(c.b.PositionKind,t,!0)}return e._sourcePositions},t.prototype.setNormalsForCPUSkinning=function(){var e=this._internalMeshDataInfo;if(!e._sourceNormals){var t=this.getVerticesData(c.b.NormalKind);if(!t)return e._sourceNormals;e._sourceNormals=new Float32Array(t),this.isVertexBufferUpdatable(c.b.NormalKind)||this.setVerticesData(c.b.NormalKind,t,!0)}return e._sourceNormals},t.prototype.applySkeleton=function(e){if(!this.geometry)return this;if(this.geometry._softwareSkinningFrameId==this.getScene().getFrameId())return this;if(this.geometry._softwareSkinningFrameId=this.getScene().getFrameId(),!this.isVerticesDataPresent(c.b.PositionKind))return this;if(!this.isVerticesDataPresent(c.b.NormalKind))return this;if(!this.isVerticesDataPresent(c.b.MatricesIndicesKind))return this;if(!this.isVerticesDataPresent(c.b.MatricesWeightsKind))return this;var t=this._internalMeshDataInfo;if(!t._sourcePositions){var n=this.subMeshes.slice();this.setPositionsForCPUSkinning(),this.subMeshes=n}t._sourceNormals||this.setNormalsForCPUSkinning();var r=this.getVerticesData(c.b.PositionKind);if(!r)return this;r instanceof Float32Array||(r=new Float32Array(r));var i=this.getVerticesData(c.b.NormalKind);if(!i)return this;i instanceof Float32Array||(i=new Float32Array(i));var o=this.getVerticesData(c.b.MatricesIndicesKind),a=this.getVerticesData(c.b.MatricesWeightsKind);if(!a||!o)return this;for(var s,l=this.numBoneInfluencers>4,h=l?this.getVerticesData(c.b.MatricesIndicesExtraKind):null,d=l?this.getVerticesData(c.b.MatricesWeightsExtraKind):null,f=e.getTransformMatrices(this),p=u.x.Zero(),_=new u.j,m=new u.j,g=0,v=0;v<r.length;v+=3,g+=4){var y;for(s=0;s<4;s++)(y=a[g+s])>0&&(u.j.FromFloat32ArrayToRefScaled(f,Math.floor(16*o[g+s]),y,m),_.addToSelf(m));if(l)for(s=0;s<4;s++)(y=d[g+s])>0&&(u.j.FromFloat32ArrayToRefScaled(f,Math.floor(16*h[g+s]),y,m),_.addToSelf(m));u.x.TransformCoordinatesFromFloatsToRef(t._sourcePositions[v],t._sourcePositions[v+1],t._sourcePositions[v+2],_,p),p.toArray(r,v),u.x.TransformNormalFromFloatsToRef(t._sourceNormals[v],t._sourceNormals[v+1],t._sourceNormals[v+2],_,p),p.toArray(i,v),_.reset()}return this.updateVerticesData(c.b.PositionKind,r),this.updateVerticesData(c.b.NormalKind,i),this},t.MinMax=function(e){var t=null,n=null;return e.forEach(function(e){var r=e.getBoundingInfo().boundingBox;t&&n?(t.minimizeInPlace(r.minimumWorld),n.maximizeInPlace(r.maximumWorld)):(t=r.minimumWorld,n=r.maximumWorld)}),t&&n?{min:t,max:n}:{min:u.x.Zero(),max:u.x.Zero()}},t.Center=function(e){var n=e instanceof Array?t.MinMax(e):e;return u.x.Center(n.min,n.max)},t.MergeMeshes=function(e,n,r,i,o,a){var s;if(void 0===n&&(n=!0),!r){var u=0;for(s=0;s<e.length;s++)if(e[s]&&(u+=e[s].getTotalVertices())>65536)return T.a.Warn("Cannot merge meshes because resulting mesh will have more than 65536 vertices. Please use allow32BitsIndices = true to use 32 bits indices"),null}if(a){var l,c,d=null;o=!1}var f,_=new Array,m=new Array,v=null,y=new Array,b=null;for(s=0;s<e.length;s++)if(e[s]){var E=e[s];if(E.isAnInstance)return T.a.Warn("Cannot merge instance meshes."),null;var x=E.computeWorldMatrix(!0);if((f=h.a.ExtractFromMesh(E,!0,!0)).transform(x),v?v.merge(f,r):(v=f,b=E),o&&y.push(E.getTotalIndices()),a)if(E.material){var M=E.material;if(M instanceof g.a){for(c=0;c<M.subMaterials.length;c++)_.indexOf(M.subMaterials[c])<0&&_.push(M.subMaterials[c]);for(l=0;l<E.subMeshes.length;l++)m.push(_.indexOf(M.subMaterials[E.subMeshes[l].materialIndex])),y.push(E.subMeshes[l].indexCount)}else for(_.indexOf(M)<0&&_.push(M),l=0;l<E.subMeshes.length;l++)m.push(_.indexOf(M)),y.push(E.subMeshes[l].indexCount)}else for(l=0;l<E.subMeshes.length;l++)m.push(0),y.push(E.subMeshes[l].indexCount)}if(b=b,i||(i=new t(b.name+"_merged",b.getScene())),v.applyToMesh(i),i.checkCollisions=b.checkCollisions,n)for(s=0;s<e.length;s++)e[s]&&e[s].dispose();if(o||a){i.releaseSubMeshes(),s=0;for(var A=0;s<y.length;)p.b.CreateFromIndices(0,A,y[s],i),A+=y[s],s++}if(a){for((d=new g.a(b.name+"_merged",b.getScene())).subMaterials=_,l=0;l<i.subMeshes.length;l++)i.subMeshes[l].materialIndex=m[l];i.material=d}else i.material=b.material;return i},t.prototype.addInstance=function(e){e._indexInSourceMeshInstanceArray=this.instances.length,this.instances.push(e)},t.prototype.removeInstance=function(e){var t=e._indexInSourceMeshInstanceArray;if(-1!=t){if(t!==this.instances.length-1){var n=this.instances[this.instances.length-1];this.instances[t]=n,n._indexInSourceMeshInstanceArray=t}e._indexInSourceMeshInstanceArray=-1,this.instances.pop()}},t.FRONTSIDE=h.a.FRONTSIDE,t.BACKSIDE=h.a.BACKSIDE,t.DOUBLESIDE=h.a.DOUBLESIDE,t.DEFAULTSIDE=h.a.DEFAULTSIDE,t.NO_CAP=0,t.CAP_START=1,t.CAP_END=2,t.CAP_ALL=3,t._GroundMeshParser=function(e,t){throw x.a.WarnImport("GroundMesh")},t}(f.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.WithinEpsilon=function(e,t,n){void 0===n&&(n=1401298e-51);var r=e-t;return-n<=r&&r<=n},e.ToHex=function(e){var t=e.toString(16);return e<=15?("0"+t).toUpperCase():t.toUpperCase()},e.Sign=function(e){return 0==(e=+e)||isNaN(e)?e:e>0?1:-1},e.Clamp=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),Math.min(n,Math.max(t,e))},e.Log2=function(e){return Math.log(e)*Math.LOG2E},e.Repeat=function(e,t){return e-Math.floor(e/t)*t},e.Normalize=function(e,t,n){return(e-t)/(n-t)},e.Denormalize=function(e,t,n){return e*(n-t)+t},e.DeltaAngle=function(t,n){var r=e.Repeat(n-t,360);return r>180&&(r-=360),r},e.PingPong=function(t,n){var r=e.Repeat(t,2*n);return n-Math.abs(r-n)},e.SmoothStep=function(t,n,r){var i=e.Clamp(r);return n*(i=-2*i*i*i+3*i*i)+t*(1-i)},e.MoveTowards=function(t,n,r){return Math.abs(n-t)<=r?n:t+e.Sign(n-t)*r},e.MoveTowardsAngle=function(t,n,r){var i=e.DeltaAngle(t,n);return-r<i&&i<r?n:e.MoveTowards(t,n=t+i,r)},e.Lerp=function(e,t,n){return e+(t-e)*n},e.LerpAngle=function(t,n,r){var i=e.Repeat(n-t,360);return i>180&&(i-=360),t+i*e.Clamp(r)},e.InverseLerp=function(t,n,r){return t!=n?e.Clamp((r-t)/(n-t)):0},e.Hermite=function(e,t,n,r,i){var o=i*i,a=i*o;return e*(2*a-3*o+1)+n*(-2*a+3*o)+t*(a-2*o+i)+r*(a-o)},e.RandomRange=function(e,t){return e===t?e:Math.random()*(t-e)+e},e.RangeToPercent=function(e,t,n){return(e-t)/(n-t)},e.PercentToRange=function(e,t,n){return(n-t)*e+t},e.NormalizeRadians=function(t){return t-e.TwoPi*Math.floor((t+Math.PI)/e.TwoPi)},e.TwoPi=2*Math.PI,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n(4),o=n(19),a=function(){function e(){}return e.prototype.set=function(e,t){switch(t){case i.b.PositionKind:this.positions=e;break;case i.b.NormalKind:this.normals=e;break;case i.b.TangentKind:this.tangents=e;break;case i.b.UVKind:this.uvs=e;break;case i.b.UV2Kind:this.uvs2=e;break;case i.b.UV3Kind:this.uvs3=e;break;case i.b.UV4Kind:this.uvs4=e;break;case i.b.UV5Kind:this.uvs5=e;break;case i.b.UV6Kind:this.uvs6=e;break;case i.b.ColorKind:this.colors=e;break;case i.b.MatricesIndicesKind:this.matricesIndices=e;break;case i.b.MatricesWeightsKind:this.matricesWeights=e;break;case i.b.MatricesIndicesExtraKind:this.matricesIndicesExtra=e;break;case i.b.MatricesWeightsExtraKind:this.matricesWeightsExtra=e}},e.prototype.applyToMesh=function(e,t){return this._applyTo(e,t),this},e.prototype.applyToGeometry=function(e,t){return this._applyTo(e,t),this},e.prototype.updateMesh=function(e){return this._update(e),this},e.prototype.updateGeometry=function(e){return this._update(e),this},e.prototype._applyTo=function(e,t){return void 0===t&&(t=!1),this.positions&&e.setVerticesData(i.b.PositionKind,this.positions,t),this.normals&&e.setVerticesData(i.b.NormalKind,this.normals,t),this.tangents&&e.setVerticesData(i.b.TangentKind,this.tangents,t),this.uvs&&e.setVerticesData(i.b.UVKind,this.uvs,t),this.uvs2&&e.setVerticesData(i.b.UV2Kind,this.uvs2,t),this.uvs3&&e.setVerticesData(i.b.UV3Kind,this.uvs3,t),this.uvs4&&e.setVerticesData(i.b.UV4Kind,this.uvs4,t),this.uvs5&&e.setVerticesData(i.b.UV5Kind,this.uvs5,t),this.uvs6&&e.setVerticesData(i.b.UV6Kind,this.uvs6,t),this.colors&&e.setVerticesData(i.b.ColorKind,this.colors,t),this.matricesIndices&&e.setVerticesData(i.b.MatricesIndicesKind,this.matricesIndices,t),this.matricesWeights&&e.setVerticesData(i.b.MatricesWeightsKind,this.matricesWeights,t),this.matricesIndicesExtra&&e.setVerticesData(i.b.MatricesIndicesExtraKind,this.matricesIndicesExtra,t),this.matricesWeightsExtra&&e.setVerticesData(i.b.MatricesWeightsExtraKind,this.matricesWeightsExtra,t),this.indices?e.setIndices(this.indices,null,t):e.setIndices([],null),this},e.prototype._update=function(e,t,n){return this.positions&&e.updateVerticesData(i.b.PositionKind,this.positions,t,n),this.normals&&e.updateVerticesData(i.b.NormalKind,this.normals,t,n),this.tangents&&e.updateVerticesData(i.b.TangentKind,this.tangents,t,n),this.uvs&&e.updateVerticesData(i.b.UVKind,this.uvs,t,n),this.uvs2&&e.updateVerticesData(i.b.UV2Kind,this.uvs2,t,n),this.uvs3&&e.updateVerticesData(i.b.UV3Kind,this.uvs3,t,n),this.uvs4&&e.updateVerticesData(i.b.UV4Kind,this.uvs4,t,n),this.uvs5&&e.updateVerticesData(i.b.UV5Kind,this.uvs5,t,n),this.uvs6&&e.updateVerticesData(i.b.UV6Kind,this.uvs6,t,n),this.colors&&e.updateVerticesData(i.b.ColorKind,this.colors,t,n),this.matricesIndices&&e.updateVerticesData(i.b.MatricesIndicesKind,this.matricesIndices,t,n),this.matricesWeights&&e.updateVerticesData(i.b.MatricesWeightsKind,this.matricesWeights,t,n),this.matricesIndicesExtra&&e.updateVerticesData(i.b.MatricesIndicesExtraKind,this.matricesIndicesExtra,t,n),this.matricesWeightsExtra&&e.updateVerticesData(i.b.MatricesWeightsExtraKind,this.matricesWeightsExtra,t,n),this.indices&&e.setIndices(this.indices,null),this},e.prototype.transform=function(e){var t,n=e.m[0]*e.m[5]*e.m[10]<0,i=r.x.Zero();if(this.positions){var o=r.x.Zero();for(t=0;t<this.positions.length;t+=3)r.x.FromArrayToRef(this.positions,t,o),r.x.TransformCoordinatesToRef(o,e,i),this.positions[t]=i.x,this.positions[t+1]=i.y,this.positions[t+2]=i.z}if(this.normals){var a=r.x.Zero();for(t=0;t<this.normals.length;t+=3)r.x.FromArrayToRef(this.normals,t,a),r.x.TransformNormalToRef(a,e,i),this.normals[t]=i.x,this.normals[t+1]=i.y,this.normals[t+2]=i.z}if(this.tangents){var s=r.y.Zero(),u=r.y.Zero();for(t=0;t<this.tangents.length;t+=4)r.y.FromArrayToRef(this.tangents,t,s),r.y.TransformNormalToRef(s,e,u),this.tangents[t]=u.x,this.tangents[t+1]=u.y,this.tangents[t+2]=u.z,this.tangents[t+3]=u.w}if(n&&this.indices)for(t=0;t<this.indices.length;t+=3){var l=this.indices[t+1];this.indices[t+1]=this.indices[t+2],this.indices[t+2]=l}return this},e.prototype.merge=function(e,t){if(void 0===t&&(t=!1),this._validate(),e._validate(),!this.normals!=!e.normals||!this.tangents!=!e.tangents||!this.uvs!=!e.uvs||!this.uvs2!=!e.uvs2||!this.uvs3!=!e.uvs3||!this.uvs4!=!e.uvs4||!this.uvs5!=!e.uvs5||!this.uvs6!=!e.uvs6||!this.colors!=!e.colors||!this.matricesIndices!=!e.matricesIndices||!this.matricesWeights!=!e.matricesWeights||!this.matricesIndicesExtra!=!e.matricesIndicesExtra||!this.matricesWeightsExtra!=!e.matricesWeightsExtra)throw new Error("Cannot merge vertex data that do not have the same set of attributes");if(e.indices){this.indices||(this.indices=[]);var n=this.positions?this.positions.length/3:0;if(void 0!==this.indices.BYTES_PER_ELEMENT){var r=this.indices.length+e.indices.length,i=t||this.indices instanceof Uint32Array?new Uint32Array(r):new Uint16Array(r);i.set(this.indices);for(var o=this.indices.length,a=0;a<e.indices.length;a++)i[o+a]=e.indices[a]+n;this.indices=i}else for(a=0;a<e.indices.length;a++)this.indices.push(e.indices[a]+n)}return this.positions=this._mergeElement(this.positions,e.positions),this.normals=this._mergeElement(this.normals,e.normals),this.tangents=this._mergeElement(this.tangents,e.tangents),this.uvs=this._mergeElement(this.uvs,e.uvs),this.uvs2=this._mergeElement(this.uvs2,e.uvs2),this.uvs3=this._mergeElement(this.uvs3,e.uvs3),this.uvs4=this._mergeElement(this.uvs4,e.uvs4),this.uvs5=this._mergeElement(this.uvs5,e.uvs5),this.uvs6=this._mergeElement(this.uvs6,e.uvs6),this.colors=this._mergeElement(this.colors,e.colors),this.matricesIndices=this._mergeElement(this.matricesIndices,e.matricesIndices),this.matricesWeights=this._mergeElement(this.matricesWeights,e.matricesWeights),this.matricesIndicesExtra=this._mergeElement(this.matricesIndicesExtra,e.matricesIndicesExtra),this.matricesWeightsExtra=this._mergeElement(this.matricesWeightsExtra,e.matricesWeightsExtra),this},e.prototype._mergeElement=function(e,t){if(!e)return t;if(!t)return e;var n=t.length+e.length,r=e instanceof Float32Array,i=t instanceof Float32Array;if(r){var o=new Float32Array(n);return o.set(e),o.set(t,e.length),o}if(i){var a=e.slice(0),s=0;for(n=t.length;s<n;s++)a.push(t[s]);return a}return e.concat(t)},e.prototype._validate=function(){if(!this.positions)throw new Error("Positions are required");var e=function(e,t){var n=i.b.DeduceStride(e);if(t.length%n!=0)throw new Error("The "+e+"s array count must be a multiple of "+n);return t.length/n},t=e(i.b.PositionKind,this.positions),n=function(n,r){var i=e(n,r);if(i!==t)throw new Error("The "+n+"s element count ("+i+") does not match the positions count ("+t+")")};this.normals&&n(i.b.NormalKind,this.normals),this.tangents&&n(i.b.TangentKind,this.tangents),this.uvs&&n(i.b.UVKind,this.uvs),this.uvs2&&n(i.b.UV2Kind,this.uvs2),this.uvs3&&n(i.b.UV3Kind,this.uvs3),this.uvs4&&n(i.b.UV4Kind,this.uvs4),this.uvs5&&n(i.b.UV5Kind,this.uvs5),this.uvs6&&n(i.b.UV6Kind,this.uvs6),this.colors&&n(i.b.ColorKind,this.colors),this.matricesIndices&&n(i.b.MatricesIndicesKind,this.matricesIndices),this.matricesWeights&&n(i.b.MatricesWeightsKind,this.matricesWeights),this.matricesIndicesExtra&&n(i.b.MatricesIndicesExtraKind,this.matricesIndicesExtra),this.matricesWeightsExtra&&n(i.b.MatricesWeightsExtraKind,this.matricesWeightsExtra)},e.prototype.serialize=function(){var e=this.serialize();return this.positions&&(e.positions=this.positions),this.normals&&(e.normals=this.normals),this.tangents&&(e.tangents=this.tangents),this.uvs&&(e.uvs=this.uvs),this.uvs2&&(e.uvs2=this.uvs2),this.uvs3&&(e.uvs3=this.uvs3),this.uvs4&&(e.uvs4=this.uvs4),this.uvs5&&(e.uvs5=this.uvs5),this.uvs6&&(e.uvs6=this.uvs6),this.colors&&(e.colors=this.colors),this.matricesIndices&&(e.matricesIndices=this.matricesIndices,e.matricesIndices._isExpanded=!0),this.matricesWeights&&(e.matricesWeights=this.matricesWeights),this.matricesIndicesExtra&&(e.matricesIndicesExtra=this.matricesIndicesExtra,e.matricesIndicesExtra._isExpanded=!0),this.matricesWeightsExtra&&(e.matricesWeightsExtra=this.matricesWeightsExtra),e.indices=this.indices,e},e.ExtractFromMesh=function(t,n,r){return e._ExtractFrom(t,n,r)},e.ExtractFromGeometry=function(t,n,r){return e._ExtractFrom(t,n,r)},e._ExtractFrom=function(t,n,r){var o=new e;return t.isVerticesDataPresent(i.b.PositionKind)&&(o.positions=t.getVerticesData(i.b.PositionKind,n,r)),t.isVerticesDataPresent(i.b.NormalKind)&&(o.normals=t.getVerticesData(i.b.NormalKind,n,r)),t.isVerticesDataPresent(i.b.TangentKind)&&(o.tangents=t.getVerticesData(i.b.TangentKind,n,r)),t.isVerticesDataPresent(i.b.UVKind)&&(o.uvs=t.getVerticesData(i.b.UVKind,n,r)),t.isVerticesDataPresent(i.b.UV2Kind)&&(o.uvs2=t.getVerticesData(i.b.UV2Kind,n,r)),t.isVerticesDataPresent(i.b.UV3Kind)&&(o.uvs3=t.getVerticesData(i.b.UV3Kind,n,r)),t.isVerticesDataPresent(i.b.UV4Kind)&&(o.uvs4=t.getVerticesData(i.b.UV4Kind,n,r)),t.isVerticesDataPresent(i.b.UV5Kind)&&(o.uvs5=t.getVerticesData(i.b.UV5Kind,n,r)),t.isVerticesDataPresent(i.b.UV6Kind)&&(o.uvs6=t.getVerticesData(i.b.UV6Kind,n,r)),t.isVerticesDataPresent(i.b.ColorKind)&&(o.colors=t.getVerticesData(i.b.ColorKind,n,r)),t.isVerticesDataPresent(i.b.MatricesIndicesKind)&&(o.matricesIndices=t.getVerticesData(i.b.MatricesIndicesKind,n,r)),t.isVerticesDataPresent(i.b.MatricesWeightsKind)&&(o.matricesWeights=t.getVerticesData(i.b.MatricesWeightsKind,n,r)),t.isVerticesDataPresent(i.b.MatricesIndicesExtraKind)&&(o.matricesIndicesExtra=t.getVerticesData(i.b.MatricesIndicesExtraKind,n,r)),t.isVerticesDataPresent(i.b.MatricesWeightsExtraKind)&&(o.matricesWeightsExtra=t.getVerticesData(i.b.MatricesWeightsExtraKind,n,r)),o.indices=t.getIndices(n,r),o},e.CreateRibbon=function(e){throw o.a.WarnImport("ribbonBuilder")},e.CreateBox=function(e){throw o.a.WarnImport("boxBuilder")},e.CreateSphere=function(e){throw o.a.WarnImport("sphereBuilder")},e.CreateCylinder=function(e){throw o.a.WarnImport("cylinderBuilder")},e.CreateTorus=function(e){throw o.a.WarnImport("torusBuilder")},e.CreateLineSystem=function(e){throw o.a.WarnImport("linesBuilder")},e.CreateDashedLines=function(e){throw o.a.WarnImport("linesBuilder")},e.CreateGround=function(e){throw o.a.WarnImport("groundBuilder")},e.CreateTiledGround=function(e){throw o.a.WarnImport("groundBuilder")},e.CreateGroundFromHeightMap=function(e){throw o.a.WarnImport("groundBuilder")},e.CreatePlane=function(e){throw o.a.WarnImport("planeBuilder")},e.CreateDisc=function(e){throw o.a.WarnImport("discBuilder")},e.CreatePolygon=function(e,t,n,r,i,a){throw o.a.WarnImport("polygonBuilder")},e.CreateIcoSphere=function(e){throw o.a.WarnImport("icoSphereBuilder")},e.CreatePolyhedron=function(e){throw o.a.WarnImport("polyhedronBuilder")},e.CreateTorusKnot=function(e){throw o.a.WarnImport("torusKnotBuilder")},e.ComputeNormals=function(e,t,n,i){var o=0,a=0,s=0,u=0,l=0,c=0,h=0,d=0,f=0,p=0,_=0,m=0,g=0,v=0,y=0,b=0,T=0,E=0,x=0,M=0,A=!1,S=!1,C=!1,P=!1,R=1,D=0,O=null;if(i&&(A=!!i.facetNormals,S=!!i.facetPositions,C=!!i.facetPartitioning,R=!0===i.useRightHandedSystem?-1:1,D=i.ratio||0,O=i.distanceTo,P=!!i.depthSort)){void 0===O&&(O=r.x.Zero());var w=i.depthSortedFacets}var L=0,I=0,F=0,N=0;if(C&&i&&i.bbSize){var B=0,k=0,U=0,V=0,G=0,j=0,z=0,Y=0,H=0,W=0,X=0,K=0,Q=0,q=0,Z=0,J=0,$=i.bbSize.x>i.bbSize.y?i.bbSize.x:i.bbSize.y;$=$>i.bbSize.z?$:i.bbSize.z,L=i.subDiv.X*D/i.bbSize.x,I=i.subDiv.Y*D/i.bbSize.y,F=i.subDiv.Z*D/i.bbSize.z,N=i.subDiv.max*i.subDiv.max,i.facetPartitioning.length=0}for(o=0;o<e.length;o++)n[o]=0;var ee=t.length/3|0;for(o=0;o<ee;o++){if(g=1+(m=3*t[3*o]),b=1+(y=3*t[3*o+1]),x=1+(E=3*t[3*o+2]),d=R*((s=e[g]-e[b])*(h=e[M=E+2]-e[T=y+2])-(u=e[v=m+2]-e[T])*(c=e[x]-e[b])),f=R*(u*(l=e[E]-e[y])-(a=e[m]-e[y])*h),p=R*(a*c-s*l),d/=_=0===(_=Math.sqrt(d*d+f*f+p*p))?1:_,f/=_,p/=_,A&&i&&(i.facetNormals[o].x=d,i.facetNormals[o].y=f,i.facetNormals[o].z=p),S&&i&&(i.facetPositions[o].x=(e[m]+e[y]+e[E])/3,i.facetPositions[o].y=(e[g]+e[b]+e[x])/3,i.facetPositions[o].z=(e[v]+e[T]+e[M])/3),C&&i&&(B=Math.floor((i.facetPositions[o].x-i.bInfo.minimum.x*D)*L),k=Math.floor((i.facetPositions[o].y-i.bInfo.minimum.y*D)*I),U=Math.floor((i.facetPositions[o].z-i.bInfo.minimum.z*D)*F),V=Math.floor((e[m]-i.bInfo.minimum.x*D)*L),G=Math.floor((e[g]-i.bInfo.minimum.y*D)*I),j=Math.floor((e[v]-i.bInfo.minimum.z*D)*F),z=Math.floor((e[y]-i.bInfo.minimum.x*D)*L),Y=Math.floor((e[b]-i.bInfo.minimum.y*D)*I),H=Math.floor((e[T]-i.bInfo.minimum.z*D)*F),W=Math.floor((e[E]-i.bInfo.minimum.x*D)*L),X=Math.floor((e[x]-i.bInfo.minimum.y*D)*I),K=Math.floor((e[M]-i.bInfo.minimum.z*D)*F),q=V+i.subDiv.max*G+N*j,Z=z+i.subDiv.max*Y+N*H,J=W+i.subDiv.max*X+N*K,i.facetPartitioning[Q=B+i.subDiv.max*k+N*U]=i.facetPartitioning[Q]?i.facetPartitioning[Q]:new Array,i.facetPartitioning[q]=i.facetPartitioning[q]?i.facetPartitioning[q]:new Array,i.facetPartitioning[Z]=i.facetPartitioning[Z]?i.facetPartitioning[Z]:new Array,i.facetPartitioning[J]=i.facetPartitioning[J]?i.facetPartitioning[J]:new Array,i.facetPartitioning[q].push(o),Z!=q&&i.facetPartitioning[Z].push(o),J!=Z&&J!=q&&i.facetPartitioning[J].push(o),Q!=q&&Q!=Z&&Q!=J&&i.facetPartitioning[Q].push(o)),P&&i&&i.facetPositions){var te=w[o];te.ind=3*o,te.sqDistance=r.x.DistanceSquared(i.facetPositions[o],O)}n[m]+=d,n[g]+=f,n[v]+=p,n[y]+=d,n[b]+=f,n[T]+=p,n[E]+=d,n[x]+=f,n[M]+=p}for(o=0;o<n.length/3;o++)d=n[3*o],f=n[3*o+1],p=n[3*o+2],d/=_=0===(_=Math.sqrt(d*d+f*f+p*p))?1:_,f/=_,p/=_,n[3*o]=d,n[3*o+1]=f,n[3*o+2]=p},e._ComputeSides=function(t,n,i,o,a,s,u){var l,c,h=i.length,d=o.length;switch(t=t||e.DEFAULTSIDE){case e.FRONTSIDE:break;case e.BACKSIDE:var f;for(l=0;l<h;l+=3)f=i[l],i[l]=i[l+2],i[l+2]=f;for(c=0;c<d;c++)o[c]=-o[c];break;case e.DOUBLESIDE:for(var p=n.length,_=p/3,m=0;m<p;m++)n[p+m]=n[m];for(l=0;l<h;l+=3)i[l+h]=i[l+2]+_,i[l+1+h]=i[l+1]+_,i[l+2+h]=i[l]+_;for(c=0;c<d;c++)o[d+c]=-o[c];var g=a.length,v=0;for(v=0;v<g;v++)a[v+g]=a[v];for(s=s||new r.y(0,0,1,1),u=u||new r.y(0,0,1,1),v=0,l=0;l<g/2;l++)a[v]=s.x+(s.z-s.x)*a[v],a[v+1]=s.y+(s.w-s.y)*a[v+1],a[v+g]=u.x+(u.z-u.x)*a[v+g],a[v+g+1]=u.y+(u.w-u.y)*a[v+g+1],v+=2}},e.ImportVertexData=function(t,n){var o=new e,a=t.positions;a&&o.set(a,i.b.PositionKind);var s=t.normals;s&&o.set(s,i.b.NormalKind);var u=t.tangents;u&&o.set(u,i.b.TangentKind);var l=t.uvs;l&&o.set(l,i.b.UVKind);var c=t.uv2s;c&&o.set(c,i.b.UV2Kind);var h=t.uv3s;h&&o.set(h,i.b.UV3Kind);var d=t.uv4s;d&&o.set(d,i.b.UV4Kind);var f=t.uv5s;f&&o.set(f,i.b.UV5Kind);var p=t.uv6s;p&&o.set(p,i.b.UV6Kind);var _=t.colors;_&&o.set(r.f.CheckColors4(_,a.length/3),i.b.ColorKind);var m=t.matricesIndices;m&&o.set(m,i.b.MatricesIndicesKind);var g=t.matricesWeights;g&&o.set(g,i.b.MatricesWeightsKind);var v=t.indices;v&&(o.indices=v),n.setAllVerticesData(o,t.updatable)},e.FRONTSIDE=0,e.BACKSIDE=1,e.DOUBLESIDE=2,e.DEFAULTSIDE=0,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=n(1),i=function(){function e(){}return e.NAME_EFFECTLAYER="EffectLayer",e.NAME_LAYER="Layer",e.NAME_LENSFLARESYSTEM="LensFlareSystem",e.NAME_BOUNDINGBOXRENDERER="BoundingBoxRenderer",e.NAME_PARTICLESYSTEM="ParticleSystem",e.NAME_GAMEPAD="Gamepad",e.NAME_SIMPLIFICATIONQUEUE="SimplificationQueue",e.NAME_GEOMETRYBUFFERRENDERER="GeometryBufferRenderer",e.NAME_DEPTHRENDERER="DepthRenderer",e.NAME_POSTPROCESSRENDERPIPELINEMANAGER="PostProcessRenderPipelineManager",e.NAME_SPRITE="Sprite",e.NAME_OUTLINERENDERER="Outline",e.NAME_PROCEDURALTEXTURE="ProceduralTexture",e.NAME_SHADOWGENERATOR="ShadowGenerator",e.NAME_OCTREE="Octree",e.NAME_PHYSICSENGINE="PhysicsEngine",e.NAME_AUDIO="Audio",e.STEP_ISREADYFORMESH_EFFECTLAYER=0,e.STEP_BEFOREEVALUATEACTIVEMESH_BOUNDINGBOXRENDERER=0,e.STEP_EVALUATESUBMESH_BOUNDINGBOXRENDERER=0,e.STEP_ACTIVEMESH_BOUNDINGBOXRENDERER=0,e.STEP_CAMERADRAWRENDERTARGET_EFFECTLAYER=1,e.STEP_BEFORECAMERADRAW_EFFECTLAYER=0,e.STEP_BEFORECAMERADRAW_LAYER=1,e.STEP_BEFORERENDERTARGETDRAW_LAYER=0,e.STEP_BEFORERENDERINGMESH_OUTLINE=0,e.STEP_AFTERRENDERINGMESH_OUTLINE=0,e.STEP_AFTERRENDERINGGROUPDRAW_EFFECTLAYER_DRAW=0,e.STEP_AFTERRENDERINGGROUPDRAW_BOUNDINGBOXRENDERER=1,e.STEP_BEFORECAMERAUPDATE_SIMPLIFICATIONQUEUE=0,e.STEP_BEFORECAMERAUPDATE_GAMEPAD=1,e.STEP_BEFORECLEAR_PROCEDURALTEXTURE=0,e.STEP_AFTERRENDERTARGETDRAW_LAYER=0,e.STEP_AFTERCAMERADRAW_EFFECTLAYER=0,e.STEP_AFTERCAMERADRAW_LENSFLARESYSTEM=1,e.STEP_AFTERCAMERADRAW_EFFECTLAYER_DRAW=2,e.STEP_AFTERCAMERADRAW_LAYER=3,e.STEP_AFTERRENDER_AUDIO=0,e.STEP_GATHERRENDERTARGETS_SHADOWGENERATOR=0,e.STEP_GATHERRENDERTARGETS_GEOMETRYBUFFERRENDERER=1,e.STEP_GATHERRENDERTARGETS_DEPTHRENDERER=2,e.STEP_GATHERRENDERTARGETS_POSTPROCESSRENDERPIPELINEMANAGER=3,e.STEP_GATHERACTIVECAMERARENDERTARGETS_DEPTHRENDERER=0,e.STEP_POINTERMOVE_SPRITE=0,e.STEP_POINTERDOWN_SPRITE=0,e.STEP_POINTERUP_SPRITE=0,e}(),o=function(e){function t(t){return e.apply(this,t)||this}return r.d(t,e),t.Create=function(){return Object.create(t.prototype)},t.prototype.registerStep=function(e,t,n){var r=0;for(Number;r<this.length&&!(e<this[r].index);r++);this.splice(r,0,{index:e,component:t,action:n.bind(t)})},t.prototype.clear=function(){this.length=0},t}(Array)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(6),i=n(16),o=n(0),a=n(23),s=n(4),u=n(38),l=function(){function e(){}return e.BindEyePosition=function(e,t){if(t._forcedViewPosition)e.setVector3("vEyePosition",t._forcedViewPosition);else{var n=t.activeCamera.globalPosition;n||(n=t.activeCamera.devicePosition),e.setVector3("vEyePosition",t._mirroredCameraPosition?t._mirroredCameraPosition:n)}},e.PrepareDefinesForMergedUV=function(e,t,n){t._needUVs=!0,t[n]=!0,e.getTextureMatrix().isIdentityAs3x2()?(t[n+"DIRECTUV"]=e.coordinatesIndex+1,0===e.coordinatesIndex?t.MAINUV1=!0:t.MAINUV2=!0):t[n+"DIRECTUV"]=0},e.BindTextureMatrix=function(e,t,n){var r=e.getTextureMatrix();r.isIdentityAs3x2()||t.updateMatrix(n+"Matrix",r)},e.PrepareDefinesForMisc=function(e,t,n,r,o,a,s){s._areMiscDirty&&(s.LOGARITHMICDEPTH=n,s.POINTSIZE=r,s.FOG=t.fogEnabled&&e.applyFog&&t.fogMode!==i.a.FOGMODE_NONE&&o,s.NONUNIFORMSCALING=e.nonUniformScaling,s.ALPHATEST=a)},e.PrepareDefinesForFrameBoundValues=function(e,t,n,r,i){void 0===i&&(i=null);var o,a,s,u,l=!1;a=null==i?null!=e.clipPlane2:i,s=null==i?null!=e.clipPlane3:i,u=null==i?null!=e.clipPlane4:i,n.CLIPPLANE!==(o=null==i?null!=e.clipPlane:i)&&(n.CLIPPLANE=o,l=!0),n.CLIPPLANE2!==a&&(n.CLIPPLANE2=a,l=!0),n.CLIPPLANE3!==s&&(n.CLIPPLANE3=s,l=!0),n.CLIPPLANE4!==u&&(n.CLIPPLANE4=u,l=!0),n.DEPTHPREPASS!==!t.getColorWrite()&&(n.DEPTHPREPASS=!n.DEPTHPREPASS,l=!0),n.INSTANCES!==r&&(n.INSTANCES=r,l=!0),l&&n.markAsUnprocessed()},e.PrepareDefinesForAttributes=function(e,t,n,r,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!0),!t._areAttributesDirty&&t._needNormals===t._normals&&t._needUVs===t._uvs)return!1;if(t._normals=t._needNormals,t._uvs=t._needUVs,t.NORMAL=t._needNormals&&e.isVerticesDataPresent(s.b.NormalKind),t._needNormals&&e.isVerticesDataPresent(s.b.TangentKind)&&(t.TANGENT=!0),t._needUVs?(t.UV1=e.isVerticesDataPresent(s.b.UVKind),t.UV2=e.isVerticesDataPresent(s.b.UV2Kind)):(t.UV1=!1,t.UV2=!1),n){var a=e.useVertexColors&&e.isVerticesDataPresent(s.b.ColorKind);t.VERTEXCOLOR=a,t.VERTEXALPHA=e.hasVertexAlpha&&a&&o}if(r)if(e.useBones&&e.computeBonesUsingShaders&&e.skeleton){t.NUM_BONE_INFLUENCERS=e.numBoneInfluencers;var u=void 0!==t.BONETEXTURE;e.skeleton.isUsingTextureForMatrices&&u?t.BONETEXTURE=!0:(t.BonesPerMesh=e.skeleton.bones.length+1,t.BONETEXTURE=!u&&void 0)}else t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0;if(i){var l=e.morphTargetManager;l?(t.MORPHTARGETS_TANGENT=l.supportsTangents&&t.TANGENT,t.MORPHTARGETS_NORMAL=l.supportsNormals&&t.NORMAL,t.MORPHTARGETS=l.numInfluencers>0,t.NUM_MORPH_INFLUENCERS=l.numInfluencers):(t.MORPHTARGETS_TANGENT=!1,t.MORPHTARGETS_NORMAL=!1,t.MORPHTARGETS=!1,t.NUM_MORPH_INFLUENCERS=0)}return!0},e.PrepareDefinesForMultiview=function(e,t){if(e.activeCamera){var n=t.MULTIVIEW;t.MULTIVIEW=null!==e.activeCamera.outputRenderTarget&&e.activeCamera.outputRenderTarget.getViewCount()>1,t.MULTIVIEW!=n&&t.markAsUnprocessed()}},e.PrepareDefinesForLights=function(e,t,n,r,i,o){if(void 0===i&&(i=4),void 0===o&&(o=!1),!n._areLightsDirty)return n._needNormals;var a=0,s=!1,l=!1,c=!1,h=!1,d=!1;if(e.lightsEnabled&&!o)for(var f=0,p=t.lightSources;f<p.length;f++){var _=p[f];switch(s=!0,void 0===n["LIGHT"+a]&&(l=!0),n["LIGHT"+a]=!0,n["SPOTLIGHT"+a]=!1,n["HEMILIGHT"+a]=!1,n["POINTLIGHT"+a]=!1,n["DIRLIGHT"+a]=!1,_.prepareLightSpecificDefines(n,a),n["LIGHT_FALLOFF_PHYSICAL"+a]=!1,n["LIGHT_FALLOFF_GLTF"+a]=!1,n["LIGHT_FALLOFF_STANDARD"+a]=!1,_.falloffType){case u.a.FALLOFF_GLTF:n["LIGHT_FALLOFF_GLTF"+a]=!0;break;case u.a.FALLOFF_PHYSICAL:n["LIGHT_FALLOFF_PHYSICAL"+a]=!0;break;case u.a.FALLOFF_STANDARD:n["LIGHT_FALLOFF_STANDARD"+a]=!0}if(r&&!_.specular.equalsFloats(0,0,0)&&(d=!0),n["SHADOW"+a]=!1,n["SHADOWPCF"+a]=!1,n["SHADOWPCSS"+a]=!1,n["SHADOWPOISSON"+a]=!1,n["SHADOWESM"+a]=!1,n["SHADOWCUBE"+a]=!1,n["SHADOWLOWQUALITY"+a]=!1,n["SHADOWMEDIUMQUALITY"+a]=!1,t&&t.receiveShadows&&e.shadowsEnabled&&_.shadowEnabled){var m=_.getShadowGenerator();if(m){var g=m.getShadowMap();g&&g.renderList&&g.renderList.length>0&&(h=!0,m.prepareDefines(n,a))}}if(_.lightmapMode!=u.a.LIGHTMAP_DEFAULT?(c=!0,n["LIGHTMAPEXCLUDED"+a]=!0,n["LIGHTMAPNOSPECULAR"+a]=_.lightmapMode==u.a.LIGHTMAP_SHADOWSONLY):(n["LIGHTMAPEXCLUDED"+a]=!1,n["LIGHTMAPNOSPECULAR"+a]=!1),++a===i)break}n.SPECULARTERM=d,n.SHADOWS=h;for(var v=a;v<i;v++)void 0!==n["LIGHT"+v]&&(n["LIGHT"+v]=!1,n["HEMILIGHT"+v]=!1,n["POINTLIGHT"+v]=!1,n["DIRLIGHT"+v]=!1,n["SPOTLIGHT"+v]=!1,n["SHADOW"+v]=!1,n["SHADOWPCF"+v]=!1,n["SHADOWPCSS"+v]=!1,n["SHADOWPOISSON"+v]=!1,n["SHADOWESM"+v]=!1,n["SHADOWCUBE"+v]=!1,n["SHADOWLOWQUALITY"+v]=!1,n["SHADOWMEDIUMQUALITY"+v]=!1);var y=e.getEngine().getCaps();return void 0===n.SHADOWFLOAT&&(l=!0),n.SHADOWFLOAT=h&&(y.textureFloatRender&&y.textureFloatLinearFiltering||y.textureHalfFloatRender&&y.textureHalfFloatLinearFiltering),n.LIGHTMAPEXCLUDED=c,l&&n.rebuild(),s},e.PrepareUniformsAndSamplersList=function(e,t,n,r){var i;void 0===r&&(r=4);var o=null;e.uniformsNames?(i=e.uniformsNames,o=e.uniformBuffersNames,t=e.samplers,n=e.defines,r=e.maxSimultaneousLights):(i=e,t||(t=[]));for(var a=0;a<r&&n["LIGHT"+a];a++)i.push("vLightData"+a,"vLightDiffuse"+a,"vLightSpecular"+a,"vLightDirection"+a,"vLightFalloff"+a,"vLightGround"+a,"lightMatrix"+a,"shadowsInfo"+a,"depthValues"+a),o&&o.push("Light"+a),t.push("shadowSampler"+a),t.push("depthSampler"+a),n["PROJECTEDLIGHTTEXTURE"+a]&&(t.push("projectionLightSampler"+a),i.push("textureProjectionMatrix"+a));n.NUM_MORPH_INFLUENCERS&&i.push("morphTargetInfluences")},e.HandleFallbacksForShadows=function(e,t,n,r){void 0===n&&(n=4),void 0===r&&(r=0);for(var i=0,o=0;o<n&&e["LIGHT"+o];o++)o>0&&t.addFallback(i=r+o,"LIGHT"+o),e.SHADOWS||(e["SHADOW"+o]&&t.addFallback(r,"SHADOW"+o),e["SHADOWPCF"+o]&&t.addFallback(r,"SHADOWPCF"+o),e["SHADOWPCSS"+o]&&t.addFallback(r,"SHADOWPCSS"+o),e["SHADOWPOISSON"+o]&&t.addFallback(r,"SHADOWPOISSON"+o),e["SHADOWESM"+o]&&t.addFallback(r,"SHADOWESM"+o));return i++},e.PrepareAttributesForMorphTargets=function(e,t,n){var i=n.NUM_MORPH_INFLUENCERS;if(i>0&&a.a.LastCreatedEngine)for(var o=a.a.LastCreatedEngine.getCaps().maxVertexAttribs,u=t.morphTargetManager,l=u&&u.supportsNormals&&n.NORMAL,c=u&&u.supportsTangents&&n.TANGENT,h=0;h<i;h++)e.push(s.b.PositionKind+h),l&&e.push(s.b.NormalKind+h),c&&e.push(s.b.TangentKind+h),e.length>o&&r.a.Error("Cannot add more vertex attributes for mesh "+t.name)},e.PrepareAttributesForBones=function(e,t,n,r){n.NUM_BONE_INFLUENCERS>0&&(r.addCPUSkinningFallback(0,t),e.push(s.b.MatricesIndicesKind),e.push(s.b.MatricesWeightsKind),n.NUM_BONE_INFLUENCERS>4&&(e.push(s.b.MatricesIndicesExtraKind),e.push(s.b.MatricesWeightsExtraKind)))},e.PrepareAttributesForInstances=function(e,t){t.INSTANCES&&(e.push("world0"),e.push("world1"),e.push("world2"),e.push("world3"))},e.BindLightShadow=function(e,t,n,r){if(e.shadowEnabled&&t.receiveShadows){var i=e.getShadowGenerator();i&&i.bindShadowLight(n,r)}},e.BindLightProperties=function(e,t,n){e.transferToEffect(t,n+"")},e.BindLights=function(t,n,r,i,a,s){void 0===a&&(a=4),void 0===s&&(s=!1);for(var u=Math.min(n.lightSources.length,a),l=0;l<u;l++){var c=n.lightSources[l],h=l.toString(),d=c.getScaledIntensity();c._uniformBuffer.bindToEffect(r,"Light"+l),e.BindLightProperties(c,r,l),c.diffuse.scaleToRef(d,o.t.Color3[0]),c._uniformBuffer.updateColor4("vLightDiffuse",o.t.Color3[0],s?c.radius:c.range,h),i.SPECULARTERM&&(c.specular.scaleToRef(d,o.t.Color3[1]),c._uniformBuffer.updateColor3("vLightSpecular",o.t.Color3[1],h)),t.shadowsEnabled&&this.BindLightShadow(c,n,h,r),c._uniformBuffer.update()}},e.BindFogParameters=function(e,t,n,r){void 0===r&&(r=!1),e.fogEnabled&&t.applyFog&&e.fogMode!==i.a.FOGMODE_NONE&&(n.setFloat4("vFogInfos",e.fogMode,e.fogStart,e.fogEnd,e.fogDensity),r?(e.fogColor.toLinearSpaceToRef(this._tempFogColor),n.setColor3("vFogColor",this._tempFogColor)):n.setColor3("vFogColor",e.fogColor))},e.BindBonesParameters=function(e,t){if(t&&e&&(e.computeBonesUsingShaders&&t._bonesComputationForcedToCPU&&(e.computeBonesUsingShaders=!1),e.useBones&&e.computeBonesUsingShaders&&e.skeleton)){var n=e.skeleton;if(n.isUsingTextureForMatrices&&t.getUniformIndex("boneTextureWidth")>-1){var r=n.getTransformMatrixTexture();t.setTexture("boneSampler",r),t.setFloat("boneTextureWidth",4*(n.bones.length+1))}else{var i=n.getTransformMatrices(e);i&&t.setMatrices("mBones",i)}}},e.BindMorphTargetParameters=function(e,t){var n=e.morphTargetManager;e&&n&&t.setFloatArray("morphTargetInfluences",n.influences)},e.BindLogDepth=function(e,t,n){e.LOGARITHMICDEPTH&&t.setFloat("logarithmicDepthConstant",2/(Math.log(n.activeCamera.maxZ+1)/Math.LN2))},e.BindClipPlane=function(e,t){if(t.clipPlane){var n=t.clipPlane;e.setFloat4("vClipPlane",n.normal.x,n.normal.y,n.normal.z,n.d)}t.clipPlane2&&e.setFloat4("vClipPlane2",(n=t.clipPlane2).normal.x,n.normal.y,n.normal.z,n.d),t.clipPlane3&&e.setFloat4("vClipPlane3",(n=t.clipPlane3).normal.x,n.normal.y,n.normal.z,n.d),t.clipPlane4&&e.setFloat4("vClipPlane4",(n=t.clipPlane4).normal.x,n.normal.y,n.normal.z,n.d)},e._tempFogColor=o.e.Black(),e}()},function(e,t,n){"use strict";var r=n(1),i=n(9),o=n(47),a=n(8),s=n(28),u=n(61),l=n(29),c=n(0),h=n(42),d=n(24),f=n(21),p=n(30),_=n(31),m=n(63),g=n(38),v=n(50),y=n(36),b=n(83),T=n(91),E=n(14),x=n(3),M=n(35),A=n(6),S=n(23),C=n(19),P=n(17),R=n(79),D=n(51),O=function(){function e(){this._singleClick=!1,this._doubleClick=!1,this._hasSwiped=!1,this._ignore=!1}return Object.defineProperty(e.prototype,"singleClick",{get:function(){return this._singleClick},set:function(e){this._singleClick=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doubleClick",{get:function(){return this._doubleClick},set:function(e){this._doubleClick=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasSwiped",{get:function(){return this._hasSwiped},set:function(e){this._hasSwiped=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignore",{get:function(){return this._ignore},set:function(e){this._ignore=e},enumerable:!0,configurable:!0}),e}(),w=function(){function e(e){this._wheelEventName="",this._meshPickProceed=!1,this._currentPickResult=null,this._previousPickResult=null,this._totalPointersPressed=0,this._doubleClickOccured=!1,this._pointerX=0,this._pointerY=0,this._startingPointerPosition=new c.w(0,0),this._previousStartingPointerPosition=new c.w(0,0),this._startingPointerTime=0,this._previousStartingPointerTime=0,this._pointerCaptures={},this._scene=e}return Object.defineProperty(e.prototype,"meshUnderPointer",{get:function(){return this._pointerOverMesh},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unTranslatedPointer",{get:function(){return new c.w(this._unTranslatedPointerX,this._unTranslatedPointerY)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerX",{get:function(){return this._pointerX},set:function(e){this._pointerX=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointerY",{get:function(){return this._pointerY},set:function(e){this._pointerY=e},enumerable:!0,configurable:!0}),e.prototype._updatePointerPosition=function(e){var t=this._scene.getEngine().getRenderingCanvasClientRect();t&&(this._pointerX=e.clientX-t.left,this._pointerY=e.clientY-t.top,this._unTranslatedPointerX=this._pointerX,this._unTranslatedPointerY=this._pointerY)},e.prototype._processPointerMove=function(e,t){var n=this._scene,r=n.getEngine().getRenderingCanvas();if(r){r.tabIndex=1,r.style.cursor=n.defaultCursor;var i=!!(e&&e.hit&&e.pickedMesh);i?(n.setPointerOverMesh(e.pickedMesh),this._pointerOverMesh&&this._pointerOverMesh.actionManager&&this._pointerOverMesh.actionManager.hasPointerTriggers&&(r.style.cursor=this._pointerOverMesh.actionManager.hoverCursor?this._pointerOverMesh.actionManager.hoverCursor:n.hoverCursor)):n.setPointerOverMesh(null);for(var o=0,a=n._pointerMoveStage;o<a.length;o++)e=a[o].action(this._unTranslatedPointerX,this._unTranslatedPointerY,e,i,r);if(e){var s=t.type===this._wheelEventName?P.a.POINTERWHEEL:P.a.POINTERMOVE;if(n.onPointerMove&&n.onPointerMove(t,e,s),n.onPointerObservable.hasObservers()){var u=new P.b(s,t,e);this._setRayOnPointerInfo(u),n.onPointerObservable.notifyObservers(u,s)}}}},e.prototype._setRayOnPointerInfo=function(e){var t=this._scene;e.pickInfo&&!e.pickInfo._pickingUnavailable&&(e.pickInfo.ray||(e.pickInfo.ray=t.createPickingRay(e.event.offsetX,e.event.offsetY,c.j.Identity(),t.activeCamera)))},e.prototype._checkPrePointerObservable=function(e,t,n){var r=this._scene,i=new P.d(n,t,this._unTranslatedPointerX,this._unTranslatedPointerY);return e&&(i.ray=e.ray),r.onPrePointerObservable.notifyObservers(i,n),!!i.skipOnPointerObservable},e.prototype.simulatePointerMove=function(e,t){var n=new PointerEvent("pointermove",t);this._checkPrePointerObservable(e,n,P.a.POINTERMOVE)||this._processPointerMove(e,n)},e.prototype.simulatePointerDown=function(e,t){var n=new PointerEvent("pointerdown",t);this._checkPrePointerObservable(e,n,P.a.POINTERDOWN)||this._processPointerDown(e,n)},e.prototype._processPointerDown=function(t,n){var r=this,i=this._scene;if(t&&t.hit&&t.pickedMesh){this._pickedDownMesh=t.pickedMesh;var o=t.pickedMesh.actionManager;if(o){if(o.hasPickTriggers)switch(o.processTrigger(x.a.ACTION_OnPickDownTrigger,y.a.CreateNew(t.pickedMesh,n)),n.button){case 0:o.processTrigger(x.a.ACTION_OnLeftPickTrigger,y.a.CreateNew(t.pickedMesh,n));break;case 1:o.processTrigger(x.a.ACTION_OnCenterPickTrigger,y.a.CreateNew(t.pickedMesh,n));break;case 2:o.processTrigger(x.a.ACTION_OnRightPickTrigger,y.a.CreateNew(t.pickedMesh,n))}o.hasSpecificTrigger(x.a.ACTION_OnLongPressTrigger)&&window.setTimeout(function(){var t=i.pick(r._unTranslatedPointerX,r._unTranslatedPointerY,function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.actionManager&&e.actionManager.hasSpecificTrigger(x.a.ACTION_OnLongPressTrigger)&&e==r._pickedDownMesh},!1,i.cameraToUseForPointers);t&&t.hit&&t.pickedMesh&&o&&0!==r._totalPointersPressed&&Date.now()-r._startingPointerTime>e.LongPressDelay&&!r._isPointerSwiping()&&(r._startingPointerTime=0,o.processTrigger(x.a.ACTION_OnLongPressTrigger,y.a.CreateNew(t.pickedMesh,n)))},e.LongPressDelay)}}else for(var a=0,s=i._pointerDownStage;a<s.length;a++)t=s[a].action(this._unTranslatedPointerX,this._unTranslatedPointerY,t,n);if(t){var u=P.a.POINTERDOWN;if(i.onPointerDown&&i.onPointerDown(n,t,u),i.onPointerObservable.hasObservers()){var l=new P.b(u,n,t);this._setRayOnPointerInfo(l),i.onPointerObservable.notifyObservers(l,u)}}},e.prototype._isPointerSwiping=function(){return Math.abs(this._startingPointerPosition.x-this._pointerX)>e.DragMovementThreshold||Math.abs(this._startingPointerPosition.y-this._pointerY)>e.DragMovementThreshold},e.prototype.simulatePointerUp=function(e,t,n){var r=new PointerEvent("pointerup",t),i=new O;n?i.doubleClick=!0:i.singleClick=!0,this._checkPrePointerObservable(e,r,P.a.POINTERUP)||this._processPointerUp(e,r,i)},e.prototype._processPointerUp=function(e,t,n){var r=this._scene;if(e&&e&&e.pickedMesh){if(this._pickedUpMesh=e.pickedMesh,this._pickedDownMesh===this._pickedUpMesh&&(r.onPointerPick&&r.onPointerPick(t,e),n.singleClick&&!n.ignore&&r.onPointerObservable.hasObservers())){var i=P.a.POINTERPICK,o=new P.b(i,t,e);this._setRayOnPointerInfo(o),r.onPointerObservable.notifyObservers(o,i)}var a=e.pickedMesh._getActionManagerForTrigger();if(a&&!n.ignore){a.processTrigger(x.a.ACTION_OnPickUpTrigger,y.a.CreateNew(e.pickedMesh,t)),!n.hasSwiped&&n.singleClick&&a.processTrigger(x.a.ACTION_OnPickTrigger,y.a.CreateNew(e.pickedMesh,t));var s=e.pickedMesh._getActionManagerForTrigger(x.a.ACTION_OnDoublePickTrigger);n.doubleClick&&s&&s.processTrigger(x.a.ACTION_OnDoublePickTrigger,y.a.CreateNew(e.pickedMesh,t))}}else if(!n.ignore)for(var u=0,l=r._pointerUpStage;u<l.length;u++)e=l[u].action(this._unTranslatedPointerX,this._unTranslatedPointerY,e,t);if(this._pickedDownMesh&&this._pickedDownMesh!==this._pickedUpMesh){var c=this._pickedDownMesh._getActionManagerForTrigger(x.a.ACTION_OnPickOutTrigger);c&&c.processTrigger(x.a.ACTION_OnPickOutTrigger,y.a.CreateNew(this._pickedDownMesh,t))}var h=0;r.onPointerObservable.hasObservers()&&(n.ignore||n.hasSwiped||(n.singleClick&&r.onPointerObservable.hasSpecificMask(P.a.POINTERTAP)?h=P.a.POINTERTAP:n.doubleClick&&r.onPointerObservable.hasSpecificMask(P.a.POINTERDOUBLETAP)&&(h=P.a.POINTERDOUBLETAP),!h)||(o=new P.b(h,t,e),this._setRayOnPointerInfo(o),r.onPointerObservable.notifyObservers(o,h)),n.ignore||(o=new P.b(h=P.a.POINTERUP,t,e),this._setRayOnPointerInfo(o),r.onPointerObservable.notifyObservers(o,h))),r.onPointerUp&&!n.ignore&&r.onPointerUp(t,e,h)},e.prototype.isPointerCaptured=function(e){return void 0===e&&(e=0),this._pointerCaptures[e]},e.prototype.attachControl=function(t,n,r){var o=this;void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===r&&(r=!0);var a=this._scene,s=a.getEngine().getRenderingCanvas();if(s){var u=a.getEngine();this._initActionManager=function(e,t){if(!o._meshPickProceed){var n=a.pick(o._unTranslatedPointerX,o._unTranslatedPointerY,a.pointerDownPredicate,!1,a.cameraToUseForPointers);o._currentPickResult=n,n&&(e=n.hit&&n.pickedMesh?n.pickedMesh._getActionManagerForTrigger():null),o._meshPickProceed=!0}return e},this._delayedSimpleClick=function(t,n,r){(Date.now()-o._previousStartingPointerTime>e.DoubleClickDelay&&!o._doubleClickOccured||t!==o._previousButtonPressed)&&(o._doubleClickOccured=!1,n.singleClick=!0,n.ignore=!1,r(n,o._currentPickResult))},this._initClickEvent=function(t,n,r,i){var a=new O;o._currentPickResult=null;var s=null,u=t.hasSpecificMask(P.a.POINTERPICK)||n.hasSpecificMask(P.a.POINTERPICK)||t.hasSpecificMask(P.a.POINTERTAP)||n.hasSpecificMask(P.a.POINTERTAP)||t.hasSpecificMask(P.a.POINTERDOUBLETAP)||n.hasSpecificMask(P.a.POINTERDOUBLETAP);!u&&R.a&&(s=o._initActionManager(s,a))&&(u=s.hasPickTriggers);var l=!1;if(u){var c=r.button;if(a.hasSwiped=o._isPointerSwiping(),!a.hasSwiped){var h=!e.ExclusiveDoubleClickMode;h||(h=!t.hasSpecificMask(P.a.POINTERDOUBLETAP)&&!n.hasSpecificMask(P.a.POINTERDOUBLETAP))&&!R.a.HasSpecificTrigger(x.a.ACTION_OnDoublePickTrigger)&&(s=o._initActionManager(s,a))&&(h=!s.hasSpecificTrigger(x.a.ACTION_OnDoublePickTrigger)),h?(Date.now()-o._previousStartingPointerTime>e.DoubleClickDelay||c!==o._previousButtonPressed)&&(a.singleClick=!0,i(a,o._currentPickResult),l=!0):(o._previousDelayedSimpleClickTimeout=o._delayedSimpleClickTimeout,o._delayedSimpleClickTimeout=window.setTimeout(o._delayedSimpleClick.bind(o,c,a,i),e.DoubleClickDelay));var d=t.hasSpecificMask(P.a.POINTERDOUBLETAP)||n.hasSpecificMask(P.a.POINTERDOUBLETAP);!d&&R.a.HasSpecificTrigger(x.a.ACTION_OnDoublePickTrigger)&&(s=o._initActionManager(s,a))&&(d=s.hasSpecificTrigger(x.a.ACTION_OnDoublePickTrigger)),d&&(c===o._previousButtonPressed&&Date.now()-o._previousStartingPointerTime<e.DoubleClickDelay&&!o._doubleClickOccured?(a.hasSwiped||o._isPointerSwiping()?(o._doubleClickOccured=!1,o._previousStartingPointerTime=o._startingPointerTime,o._previousStartingPointerPosition.x=o._startingPointerPosition.x,o._previousStartingPointerPosition.y=o._startingPointerPosition.y,o._previousButtonPressed=c,e.ExclusiveDoubleClickMode?(o._previousDelayedSimpleClickTimeout&&clearTimeout(o._previousDelayedSimpleClickTimeout),o._previousDelayedSimpleClickTimeout=o._delayedSimpleClickTimeout,i(a,o._previousPickResult)):i(a,o._currentPickResult)):(o._previousStartingPointerTime=0,o._doubleClickOccured=!0,a.doubleClick=!0,a.ignore=!1,e.ExclusiveDoubleClickMode&&o._previousDelayedSimpleClickTimeout&&clearTimeout(o._previousDelayedSimpleClickTimeout),o._previousDelayedSimpleClickTimeout=o._delayedSimpleClickTimeout,i(a,o._currentPickResult)),l=!0):(o._doubleClickOccured=!1,o._previousStartingPointerTime=o._startingPointerTime,o._previousStartingPointerPosition.x=o._startingPointerPosition.x,o._previousStartingPointerPosition.y=o._startingPointerPosition.y,o._previousButtonPressed=c))}}l||i(a,o._currentPickResult)},this._onPointerMove=function(e){if(o._updatePointerPosition(e),!o._checkPrePointerObservable(null,e,e.type===o._wheelEventName?P.a.POINTERWHEEL:P.a.POINTERMOVE)&&(a.cameraToUseForPointers||a.activeCamera)){a.pointerMovePredicate||(a.pointerMovePredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()&&(e.enablePointerMoveEvents||a.constantlyUpdateMeshUnderPointer||null!=e.actionManager)&&(!a.cameraToUseForPointers||0!=(a.cameraToUseForPointers.layerMask&e.layerMask))});var t=a.pick(o._unTranslatedPointerX,o._unTranslatedPointerY,a.pointerMovePredicate,!1,a.cameraToUseForPointers);o._processPointerMove(t,e)}},this._onPointerDown=function(e){if(o._totalPointersPressed++,o._pickedDownMesh=null,o._meshPickProceed=!1,o._updatePointerPosition(e),a.preventDefaultOnPointerDown&&s&&(e.preventDefault(),s.focus()),o._startingPointerPosition.x=o._pointerX,o._startingPointerPosition.y=o._pointerY,o._startingPointerTime=Date.now(),!o._checkPrePointerObservable(null,e,P.a.POINTERDOWN)&&(a.cameraToUseForPointers||a.activeCamera)){o._pointerCaptures[e.pointerId]=!0,a.pointerDownPredicate||(a.pointerDownPredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()&&(!a.cameraToUseForPointers||0!=(a.cameraToUseForPointers.layerMask&e.layerMask))}),o._pickedDownMesh=null;var t=a.pick(o._unTranslatedPointerX,o._unTranslatedPointerY,a.pointerDownPredicate,!1,a.cameraToUseForPointers);o._processPointerDown(t,e)}},this._onPointerUp=function(e){0!==o._totalPointersPressed&&(o._totalPointersPressed--,o._pickedUpMesh=null,o._meshPickProceed=!1,o._updatePointerPosition(e),a.preventDefaultOnPointerUp&&s&&(e.preventDefault(),s.focus()),o._initClickEvent(a.onPrePointerObservable,a.onPointerObservable,e,function(t,n){if(a.onPrePointerObservable.hasObservers()&&!t.ignore){if(!t.hasSwiped){if(t.singleClick&&a.onPrePointerObservable.hasSpecificMask(P.a.POINTERTAP)&&o._checkPrePointerObservable(null,e,P.a.POINTERTAP))return;if(t.doubleClick&&a.onPrePointerObservable.hasSpecificMask(P.a.POINTERDOUBLETAP)&&o._checkPrePointerObservable(null,e,P.a.POINTERDOUBLETAP))return}if(o._checkPrePointerObservable(null,e,P.a.POINTERUP))return}o._pointerCaptures[e.pointerId]&&(o._pointerCaptures[e.pointerId]=!1,(a.cameraToUseForPointers||a.activeCamera)&&(a.pointerUpPredicate||(a.pointerUpPredicate=function(e){return e.isPickable&&e.isVisible&&e.isReady()&&e.isEnabled()&&(!a.cameraToUseForPointers||0!=(a.cameraToUseForPointers.layerMask&e.layerMask))}),!o._meshPickProceed&&(R.a&&R.a.HasTriggers||a.onPointerObservable.hasObservers())&&o._initActionManager(null,t),n||(n=o._currentPickResult),o._processPointerUp(n,e,t),o._previousPickResult=o._currentPickResult))}))},this._onKeyDown=function(e){var t=D.a.KEYDOWN;if(a.onPreKeyboardObservable.hasObservers()){var n=new D.c(t,e);if(a.onPreKeyboardObservable.notifyObservers(n,t),n.skipOnPointerObservable)return}a.onKeyboardObservable.hasObservers()&&(n=new D.b(t,e),a.onKeyboardObservable.notifyObservers(n,t)),a.actionManager&&a.actionManager.processTrigger(x.a.ACTION_OnKeyDownTrigger,y.a.CreateNewFromScene(a,e))},this._onKeyUp=function(e){var t=D.a.KEYUP;if(a.onPreKeyboardObservable.hasObservers()){var n=new D.c(t,e);if(a.onPreKeyboardObservable.notifyObservers(n,t),n.skipOnPointerObservable)return}a.onKeyboardObservable.hasObservers()&&(n=new D.b(t,e),a.onKeyboardObservable.notifyObservers(n,t)),a.actionManager&&a.actionManager.processTrigger(x.a.ACTION_OnKeyUpTrigger,y.a.CreateNewFromScene(a,e))},this._onCanvasFocusObserver=u.onCanvasFocusObservable.add(function(){s&&(s.addEventListener("keydown",o._onKeyDown,!1),s.addEventListener("keyup",o._onKeyUp,!1))}),this._onCanvasBlurObserver=u.onCanvasBlurObservable.add(function(){s&&(s.removeEventListener("keydown",o._onKeyDown),s.removeEventListener("keyup",o._onKeyUp))});var l=i.h.GetPointerPrefix();r&&(s.addEventListener(l+"move",this._onPointerMove,!1),this._wheelEventName="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",s.addEventListener(this._wheelEventName,this._onPointerMove,!1)),n&&s.addEventListener(l+"down",this._onPointerDown,!1),t&&window.addEventListener(l+"up",this._onPointerUp,!1)}},e.prototype.detachControl=function(){var e=i.h.GetPointerPrefix(),t=this._scene.getEngine().getRenderingCanvas(),n=this._scene.getEngine();t&&(t.removeEventListener(e+"move",this._onPointerMove),t.removeEventListener(e+"down",this._onPointerDown),window.removeEventListener(e+"up",this._onPointerUp),this._onCanvasBlurObserver&&n.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onCanvasFocusObserver&&n.onCanvasFocusObservable.remove(this._onCanvasFocusObserver),t.removeEventListener("keydown",this._onKeyDown),t.removeEventListener("keyup",this._onKeyUp),t.style.cursor=this._scene.defaultCursor)},e.prototype.setPointerOverMesh=function(e){var t;this._pointerOverMesh!==e&&(this._pointerOverMesh&&(t=this._pointerOverMesh._getActionManagerForTrigger(x.a.ACTION_OnPointerOutTrigger))&&t.processTrigger(x.a.ACTION_OnPointerOutTrigger,y.a.CreateNew(this._pointerOverMesh)),this._pointerOverMesh=e,this._pointerOverMesh&&(t=this._pointerOverMesh._getActionManagerForTrigger(x.a.ACTION_OnPointerOverTrigger))&&t.processTrigger(x.a.ACTION_OnPointerOverTrigger,y.a.CreateNew(this._pointerOverMesh)))},e.prototype.getPointerOverMesh=function(){return this._pointerOverMesh},e.DragMovementThreshold=10,e.LongPressDelay=500,e.DoubleClickDelay=300,e.ExclusiveDoubleClickMode=!1,e}();n.d(t,"a",function(){return L});var L=function(e){function t(n,r){var o=e.call(this)||this;return o._inputManager=new w(o),o.cameraToUseForPointers=null,o._isScene=!0,o.autoClear=!0,o.autoClearDepthAndStencil=!0,o.clearColor=new c.f(.2,.2,.3,1),o.ambientColor=new c.e(0,0,0),o._forceWireframe=!1,o._forcePointsCloud=!1,o.animationsEnabled=!0,o._animationPropertiesOverride=null,o.useConstantAnimationDeltaTime=!1,o.constantlyUpdateMeshUnderPointer=!1,o.hoverCursor="pointer",o.defaultCursor="",o.preventDefaultOnPointerDown=!0,o.preventDefaultOnPointerUp=!0,o.metadata=null,o.reservedDataStore=null,o.disableOfflineSupportExceptionRules=new Array,o.onDisposeObservable=new a.c,o._onDisposeObserver=null,o.onBeforeRenderObservable=new a.c,o._onBeforeRenderObserver=null,o.onAfterRenderObservable=new a.c,o._onAfterRenderObserver=null,o.onBeforeAnimationsObservable=new a.c,o.onAfterAnimationsObservable=new a.c,o.onBeforeDrawPhaseObservable=new a.c,o.onAfterDrawPhaseObservable=new a.c,o.onReadyObservable=new a.c,o.onBeforeCameraRenderObservable=new a.c,o._onBeforeCameraRenderObserver=null,o.onAfterCameraRenderObservable=new a.c,o._onAfterCameraRenderObserver=null,o.onBeforeActiveMeshesEvaluationObservable=new a.c,o.onAfterActiveMeshesEvaluationObservable=new a.c,o.onBeforeParticlesRenderingObservable=new a.c,o.onAfterParticlesRenderingObservable=new a.c,o.onDataLoadedObservable=new a.c,o.onNewCameraAddedObservable=new a.c,o.onCameraRemovedObservable=new a.c,o.onNewLightAddedObservable=new a.c,o.onLightRemovedObservable=new a.c,o.onNewGeometryAddedObservable=new a.c,o.onGeometryRemovedObservable=new a.c,o.onNewTransformNodeAddedObservable=new a.c,o.onTransformNodeRemovedObservable=new a.c,o.onNewMeshAddedObservable=new a.c,o.onMeshRemovedObservable=new a.c,o.onNewSkeletonAddedObservable=new a.c,o.onSkeletonRemovedObservable=new a.c,o.onNewMaterialAddedObservable=new a.c,o.onMaterialRemovedObservable=new a.c,o.onNewTextureAddedObservable=new a.c,o.onTextureRemovedObservable=new a.c,o.onBeforeRenderTargetsRenderObservable=new a.c,o.onAfterRenderTargetsRenderObservable=new a.c,o.onBeforeStepObservable=new a.c,o.onAfterStepObservable=new a.c,o.onActiveCameraChanged=new a.c,o.onBeforeRenderingGroupObservable=new a.c,o.onAfterRenderingGroupObservable=new a.c,o.onMeshImportedObservable=new a.c,o._registeredForLateAnimationBindings=new s.b(256),o.onPrePointerObservable=new a.c,o.onPointerObservable=new a.c,o.onPreKeyboardObservable=new a.c,o.onKeyboardObservable=new a.c,o._useRightHandedSystem=!1,o._timeAccumulator=0,o._currentStepId=0,o._currentInternalStep=0,o._fogEnabled=!0,o._fogMode=t.FOGMODE_NONE,o.fogColor=new c.e(.2,.2,.3),o.fogDensity=.1,o.fogStart=0,o.fogEnd=1e3,o._shadowsEnabled=!0,o._lightsEnabled=!0,o.activeCameras=new Array,o._texturesEnabled=!0,o.particlesEnabled=!0,o.spritesEnabled=!0,o._skeletonsEnabled=!0,o.lensFlaresEnabled=!0,o.collisionsEnabled=!0,o.gravity=new c.x(0,-9.807,0),o.postProcessesEnabled=!0,o.postProcesses=new Array,o.renderTargetsEnabled=!0,o.dumpNextRenderTargets=!1,o.customRenderTargets=new Array,o.importedMeshesFiles=new Array,o.probesEnabled=!0,o._meshesForIntersections=new s.b(256),o.proceduralTexturesEnabled=!0,o._totalVertices=new i.f,o._activeIndices=new i.f,o._activeParticles=new i.f,o._activeBones=new i.f,o._animationTime=0,o.animationTimeScale=1,o._renderId=0,o._frameId=0,o._executeWhenReadyTimeoutId=-1,o._intermediateRendering=!1,o._viewUpdateFlag=-1,o._projectionUpdateFlag=-1,o._toBeDisposed=new Array(256),o._activeRequests=new Array,o._pendingData=new Array,o._isDisposed=!1,o.dispatchAllSubMeshesOfActiveMeshes=!1,o._activeMeshes=new s.a(256),o._processedMaterials=new s.a(256),o._renderTargets=new s.b(256),o._activeParticleSystems=new s.a(256),o._activeSkeletons=new s.b(32),o._softwareSkinnedMeshes=new s.b(32),o._activeAnimatables=new Array,o._transformMatrix=c.j.Zero(),o.requireLightSorting=!1,o._components=[],o._serializableComponents=[],o._transientComponents=[],o._beforeCameraUpdateStage=E.b.Create(),o._beforeClearStage=E.b.Create(),o._gatherRenderTargetsStage=E.b.Create(),o._gatherActiveCameraRenderTargetsStage=E.b.Create(),o._isReadyForMeshStage=E.b.Create(),o._beforeEvaluateActiveMeshStage=E.b.Create(),o._evaluateSubMeshStage=E.b.Create(),o._activeMeshStage=E.b.Create(),o._cameraDrawRenderTargetStage=E.b.Create(),o._beforeCameraDrawStage=E.b.Create(),o._beforeRenderTargetDrawStage=E.b.Create(),o._beforeRenderingGroupDrawStage=E.b.Create(),o._beforeRenderingMeshStage=E.b.Create(),o._afterRenderingMeshStage=E.b.Create(),o._afterRenderingGroupDrawStage=E.b.Create(),o._afterCameraDrawStage=E.b.Create(),o._afterRenderTargetDrawStage=E.b.Create(),o._afterRenderStage=E.b.Create(),o._pointerMoveStage=E.b.Create(),o._pointerDownStage=E.b.Create(),o._pointerUpStage=E.b.Create(),o.geometriesByUniqueId=null,o._defaultMeshCandidates={data:[],length:0},o._defaultSubMeshCandidates={data:[],length:0},o._preventFreeActiveMeshesAndRenderingGroups=!1,o._activeMeshesFrozen=!1,o._allowPostProcessClearColor=!0,o.getDeterministicFrameTime=function(){return 1e3/60},o._blockMaterialDirtyMechanism=!1,o._engine=n||S.a.LastCreatedEngine,r&&r.virtual||(S.a._LastCreatedScene=o,o._engine.scenes.push(o)),o._uid=null,o._renderingManager=new T.b(o),b.a&&(o.postProcessManager=new b.a(o)),M.a.IsWindowObjectExist()&&o.attachControl(),o._createUbo(),_.a&&(o._imageProcessingConfiguration=new _.a),o.setDefaultCandidateProviders(),r&&!0===r.useGeometryUniqueIdsMap&&(o.geometriesByUniqueId={}),o.useMaterialMeshMap=r&&r.useGeometryUniqueIdsMap||!1,o.useClonedMeshhMap=r&&r.useClonedMeshhMap||!1,r&&r.virtual||o._engine.onNewSceneAddedObservable.notifyObservers(o),o}return r.d(t,e),t.DefaultMaterialFactory=function(e){throw C.a.WarnImport("StandardMaterial")},t.CollisionCoordinatorFactory=function(){throw C.a.WarnImport("DefaultCollisionCoordinator")},Object.defineProperty(t.prototype,"environmentTexture",{get:function(){return this._environmentTexture},set:function(e){this._environmentTexture!==e&&(this._environmentTexture=e,this.markAllMaterialsAsDirty(x.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forceWireframe",{get:function(){return this._forceWireframe},set:function(e){this._forceWireframe!==e&&(this._forceWireframe=e,this.markAllMaterialsAsDirty(x.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forcePointsCloud",{get:function(){return this._forcePointsCloud},set:function(e){this._forcePointsCloud!==e&&(this._forcePointsCloud=e,this.markAllMaterialsAsDirty(x.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationPropertiesOverride",{get:function(){return this._animationPropertiesOverride},set:function(e){this._animationPropertiesOverride=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beforeRender",{set:function(e){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),e&&(this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterRender",{set:function(e){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),e&&(this._onAfterRenderObserver=this.onAfterRenderObservable.add(e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"beforeCameraRender",{set:function(e){this._onBeforeCameraRenderObserver&&this.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver),this._onBeforeCameraRenderObserver=this.onBeforeCameraRenderObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"afterCameraRender",{set:function(e){this._onAfterCameraRenderObserver&&this.onAfterCameraRenderObservable.remove(this._onAfterCameraRenderObserver),this._onAfterCameraRenderObserver=this.onAfterCameraRenderObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unTranslatedPointer",{get:function(){return this._inputManager.unTranslatedPointer},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DragMovementThreshold",{get:function(){return w.DragMovementThreshold},set:function(e){w.DragMovementThreshold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LongPressDelay",{get:function(){return w.LongPressDelay},set:function(e){w.LongPressDelay=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DoubleClickDelay",{get:function(){return w.DoubleClickDelay},set:function(e){w.DoubleClickDelay=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ExclusiveDoubleClickMode",{get:function(){return w.ExclusiveDoubleClickMode},set:function(e){w.ExclusiveDoubleClickMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useRightHandedSystem",{get:function(){return this._useRightHandedSystem},set:function(e){this._useRightHandedSystem!==e&&(this._useRightHandedSystem=e,this.markAllMaterialsAsDirty(x.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),t.prototype.setStepId=function(e){this._currentStepId=e},t.prototype.getStepId=function(){return this._currentStepId},t.prototype.getInternalStep=function(){return this._currentInternalStep},Object.defineProperty(t.prototype,"fogEnabled",{get:function(){return this._fogEnabled},set:function(e){this._fogEnabled!==e&&(this._fogEnabled=e,this.markAllMaterialsAsDirty(x.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fogMode",{get:function(){return this._fogMode},set:function(e){this._fogMode!==e&&(this._fogMode=e,this.markAllMaterialsAsDirty(x.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowsEnabled",{get:function(){return this._shadowsEnabled},set:function(e){this._shadowsEnabled!==e&&(this._shadowsEnabled=e,this.markAllMaterialsAsDirty(x.a.MATERIAL_LightDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lightsEnabled",{get:function(){return this._lightsEnabled},set:function(e){this._lightsEnabled!==e&&(this._lightsEnabled=e,this.markAllMaterialsAsDirty(x.a.MATERIAL_LightDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeCamera",{get:function(){return this._activeCamera},set:function(e){e!==this._activeCamera&&(this._activeCamera=e,this.onActiveCameraChanged.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultMaterial",{get:function(){return this._defaultMaterial||(this._defaultMaterial=t.DefaultMaterialFactory(this)),this._defaultMaterial},set:function(e){this._defaultMaterial=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"texturesEnabled",{get:function(){return this._texturesEnabled},set:function(e){this._texturesEnabled!==e&&(this._texturesEnabled=e,this.markAllMaterialsAsDirty(x.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skeletonsEnabled",{get:function(){return this._skeletonsEnabled},set:function(e){this._skeletonsEnabled!==e&&(this._skeletonsEnabled=e,this.markAllMaterialsAsDirty(x.a.MATERIAL_AttributesDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collisionCoordinator",{get:function(){return this._collisionCoordinator||(this._collisionCoordinator=t.CollisionCoordinatorFactory(),this._collisionCoordinator.init(this)),this._collisionCoordinator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frustumPlanes",{get:function(){return this._frustumPlanes},enumerable:!0,configurable:!0}),t.prototype._registerTransientComponents=function(){if(this._transientComponents.length>0){for(var e=0,t=this._transientComponents;e<t.length;e++)t[e].register();this._transientComponents=[]}},t.prototype._addComponent=function(e){this._components.push(e),this._transientComponents.push(e),e.addFromContainer&&this._serializableComponents.push(e)},t.prototype._getComponent=function(e){for(var t=0,n=this._components;t<n.length;t++){var r=n[t];if(r.name===e)return r}return null},t.prototype.getClassName=function(){return"Scene"},t.prototype._getDefaultMeshCandidates=function(){return this._defaultMeshCandidates.data=this.meshes,this._defaultMeshCandidates.length=this.meshes.length,this._defaultMeshCandidates},t.prototype._getDefaultSubMeshCandidates=function(e){return this._defaultSubMeshCandidates.data=e.subMeshes,this._defaultSubMeshCandidates.length=e.subMeshes.length,this._defaultSubMeshCandidates},t.prototype.setDefaultCandidateProviders=function(){this.getActiveMeshCandidates=this._getDefaultMeshCandidates.bind(this),this.getActiveSubMeshCandidates=this._getDefaultSubMeshCandidates.bind(this),this.getIntersectingSubMeshCandidates=this._getDefaultSubMeshCandidates.bind(this),this.getCollidingSubMeshCandidates=this._getDefaultSubMeshCandidates.bind(this)},Object.defineProperty(t.prototype,"meshUnderPointer",{get:function(){return this._inputManager.meshUnderPointer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerX",{get:function(){return this._inputManager.pointerX},set:function(e){this._inputManager.pointerX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pointerY",{get:function(){return this._inputManager.pointerY},set:function(e){this._inputManager.pointerY=e},enumerable:!0,configurable:!0}),t.prototype.getCachedMaterial=function(){return this._cachedMaterial},t.prototype.getCachedEffect=function(){return this._cachedEffect},t.prototype.getCachedVisibility=function(){return this._cachedVisibility},t.prototype.isCachedMaterialInvalid=function(e,t,n){return void 0===n&&(n=1),this._cachedEffect!==t||this._cachedMaterial!==e||this._cachedVisibility!==n},t.prototype.getEngine=function(){return this._engine},t.prototype.getTotalVertices=function(){return this._totalVertices.current},Object.defineProperty(t.prototype,"totalVerticesPerfCounter",{get:function(){return this._totalVertices},enumerable:!0,configurable:!0}),t.prototype.getActiveIndices=function(){return this._activeIndices.current},Object.defineProperty(t.prototype,"totalActiveIndicesPerfCounter",{get:function(){return this._activeIndices},enumerable:!0,configurable:!0}),t.prototype.getActiveParticles=function(){return this._activeParticles.current},Object.defineProperty(t.prototype,"activeParticlesPerfCounter",{get:function(){return this._activeParticles},enumerable:!0,configurable:!0}),t.prototype.getActiveBones=function(){return this._activeBones.current},Object.defineProperty(t.prototype,"activeBonesPerfCounter",{get:function(){return this._activeBones},enumerable:!0,configurable:!0}),t.prototype.getActiveMeshes=function(){return this._activeMeshes},t.prototype.getAnimationRatio=function(){return void 0!==this._animationRatio?this._animationRatio:1},t.prototype.getRenderId=function(){return this._renderId},t.prototype.getFrameId=function(){return this._frameId},t.prototype.incrementRenderId=function(){this._renderId++},t.prototype._createUbo=function(){this._sceneUbo=new m.a(this._engine,void 0,!0),this._sceneUbo.addUniform("viewProjection",16),this._sceneUbo.addUniform("view",16)},t.prototype.simulatePointerMove=function(e,t){return this._inputManager.simulatePointerMove(e,t),this},t.prototype.simulatePointerDown=function(e,t){return this._inputManager.simulatePointerDown(e,t),this},t.prototype.simulatePointerUp=function(e,t,n){return this._inputManager.simulatePointerUp(e,t,n),this},t.prototype.isPointerCaptured=function(e){return void 0===e&&(e=0),this._inputManager.isPointerCaptured(e)},t.prototype.attachControl=function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),this._inputManager.attachControl(e,t,n)},t.prototype.detachControl=function(){this._inputManager.detachControl()},t.prototype.isReady=function(){if(this._isDisposed)return!1;var e,t=this.getEngine();if(!t.areAllEffectsReady())return!1;if(this._pendingData.length>0)return!1;for(e=0;e<this.meshes.length;e++){var n=this.meshes[e];if(n.isEnabled()&&n.subMeshes&&0!==n.subMeshes.length){if(!n.isReady(!0))return!1;for(var r="InstancedMesh"===n.getClassName()||"InstancedLinesMesh"===n.getClassName()||t.getCaps().instancedArrays&&n.instances.length>0,i=0,o=this._isReadyForMeshStage;i<o.length;i++)if(!o[i].action(n,r))return!1}}for(e=0;e<this.geometries.length;e++)if(this.geometries[e].delayLoadState===x.a.DELAYLOADSTATE_LOADING)return!1;if(this.activeCameras&&this.activeCameras.length>0){for(var a=0,s=this.activeCameras;a<s.length;a++)if(!s[a].isReady(!0))return!1}else if(this.activeCamera&&!this.activeCamera.isReady(!0))return!1;for(var u=0,l=this.particleSystems;u<l.length;u++)if(!l[u].isReady())return!1;return!0},t.prototype.resetCachedMaterial=function(){this._cachedMaterial=null,this._cachedEffect=null,this._cachedVisibility=null},t.prototype.registerBeforeRender=function(e){this.onBeforeRenderObservable.add(e)},t.prototype.unregisterBeforeRender=function(e){this.onBeforeRenderObservable.removeCallback(e)},t.prototype.registerAfterRender=function(e){this.onAfterRenderObservable.add(e)},t.prototype.unregisterAfterRender=function(e){this.onAfterRenderObservable.removeCallback(e)},t.prototype._executeOnceBeforeRender=function(e){var t=this,n=function(){e(),setTimeout(function(){t.unregisterBeforeRender(n)})};this.registerBeforeRender(n)},t.prototype.executeOnceBeforeRender=function(e,t){var n=this;void 0!==t?setTimeout(function(){n._executeOnceBeforeRender(e)},t):this._executeOnceBeforeRender(e)},t.prototype._addPendingData=function(e){this._pendingData.push(e)},t.prototype._removePendingData=function(e){var t=this.isLoading,n=this._pendingData.indexOf(e);-1!==n&&this._pendingData.splice(n,1),t&&!this.isLoading&&this.onDataLoadedObservable.notifyObservers(this)},t.prototype.getWaitingItemsCount=function(){return this._pendingData.length},Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._pendingData.length>0},enumerable:!0,configurable:!0}),t.prototype.executeWhenReady=function(e){var t=this;this.onReadyObservable.add(e),-1===this._executeWhenReadyTimeoutId&&(this._executeWhenReadyTimeoutId=setTimeout(function(){t._checkIsReady()},150))},t.prototype.whenReadyAsync=function(){var e=this;return new Promise(function(t){e.executeWhenReady(function(){t()})})},t.prototype._checkIsReady=function(){var e=this;if(this._registerTransientComponents(),this.isReady())return this.onReadyObservable.notifyObservers(this),this.onReadyObservable.clear(),void(this._executeWhenReadyTimeoutId=-1);this._executeWhenReadyTimeoutId=setTimeout(function(){e._checkIsReady()},150)},Object.defineProperty(t.prototype,"animatables",{get:function(){return this._activeAnimatables},enumerable:!0,configurable:!0}),t.prototype.resetLastAnimationTimeFrame=function(){this._animationTimeLast=o.a.Now},t.prototype.getViewMatrix=function(){return this._viewMatrix},t.prototype.getProjectionMatrix=function(){return this._projectionMatrix},t.prototype.getTransformMatrix=function(){return this._transformMatrix},t.prototype.setTransformMatrix=function(e,t,n,r){this._viewUpdateFlag===e.updateFlag&&this._projectionUpdateFlag===t.updateFlag||(this._viewUpdateFlag=e.updateFlag,this._projectionUpdateFlag=t.updateFlag,this._viewMatrix=e,this._projectionMatrix=t,this._viewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix),this._frustumPlanes?c.i.GetPlanesToRef(this._transformMatrix,this._frustumPlanes):this._frustumPlanes=c.i.GetPlanes(this._transformMatrix),this._multiviewSceneUbo&&this._multiviewSceneUbo.useUbo?this._updateMultiviewUbo(n,r):this._sceneUbo.useUbo&&(this._sceneUbo.updateMatrix("viewProjection",this._transformMatrix),this._sceneUbo.updateMatrix("view",this._viewMatrix),this._sceneUbo.update()))},t.prototype.getSceneUniformBuffer=function(){return this._multiviewSceneUbo?this._multiviewSceneUbo:this._sceneUbo},t.prototype.getUniqueId=function(){var e=t._uniqueIdCounter;return t._uniqueIdCounter++,e},t.prototype.addMesh=function(e,t){var n=this;void 0===t&&(t=!1),this.meshes.push(e),e._resyncLightSources(),this.onNewMeshAddedObservable.notifyObservers(e),t&&e.getChildMeshes().forEach(function(e){n.addMesh(e)})},t.prototype.removeMesh=function(e,t){var n=this;void 0===t&&(t=!1);var r=this.meshes.indexOf(e);return-1!==r&&(this.meshes[r]=this.meshes[this.meshes.length-1],this.meshes.pop()),this.onMeshRemovedObservable.notifyObservers(e),t&&e.getChildMeshes().forEach(function(e){n.removeMesh(e)}),r},t.prototype.addTransformNode=function(e){e._indexInSceneTransformNodesArray=this.transformNodes.length,this.transformNodes.push(e),this.onNewTransformNodeAddedObservable.notifyObservers(e)},t.prototype.removeTransformNode=function(e){var t=e._indexInSceneTransformNodesArray;if(-1!==t){if(t!==this.transformNodes.length-1){var n=this.transformNodes[this.transformNodes.length-1];this.transformNodes[t]=n,n._indexInSceneTransformNodesArray=t}e._indexInSceneTransformNodesArray=-1,this.transformNodes.pop()}return this.onTransformNodeRemovedObservable.notifyObservers(e),t},t.prototype.removeSkeleton=function(e){var t=this.skeletons.indexOf(e);return-1!==t&&(this.skeletons.splice(t,1),this.onSkeletonRemovedObservable.notifyObservers(e)),t},t.prototype.removeMorphTargetManager=function(e){var t=this.morphTargetManagers.indexOf(e);return-1!==t&&this.morphTargetManagers.splice(t,1),t},t.prototype.removeLight=function(e){var t=this.lights.indexOf(e);if(-1!==t){for(var n=0,r=this.meshes;n<r.length;n++)r[n]._removeLightSource(e);this.lights.splice(t,1),this.sortLightsByPriority()}return this.onLightRemovedObservable.notifyObservers(e),t},t.prototype.removeCamera=function(e){var t=this.cameras.indexOf(e);-1!==t&&this.cameras.splice(t,1);var n=this.activeCameras.indexOf(e);return-1!==n&&this.activeCameras.splice(n,1),this.activeCamera===e&&(this.activeCamera=this.cameras.length>0?this.cameras[0]:null),this.onCameraRemovedObservable.notifyObservers(e),t},t.prototype.removeParticleSystem=function(e){var t=this.particleSystems.indexOf(e);return-1!==t&&this.particleSystems.splice(t,1),t},t.prototype.removeAnimation=function(e){var t=this.animations.indexOf(e);return-1!==t&&this.animations.splice(t,1),t},t.prototype.stopAnimation=function(e,t,n){},t.prototype.removeAnimationGroup=function(e){var t=this.animationGroups.indexOf(e);return-1!==t&&this.animationGroups.splice(t,1),t},t.prototype.removeMultiMaterial=function(e){var t=this.multiMaterials.indexOf(e);return-1!==t&&this.multiMaterials.splice(t,1),t},t.prototype.removeMaterial=function(e){var t=e._indexInSceneMaterialArray;if(-1!==t&&t<this.materials.length){if(t!==this.materials.length-1){var n=this.materials[this.materials.length-1];this.materials[t]=n,n._indexInSceneMaterialArray=t}e._indexInSceneMaterialArray=-1,this.materials.pop()}return this.onMaterialRemovedObservable.notifyObservers(e),t},t.prototype.removeActionManager=function(e){var t=this.actionManagers.indexOf(e);return-1!==t&&this.actionManagers.splice(t,1),t},t.prototype.removeTexture=function(e){var t=this.textures.indexOf(e);return-1!==t&&this.textures.splice(t,1),this.onTextureRemovedObservable.notifyObservers(e),t},t.prototype.addLight=function(e){this.lights.push(e),this.sortLightsByPriority();for(var t=0,n=this.meshes;t<n.length;t++){var r=n[t];-1===r.lightSources.indexOf(e)&&(r.lightSources.push(e),r._resyncLightSources())}this.onNewLightAddedObservable.notifyObservers(e)},t.prototype.sortLightsByPriority=function(){this.requireLightSorting&&this.lights.sort(g.a.CompareLightsPriority)},t.prototype.addCamera=function(e){this.cameras.push(e),this.onNewCameraAddedObservable.notifyObservers(e)},t.prototype.addSkeleton=function(e){this.skeletons.push(e),this.onNewSkeletonAddedObservable.notifyObservers(e)},t.prototype.addParticleSystem=function(e){this.particleSystems.push(e)},t.prototype.addAnimation=function(e){this.animations.push(e)},t.prototype.addAnimationGroup=function(e){this.animationGroups.push(e)},t.prototype.addMultiMaterial=function(e){this.multiMaterials.push(e)},t.prototype.addMaterial=function(e){e._indexInSceneMaterialArray=this.materials.length,this.materials.push(e),this.onNewMaterialAddedObservable.notifyObservers(e)},t.prototype.addMorphTargetManager=function(e){this.morphTargetManagers.push(e)},t.prototype.addGeometry=function(e){this.geometriesByUniqueId&&(this.geometriesByUniqueId[e.uniqueId]=this.geometries.length),this.geometries.push(e)},t.prototype.addActionManager=function(e){this.actionManagers.push(e)},t.prototype.addTexture=function(e){this.textures.push(e),this.onNewTextureAddedObservable.notifyObservers(e)},t.prototype.switchActiveCamera=function(e,t){void 0===t&&(t=!0);var n=this._engine.getRenderingCanvas();n&&(this.activeCamera&&this.activeCamera.detachControl(n),this.activeCamera=e,t&&e.attachControl(n))},t.prototype.setActiveCameraByID=function(e){var t=this.getCameraByID(e);return t?(this.activeCamera=t,t):null},t.prototype.setActiveCameraByName=function(e){var t=this.getCameraByName(e);return t?(this.activeCamera=t,t):null},t.prototype.getAnimationGroupByName=function(e){for(var t=0;t<this.animationGroups.length;t++)if(this.animationGroups[t].name===e)return this.animationGroups[t];return null},t.prototype.getMaterialByUniqueID=function(e){for(var t=0;t<this.materials.length;t++)if(this.materials[t].uniqueId===e)return this.materials[t];return null},t.prototype.getMaterialByID=function(e){for(var t=0;t<this.materials.length;t++)if(this.materials[t].id===e)return this.materials[t];return null},t.prototype.getMaterialByName=function(e){for(var t=0;t<this.materials.length;t++)if(this.materials[t].name===e)return this.materials[t];return null},t.prototype.getCameraByID=function(e){for(var t=0;t<this.cameras.length;t++)if(this.cameras[t].id===e)return this.cameras[t];return null},t.prototype.getCameraByUniqueID=function(e){for(var t=0;t<this.cameras.length;t++)if(this.cameras[t].uniqueId===e)return this.cameras[t];return null},t.prototype.getCameraByName=function(e){for(var t=0;t<this.cameras.length;t++)if(this.cameras[t].name===e)return this.cameras[t];return null},t.prototype.getBoneByID=function(e){for(var t=0;t<this.skeletons.length;t++)for(var n=this.skeletons[t],r=0;r<n.bones.length;r++)if(n.bones[r].id===e)return n.bones[r];return null},t.prototype.getBoneByName=function(e){for(var t=0;t<this.skeletons.length;t++)for(var n=this.skeletons[t],r=0;r<n.bones.length;r++)if(n.bones[r].name===e)return n.bones[r];return null},t.prototype.getLightByName=function(e){for(var t=0;t<this.lights.length;t++)if(this.lights[t].name===e)return this.lights[t];return null},t.prototype.getLightByID=function(e){for(var t=0;t<this.lights.length;t++)if(this.lights[t].id===e)return this.lights[t];return null},t.prototype.getLightByUniqueID=function(e){for(var t=0;t<this.lights.length;t++)if(this.lights[t].uniqueId===e)return this.lights[t];return null},t.prototype.getParticleSystemByID=function(e){for(var t=0;t<this.particleSystems.length;t++)if(this.particleSystems[t].id===e)return this.particleSystems[t];return null},t.prototype.getGeometryByID=function(e){for(var t=0;t<this.geometries.length;t++)if(this.geometries[t].id===e)return this.geometries[t];return null},t.prototype._getGeometryByUniqueID=function(e){if(this.geometriesByUniqueId){var t=this.geometriesByUniqueId[e];if(void 0!==t)return this.geometries[t]}else for(var n=0;n<this.geometries.length;n++)if(this.geometries[n].uniqueId===e)return this.geometries[n];return null},t.prototype.pushGeometry=function(e,t){return!(!t&&this._getGeometryByUniqueID(e.uniqueId)||(this.addGeometry(e),this.onNewGeometryAddedObservable.notifyObservers(e),0))},t.prototype.removeGeometry=function(e){var t;if(this.geometriesByUniqueId){if(void 0===(t=this.geometriesByUniqueId[e.uniqueId]))return!1}else if((t=this.geometries.indexOf(e))<0)return!1;if(t!==this.geometries.length-1){var n=this.geometries[this.geometries.length-1];this.geometries[t]=n,this.geometriesByUniqueId&&(this.geometriesByUniqueId[n.uniqueId]=t,this.geometriesByUniqueId[e.uniqueId]=void 0)}return this.geometries.pop(),this.onGeometryRemovedObservable.notifyObservers(e),!0},t.prototype.getGeometries=function(){return this.geometries},t.prototype.getMeshByID=function(e){for(var t=0;t<this.meshes.length;t++)if(this.meshes[t].id===e)return this.meshes[t];return null},t.prototype.getMeshesByID=function(e){return this.meshes.filter(function(t){return t.id===e})},t.prototype.getTransformNodeByID=function(e){for(var t=0;t<this.transformNodes.length;t++)if(this.transformNodes[t].id===e)return this.transformNodes[t];return null},t.prototype.getTransformNodeByUniqueID=function(e){for(var t=0;t<this.transformNodes.length;t++)if(this.transformNodes[t].uniqueId===e)return this.transformNodes[t];return null},t.prototype.getTransformNodesByID=function(e){return this.transformNodes.filter(function(t){return t.id===e})},t.prototype.getMeshByUniqueID=function(e){for(var t=0;t<this.meshes.length;t++)if(this.meshes[t].uniqueId===e)return this.meshes[t];return null},t.prototype.getLastMeshByID=function(e){for(var t=this.meshes.length-1;t>=0;t--)if(this.meshes[t].id===e)return this.meshes[t];return null},t.prototype.getLastEntryByID=function(e){var t;for(t=this.meshes.length-1;t>=0;t--)if(this.meshes[t].id===e)return this.meshes[t];for(t=this.transformNodes.length-1;t>=0;t--)if(this.transformNodes[t].id===e)return this.transformNodes[t];for(t=this.cameras.length-1;t>=0;t--)if(this.cameras[t].id===e)return this.cameras[t];for(t=this.lights.length-1;t>=0;t--)if(this.lights[t].id===e)return this.lights[t];return null},t.prototype.getNodeByID=function(e){var t=this.getMeshByID(e);if(t)return t;var n=this.getTransformNodeByID(e);if(n)return n;var r=this.getLightByID(e);return r||(this.getCameraByID(e)||this.getBoneByID(e)||null)},t.prototype.getNodeByName=function(e){var t=this.getMeshByName(e);if(t)return t;var n=this.getTransformNodeByName(e);if(n)return n;var r=this.getLightByName(e);return r||(this.getCameraByName(e)||this.getBoneByName(e)||null)},t.prototype.getMeshByName=function(e){for(var t=0;t<this.meshes.length;t++)if(this.meshes[t].name===e)return this.meshes[t];return null},t.prototype.getTransformNodeByName=function(e){for(var t=0;t<this.transformNodes.length;t++)if(this.transformNodes[t].name===e)return this.transformNodes[t];return null},t.prototype.getLastSkeletonByID=function(e){for(var t=this.skeletons.length-1;t>=0;t--)if(this.skeletons[t].id===e)return this.skeletons[t];return null},t.prototype.getSkeletonByUniqueId=function(e){for(var t=0;t<this.skeletons.length;t++)if(this.skeletons[t].uniqueId===e)return this.skeletons[t];return null},t.prototype.getSkeletonById=function(e){for(var t=0;t<this.skeletons.length;t++)if(this.skeletons[t].id===e)return this.skeletons[t];return null},t.prototype.getSkeletonByName=function(e){for(var t=0;t<this.skeletons.length;t++)if(this.skeletons[t].name===e)return this.skeletons[t];return null},t.prototype.getMorphTargetManagerById=function(e){for(var t=0;t<this.morphTargetManagers.length;t++)if(this.morphTargetManagers[t].uniqueId===e)return this.morphTargetManagers[t];return null},t.prototype.getMorphTargetById=function(e){for(var t=0;t<this.morphTargetManagers.length;++t)for(var n=this.morphTargetManagers[t],r=0;r<n.numTargets;++r){var i=n.getTarget(r);if(i.id===e)return i}return null},t.prototype.isActiveMesh=function(e){return-1!==this._activeMeshes.indexOf(e)},Object.defineProperty(t.prototype,"uid",{get:function(){return this._uid||(this._uid=i.h.RandomId()),this._uid},enumerable:!0,configurable:!0}),t.prototype.addExternalData=function(e,t){return this._externalData||(this._externalData=new u.a),this._externalData.add(e,t)},t.prototype.getExternalData=function(e){return this._externalData?this._externalData.get(e):null},t.prototype.getOrAddExternalDataWithFactory=function(e,t){return this._externalData||(this._externalData=new u.a),this._externalData.getOrAddWithFactory(e,t)},t.prototype.removeExternalData=function(e){return this._externalData.remove(e)},t.prototype._evaluateSubMesh=function(e,t,n){if(n.isAnInstance||this.dispatchAllSubMeshesOfActiveMeshes||t.alwaysSelectAsActiveMesh||1===t.subMeshes.length||e.isInFrustum(this._frustumPlanes)){for(var r=0,i=this._evaluateSubMeshStage;r<i.length;r++)i[r].action(t,e);var o=e.getMaterial();null!=o&&(o.hasRenderTargetTextures&&null!=o.getRenderTargetTextures&&-1===this._processedMaterials.indexOf(o)&&(this._processedMaterials.push(o),this._renderTargets.concatWithNoDuplicate(o.getRenderTargetTextures())),this._activeIndices.addCount(e.indexCount,!1),this._renderingManager.dispatch(e,t,o))}},t.prototype.freeProcessedMaterials=function(){this._processedMaterials.dispose()},Object.defineProperty(t.prototype,"blockfreeActiveMeshesAndRenderingGroups",{get:function(){return this._preventFreeActiveMeshesAndRenderingGroups},set:function(e){this._preventFreeActiveMeshesAndRenderingGroups!==e&&(e&&(this.freeActiveMeshes(),this.freeRenderingGroups()),this._preventFreeActiveMeshesAndRenderingGroups=e)},enumerable:!0,configurable:!0}),t.prototype.freeActiveMeshes=function(){if(!this.blockfreeActiveMeshesAndRenderingGroups&&(this._activeMeshes.dispose(),this.activeCamera&&this.activeCamera._activeMeshes&&this.activeCamera._activeMeshes.dispose(),this.activeCameras))for(var e=0;e<this.activeCameras.length;e++){var t=this.activeCameras[e];t&&t._activeMeshes&&t._activeMeshes.dispose()}},t.prototype.freeRenderingGroups=function(){if(!this.blockfreeActiveMeshesAndRenderingGroups&&(this._renderingManager&&this._renderingManager.freeRenderingGroups(),this.textures))for(var e=0;e<this.textures.length;e++){var t=this.textures[e];t&&t.renderList&&t.freeRenderingGroups()}},t.prototype._isInIntermediateRendering=function(){return this._intermediateRendering},t.prototype.freezeActiveMeshes=function(){if(!this.activeCamera)return this;this._frustumPlanes||this.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix()),this._evaluateActiveMeshes(),this._activeMeshesFrozen=!0;for(var e=0;e<this._activeMeshes.length;e++)this._activeMeshes.data[e]._freeze();return this},t.prototype.unfreezeActiveMeshes=function(){for(var e=0;e<this._activeMeshes.length;e++)this._activeMeshes.data[e]._unFreeze();return this._activeMeshesFrozen=!1,this},t.prototype._evaluateActiveMeshes=function(){if(this._activeMeshesFrozen&&this._activeMeshes.length)for(var e=this._activeMeshes.length,t=0;t<e;t++)(a=this._activeMeshes.data[t]).computeWorldMatrix();else if(this.activeCamera){this.onBeforeActiveMeshesEvaluationObservable.notifyObservers(this),this.activeCamera._activeMeshes.reset(),this._activeMeshes.reset(),this._renderingManager.reset(),this._processedMaterials.reset(),this._activeParticleSystems.reset(),this._activeSkeletons.reset(),this._softwareSkinnedMeshes.reset();for(var n=0,r=this._beforeEvaluateActiveMeshStage;n<r.length;n++)r[n].action();var i=this.getActiveMeshCandidates(),o=i.length;for(t=0;t<o;t++){var a;if(!(a=i.data[t]).isBlocked&&(this._totalVertices.addCount(a.getTotalVertices(),!1),a.isReady()&&a.isEnabled()&&0!==a.scaling.lengthSquared())){a.computeWorldMatrix(),a.actionManager&&a.actionManager.hasSpecificTriggers2(x.a.ACTION_OnIntersectionEnterTrigger,x.a.ACTION_OnIntersectionExitTrigger)&&this._meshesForIntersections.pushNoDuplicate(a);var s=this.customLODSelector?this.customLODSelector(a,this.activeCamera):a.getLOD(this.activeCamera);null!=s&&(s!==a&&s.billboardMode!==h.a.BILLBOARDMODE_NONE&&s.computeWorldMatrix(),a._preActivate(),a.isVisible&&a.visibility>0&&0!=(a.layerMask&this.activeCamera.layerMask)&&(a.alwaysSelectAsActiveMesh||a.isInFrustum(this._frustumPlanes))&&(this._activeMeshes.push(a),this.activeCamera._activeMeshes.push(a),s!==a&&s._activate(this._renderId,!1),a._activate(this._renderId,!1)&&(a.isAnInstance||(s._internalAbstractMeshDataInfo._onlyForInstances=!1),s._internalAbstractMeshDataInfo._isActive=!0,this._activeMesh(a,s)),a._postActivate()))}}if(this.onAfterActiveMeshesEvaluationObservable.notifyObservers(this),this.particlesEnabled){this.onBeforeParticlesRenderingObservable.notifyObservers(this);for(var u=0;u<this.particleSystems.length;u++){var l=this.particleSystems[u];if(l.isStarted()&&l.emitter){var c=l.emitter;c.position&&!c.isEnabled()||(this._activeParticleSystems.push(l),l.animate(),this._renderingManager.dispatchParticles(l))}}this.onAfterParticlesRenderingObservable.notifyObservers(this)}}},t.prototype._activeMesh=function(e,t){this._skeletonsEnabled&&null!=t.skeleton&&(this._activeSkeletons.pushNoDuplicate(t.skeleton)&&t.skeleton.prepare(),t.computeBonesUsingShaders||this._softwareSkinnedMeshes.pushNoDuplicate(t));for(var n=0,r=this._activeMeshStage;n<r.length;n++)r[n].action(e,t);if(null!=t&&null!=t.subMeshes&&t.subMeshes.length>0)for(var i=this.getActiveSubMeshCandidates(t),o=i.length,a=0;a<o;a++)this._evaluateSubMesh(i.data[a],t,e)},t.prototype.updateTransformMatrix=function(e){this.activeCamera&&this.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix(e))},t.prototype._bindFrameBuffer=function(){if(this.activeCamera&&this.activeCamera._multiviewTexture)this.activeCamera._multiviewTexture._bindFrameBuffer();else if(this.activeCamera&&this.activeCamera.outputRenderTarget)if(this.getEngine().getCaps().multiview&&this.activeCamera.outputRenderTarget&&this.activeCamera.outputRenderTarget.getViewCount()>1)this.activeCamera.outputRenderTarget._bindFrameBuffer();else{var e=this.activeCamera.outputRenderTarget.getInternalTexture();e?this.getEngine().bindFramebuffer(e):A.a.Error("Camera contains invalid customDefaultRenderTarget")}else this.getEngine().restoreDefaultFramebuffer()},t.prototype._renderForCamera=function(e,t){if(!e||!e._skipRendering){var n=this._engine;if(this._activeCamera=e,!this.activeCamera)throw new Error("Active camera not set");n.setViewport(this.activeCamera.viewport),this.resetCachedMaterial(),this._renderId++,this.getEngine().getCaps().multiview&&e.outputRenderTarget&&e.outputRenderTarget.getViewCount()>1?this.setTransformMatrix(e._rigCameras[0].getViewMatrix(),e._rigCameras[0].getProjectionMatrix(),e._rigCameras[1].getViewMatrix(),e._rigCameras[1].getProjectionMatrix()):this.updateTransformMatrix(),this.onBeforeCameraRenderObservable.notifyObservers(this.activeCamera),this._evaluateActiveMeshes();for(var r=0;r<this._softwareSkinnedMeshes.length;r++){var o=this._softwareSkinnedMeshes.data[r];o.applySkeleton(o.skeleton)}this.onBeforeRenderTargetsRenderObservable.notifyObservers(this),e.customRenderTargets&&e.customRenderTargets.length>0&&this._renderTargets.concatWithNoDuplicate(e.customRenderTargets),t&&t.customRenderTargets&&t.customRenderTargets.length>0&&this._renderTargets.concatWithNoDuplicate(t.customRenderTargets);for(var a=0,s=this._gatherActiveCameraRenderTargetsStage;a<s.length;a++)s[a].action(this._renderTargets);if(this.renderTargetsEnabled){this._intermediateRendering=!0;var u=!1;if(this._renderTargets.length>0){i.h.StartPerformanceCounter("Render targets",this._renderTargets.length>0);for(var l=0;l<this._renderTargets.length;l++){var c=this._renderTargets.data[l];c._shouldRender()&&(this._renderId++,c.render(c.activeCamera&&c.activeCamera!==this.activeCamera,this.dumpNextRenderTargets),u=!0)}i.h.EndPerformanceCounter("Render targets",this._renderTargets.length>0),this._renderId++}for(var h=0,d=this._cameraDrawRenderTargetStage;h<d.length;h++)u=d[h].action(this.activeCamera)||u;this._intermediateRendering=!1,u&&this._bindFrameBuffer()}this.onAfterRenderTargetsRenderObservable.notifyObservers(this),this.postProcessManager&&!e._multiviewTexture&&this.postProcessManager._prepareFrame();for(var f=0,p=this._beforeCameraDrawStage;f<p.length;f++)p[f].action(this.activeCamera);this.onBeforeDrawPhaseObservable.notifyObservers(this),this._renderingManager.render(null,null,!0,!0),this.onAfterDrawPhaseObservable.notifyObservers(this);for(var _=0,m=this._afterCameraDrawStage;_<m.length;_++)m[_].action(this.activeCamera);this.postProcessManager&&!e._multiviewTexture&&this.postProcessManager._finalizeFrame(e.isIntermediate),this._renderTargets.reset(),this.onAfterCameraRenderObservable.notifyObservers(this.activeCamera)}},t.prototype._processSubCameras=function(e){if(e.cameraRigMode===f.a.RIG_MODE_NONE||e.outputRenderTarget&&e.outputRenderTarget.getViewCount()>1&&this.getEngine().getCaps().multiview)this._renderForCamera(e);else{if(e._useMultiviewToSingleView)this._renderMultiviewToSingleView(e);else for(var t=0;t<e._rigCameras.length;t++)this._renderForCamera(e._rigCameras[t],e);this._activeCamera=e,this.setTransformMatrix(this._activeCamera.getViewMatrix(),this._activeCamera.getProjectionMatrix())}},t.prototype._checkIntersections=function(){for(var e=0;e<this._meshesForIntersections.length;e++){var t=this._meshesForIntersections.data[e];if(t.actionManager)for(var n=0;t.actionManager&&n<t.actionManager.actions.length;n++){var r=t.actionManager.actions[n];if(r.trigger===x.a.ACTION_OnIntersectionEnterTrigger||r.trigger===x.a.ACTION_OnIntersectionExitTrigger){var i=r.getTriggerParameter(),o=i instanceof d.a?i:i.mesh,a=o.intersectsMesh(t,i.usePreciseIntersection),s=t._intersectionsInProgress.indexOf(o);a&&-1===s?r.trigger===x.a.ACTION_OnIntersectionEnterTrigger?(r._executeCurrent(y.a.CreateNew(t,void 0,o)),t._intersectionsInProgress.push(o)):r.trigger===x.a.ACTION_OnIntersectionExitTrigger&&t._intersectionsInProgress.push(o):!a&&s>-1&&(r.trigger===x.a.ACTION_OnIntersectionExitTrigger&&r._executeCurrent(y.a.CreateNew(t,void 0,o)),t.actionManager.hasSpecificTrigger(x.a.ACTION_OnIntersectionExitTrigger,function(e){return o===(e instanceof d.a?e:e.mesh)})&&r.trigger!==x.a.ACTION_OnIntersectionExitTrigger||t._intersectionsInProgress.splice(s,1))}}}},t.prototype._advancePhysicsEngineStep=function(e){},t.prototype._animate=function(){},t.prototype.animate=function(){if(this._engine.isDeterministicLockStep()){var e=Math.max(t.MinDeltaTime,Math.min(this._engine.getDeltaTime(),t.MaxDeltaTime))+this._timeAccumulator,n=this.getDeterministicFrameTime(),r=0,i=this._engine.getLockstepMaxSteps(),o=Math.floor(e/60);o=Math.min(o,i);do{this.onBeforeStepObservable.notifyObservers(this),this._animationRatio=.06*n,this._animate(),this.onAfterAnimationsObservable.notifyObservers(this),this._advancePhysicsEngineStep(n),this.onAfterStepObservable.notifyObservers(this),this._currentStepId++,r++,e-=n}while(e>0&&r<o);this._timeAccumulator=e<0?0:e}else e=this.useConstantAnimationDeltaTime?16:Math.max(t.MinDeltaTime,Math.min(this._engine.getDeltaTime(),t.MaxDeltaTime)),this._animationRatio=.06*e,this._animate(),this.onAfterAnimationsObservable.notifyObservers(this),this._advancePhysicsEngineStep(e)},t.prototype.render=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=!1),!this.isDisposed){this._frameId++,this._registerTransientComponents(),this._activeParticles.fetchNewFrame(),this._totalVertices.fetchNewFrame(),this._activeIndices.fetchNewFrame(),this._activeBones.fetchNewFrame(),this._meshesForIntersections.reset(),this.resetCachedMaterial(),this.onBeforeAnimationsObservable.notifyObservers(this),this.actionManager&&this.actionManager.processTrigger(x.a.ACTION_OnEveryFrameTrigger),t||this.animate();for(var n=0,r=this._beforeCameraUpdateStage;n<r.length;n++)r[n].action();if(e)if(this.activeCameras.length>0)for(var o=0;o<this.activeCameras.length;o++){var a=this.activeCameras[o];if(a.update(),a.cameraRigMode!==f.a.RIG_MODE_NONE)for(var s=0;s<a._rigCameras.length;s++)a._rigCameras[s].update()}else if(this.activeCamera&&(this.activeCamera.update(),this.activeCamera.cameraRigMode!==f.a.RIG_MODE_NONE))for(s=0;s<this.activeCamera._rigCameras.length;s++)this.activeCamera._rigCameras[s].update();this.onBeforeRenderObservable.notifyObservers(this),this.onBeforeRenderTargetsRenderObservable.notifyObservers(this);var u=this.getEngine(),l=this.activeCamera;if(this.renderTargetsEnabled){i.h.StartPerformanceCounter("Custom render targets",this.customRenderTargets.length>0),this._intermediateRendering=!0;for(var c=0;c<this.customRenderTargets.length;c++){var h=this.customRenderTargets[c];if(h._shouldRender()){if(this._renderId++,this.activeCamera=h.activeCamera||this.activeCamera,!this.activeCamera)throw new Error("Active camera not set");u.setViewport(this.activeCamera.viewport),this.updateTransformMatrix(),h.render(l!==this.activeCamera,this.dumpNextRenderTargets)}}i.h.EndPerformanceCounter("Custom render targets",this.customRenderTargets.length>0),this._intermediateRendering=!1,this._renderId++}this.activeCamera=l,this._bindFrameBuffer(),this.onAfterRenderTargetsRenderObservable.notifyObservers(this);for(var d=0,p=this._beforeClearStage;d<p.length;d++)p[d].action();(this.autoClearDepthAndStencil||this.autoClear)&&this._engine.clear(this.clearColor,this.autoClear||this.forceWireframe||this.forcePointsCloud,this.autoClearDepthAndStencil,this.autoClearDepthAndStencil);for(var _=0,m=this._gatherRenderTargetsStage;_<m.length;_++)m[_].action(this._renderTargets);if(this.activeCameras.length>0)for(o=0;o<this.activeCameras.length;o++)o>0&&this._engine.clear(null,!1,!0,!0),this._processSubCameras(this.activeCameras[o]);else{if(!this.activeCamera)throw new Error("No camera defined");this._processSubCameras(this.activeCamera)}this._checkIntersections();for(var g=0,v=this._afterRenderStage;g<v.length;g++)v[g].action();if(this.afterRender&&this.afterRender(),this.onAfterRenderObservable.notifyObservers(this),this._toBeDisposed.length){for(s=0;s<this._toBeDisposed.length;s++){var y=this._toBeDisposed[s];y&&y.dispose()}this._toBeDisposed=[]}this.dumpNextRenderTargets&&(this.dumpNextRenderTargets=!1),this._activeBones.addCount(0,!0),this._activeIndices.addCount(0,!0),this._activeParticles.addCount(0,!0)}},t.prototype.freezeMaterials=function(){for(var e=0;e<this.materials.length;e++)this.materials[e].freeze()},t.prototype.unfreezeMaterials=function(){for(var e=0;e<this.materials.length;e++)this.materials[e].unfreeze()},t.prototype.dispose=function(){this.beforeRender=null,this.afterRender=null,this.skeletons=[],this.morphTargetManagers=[],this._transientComponents=[],this._isReadyForMeshStage.clear(),this._beforeEvaluateActiveMeshStage.clear(),this._evaluateSubMeshStage.clear(),this._activeMeshStage.clear(),this._cameraDrawRenderTargetStage.clear(),this._beforeCameraDrawStage.clear(),this._beforeRenderTargetDrawStage.clear(),this._beforeRenderingGroupDrawStage.clear(),this._beforeRenderingMeshStage.clear(),this._afterRenderingMeshStage.clear(),this._afterRenderingGroupDrawStage.clear(),this._afterCameraDrawStage.clear(),this._afterRenderTargetDrawStage.clear(),this._afterRenderStage.clear(),this._beforeCameraUpdateStage.clear(),this._beforeClearStage.clear(),this._gatherRenderTargetsStage.clear(),this._gatherActiveCameraRenderTargetsStage.clear(),this._pointerMoveStage.clear(),this._pointerDownStage.clear(),this._pointerUpStage.clear();for(var e=0,t=this._components;e<t.length;e++)t[e].dispose();this.importedMeshesFiles=new Array,this.stopAllAnimations&&this.stopAllAnimations(),this.resetCachedMaterial(),this.activeCamera&&(this.activeCamera._activeMeshes.dispose(),this.activeCamera=null),this._activeMeshes.dispose(),this._renderingManager.dispose(),this._processedMaterials.dispose(),this._activeParticleSystems.dispose(),this._activeSkeletons.dispose(),this._softwareSkinnedMeshes.dispose(),this._renderTargets.dispose(),this._registeredForLateAnimationBindings.dispose(),this._meshesForIntersections.dispose(),this._toBeDisposed=[];for(var n=0,r=this._activeRequests;n<r.length;n++)r[n].abort();this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onBeforeRenderObservable.clear(),this.onAfterRenderObservable.clear(),this.onBeforeRenderTargetsRenderObservable.clear(),this.onAfterRenderTargetsRenderObservable.clear(),this.onAfterStepObservable.clear(),this.onBeforeStepObservable.clear(),this.onBeforeActiveMeshesEvaluationObservable.clear(),this.onAfterActiveMeshesEvaluationObservable.clear(),this.onBeforeParticlesRenderingObservable.clear(),this.onAfterParticlesRenderingObservable.clear(),this.onBeforeDrawPhaseObservable.clear(),this.onAfterDrawPhaseObservable.clear(),this.onBeforeAnimationsObservable.clear(),this.onAfterAnimationsObservable.clear(),this.onDataLoadedObservable.clear(),this.onBeforeRenderingGroupObservable.clear(),this.onAfterRenderingGroupObservable.clear(),this.onMeshImportedObservable.clear(),this.onBeforeCameraRenderObservable.clear(),this.onAfterCameraRenderObservable.clear(),this.onReadyObservable.clear(),this.onNewCameraAddedObservable.clear(),this.onCameraRemovedObservable.clear(),this.onNewLightAddedObservable.clear(),this.onLightRemovedObservable.clear(),this.onNewGeometryAddedObservable.clear(),this.onGeometryRemovedObservable.clear(),this.onNewTransformNodeAddedObservable.clear(),this.onTransformNodeRemovedObservable.clear(),this.onNewMeshAddedObservable.clear(),this.onMeshRemovedObservable.clear(),this.onNewSkeletonAddedObservable.clear(),this.onSkeletonRemovedObservable.clear(),this.onNewMaterialAddedObservable.clear(),this.onMaterialRemovedObservable.clear(),this.onNewTextureAddedObservable.clear(),this.onTextureRemovedObservable.clear(),this.onPrePointerObservable.clear(),this.onPointerObservable.clear(),this.onPreKeyboardObservable.clear(),this.onKeyboardObservable.clear(),this.onActiveCameraChanged.clear(),this.detachControl();var i,o=this._engine.getRenderingCanvas();if(o)for(i=0;i<this.cameras.length;i++)this.cameras[i].detachControl(o);for(;this.animationGroups.length;)this.animationGroups[0].dispose();for(;this.lights.length;)this.lights[0].dispose();for(;this.meshes.length;)this.meshes[0].dispose(!0);for(;this.transformNodes.length;)this.transformNodes[0].dispose(!0);for(;this.cameras.length;)this.cameras[0].dispose();for(this._defaultMaterial&&this._defaultMaterial.dispose();this.multiMaterials.length;)this.multiMaterials[0].dispose();for(;this.materials.length;)this.materials[0].dispose();for(;this.particleSystems.length;)this.particleSystems[0].dispose();for(;this.postProcesses.length;)this.postProcesses[0].dispose();for(;this.textures.length;)this.textures[0].dispose();this._sceneUbo.dispose(),this._multiviewSceneUbo&&this._multiviewSceneUbo.dispose(),this.postProcessManager.dispose(),(i=this._engine.scenes.indexOf(this))>-1&&this._engine.scenes.splice(i,1),this._engine.wipeCaches(!0),this._isDisposed=!0},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),t.prototype.clearCachedVertexData=function(){for(var e=0;e<this.meshes.length;e++){var t=this.meshes[e].geometry;if(t)for(var n in t._indices=[],t._vertexBuffers)t._vertexBuffers.hasOwnProperty(n)&&(t._vertexBuffers[n]._buffer._data=null)}},t.prototype.cleanCachedTextureBuffer=function(){for(var e=0,t=this.textures;e<t.length;e++){var n=t[e];n._buffer&&(n._buffer=null)}},t.prototype.getWorldExtends=function(e){var t=new c.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),n=new c.x(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);return this.meshes.filter(e=e||function(){return!0}).forEach(function(e){if(e.computeWorldMatrix(!0),e.subMeshes&&0!==e.subMeshes.length&&!e.infiniteDistance){var r=e.getBoundingInfo(),o=r.boundingBox.maximumWorld;i.h.CheckExtends(r.boundingBox.minimumWorld,t,n),i.h.CheckExtends(o,t,n)}}),{min:t,max:n}},t.prototype.createPickingRay=function(e,t,n,r,i){throw void 0===i&&(i=!1),C.a.WarnImport("Ray")},t.prototype.createPickingRayToRef=function(e,t,n,r,i,o){throw void 0===o&&(o=!1),C.a.WarnImport("Ray")},t.prototype.createPickingRayInCameraSpace=function(e,t,n){throw C.a.WarnImport("Ray")},t.prototype.createPickingRayInCameraSpaceToRef=function(e,t,n,r){throw C.a.WarnImport("Ray")},t.prototype.pick=function(e,t,n,r,i,o){var a=new v.a;return a._pickingUnavailable=!0,a},t.prototype.pickWithRay=function(e,t,n,r){throw C.a.WarnImport("Ray")},t.prototype.multiPick=function(e,t,n,r,i){throw C.a.WarnImport("Ray")},t.prototype.multiPickWithRay=function(e,t,n){throw C.a.WarnImport("Ray")},t.prototype.setPointerOverMesh=function(e){this._inputManager.setPointerOverMesh(e)},t.prototype.getPointerOverMesh=function(){return this._inputManager.getPointerOverMesh()},t.prototype._rebuildGeometries=function(){for(var e=0,t=this.geometries;e<t.length;e++)t[e]._rebuild();for(var n=0,r=this.meshes;n<r.length;n++)r[n]._rebuild();this.postProcessManager&&this.postProcessManager._rebuild();for(var i=0,o=this._components;i<o.length;i++)o[i].rebuild();for(var a=0,s=this.particleSystems;a<s.length;a++)s[a].rebuild()},t.prototype._rebuildTextures=function(){for(var e=0,t=this.textures;e<t.length;e++)t[e]._rebuild();this.markAllMaterialsAsDirty(x.a.MATERIAL_TextureDirtyFlag)},t.prototype._getByTags=function(e,t,n){if(void 0===t)return e;var r=[];for(var i in n=n||function(e){},e){var o=e[i];l.a&&l.a.MatchesQuery(o,t)&&(r.push(o),n(o))}return r},t.prototype.getMeshesByTags=function(e,t){return this._getByTags(this.meshes,e,t)},t.prototype.getCamerasByTags=function(e,t){return this._getByTags(this.cameras,e,t)},t.prototype.getLightsByTags=function(e,t){return this._getByTags(this.lights,e,t)},t.prototype.getMaterialByTags=function(e,t){return this._getByTags(this.materials,e,t).concat(this._getByTags(this.multiMaterials,e,t))},t.prototype.setRenderingOrder=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),this._renderingManager.setRenderingOrder(e,t,n,r)},t.prototype.setRenderingAutoClearDepthStencil=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0),this._renderingManager.setRenderingAutoClearDepthStencil(e,t,n,r)},t.prototype.getAutoClearDepthStencilSetup=function(e){return this._renderingManager.getAutoClearDepthStencilSetup(e)},Object.defineProperty(t.prototype,"blockMaterialDirtyMechanism",{get:function(){return this._blockMaterialDirtyMechanism},set:function(e){this._blockMaterialDirtyMechanism!==e&&(this._blockMaterialDirtyMechanism=e,e||this.markAllMaterialsAsDirty(x.a.MATERIAL_AllDirtyFlag))},enumerable:!0,configurable:!0}),t.prototype.markAllMaterialsAsDirty=function(e,t){if(!this._blockMaterialDirtyMechanism)for(var n=0,r=this.materials;n<r.length;n++){var i=r[n];t&&!t(i)||i.markAsDirty(e)}},t.prototype._loadFile=function(e,t,n,r,o,a){var s=this,u=i.h.LoadFile(e,t,n,r?this.offlineProvider:void 0,o,a);return this._activeRequests.push(u),u.onCompleteObservable.add(function(e){s._activeRequests.splice(s._activeRequests.indexOf(e),1)}),u},t.prototype._loadFileAsync=function(e,t,n){var r=this;return new Promise(function(i,o){r._loadFile(e,function(e){i(e)},void 0,t,n,function(e,t){o(t)})})},t._uniqueIdCounter=0,t.FOGMODE_NONE=0,t.FOGMODE_EXP=1,t.FOGMODE_EXP2=2,t.FOGMODE_LINEAR=3,t.MinDeltaTime=1,t.MaxDeltaTime=1e3,t}(p.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"b",function(){return u});var r=n(1),i=n(0),o=function(){function e(){}return e.POINTERDOWN=1,e.POINTERUP=2,e.POINTERMOVE=4,e.POINTERWHEEL=8,e.POINTERPICK=16,e.POINTERTAP=32,e.POINTERDOUBLETAP=64,e}(),a=function(e,t){this.type=e,this.event=t},s=function(e){function t(t,n,r,o){var a=e.call(this,t,n)||this;return a.ray=null,a.skipOnPointerObservable=!1,a.localPosition=new i.w(r,o),a}return r.d(t,e),t}(a),u=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.pickInfo=r,i}return r.d(t,e),t}(a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(10),i=n(3),o=function(){function e(){}return Object.defineProperty(e,"DiffuseTextureEnabled",{get:function(){return this._DiffuseTextureEnabled},set:function(e){this._DiffuseTextureEnabled!==e&&(this._DiffuseTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"AmbientTextureEnabled",{get:function(){return this._AmbientTextureEnabled},set:function(e){this._AmbientTextureEnabled!==e&&(this._AmbientTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OpacityTextureEnabled",{get:function(){return this._OpacityTextureEnabled},set:function(e){this._OpacityTextureEnabled!==e&&(this._OpacityTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ReflectionTextureEnabled",{get:function(){return this._ReflectionTextureEnabled},set:function(e){this._ReflectionTextureEnabled!==e&&(this._ReflectionTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"EmissiveTextureEnabled",{get:function(){return this._EmissiveTextureEnabled},set:function(e){this._EmissiveTextureEnabled!==e&&(this._EmissiveTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SpecularTextureEnabled",{get:function(){return this._SpecularTextureEnabled},set:function(e){this._SpecularTextureEnabled!==e&&(this._SpecularTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"BumpTextureEnabled",{get:function(){return this._BumpTextureEnabled},set:function(e){this._BumpTextureEnabled!==e&&(this._BumpTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LightmapTextureEnabled",{get:function(){return this._LightmapTextureEnabled},set:function(e){this._LightmapTextureEnabled!==e&&(this._LightmapTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"RefractionTextureEnabled",{get:function(){return this._RefractionTextureEnabled},set:function(e){this._RefractionTextureEnabled!==e&&(this._RefractionTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ColorGradingTextureEnabled",{get:function(){return this._ColorGradingTextureEnabled},set:function(e){this._ColorGradingTextureEnabled!==e&&(this._ColorGradingTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FresnelEnabled",{get:function(){return this._FresnelEnabled},set:function(e){this._FresnelEnabled!==e&&(this._FresnelEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_FresnelDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ClearCoatTextureEnabled",{get:function(){return this._ClearCoatTextureEnabled},set:function(e){this._ClearCoatTextureEnabled!==e&&(this._ClearCoatTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ClearCoatBumpTextureEnabled",{get:function(){return this._ClearCoatBumpTextureEnabled},set:function(e){this._ClearCoatBumpTextureEnabled!==e&&(this._ClearCoatBumpTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ClearCoatTintTextureEnabled",{get:function(){return this._ClearCoatTintTextureEnabled},set:function(e){this._ClearCoatTintTextureEnabled!==e&&(this._ClearCoatTintTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SheenTextureEnabled",{get:function(){return this._SheenTextureEnabled},set:function(e){this._SheenTextureEnabled!==e&&(this._SheenTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"AnisotropicTextureEnabled",{get:function(){return this._AnisotropicTextureEnabled},set:function(e){this._AnisotropicTextureEnabled!==e&&(this._AnisotropicTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ThicknessTextureEnabled",{get:function(){return this._ThicknessTextureEnabled},set:function(e){this._ThicknessTextureEnabled!==e&&(this._ThicknessTextureEnabled=e,r.b.MarkAllMaterialsAsDirty(i.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),e._DiffuseTextureEnabled=!0,e._AmbientTextureEnabled=!0,e._OpacityTextureEnabled=!0,e._ReflectionTextureEnabled=!0,e._EmissiveTextureEnabled=!0,e._SpecularTextureEnabled=!0,e._BumpTextureEnabled=!0,e._LightmapTextureEnabled=!0,e._RefractionTextureEnabled=!0,e._ColorGradingTextureEnabled=!0,e._FresnelEnabled=!0,e._ClearCoatTextureEnabled=!0,e._ClearCoatBumpTextureEnabled=!0,e._ClearCoatTintTextureEnabled=!0,e._SheenTextureEnabled=!0,e._AnisotropicTextureEnabled=!0,e._ThicknessTextureEnabled=!0,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.WarnImport=function(e){return e+" needs to be imported before as it contains a side-effect required by your code."},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(1),i=n(2),o=n(9),a=n(8),s=n(0),u=n(23),l=n(49),c=n(63),h=n(3),d=n(6),f=function(){function e(t,n,r){this.metadata=null,this.reservedDataStore=null,this.checkReadyOnEveryCall=!1,this.checkReadyOnlyOnce=!1,this.state="",this._alpha=1,this._backFaceCulling=!0,this.onCompiled=null,this.onError=null,this.getRenderTargetTextures=null,this.doNotSerialize=!1,this._storeEffectOnSubMeshes=!1,this.animations=null,this.onDisposeObservable=new a.c,this._onDisposeObserver=null,this._onUnBindObservable=null,this._onBindObserver=null,this._alphaMode=h.a.ALPHA_COMBINE,this._needDepthPrePass=!1,this.disableDepthWrite=!1,this.forceDepthWrite=!1,this.separateCullingPass=!1,this._fogEnabled=!0,this.pointSize=1,this.zOffset=0,this._effect=null,this._wasPreviouslyReady=!1,this._useUBO=!1,this._fillMode=e.TriangleFillMode,this._cachedDepthWriteState=!1,this._indexInSceneMaterialArray=-1,this.meshMap=null,this.name=t,this.id=t||o.h.RandomId(),this._scene=n||u.a.LastCreatedScene,this.uniqueId=this._scene.getUniqueId(),this.sideOrientation=this._scene.useRightHandedSystem?e.ClockWiseSideOrientation:e.CounterClockWiseSideOrientation,this._uniformBuffer=new c.a(this._scene.getEngine()),this._useUBO=this.getScene().getEngine().supportsUniformBuffers,r||this._scene.addMaterial(this),this._scene.useMaterialMeshMap&&(this.meshMap={})}return Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha!==t&&(this._alpha=t,this.markAsDirty(e.MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"backFaceCulling",{get:function(){return this._backFaceCulling},set:function(t){this._backFaceCulling!==t&&(this._backFaceCulling=t,this.markAsDirty(e.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasRenderTargetTextures",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBindObservable",{get:function(){return this._onBindObservable||(this._onBindObservable=new a.c),this._onBindObservable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBind",{set:function(e){this._onBindObserver&&this.onBindObservable.remove(this._onBindObserver),this._onBindObserver=this.onBindObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onUnBindObservable",{get:function(){return this._onUnBindObservable||(this._onUnBindObservable=new a.c),this._onUnBindObservable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaMode",{get:function(){return this._alphaMode},set:function(t){this._alphaMode!==t&&(this._alphaMode=t,this.markAsDirty(e.TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needDepthPrePass",{get:function(){return this._needDepthPrePass},set:function(e){this._needDepthPrePass!==e&&(this._needDepthPrePass=e,this._needDepthPrePass&&(this.checkReadyOnEveryCall=!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fogEnabled",{get:function(){return this._fogEnabled},set:function(t){this._fogEnabled!==t&&(this._fogEnabled=t,this.markAsDirty(e.MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wireframe",{get:function(){switch(this._fillMode){case e.WireFrameFillMode:case e.LineListDrawMode:case e.LineLoopDrawMode:case e.LineStripDrawMode:return!0}return this._scene.forceWireframe},set:function(t){this.fillMode=t?e.WireFrameFillMode:e.TriangleFillMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointsCloud",{get:function(){switch(this._fillMode){case e.PointFillMode:case e.PointListDrawMode:return!0}return this._scene.forcePointsCloud},set:function(t){this.fillMode=t?e.PointFillMode:e.TriangleFillMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillMode",{get:function(){return this._fillMode},set:function(t){this._fillMode!==t&&(this._fillMode=t,this.markAsDirty(e.MiscDirtyFlag))},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){return"Name: "+this.name},e.prototype.getClassName=function(){return"Material"},Object.defineProperty(e.prototype,"isFrozen",{get:function(){return this.checkReadyOnlyOnce},enumerable:!0,configurable:!0}),e.prototype.freeze=function(){this.checkReadyOnlyOnce=!0},e.prototype.unfreeze=function(){this.checkReadyOnlyOnce=!1},e.prototype.isReady=function(e,t){return!0},e.prototype.isReadyForSubMesh=function(e,t,n){return!1},e.prototype.getEffect=function(){return this._effect},e.prototype.getScene=function(){return this._scene},e.prototype.needAlphaBlending=function(){return this.alpha<1},e.prototype.needAlphaBlendingForMesh=function(e){return this.needAlphaBlending()||e.visibility<1||e.hasVertexAlpha},e.prototype.needAlphaTesting=function(){return!1},e.prototype.getAlphaTestTexture=function(){return null},e.prototype.markDirty=function(){this._wasPreviouslyReady=!1},e.prototype._preBind=function(t,n){void 0===n&&(n=null);var r=this._scene.getEngine(),i=(null==n?this.sideOrientation:n)===e.ClockWiseSideOrientation;return r.enableEffect(t||this._effect),r.setState(this.backFaceCulling,this.zOffset,!1,i),i},e.prototype.bind=function(e,t){},e.prototype.bindForSubMesh=function(e,t,n){},e.prototype.bindOnlyWorldMatrix=function(e){},e.prototype.bindSceneUniformBuffer=function(e,t){t.bindToEffect(e,"Scene")},e.prototype.bindView=function(e){this._useUBO?this.bindSceneUniformBuffer(e,this.getScene().getSceneUniformBuffer()):e.setMatrix("view",this.getScene().getViewMatrix())},e.prototype.bindViewProjection=function(e){this._useUBO?this.bindSceneUniformBuffer(e,this.getScene().getSceneUniformBuffer()):e.setMatrix("viewProjection",this.getScene().getTransformMatrix())},e.prototype._shouldTurnAlphaTestOn=function(e){return!this.needAlphaBlendingForMesh(e)&&this.needAlphaTesting()},e.prototype._afterBind=function(e){if(this._scene._cachedMaterial=this,this._scene._cachedVisibility=e?e.visibility:1,this._onBindObservable&&e&&this._onBindObservable.notifyObservers(e),this.disableDepthWrite){var t=this._scene.getEngine();this._cachedDepthWriteState=t.getDepthWrite(),t.setDepthWrite(!1)}},e.prototype.unbind=function(){this._onUnBindObservable&&this._onUnBindObservable.notifyObservers(this),this.disableDepthWrite&&this._scene.getEngine().setDepthWrite(this._cachedDepthWriteState)},e.prototype.getActiveTextures=function(){return[]},e.prototype.hasTexture=function(e){return!1},e.prototype.clone=function(e){return null},e.prototype.getBindedMeshes=function(){var e=this;if(this.meshMap){var t=new Array;for(var n in this.meshMap){var r=this.meshMap[n];r&&t.push(r)}return t}return this._scene.meshes.filter(function(t){return t.material===e})},e.prototype.forceCompilation=function(e,t,n){var i=this,o=r.a({clipPlane:!1},n),a=new l.a,u=this.getScene(),c=function(){if(i._scene&&i._scene.getEngine()){a._materialDefines&&(a._materialDefines._renderId=-1);var n=u.clipPlane;o.clipPlane&&(u.clipPlane=new s.n(0,0,0,1)),i._storeEffectOnSubMeshes?i.isReadyForSubMesh(e,a)?t&&t(i):setTimeout(c,16):i.isReady()?t&&t(i):setTimeout(c,16),o.clipPlane&&(u.clipPlane=n)}};c()},e.prototype.forceCompilationAsync=function(e,t){var n=this;return new Promise(function(r){n.forceCompilation(e,function(){r()},t)})},e.prototype.markAsDirty=function(t){this.getScene().blockMaterialDirtyMechanism||(e._DirtyCallbackArray.length=0,t&e.TextureDirtyFlag&&e._DirtyCallbackArray.push(e._TextureDirtyCallBack),t&e.LightDirtyFlag&&e._DirtyCallbackArray.push(e._LightsDirtyCallBack),t&e.FresnelDirtyFlag&&e._DirtyCallbackArray.push(e._FresnelDirtyCallBack),t&e.AttributesDirtyFlag&&e._DirtyCallbackArray.push(e._AttributeDirtyCallBack),t&e.MiscDirtyFlag&&e._DirtyCallbackArray.push(e._MiscDirtyCallBack),e._DirtyCallbackArray.length&&this._markAllSubMeshesAsDirty(e._RunDirtyCallBacks),this.getScene().resetCachedMaterial())},e.prototype._markAllSubMeshesAsDirty=function(e){if(!this.getScene().blockMaterialDirtyMechanism)for(var t=0,n=this.getScene().meshes;t<n.length;t++){var r=n[t];if(r.subMeshes)for(var i=0,o=r.subMeshes;i<o.length;i++){var a=o[i];a.getMaterial()===this&&a._materialDefines&&e(a._materialDefines)}}},e.prototype._markAllSubMeshesAsImageProcessingDirty=function(){this._markAllSubMeshesAsDirty(e._ImageProcessingDirtyCallBack)},e.prototype._markAllSubMeshesAsTexturesDirty=function(){this._markAllSubMeshesAsDirty(e._TextureDirtyCallBack)},e.prototype._markAllSubMeshesAsFresnelDirty=function(){this._markAllSubMeshesAsDirty(e._FresnelDirtyCallBack)},e.prototype._markAllSubMeshesAsFresnelAndMiscDirty=function(){this._markAllSubMeshesAsDirty(e._FresnelAndMiscDirtyCallBack)},e.prototype._markAllSubMeshesAsLightsDirty=function(){this._markAllSubMeshesAsDirty(e._LightsDirtyCallBack)},e.prototype._markAllSubMeshesAsAttributesDirty=function(){this._markAllSubMeshesAsDirty(e._AttributeDirtyCallBack)},e.prototype._markAllSubMeshesAsMiscDirty=function(){this._markAllSubMeshesAsDirty(e._MiscDirtyCallBack)},e.prototype._markAllSubMeshesAsTexturesAndMiscDirty=function(){this._markAllSubMeshesAsDirty(e._TextureAndMiscDirtyCallBack)},e.prototype.dispose=function(e,t,n){var r=this.getScene();if(r.stopAnimation(this),r.freeProcessedMaterials(),r.removeMaterial(this),!0!==n)if(this.meshMap)for(var i in this.meshMap)(s=this.meshMap[i])&&(s.material=null,this.releaseVertexArrayObject(s,e));else for(var o=0,a=r.meshes;o<a.length;o++){var s;(s=a[o]).material!==this||s.sourceMesh||(s.material=null,this.releaseVertexArrayObject(s,e))}this._uniformBuffer.dispose(),e&&this._effect&&(this._storeEffectOnSubMeshes||this._effect.dispose(),this._effect=null),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this._onBindObservable&&this._onBindObservable.clear(),this._onUnBindObservable&&this._onUnBindObservable.clear()},e.prototype.releaseVertexArrayObject=function(e,t){if(e.geometry){var n=e.geometry;if(this._storeEffectOnSubMeshes)for(var r=0,i=e.subMeshes;r<i.length;r++){var o=i[r];n._releaseVertexArrayObject(o._materialEffect),t&&o._materialEffect&&o._materialEffect.dispose()}else n._releaseVertexArrayObject(this._effect)}},e.prototype.serialize=function(){return i.a.Serialize(this)},e.Parse=function(e,t,n){if(e.customType){if("BABYLON.PBRMaterial"===e.customType&&e.overloadedAlbedo&&(e.customType="BABYLON.LegacyPBRMaterial",!BABYLON.LegacyPBRMaterial))return d.a.Error("Your scene is trying to load a legacy version of the PBRMaterial, please, include it from the materials library."),null}else e.customType="BABYLON.StandardMaterial";return o.h.Instantiate(e.customType).Parse(e,t,n)},e.TriangleFillMode=h.a.MATERIAL_TriangleFillMode,e.WireFrameFillMode=h.a.MATERIAL_WireFrameFillMode,e.PointFillMode=h.a.MATERIAL_PointFillMode,e.PointListDrawMode=h.a.MATERIAL_PointListDrawMode,e.LineListDrawMode=h.a.MATERIAL_LineListDrawMode,e.LineLoopDrawMode=h.a.MATERIAL_LineLoopDrawMode,e.LineStripDrawMode=h.a.MATERIAL_LineStripDrawMode,e.TriangleStripDrawMode=h.a.MATERIAL_TriangleStripDrawMode,e.TriangleFanDrawMode=h.a.MATERIAL_TriangleFanDrawMode,e.ClockWiseSideOrientation=h.a.MATERIAL_ClockWiseSideOrientation,e.CounterClockWiseSideOrientation=h.a.MATERIAL_CounterClockWiseSideOrientation,e.TextureDirtyFlag=h.a.MATERIAL_TextureDirtyFlag,e.LightDirtyFlag=h.a.MATERIAL_LightDirtyFlag,e.FresnelDirtyFlag=h.a.MATERIAL_FresnelDirtyFlag,e.AttributesDirtyFlag=h.a.MATERIAL_AttributesDirtyFlag,e.MiscDirtyFlag=h.a.MATERIAL_MiscDirtyFlag,e.AllDirtyFlag=h.a.MATERIAL_AllDirtyFlag,e._ImageProcessingDirtyCallBack=function(e){return e.markAsImageProcessingDirty()},e._TextureDirtyCallBack=function(e){return e.markAsTexturesDirty()},e._FresnelDirtyCallBack=function(e){return e.markAsFresnelDirty()},e._MiscDirtyCallBack=function(e){return e.markAsMiscDirty()},e._LightsDirtyCallBack=function(e){return e.markAsLightDirty()},e._AttributeDirtyCallBack=function(e){return e.markAsAttributesDirty()},e._FresnelAndMiscDirtyCallBack=function(t){e._FresnelDirtyCallBack(t),e._MiscDirtyCallBack(t)},e._TextureAndMiscDirtyCallBack=function(t){e._TextureDirtyCallBack(t),e._MiscDirtyCallBack(t)},e._DirtyCallbackArray=[],e._RunDirtyCallBacks=function(t){for(var n=0,r=e._DirtyCallbackArray;n<r.length;n++)(0,r[n])(t)},r.c([Object(i.c)()],e.prototype,"id",void 0),r.c([Object(i.c)()],e.prototype,"uniqueId",void 0),r.c([Object(i.c)()],e.prototype,"name",void 0),r.c([Object(i.c)()],e.prototype,"checkReadyOnEveryCall",void 0),r.c([Object(i.c)()],e.prototype,"checkReadyOnlyOnce",void 0),r.c([Object(i.c)()],e.prototype,"state",void 0),r.c([Object(i.c)("alpha")],e.prototype,"_alpha",void 0),r.c([Object(i.c)("backFaceCulling")],e.prototype,"_backFaceCulling",void 0),r.c([Object(i.c)()],e.prototype,"sideOrientation",void 0),r.c([Object(i.c)("alphaMode")],e.prototype,"_alphaMode",void 0),r.c([Object(i.c)()],e.prototype,"_needDepthPrePass",void 0),r.c([Object(i.c)()],e.prototype,"disableDepthWrite",void 0),r.c([Object(i.c)()],e.prototype,"forceDepthWrite",void 0),r.c([Object(i.c)()],e.prototype,"separateCullingPass",void 0),r.c([Object(i.c)("fogEnabled")],e.prototype,"_fogEnabled",void 0),r.c([Object(i.c)()],e.prototype,"pointSize",void 0),r.c([Object(i.c)()],e.prototype,"zOffset",void 0),r.c([Object(i.c)()],e.prototype,"wireframe",null),r.c([Object(i.c)()],e.prototype,"pointsCloud",null),r.c([Object(i.c)()],e.prototype,"fillMode",null),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n(1),i=n(2),o=n(28),a=n(9),s=n(8),u=n(0),l=n(25),c=n(6),h=n(22),d=n(19),f=function(e){function t(n,r,i,a){void 0===a&&(a=!0);var l=e.call(this,n,i)||this;return l._position=u.x.Zero(),l.upVector=u.x.Up(),l.orthoLeft=null,l.orthoRight=null,l.orthoBottom=null,l.orthoTop=null,l.fov=.8,l.minZ=1,l.maxZ=1e4,l.inertia=.9,l.mode=t.PERSPECTIVE_CAMERA,l.isIntermediate=!1,l.viewport=new u.z(0,0,1,1),l.layerMask=268435455,l.fovMode=t.FOVMODE_VERTICAL_FIXED,l.cameraRigMode=t.RIG_MODE_NONE,l.customRenderTargets=new Array,l.outputRenderTarget=null,l.onViewMatrixChangedObservable=new s.c,l.onProjectionMatrixChangedObservable=new s.c,l.onAfterCheckInputsObservable=new s.c,l.onRestoreStateObservable=new s.c,l._rigCameras=new Array,l._webvrViewMatrix=u.j.Identity(),l._skipRendering=!1,l._projectionMatrix=new u.j,l._postProcesses=new Array,l._activeMeshes=new o.a(256),l._globalPosition=u.x.Zero(),l._computedViewMatrix=u.j.Identity(),l._doNotComputeProjectionMatrix=!1,l._transformMatrix=u.j.Zero(),l._refreshFrustumPlanes=!0,l._isCamera=!0,l._isLeftCamera=!1,l._isRightCamera=!0,l.getScene().addCamera(l),a&&!l.getScene().activeCamera&&(l.getScene().activeCamera=l),l.position=r,l}return r.d(t,e),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e},enumerable:!0,configurable:!0}),t.prototype.storeState=function(){return this._stateStored=!0,this._storedFov=this.fov,this},t.prototype._restoreStateValues=function(){return!!this._stateStored&&(this.fov=this._storedFov,!0)},t.prototype.restoreState=function(){return!!this._restoreStateValues()&&(this.onRestoreStateObservable.notifyObservers(this),!0)},t.prototype.getClassName=function(){return"Camera"},t.prototype.toString=function(e){var t="Name: "+this.name;if(t+=", type: "+this.getClassName(),this.animations)for(var n=0;n<this.animations.length;n++)t+=", animation[0]: "+this.animations[n].toString(e);return t},Object.defineProperty(t.prototype,"globalPosition",{get:function(){return this._globalPosition},enumerable:!0,configurable:!0}),t.prototype.getActiveMeshes=function(){return this._activeMeshes},t.prototype.isActiveMesh=function(e){return-1!==this._activeMeshes.indexOf(e)},t.prototype.isReady=function(t){if(void 0===t&&(t=!1),t)for(var n=0,r=this._postProcesses;n<r.length;n++){var i=r[n];if(i&&!i.isReady())return!1}return e.prototype.isReady.call(this,t)},t.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache.position=new u.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.upVector=new u.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.mode=void 0,this._cache.minZ=void 0,this._cache.maxZ=void 0,this._cache.fov=void 0,this._cache.fovMode=void 0,this._cache.aspectRatio=void 0,this._cache.orthoLeft=void 0,this._cache.orthoRight=void 0,this._cache.orthoBottom=void 0,this._cache.orthoTop=void 0,this._cache.renderWidth=void 0,this._cache.renderHeight=void 0},t.prototype._updateCache=function(t){t||e.prototype._updateCache.call(this),this._cache.position.copyFrom(this.position),this._cache.upVector.copyFrom(this.upVector)},t.prototype._isSynchronized=function(){return this._isSynchronizedViewMatrix()&&this._isSynchronizedProjectionMatrix()},t.prototype._isSynchronizedViewMatrix=function(){return!!e.prototype._isSynchronized.call(this)&&this._cache.position.equals(this.position)&&this._cache.upVector.equals(this.upVector)&&this.isSynchronizedWithParent()},t.prototype._isSynchronizedProjectionMatrix=function(){if(!(this._cache.mode===this.mode&&this._cache.minZ===this.minZ&&this._cache.maxZ===this.maxZ))return!1;var e=this.getEngine();return this.mode===t.PERSPECTIVE_CAMERA?this._cache.fov===this.fov&&this._cache.fovMode===this.fovMode&&this._cache.aspectRatio===e.getAspectRatio(this):this._cache.orthoLeft===this.orthoLeft&&this._cache.orthoRight===this.orthoRight&&this._cache.orthoBottom===this.orthoBottom&&this._cache.orthoTop===this.orthoTop&&this._cache.renderWidth===e.getRenderWidth()&&this._cache.renderHeight===e.getRenderHeight()},t.prototype.attachControl=function(e,t){},t.prototype.detachControl=function(e){},t.prototype.update=function(){this._checkInputs(),this.cameraRigMode!==t.RIG_MODE_NONE&&this._updateRigCameras()},t.prototype._checkInputs=function(){this.onAfterCheckInputsObservable.notifyObservers(this)},Object.defineProperty(t.prototype,"rigCameras",{get:function(){return this._rigCameras},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rigPostProcess",{get:function(){return this._rigPostProcess},enumerable:!0,configurable:!0}),t.prototype._getFirstPostProcess=function(){for(var e=0;e<this._postProcesses.length;e++)if(null!==this._postProcesses[e])return this._postProcesses[e];return null},t.prototype._cascadePostProcessesToRigCams=function(){var e=this._getFirstPostProcess();e&&e.markTextureDirty();for(var t=0,n=this._rigCameras.length;t<n;t++){var r=this._rigCameras[t],i=r._rigPostProcess;i?("pass"===i.getEffectName()&&(r.isIntermediate=0===this._postProcesses.length),r._postProcesses=this._postProcesses.slice(0).concat(i),i.markTextureDirty()):r._postProcesses=this._postProcesses.slice(0)}},t.prototype.attachPostProcess=function(e,t){return void 0===t&&(t=null),!e.isReusable()&&this._postProcesses.indexOf(e)>-1?(c.a.Error("You're trying to reuse a post process not defined as reusable."),0):(null==t||t<0?this._postProcesses.push(e):null===this._postProcesses[t]?this._postProcesses[t]=e:this._postProcesses.splice(t,0,e),this._cascadePostProcessesToRigCams(),this._postProcesses.indexOf(e))},t.prototype.detachPostProcess=function(e){var t=this._postProcesses.indexOf(e);-1!==t&&(this._postProcesses[t]=null),this._cascadePostProcessesToRigCams()},t.prototype.getWorldMatrix=function(){return this._isSynchronizedViewMatrix()?this._worldMatrix:(this.getViewMatrix(),this._worldMatrix)},t.prototype._getViewMatrix=function(){return u.j.Identity()},t.prototype.getViewMatrix=function(e){return!e&&this._isSynchronizedViewMatrix()?this._computedViewMatrix:(this.updateCache(),this._computedViewMatrix=this._getViewMatrix(),this._currentRenderId=this.getScene().getRenderId(),this._childUpdateId++,this._refreshFrustumPlanes=!0,this._cameraRigParams&&this._cameraRigParams.vrPreViewMatrix&&this._computedViewMatrix.multiplyToRef(this._cameraRigParams.vrPreViewMatrix,this._computedViewMatrix),this.parent&&this.parent.onViewMatrixChangedObservable&&this.parent.onViewMatrixChangedObservable.notifyObservers(this.parent),this.onViewMatrixChangedObservable.notifyObservers(this),this._computedViewMatrix.invertToRef(this._worldMatrix),this._computedViewMatrix)},t.prototype.freezeProjectionMatrix=function(e){this._doNotComputeProjectionMatrix=!0,void 0!==e&&(this._projectionMatrix=e)},t.prototype.unfreezeProjectionMatrix=function(){this._doNotComputeProjectionMatrix=!1},t.prototype.getProjectionMatrix=function(e){if(this._doNotComputeProjectionMatrix||!e&&this._isSynchronizedProjectionMatrix())return this._projectionMatrix;this._cache.mode=this.mode,this._cache.minZ=this.minZ,this._cache.maxZ=this.maxZ,this._refreshFrustumPlanes=!0;var n=this.getEngine(),r=this.getScene();if(this.mode===t.PERSPECTIVE_CAMERA)this._cache.fov=this.fov,this._cache.fovMode=this.fovMode,this._cache.aspectRatio=n.getAspectRatio(this),this.minZ<=0&&(this.minZ=.1),r.useRightHandedSystem?u.j.PerspectiveFovRHToRef(this.fov,n.getAspectRatio(this),this.minZ,this.maxZ,this._projectionMatrix,this.fovMode===t.FOVMODE_VERTICAL_FIXED):u.j.PerspectiveFovLHToRef(this.fov,n.getAspectRatio(this),this.minZ,this.maxZ,this._projectionMatrix,this.fovMode===t.FOVMODE_VERTICAL_FIXED);else{var i=n.getRenderWidth()/2,o=n.getRenderHeight()/2;r.useRightHandedSystem?u.j.OrthoOffCenterRHToRef(this.orthoLeft||-i,this.orthoRight||i,this.orthoBottom||-o,this.orthoTop||o,this.minZ,this.maxZ,this._projectionMatrix):u.j.OrthoOffCenterLHToRef(this.orthoLeft||-i,this.orthoRight||i,this.orthoBottom||-o,this.orthoTop||o,this.minZ,this.maxZ,this._projectionMatrix),this._cache.orthoLeft=this.orthoLeft,this._cache.orthoRight=this.orthoRight,this._cache.orthoBottom=this.orthoBottom,this._cache.orthoTop=this.orthoTop,this._cache.renderWidth=n.getRenderWidth(),this._cache.renderHeight=n.getRenderHeight()}return this.onProjectionMatrixChangedObservable.notifyObservers(this),this._projectionMatrix},t.prototype.getTransformationMatrix=function(){return this._computedViewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix),this._transformMatrix},t.prototype._updateFrustumPlanes=function(){this._refreshFrustumPlanes&&(this.getTransformationMatrix(),this._frustumPlanes?u.i.GetPlanesToRef(this._transformMatrix,this._frustumPlanes):this._frustumPlanes=u.i.GetPlanes(this._transformMatrix),this._refreshFrustumPlanes=!1)},t.prototype.isInFrustum=function(e,t){if(void 0===t&&(t=!1),this._updateFrustumPlanes(),t&&this.rigCameras.length>0){var n=!1;return this.rigCameras.forEach(function(t){t._updateFrustumPlanes(),n=n||e.isInFrustum(t._frustumPlanes)}),n}return e.isInFrustum(this._frustumPlanes)},t.prototype.isCompletelyInFrustum=function(e){return this._updateFrustumPlanes(),e.isCompletelyInFrustum(this._frustumPlanes)},t.prototype.getForwardRay=function(e,t,n){throw void 0===e&&(e=100),d.a.WarnImport("Ray")},t.prototype.dispose=function(n,r){for(void 0===r&&(r=!1),this.onViewMatrixChangedObservable.clear(),this.onProjectionMatrixChangedObservable.clear(),this.onAfterCheckInputsObservable.clear(),this.onRestoreStateObservable.clear(),this.inputs&&this.inputs.clear(),this.getScene().stopAnimation(this),this.getScene().removeCamera(this);this._rigCameras.length>0;){var i=this._rigCameras.pop();i&&i.dispose()}if(this._rigPostProcess)this._rigPostProcess.dispose(this),this._rigPostProcess=null,this._postProcesses=[];else if(this.cameraRigMode!==t.RIG_MODE_NONE)this._rigPostProcess=null,this._postProcesses=[];else for(var o=this._postProcesses.length;--o>=0;){var a=this._postProcesses[o];a&&a.dispose(this)}for(o=this.customRenderTargets.length;--o>=0;)this.customRenderTargets[o].dispose();this.customRenderTargets=[],this._activeMeshes.dispose(),e.prototype.dispose.call(this,n,r)},Object.defineProperty(t.prototype,"isLeftCamera",{get:function(){return this._isLeftCamera},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRightCamera",{get:function(){return this._isRightCamera},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftCamera",{get:function(){return this._rigCameras.length<1?null:this._rigCameras[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightCamera",{get:function(){return this._rigCameras.length<2?null:this._rigCameras[1]},enumerable:!0,configurable:!0}),t.prototype.getLeftTarget=function(){return this._rigCameras.length<1?null:this._rigCameras[0].getTarget()},t.prototype.getRightTarget=function(){return this._rigCameras.length<2?null:this._rigCameras[1].getTarget()},t.prototype.setCameraRigMode=function(e,n){if(this.cameraRigMode!==e){for(;this._rigCameras.length>0;){var r=this._rigCameras.pop();r&&r.dispose()}if(this.cameraRigMode=e,this._cameraRigParams={},this._cameraRigParams.interaxialDistance=n.interaxialDistance||.0637,this._cameraRigParams.stereoHalfAngle=a.h.ToRadians(this._cameraRigParams.interaxialDistance/.0637),this.cameraRigMode!==t.RIG_MODE_NONE){var i=this.createRigCamera(this.name+"_L",0);i&&(i._isLeftCamera=!0);var o=this.createRigCamera(this.name+"_R",1);o&&(o._isRightCamera=!0),i&&o&&(this._rigCameras.push(i),this._rigCameras.push(o))}switch(this.cameraRigMode){case t.RIG_MODE_STEREOSCOPIC_ANAGLYPH:t._setStereoscopicAnaglyphRigMode(this);break;case t.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case t.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:case t.RIG_MODE_STEREOSCOPIC_OVERUNDER:t._setStereoscopicRigMode(this);break;case t.RIG_MODE_VR:t._setVRRigMode(this,n);break;case t.RIG_MODE_WEBVR:t._setWebVRRigMode(this,n)}this._cascadePostProcessesToRigCams(),this.update()}},t._setStereoscopicRigMode=function(e){throw"Import Cameras/RigModes/stereoscopicRigMode before using stereoscopic rig mode"},t._setStereoscopicAnaglyphRigMode=function(e){throw"Import Cameras/RigModes/stereoscopicAnaglyphRigMode before using stereoscopic anaglyph rig mode"},t._setVRRigMode=function(e,t){throw"Import Cameras/RigModes/vrRigMode before using VR rig mode"},t._setWebVRRigMode=function(e,t){throw"Import Cameras/RigModes/WebVRRigMode before using Web VR rig mode"},t.prototype._getVRProjectionMatrix=function(){return u.j.PerspectiveFovLHToRef(this._cameraRigParams.vrMetrics.aspectRatioFov,this._cameraRigParams.vrMetrics.aspectRatio,this.minZ,this.maxZ,this._cameraRigParams.vrWorkMatrix),this._cameraRigParams.vrWorkMatrix.multiplyToRef(this._cameraRigParams.vrHMatrix,this._projectionMatrix),this._projectionMatrix},t.prototype._updateCameraRotationMatrix=function(){},t.prototype._updateWebVRCameraRotationMatrix=function(){},t.prototype._getWebVRProjectionMatrix=function(){return u.j.Identity()},t.prototype._getWebVRViewMatrix=function(){return u.j.Identity()},t.prototype.setCameraRigParameter=function(e,t){this._cameraRigParams||(this._cameraRigParams={}),this._cameraRigParams[e]=t,"interaxialDistance"===e&&(this._cameraRigParams.stereoHalfAngle=a.h.ToRadians(t/.0637))},t.prototype.createRigCamera=function(e,t){return null},t.prototype._updateRigCameras=function(){for(var e=0;e<this._rigCameras.length;e++)this._rigCameras[e].minZ=this.minZ,this._rigCameras[e].maxZ=this.maxZ,this._rigCameras[e].fov=this.fov,this._rigCameras[e].upVector.copyFrom(this.upVector);this.cameraRigMode===t.RIG_MODE_STEREOSCOPIC_ANAGLYPH&&(this._rigCameras[0].viewport=this._rigCameras[1].viewport=this.viewport)},t.prototype._setupInputs=function(){},t.prototype.serialize=function(){var e=i.a.Serialize(this);return e.type=this.getClassName(),this.parent&&(e.parentId=this.parent.id),this.inputs&&this.inputs.serialize(e),i.a.AppendSerializedAnimations(this,e),e.ranges=this.serializeAnimationRanges(),e},t.prototype.clone=function(e){return i.a.Clone(t.GetConstructorFromName(this.getClassName(),e,this.getScene(),this.interaxialDistance,this.isStereoscopicSideBySide),this)},t.prototype.getDirection=function(e){var t=u.x.Zero();return this.getDirectionToRef(e,t),t},t.prototype.getDirectionToRef=function(e,t){u.x.TransformNormalToRef(e,this.getWorldMatrix(),t)},t.GetConstructorFromName=function(e,n,r,i,o){return void 0===i&&(i=0),void 0===o&&(o=!0),l.a.Construct(e,n,r,{interaxial_distance:i,isStereoscopicSideBySide:o})||function(){return t._createDefaultParsedCamera(n,r)}},t.prototype.computeWorldMatrix=function(){return this.getWorldMatrix()},t.Parse=function(e,n){var r=t.GetConstructorFromName(e.type,e.name,n,e.interaxial_distance,e.isStereoscopicSideBySide),o=i.a.Parse(r,e,n);if(e.parentId&&(o._waitingParentId=e.parentId),o.inputs&&(o.inputs.parse(e),o._setupInputs()),o.setPosition&&(o.position.copyFromFloats(0,0,0),o.setPosition(u.x.FromArray(e.position))),e.target&&o.setTarget&&o.setTarget(u.x.FromArray(e.target)),e.cameraRigMode&&o.setCameraRigMode(e.cameraRigMode,e.interaxial_distance?{interaxialDistance:e.interaxial_distance}:{}),e.animations){for(var a=0;a<e.animations.length;a++){var s=e.animations[a],c=h.a.GetClass("BABYLON.Animation");c&&o.animations.push(c.Parse(s))}l.a.ParseAnimationRanges(o,e,n)}return e.autoAnimate&&n.beginAnimation(o,e.autoAnimateFrom,e.autoAnimateTo,e.autoAnimateLoop,e.autoAnimateSpeed||1),o},t._createDefaultParsedCamera=function(e,t){throw d.a.WarnImport("UniversalCamera")},t.PERSPECTIVE_CAMERA=0,t.ORTHOGRAPHIC_CAMERA=1,t.FOVMODE_VERTICAL_FIXED=0,t.FOVMODE_HORIZONTAL_FIXED=1,t.RIG_MODE_NONE=0,t.RIG_MODE_STEREOSCOPIC_ANAGLYPH=10,t.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL=11,t.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED=12,t.RIG_MODE_STEREOSCOPIC_OVERUNDER=13,t.RIG_MODE_VR=20,t.RIG_MODE_WEBVR=21,t.RIG_MODE_CUSTOM=22,t.ForceAttachControlToAlwaysPreventDefault=!1,r.c([Object(i.o)("position")],t.prototype,"_position",void 0),r.c([Object(i.o)()],t.prototype,"upVector",void 0),r.c([Object(i.c)()],t.prototype,"orthoLeft",void 0),r.c([Object(i.c)()],t.prototype,"orthoRight",void 0),r.c([Object(i.c)()],t.prototype,"orthoBottom",void 0),r.c([Object(i.c)()],t.prototype,"orthoTop",void 0),r.c([Object(i.c)()],t.prototype,"fov",void 0),r.c([Object(i.c)()],t.prototype,"minZ",void 0),r.c([Object(i.c)()],t.prototype,"maxZ",void 0),r.c([Object(i.c)()],t.prototype,"inertia",void 0),r.c([Object(i.c)()],t.prototype,"mode",void 0),r.c([Object(i.c)()],t.prototype,"layerMask",void 0),r.c([Object(i.c)()],t.prototype,"fovMode",void 0),r.c([Object(i.c)()],t.prototype,"cameraRigMode",void 0),r.c([Object(i.c)()],t.prototype,"interaxialDistance",void 0),r.c([Object(i.c)()],t.prototype,"isStereoscopicSideBySide",void 0),t}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.GetClass=function(e){return this.RegisteredTypes&&this.RegisteredTypes[e]?this.RegisteredTypes[e]:null},e.RegisteredTypes={},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return Object.defineProperty(e,"LastCreatedEngine",{get:function(){return 0===this.Instances.length?null:this.Instances[this.Instances.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LastCreatedScene",{get:function(){return this._LastCreatedScene},enumerable:!0,configurable:!0}),e.Instances=new Array,e._LastCreatedScene=null,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return v});var r=n(1),i=n(9),o=n(8),a=n(0),s=n(10),u=n(4),l=n(13),c=n(42),h=n(50),d=n(43),f=n(3),p=n(108),_=n(19),m=function(){this.facetNb=0,this.partitioningSubdivisions=10,this.partitioningBBoxRatio=1.01,this.facetDataEnabled=!1,this.facetParameters={},this.bbSize=a.x.Zero(),this.subDiv={max:1,X:1,Y:1,Z:1},this.facetDepthSort=!1,this.facetDepthSortEnabled=!1},g=function(){this._hasVertexAlpha=!1,this._useVertexColors=!0,this._numBoneInfluencers=4,this._applyFog=!0,this._receiveShadows=!1,this._facetData=new m,this._visibility=1,this._skeleton=null,this._layerMask=268435455,this._computeBonesUsingShaders=!0,this._isActive=!1,this._onlyForInstances=!1,this._isActiveIntermediate=!1,this._onlyForInstancesIntermediate=!1},v=function(e){function t(n,r){void 0===r&&(r=null);var i=e.call(this,n,r,!1)||this;return i._internalAbstractMeshDataInfo=new g,i.cullingStrategy=t.CULLINGSTRATEGY_STANDARD,i.onCollideObservable=new o.c,i.onCollisionPositionChangeObservable=new o.c,i.onMaterialChangedObservable=new o.c,i.definedFacingForward=!0,i._occlusionQuery=null,i._renderingGroup=null,i.alphaIndex=Number.MAX_VALUE,i.isVisible=!0,i.isPickable=!0,i.showSubMeshesBoundingBox=!1,i.isBlocker=!1,i.enablePointerMoveEvents=!1,i.renderingGroupId=0,i._material=null,i.outlineColor=a.e.Red(),i.outlineWidth=.02,i.overlayColor=a.e.Red(),i.overlayAlpha=.5,i.useOctreeForRenderingSelection=!0,i.useOctreeForPicking=!0,i.useOctreeForCollisions=!0,i.alwaysSelectAsActiveMesh=!1,i.doNotSyncBoundingInfo=!1,i.actionManager=null,i._meshCollisionData=new p.a,i.ellipsoid=new a.x(.5,1,.5),i.ellipsoidOffset=new a.x(0,0,0),i.edgesWidth=1,i.edgesColor=new a.f(1,0,0,1),i._edgesRenderer=null,i._masterMesh=null,i._boundingInfo=null,i._renderId=0,i._intersectionsInProgress=new Array,i._unIndexed=!1,i._lightSources=new Array,i._waitingData={lods:null,actions:null,freezeWorldMatrix:null},i._bonesTransformMatrices=null,i.onRebuildObservable=new o.c,i._onCollisionPositionChange=function(e,t,n){void 0===n&&(n=null),t.subtractToRef(i._meshCollisionData._oldPositionForCollisions,i._meshCollisionData._diffPositionForCollisions),i._meshCollisionData._diffPositionForCollisions.length()>s.b.CollisionsEpsilon&&i.position.addInPlace(i._meshCollisionData._diffPositionForCollisions),n&&i.onCollideObservable.notifyObservers(n),i.onCollisionPositionChangeObservable.notifyObservers(i.position)},i.getScene().addMesh(i),i._resyncLightSources(),i}return r.d(t,e),Object.defineProperty(t,"BILLBOARDMODE_NONE",{get:function(){return c.a.BILLBOARDMODE_NONE},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BILLBOARDMODE_X",{get:function(){return c.a.BILLBOARDMODE_X},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BILLBOARDMODE_Y",{get:function(){return c.a.BILLBOARDMODE_Y},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BILLBOARDMODE_Z",{get:function(){return c.a.BILLBOARDMODE_Z},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BILLBOARDMODE_ALL",{get:function(){return c.a.BILLBOARDMODE_ALL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"facetNb",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetNb},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"partitioningSubdivisions",{get:function(){return this._internalAbstractMeshDataInfo._facetData.partitioningSubdivisions},set:function(e){this._internalAbstractMeshDataInfo._facetData.partitioningSubdivisions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"partitioningBBoxRatio",{get:function(){return this._internalAbstractMeshDataInfo._facetData.partitioningBBoxRatio},set:function(e){this._internalAbstractMeshDataInfo._facetData.partitioningBBoxRatio=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mustDepthSortFacets",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetDepthSort},set:function(e){this._internalAbstractMeshDataInfo._facetData.facetDepthSort=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"facetDepthSortFrom",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetDepthSortFrom},set:function(e){this._internalAbstractMeshDataInfo._facetData.facetDepthSortFrom=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isFacetDataEnabled",{get:function(){return this._internalAbstractMeshDataInfo._facetData.facetDataEnabled},enumerable:!0,configurable:!0}),t.prototype._updateNonUniformScalingState=function(t){return!!e.prototype._updateNonUniformScalingState.call(this,t)&&(this._markSubMeshesAsMiscDirty(),!0)},Object.defineProperty(t.prototype,"onCollide",{set:function(e){this._meshCollisionData._onCollideObserver&&this.onCollideObservable.remove(this._meshCollisionData._onCollideObserver),this._meshCollisionData._onCollideObserver=this.onCollideObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onCollisionPositionChange",{set:function(e){this._meshCollisionData._onCollisionPositionChangeObserver&&this.onCollisionPositionChangeObservable.remove(this._meshCollisionData._onCollisionPositionChangeObserver),this._meshCollisionData._onCollisionPositionChangeObserver=this.onCollisionPositionChangeObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibility",{get:function(){return this._internalAbstractMeshDataInfo._visibility},set:function(e){this._internalAbstractMeshDataInfo._visibility!==e&&(this._internalAbstractMeshDataInfo._visibility=e,this._markSubMeshesAsMiscDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this._material},set:function(e){this._material!==e&&(this._material&&this._material.meshMap&&(this._material.meshMap[this.uniqueId]=void 0),this._material=e,e&&e.meshMap&&(e.meshMap[this.uniqueId]=this),this.onMaterialChangedObservable.hasObservers&&this.onMaterialChangedObservable.notifyObservers(this),this.subMeshes&&this._unBindEffect())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"receiveShadows",{get:function(){return this._internalAbstractMeshDataInfo._receiveShadows},set:function(e){this._internalAbstractMeshDataInfo._receiveShadows!==e&&(this._internalAbstractMeshDataInfo._receiveShadows=e,this._markSubMeshesAsLightDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasVertexAlpha",{get:function(){return this._internalAbstractMeshDataInfo._hasVertexAlpha},set:function(e){this._internalAbstractMeshDataInfo._hasVertexAlpha!==e&&(this._internalAbstractMeshDataInfo._hasVertexAlpha=e,this._markSubMeshesAsAttributesDirty(),this._markSubMeshesAsMiscDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useVertexColors",{get:function(){return this._internalAbstractMeshDataInfo._useVertexColors},set:function(e){this._internalAbstractMeshDataInfo._useVertexColors!==e&&(this._internalAbstractMeshDataInfo._useVertexColors=e,this._markSubMeshesAsAttributesDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"computeBonesUsingShaders",{get:function(){return this._internalAbstractMeshDataInfo._computeBonesUsingShaders},set:function(e){this._internalAbstractMeshDataInfo._computeBonesUsingShaders!==e&&(this._internalAbstractMeshDataInfo._computeBonesUsingShaders=e,this._markSubMeshesAsAttributesDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numBoneInfluencers",{get:function(){return this._internalAbstractMeshDataInfo._numBoneInfluencers},set:function(e){this._internalAbstractMeshDataInfo._numBoneInfluencers!==e&&(this._internalAbstractMeshDataInfo._numBoneInfluencers=e,this._markSubMeshesAsAttributesDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"applyFog",{get:function(){return this._internalAbstractMeshDataInfo._applyFog},set:function(e){this._internalAbstractMeshDataInfo._applyFog!==e&&(this._internalAbstractMeshDataInfo._applyFog=e,this._markSubMeshesAsMiscDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"layerMask",{get:function(){return this._internalAbstractMeshDataInfo._layerMask},set:function(e){e!==this._internalAbstractMeshDataInfo._layerMask&&(this._internalAbstractMeshDataInfo._layerMask=e,this._resyncLightSources())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collisionMask",{get:function(){return this._meshCollisionData._collisionMask},set:function(e){this._meshCollisionData._collisionMask=isNaN(e)?-1:e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collisionGroup",{get:function(){return this._meshCollisionData._collisionGroup},set:function(e){this._meshCollisionData._collisionGroup=isNaN(e)?-1:e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lightSources",{get:function(){return this._lightSources},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_positions",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skeleton",{get:function(){return this._internalAbstractMeshDataInfo._skeleton},set:function(e){var t=this._internalAbstractMeshDataInfo._skeleton;t&&t.needInitialSkinMatrix&&t._unregisterMeshWithPoseMatrix(this),e&&e.needInitialSkinMatrix&&e._registerMeshWithPoseMatrix(this),this._internalAbstractMeshDataInfo._skeleton=e,this._internalAbstractMeshDataInfo._skeleton||(this._bonesTransformMatrices=null),this._markSubMeshesAsAttributesDirty()},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"AbstractMesh"},t.prototype.toString=function(e){var t="Name: "+this.name+", isInstance: "+("InstancedMesh"!==this.getClassName()?"YES":"NO");t+=", # of submeshes: "+(this.subMeshes?this.subMeshes.length:0);var n=this._internalAbstractMeshDataInfo._skeleton;return n&&(t+=", skeleton: "+n.name),e&&(t+=", billboard mode: "+["NONE","X","Y",null,"Z",null,null,"ALL"][this.billboardMode],t+=", freeze wrld mat: "+(this._isWorldMatrixFrozen||this._waitingData.freezeWorldMatrix?"YES":"NO")),t},t.prototype._getEffectiveParent=function(){return this._masterMesh&&this.billboardMode!==c.a.BILLBOARDMODE_NONE?this._masterMesh:e.prototype._getEffectiveParent.call(this)},t.prototype._getActionManagerForTrigger=function(e,t){if(void 0===t&&(t=!0),this.actionManager&&(t||this.actionManager.isRecursive)){if(!e)return this.actionManager;if(this.actionManager.hasSpecificTrigger(e))return this.actionManager}return this.parent?this.parent._getActionManagerForTrigger(e,!1):null},t.prototype._rebuild=function(){if(this.onRebuildObservable.notifyObservers(this),this._occlusionQuery&&(this._occlusionQuery=null),this.subMeshes)for(var e=0,t=this.subMeshes;e<t.length;e++)t[e]._rebuild()},t.prototype._resyncLightSources=function(){this._lightSources.length=0;for(var e=0,t=this.getScene().lights;e<t.length;e++){var n=t[e];n.isEnabled()&&n.canAffectMesh(this)&&this._lightSources.push(n)}this._markSubMeshesAsLightDirty()},t.prototype._resyncLighSource=function(e){var t=e.isEnabled()&&e.canAffectMesh(this),n=this._lightSources.indexOf(e);if(-1===n){if(!t)return;this._lightSources.push(e)}else{if(t)return;this._lightSources.splice(n,1)}this._markSubMeshesAsLightDirty()},t.prototype._unBindEffect=function(){for(var e=0,t=this.subMeshes;e<t.length;e++)t[e].setEffect(null)},t.prototype._removeLightSource=function(e){var t=this._lightSources.indexOf(e);-1!==t&&(this._lightSources.splice(t,1),this._markSubMeshesAsLightDirty())},t.prototype._markSubMeshesAsDirty=function(e){if(this.subMeshes)for(var t=0,n=this.subMeshes;t<n.length;t++){var r=n[t];r._materialDefines&&e(r._materialDefines)}},t.prototype._markSubMeshesAsLightDirty=function(){this._markSubMeshesAsDirty(function(e){return e.markAsLightDirty()})},t.prototype._markSubMeshesAsAttributesDirty=function(){this._markSubMeshesAsDirty(function(e){return e.markAsAttributesDirty()})},t.prototype._markSubMeshesAsMiscDirty=function(){if(this.subMeshes)for(var e=0,t=this.subMeshes;e<t.length;e++){var n=t[e].getMaterial();n&&n.markAsDirty(f.a.MATERIAL_MiscDirtyFlag)}},Object.defineProperty(t.prototype,"scaling",{get:function(){return this._scaling},set:function(e){this._scaling=e,this.physicsImpostor&&this.physicsImpostor.forceUpdate()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBlocked",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.getLOD=function(e){return this},t.prototype.getTotalVertices=function(){return 0},t.prototype.getTotalIndices=function(){return 0},t.prototype.getIndices=function(){return null},t.prototype.getVerticesData=function(e){return null},t.prototype.setVerticesData=function(e,t,n,r){return this},t.prototype.updateVerticesData=function(e,t,n,r){return this},t.prototype.setIndices=function(e,t){return this},t.prototype.isVerticesDataPresent=function(e){return!1},t.prototype.getBoundingInfo=function(){return this._masterMesh?this._masterMesh.getBoundingInfo():(this._boundingInfo||this._updateBoundingInfo(),this._boundingInfo)},t.prototype.normalizeToUnitCube=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1);var n=null,r=null;t&&(this.rotationQuaternion?(r=this.rotationQuaternion.clone(),this.rotationQuaternion.copyFromFloats(0,0,0,1)):this.rotation&&(n=this.rotation.clone(),this.rotation.copyFromFloats(0,0,0)));var i=this.getHierarchyBoundingVectors(e),o=i.max.subtract(i.min),a=Math.max(o.x,o.y,o.z);return 0===a?this:(this.scaling.scaleInPlace(1/a),t&&(this.rotationQuaternion&&r?this.rotationQuaternion.copyFrom(r):this.rotation&&n&&this.rotation.copyFrom(n)),this)},t.prototype.setBoundingInfo=function(e){return this._boundingInfo=e,this},Object.defineProperty(t.prototype,"useBones",{get:function(){return this.skeleton&&this.getScene().skeletonsEnabled&&this.isVerticesDataPresent(u.b.MatricesIndicesKind)&&this.isVerticesDataPresent(u.b.MatricesWeightsKind)},enumerable:!0,configurable:!0}),t.prototype._preActivate=function(){},t.prototype._preActivateForIntermediateRendering=function(e){},t.prototype._activate=function(e,t){return this._renderId=e,!0},t.prototype._postActivate=function(){},t.prototype._freeze=function(){},t.prototype._unFreeze=function(){},t.prototype.getWorldMatrix=function(){return this._masterMesh&&this.billboardMode===c.a.BILLBOARDMODE_NONE?this._masterMesh.getWorldMatrix():e.prototype.getWorldMatrix.call(this)},t.prototype._getWorldMatrixDeterminant=function(){return this._masterMesh?this._masterMesh._getWorldMatrixDeterminant():e.prototype._getWorldMatrixDeterminant.call(this)},Object.defineProperty(t.prototype,"isAnInstance",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.movePOV=function(e,t,n){return this.position.addInPlace(this.calcMovePOV(e,t,n)),this},t.prototype.calcMovePOV=function(e,t,n){var r=new a.j;(this.rotationQuaternion?this.rotationQuaternion:a.q.RotationYawPitchRoll(this.rotation.y,this.rotation.x,this.rotation.z)).toRotationMatrix(r);var i=a.x.Zero(),o=this.definedFacingForward?-1:1;return a.x.TransformCoordinatesFromFloatsToRef(e*o,t,n*o,r,i),i},t.prototype.rotatePOV=function(e,t,n){return this.rotation.addInPlace(this.calcRotatePOV(e,t,n)),this},t.prototype.calcRotatePOV=function(e,t,n){var r=this.definedFacingForward?1:-1;return new a.x(e*r,t,n*r)},t.prototype.refreshBoundingInfo=function(e){return void 0===e&&(e=!1),this._boundingInfo&&this._boundingInfo.isLocked?this:(this._refreshBoundingInfo(this._getPositionData(e),null),this)},t.prototype._refreshBoundingInfo=function(e,t){if(e){var n=i.h.ExtractMinAndMax(e,0,this.getTotalVertices(),t);this._boundingInfo?this._boundingInfo.reConstruct(n.minimum,n.maximum):this._boundingInfo=new d.a(n.minimum,n.maximum)}if(this.subMeshes)for(var r=0;r<this.subMeshes.length;r++)this.subMeshes[r].refreshBoundingInfo(e);this._updateBoundingInfo()},t.prototype._getPositionData=function(e){var t=this.getVerticesData(u.b.PositionKind);if(t&&e&&this.skeleton){t=i.h.Slice(t),this._generatePointsArray();var n=this.getVerticesData(u.b.MatricesIndicesKind),r=this.getVerticesData(u.b.MatricesWeightsKind);if(r&&n){var o=this.numBoneInfluencers>4,s=o?this.getVerticesData(u.b.MatricesIndicesExtraKind):null,l=o?this.getVerticesData(u.b.MatricesWeightsExtraKind):null;this.skeleton.prepare();for(var c=this.skeleton.getTransformMatrices(this),h=a.t.Vector3[0],d=a.t.Matrix[0],f=a.t.Matrix[1],p=0,_=0;_<t.length;_+=3,p+=4){var m,g;for(d.reset(),m=0;m<4;m++)(g=r[p+m])>0&&(a.j.FromFloat32ArrayToRefScaled(c,Math.floor(16*n[p+m]),g,f),d.addToSelf(f));if(o)for(m=0;m<4;m++)(g=l[p+m])>0&&(a.j.FromFloat32ArrayToRefScaled(c,Math.floor(16*s[p+m]),g,f),d.addToSelf(f));a.x.TransformCoordinatesFromFloatsToRef(t[_],t[_+1],t[_+2],d,h),h.toArray(t,_),this._positions&&this._positions[_/3].copyFrom(h)}}}return t},t.prototype._updateBoundingInfo=function(){var e=this._effectiveMesh;return this._boundingInfo?this._boundingInfo.update(e.worldMatrixFromCache):this._boundingInfo=new d.a(this.absolutePosition,this.absolutePosition,e.worldMatrixFromCache),this._updateSubMeshesBoundingInfo(e.worldMatrixFromCache),this},t.prototype._updateSubMeshesBoundingInfo=function(e){if(!this.subMeshes)return this;for(var t=this.subMeshes.length,n=0;n<t;n++){var r=this.subMeshes[n];(t>1||!r.IsGlobal)&&r.updateBoundingInfo(e)}return this},t.prototype._afterComputeWorldMatrix=function(){this.doNotSyncBoundingInfo||this._updateBoundingInfo()},Object.defineProperty(t.prototype,"_effectiveMesh",{get:function(){return this.skeleton&&this.skeleton.overrideMesh||this},enumerable:!0,configurable:!0}),t.prototype.isInFrustum=function(e){return null!==this._boundingInfo&&this._boundingInfo.isInFrustum(e,this.cullingStrategy)},t.prototype.isCompletelyInFrustum=function(e){return null!==this._boundingInfo&&this._boundingInfo.isCompletelyInFrustum(e)},t.prototype.intersectsMesh=function(e,t,n){if(void 0===t&&(t=!1),!this._boundingInfo||!e._boundingInfo)return!1;if(this._boundingInfo.intersects(e._boundingInfo,t))return!0;if(n)for(var r=0,i=this.getChildMeshes();r<i.length;r++)if(i[r].intersectsMesh(e,t,!0))return!0;return!1},t.prototype.intersectsPoint=function(e){return!!this._boundingInfo&&this._boundingInfo.intersectsPoint(e)},Object.defineProperty(t.prototype,"checkCollisions",{get:function(){return this._meshCollisionData._checkCollisions},set:function(e){this._meshCollisionData._checkCollisions=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collider",{get:function(){return this._meshCollisionData._collider},enumerable:!0,configurable:!0}),t.prototype.moveWithCollisions=function(e){this.getAbsolutePosition().addToRef(this.ellipsoidOffset,this._meshCollisionData._oldPositionForCollisions);var t=this.getScene().collisionCoordinator;return this._meshCollisionData._collider||(this._meshCollisionData._collider=t.createCollider()),this._meshCollisionData._collider._radius=this.ellipsoid,t.getNewPosition(this._meshCollisionData._oldPositionForCollisions,e,this._meshCollisionData._collider,3,this,this._onCollisionPositionChange,this.uniqueId),this},t.prototype._collideForSubMesh=function(e,t,n){if(this._generatePointsArray(),!this._positions)return this;if(!e._lastColliderWorldVertices||!e._lastColliderTransformMatrix.equals(t)){e._lastColliderTransformMatrix=t.clone(),e._lastColliderWorldVertices=[],e._trianglePlanes=[];for(var r=e.verticesStart+e.verticesCount,i=e.verticesStart;i<r;i++)e._lastColliderWorldVertices.push(a.x.TransformCoordinates(this._positions[i],t))}return n._collide(e._trianglePlanes,e._lastColliderWorldVertices,this.getIndices(),e.indexStart,e.indexStart+e.indexCount,e.verticesStart,!!e.getMaterial()),n.collisionFound&&(n.collidedMesh=this),this},t.prototype._processCollisionsForSubMeshes=function(e,t){for(var n=this._scene.getCollidingSubMeshCandidates(this,e),r=n.length,i=0;i<r;i++){var o=n.data[i];r>1&&!o._checkCollision(e)||this._collideForSubMesh(o,t,e)}return this},t.prototype._checkCollision=function(e){if(!this._boundingInfo||!this._boundingInfo._checkCollision(e))return this;var t=a.t.Matrix[0],n=a.t.Matrix[1];return a.j.ScalingToRef(1/e._radius.x,1/e._radius.y,1/e._radius.z,t),this.worldMatrixFromCache.multiplyToRef(t,n),this._processCollisionsForSubMeshes(e,n),this},t.prototype._generatePointsArray=function(){return!1},t.prototype.intersects=function(e,t,n){var r=new h.a,i="InstancedLinesMesh"===this.getClassName()||"LinesMesh"===this.getClassName()?this.intersectionThreshold:0,o=this._boundingInfo;if(!(this.subMeshes&&o&&e.intersectsSphere(o.boundingSphere,i)&&e.intersectsBox(o.boundingBox,i)))return r;if(!this._generatePointsArray())return r;for(var s=null,u=this._scene.getIntersectingSubMeshCandidates(this,e),l=u.length,c=0;c<l;c++){var d=u.data[c];if(!(l>1)||d.canIntersects(e)){var f=d.intersects(e,this._positions,this.getIndices(),t,n);if(f&&(t||!s||f.distance<s.distance)&&((s=f).subMeshId=c,t))break}}if(s){var p=this.getWorldMatrix(),_=a.t.Vector3[0],m=a.t.Vector3[1];a.x.TransformCoordinatesToRef(e.origin,p,_),e.direction.scaleToRef(s.distance,m);var g=a.x.TransformNormal(m,p).addInPlace(_);return r.hit=!0,r.distance=a.x.Distance(_,g),r.pickedPoint=g,r.pickedMesh=this,r.bu=s.bu||0,r.bv=s.bv||0,r.faceId=s.faceId,r.subMeshId=s.subMeshId,r}return r},t.prototype.clone=function(e,t,n){return null},t.prototype.releaseSubMeshes=function(){if(this.subMeshes)for(;this.subMeshes.length;)this.subMeshes[0].dispose();else this.subMeshes=new Array;return this},t.prototype.dispose=function(t,n){var r,i=this;for(void 0===n&&(n=!1),this.getScene().freeActiveMeshes(),this.getScene().freeRenderingGroups(),null!=this.actionManager&&(this.actionManager.dispose(),this.actionManager=null),this._internalAbstractMeshDataInfo._skeleton=null,r=0;r<this._intersectionsInProgress.length;r++){var o=this._intersectionsInProgress[r],a=o._intersectionsInProgress.indexOf(this);o._intersectionsInProgress.splice(a,1)}this._intersectionsInProgress=[],this.getScene().lights.forEach(function(e){var t=e.includedOnlyMeshes.indexOf(i);-1!==t&&e.includedOnlyMeshes.splice(t,1),-1!==(t=e.excludedMeshes.indexOf(i))&&e.excludedMeshes.splice(t,1);var n=e.getShadowGenerator();if(n){var r=n.getShadowMap();r&&r.renderList&&-1!==(t=r.renderList.indexOf(i))&&r.renderList.splice(t,1)}}),"InstancedMesh"===this.getClassName()&&"InstancedLinesMesh"===this.getClassName()||this.releaseSubMeshes();var s=this.getScene().getEngine();if(this._occlusionQuery&&(this.isOcclusionQueryInProgress=!1,s.deleteQuery(this._occlusionQuery),this._occlusionQuery=null),s.wipeCaches(),this.getScene().removeMesh(this),n&&this.material&&("MultiMaterial"===this.material.getClassName()?this.material.dispose(!1,!0,!0):this.material.dispose(!1,!0)),!t)for(r=0;r<this.getScene().particleSystems.length;r++)this.getScene().particleSystems[r].emitter===this&&(this.getScene().particleSystems[r].dispose(),r--);this._internalAbstractMeshDataInfo._facetData.facetDataEnabled&&this.disableFacetData(),this.onAfterWorldMatrixUpdateObservable.clear(),this.onCollideObservable.clear(),this.onCollisionPositionChangeObservable.clear(),this.onRebuildObservable.clear(),e.prototype.dispose.call(this,t,n)},t.prototype.addChild=function(e){return e.setParent(this),this},t.prototype.removeChild=function(e){return e.setParent(null),this},t.prototype._initFacetData=function(){var e=this._internalAbstractMeshDataInfo._facetData;e.facetNormals||(e.facetNormals=new Array),e.facetPositions||(e.facetPositions=new Array),e.facetPartitioning||(e.facetPartitioning=new Array),e.facetNb=this.getIndices().length/3|0,e.partitioningSubdivisions=e.partitioningSubdivisions?e.partitioningSubdivisions:10,e.partitioningBBoxRatio=e.partitioningBBoxRatio?e.partitioningBBoxRatio:1.01;for(var t=0;t<e.facetNb;t++)e.facetNormals[t]=a.x.Zero(),e.facetPositions[t]=a.x.Zero();return e.facetDataEnabled=!0,this},t.prototype.updateFacetData=function(){var e=this._internalAbstractMeshDataInfo._facetData;e.facetDataEnabled||this._initFacetData();var t=this.getVerticesData(u.b.PositionKind),n=this.getIndices(),r=this.getVerticesData(u.b.NormalKind),i=this.getBoundingInfo();if(e.facetDepthSort&&!e.facetDepthSortEnabled){if(e.facetDepthSortEnabled=!0,n instanceof Uint16Array)e.depthSortedIndices=new Uint16Array(n);else if(n instanceof Uint32Array)e.depthSortedIndices=new Uint32Array(n);else{for(var o=!1,s=0;s<n.length;s++)if(n[s]>65535){o=!0;break}e.depthSortedIndices=o?new Uint32Array(n):new Uint16Array(n)}if(e.facetDepthSortFunction=function(e,t){return t.sqDistance-e.sqDistance},!e.facetDepthSortFrom){var c=this.getScene().activeCamera;e.facetDepthSortFrom=c?c.position:a.x.Zero()}e.depthSortedFacets=[];for(var h=0;h<e.facetNb;h++)e.depthSortedFacets.push({ind:3*h,sqDistance:0});e.invertedMatrix=a.j.Identity(),e.facetDepthSortOrigin=a.x.Zero()}e.bbSize.x=i.maximum.x-i.minimum.x>a.h?i.maximum.x-i.minimum.x:a.h,e.bbSize.y=i.maximum.y-i.minimum.y>a.h?i.maximum.y-i.minimum.y:a.h,e.bbSize.z=i.maximum.z-i.minimum.z>a.h?i.maximum.z-i.minimum.z:a.h;var d=e.bbSize.x>e.bbSize.y?e.bbSize.x:e.bbSize.y;if(d=d>e.bbSize.z?d:e.bbSize.z,e.subDiv.max=e.partitioningSubdivisions,e.subDiv.X=Math.floor(e.subDiv.max*e.bbSize.x/d),e.subDiv.Y=Math.floor(e.subDiv.max*e.bbSize.y/d),e.subDiv.Z=Math.floor(e.subDiv.max*e.bbSize.z/d),e.subDiv.X=e.subDiv.X<1?1:e.subDiv.X,e.subDiv.Y=e.subDiv.Y<1?1:e.subDiv.Y,e.subDiv.Z=e.subDiv.Z<1?1:e.subDiv.Z,e.facetParameters.facetNormals=this.getFacetLocalNormals(),e.facetParameters.facetPositions=this.getFacetLocalPositions(),e.facetParameters.facetPartitioning=this.getFacetLocalPartitioning(),e.facetParameters.bInfo=i,e.facetParameters.bbSize=e.bbSize,e.facetParameters.subDiv=e.subDiv,e.facetParameters.ratio=this.partitioningBBoxRatio,e.facetParameters.depthSort=e.facetDepthSort,e.facetDepthSort&&e.facetDepthSortEnabled&&(this.computeWorldMatrix(!0),this._worldMatrix.invertToRef(e.invertedMatrix),a.x.TransformCoordinatesToRef(e.facetDepthSortFrom,e.invertedMatrix,e.facetDepthSortOrigin),e.facetParameters.distanceTo=e.facetDepthSortOrigin),e.facetParameters.depthSortedFacets=e.depthSortedFacets,l.a.ComputeNormals(t,n,r,e.facetParameters),e.facetDepthSort&&e.facetDepthSortEnabled){e.depthSortedFacets.sort(e.facetDepthSortFunction);var f=e.depthSortedIndices.length/3|0;for(h=0;h<f;h++){var p=e.depthSortedFacets[h].ind;e.depthSortedIndices[3*h]=n[p],e.depthSortedIndices[3*h+1]=n[p+1],e.depthSortedIndices[3*h+2]=n[p+2]}this.updateIndices(e.depthSortedIndices,void 0,!0)}return this},t.prototype.getFacetLocalNormals=function(){var e=this._internalAbstractMeshDataInfo._facetData;return e.facetNormals||this.updateFacetData(),e.facetNormals},t.prototype.getFacetLocalPositions=function(){var e=this._internalAbstractMeshDataInfo._facetData;return e.facetPositions||this.updateFacetData(),e.facetPositions},t.prototype.getFacetLocalPartitioning=function(){var e=this._internalAbstractMeshDataInfo._facetData;return e.facetPartitioning||this.updateFacetData(),e.facetPartitioning},t.prototype.getFacetPosition=function(e){var t=a.x.Zero();return this.getFacetPositionToRef(e,t),t},t.prototype.getFacetPositionToRef=function(e,t){var n=this.getFacetLocalPositions()[e],r=this.getWorldMatrix();return a.x.TransformCoordinatesToRef(n,r,t),this},t.prototype.getFacetNormal=function(e){var t=a.x.Zero();return this.getFacetNormalToRef(e,t),t},t.prototype.getFacetNormalToRef=function(e,t){var n=this.getFacetLocalNormals()[e];return a.x.TransformNormalToRef(n,this.getWorldMatrix(),t),this},t.prototype.getFacetsAtLocalCoordinates=function(e,t,n){var r=this.getBoundingInfo(),i=this._internalAbstractMeshDataInfo._facetData,o=Math.floor((e-r.minimum.x*i.partitioningBBoxRatio)*i.subDiv.X*i.partitioningBBoxRatio/i.bbSize.x),a=Math.floor((t-r.minimum.y*i.partitioningBBoxRatio)*i.subDiv.Y*i.partitioningBBoxRatio/i.bbSize.y),s=Math.floor((n-r.minimum.z*i.partitioningBBoxRatio)*i.subDiv.Z*i.partitioningBBoxRatio/i.bbSize.z);return o<0||o>i.subDiv.max||a<0||a>i.subDiv.max||s<0||s>i.subDiv.max?null:i.facetPartitioning[o+i.subDiv.max*a+i.subDiv.max*i.subDiv.max*s]},t.prototype.getClosestFacetAtCoordinates=function(e,t,n,r,i,o){void 0===i&&(i=!1),void 0===o&&(o=!0);var s=this.getWorldMatrix(),u=a.t.Matrix[5];s.invertToRef(u);var l=a.t.Vector3[8];a.x.TransformCoordinatesFromFloatsToRef(e,t,n,u,l);var c=this.getClosestFacetAtLocalCoordinates(l.x,l.y,l.z,r,i,o);return r&&a.x.TransformCoordinatesFromFloatsToRef(r.x,r.y,r.z,s,r),c},t.prototype.getClosestFacetAtLocalCoordinates=function(e,t,n,r,i,o){void 0===i&&(i=!1),void 0===o&&(o=!0);var a=null,s=0,u=0,l=0,c=0,h=0,d=0,f=0,p=0,_=this.getFacetLocalPositions(),m=this.getFacetLocalNormals(),g=this.getFacetsAtLocalCoordinates(e,t,n);if(!g)return null;for(var v,y,b,T=Number.MAX_VALUE,E=T,x=0;x<g.length;x++)y=m[v=g[x]],c=(e-(b=_[v]).x)*y.x+(t-b.y)*y.y+(n-b.z)*y.z,(!i||i&&o&&c>=0||i&&!o&&c<=0)&&(E=(s=(d=e+y.x*(h=-(y.x*e+y.y*t+y.z*n-(c=y.x*b.x+y.y*b.y+y.z*b.z))/(y.x*y.x+y.y*y.y+y.z*y.z)))-e)*s+(u=(f=t+y.y*h)-t)*u+(l=(p=n+y.z*h)-n)*l)<T&&(T=E,a=v,r&&(r.x=d,r.y=f,r.z=p));return a},t.prototype.getFacetDataParameters=function(){return this._internalAbstractMeshDataInfo._facetData.facetParameters},t.prototype.disableFacetData=function(){var e=this._internalAbstractMeshDataInfo._facetData;return e.facetDataEnabled&&(e.facetDataEnabled=!1,e.facetPositions=new Array,e.facetNormals=new Array,e.facetPartitioning=new Array,e.facetParameters=null,e.depthSortedIndices=new Uint32Array(0)),this},t.prototype.updateIndices=function(e,t,n){return void 0===n&&(n=!1),this},t.prototype.createNormals=function(e){var t,n=this.getVerticesData(u.b.PositionKind),r=this.getIndices();return t=this.isVerticesDataPresent(u.b.NormalKind)?this.getVerticesData(u.b.NormalKind):[],l.a.ComputeNormals(n,r,t,{useRightHandedSystem:this.getScene().useRightHandedSystem}),this.setVerticesData(u.b.NormalKind,t,e),this},t.prototype.alignWithNormal=function(e,t){t||(t=a.c.Y);var n=a.t.Vector3[0],r=a.t.Vector3[1];return a.x.CrossToRef(t,e,r),a.x.CrossToRef(e,r,n),this.rotationQuaternion?a.q.RotationQuaternionFromAxisToRef(n,e,r,this.rotationQuaternion):a.x.RotationFromAxisToRef(n,e,r,this.rotation),this},t.prototype._checkOcclusionQuery=function(){return!1},t.prototype.disableEdgesRendering=function(){throw _.a.WarnImport("EdgesRenderer")},t.prototype.enableEdgesRendering=function(e,t){throw _.a.WarnImport("EdgesRenderer")},t.OCCLUSION_TYPE_NONE=0,t.OCCLUSION_TYPE_OPTIMISTIC=1,t.OCCLUSION_TYPE_STRICT=2,t.OCCLUSION_ALGORITHM_TYPE_ACCURATE=0,t.OCCLUSION_ALGORITHM_TYPE_CONSERVATIVE=1,t.CULLINGSTRATEGY_STANDARD=f.a.MESHES_CULLINGSTRATEGY_STANDARD,t.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY=f.a.MESHES_CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY,t.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION=f.a.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION,t.CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY=f.a.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY,t}(c.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),i=n(0),o=n(2),a=n(8),s=n(23),u=n(19),l=n(9),c=function(){function e(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!0),this.state="",this.metadata=null,this.reservedDataStore=null,this.doNotSerialize=!1,this._isDisposed=!1,this.animations=new Array,this._ranges={},this.onReady=null,this._isEnabled=!0,this._isParentEnabled=!0,this._isReady=!0,this._currentRenderId=-1,this._parentUpdateId=-1,this._childUpdateId=-1,this._waitingParentId=null,this._cache={},this._parentNode=null,this._children=null,this._worldMatrix=i.j.Identity(),this._worldMatrixDeterminant=0,this._worldMatrixDeterminantIsDirty=!0,this._sceneRootNodesIndex=-1,this._animationPropertiesOverride=null,this._isNode=!0,this.onDisposeObservable=new a.c,this._onDisposeObserver=null,this._behaviors=new Array,this.name=e,this.id=e,this._scene=t||s.a.LastCreatedScene,this.uniqueId=this._scene.getUniqueId(),this._initCache(),n&&this.addToSceneRootNodes()}return e.AddNodeConstructor=function(e,t){this._NodeConstructors[e]=t},e.Construct=function(e,t,n,r){var i=this._NodeConstructors[e];return i?i(t,n,r):null},e.prototype.isDisposed=function(){return this._isDisposed},Object.defineProperty(e.prototype,"parent",{get:function(){return this._parentNode},set:function(e){if(this._parentNode!==e){var t=this._parentNode;if(this._parentNode&&null!=this._parentNode._children){var n=this._parentNode._children.indexOf(this);-1!==n&&this._parentNode._children.splice(n,1),e||this._isDisposed||this.addToSceneRootNodes()}this._parentNode=e,this._parentNode&&(null!=this._parentNode._children||(this._parentNode._children=new Array),this._parentNode._children.push(this),t||this.removeFromSceneRootNodes()),this._syncParentEnabledState()}},enumerable:!0,configurable:!0}),e.prototype.addToSceneRootNodes=function(){-1===this._sceneRootNodesIndex&&(this._sceneRootNodesIndex=this._scene.rootNodes.length,this._scene.rootNodes.push(this))},e.prototype.removeFromSceneRootNodes=function(){if(-1!==this._sceneRootNodesIndex){var e=this._scene.rootNodes;e[this._sceneRootNodesIndex]=e[e.length-1],e[this._sceneRootNodesIndex]._sceneRootNodesIndex=this._sceneRootNodesIndex,this._scene.rootNodes.pop(),this._sceneRootNodesIndex=-1}},Object.defineProperty(e.prototype,"animationPropertiesOverride",{get:function(){return this._animationPropertiesOverride?this._animationPropertiesOverride:this._scene.animationPropertiesOverride},set:function(e){this._animationPropertiesOverride=e},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"Node"},Object.defineProperty(e.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},e.prototype.getEngine=function(){return this._scene.getEngine()},e.prototype.addBehavior=function(e,t){var n=this;return void 0===t&&(t=!1),-1!==this._behaviors.indexOf(e)?this:(e.init(),this._scene.isLoading&&!t?this._scene.onDataLoadedObservable.addOnce(function(){e.attach(n)}):e.attach(this),this._behaviors.push(e),this)},e.prototype.removeBehavior=function(e){var t=this._behaviors.indexOf(e);return-1===t?this:(this._behaviors[t].detach(),this._behaviors.splice(t,1),this)},Object.defineProperty(e.prototype,"behaviors",{get:function(){return this._behaviors},enumerable:!0,configurable:!0}),e.prototype.getBehaviorByName=function(e){for(var t=0,n=this._behaviors;t<n.length;t++){var r=n[t];if(r.name===e)return r}return null},e.prototype.getWorldMatrix=function(){return this._currentRenderId!==this._scene.getRenderId()&&this.computeWorldMatrix(),this._worldMatrix},e.prototype._getWorldMatrixDeterminant=function(){return this._worldMatrixDeterminantIsDirty&&(this._worldMatrixDeterminantIsDirty=!1,this._worldMatrixDeterminant=this._worldMatrix.determinant()),this._worldMatrixDeterminant},Object.defineProperty(e.prototype,"worldMatrixFromCache",{get:function(){return this._worldMatrix},enumerable:!0,configurable:!0}),e.prototype._initCache=function(){this._cache={},this._cache.parent=void 0},e.prototype.updateCache=function(e){!e&&this.isSynchronized()||(this._cache.parent=this.parent,this._updateCache())},e.prototype._getActionManagerForTrigger=function(e,t){return void 0===t&&(t=!0),this.parent?this.parent._getActionManagerForTrigger(e,!1):null},e.prototype._updateCache=function(e){},e.prototype._isSynchronized=function(){return!0},e.prototype._markSyncedWithParent=function(){this._parentNode&&(this._parentUpdateId=this._parentNode._childUpdateId)},e.prototype.isSynchronizedWithParent=function(){return!this._parentNode||this._parentUpdateId===this._parentNode._childUpdateId&&this._parentNode.isSynchronized()},e.prototype.isSynchronized=function(){return this._cache.parent!=this._parentNode?(this._cache.parent=this._parentNode,!1):!(this._parentNode&&!this.isSynchronizedWithParent())&&this._isSynchronized()},e.prototype.isReady=function(e){return void 0===e&&(e=!1),this._isReady},e.prototype.isEnabled=function(e){return void 0===e&&(e=!0),!1===e?this._isEnabled:!!this._isEnabled&&this._isParentEnabled},e.prototype._syncParentEnabledState=function(){this._isParentEnabled=!this._parentNode||this._parentNode.isEnabled(),this._children&&this._children.forEach(function(e){e._syncParentEnabledState()})},e.prototype.setEnabled=function(e){this._isEnabled=e,this._syncParentEnabledState()},e.prototype.isDescendantOf=function(e){return!!this.parent&&(this.parent===e||this.parent.isDescendantOf(e))},e.prototype._getDescendants=function(e,t,n){if(void 0===t&&(t=!1),this._children)for(var r=0;r<this._children.length;r++){var i=this._children[r];n&&!n(i)||e.push(i),t||i._getDescendants(e,!1,n)}},e.prototype.getDescendants=function(e,t){var n=new Array;return this._getDescendants(n,e,t),n},e.prototype.getChildMeshes=function(e,t){var n=[];return this._getDescendants(n,e,function(e){return(!t||t(e))&&void 0!==e.cullingStrategy}),n},e.prototype.getChildren=function(e,t){return void 0===t&&(t=!0),this.getDescendants(t,e)},e.prototype._setReady=function(e){e!==this._isReady&&(e?(this.onReady&&this.onReady(this),this._isReady=!0):this._isReady=!1)},e.prototype.getAnimationByName=function(e){for(var t=0;t<this.animations.length;t++){var n=this.animations[t];if(n.name===e)return n}return null},e.prototype.createAnimationRange=function(t,n,r){if(!this._ranges[t]){this._ranges[t]=e._AnimationRangeFactory(t,n,r);for(var i=0,o=this.animations.length;i<o;i++)this.animations[i]&&this.animations[i].createRange(t,n,r)}},e.prototype.deleteAnimationRange=function(e,t){void 0===t&&(t=!0);for(var n=0,r=this.animations.length;n<r;n++)this.animations[n]&&this.animations[n].deleteRange(e,t);this._ranges[e]=null},e.prototype.getAnimationRange=function(e){return this._ranges[e]},e.prototype.getAnimationRanges=function(){var e,t=[];for(e in this._ranges)t.push(this._ranges[e]);return t},e.prototype.beginAnimation=function(e,t,n,r){var i=this.getAnimationRange(e);return i?this._scene.beginAnimation(this,i.from,i.to,t,n,r):null},e.prototype.serializeAnimationRanges=function(){var e=[];for(var t in this._ranges){var n=this._ranges[t];if(n){var r={};r.name=t,r.from=n.from,r.to=n.to,e.push(r)}}return e},e.prototype.computeWorldMatrix=function(e){return this._worldMatrix||(this._worldMatrix=i.j.Identity()),this._worldMatrix},e.prototype.dispose=function(e,t){if(void 0===t&&(t=!1),this._isDisposed=!0,!e)for(var n=0,r=this.getDescendants(!0);n<r.length;n++)r[n].dispose(e,t);this.parent?this.parent=null:this.removeFromSceneRootNodes(),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear();for(var i=0,o=this._behaviors;i<o.length;i++)o[i].detach();this._behaviors=[]},e.ParseAnimationRanges=function(e,t,n){if(t.ranges)for(var r=0;r<t.ranges.length;r++){var i=t.ranges[r];e.createAnimationRange(i.name,i.from,i.to)}},e.prototype.getHierarchyBoundingVectors=function(e,t){var n,r;if(void 0===e&&(e=!0),void 0===t&&(t=null),this.getScene().incrementRenderId(),this.computeWorldMatrix(!0),this.getBoundingInfo&&this.subMeshes){var o=this.getBoundingInfo();n=o.boundingBox.minimumWorld,r=o.boundingBox.maximumWorld}else n=new i.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),r=new i.x(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);if(e)for(var a=0,s=this.getDescendants(!1);a<s.length;a++){var u=s[a];if(u.computeWorldMatrix(!0),(!t||t(u))&&u.getBoundingInfo&&0!==u.getTotalVertices()){var c=u.getBoundingInfo().boundingBox,h=c.maximumWorld;l.h.CheckExtends(c.minimumWorld,n,r),l.h.CheckExtends(h,n,r)}}return{min:n,max:r}},e._AnimationRangeFactory=function(e,t,n){throw u.a.WarnImport("AnimationRange")},e._NodeConstructors={},r.c([Object(o.c)()],e.prototype,"name",void 0),r.c([Object(o.c)()],e.prototype,"id",void 0),r.c([Object(o.c)()],e.prototype,"uniqueId",void 0),r.c([Object(o.c)()],e.prototype,"state",void 0),r.c([Object(o.c)()],e.prototype,"metadata",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(8),i=n(92),o=n(3),a=n(19),s=function(){function e(t,n,i){void 0===i&&(i=!1),this.isReady=!1,this.isCube=!1,this.is3D=!1,this.isMultiview=!1,this.url="",this.samplingMode=-1,this.generateMipMaps=!1,this.samples=0,this.type=-1,this.format=-1,this.onLoadedObservable=new r.c,this.width=0,this.height=0,this.depth=0,this.baseWidth=0,this.baseHeight=0,this.baseDepth=0,this.invertY=!1,this._invertVScale=!1,this._associatedChannel=-1,this._dataSource=e.DATASOURCE_UNKNOWN,this._buffer=null,this._bufferView=null,this._bufferViewArray=null,this._bufferViewArrayArray=null,this._size=0,this._extension="",this._files=null,this._workingCanvas=null,this._workingContext=null,this._framebuffer=null,this._depthStencilBuffer=null,this._MSAAFramebuffer=null,this._MSAARenderBuffer=null,this._attachments=null,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedWrapR=null,this._cachedAnisotropicFilteringLevel=null,this._isDisabled=!1,this._compression=null,this._generateStencilBuffer=!1,this._generateDepthBuffer=!1,this._comparisonFunction=0,this._sphericalPolynomial=null,this._lodGenerationScale=0,this._lodGenerationOffset=0,this._colorTextureArray=null,this._depthStencilTextureArray=null,this._lodTextureHigh=null,this._lodTextureMid=null,this._lodTextureLow=null,this._isRGBD=!1,this._webGLTexture=null,this._references=1,this._engine=t,this._dataSource=n,i||(this._webGLTexture=t._createTexture())}return e.prototype.getEngine=function(){return this._engine},Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSource},enumerable:!0,configurable:!0}),e.prototype.incrementReferences=function(){this._references++},e.prototype.updateSize=function(e,t,n){void 0===n&&(n=1),this.width=e,this.height=t,this.depth=n,this.baseWidth=e,this.baseHeight=t,this.baseDepth=n,this._size=e*t*n},e.prototype._rebuild=function(){var t,n=this;switch(this.isReady=!1,this._cachedCoordinatesMode=null,this._cachedWrapU=null,this._cachedWrapV=null,this._cachedAnisotropicFilteringLevel=null,this._dataSource){case e.DATASOURCE_TEMP:return;case e.DATASOURCE_URL:return void(t=this._engine.createTexture(this.url,!this.generateMipMaps,this.invertY,null,this.samplingMode,function(){t._swapAndDie(n),n.isReady=!0},null,this._buffer,void 0,this.format));case e.DATASOURCE_RAW:return(t=this._engine.createRawTexture(this._bufferView,this.baseWidth,this.baseHeight,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression))._swapAndDie(this),void(this.isReady=!0);case e.DATASOURCE_RAW3D:return(t=this._engine.createRawTexture3D(this._bufferView,this.baseWidth,this.baseHeight,this.baseDepth,this.format,this.generateMipMaps,this.invertY,this.samplingMode,this._compression))._swapAndDie(this),void(this.isReady=!0);case e.DATASOURCE_DYNAMIC:return(t=this._engine.createDynamicTexture(this.baseWidth,this.baseHeight,this.generateMipMaps,this.samplingMode))._swapAndDie(this),void this._engine.updateDynamicTexture(this,this._engine.getRenderingCanvas(),this.invertY,void 0,void 0,!0);case e.DATASOURCE_RENDERTARGET:var r=new i.a;return r.generateDepthBuffer=this._generateDepthBuffer,r.generateMipMaps=this.generateMipMaps,r.generateStencilBuffer=this._generateStencilBuffer,r.samplingMode=this.samplingMode,r.type=this.type,(t=this.isCube?this._engine.createRenderTargetCubeTexture(this.width,r):this._engine.createRenderTargetTexture({width:this.width,height:this.height},r))._swapAndDie(this),void(this.isReady=!0);case e.DATASOURCE_DEPTHTEXTURE:return(t=this._engine.createDepthStencilTexture({width:this.width,height:this.height},{bilinearFiltering:this.samplingMode!==o.a.TEXTURE_BILINEAR_SAMPLINGMODE,comparisonFunction:this._comparisonFunction,generateStencil:this._generateStencilBuffer,isCube:this.isCube}))._swapAndDie(this),void(this.isReady=!0);case e.DATASOURCE_CUBE:return void(t=this._engine.createCubeTexture(this.url,null,this._files,!this.generateMipMaps,function(){t._swapAndDie(n),n.isReady=!0},null,this.format,this._extension));case e.DATASOURCE_CUBERAW:return(t=this._engine.createRawCubeTexture(this._bufferViewArray,this.width,this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression))._swapAndDie(this),void(this.isReady=!0);case e.DATASOURCE_CUBERAW_RGBD:return t=this._engine.createRawCubeTexture(null,this.width,this.format,this.type,this.generateMipMaps,this.invertY,this.samplingMode,this._compression),void e._UpdateRGBDAsync(t,this._bufferViewArrayArray,this._sphericalPolynomial,this._lodGenerationScale,this._lodGenerationOffset).then(function(){t._swapAndDie(n),n.isReady=!0});case e.DATASOURCE_CUBEPREFILTERED:return void((t=this._engine.createPrefilteredCubeTexture(this.url,null,this._lodGenerationScale,this._lodGenerationOffset,function(e){e&&e._swapAndDie(n),n.isReady=!0},null,this.format,this._extension))._sphericalPolynomial=this._sphericalPolynomial)}},e.prototype._swapAndDie=function(e){e._webGLTexture=this._webGLTexture,e._isRGBD=this._isRGBD,this._framebuffer&&(e._framebuffer=this._framebuffer),this._depthStencilBuffer&&(e._depthStencilBuffer=this._depthStencilBuffer),this._lodTextureHigh&&(e._lodTextureHigh&&e._lodTextureHigh.dispose(),e._lodTextureHigh=this._lodTextureHigh),this._lodTextureMid&&(e._lodTextureMid&&e._lodTextureMid.dispose(),e._lodTextureMid=this._lodTextureMid),this._lodTextureLow&&(e._lodTextureLow&&e._lodTextureLow.dispose(),e._lodTextureLow=this._lodTextureLow);var t=this._engine.getLoadedTexturesCache(),n=t.indexOf(this);-1!==n&&t.splice(n,1)},e.prototype.dispose=function(){this._webGLTexture&&(this._references--,0===this._references&&(this._engine._releaseTexture(this),this._webGLTexture=null))},e._UpdateRGBDAsync=function(e,t,n,r,i){throw a.a.WarnImport("environmentTextureTools")},e.DATASOURCE_UNKNOWN=0,e.DATASOURCE_URL=1,e.DATASOURCE_TEMP=2,e.DATASOURCE_RAW=3,e.DATASOURCE_DYNAMIC=4,e.DATASOURCE_RENDERTARGET=5,e.DATASOURCE_MULTIRENDERTARGET=6,e.DATASOURCE_CUBE=7,e.DATASOURCE_CUBERAW=8,e.DATASOURCE_CUBEPREFILTERED=9,e.DATASOURCE_RAW3D=10,e.DATASOURCE_DEPTHTEXTURE=11,e.DATASOURCE_CUBERAW_RGBD=12,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(6),i=n(34),o=n(0),a=n(24),s=n(11),u=n(37);s.a._PhysicsImpostorParser=function(e,t,n){return new l(t,n.physicsImpostor,{mass:n.physicsMass,friction:n.physicsFriction,restitution:n.physicsRestitution},e)};var l=function(){function e(e,t,n,i){var a=this;void 0===n&&(n={mass:0}),this.object=e,this.type=t,this._options=n,this._scene=i,this._pluginData={},this._bodyUpdateRequired=!1,this._onBeforePhysicsStepCallbacks=new Array,this._onAfterPhysicsStepCallbacks=new Array,this._onPhysicsCollideCallbacks=[],this._deltaPosition=o.x.Zero(),this._isDisposed=!1,this.soft=!1,this.segments=0,this._tmpQuat=new o.q,this._tmpQuat2=new o.q,this.beforeStep=function(){a._physicsEngine&&(a.object.translate(a._deltaPosition,-1),a._deltaRotationConjugated&&a.object.rotationQuaternion&&a.object.rotationQuaternion.multiplyToRef(a._deltaRotationConjugated,a.object.rotationQuaternion),a.object.computeWorldMatrix(!1),a.object.parent&&a.object.rotationQuaternion?(a.getParentsRotation(),a._tmpQuat.multiplyToRef(a.object.rotationQuaternion,a._tmpQuat)):a._tmpQuat.copyFrom(a.object.rotationQuaternion||new o.q),a._options.disableBidirectionalTransformation||a.object.rotationQuaternion&&a._physicsEngine.getPhysicsPlugin().setPhysicsBodyTransformation(a,a.object.getAbsolutePosition(),a._tmpQuat),a._onBeforePhysicsStepCallbacks.forEach(function(e){e(a)}))},this.afterStep=function(){a._physicsEngine&&(a._onAfterPhysicsStepCallbacks.forEach(function(e){e(a)}),a._physicsEngine.getPhysicsPlugin().setTransformationFromPhysicsBody(a),a.object.parent&&a.object.rotationQuaternion&&(a.getParentsRotation(),a._tmpQuat.conjugateInPlace(),a._tmpQuat.multiplyToRef(a.object.rotationQuaternion,a.object.rotationQuaternion)),a.object.setAbsolutePosition(a.object.position),a._deltaRotation&&a.object.rotationQuaternion&&a.object.rotationQuaternion.multiplyToRef(a._deltaRotation,a.object.rotationQuaternion),a.object.translate(a._deltaPosition,1))},this.onCollideEvent=null,this.onCollide=function(e){if((a._onPhysicsCollideCallbacks.length||a.onCollideEvent)&&a._physicsEngine){var t=a._physicsEngine.getImpostorWithPhysicsBody(e.body);t&&(a.onCollideEvent&&a.onCollideEvent(a,t),a._onPhysicsCollideCallbacks.filter(function(e){return-1!==e.otherImpostors.indexOf(t)}).forEach(function(e){e.callback(a,t)}))}},this.object?(!this._scene&&e.getScene&&(this._scene=e.getScene()),this._scene&&(this.type>100&&(this.soft=!0),this._physicsEngine=this._scene.getPhysicsEngine(),this._physicsEngine?(this.object.rotationQuaternion||(this.object.rotationQuaternion=this.object.rotation?o.q.RotationYawPitchRoll(this.object.rotation.y,this.object.rotation.x,this.object.rotation.z):new o.q),this._options.mass=void 0===n.mass?0:n.mass,this._options.friction=void 0===n.friction?.2:n.friction,this._options.restitution=void 0===n.restitution?.2:n.restitution,this.soft&&(this._options.mass=this._options.mass>0?this._options.mass:1,this._options.pressure=void 0===n.pressure?200:n.pressure,this._options.stiffness=void 0===n.stiffness?1:n.stiffness,this._options.velocityIterations=void 0===n.velocityIterations?20:n.velocityIterations,this._options.positionIterations=void 0===n.positionIterations?20:n.positionIterations,this._options.fixedPoints=void 0===n.fixedPoints?0:n.fixedPoints,this._options.margin=void 0===n.margin?0:n.margin,this._options.damping=void 0===n.damping?0:n.damping,this._options.path=void 0===n.path?null:n.path,this._options.shape=void 0===n.shape?null:n.shape),this._joints=[],!this.object.parent||this._options.ignoreParent?this._init():this.object.parent.physicsImpostor&&r.a.Warn("You must affect impostors to children before affecting impostor to parent.")):r.a.Error("Physics not enabled. Please use scene.enablePhysics(...) before creating impostors."))):r.a.Error("No object was provided. A physics object is obligatory")}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mass",{get:function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getBodyMass(this):0},set:function(e){this.setMass(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"friction",{get:function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getBodyFriction(this):0},set:function(e){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setBodyFriction(this,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"restitution",{get:function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getBodyRestitution(this):0},set:function(e){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setBodyRestitution(this,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pressure",{get:function(){if(!this._physicsEngine)return 0;var e=this._physicsEngine.getPhysicsPlugin();return e.setBodyPressure?e.getBodyPressure(this):0},set:function(e){if(this._physicsEngine){var t=this._physicsEngine.getPhysicsPlugin();t.setBodyPressure&&t.setBodyPressure(this,e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stiffness",{get:function(){if(!this._physicsEngine)return 0;var e=this._physicsEngine.getPhysicsPlugin();return e.getBodyStiffness?e.getBodyStiffness(this):0},set:function(e){if(this._physicsEngine){var t=this._physicsEngine.getPhysicsPlugin();t.setBodyStiffness&&t.setBodyStiffness(this,e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"velocityIterations",{get:function(){if(!this._physicsEngine)return 0;var e=this._physicsEngine.getPhysicsPlugin();return e.getBodyVelocityIterations?e.getBodyVelocityIterations(this):0},set:function(e){if(this._physicsEngine){var t=this._physicsEngine.getPhysicsPlugin();t.setBodyVelocityIterations&&t.setBodyVelocityIterations(this,e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positionIterations",{get:function(){if(!this._physicsEngine)return 0;var e=this._physicsEngine.getPhysicsPlugin();return e.getBodyPositionIterations?e.getBodyPositionIterations(this):0},set:function(e){if(this._physicsEngine){var t=this._physicsEngine.getPhysicsPlugin();t.setBodyPositionIterations&&t.setBodyPositionIterations(this,e)}},enumerable:!0,configurable:!0}),e.prototype._init=function(){this._physicsEngine&&(this._physicsEngine.removeImpostor(this),this.physicsBody=null,this._parent=this._parent||this._getPhysicsParent(),this._isDisposed||this.parent&&!this._options.ignoreParent||this._physicsEngine.addImpostor(this))},e.prototype._getPhysicsParent=function(){return this.object.parent instanceof a.a?this.object.parent.physicsImpostor:null},e.prototype.isBodyInitRequired=function(){return this._bodyUpdateRequired||!this._physicsBody&&!this._parent},e.prototype.setScalingUpdated=function(){this.forceUpdate()},e.prototype.forceUpdate=function(){this._init(),this.parent&&!this._options.ignoreParent&&this.parent.forceUpdate()},Object.defineProperty(e.prototype,"physicsBody",{get:function(){return this._parent&&!this._options.ignoreParent?this._parent.physicsBody:this._physicsBody},set:function(e){this._physicsBody&&this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().removePhysicsBody(this),this._physicsBody=e,this.resetUpdateFlags()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return!this._options.ignoreParent&&this._parent?this._parent:null},set:function(e){this._parent=e},enumerable:!0,configurable:!0}),e.prototype.resetUpdateFlags=function(){this._bodyUpdateRequired=!1},e.prototype.getObjectExtendSize=function(){if(this.object.getBoundingInfo){var t=this.object.rotationQuaternion;this.object.rotationQuaternion=e.IDENTITY_QUATERNION,this.object.computeWorldMatrix&&this.object.computeWorldMatrix(!0);var n=this.object.getBoundingInfo().boundingBox.extendSizeWorld.scale(2);return this.object.rotationQuaternion=t,this.object.computeWorldMatrix&&this.object.computeWorldMatrix(!0),n}return e.DEFAULT_OBJECT_SIZE},e.prototype.getObjectCenter=function(){return this.object.getBoundingInfo?this.object.getBoundingInfo().boundingBox.centerWorld:this.object.position},e.prototype.getParam=function(e){return this._options[e]},e.prototype.setParam=function(e,t){this._options[e]=t,this._bodyUpdateRequired=!0},e.prototype.setMass=function(e){this.getParam("mass")!==e&&this.setParam("mass",e),this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setBodyMass(this,e)},e.prototype.getLinearVelocity=function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getLinearVelocity(this):o.x.Zero()},e.prototype.setLinearVelocity=function(e){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setLinearVelocity(this,e)},e.prototype.getAngularVelocity=function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getAngularVelocity(this):o.x.Zero()},e.prototype.setAngularVelocity=function(e){this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().setAngularVelocity(this,e)},e.prototype.executeNativeFunction=function(e){this._physicsEngine&&e(this._physicsEngine.getPhysicsPlugin().world,this.physicsBody)},e.prototype.registerBeforePhysicsStep=function(e){this._onBeforePhysicsStepCallbacks.push(e)},e.prototype.unregisterBeforePhysicsStep=function(e){var t=this._onBeforePhysicsStepCallbacks.indexOf(e);t>-1?this._onBeforePhysicsStepCallbacks.splice(t,1):r.a.Warn("Function to remove was not found")},e.prototype.registerAfterPhysicsStep=function(e){this._onAfterPhysicsStepCallbacks.push(e)},e.prototype.unregisterAfterPhysicsStep=function(e){var t=this._onAfterPhysicsStepCallbacks.indexOf(e);t>-1?this._onAfterPhysicsStepCallbacks.splice(t,1):r.a.Warn("Function to remove was not found")},e.prototype.registerOnPhysicsCollide=function(e,t){var n=e instanceof Array?e:[e];this._onPhysicsCollideCallbacks.push({callback:t,otherImpostors:n})},e.prototype.unregisterOnPhysicsCollide=function(e,t){var n=e instanceof Array?e:[e],i=-1;this._onPhysicsCollideCallbacks.some(function(e,r){if(e.callback===t&&e.otherImpostors.length===n.length){var o=e.otherImpostors.every(function(e){return n.indexOf(e)>-1});return o&&(i=r),o}return!1})?this._onPhysicsCollideCallbacks.splice(i,1):r.a.Warn("Function to remove was not found")},e.prototype.getParentsRotation=function(){var e=this.object.parent;for(this._tmpQuat.copyFromFloats(0,0,0,1);e;)e.rotationQuaternion?this._tmpQuat2.copyFrom(e.rotationQuaternion):o.q.RotationYawPitchRollToRef(e.rotation.y,e.rotation.x,e.rotation.z,this._tmpQuat2),this._tmpQuat.multiplyToRef(this._tmpQuat2,this._tmpQuat),e=e.parent;return this._tmpQuat},e.prototype.applyForce=function(e,t){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().applyForce(this,e,t),this},e.prototype.applyImpulse=function(e,t){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().applyImpulse(this,e,t),this},e.prototype.createJoint=function(e,t,n){var r=new u.e(t,n);return this.addJoint(e,r),this},e.prototype.addJoint=function(e,t){return this._joints.push({otherImpostor:e,joint:t}),this._physicsEngine&&this._physicsEngine.addJoint(this,e,t),this},e.prototype.addAnchor=function(e,t,n,r,i){if(!this._physicsEngine)return this;var o=this._physicsEngine.getPhysicsPlugin();return o.appendAnchor?(this._physicsEngine&&o.appendAnchor(this,e,t,n,r,i),this):this},e.prototype.addHook=function(e,t,n,r){if(!this._physicsEngine)return this;var i=this._physicsEngine.getPhysicsPlugin();return i.appendAnchor?(this._physicsEngine&&i.appendHook(this,e,t,n,r),this):this},e.prototype.sleep=function(){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().sleepBody(this),this},e.prototype.wakeUp=function(){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().wakeUpBody(this),this},e.prototype.clone=function(t){return t?new e(t,this.type,this._options,this._scene):null},e.prototype.dispose=function(){var e=this;this._physicsEngine&&(this._joints.forEach(function(t){e._physicsEngine&&e._physicsEngine.removeJoint(e,t.otherImpostor,t.joint)}),this._physicsEngine.removeImpostor(this),this.parent&&this.parent.forceUpdate(),this._isDisposed=!0)},e.prototype.setDeltaPosition=function(e){this._deltaPosition.copyFrom(e)},e.prototype.setDeltaRotation=function(e){this._deltaRotation||(this._deltaRotation=new o.q),this._deltaRotation.copyFrom(e),this._deltaRotationConjugated=this._deltaRotation.conjugate()},e.prototype.getBoxSizeToRef=function(e){return this._physicsEngine&&this._physicsEngine.getPhysicsPlugin().getBoxSizeToRef(this,e),this},e.prototype.getRadius=function(){return this._physicsEngine?this._physicsEngine.getPhysicsPlugin().getRadius(this):0},e.prototype.syncBoneWithImpostor=function(t,n,r,i,a){var s=e._tmpVecs[0],u=this.object;if(u.rotationQuaternion)if(a){var l=e._tmpQuat;u.rotationQuaternion.multiplyToRef(a,l),t.setRotationQuaternion(l,o.s.WORLD,n)}else t.setRotationQuaternion(u.rotationQuaternion,o.s.WORLD,n);s.x=0,s.y=0,s.z=0,r&&(s.x=r.x,s.y=r.y,s.z=r.z,t.getDirectionToRef(s,n,s),null==i&&(i=r.length()),s.x*=i,s.y*=i,s.z*=i),t.getParent()?(s.addInPlace(u.getAbsolutePosition()),t.setAbsolutePosition(s,n)):(n.setAbsolutePosition(u.getAbsolutePosition()),n.position.x-=s.x,n.position.y-=s.y,n.position.z-=s.z)},e.prototype.syncImpostorWithBone=function(t,n,r,i,a,s){var u=this.object;if(u.rotationQuaternion)if(a){var l=e._tmpQuat;t.getRotationQuaternionToRef(o.s.WORLD,n,l),l.multiplyToRef(a,u.rotationQuaternion)}else t.getRotationQuaternionToRef(o.s.WORLD,n,u.rotationQuaternion);var c=e._tmpVecs[0],h=e._tmpVecs[1];s||((s=e._tmpVecs[2]).x=0,s.y=1,s.z=0),t.getDirectionToRef(s,n,h),t.getAbsolutePositionToRef(n,c),null==i&&r&&(i=r.length()),null!=i&&(c.x+=h.x*i,c.y+=h.y*i,c.z+=h.z*i),u.setAbsolutePosition(c)},e.DEFAULT_OBJECT_SIZE=new o.x(1,1,1),e.IDENTITY_QUATERNION=o.q.Identity(),e._tmpVecs=i.a.BuildArray(3,o.x.Zero),e._tmpQuat=o.q.Identity(),e.NoImpostor=0,e.SphereImpostor=1,e.BoxImpostor=2,e.PlaneImpostor=3,e.MeshImpostor=4,e.CylinderImpostor=7,e.ParticleImpostor=8,e.HeightmapImpostor=9,e.ConvexHullImpostor=10,e.RopeImpostor=101,e.ClothImpostor=102,e.SoftbodyImpostor=103,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=n(1),i=function(){function e(t){this.length=0,this.data=new Array(t),this._id=e._GlobalId++}return e.prototype.push=function(e){this.data[this.length++]=e,this.length>this.data.length&&(this.data.length*=2)},e.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this.data[t])},e.prototype.sort=function(e){this.data.sort(e)},e.prototype.reset=function(){this.length=0},e.prototype.dispose=function(){this.reset(),this.data&&(this.data.length=0,this.data=[])},e.prototype.concat=function(e){if(0!==e.length){this.length+e.length>this.data.length&&(this.data.length=2*(this.length+e.length));for(var t=0;t<e.length;t++)this.data[this.length++]=(e.data||e)[t]}},e.prototype.indexOf=function(e){var t=this.data.indexOf(e);return t>=this.length?-1:t},e.prototype.contains=function(e){return-1!==this.indexOf(e)},e._GlobalId=0,e}(),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._duplicateId=0,t}return r.d(t,e),t.prototype.push=function(t){e.prototype.push.call(this,t),t.__smartArrayFlags||(t.__smartArrayFlags={}),t.__smartArrayFlags[this._id]=this._duplicateId},t.prototype.pushNoDuplicate=function(e){return!(e.__smartArrayFlags&&e.__smartArrayFlags[this._id]===this._duplicateId||(this.push(e),0))},t.prototype.reset=function(){e.prototype.reset.call(this),this._duplicateId++},t.prototype.concatWithNoDuplicate=function(e){if(0!==e.length){this.length+e.length>this.data.length&&(this.data.length=2*(this.length+e.length));for(var t=0;t<e.length;t++)this.pushNoDuplicate((e.data||e)[t])}},t}(i)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(9),i=n(104),o=function(){function e(){}return e.EnableFor=function(t){t._tags=t._tags||{},t.hasTags=function(){return e.HasTags(t)},t.addTags=function(n){return e.AddTagsTo(t,n)},t.removeTags=function(n){return e.RemoveTagsFrom(t,n)},t.matchesTagsQuery=function(n){return e.MatchesQuery(t,n)}},e.DisableFor=function(e){delete e._tags,delete e.hasTags,delete e.addTags,delete e.removeTags,delete e.matchesTagsQuery},e.HasTags=function(e){return!!e._tags&&!r.h.IsEmpty(e._tags)},e.GetTags=function(e,t){if(void 0===t&&(t=!0),!e._tags)return null;if(t){var n=[];for(var r in e._tags)e._tags.hasOwnProperty(r)&&!0===e._tags[r]&&n.push(r);return n.join(" ")}return e._tags},e.AddTagsTo=function(t,n){n&&"string"==typeof n&&n.split(" ").forEach(function(n,r,i){e._AddTagTo(t,n)})},e._AddTagTo=function(t,n){""!==(n=n.trim())&&"true"!==n&&"false"!==n&&(n.match(/[\s]/)||n.match(/^([!]|([|]|[&]){2})/)||(e.EnableFor(t),t._tags[n]=!0))},e.RemoveTagsFrom=function(t,n){if(e.HasTags(t)){var r=n.split(" ");for(var i in r)e._RemoveTagFrom(t,r[i])}},e._RemoveTagFrom=function(e,t){delete e._tags[t]},e.MatchesQuery=function(t,n){return void 0===n||(""===n?e.HasTags(t):i.a.Eval(n,function(n){return e.HasTags(t)&&t._tags[n]}))},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){this.rootNodes=new Array,this.cameras=new Array,this.lights=new Array,this.meshes=new Array,this.skeletons=new Array,this.particleSystems=new Array,this.animations=[],this.animationGroups=new Array,this.multiMaterials=new Array,this.materials=new Array,this.morphTargetManagers=new Array,this.geometries=new Array,this.transformNodes=new Array,this.actionManagers=new Array,this.textures=new Array,this.environmentTexture=null}return e.AddParser=function(e,t){this._BabylonFileParsers[e]=t},e.GetParser=function(e){return this._BabylonFileParsers[e]?this._BabylonFileParsers[e]:null},e.AddIndividualParser=function(e,t){this._IndividualBabylonFileParsers[e]=t},e.GetIndividualParser=function(e){return this._IndividualBabylonFileParsers[e]?this._IndividualBabylonFileParsers[e]:null},e.Parse=function(e,t,n,r){for(var i in this._BabylonFileParsers)this._BabylonFileParsers.hasOwnProperty(i)&&this._BabylonFileParsers[i](e,t,n,r)},e._BabylonFileParsers={},e._IndividualBabylonFileParsers={},e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return h});var r=n(1),i=n(2),o=n(8),a=n(9),s=n(0),u=n(64),l=n(93),c=function(e){function t(){var t=e.call(this)||this;return t.IMAGEPROCESSING=!1,t.VIGNETTE=!1,t.VIGNETTEBLENDMODEMULTIPLY=!1,t.VIGNETTEBLENDMODEOPAQUE=!1,t.TONEMAPPING=!1,t.TONEMAPPING_ACES=!1,t.CONTRAST=!1,t.COLORCURVES=!1,t.COLORGRADING=!1,t.COLORGRADING3D=!1,t.SAMPLER3DGREENDEPTH=!1,t.SAMPLER3DBGRMAP=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.EXPOSURE=!1,t.rebuild(),t}return r.d(t,e),t}(u.a),h=function(){function e(){this.colorCurves=new l.a,this._colorCurvesEnabled=!1,this._colorGradingEnabled=!1,this._colorGradingWithGreenDepth=!0,this._colorGradingBGR=!0,this._exposure=1,this._toneMappingEnabled=!1,this._toneMappingType=e.TONEMAPPING_STANDARD,this._contrast=1,this.vignetteStretch=0,this.vignetteCentreX=0,this.vignetteCentreY=0,this.vignetteWeight=1.5,this.vignetteColor=new s.f(0,0,0,0),this.vignetteCameraFov=.5,this._vignetteBlendMode=e.VIGNETTEMODE_MULTIPLY,this._vignetteEnabled=!1,this._applyByPostProcess=!1,this._isEnabled=!0,this.onUpdateParameters=new o.c}return Object.defineProperty(e.prototype,"colorCurvesEnabled",{get:function(){return this._colorCurvesEnabled},set:function(e){this._colorCurvesEnabled!==e&&(this._colorCurvesEnabled=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorGradingTexture",{get:function(){return this._colorGradingTexture},set:function(e){this._colorGradingTexture!==e&&(this._colorGradingTexture=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorGradingEnabled",{get:function(){return this._colorGradingEnabled},set:function(e){this._colorGradingEnabled!==e&&(this._colorGradingEnabled=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorGradingWithGreenDepth",{get:function(){return this._colorGradingWithGreenDepth},set:function(e){this._colorGradingWithGreenDepth!==e&&(this._colorGradingWithGreenDepth=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colorGradingBGR",{get:function(){return this._colorGradingBGR},set:function(e){this._colorGradingBGR!==e&&(this._colorGradingBGR=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exposure",{get:function(){return this._exposure},set:function(e){this._exposure!==e&&(this._exposure=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toneMappingEnabled",{get:function(){return this._toneMappingEnabled},set:function(e){this._toneMappingEnabled!==e&&(this._toneMappingEnabled=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toneMappingType",{get:function(){return this._toneMappingType},set:function(e){this._toneMappingType!==e&&(this._toneMappingType=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contrast",{get:function(){return this._contrast},set:function(e){this._contrast!==e&&(this._contrast=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vignetteBlendMode",{get:function(){return this._vignetteBlendMode},set:function(e){this._vignetteBlendMode!==e&&(this._vignetteBlendMode=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vignetteEnabled",{get:function(){return this._vignetteEnabled},set:function(e){this._vignetteEnabled!==e&&(this._vignetteEnabled=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyByPostProcess",{get:function(){return this._applyByPostProcess},set:function(e){this._applyByPostProcess!==e&&(this._applyByPostProcess=e,this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(e){this._isEnabled!==e&&(this._isEnabled=e,this._updateParameters())},enumerable:!0,configurable:!0}),e.prototype._updateParameters=function(){this.onUpdateParameters.notifyObservers(this)},e.prototype.getClassName=function(){return"ImageProcessingConfiguration"},e.PrepareUniforms=function(e,t){t.EXPOSURE&&e.push("exposureLinear"),t.CONTRAST&&e.push("contrast"),t.COLORGRADING&&e.push("colorTransformSettings"),t.VIGNETTE&&(e.push("vInverseScreenSize"),e.push("vignetteSettings1"),e.push("vignetteSettings2")),t.COLORCURVES&&l.a.PrepareUniforms(e)},e.PrepareSamplers=function(e,t){t.COLORGRADING&&e.push("txColorTransform")},e.prototype.prepareDefines=function(t,n){if(void 0===n&&(n=!1),n!==this.applyByPostProcess||!this._isEnabled)return t.VIGNETTE=!1,t.TONEMAPPING=!1,t.TONEMAPPING_ACES=!1,t.CONTRAST=!1,t.EXPOSURE=!1,t.COLORCURVES=!1,t.COLORGRADING=!1,t.COLORGRADING3D=!1,t.IMAGEPROCESSING=!1,void(t.IMAGEPROCESSINGPOSTPROCESS=this.applyByPostProcess&&this._isEnabled);switch(t.VIGNETTE=this.vignetteEnabled,t.VIGNETTEBLENDMODEMULTIPLY=this.vignetteBlendMode===e._VIGNETTEMODE_MULTIPLY,t.VIGNETTEBLENDMODEOPAQUE=!t.VIGNETTEBLENDMODEMULTIPLY,t.TONEMAPPING=this.toneMappingEnabled,this._toneMappingType){case e.TONEMAPPING_ACES:t.TONEMAPPING_ACES=!0;break;default:t.TONEMAPPING_ACES=!1}t.CONTRAST=1!==this.contrast,t.EXPOSURE=1!==this.exposure,t.COLORCURVES=this.colorCurvesEnabled&&!!this.colorCurves,t.COLORGRADING=this.colorGradingEnabled&&!!this.colorGradingTexture,t.COLORGRADING3D=!!t.COLORGRADING&&this.colorGradingTexture.is3D,t.SAMPLER3DGREENDEPTH=this.colorGradingWithGreenDepth,t.SAMPLER3DBGRMAP=this.colorGradingBGR,t.IMAGEPROCESSINGPOSTPROCESS=this.applyByPostProcess,t.IMAGEPROCESSING=t.VIGNETTE||t.TONEMAPPING||t.CONTRAST||t.EXPOSURE||t.COLORCURVES||t.COLORGRADING},e.prototype.isReady=function(){return!this.colorGradingEnabled||!this.colorGradingTexture||this.colorGradingTexture.isReady()},e.prototype.bind=function(e,t){if(void 0===t&&(t=1),this._colorCurvesEnabled&&this.colorCurves&&l.a.Bind(this.colorCurves,e),this._vignetteEnabled){var n=1/e.getEngine().getRenderWidth(),r=1/e.getEngine().getRenderHeight();e.setFloat2("vInverseScreenSize",n,r);var i=Math.tan(.5*this.vignetteCameraFov),o=i*t,s=Math.sqrt(o*i);o=a.h.Mix(o,s,this.vignetteStretch),i=a.h.Mix(i,s,this.vignetteStretch),e.setFloat4("vignetteSettings1",o,i,-o*this.vignetteCentreX,-i*this.vignetteCentreY),e.setFloat4("vignetteSettings2",this.vignetteColor.r,this.vignetteColor.g,this.vignetteColor.b,-2*this.vignetteWeight)}if(e.setFloat("exposureLinear",this.exposure),e.setFloat("contrast",this.contrast),this.colorGradingTexture){e.setTexture("txColorTransform",this.colorGradingTexture);var u=this.colorGradingTexture.getSize().height;e.setFloat4("colorTransformSettings",(u-1)/u,.5/u,u,this.colorGradingTexture.level)}},e.prototype.clone=function(){return i.a.Clone(function(){return new e},this)},e.prototype.serialize=function(){return i.a.Serialize(this)},e.Parse=function(t){return i.a.Parse(function(){return new e},t,null,null)},Object.defineProperty(e,"VIGNETTEMODE_MULTIPLY",{get:function(){return this._VIGNETTEMODE_MULTIPLY},enumerable:!0,configurable:!0}),Object.defineProperty(e,"VIGNETTEMODE_OPAQUE",{get:function(){return this._VIGNETTEMODE_OPAQUE},enumerable:!0,configurable:!0}),e.TONEMAPPING_STANDARD=0,e.TONEMAPPING_ACES=1,e._VIGNETTEMODE_MULTIPLY=0,e._VIGNETTEMODE_OPAQUE=1,r.c([Object(i.g)()],e.prototype,"colorCurves",void 0),r.c([Object(i.c)()],e.prototype,"_colorCurvesEnabled",void 0),r.c([Object(i.m)("colorGradingTexture")],e.prototype,"_colorGradingTexture",void 0),r.c([Object(i.c)()],e.prototype,"_colorGradingEnabled",void 0),r.c([Object(i.c)()],e.prototype,"_colorGradingWithGreenDepth",void 0),r.c([Object(i.c)()],e.prototype,"_colorGradingBGR",void 0),r.c([Object(i.c)()],e.prototype,"_exposure",void 0),r.c([Object(i.c)()],e.prototype,"_toneMappingEnabled",void 0),r.c([Object(i.c)()],e.prototype,"_toneMappingType",void 0),r.c([Object(i.c)()],e.prototype,"_contrast",void 0),r.c([Object(i.c)()],e.prototype,"vignetteStretch",void 0),r.c([Object(i.c)()],e.prototype,"vignetteCentreX",void 0),r.c([Object(i.c)()],e.prototype,"vignetteCentreY",void 0),r.c([Object(i.c)()],e.prototype,"vignetteWeight",void 0),r.c([Object(i.f)()],e.prototype,"vignetteColor",void 0),r.c([Object(i.c)()],e.prototype,"vignetteCameraFov",void 0),r.c([Object(i.c)()],e.prototype,"_vignetteBlendMode",void 0),r.c([Object(i.c)()],e.prototype,"_vignetteEnabled",void 0),r.c([Object(i.c)()],e.prototype,"_applyByPostProcess",void 0),r.c([Object(i.c)()],e.prototype,"_isEnabled",void 0),e}();i.a._ImageProcessingConfigurationParser=h.Parse},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=function(e,t){return e?e.getClassName&&"Mesh"===e.getClassName()?null:e.getClassName&&"SubMesh"===e.getClassName()?e.clone(t):e.clone?e.clone():null:null},i=function(){function e(){}return e.DeepCopy=function(e,t,n,i){for(var o in e)if(("_"!==o[0]||i&&-1!==i.indexOf(o))&&(!n||-1===n.indexOf(o))){var a=e[o],s=typeof a;if("function"!==s)try{if("object"===s)if(a instanceof Array){if(t[o]=[],a.length>0)if("object"==typeof a[0])for(var u=0;u<a.length;u++){var l=r(a[u],t);-1===t[o].indexOf(l)&&t[o].push(l)}else t[o]=a.slice(0)}else t[o]=r(a,t);else t[o]=a}catch(e){}}},e}()},function(e,t,n){"use strict";var r=n(1),i=n(2),o=n(28),a=n(16),s=n(0),u=n(4),l=n(31),c=n(5),h=n(64),d=n(75),f=n(15),p=n(7),_=n(22),m=n(18);c.a.IncludesShadersStore.defaultFragmentDeclaration="uniform vec4 vDiffuseColor;\n#ifdef SPECULARTERM\nuniform vec4 vSpecularColor;\n#endif\nuniform vec3 vEmissiveColor;\nuniform float visibility;\n\n#ifdef DIFFUSE\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef AMBIENT\nuniform vec2 vAmbientInfos;\n#endif\n#ifdef OPACITY\nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform vec2 vTangentSpaceParams;\n#endif\n#if defined(REFLECTIONMAP_SPHERICAL) || defined(REFLECTIONMAP_PROJECTION) || defined(REFRACTION)\nuniform mat4 view;\n#endif\n#ifdef REFRACTION\nuniform vec4 vRefractionInfos;\n#ifndef REFRACTIONMAP_3D\nuniform mat4 refractionMatrix;\n#endif\n#ifdef REFRACTIONFRESNEL\nuniform vec4 refractionLeftColor;\nuniform vec4 refractionRightColor;\n#endif\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\nuniform vec2 vSpecularInfos;\n#endif\n#ifdef DIFFUSEFRESNEL\nuniform vec4 diffuseLeftColor;\nuniform vec4 diffuseRightColor;\n#endif\n#ifdef OPACITYFRESNEL\nuniform vec4 opacityParts;\n#endif\n#ifdef EMISSIVEFRESNEL\nuniform vec4 emissiveLeftColor;\nuniform vec4 emissiveRightColor;\n#endif\n\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\n#if defined(REFLECTIONMAP_PLANAR) || defined(REFLECTIONMAP_CUBIC) || defined(REFLECTIONMAP_PROJECTION) || defined(REFLECTIONMAP_EQUIRECTANGULAR) || defined(REFLECTIONMAP_SPHERICAL) || defined(REFLECTIONMAP_SKYBOX)\nuniform mat4 reflectionMatrix;\n#endif\n#ifndef REFLECTIONMAP_SKYBOX\n#if defined(USE_LOCAL_REFLECTIONMAP_CUBIC) && defined(REFLECTIONMAP_CUBIC)\nuniform vec3 vReflectionPosition;\nuniform vec3 vReflectionSize;\n#endif\n#endif\n#ifdef REFLECTIONFRESNEL\nuniform vec4 reflectionLeftColor;\nuniform vec4 reflectionRightColor;\n#endif\n#endif",c.a.IncludesShadersStore.defaultUboDeclaration="layout(std140,column_major) uniform;\nuniform Material\n{\nvec4 diffuseLeftColor;\nvec4 diffuseRightColor;\nvec4 opacityParts;\nvec4 reflectionLeftColor;\nvec4 reflectionRightColor;\nvec4 refractionLeftColor;\nvec4 refractionRightColor;\nvec4 emissiveLeftColor;\nvec4 emissiveRightColor;\nvec2 vDiffuseInfos;\nvec2 vAmbientInfos;\nvec2 vOpacityInfos;\nvec2 vReflectionInfos;\nvec3 vReflectionPosition;\nvec3 vReflectionSize;\nvec2 vEmissiveInfos;\nvec2 vLightmapInfos;\nvec2 vSpecularInfos;\nvec3 vBumpInfos;\nmat4 diffuseMatrix;\nmat4 ambientMatrix;\nmat4 opacityMatrix;\nmat4 reflectionMatrix;\nmat4 emissiveMatrix;\nmat4 lightmapMatrix;\nmat4 specularMatrix;\nmat4 bumpMatrix;\nvec2 vTangentSpaceParams;\nfloat pointSize;\nmat4 refractionMatrix;\nvec4 vRefractionInfos;\nvec4 vSpecularColor;\nvec3 vEmissiveColor;\nfloat visibility;\nvec4 vDiffuseColor;\n};\nuniform Scene {\nmat4 viewProjection;\n#ifdef MULTIVIEW\nmat4 viewProjectionR;\n#endif\nmat4 view;\n};\n",n(56),n(84),n(85),n(120),n(112),c.a.IncludesShadersStore.fresnelFunction="#ifdef FRESNEL\nfloat computeFresnelTerm(vec3 viewDirection,vec3 worldNormal,float bias,float power)\n{\nfloat fresnelTerm=pow(bias+abs(dot(viewDirection,worldNormal)),power);\nreturn clamp(fresnelTerm,0.,1.);\n}\n#endif",n(113),n(86),n(87),n(121),n(95),n(88),n(98),n(89),n(122),n(123),n(114),n(115),n(99),c.a.ShadersStore.defaultPixelShader="#include<__decl__defaultFragment>\n#if defined(BUMP) || !defined(NORMAL)\n#extension GL_OES_standard_derivatives : enable\n#endif\n#define CUSTOM_FRAGMENT_BEGIN\n#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\n\n#define RECIPROCAL_PI2 0.15915494\nuniform vec3 vEyePosition;\nuniform vec3 vAmbientColor;\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n\n#include<helperFunctions>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n\n#ifdef DIFFUSE\n#if DIFFUSEDIRECTUV == 1\n#define vDiffuseUV vMainUV1\n#elif DIFFUSEDIRECTUV == 2\n#define vDiffuseUV vMainUV2\n#else\nvarying vec2 vDiffuseUV;\n#endif\nuniform sampler2D diffuseSampler;\n#endif\n#ifdef AMBIENT\n#if AMBIENTDIRECTUV == 1\n#define vAmbientUV vMainUV1\n#elif AMBIENTDIRECTUV == 2\n#define vAmbientUV vMainUV2\n#else\nvarying vec2 vAmbientUV;\n#endif\nuniform sampler2D ambientSampler;\n#endif\n#ifdef OPACITY\n#if OPACITYDIRECTUV == 1\n#define vOpacityUV vMainUV1\n#elif OPACITYDIRECTUV == 2\n#define vOpacityUV vMainUV2\n#else\nvarying vec2 vOpacityUV;\n#endif\nuniform sampler2D opacitySampler;\n#endif\n#ifdef EMISSIVE\n#if EMISSIVEDIRECTUV == 1\n#define vEmissiveUV vMainUV1\n#elif EMISSIVEDIRECTUV == 2\n#define vEmissiveUV vMainUV2\n#else\nvarying vec2 vEmissiveUV;\n#endif\nuniform sampler2D emissiveSampler;\n#endif\n#ifdef LIGHTMAP\n#if LIGHTMAPDIRECTUV == 1\n#define vLightmapUV vMainUV1\n#elif LIGHTMAPDIRECTUV == 2\n#define vLightmapUV vMainUV2\n#else\nvarying vec2 vLightmapUV;\n#endif\nuniform sampler2D lightmapSampler;\n#endif\n#ifdef REFRACTION\n#ifdef REFRACTIONMAP_3D\nuniform samplerCube refractionCubeSampler;\n#else\nuniform sampler2D refraction2DSampler;\n#endif\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\n#if SPECULARDIRECTUV == 1\n#define vSpecularUV vMainUV1\n#elif SPECULARDIRECTUV == 2\n#define vSpecularUV vMainUV2\n#else\nvarying vec2 vSpecularUV;\n#endif\nuniform sampler2D specularSampler;\n#endif\n#ifdef ALPHATEST\nuniform float alphaCutOff;\n#endif\n\n#include<fresnelFunction>\n\n#ifdef REFLECTION\n#ifdef REFLECTIONMAP_3D\nuniform samplerCube reflectionCubeSampler;\n#else\nuniform sampler2D reflection2DSampler;\n#endif\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#else\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#endif\n#include<reflectionFunction>\n#endif\n#include<imageProcessingDeclaration>\n#include<imageProcessingFunctions>\n#include<bumpFragmentFunctions>\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n#include<fogFragmentDeclaration>\n#define CUSTOM_FRAGMENT_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition-vPositionW);\n\nvec4 baseColor=vec4(1.,1.,1.,1.);\nvec3 diffuseColor=vDiffuseColor.rgb;\n\nfloat alpha=vDiffuseColor.a;\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=normalize(-cross(dFdx(vPositionW),dFdy(vPositionW)));\n#endif\n#include<bumpFragment>\n#ifdef TWOSIDEDLIGHTING\nnormalW=gl_FrontFacing ? normalW : -normalW;\n#endif\n#ifdef DIFFUSE\nbaseColor=texture2D(diffuseSampler,vDiffuseUV+uvOffset);\n#ifdef ALPHATEST\nif (baseColor.a<alphaCutOff)\ndiscard;\n#endif\n#ifdef ALPHAFROMDIFFUSE\nalpha*=baseColor.a;\n#endif\n#define CUSTOM_FRAGMENT_UPDATE_ALPHA\nbaseColor.rgb*=vDiffuseInfos.y;\n#endif\n#include<depthPrePass>\n#ifdef VERTEXCOLOR\nbaseColor.rgb*=vColor.rgb;\n#endif\n#define CUSTOM_FRAGMENT_UPDATE_DIFFUSE\n\nvec3 baseAmbientColor=vec3(1.,1.,1.);\n#ifdef AMBIENT\nbaseAmbientColor=texture2D(ambientSampler,vAmbientUV+uvOffset).rgb*vAmbientInfos.y;\n#endif\n#define CUSTOM_FRAGMENT_BEFORE_LIGHTS\n\n#ifdef SPECULARTERM\nfloat glossiness=vSpecularColor.a;\nvec3 specularColor=vSpecularColor.rgb;\n#ifdef SPECULAR\nvec4 specularMapColor=texture2D(specularSampler,vSpecularUV+uvOffset);\nspecularColor=specularMapColor.rgb;\n#ifdef GLOSSINESS\nglossiness=glossiness*specularMapColor.a;\n#endif\n#endif\n#else\nfloat glossiness=0.;\n#endif\n\nvec3 diffuseBase=vec3(0.,0.,0.);\nlightingInfo info;\n#ifdef SPECULARTERM\nvec3 specularBase=vec3(0.,0.,0.);\n#endif\nfloat shadow=1.;\n#ifdef LIGHTMAP\nvec3 lightmapColor=texture2D(lightmapSampler,vLightmapUV+uvOffset).rgb*vLightmapInfos.y;\n#endif\n#include<lightFragment>[0..maxSimultaneousLights]\n\nvec3 refractionColor=vec3(0.,0.,0.);\n#ifdef REFRACTION\nvec3 refractionVector=normalize(refract(-viewDirectionW,normalW,vRefractionInfos.y));\n#ifdef REFRACTIONMAP_3D\nrefractionVector.y=refractionVector.y*vRefractionInfos.w;\nif (dot(refractionVector,viewDirectionW)<1.0) {\nrefractionColor=textureCube(refractionCubeSampler,refractionVector).rgb;\n}\n#else\nvec3 vRefractionUVW=vec3(refractionMatrix*(view*vec4(vPositionW+refractionVector*vRefractionInfos.z,1.0)));\nvec2 refractionCoords=vRefractionUVW.xy/vRefractionUVW.z;\nrefractionCoords.y=1.0-refractionCoords.y;\nrefractionColor=texture2D(refraction2DSampler,refractionCoords).rgb;\n#endif\n#ifdef IS_REFRACTION_LINEAR\nrefractionColor=toGammaSpace(refractionColor);\n#endif\nrefractionColor*=vRefractionInfos.x;\n#endif\n\nvec3 reflectionColor=vec3(0.,0.,0.);\n#ifdef REFLECTION\nvec3 vReflectionUVW=computeReflectionCoords(vec4(vPositionW,1.0),normalW);\n#ifdef REFLECTIONMAP_3D\n#ifdef ROUGHNESS\nfloat bias=vReflectionInfos.y;\n#ifdef SPECULARTERM\n#ifdef SPECULAR\n#ifdef GLOSSINESS\nbias*=(1.0-specularMapColor.a);\n#endif\n#endif\n#endif\nreflectionColor=textureCube(reflectionCubeSampler,vReflectionUVW,bias).rgb;\n#else\nreflectionColor=textureCube(reflectionCubeSampler,vReflectionUVW).rgb;\n#endif\n#else\nvec2 coords=vReflectionUVW.xy;\n#ifdef REFLECTIONMAP_PROJECTION\ncoords/=vReflectionUVW.z;\n#endif\ncoords.y=1.0-coords.y;\nreflectionColor=texture2D(reflection2DSampler,coords).rgb;\n#endif\n#ifdef IS_REFLECTION_LINEAR\nreflectionColor=toGammaSpace(reflectionColor);\n#endif\nreflectionColor*=vReflectionInfos.x;\n#ifdef REFLECTIONFRESNEL\nfloat reflectionFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,reflectionRightColor.a,reflectionLeftColor.a);\n#ifdef REFLECTIONFRESNELFROMSPECULAR\n#ifdef SPECULARTERM\nreflectionColor*=specularColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#else\nreflectionColor*=reflectionLeftColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#endif\n#else\nreflectionColor*=reflectionLeftColor.rgb*(1.0-reflectionFresnelTerm)+reflectionFresnelTerm*reflectionRightColor.rgb;\n#endif\n#endif\n#endif\n#ifdef REFRACTIONFRESNEL\nfloat refractionFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,refractionRightColor.a,refractionLeftColor.a);\nrefractionColor*=refractionLeftColor.rgb*(1.0-refractionFresnelTerm)+refractionFresnelTerm*refractionRightColor.rgb;\n#endif\n#ifdef OPACITY\nvec4 opacityMap=texture2D(opacitySampler,vOpacityUV+uvOffset);\n#ifdef OPACITYRGB\nopacityMap.rgb=opacityMap.rgb*vec3(0.3,0.59,0.11);\nalpha*=(opacityMap.x+opacityMap.y+opacityMap.z)* vOpacityInfos.y;\n#else\nalpha*=opacityMap.a*vOpacityInfos.y;\n#endif\n#endif\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n#ifdef OPACITYFRESNEL\nfloat opacityFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,opacityParts.z,opacityParts.w);\nalpha+=opacityParts.x*(1.0-opacityFresnelTerm)+opacityFresnelTerm*opacityParts.y;\n#endif\n\nvec3 emissiveColor=vEmissiveColor;\n#ifdef EMISSIVE\nemissiveColor+=texture2D(emissiveSampler,vEmissiveUV+uvOffset).rgb*vEmissiveInfos.y;\n#endif\n#ifdef EMISSIVEFRESNEL\nfloat emissiveFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,emissiveRightColor.a,emissiveLeftColor.a);\nemissiveColor*=emissiveLeftColor.rgb*(1.0-emissiveFresnelTerm)+emissiveFresnelTerm*emissiveRightColor.rgb;\n#endif\n\n#ifdef DIFFUSEFRESNEL\nfloat diffuseFresnelTerm=computeFresnelTerm(viewDirectionW,normalW,diffuseRightColor.a,diffuseLeftColor.a);\ndiffuseBase*=diffuseLeftColor.rgb*(1.0-diffuseFresnelTerm)+diffuseFresnelTerm*diffuseRightColor.rgb;\n#endif\n\n#ifdef EMISSIVEASILLUMINATION\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#else\n#ifdef LINKEMISSIVEWITHDIFFUSE\nvec3 finalDiffuse=clamp((diffuseBase+emissiveColor)*diffuseColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#else\nvec3 finalDiffuse=clamp(diffuseBase*diffuseColor+emissiveColor+vAmbientColor,0.0,1.0)*baseColor.rgb;\n#endif\n#endif\n#ifdef SPECULARTERM\nvec3 finalSpecular=specularBase*specularColor;\n#ifdef SPECULAROVERALPHA\nalpha=clamp(alpha+dot(finalSpecular,vec3(0.3,0.59,0.11)),0.,1.);\n#endif\n#else\nvec3 finalSpecular=vec3(0.0);\n#endif\n#ifdef REFLECTIONOVERALPHA\nalpha=clamp(alpha+dot(reflectionColor,vec3(0.3,0.59,0.11)),0.,1.);\n#endif\n\n#ifdef EMISSIVEASILLUMINATION\nvec4 color=vec4(clamp(finalDiffuse*baseAmbientColor+finalSpecular+reflectionColor+emissiveColor+refractionColor,0.0,1.0),alpha);\n#else\nvec4 color=vec4(finalDiffuse*baseAmbientColor+finalSpecular+reflectionColor+refractionColor,alpha);\n#endif\n\n#ifdef LIGHTMAP\n#ifndef LIGHTMAPEXCLUDED\n#ifdef USELIGHTMAPASSHADOWMAP\ncolor.rgb*=lightmapColor;\n#else\ncolor.rgb+=lightmapColor;\n#endif\n#endif\n#endif\n#define CUSTOM_FRAGMENT_BEFORE_FOG\ncolor.rgb=max(color.rgb,0.);\n#include<logDepthFragment>\n#include<fogFragment>\n\n\n#ifdef IMAGEPROCESSINGPOSTPROCESS\ncolor.rgb=toLinearSpace(color.rgb);\n#else\n#ifdef IMAGEPROCESSING\ncolor.rgb=toLinearSpace(color.rgb);\ncolor=applyImageProcessing(color);\n#endif\n#endif\ncolor.a*=visibility;\n#ifdef PREMULTIPLYALPHA\n\ncolor.rgb*=color.a;\n#endif\n#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR\ngl_FragColor=color;\n}\n",c.a.IncludesShadersStore.defaultVertexDeclaration="\nuniform mat4 viewProjection;\nuniform mat4 view;\n#ifdef DIFFUSE\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef AMBIENT\nuniform mat4 ambientMatrix;\nuniform vec2 vAmbientInfos;\n#endif\n#ifdef OPACITY\nuniform mat4 opacityMatrix;\nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\nuniform mat4 emissiveMatrix;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\nuniform mat4 lightmapMatrix;\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM)\nuniform vec2 vSpecularInfos;\nuniform mat4 specularMatrix;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform mat4 bumpMatrix;\n#endif\n#ifdef REFLECTION\nuniform mat4 reflectionMatrix;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n",n(67),n(68),n(124),n(96),n(100),n(101),n(102),n(103),n(69),n(70),n(125),n(90),n(116),n(117),c.a.IncludesShadersStore.pointCloudVertex="#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif",n(118),c.a.ShadersStore.defaultVertexShader="#include<__decl__defaultVertex>\n\n#define CUSTOM_VERTEX_BEGIN\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef TANGENT\nattribute vec4 tangent;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<helperFunctions>\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0\nvarying vec2 vDiffuseUV;\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0\nvarying vec2 vAmbientUV;\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0\nvarying vec2 vOpacityUV;\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0\nvarying vec2 vEmissiveUV;\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0\nvarying vec2 vLightmapUV;\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM) && SPECULARDIRECTUV == 0\nvarying vec2 vSpecularUV;\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0\nvarying vec2 vBumpUV;\n#endif\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<bumpVertexDeclaration>\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#include<logDepthDeclaration>\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\nvec3 positionUpdated=position;\n#ifdef NORMAL\nvec3 normalUpdated=normal;\n#endif\n#ifdef TANGENT\nvec4 tangentUpdated=tangent;\n#endif\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\n#ifdef REFLECTIONMAP_SKYBOX_TRANSFORMED\nvPositionUVW=(reflectionMatrix*vec4(position,1.0)).xyz;\n#else\nvPositionUVW=position;\n#endif\n#endif\n#define CUSTOM_VERTEX_UPDATE_POSITION\n#define CUSTOM_VERTEX_UPDATE_NORMAL\n#include<instancesVertex>\n#include<bonesVertex>\n#ifdef MULTIVIEW\nif (gl_ViewID_OVR == 0u) {\ngl_Position=viewProjection*finalWorld*vec4(positionUpdated,1.0);\n} else {\ngl_Position=viewProjectionR*finalWorld*vec4(positionUpdated,1.0);\n}\n#else\ngl_Position=viewProjection*finalWorld*vec4(positionUpdated,1.0);\n#endif\nvec4 worldPos=finalWorld*vec4(positionUpdated,1.0);\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nmat3 normalWorld=mat3(finalWorld);\n#ifdef NONUNIFORMSCALING\nnormalWorld=transposeMat3(inverseMat3(normalWorld));\n#endif\nvNormalW=normalize(normalWorld*normalUpdated);\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvDirectionW=normalize(vec3(finalWorld*vec4(positionUpdated,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef MAINUV1\nvMainUV1=uv;\n#endif\n#ifdef MAINUV2\nvMainUV2=uv2;\n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0\nif (vDiffuseInfos.x == 0.)\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0\nif (vAmbientInfos.x == 0.)\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0\nif (vOpacityInfos.x == 0.)\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0\nif (vEmissiveInfos.x == 0.)\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0\nif (vLightmapInfos.x == 0.)\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(SPECULAR) && defined(SPECULARTERM) && SPECULARDIRECTUV == 0\nif (vSpecularInfos.x == 0.)\n{\nvSpecularUV=vec2(specularMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvSpecularUV=vec2(specularMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0\nif (vBumpInfos.x == 0.)\n{\nvBumpUV=vec2(bumpMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvBumpUV=vec2(bumpMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#include<bumpVertex>\n#include<clipPlaneVertex>\n#include<fogVertex>\n#include<shadowsVertex>[0..maxSimultaneousLights]\n#ifdef VERTEXCOLOR\n\nvColor=color;\n#endif\n#include<pointCloudVertex>\n#include<logDepthVertex>\n#define CUSTOM_VERTEX_MAIN_END\n}\n";var g=n(3);n.d(t,"b",function(){return v}),n.d(t,"a",function(){return y});var v=function(e){function t(){var t=e.call(this)||this;return t.MAINUV1=!1,t.MAINUV2=!1,t.DIFFUSE=!1,t.DIFFUSEDIRECTUV=0,t.AMBIENT=!1,t.AMBIENTDIRECTUV=0,t.OPACITY=!1,t.OPACITYDIRECTUV=0,t.OPACITYRGB=!1,t.REFLECTION=!1,t.EMISSIVE=!1,t.EMISSIVEDIRECTUV=0,t.SPECULAR=!1,t.SPECULARDIRECTUV=0,t.BUMP=!1,t.BUMPDIRECTUV=0,t.PARALLAX=!1,t.PARALLAXOCCLUSION=!1,t.SPECULAROVERALPHA=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.ALPHAFROMDIFFUSE=!1,t.POINTSIZE=!1,t.FOG=!1,t.SPECULARTERM=!1,t.DIFFUSEFRESNEL=!1,t.OPACITYFRESNEL=!1,t.REFLECTIONFRESNEL=!1,t.REFRACTIONFRESNEL=!1,t.EMISSIVEFRESNEL=!1,t.FRESNEL=!1,t.NORMAL=!1,t.UV1=!1,t.UV2=!1,t.VERTEXCOLOR=!1,t.VERTEXALPHA=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.BONETEXTURE=!1,t.INSTANCES=!1,t.GLOSSINESS=!1,t.ROUGHNESS=!1,t.EMISSIVEASILLUMINATION=!1,t.LINKEMISSIVEWITHDIFFUSE=!1,t.REFLECTIONFRESNELFROMSPECULAR=!1,t.LIGHTMAP=!1,t.LIGHTMAPDIRECTUV=0,t.OBJECTSPACE_NORMALMAP=!1,t.USELIGHTMAPASSHADOWMAP=!1,t.REFLECTIONMAP_3D=!1,t.REFLECTIONMAP_SPHERICAL=!1,t.REFLECTIONMAP_PLANAR=!1,t.REFLECTIONMAP_CUBIC=!1,t.USE_LOCAL_REFLECTIONMAP_CUBIC=!1,t.REFLECTIONMAP_PROJECTION=!1,t.REFLECTIONMAP_SKYBOX=!1,t.REFLECTIONMAP_SKYBOX_TRANSFORMED=!1,t.REFLECTIONMAP_EXPLICIT=!1,t.REFLECTIONMAP_EQUIRECTANGULAR=!1,t.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,t.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,t.INVERTCUBICMAP=!1,t.LOGARITHMICDEPTH=!1,t.REFRACTION=!1,t.REFRACTIONMAP_3D=!1,t.REFLECTIONOVERALPHA=!1,t.TWOSIDEDLIGHTING=!1,t.SHADOWFLOAT=!1,t.MORPHTARGETS=!1,t.MORPHTARGETS_NORMAL=!1,t.MORPHTARGETS_TANGENT=!1,t.NUM_MORPH_INFLUENCERS=0,t.NONUNIFORMSCALING=!1,t.PREMULTIPLYALPHA=!1,t.IMAGEPROCESSING=!1,t.VIGNETTE=!1,t.VIGNETTEBLENDMODEMULTIPLY=!1,t.VIGNETTEBLENDMODEOPAQUE=!1,t.TONEMAPPING=!1,t.TONEMAPPING_ACES=!1,t.CONTRAST=!1,t.COLORCURVES=!1,t.COLORGRADING=!1,t.COLORGRADING3D=!1,t.SAMPLER3DGREENDEPTH=!1,t.SAMPLER3DBGRMAP=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.MULTIVIEW=!1,t.IS_REFLECTION_LINEAR=!1,t.IS_REFRACTION_LINEAR=!1,t.EXPOSURE=!1,t.rebuild(),t}return r.d(t,e),t.prototype.setReflectionMode=function(e){for(var t=0,n=["REFLECTIONMAP_CUBIC","REFLECTIONMAP_EXPLICIT","REFLECTIONMAP_PLANAR","REFLECTIONMAP_PROJECTION","REFLECTIONMAP_PROJECTION","REFLECTIONMAP_SKYBOX","REFLECTIONMAP_SPHERICAL","REFLECTIONMAP_EQUIRECTANGULAR","REFLECTIONMAP_EQUIRECTANGULAR_FIXED","REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED"];t<n.length;t++){var r=n[t];this[r]=r===e}},t}(h.a),y=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i._diffuseTexture=null,i._ambientTexture=null,i._opacityTexture=null,i._reflectionTexture=null,i._emissiveTexture=null,i._specularTexture=null,i._bumpTexture=null,i._lightmapTexture=null,i._refractionTexture=null,i.ambientColor=new s.e(0,0,0),i.diffuseColor=new s.e(1,1,1),i.specularColor=new s.e(1,1,1),i.emissiveColor=new s.e(0,0,0),i.specularPower=64,i._useAlphaFromDiffuseTexture=!1,i._useEmissiveAsIllumination=!1,i._linkEmissiveWithDiffuse=!1,i._useSpecularOverAlpha=!1,i._useReflectionOverAlpha=!1,i._disableLighting=!1,i._useObjectSpaceNormalMap=!1,i._useParallax=!1,i._useParallaxOcclusion=!1,i.parallaxScaleBias=.05,i._roughness=0,i.indexOfRefraction=.98,i.invertRefractionY=!0,i.alphaCutOff=.4,i._useLightmapAsShadowmap=!1,i._useReflectionFresnelFromSpecular=!1,i._useGlossinessFromSpecularMapAlpha=!1,i._maxSimultaneousLights=4,i._invertNormalMapX=!1,i._invertNormalMapY=!1,i._twoSidedLighting=!1,i._renderTargets=new o.a(16),i._worldViewProjectionMatrix=s.j.Zero(),i._globalAmbientColor=new s.e(0,0,0),i._attachImageProcessingConfiguration(null),i.getRenderTargetTextures=function(){return i._renderTargets.reset(),t.ReflectionTextureEnabled&&i._reflectionTexture&&i._reflectionTexture.isRenderTarget&&i._renderTargets.push(i._reflectionTexture),t.RefractionTextureEnabled&&i._refractionTexture&&i._refractionTexture.isRenderTarget&&i._renderTargets.push(i._refractionTexture),i._renderTargets},i}return r.d(t,e),Object.defineProperty(t.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(e){this._attachImageProcessingConfiguration(e),this._markAllSubMeshesAsTexturesDirty()},enumerable:!0,configurable:!0}),t.prototype._attachImageProcessingConfiguration=function(e){var t=this;e!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=e||this.getScene().imageProcessingConfiguration,this._imageProcessingConfiguration&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add(function(){t._markAllSubMeshesAsImageProcessingDirty()})))},Object.defineProperty(t.prototype,"cameraColorCurvesEnabled",{get:function(){return this.imageProcessingConfiguration.colorCurvesEnabled},set:function(e){this.imageProcessingConfiguration.colorCurvesEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraColorGradingEnabled",{get:function(){return this.imageProcessingConfiguration.colorGradingEnabled},set:function(e){this.imageProcessingConfiguration.colorGradingEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraToneMappingEnabled",{get:function(){return this._imageProcessingConfiguration.toneMappingEnabled},set:function(e){this._imageProcessingConfiguration.toneMappingEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraExposure",{get:function(){return this._imageProcessingConfiguration.exposure},set:function(e){this._imageProcessingConfiguration.exposure=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraContrast",{get:function(){return this._imageProcessingConfiguration.contrast},set:function(e){this._imageProcessingConfiguration.contrast=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraColorGradingTexture",{get:function(){return this._imageProcessingConfiguration.colorGradingTexture},set:function(e){this._imageProcessingConfiguration.colorGradingTexture=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraColorCurves",{get:function(){return this._imageProcessingConfiguration.colorCurves},set:function(e){this._imageProcessingConfiguration.colorCurves=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasRenderTargetTextures",{get:function(){return!!(t.ReflectionTextureEnabled&&this._reflectionTexture&&this._reflectionTexture.isRenderTarget)||!!(t.RefractionTextureEnabled&&this._refractionTexture&&this._refractionTexture.isRenderTarget)},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"StandardMaterial"},Object.defineProperty(t.prototype,"useLogarithmicDepth",{get:function(){return this._useLogarithmicDepth},set:function(e){this._useLogarithmicDepth=e&&this.getScene().getEngine().getCaps().fragmentDepthSupported,this._markAllSubMeshesAsMiscDirty()},enumerable:!0,configurable:!0}),t.prototype.needAlphaBlending=function(){return this.alpha<1||null!=this._opacityTexture||this._shouldUseAlphaFromDiffuseTexture()||this._opacityFresnelParameters&&this._opacityFresnelParameters.isEnabled},t.prototype.needAlphaTesting=function(){return null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha},t.prototype._shouldUseAlphaFromDiffuseTexture=function(){return null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha&&this._useAlphaFromDiffuseTexture},t.prototype.getAlphaTestTexture=function(){return this._diffuseTexture},t.prototype.isReadyForSubMesh=function(e,n,r){if(void 0===r&&(r=!1),n.effect&&this.isFrozen&&this._wasPreviouslyReady)return!0;n._materialDefines||(n._materialDefines=new v);var i=this.getScene(),o=n._materialDefines;if(!this.checkReadyOnEveryCall&&n.effect&&o._renderId===i.getRenderId())return!0;var a=i.getEngine();if(o._needNormals=f.a.PrepareDefinesForLights(i,e,o,!0,this._maxSimultaneousLights,this._disableLighting),f.a.PrepareDefinesForMultiview(i,o),o._areTexturesDirty){if(o._needUVs=!1,o.MAINUV1=!1,o.MAINUV2=!1,i.texturesEnabled){if(this._diffuseTexture&&t.DiffuseTextureEnabled){if(!this._diffuseTexture.isReadyOrNotBlocking())return!1;f.a.PrepareDefinesForMergedUV(this._diffuseTexture,o,"DIFFUSE")}else o.DIFFUSE=!1;if(this._ambientTexture&&t.AmbientTextureEnabled){if(!this._ambientTexture.isReadyOrNotBlocking())return!1;f.a.PrepareDefinesForMergedUV(this._ambientTexture,o,"AMBIENT")}else o.AMBIENT=!1;if(this._opacityTexture&&t.OpacityTextureEnabled){if(!this._opacityTexture.isReadyOrNotBlocking())return!1;f.a.PrepareDefinesForMergedUV(this._opacityTexture,o,"OPACITY"),o.OPACITYRGB=this._opacityTexture.getAlphaFromRGB}else o.OPACITY=!1;if(this._reflectionTexture&&t.ReflectionTextureEnabled){if(!this._reflectionTexture.isReadyOrNotBlocking())return!1;switch(o._needNormals=!0,o.REFLECTION=!0,o.ROUGHNESS=this._roughness>0,o.REFLECTIONOVERALPHA=this._useReflectionOverAlpha,o.INVERTCUBICMAP=this._reflectionTexture.coordinatesMode===p.a.INVCUBIC_MODE,o.REFLECTIONMAP_3D=this._reflectionTexture.isCube,this._reflectionTexture.coordinatesMode){case p.a.EXPLICIT_MODE:o.setReflectionMode("REFLECTIONMAP_EXPLICIT");break;case p.a.PLANAR_MODE:o.setReflectionMode("REFLECTIONMAP_PLANAR");break;case p.a.PROJECTION_MODE:o.setReflectionMode("REFLECTIONMAP_PROJECTION");break;case p.a.SKYBOX_MODE:o.setReflectionMode("REFLECTIONMAP_SKYBOX"),o.REFLECTIONMAP_SKYBOX_TRANSFORMED=!this._reflectionTexture.getReflectionTextureMatrix().isIdentity();break;case p.a.SPHERICAL_MODE:o.setReflectionMode("REFLECTIONMAP_SPHERICAL");break;case p.a.EQUIRECTANGULAR_MODE:o.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR");break;case p.a.FIXED_EQUIRECTANGULAR_MODE:o.setReflectionMode("REFLECTIONMAP_EQUIRECTANGULAR_FIXED");break;case p.a.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:o.setReflectionMode("REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED");break;case p.a.CUBIC_MODE:case p.a.INVCUBIC_MODE:default:o.setReflectionMode("REFLECTIONMAP_CUBIC")}o.USE_LOCAL_REFLECTIONMAP_CUBIC=!!this._reflectionTexture.boundingBoxSize}else o.REFLECTION=!1;if(this._emissiveTexture&&t.EmissiveTextureEnabled){if(!this._emissiveTexture.isReadyOrNotBlocking())return!1;f.a.PrepareDefinesForMergedUV(this._emissiveTexture,o,"EMISSIVE")}else o.EMISSIVE=!1;if(this._lightmapTexture&&t.LightmapTextureEnabled){if(!this._lightmapTexture.isReadyOrNotBlocking())return!1;f.a.PrepareDefinesForMergedUV(this._lightmapTexture,o,"LIGHTMAP"),o.USELIGHTMAPASSHADOWMAP=this._useLightmapAsShadowmap}else o.LIGHTMAP=!1;if(this._specularTexture&&t.SpecularTextureEnabled){if(!this._specularTexture.isReadyOrNotBlocking())return!1;f.a.PrepareDefinesForMergedUV(this._specularTexture,o,"SPECULAR"),o.GLOSSINESS=this._useGlossinessFromSpecularMapAlpha}else o.SPECULAR=!1;if(i.getEngine().getCaps().standardDerivatives&&this._bumpTexture&&t.BumpTextureEnabled){if(!this._bumpTexture.isReady())return!1;f.a.PrepareDefinesForMergedUV(this._bumpTexture,o,"BUMP"),o.PARALLAX=this._useParallax,o.PARALLAXOCCLUSION=this._useParallaxOcclusion,o.OBJECTSPACE_NORMALMAP=this._useObjectSpaceNormalMap}else o.BUMP=!1;if(this._refractionTexture&&t.RefractionTextureEnabled){if(!this._refractionTexture.isReadyOrNotBlocking())return!1;o._needUVs=!0,o.REFRACTION=!0,o.REFRACTIONMAP_3D=this._refractionTexture.isCube}else o.REFRACTION=!1;o.TWOSIDEDLIGHTING=!this._backFaceCulling&&this._twoSidedLighting}else o.DIFFUSE=!1,o.AMBIENT=!1,o.OPACITY=!1,o.REFLECTION=!1,o.EMISSIVE=!1,o.LIGHTMAP=!1,o.BUMP=!1,o.REFRACTION=!1;o.ALPHAFROMDIFFUSE=this._shouldUseAlphaFromDiffuseTexture(),o.EMISSIVEASILLUMINATION=this._useEmissiveAsIllumination,o.LINKEMISSIVEWITHDIFFUSE=this._linkEmissiveWithDiffuse,o.SPECULAROVERALPHA=this._useSpecularOverAlpha,o.PREMULTIPLYALPHA=this.alphaMode===g.a.ALPHA_PREMULTIPLIED||this.alphaMode===g.a.ALPHA_PREMULTIPLIED_PORTERDUFF}if(o._areImageProcessingDirty&&this._imageProcessingConfiguration){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(o),o.IS_REFLECTION_LINEAR=null!=this.reflectionTexture&&!this.reflectionTexture.gammaSpace,o.IS_REFRACTION_LINEAR=null!=this.refractionTexture&&!this.refractionTexture.gammaSpace}if(o._areFresnelDirty&&(t.FresnelEnabled?(this._diffuseFresnelParameters||this._opacityFresnelParameters||this._emissiveFresnelParameters||this._refractionFresnelParameters||this._reflectionFresnelParameters)&&(o.DIFFUSEFRESNEL=this._diffuseFresnelParameters&&this._diffuseFresnelParameters.isEnabled,o.OPACITYFRESNEL=this._opacityFresnelParameters&&this._opacityFresnelParameters.isEnabled,o.REFLECTIONFRESNEL=this._reflectionFresnelParameters&&this._reflectionFresnelParameters.isEnabled,o.REFLECTIONFRESNELFROMSPECULAR=this._useReflectionFresnelFromSpecular,o.REFRACTIONFRESNEL=this._refractionFresnelParameters&&this._refractionFresnelParameters.isEnabled,o.EMISSIVEFRESNEL=this._emissiveFresnelParameters&&this._emissiveFresnelParameters.isEnabled,o._needNormals=!0,o.FRESNEL=!0):o.FRESNEL=!1),f.a.PrepareDefinesForMisc(e,i,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),o),f.a.PrepareDefinesForAttributes(e,o,!0,!0,!0),f.a.PrepareDefinesForFrameBoundValues(i,a,o,r),o.isDirty){o.markAsProcessed();var s=new c.c;o.REFLECTION&&s.addFallback(0,"REFLECTION"),o.SPECULAR&&s.addFallback(0,"SPECULAR"),o.BUMP&&s.addFallback(0,"BUMP"),o.PARALLAX&&s.addFallback(1,"PARALLAX"),o.PARALLAXOCCLUSION&&s.addFallback(0,"PARALLAXOCCLUSION"),o.SPECULAROVERALPHA&&s.addFallback(0,"SPECULAROVERALPHA"),o.FOG&&s.addFallback(1,"FOG"),o.POINTSIZE&&s.addFallback(0,"POINTSIZE"),o.LOGARITHMICDEPTH&&s.addFallback(0,"LOGARITHMICDEPTH"),f.a.HandleFallbacksForShadows(o,s,this._maxSimultaneousLights),o.SPECULARTERM&&s.addFallback(0,"SPECULARTERM"),o.DIFFUSEFRESNEL&&s.addFallback(1,"DIFFUSEFRESNEL"),o.OPACITYFRESNEL&&s.addFallback(2,"OPACITYFRESNEL"),o.REFLECTIONFRESNEL&&s.addFallback(3,"REFLECTIONFRESNEL"),o.EMISSIVEFRESNEL&&s.addFallback(4,"EMISSIVEFRESNEL"),o.FRESNEL&&s.addFallback(4,"FRESNEL"),o.MULTIVIEW&&s.addFallback(0,"MULTIVIEW");var h=[u.b.PositionKind];o.NORMAL&&h.push(u.b.NormalKind),o.UV1&&h.push(u.b.UVKind),o.UV2&&h.push(u.b.UV2Kind),o.VERTEXCOLOR&&h.push(u.b.ColorKind),f.a.PrepareAttributesForBones(h,e,o,s),f.a.PrepareAttributesForInstances(h,o),f.a.PrepareAttributesForMorphTargets(h,e,o);var d="default",_=["world","view","viewProjection","vEyePosition","vLightsType","vAmbientColor","vDiffuseColor","vSpecularColor","vEmissiveColor","visibility","vFogInfos","vFogColor","pointSize","vDiffuseInfos","vAmbientInfos","vOpacityInfos","vReflectionInfos","vEmissiveInfos","vSpecularInfos","vBumpInfos","vLightmapInfos","vRefractionInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","diffuseMatrix","ambientMatrix","opacityMatrix","reflectionMatrix","emissiveMatrix","specularMatrix","bumpMatrix","normalMatrix","lightmapMatrix","refractionMatrix","diffuseLeftColor","diffuseRightColor","opacityParts","reflectionLeftColor","reflectionRightColor","emissiveLeftColor","emissiveRightColor","refractionLeftColor","refractionRightColor","vReflectionPosition","vReflectionSize","logarithmicDepthConstant","vTangentSpaceParams","alphaCutOff","boneTextureWidth"],m=["diffuseSampler","ambientSampler","opacitySampler","reflectionCubeSampler","reflection2DSampler","emissiveSampler","specularSampler","bumpSampler","lightmapSampler","refractionCubeSampler","refraction2DSampler","boneSampler"],y=["Material","Scene"];l.a&&(l.a.PrepareUniforms(_,o),l.a.PrepareSamplers(m,o)),f.a.PrepareUniformsAndSamplersList({uniformsNames:_,uniformBuffersNames:y,samplers:m,defines:o,maxSimultaneousLights:this._maxSimultaneousLights}),this.customShaderNameResolve&&(d=this.customShaderNameResolve(d,_,y,m,o));var b=o.toString(),T=n.effect,E=i.getEngine().createEffect(d,{attributes:h,uniformsNames:_,uniformBuffersNames:y,samplers:m,defines:b,fallbacks:s,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights,maxSimultaneousMorphTargets:o.NUM_MORPH_INFLUENCERS}},a);E&&(this.allowShaderHotSwapping&&T&&!E.isReady()?(E=T,o.markAsUnprocessed()):(i.resetCachedMaterial(),n.setEffect(E,o),this.buildUniformLayout()))}return!(!n.effect||!n.effect.isReady()||(o._renderId=i.getRenderId(),this._wasPreviouslyReady=!0,0))},t.prototype.buildUniformLayout=function(){var e=this._uniformBuffer;e.addUniform("diffuseLeftColor",4),e.addUniform("diffuseRightColor",4),e.addUniform("opacityParts",4),e.addUniform("reflectionLeftColor",4),e.addUniform("reflectionRightColor",4),e.addUniform("refractionLeftColor",4),e.addUniform("refractionRightColor",4),e.addUniform("emissiveLeftColor",4),e.addUniform("emissiveRightColor",4),e.addUniform("vDiffuseInfos",2),e.addUniform("vAmbientInfos",2),e.addUniform("vOpacityInfos",2),e.addUniform("vReflectionInfos",2),e.addUniform("vReflectionPosition",3),e.addUniform("vReflectionSize",3),e.addUniform("vEmissiveInfos",2),e.addUniform("vLightmapInfos",2),e.addUniform("vSpecularInfos",2),e.addUniform("vBumpInfos",3),e.addUniform("diffuseMatrix",16),e.addUniform("ambientMatrix",16),e.addUniform("opacityMatrix",16),e.addUniform("reflectionMatrix",16),e.addUniform("emissiveMatrix",16),e.addUniform("lightmapMatrix",16),e.addUniform("specularMatrix",16),e.addUniform("bumpMatrix",16),e.addUniform("vTangentSpaceParams",2),e.addUniform("pointSize",1),e.addUniform("refractionMatrix",16),e.addUniform("vRefractionInfos",4),e.addUniform("vSpecularColor",4),e.addUniform("vEmissiveColor",3),e.addUniform("visibility",1),e.addUniform("vDiffuseColor",4),e.create()},t.prototype.unbind=function(){if(this._activeEffect){var t=!1;this._reflectionTexture&&this._reflectionTexture.isRenderTarget&&(this._activeEffect.setTexture("reflection2DSampler",null),t=!0),this._refractionTexture&&this._refractionTexture.isRenderTarget&&(this._activeEffect.setTexture("refraction2DSampler",null),t=!0),t&&this._markAllSubMeshesAsTexturesDirty()}e.prototype.unbind.call(this)},t.prototype.bindForSubMesh=function(e,n,r){var i=this.getScene(),o=r._materialDefines;if(o){var u=r.effect;if(u){this._activeEffect=u,o.INSTANCES||this.bindOnlyWorldMatrix(e),o.OBJECTSPACE_NORMALMAP&&(e.toNormalMatrix(this._normalMatrix),this.bindOnlyNormalMatrix(this._normalMatrix));var l=this._mustRebind(i,u,n.visibility);f.a.BindBonesParameters(n,u);var c=this._uniformBuffer;if(l){if(c.bindToEffect(u,"Material"),this.bindViewProjection(u),!c.useUbo||!this.isFrozen||!c.isSync){if(t.FresnelEnabled&&o.FRESNEL&&(this.diffuseFresnelParameters&&this.diffuseFresnelParameters.isEnabled&&(c.updateColor4("diffuseLeftColor",this.diffuseFresnelParameters.leftColor,this.diffuseFresnelParameters.power),c.updateColor4("diffuseRightColor",this.diffuseFresnelParameters.rightColor,this.diffuseFresnelParameters.bias)),this.opacityFresnelParameters&&this.opacityFresnelParameters.isEnabled&&c.updateColor4("opacityParts",new s.e(this.opacityFresnelParameters.leftColor.toLuminance(),this.opacityFresnelParameters.rightColor.toLuminance(),this.opacityFresnelParameters.bias),this.opacityFresnelParameters.power),this.reflectionFresnelParameters&&this.reflectionFresnelParameters.isEnabled&&(c.updateColor4("reflectionLeftColor",this.reflectionFresnelParameters.leftColor,this.reflectionFresnelParameters.power),c.updateColor4("reflectionRightColor",this.reflectionFresnelParameters.rightColor,this.reflectionFresnelParameters.bias)),this.refractionFresnelParameters&&this.refractionFresnelParameters.isEnabled&&(c.updateColor4("refractionLeftColor",this.refractionFresnelParameters.leftColor,this.refractionFresnelParameters.power),c.updateColor4("refractionRightColor",this.refractionFresnelParameters.rightColor,this.refractionFresnelParameters.bias)),this.emissiveFresnelParameters&&this.emissiveFresnelParameters.isEnabled&&(c.updateColor4("emissiveLeftColor",this.emissiveFresnelParameters.leftColor,this.emissiveFresnelParameters.power),c.updateColor4("emissiveRightColor",this.emissiveFresnelParameters.rightColor,this.emissiveFresnelParameters.bias))),i.texturesEnabled){if(this._diffuseTexture&&t.DiffuseTextureEnabled&&(c.updateFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),f.a.BindTextureMatrix(this._diffuseTexture,c,"diffuse"),this._diffuseTexture.hasAlpha&&u.setFloat("alphaCutOff",this.alphaCutOff)),this._ambientTexture&&t.AmbientTextureEnabled&&(c.updateFloat2("vAmbientInfos",this._ambientTexture.coordinatesIndex,this._ambientTexture.level),f.a.BindTextureMatrix(this._ambientTexture,c,"ambient")),this._opacityTexture&&t.OpacityTextureEnabled&&(c.updateFloat2("vOpacityInfos",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),f.a.BindTextureMatrix(this._opacityTexture,c,"opacity")),this._reflectionTexture&&t.ReflectionTextureEnabled&&(c.updateFloat2("vReflectionInfos",this._reflectionTexture.level,this.roughness),c.updateMatrix("reflectionMatrix",this._reflectionTexture.getReflectionTextureMatrix()),this._reflectionTexture.boundingBoxSize)){var h=this._reflectionTexture;c.updateVector3("vReflectionPosition",h.boundingBoxPosition),c.updateVector3("vReflectionSize",h.boundingBoxSize)}if(this._emissiveTexture&&t.EmissiveTextureEnabled&&(c.updateFloat2("vEmissiveInfos",this._emissiveTexture.coordinatesIndex,this._emissiveTexture.level),f.a.BindTextureMatrix(this._emissiveTexture,c,"emissive")),this._lightmapTexture&&t.LightmapTextureEnabled&&(c.updateFloat2("vLightmapInfos",this._lightmapTexture.coordinatesIndex,this._lightmapTexture.level),f.a.BindTextureMatrix(this._lightmapTexture,c,"lightmap")),this._specularTexture&&t.SpecularTextureEnabled&&(c.updateFloat2("vSpecularInfos",this._specularTexture.coordinatesIndex,this._specularTexture.level),f.a.BindTextureMatrix(this._specularTexture,c,"specular")),this._bumpTexture&&i.getEngine().getCaps().standardDerivatives&&t.BumpTextureEnabled&&(c.updateFloat3("vBumpInfos",this._bumpTexture.coordinatesIndex,1/this._bumpTexture.level,this.parallaxScaleBias),f.a.BindTextureMatrix(this._bumpTexture,c,"bump"),i._mirroredCameraPosition?c.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?1:-1,this._invertNormalMapY?1:-1):c.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?-1:1,this._invertNormalMapY?-1:1)),this._refractionTexture&&t.RefractionTextureEnabled){var d=1;this._refractionTexture.isCube||(c.updateMatrix("refractionMatrix",this._refractionTexture.getReflectionTextureMatrix()),this._refractionTexture.depth&&(d=this._refractionTexture.depth)),c.updateFloat4("vRefractionInfos",this._refractionTexture.level,this.indexOfRefraction,d,this.invertRefractionY?-1:1)}}this.pointsCloud&&c.updateFloat("pointSize",this.pointSize),o.SPECULARTERM&&c.updateColor4("vSpecularColor",this.specularColor,this.specularPower),c.updateColor3("vEmissiveColor",t.EmissiveTextureEnabled?this.emissiveColor:s.e.BlackReadOnly),c.updateFloat("visibility",n.visibility),c.updateColor4("vDiffuseColor",this.diffuseColor,this.alpha)}i.texturesEnabled&&(this._diffuseTexture&&t.DiffuseTextureEnabled&&u.setTexture("diffuseSampler",this._diffuseTexture),this._ambientTexture&&t.AmbientTextureEnabled&&u.setTexture("ambientSampler",this._ambientTexture),this._opacityTexture&&t.OpacityTextureEnabled&&u.setTexture("opacitySampler",this._opacityTexture),this._reflectionTexture&&t.ReflectionTextureEnabled&&u.setTexture(this._reflectionTexture.isCube?"reflectionCubeSampler":"reflection2DSampler",this._reflectionTexture),this._emissiveTexture&&t.EmissiveTextureEnabled&&u.setTexture("emissiveSampler",this._emissiveTexture),this._lightmapTexture&&t.LightmapTextureEnabled&&u.setTexture("lightmapSampler",this._lightmapTexture),this._specularTexture&&t.SpecularTextureEnabled&&u.setTexture("specularSampler",this._specularTexture),this._bumpTexture&&i.getEngine().getCaps().standardDerivatives&&t.BumpTextureEnabled&&u.setTexture("bumpSampler",this._bumpTexture),this._refractionTexture&&t.RefractionTextureEnabled)&&(d=1,u.setTexture(this._refractionTexture.isCube?"refractionCubeSampler":"refraction2DSampler",this._refractionTexture)),f.a.BindClipPlane(u,i),i.ambientColor.multiplyToRef(this.ambientColor,this._globalAmbientColor),f.a.BindEyePosition(u,i),u.setColor3("vAmbientColor",this._globalAmbientColor)}!l&&this.isFrozen||(i.lightsEnabled&&!this._disableLighting&&f.a.BindLights(i,n,u,o,this._maxSimultaneousLights),(i.fogEnabled&&n.applyFog&&i.fogMode!==a.a.FOGMODE_NONE||this._reflectionTexture||this._refractionTexture)&&this.bindView(u),f.a.BindFogParameters(i,n,u),o.NUM_MORPH_INFLUENCERS&&f.a.BindMorphTargetParameters(n,u),f.a.BindLogDepth(o,u,i),this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.applyByPostProcess&&this._imageProcessingConfiguration.bind(this._activeEffect)),c.update(),this._afterBind(n,this._activeEffect)}}},t.prototype.getAnimatables=function(){var e=[];return this._diffuseTexture&&this._diffuseTexture.animations&&this._diffuseTexture.animations.length>0&&e.push(this._diffuseTexture),this._ambientTexture&&this._ambientTexture.animations&&this._ambientTexture.animations.length>0&&e.push(this._ambientTexture),this._opacityTexture&&this._opacityTexture.animations&&this._opacityTexture.animations.length>0&&e.push(this._opacityTexture),this._reflectionTexture&&this._reflectionTexture.animations&&this._reflectionTexture.animations.length>0&&e.push(this._reflectionTexture),this._emissiveTexture&&this._emissiveTexture.animations&&this._emissiveTexture.animations.length>0&&e.push(this._emissiveTexture),this._specularTexture&&this._specularTexture.animations&&this._specularTexture.animations.length>0&&e.push(this._specularTexture),this._bumpTexture&&this._bumpTexture.animations&&this._bumpTexture.animations.length>0&&e.push(this._bumpTexture),this._lightmapTexture&&this._lightmapTexture.animations&&this._lightmapTexture.animations.length>0&&e.push(this._lightmapTexture),this._refractionTexture&&this._refractionTexture.animations&&this._refractionTexture.animations.length>0&&e.push(this._refractionTexture),e},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._diffuseTexture&&t.push(this._diffuseTexture),this._ambientTexture&&t.push(this._ambientTexture),this._opacityTexture&&t.push(this._opacityTexture),this._reflectionTexture&&t.push(this._reflectionTexture),this._emissiveTexture&&t.push(this._emissiveTexture),this._specularTexture&&t.push(this._specularTexture),this._bumpTexture&&t.push(this._bumpTexture),this._lightmapTexture&&t.push(this._lightmapTexture),this._refractionTexture&&t.push(this._refractionTexture),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||this._diffuseTexture===t||this._ambientTexture===t||this._opacityTexture===t||this._reflectionTexture===t||this._emissiveTexture===t||this._specularTexture===t||this._bumpTexture===t||this._lightmapTexture===t||this._refractionTexture===t},t.prototype.dispose=function(t,n){n&&(this._diffuseTexture&&this._diffuseTexture.dispose(),this._ambientTexture&&this._ambientTexture.dispose(),this._opacityTexture&&this._opacityTexture.dispose(),this._reflectionTexture&&this._reflectionTexture.dispose(),this._emissiveTexture&&this._emissiveTexture.dispose(),this._specularTexture&&this._specularTexture.dispose(),this._bumpTexture&&this._bumpTexture.dispose(),this._lightmapTexture&&this._lightmapTexture.dispose(),this._refractionTexture&&this._refractionTexture.dispose()),this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),e.prototype.dispose.call(this,t,n)},t.prototype.clone=function(e){var n=this,r=i.a.Clone(function(){return new t(e,n.getScene())},this);return r.name=e,r.id=e,r},t.prototype.serialize=function(){return i.a.Serialize(this)},t.Parse=function(e,n,r){return i.a.Parse(function(){return new t(e.name,n)},e,n,r)},Object.defineProperty(t,"DiffuseTextureEnabled",{get:function(){return m.a.DiffuseTextureEnabled},set:function(e){m.a.DiffuseTextureEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"AmbientTextureEnabled",{get:function(){return m.a.AmbientTextureEnabled},set:function(e){m.a.AmbientTextureEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"OpacityTextureEnabled",{get:function(){return m.a.OpacityTextureEnabled},set:function(e){m.a.OpacityTextureEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ReflectionTextureEnabled",{get:function(){return m.a.ReflectionTextureEnabled},set:function(e){m.a.ReflectionTextureEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"EmissiveTextureEnabled",{get:function(){return m.a.EmissiveTextureEnabled},set:function(e){m.a.EmissiveTextureEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"SpecularTextureEnabled",{get:function(){return m.a.SpecularTextureEnabled},set:function(e){m.a.SpecularTextureEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"BumpTextureEnabled",{get:function(){return m.a.BumpTextureEnabled},set:function(e){m.a.BumpTextureEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LightmapTextureEnabled",{get:function(){return m.a.LightmapTextureEnabled},set:function(e){m.a.LightmapTextureEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"RefractionTextureEnabled",{get:function(){return m.a.RefractionTextureEnabled},set:function(e){m.a.RefractionTextureEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ColorGradingTextureEnabled",{get:function(){return m.a.ColorGradingTextureEnabled},set:function(e){m.a.ColorGradingTextureEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"FresnelEnabled",{get:function(){return m.a.FresnelEnabled},set:function(e){m.a.FresnelEnabled=e},enumerable:!0,configurable:!0}),r.c([Object(i.m)("diffuseTexture")],t.prototype,"_diffuseTexture",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesAndMiscDirty")],t.prototype,"diffuseTexture",void 0),r.c([Object(i.m)("ambientTexture")],t.prototype,"_ambientTexture",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"ambientTexture",void 0),r.c([Object(i.m)("opacityTexture")],t.prototype,"_opacityTexture",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesAndMiscDirty")],t.prototype,"opacityTexture",void 0),r.c([Object(i.m)("reflectionTexture")],t.prototype,"_reflectionTexture",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectionTexture",void 0),r.c([Object(i.m)("emissiveTexture")],t.prototype,"_emissiveTexture",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"emissiveTexture",void 0),r.c([Object(i.m)("specularTexture")],t.prototype,"_specularTexture",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"specularTexture",void 0),r.c([Object(i.m)("bumpTexture")],t.prototype,"_bumpTexture",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"bumpTexture",void 0),r.c([Object(i.m)("lightmapTexture")],t.prototype,"_lightmapTexture",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"lightmapTexture",void 0),r.c([Object(i.m)("refractionTexture")],t.prototype,"_refractionTexture",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"refractionTexture",void 0),r.c([Object(i.e)("ambient")],t.prototype,"ambientColor",void 0),r.c([Object(i.e)("diffuse")],t.prototype,"diffuseColor",void 0),r.c([Object(i.e)("specular")],t.prototype,"specularColor",void 0),r.c([Object(i.e)("emissive")],t.prototype,"emissiveColor",void 0),r.c([Object(i.c)()],t.prototype,"specularPower",void 0),r.c([Object(i.c)("useAlphaFromDiffuseTexture")],t.prototype,"_useAlphaFromDiffuseTexture",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useAlphaFromDiffuseTexture",void 0),r.c([Object(i.c)("useEmissiveAsIllumination")],t.prototype,"_useEmissiveAsIllumination",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useEmissiveAsIllumination",void 0),r.c([Object(i.c)("linkEmissiveWithDiffuse")],t.prototype,"_linkEmissiveWithDiffuse",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"linkEmissiveWithDiffuse",void 0),r.c([Object(i.c)("useSpecularOverAlpha")],t.prototype,"_useSpecularOverAlpha",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useSpecularOverAlpha",void 0),r.c([Object(i.c)("useReflectionOverAlpha")],t.prototype,"_useReflectionOverAlpha",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useReflectionOverAlpha",void 0),r.c([Object(i.c)("disableLighting")],t.prototype,"_disableLighting",void 0),r.c([Object(i.b)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),r.c([Object(i.c)("useObjectSpaceNormalMap")],t.prototype,"_useObjectSpaceNormalMap",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useObjectSpaceNormalMap",void 0),r.c([Object(i.c)("useParallax")],t.prototype,"_useParallax",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useParallax",void 0),r.c([Object(i.c)("useParallaxOcclusion")],t.prototype,"_useParallaxOcclusion",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useParallaxOcclusion",void 0),r.c([Object(i.c)()],t.prototype,"parallaxScaleBias",void 0),r.c([Object(i.c)("roughness")],t.prototype,"_roughness",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"roughness",void 0),r.c([Object(i.c)()],t.prototype,"indexOfRefraction",void 0),r.c([Object(i.c)()],t.prototype,"invertRefractionY",void 0),r.c([Object(i.c)()],t.prototype,"alphaCutOff",void 0),r.c([Object(i.c)("useLightmapAsShadowmap")],t.prototype,"_useLightmapAsShadowmap",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useLightmapAsShadowmap",void 0),r.c([Object(i.h)("diffuseFresnelParameters")],t.prototype,"_diffuseFresnelParameters",void 0),r.c([Object(i.b)("_markAllSubMeshesAsFresnelDirty")],t.prototype,"diffuseFresnelParameters",void 0),r.c([Object(i.h)("opacityFresnelParameters")],t.prototype,"_opacityFresnelParameters",void 0),r.c([Object(i.b)("_markAllSubMeshesAsFresnelAndMiscDirty")],t.prototype,"opacityFresnelParameters",void 0),r.c([Object(i.h)("reflectionFresnelParameters")],t.prototype,"_reflectionFresnelParameters",void 0),r.c([Object(i.b)("_markAllSubMeshesAsFresnelDirty")],t.prototype,"reflectionFresnelParameters",void 0),r.c([Object(i.h)("refractionFresnelParameters")],t.prototype,"_refractionFresnelParameters",void 0),r.c([Object(i.b)("_markAllSubMeshesAsFresnelDirty")],t.prototype,"refractionFresnelParameters",void 0),r.c([Object(i.h)("emissiveFresnelParameters")],t.prototype,"_emissiveFresnelParameters",void 0),r.c([Object(i.b)("_markAllSubMeshesAsFresnelDirty")],t.prototype,"emissiveFresnelParameters",void 0),r.c([Object(i.c)("useReflectionFresnelFromSpecular")],t.prototype,"_useReflectionFresnelFromSpecular",void 0),r.c([Object(i.b)("_markAllSubMeshesAsFresnelDirty")],t.prototype,"useReflectionFresnelFromSpecular",void 0),r.c([Object(i.c)("useGlossinessFromSpecularMapAlpha")],t.prototype,"_useGlossinessFromSpecularMapAlpha",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useGlossinessFromSpecularMapAlpha",void 0),r.c([Object(i.c)("maxSimultaneousLights")],t.prototype,"_maxSimultaneousLights",void 0),r.c([Object(i.b)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),r.c([Object(i.c)("invertNormalMapX")],t.prototype,"_invertNormalMapX",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"invertNormalMapX",void 0),r.c([Object(i.c)("invertNormalMapY")],t.prototype,"_invertNormalMapY",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"invertNormalMapY",void 0),r.c([Object(i.c)("twoSidedLighting")],t.prototype,"_twoSidedLighting",void 0),r.c([Object(i.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"twoSidedLighting",void 0),r.c([Object(i.c)()],t.prototype,"useLogarithmicDepth",null),t}(d.a);_.a.RegisteredTypes["BABYLON.StandardMaterial"]=y,a.a.DefaultMaterialFactory=function(e){return new y("default material",e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.BuildArray=function(e,t){for(var n=[],r=0;r<e;++r)n.push(t());return n},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.IsWindowObjectExist=function(){return"undefined"!=typeof window},e.GetDOMTextContent=function(e){for(var t="",n=e.firstChild;n;)3===n.nodeType&&(t+=n.textContent),n=n.nextSibling;return t},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(e,t,n,r,i,o){this.source=e,this.pointerX=t,this.pointerY=n,this.meshUnderPointer=r,this.sourceEvent=i,this.additionalData=o}return e.CreateNew=function(t,n,r){var i=t.getScene();return new e(t,i.pointerX,i.pointerY,i.meshUnderPointer||t,n,r)},e.CreateNewFromSprite=function(t,n,r,i){return new e(t,n.pointerX,n.pointerY,n.meshUnderPointer,r,i)},e.CreateNewFromScene=function(t,n){return new e(null,t.pointerX,t.pointerY,t.meshUnderPointer,n)},e.CreateNewFromPrimitive=function(t,n,r,i){return new e(t,n.x,n.y,null,r,i)},e}()},function(e,t,n){"use strict";n.d(t,"e",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return u});var r=n(1),i=function(){function e(e,t){this.type=e,this.jointData=t,t.nativeParams=t.nativeParams||{}}return Object.defineProperty(e.prototype,"physicsJoint",{get:function(){return this._physicsJoint},set:function(e){this._physicsJoint=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"physicsPlugin",{set:function(e){this._physicsPlugin=e},enumerable:!0,configurable:!0}),e.prototype.executeNativeFunction=function(e){e(this._physicsPlugin.world,this._physicsJoint)},e.DistanceJoint=0,e.HingeJoint=1,e.BallAndSocketJoint=2,e.WheelJoint=3,e.SliderJoint=4,e.PrismaticJoint=5,e.UniversalJoint=6,e.Hinge2Joint=e.WheelJoint,e.PointToPointJoint=8,e.SpringJoint=9,e.LockJoint=10,e}(),o=function(e){function t(t){return e.call(this,i.DistanceJoint,t)||this}return r.d(t,e),t.prototype.updateDistance=function(e,t){this._physicsPlugin.updateDistanceJoint(this,e,t)},t}(i),a=function(e){function t(t,n){return e.call(this,t,n)||this}return r.d(t,e),t.prototype.setMotor=function(e,t){this._physicsPlugin.setMotor(this,e||0,t)},t.prototype.setLimit=function(e,t){this._physicsPlugin.setLimit(this,e,t)},t}(i),s=function(e){function t(t){return e.call(this,i.HingeJoint,t)||this}return r.d(t,e),t.prototype.setMotor=function(e,t){this._physicsPlugin.setMotor(this,e||0,t)},t.prototype.setLimit=function(e,t){this._physicsPlugin.setLimit(this,e,t)},t}(a),u=function(e){function t(t){return e.call(this,i.Hinge2Joint,t)||this}return r.d(t,e),t.prototype.setMotor=function(e,t,n){void 0===n&&(n=0),this._physicsPlugin.setMotor(this,e||0,t,n)},t.prototype.setLimit=function(e,t,n){void 0===n&&(n=0),this._physicsPlugin.setLimit(this,e,t,n)},t}(a)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(1),i=n(2),o=n(0),a=n(25),s=n(63),u=n(22),l=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.diffuse=new o.e(1,1,1),i.specular=new o.e(1,1,1),i.falloffType=t.FALLOFF_DEFAULT,i.intensity=1,i._range=Number.MAX_VALUE,i._inverseSquaredRange=0,i._photometricScale=1,i._intensityMode=t.INTENSITYMODE_AUTOMATIC,i._radius=1e-5,i.renderPriority=0,i._shadowEnabled=!0,i._excludeWithLayerMask=0,i._includeOnlyWithLayerMask=0,i._lightmapMode=0,i._excludedMeshesIds=new Array,i._includedOnlyMeshesIds=new Array,i._isLight=!0,i.getScene().addLight(i),i._uniformBuffer=new s.a(i.getScene().getEngine()),i._buildUniformLayout(),i.includedOnlyMeshes=new Array,i.excludedMeshes=new Array,i._resyncMeshes(),i}return r.d(t,e),Object.defineProperty(t.prototype,"range",{get:function(){return this._range},set:function(e){this._range=e,this._inverseSquaredRange=1/(this.range*this.range)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intensityMode",{get:function(){return this._intensityMode},set:function(e){this._intensityMode=e,this._computePhotometricScale()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e,this._computePhotometricScale()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowEnabled",{get:function(){return this._shadowEnabled},set:function(e){this._shadowEnabled!==e&&(this._shadowEnabled=e,this._markMeshesAsLightDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"includedOnlyMeshes",{get:function(){return this._includedOnlyMeshes},set:function(e){this._includedOnlyMeshes=e,this._hookArrayForIncludedOnly(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"excludedMeshes",{get:function(){return this._excludedMeshes},set:function(e){this._excludedMeshes=e,this._hookArrayForExcluded(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"excludeWithLayerMask",{get:function(){return this._excludeWithLayerMask},set:function(e){this._excludeWithLayerMask=e,this._resyncMeshes()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"includeOnlyWithLayerMask",{get:function(){return this._includeOnlyWithLayerMask},set:function(e){this._includeOnlyWithLayerMask=e,this._resyncMeshes()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lightmapMode",{get:function(){return this._lightmapMode},set:function(e){this._lightmapMode!==e&&(this._lightmapMode=e,this._markMeshesAsLightDirty())},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"Light"},t.prototype.toString=function(e){var t="Name: "+this.name;if(t+=", type: "+["Point","Directional","Spot","Hemispheric"][this.getTypeID()],this.animations)for(var n=0;n<this.animations.length;n++)t+=", animation[0]: "+this.animations[n].toString(e);return t},t.prototype._syncParentEnabledState=function(){e.prototype._syncParentEnabledState.call(this),this._resyncMeshes()},t.prototype.setEnabled=function(t){e.prototype.setEnabled.call(this,t),this._resyncMeshes()},t.prototype.getShadowGenerator=function(){return this._shadowGenerator},t.prototype.getAbsolutePosition=function(){return o.x.Zero()},t.prototype.canAffectMesh=function(e){return!(e&&(this.includedOnlyMeshes&&this.includedOnlyMeshes.length>0&&-1===this.includedOnlyMeshes.indexOf(e)||this.excludedMeshes&&this.excludedMeshes.length>0&&-1!==this.excludedMeshes.indexOf(e)||0!==this.includeOnlyWithLayerMask&&0==(this.includeOnlyWithLayerMask&e.layerMask)||0!==this.excludeWithLayerMask&&this.excludeWithLayerMask&e.layerMask))},t.CompareLightsPriority=function(e,t){return e.shadowEnabled!==t.shadowEnabled?(t.shadowEnabled?1:0)-(e.shadowEnabled?1:0):t.renderPriority-e.renderPriority},t.prototype.dispose=function(t,n){void 0===n&&(n=!1),this._shadowGenerator&&(this._shadowGenerator.dispose(),this._shadowGenerator=null),this.getScene().stopAnimation(this);for(var r=0,i=this.getScene().meshes;r<i.length;r++)i[r]._removeLightSource(this);this._uniformBuffer.dispose(),this.getScene().removeLight(this),e.prototype.dispose.call(this,t,n)},t.prototype.getTypeID=function(){return 0},t.prototype.getScaledIntensity=function(){return this._photometricScale*this.intensity},t.prototype.clone=function(e){var n=t.GetConstructorFromName(this.getTypeID(),e,this.getScene());return n?i.a.Clone(n,this):null},t.prototype.serialize=function(){var e=i.a.Serialize(this);return e.type=this.getTypeID(),this.parent&&(e.parentId=this.parent.id),this.excludedMeshes.length>0&&(e.excludedMeshesIds=[],this.excludedMeshes.forEach(function(t){e.excludedMeshesIds.push(t.id)})),this.includedOnlyMeshes.length>0&&(e.includedOnlyMeshesIds=[],this.includedOnlyMeshes.forEach(function(t){e.includedOnlyMeshesIds.push(t.id)})),i.a.AppendSerializedAnimations(this,e),e.ranges=this.serializeAnimationRanges(),e},t.GetConstructorFromName=function(e,t,n){return a.a.Construct("Light_Type_"+e,t,n)||null},t.Parse=function(e,n){var r=t.GetConstructorFromName(e.type,e.name,n);if(!r)return null;var o=i.a.Parse(r,e,n);if(e.excludedMeshesIds&&(o._excludedMeshesIds=e.excludedMeshesIds),e.includedOnlyMeshesIds&&(o._includedOnlyMeshesIds=e.includedOnlyMeshesIds),e.parentId&&(o._waitingParentId=e.parentId),void 0!==e.falloffType&&(o.falloffType=e.falloffType),void 0!==e.lightmapMode&&(o.lightmapMode=e.lightmapMode),e.animations){for(var s=0;s<e.animations.length;s++){var l=e.animations[s],c=u.a.GetClass("BABYLON.Animation");c&&o.animations.push(c.Parse(l))}a.a.ParseAnimationRanges(o,e,n)}return e.autoAnimate&&n.beginAnimation(o,e.autoAnimateFrom,e.autoAnimateTo,e.autoAnimateLoop,e.autoAnimateSpeed||1),o},t.prototype._hookArrayForExcluded=function(e){var t=this,n=e.push;e.push=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var o=n.apply(e,r),a=0,s=r;a<s.length;a++)s[a]._resyncLighSource(t);return o};var r=e.splice;e.splice=function(n,i){for(var o=r.apply(e,[n,i]),a=0,s=o;a<s.length;a++)s[a]._resyncLighSource(t);return o};for(var i=0,o=e;i<o.length;i++)o[i]._resyncLighSource(this)},t.prototype._hookArrayForIncludedOnly=function(e){var t=this,n=e.push;e.push=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=n.apply(e,r);return t._resyncMeshes(),o};var r=e.splice;e.splice=function(n,i){var o=r.apply(e,[n,i]);return t._resyncMeshes(),o},this._resyncMeshes()},t.prototype._resyncMeshes=function(){for(var e=0,t=this.getScene().meshes;e<t.length;e++)t[e]._resyncLighSource(this)},t.prototype._markMeshesAsLightDirty=function(){for(var e=0,t=this.getScene().meshes;e<t.length;e++){var n=t[e];-1!==n.lightSources.indexOf(this)&&n._markSubMeshesAsLightDirty()}},t.prototype._computePhotometricScale=function(){this._photometricScale=this._getPhotometricScale(),this.getScene().resetCachedMaterial()},t.prototype._getPhotometricScale=function(){var e=0,n=this.getTypeID(),r=this.intensityMode;switch(r===t.INTENSITYMODE_AUTOMATIC&&(r=n===t.LIGHTTYPEID_DIRECTIONALLIGHT?t.INTENSITYMODE_ILLUMINANCE:t.INTENSITYMODE_LUMINOUSINTENSITY),n){case t.LIGHTTYPEID_POINTLIGHT:case t.LIGHTTYPEID_SPOTLIGHT:switch(r){case t.INTENSITYMODE_LUMINOUSPOWER:e=1/(4*Math.PI);break;case t.INTENSITYMODE_LUMINOUSINTENSITY:e=1;break;case t.INTENSITYMODE_LUMINANCE:e=this.radius*this.radius}break;case t.LIGHTTYPEID_DIRECTIONALLIGHT:switch(r){case t.INTENSITYMODE_ILLUMINANCE:e=1;break;case t.INTENSITYMODE_LUMINANCE:var i=this.radius;i=Math.max(i,.001),e=2*Math.PI*(1-Math.cos(i))}break;case t.LIGHTTYPEID_HEMISPHERICLIGHT:e=1}return e},t.prototype._reorderLightsInScene=function(){var e=this.getScene();0!=this._renderPriority&&(e.requireLightSorting=!0),this.getScene().sortLightsByPriority()},t.FALLOFF_DEFAULT=0,t.FALLOFF_PHYSICAL=1,t.FALLOFF_GLTF=2,t.FALLOFF_STANDARD=3,t.LIGHTMAP_DEFAULT=0,t.LIGHTMAP_SPECULAR=1,t.LIGHTMAP_SHADOWSONLY=2,t.INTENSITYMODE_AUTOMATIC=0,t.INTENSITYMODE_LUMINOUSPOWER=1,t.INTENSITYMODE_LUMINOUSINTENSITY=2,t.INTENSITYMODE_ILLUMINANCE=3,t.INTENSITYMODE_LUMINANCE=4,t.LIGHTTYPEID_POINTLIGHT=0,t.LIGHTTYPEID_DIRECTIONALLIGHT=1,t.LIGHTTYPEID_SPOTLIGHT=2,t.LIGHTTYPEID_HEMISPHERICLIGHT=3,r.c([Object(i.e)()],t.prototype,"diffuse",void 0),r.c([Object(i.e)()],t.prototype,"specular",void 0),r.c([Object(i.c)()],t.prototype,"falloffType",void 0),r.c([Object(i.c)()],t.prototype,"intensity",void 0),r.c([Object(i.c)()],t.prototype,"range",null),r.c([Object(i.c)()],t.prototype,"intensityMode",null),r.c([Object(i.c)()],t.prototype,"radius",null),r.c([Object(i.c)()],t.prototype,"_renderPriority",void 0),r.c([Object(i.b)("_reorderLightsInScene")],t.prototype,"renderPriority",void 0),r.c([Object(i.c)("shadowEnabled")],t.prototype,"_shadowEnabled",void 0),r.c([Object(i.c)("excludeWithLayerMask")],t.prototype,"_excludeWithLayerMask",void 0),r.c([Object(i.c)("includeOnlyWithLayerMask")],t.prototype,"_includeOnlyWithLayerMask",void 0),r.c([Object(i.c)("lightmapMode")],t.prototype,"_lightmapMode",void 0),t}(a.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(34),i=n(0),o=n(50),a=n(81),s=n(16),u=n(21),l=function(){function e(e,t,n){void 0===n&&(n=Number.MAX_VALUE),this.origin=e,this.direction=t,this.length=n}return e.prototype.intersectsBoxMinMax=function(t,n,r){void 0===r&&(r=0);var i,o,a,s,u=e.TmpVector3[0].copyFromFloats(t.x-r,t.y-r,t.z-r),l=e.TmpVector3[1].copyFromFloats(n.x+r,n.y+r,n.z+r),c=0,h=Number.MAX_VALUE;if(Math.abs(this.direction.x)<1e-7){if(this.origin.x<u.x||this.origin.x>l.x)return!1}else if((a=(l.x-this.origin.x)*(i=1/this.direction.x))==-1/0&&(a=1/0),(o=(u.x-this.origin.x)*i)>a&&(s=o,o=a,a=s),(c=Math.max(o,c))>(h=Math.min(a,h)))return!1;if(Math.abs(this.direction.y)<1e-7){if(this.origin.y<u.y||this.origin.y>l.y)return!1}else if((a=(l.y-this.origin.y)*(i=1/this.direction.y))==-1/0&&(a=1/0),(o=(u.y-this.origin.y)*i)>a&&(s=o,o=a,a=s),(c=Math.max(o,c))>(h=Math.min(a,h)))return!1;if(Math.abs(this.direction.z)<1e-7){if(this.origin.z<u.z||this.origin.z>l.z)return!1}else if((a=(l.z-this.origin.z)*(i=1/this.direction.z))==-1/0&&(a=1/0),(o=(u.z-this.origin.z)*i)>a&&(s=o,o=a,a=s),(c=Math.max(o,c))>(h=Math.min(a,h)))return!1;return!0},e.prototype.intersectsBox=function(e,t){return void 0===t&&(t=0),this.intersectsBoxMinMax(e.minimum,e.maximum,t)},e.prototype.intersectsSphere=function(e,t){void 0===t&&(t=0);var n=e.center.x-this.origin.x,r=e.center.y-this.origin.y,i=e.center.z-this.origin.z,o=n*n+r*r+i*i,a=e.radius+t,s=a*a;if(o<=s)return!0;var u=n*this.direction.x+r*this.direction.y+i*this.direction.z;return!(u<0)&&o-u*u<=s},e.prototype.intersectsTriangle=function(t,n,r){var o=e.TmpVector3[0],s=e.TmpVector3[1],u=e.TmpVector3[2],l=e.TmpVector3[3],c=e.TmpVector3[4];n.subtractToRef(t,o),r.subtractToRef(t,s),i.x.CrossToRef(this.direction,s,u);var h=i.x.Dot(o,u);if(0===h)return null;var d=1/h;this.origin.subtractToRef(t,l);var f=i.x.Dot(l,u)*d;if(f<0||f>1)return null;i.x.CrossToRef(l,o,c);var p=i.x.Dot(this.direction,c)*d;if(p<0||f+p>1)return null;var _=i.x.Dot(s,c)*d;return _>this.length?null:new a.a(f,p,_)},e.prototype.intersectsPlane=function(e){var t,n=i.x.Dot(e.normal,this.direction);if(Math.abs(n)<9.99999997475243e-7)return null;var r=i.x.Dot(e.normal,this.origin);return(t=(-e.d-r)/n)<0?t<-9.99999997475243e-7?null:0:t},e.prototype.intersectsMesh=function(t,n){var r=i.t.Matrix[0];return t.getWorldMatrix().invertToRef(r),this._tmpRay?e.TransformToRef(this,r,this._tmpRay):this._tmpRay=e.Transform(this,r),t.intersects(this._tmpRay,n)},e.prototype.intersectsMeshes=function(e,t,n){n?n.length=0:n=[];for(var r=0;r<e.length;r++){var i=this.intersectsMesh(e[r],t);i.hit&&n.push(i)}return n.sort(this._comparePickingInfo),n},e.prototype._comparePickingInfo=function(e,t){return e.distance<t.distance?-1:e.distance>t.distance?1:0},e.prototype.intersectionSegment=function(t,n,r){var o=this.origin,a=i.t.Vector3[0],s=i.t.Vector3[1],u=i.t.Vector3[2],l=i.t.Vector3[3];n.subtractToRef(t,a),this.direction.scaleToRef(e.rayl,u),o.addToRef(u,s),t.subtractToRef(o,l);var c,h,d,f,p=i.x.Dot(a,a),_=i.x.Dot(a,u),m=i.x.Dot(u,u),g=i.x.Dot(a,l),v=i.x.Dot(u,l),y=p*m-_*_,b=y,T=y;y<e.smallnum?(h=0,b=1,f=v,T=m):(f=p*v-_*g,(h=_*v-m*g)<0?(h=0,f=v,T=m):h>b&&(h=b,f=v+_,T=m)),f<0?(f=0,-g<0?h=0:-g>p?h=b:(h=-g,b=p)):f>T&&(f=T,-g+_<0?h=0:-g+_>p?h=b:(h=-g+_,b=p)),c=Math.abs(h)<e.smallnum?0:h/b,d=Math.abs(f)<e.smallnum?0:f/T;var E=i.t.Vector3[4];u.scaleToRef(d,E);var x=i.t.Vector3[5];a.scaleToRef(c,x),x.addInPlace(l);var M=i.t.Vector3[6];return x.subtractToRef(E,M),d>0&&d<=this.length&&M.lengthSquared()<r*r?x.length():-1},e.prototype.update=function(e,t,n,r,i,o,a){return this.unprojectRayToRef(e,t,n,r,i,o,a),this},e.Zero=function(){return new e(i.x.Zero(),i.x.Zero())},e.CreateNew=function(t,n,r,i,o,a,s){return e.Zero().update(t,n,r,i,o,a,s)},e.CreateNewFromTo=function(t,n,r){void 0===r&&(r=i.j.IdentityReadOnly);var o=n.subtract(t),a=Math.sqrt(o.x*o.x+o.y*o.y+o.z*o.z);return o.normalize(),e.Transform(new e(t,o,a),r)},e.Transform=function(t,n){var r=new e(new i.x(0,0,0),new i.x(0,0,0));return e.TransformToRef(t,n,r),r},e.TransformToRef=function(e,t,n){i.x.TransformCoordinatesToRef(e.origin,t,n.origin),i.x.TransformNormalToRef(e.direction,t,n.direction),n.length=e.length;var r=n.direction,o=r.length();if(0!==o&&1!==o){var a=1/o;r.x*=a,r.y*=a,r.z*=a,n.length*=o}},e.prototype.unprojectRayToRef=function(e,t,n,r,o,a,s){var u=i.t.Matrix[0];o.multiplyToRef(a,u),u.multiplyToRef(s,u),u.invert();var l=i.t.Vector3[0];l.x=e/n*2-1,l.y=-(t/r*2-1),l.z=-1;var c=i.t.Vector3[1].copyFromFloats(l.x,l.y,1),h=i.t.Vector3[2],d=i.t.Vector3[3];i.x._UnprojectFromInvertedMatrixToRef(l,u,h),i.x._UnprojectFromInvertedMatrixToRef(c,u,d),this.origin.copyFrom(h),d.subtractToRef(h,this.direction),this.direction.normalize()},e.TmpVector3=r.a.BuildArray(6,i.x.Zero),e.smallnum=1e-8,e.rayl=1e9,e}();s.a.prototype.createPickingRay=function(e,t,n,r,i){void 0===i&&(i=!1);var o=l.Zero();return this.createPickingRayToRef(e,t,n,o,r,i),o},s.a.prototype.createPickingRayToRef=function(e,t,n,r,o,a){void 0===a&&(a=!1);var s=this.getEngine();if(!o){if(!this.activeCamera)throw new Error("Active camera not set");o=this.activeCamera}var u=o.viewport.toGlobal(s.getRenderWidth(),s.getRenderHeight());return e=e/s.getHardwareScalingLevel()-u.x,t=t/s.getHardwareScalingLevel()-(s.getRenderHeight()-u.y-u.height),r.update(e,t,u.width,u.height,n||i.j.IdentityReadOnly,a?i.j.IdentityReadOnly:o.getViewMatrix(),o.getProjectionMatrix()),this},s.a.prototype.createPickingRayInCameraSpace=function(e,t,n){var r=l.Zero();return this.createPickingRayInCameraSpaceToRef(e,t,r,n),r},s.a.prototype.createPickingRayInCameraSpaceToRef=function(e,t,n,r){if(!o.a)return this;var a=this.getEngine();if(!r){if(!this.activeCamera)throw new Error("Active camera not set");r=this.activeCamera}var s=r.viewport.toGlobal(a.getRenderWidth(),a.getRenderHeight()),u=i.j.Identity();return e=e/a.getHardwareScalingLevel()-s.x,t=t/a.getHardwareScalingLevel()-(a.getRenderHeight()-s.y-s.height),n.update(e,t,s.width,s.height,u,u,r.getProjectionMatrix()),this},s.a.prototype._internalPick=function(e,t,n,r){if(!o.a)return null;for(var i=null,a=0;a<this.meshes.length;a++){var s=this.meshes[a];if(t){if(!t(s))continue}else if(!s.isEnabled()||!s.isVisible||!s.isPickable)continue;var u=e(s.getWorldMatrix()),l=s.intersects(u,n,r);if(l&&l.hit&&(n||null==i||!(l.distance>=i.distance))&&(i=l,n))break}return i||new o.a},s.a.prototype._internalMultiPick=function(e,t,n){if(!o.a)return null;for(var r=new Array,i=0;i<this.meshes.length;i++){var a=this.meshes[i];if(t){if(!t(a))continue}else if(!a.isEnabled()||!a.isVisible||!a.isPickable)continue;var s=e(a.getWorldMatrix()),u=a.intersects(s,!1,n);u&&u.hit&&r.push(u)}return r},s.a.prototype.pick=function(e,t,n,r,a,s){var u=this;if(!o.a)return null;var c=this._internalPick(function(n){return u._tempPickingRay||(u._tempPickingRay=l.Zero()),u.createPickingRayToRef(e,t,n,u._tempPickingRay,a||null),u._tempPickingRay},n,r,s);return c&&(c.ray=this.createPickingRay(e,t,i.j.Identity(),a||null)),c},s.a.prototype.pickWithRay=function(e,t,n,r){var o=this,a=this._internalPick(function(t){return o._pickWithRayInverseMatrix||(o._pickWithRayInverseMatrix=i.j.Identity()),t.invertToRef(o._pickWithRayInverseMatrix),o._cachedRayForTransform||(o._cachedRayForTransform=l.Zero()),l.TransformToRef(e,o._pickWithRayInverseMatrix,o._cachedRayForTransform),o._cachedRayForTransform},t,n,r);return a&&(a.ray=e),a},s.a.prototype.multiPick=function(e,t,n,r,i){var o=this;return this._internalMultiPick(function(n){return o.createPickingRay(e,t,n,r||null)},n,i)},s.a.prototype.multiPickWithRay=function(e,t,n){var r=this;return this._internalMultiPick(function(t){return r._pickWithRayInverseMatrix||(r._pickWithRayInverseMatrix=i.j.Identity()),t.invertToRef(r._pickWithRayInverseMatrix),r._cachedRayForTransform||(r._cachedRayForTransform=l.Zero()),l.TransformToRef(e,r._pickWithRayInverseMatrix,r._cachedRayForTransform),r._cachedRayForTransform},t,n)},u.a.prototype.getForwardRay=function(e,t,n){void 0===e&&(e=100),t||(t=this.getWorldMatrix()),n||(n=this.position);var r=new i.x(0,0,this._scene.useRightHandedSystem?-1:1),o=i.x.TransformNormal(r,t),a=i.x.Normalize(o);return new l(n,a,e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),i=n(11),o=n(13),a=n(72),s=n(4);o.a.CreateLineSystem=function(e){for(var t=[],n=[],r=e.lines,i=e.colors,a=[],s=0,u=0;u<r.length;u++)for(var l=r[u],c=0;c<l.length;c++){if(n.push(l[c].x,l[c].y,l[c].z),i){var h=i[u];a.push(h[c].r,h[c].g,h[c].b,h[c].a)}c>0&&(t.push(s-1),t.push(s)),s++}var d=new o.a;return d.indices=t,d.positions=n,i&&(d.colors=a),d},o.a.CreateDashedLines=function(e){var t,n,i=e.dashSize||3,a=e.gapSize||1,s=e.dashNb||200,u=e.points,l=new Array,c=new Array,h=r.x.Zero(),d=0,f=0,p=0,_=0,m=0;for(m=0;m<u.length-1;m++)u[m+1].subtractToRef(u[m],h),d+=h.length();for(n=i*(t=d/s)/(i+a),m=0;m<u.length-1;m++){u[m+1].subtractToRef(u[m],h),f=Math.floor(h.length()/t),h.normalize();for(var g=0;g<f;g++)l.push(u[m].x+(p=t*g)*h.x,u[m].y+p*h.y,u[m].z+p*h.z),l.push(u[m].x+(p+n)*h.x,u[m].y+(p+n)*h.y,u[m].z+(p+n)*h.z),c.push(_,_+1),_+=2}var v=new o.a;return v.positions=l,v.indices=c,v},i.a.CreateLines=function(e,t,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=!1),void 0===i&&(i=null),u.CreateLines(e,{points:t,updatable:r,instance:i},n)},i.a.CreateDashedLines=function(e,t,n,r,i,o,a,s){return void 0===o&&(o=null),u.CreateDashedLines(e,{points:t,dashSize:n,gapSize:r,dashNb:i,updatable:a,instance:s},o)};var u=function(){function e(){}return e.CreateLineSystem=function(e,t,n){var r=t.instance,i=t.lines,u=t.colors;if(r){var l,c,h=r.getVerticesData(s.b.PositionKind);u&&(l=r.getVerticesData(s.b.ColorKind));for(var d=0,f=0,p=0;p<i.length;p++)for(var _=i[p],m=0;m<_.length;m++)h[d]=_[m].x,h[d+1]=_[m].y,h[d+2]=_[m].z,u&&l&&(l[f]=(c=u[p])[m].r,l[f+1]=c[m].g,l[f+2]=c[m].b,l[f+3]=c[m].a,f+=4),d+=3;return r.updateVerticesData(s.b.PositionKind,h,!1,!1),u&&l&&r.updateVerticesData(s.b.ColorKind,l,!1,!1),r}var g=new a.b(e,n,null,void 0,void 0,!!u,t.useVertexAlpha);return o.a.CreateLineSystem(t).applyToMesh(g,t.updatable),g},e.CreateLines=function(t,n,r){return void 0===r&&(r=null),e.CreateLineSystem(t,{lines:[n.points],updatable:n.updatable,instance:n.instance,colors:n.colors?[n.colors]:null,useVertexAlpha:n.useVertexAlpha},r)},e.CreateDashedLines=function(e,t,n){void 0===n&&(n=null);var s=t.points,u=t.instance,l=t.gapSize||1,c=t.dashSize||3;if(u)return u.updateMeshPositions(function(e){var t,n,i=r.x.Zero(),o=e.length/6,a=0,l=0,c=0,h=0,d=0,f=0;for(d=0;d<s.length-1;d++)s[d+1].subtractToRef(s[d],i),a+=i.length();var p=u._creationDataStorage.dashSize;for(n=p*(t=a/o)/(p+u._creationDataStorage.gapSize),d=0;d<s.length-1;d++)for(s[d+1].subtractToRef(s[d],i),l=Math.floor(i.length()/t),i.normalize(),f=0;f<l&&h<e.length;)e[h]=s[d].x+(c=t*f)*i.x,e[h+1]=s[d].y+c*i.y,e[h+2]=s[d].z+c*i.z,e[h+3]=s[d].x+(c+n)*i.x,e[h+4]=s[d].y+(c+n)*i.y,e[h+5]=s[d].z+(c+n)*i.z,h+=6,f++;for(;h<e.length;)e[h]=s[d].x,e[h+1]=s[d].y,e[h+2]=s[d].z,h+=3},!1),u;var h=new a.b(e,n);return o.a.CreateDashedLines(t).applyToMesh(h,t.updatable),h._creationDataStorage=new i.b,h._creationDataStorage.dashSize=c,h._creationDataStorage.gapSize=l,h},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(16),i=n(8),o=n(17),a=n(23),s=n(65),u=n(0),l=function(){function e(e,t){var n=this;void 0===t&&(t=!0),this.originalScene=e,this._pointerCaptures={},this._lastPointerEvents={},this._sharedGizmoLight=null,this.pickUtilitySceneFirst=!0,this.shouldRender=!0,this.onlyCheckPointerDownEvents=!0,this.processAllEvents=!1,this.onPointerOutObservable=new i.c,this.utilityLayerScene=new r.a(e.getEngine(),{virtual:!0}),this.utilityLayerScene.useRightHandedSystem=e.useRightHandedSystem,this.utilityLayerScene._allowPostProcessClearColor=!1,this.utilityLayerScene.detachControl(),t&&(this._originalPointerObserver=e.onPrePointerObservable.add(function(t,r){if(n.utilityLayerScene.activeCamera&&(n.processAllEvents||t.type===o.a.POINTERMOVE||t.type===o.a.POINTERUP||t.type===o.a.POINTERDOWN)){n.utilityLayerScene.pointerX=e.pointerX,n.utilityLayerScene.pointerY=e.pointerY;var i=t.event;if(e.isPointerCaptured(i.pointerId))n._pointerCaptures[i.pointerId]=!1;else{var a=t.ray?n.utilityLayerScene.pickWithRay(t.ray):n.utilityLayerScene.pick(e.pointerX,e.pointerY);if(!t.ray&&a&&(t.ray=a.ray),n.utilityLayerScene.onPrePointerObservable.notifyObservers(t),n.onlyCheckPointerDownEvents&&t.type!=o.a.POINTERDOWN)return t.skipOnPointerObservable||n.utilityLayerScene.onPointerObservable.notifyObservers(new o.b(t.type,t.event,a)),void(t.type===o.a.POINTERUP&&n._pointerCaptures[i.pointerId]&&(n._pointerCaptures[i.pointerId]=!1));if(n.utilityLayerScene.autoClearDepthAndStencil||n.pickUtilitySceneFirst)a&&a.hit&&(t.skipOnPointerObservable||n.utilityLayerScene.onPointerObservable.notifyObservers(new o.b(t.type,t.event,a)),t.skipOnPointerObservable=!0);else{var s=t.ray?e.pickWithRay(t.ray):e.pick(e.pointerX,e.pointerY),u=t.event;s&&a&&(0===a.distance&&s.pickedMesh?n.mainSceneTrackerPredicate&&n.mainSceneTrackerPredicate(s.pickedMesh)?(n._notifyObservers(t,s,u),t.skipOnPointerObservable=!0):t.type===o.a.POINTERDOWN?n._pointerCaptures[u.pointerId]=!0:n._lastPointerEvents[u.pointerId]&&(n.onPointerOutObservable.notifyObservers(u.pointerId),delete n._lastPointerEvents[u.pointerId]):!n._pointerCaptures[u.pointerId]&&(a.distance<s.distance||0===s.distance)?(n._notifyObservers(t,a,u),t.skipOnPointerObservable||(t.skipOnPointerObservable=a.distance>0)):!n._pointerCaptures[u.pointerId]&&a.distance>s.distance&&(n.mainSceneTrackerPredicate&&n.mainSceneTrackerPredicate(s.pickedMesh)?(n._notifyObservers(t,s,u),t.skipOnPointerObservable=!0):n._lastPointerEvents[u.pointerId]&&(n.onPointerOutObservable.notifyObservers(u.pointerId),delete n._lastPointerEvents[u.pointerId])),t.type===o.a.POINTERUP&&n._pointerCaptures[u.pointerId]&&(n._pointerCaptures[u.pointerId]=!1))}}}}),this._originalPointerObserver&&e.onPrePointerObservable.makeObserverTopPriority(this._originalPointerObserver)),this.utilityLayerScene.autoClear=!1,this._afterRenderObserver=this.originalScene.onAfterRenderObservable.add(function(){n.shouldRender&&n.render()}),this._sceneDisposeObserver=this.originalScene.onDisposeObservable.add(function(){n.dispose()}),this._updateCamera()}return e.prototype._getSharedGizmoLight=function(){return this._sharedGizmoLight||(this._sharedGizmoLight=new s.a("shared gizmo light",new u.x(0,1,0),this.utilityLayerScene),this._sharedGizmoLight.intensity=2,this._sharedGizmoLight.groundColor=u.e.Gray()),this._sharedGizmoLight},Object.defineProperty(e,"DefaultUtilityLayer",{get:function(){return null==e._DefaultUtilityLayer&&(e._DefaultUtilityLayer=new e(a.a.LastCreatedScene)).originalScene.onDisposeObservable.addOnce(function(){e._DefaultUtilityLayer=null}),e._DefaultUtilityLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DefaultKeepDepthUtilityLayer",{get:function(){return null==e._DefaultKeepDepthUtilityLayer&&((e._DefaultKeepDepthUtilityLayer=new e(a.a.LastCreatedScene)).utilityLayerScene.autoClearDepthAndStencil=!1,e._DefaultKeepDepthUtilityLayer.originalScene.onDisposeObservable.addOnce(function(){e._DefaultKeepDepthUtilityLayer=null})),e._DefaultKeepDepthUtilityLayer},enumerable:!0,configurable:!0}),e.prototype._notifyObservers=function(e,t,n){e.skipOnPointerObservable||(this.utilityLayerScene.onPointerObservable.notifyObservers(new o.b(e.type,e.event,t)),this._lastPointerEvents[n.pointerId]=!0)},e.prototype.render=function(){if(this._updateCamera(),this.utilityLayerScene.activeCamera){var e=this.utilityLayerScene.activeCamera.getScene(),t=this.utilityLayerScene.activeCamera;t._scene=this.utilityLayerScene,t.leftCamera&&(t.leftCamera._scene=this.utilityLayerScene),t.rightCamera&&(t.rightCamera._scene=this.utilityLayerScene),this.utilityLayerScene.render(!1),t._scene=e,t.leftCamera&&(t.leftCamera._scene=e),t.rightCamera&&(t.rightCamera._scene=e)}},e.prototype.dispose=function(){this.onPointerOutObservable.clear(),this._afterRenderObserver&&this.originalScene.onAfterRenderObservable.remove(this._afterRenderObserver),this._sceneDisposeObserver&&this.originalScene.onDisposeObservable.remove(this._sceneDisposeObserver),this._originalPointerObserver&&this.originalScene.onPrePointerObservable.remove(this._originalPointerObserver),this.utilityLayerScene.dispose()},e.prototype._updateCamera=function(){this.utilityLayerScene.activeCamera=this.originalScene.activeCameras.length>1?this.originalScene.activeCameras[this.originalScene.activeCameras.length-1]:this.originalScene.activeCamera},e._DefaultUtilityLayer=null,e._DefaultKeepDepthUtilityLayer=null,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),i=n(2),o=n(8),a=n(0),s=function(e){function t(n,r,i){void 0===r&&(r=null),void 0===i&&(i=!0);var s=e.call(this,n,r)||this;return s._forward=new a.x(0,0,1),s._forwardInverted=new a.x(0,0,-1),s._up=new a.x(0,1,0),s._right=new a.x(1,0,0),s._rightInverted=new a.x(-1,0,0),s._position=a.x.Zero(),s._rotation=a.x.Zero(),s._rotationQuaternion=null,s._scaling=a.x.One(),s._isDirty=!1,s._transformToBoneReferal=null,s._billboardMode=t.BILLBOARDMODE_NONE,s._preserveParentRotationForBillboard=!1,s.scalingDeterminant=1,s._infiniteDistance=!1,s.ignoreNonUniformScaling=!1,s.reIntegrateRotationIntoRotationQuaternion=!1,s._poseMatrix=null,s._localMatrix=a.j.Zero(),s._usePivotMatrix=!1,s._absolutePosition=a.x.Zero(),s._pivotMatrix=a.j.Identity(),s._postMultiplyPivotMatrix=!1,s._isWorldMatrixFrozen=!1,s._indexInSceneTransformNodesArray=-1,s.onAfterWorldMatrixUpdateObservable=new o.c,s._nonUniformScaling=!1,i&&s.getScene().addTransformNode(s),s}return r.d(t,e),Object.defineProperty(t.prototype,"billboardMode",{get:function(){return this._billboardMode},set:function(e){this._billboardMode!==e&&(this._billboardMode=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"preserveParentRotationForBillboard",{get:function(){return this._preserveParentRotationForBillboard},set:function(e){e!==this._preserveParentRotationForBillboard&&(this._preserveParentRotationForBillboard=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"infiniteDistance",{get:function(){return this._infiniteDistance},set:function(e){this._infiniteDistance!==e&&(this._infiniteDistance=e)},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"TransformNode"},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e,this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(e){this._rotation=e,this._rotationQuaternion=null,this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaling",{get:function(){return this._scaling},set:function(e){this._scaling=e,this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationQuaternion",{get:function(){return this._rotationQuaternion},set:function(e){this._rotationQuaternion=e,e&&this._rotation.setAll(0),this._isDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"forward",{get:function(){return a.x.Normalize(a.x.TransformNormal(this.getScene().useRightHandedSystem?this._forwardInverted:this._forward,this.getWorldMatrix()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"up",{get:function(){return a.x.Normalize(a.x.TransformNormal(this._up,this.getWorldMatrix()))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return a.x.Normalize(a.x.TransformNormal(this.getScene().useRightHandedSystem?this._rightInverted:this._right,this.getWorldMatrix()))},enumerable:!0,configurable:!0}),t.prototype.updatePoseMatrix=function(e){return this._poseMatrix?(this._poseMatrix.copyFrom(e),this):(this._poseMatrix=e.clone(),this)},t.prototype.getPoseMatrix=function(){return this._poseMatrix||(this._poseMatrix=a.j.Identity()),this._poseMatrix},t.prototype._isSynchronized=function(){var e=this._cache;if(this.billboardMode!==e.billboardMode||this.billboardMode!==t.BILLBOARDMODE_NONE)return!1;if(e.pivotMatrixUpdated)return!1;if(this.infiniteDistance)return!1;if(!e.position.equals(this._position))return!1;if(this._rotationQuaternion){if(!e.rotationQuaternion.equals(this._rotationQuaternion))return!1}else if(!e.rotation.equals(this._rotation))return!1;return!!e.scaling.equals(this._scaling)},t.prototype._initCache=function(){e.prototype._initCache.call(this);var t=this._cache;t.localMatrixUpdated=!1,t.position=a.x.Zero(),t.scaling=a.x.Zero(),t.rotation=a.x.Zero(),t.rotationQuaternion=new a.q(0,0,0,0),t.billboardMode=-1,t.infiniteDistance=!1},t.prototype.markAsDirty=function(e){return this._currentRenderId=Number.MAX_VALUE,this._isDirty=!0,this},Object.defineProperty(t.prototype,"absolutePosition",{get:function(){return this._absolutePosition},enumerable:!0,configurable:!0}),t.prototype.setPreTransformMatrix=function(e){return this.setPivotMatrix(e,!1)},t.prototype.setPivotMatrix=function(e,t){return void 0===t&&(t=!0),this._pivotMatrix.copyFrom(e),this._usePivotMatrix=!this._pivotMatrix.isIdentity(),this._cache.pivotMatrixUpdated=!0,this._postMultiplyPivotMatrix=t,this._postMultiplyPivotMatrix&&(this._pivotMatrixInverse?this._pivotMatrix.invertToRef(this._pivotMatrixInverse):this._pivotMatrixInverse=a.j.Invert(this._pivotMatrix)),this},t.prototype.getPivotMatrix=function(){return this._pivotMatrix},t.prototype.freezeWorldMatrix=function(){return this._isWorldMatrixFrozen=!1,this.computeWorldMatrix(!0),this._isWorldMatrixFrozen=!0,this},t.prototype.unfreezeWorldMatrix=function(){return this._isWorldMatrixFrozen=!1,this.computeWorldMatrix(!0),this},Object.defineProperty(t.prototype,"isWorldMatrixFrozen",{get:function(){return this._isWorldMatrixFrozen},enumerable:!0,configurable:!0}),t.prototype.getAbsolutePosition=function(){return this.computeWorldMatrix(),this._absolutePosition},t.prototype.setAbsolutePosition=function(e){if(!e)return this;var t,n,r;if(void 0===e.x){if(arguments.length<3)return this;t=arguments[0],n=arguments[1],r=arguments[2]}else t=e.x,n=e.y,r=e.z;if(this.parent){var i=a.t.Matrix[0];this.parent.getWorldMatrix().invertToRef(i),a.x.TransformCoordinatesFromFloatsToRef(t,n,r,i,this.position)}else this.position.x=t,this.position.y=n,this.position.z=r;return this},t.prototype.setPositionWithLocalVector=function(e){return this.computeWorldMatrix(),this.position=a.x.TransformNormal(e,this._localMatrix),this},t.prototype.getPositionExpressedInLocalSpace=function(){this.computeWorldMatrix();var e=a.t.Matrix[0];return this._localMatrix.invertToRef(e),a.x.TransformNormal(this.position,e)},t.prototype.locallyTranslate=function(e){return this.computeWorldMatrix(!0),this.position=a.x.TransformCoordinates(e,this._localMatrix),this},t.prototype.lookAt=function(e,n,r,i,o){void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=a.s.LOCAL);var s=t._lookAtVectorCache,u=o===a.s.LOCAL?this.position:this.getAbsolutePosition();if(e.subtractToRef(u,s),this.setDirection(s,n,r,i),o===a.s.WORLD&&this.parent)if(this.rotationQuaternion){var l=a.t.Matrix[0];this.rotationQuaternion.toRotationMatrix(l);var c=a.t.Matrix[1];this.parent.getWorldMatrix().getRotationMatrixToRef(c),c.invert(),l.multiplyToRef(c,l),this.rotationQuaternion.fromRotationMatrix(l)}else{var h=a.t.Quaternion[0];a.q.FromEulerVectorToRef(this.rotation,h),h.toRotationMatrix(l=a.t.Matrix[0]),c=a.t.Matrix[1],this.parent.getWorldMatrix().getRotationMatrixToRef(c),c.invert(),l.multiplyToRef(c,l),h.fromRotationMatrix(l),h.toEulerAnglesToRef(this.rotation)}return this},t.prototype.getDirection=function(e){var t=a.x.Zero();return this.getDirectionToRef(e,t),t},t.prototype.getDirectionToRef=function(e,t){return a.x.TransformNormalToRef(e,this.getWorldMatrix(),t),this},t.prototype.setDirection=function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=0);var i=-Math.atan2(e.z,e.x)+Math.PI/2,o=Math.sqrt(e.x*e.x+e.z*e.z),s=-Math.atan2(e.y,o);return this.rotationQuaternion?a.q.RotationYawPitchRollToRef(i+t,s+n,r,this.rotationQuaternion):(this.rotation.x=s+n,this.rotation.y=i+t,this.rotation.z=r),this},t.prototype.setPivotPoint=function(e,t){void 0===t&&(t=a.s.LOCAL),0==this.getScene().getRenderId()&&this.computeWorldMatrix(!0);var n=this.getWorldMatrix();if(t==a.s.WORLD){var r=a.t.Matrix[0];n.invertToRef(r),e=a.x.TransformCoordinates(e,r)}return this.setPivotMatrix(a.j.Translation(-e.x,-e.y,-e.z),!0)},t.prototype.getPivotPoint=function(){var e=a.x.Zero();return this.getPivotPointToRef(e),e},t.prototype.getPivotPointToRef=function(e){return e.x=-this._pivotMatrix.m[12],e.y=-this._pivotMatrix.m[13],e.z=-this._pivotMatrix.m[14],this},t.prototype.getAbsolutePivotPoint=function(){var e=a.x.Zero();return this.getAbsolutePivotPointToRef(e),e},t.prototype.getAbsolutePivotPointToRef=function(e){return e.x=this._pivotMatrix.m[12],e.y=this._pivotMatrix.m[13],e.z=this._pivotMatrix.m[14],this.getPivotPointToRef(e),a.x.TransformCoordinatesToRef(e,this.getWorldMatrix(),e),this},t.prototype.setParent=function(e){if(!e&&!this.parent)return this;var t=a.t.Quaternion[0],n=a.t.Vector3[0],r=a.t.Vector3[1];if(e){var i=a.t.Matrix[0],o=a.t.Matrix[1];this.computeWorldMatrix(!0),e.computeWorldMatrix(!0),e.getWorldMatrix().invertToRef(o),this.getWorldMatrix().multiplyToRef(o,i),i.decompose(r,t,n)}else this.parent&&this.parent.computeWorldMatrix&&this.parent.computeWorldMatrix(!0),this.computeWorldMatrix(!0),this.getWorldMatrix().decompose(r,t,n);return this.rotationQuaternion?this.rotationQuaternion.copyFrom(t):t.toEulerAnglesToRef(this.rotation),this.scaling.copyFrom(r),this.position.copyFrom(n),this.parent=e,this},Object.defineProperty(t.prototype,"nonUniformScaling",{get:function(){return this._nonUniformScaling},enumerable:!0,configurable:!0}),t.prototype._updateNonUniformScalingState=function(e){return this._nonUniformScaling!==e&&(this._nonUniformScaling=e,!0)},t.prototype.attachToBone=function(e,t){return this._transformToBoneReferal=t,this.parent=e,e.getWorldMatrix().determinant()<0&&(this.scalingDeterminant*=-1),this},t.prototype.detachFromBone=function(){return this.parent?(this.parent.getWorldMatrix().determinant()<0&&(this.scalingDeterminant*=-1),this._transformToBoneReferal=null,this.parent=null,this):this},t.prototype.rotate=function(e,n,r){var i;if(e.normalize(),this.rotationQuaternion||(this.rotationQuaternion=this.rotation.toQuaternion(),this.rotation.setAll(0)),r&&r!==a.s.LOCAL){if(this.parent){var o=a.t.Matrix[0];this.parent.getWorldMatrix().invertToRef(o),e=a.x.TransformNormal(e,o)}(i=a.q.RotationAxisToRef(e,n,t._rotationAxisCache)).multiplyToRef(this.rotationQuaternion,this.rotationQuaternion)}else i=a.q.RotationAxisToRef(e,n,t._rotationAxisCache),this.rotationQuaternion.multiplyToRef(i,this.rotationQuaternion);return this},t.prototype.rotateAround=function(e,t,n){t.normalize(),this.rotationQuaternion||(this.rotationQuaternion=a.q.RotationYawPitchRoll(this.rotation.y,this.rotation.x,this.rotation.z),this.rotation.setAll(0));var r=a.t.Vector3[0],i=a.t.Vector3[1],o=a.t.Vector3[2],s=a.t.Quaternion[0],u=a.t.Matrix[0],l=a.t.Matrix[1],c=a.t.Matrix[2],h=a.t.Matrix[3];return e.subtractToRef(this.position,r),a.j.TranslationToRef(r.x,r.y,r.z,u),a.j.TranslationToRef(-r.x,-r.y,-r.z,l),a.j.RotationAxisToRef(t,n,c),l.multiplyToRef(c,h),h.multiplyToRef(u,h),h.decompose(i,s,o),this.position.addInPlace(o),s.multiplyToRef(this.rotationQuaternion,this.rotationQuaternion),this},t.prototype.translate=function(e,t,n){var r=e.scale(t);if(n&&n!==a.s.LOCAL)this.setAbsolutePosition(this.getAbsolutePosition().add(r));else{var i=this.getPositionExpressedInLocalSpace().add(r);this.setPositionWithLocalVector(i)}return this},t.prototype.addRotation=function(e,t,n){var r;this.rotationQuaternion?r=this.rotationQuaternion:a.q.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,r=a.t.Quaternion[1]);var i=a.t.Quaternion[0];return a.q.RotationYawPitchRollToRef(t,e,n,i),r.multiplyInPlace(i),this.rotationQuaternion||r.toEulerAnglesToRef(this.rotation),this},t.prototype._getEffectiveParent=function(){return this.parent},t.prototype.computeWorldMatrix=function(e){if(this._isWorldMatrixFrozen&&!this._isDirty)return this._worldMatrix;var n=this.getScene().getRenderId();if(!this._isDirty&&!e&&this.isSynchronized())return this._currentRenderId=n,this._worldMatrix;this._updateCache();var r=this._cache;r.pivotMatrixUpdated=!1,r.billboardMode=this.billboardMode,r.infiniteDistance=this.infiniteDistance,this._currentRenderId=n,this._childUpdateId++,this._isDirty=!1;var i=this._getEffectiveParent(),o=this._billboardMode!==t.BILLBOARDMODE_NONE&&!this.preserveParentRotationForBillboard,s=this.getScene().activeCamera,u=r.scaling,l=r.position;if(this._infiniteDistance)if(!this.parent&&s){var c=s.getWorldMatrix(),h=new a.x(c.m[12],c.m[13],c.m[14]);l.copyFromFloats(this._position.x+h.x,this._position.y+h.y,this._position.z+h.z)}else l.copyFrom(this._position);else l.copyFrom(this._position);u.copyFromFloats(this._scaling.x*this.scalingDeterminant,this._scaling.y*this.scalingDeterminant,this._scaling.z*this.scalingDeterminant);var d=r.rotationQuaternion;if(this._rotationQuaternion?(this.reIntegrateRotationIntoRotationQuaternion&&this.rotation.lengthSquared()&&(this._rotationQuaternion.multiplyInPlace(a.q.RotationYawPitchRoll(this._rotation.y,this._rotation.x,this._rotation.z)),this._rotation.copyFromFloats(0,0,0)),d.copyFrom(this._rotationQuaternion)):(a.q.RotationYawPitchRollToRef(this._rotation.y,this._rotation.x,this._rotation.z,d),r.rotation.copyFrom(this._rotation)),this._usePivotMatrix){var f=a.t.Matrix[1];a.j.ScalingToRef(u.x,u.y,u.z,f);var p=a.t.Matrix[0];d.toRotationMatrix(p),this._pivotMatrix.multiplyToRef(f,a.t.Matrix[4]),a.t.Matrix[4].multiplyToRef(p,this._localMatrix),this._postMultiplyPivotMatrix&&this._localMatrix.multiplyToRef(this._pivotMatrixInverse,this._localMatrix),this._localMatrix.addTranslationFromFloats(l.x,l.y,l.z)}else a.j.ComposeToRef(u,d,l,this._localMatrix);if(i&&i.getWorldMatrix){if(o){this._transformToBoneReferal?i.getWorldMatrix().multiplyToRef(this._transformToBoneReferal.getWorldMatrix(),a.t.Matrix[7]):a.t.Matrix[7].copyFrom(i.getWorldMatrix());var _=a.t.Vector3[5],m=a.t.Vector3[6];a.t.Matrix[7].decompose(m,void 0,_),a.j.ScalingToRef(m.x,m.y,m.z,a.t.Matrix[7]),a.t.Matrix[7].setTranslation(_),this._localMatrix.multiplyToRef(a.t.Matrix[7],this._worldMatrix)}else this._transformToBoneReferal?(this._localMatrix.multiplyToRef(i.getWorldMatrix(),a.t.Matrix[6]),a.t.Matrix[6].multiplyToRef(this._transformToBoneReferal.getWorldMatrix(),this._worldMatrix)):this._localMatrix.multiplyToRef(i.getWorldMatrix(),this._worldMatrix);this._markSyncedWithParent()}else this._worldMatrix.copyFrom(this._localMatrix);if(o&&s){if(this._worldMatrix.getTranslationToRef(a.t.Vector3[0]),a.t.Matrix[1].copyFrom(s.getViewMatrix()),a.t.Matrix[1].setTranslationFromFloats(0,0,0),a.t.Matrix[1].invertToRef(a.t.Matrix[0]),(this.billboardMode&t.BILLBOARDMODE_ALL)!==t.BILLBOARDMODE_ALL){a.t.Matrix[0].decompose(void 0,a.t.Quaternion[0],void 0);var g=a.t.Vector3[1];a.t.Quaternion[0].toEulerAnglesToRef(g),(this.billboardMode&t.BILLBOARDMODE_X)!==t.BILLBOARDMODE_X&&(g.x=0),(this.billboardMode&t.BILLBOARDMODE_Y)!==t.BILLBOARDMODE_Y&&(g.y=0),(this.billboardMode&t.BILLBOARDMODE_Z)!==t.BILLBOARDMODE_Z&&(g.z=0),a.j.RotationYawPitchRollToRef(g.y,g.x,g.z,a.t.Matrix[0])}this._worldMatrix.setTranslationFromFloats(0,0,0),this._worldMatrix.multiplyToRef(a.t.Matrix[0],this._worldMatrix),this._worldMatrix.setTranslation(a.t.Vector3[0])}return this._updateNonUniformScalingState(!this.ignoreNonUniformScaling&&(!!this._scaling.isNonUniform||!(!i||!i._nonUniformScaling)&&i._nonUniformScaling)),this._afterComputeWorldMatrix(),this._absolutePosition.copyFromFloats(this._worldMatrix.m[12],this._worldMatrix.m[13],this._worldMatrix.m[14]),this.onAfterWorldMatrixUpdateObservable.notifyObservers(this),this._poseMatrix||(this._poseMatrix=a.j.Invert(this._worldMatrix)),this._worldMatrixDeterminantIsDirty=!0,this._worldMatrix},t.prototype._afterComputeWorldMatrix=function(){},t.prototype.registerAfterWorldMatrixUpdate=function(e){return this.onAfterWorldMatrixUpdateObservable.add(e),this},t.prototype.unregisterAfterWorldMatrixUpdate=function(e){return this.onAfterWorldMatrixUpdateObservable.removeCallback(e),this},t.prototype.getPositionInCameraSpace=function(e){return void 0===e&&(e=null),e||(e=this.getScene().activeCamera),a.x.TransformCoordinates(this.absolutePosition,e.getViewMatrix())},t.prototype.getDistanceToCamera=function(e){return void 0===e&&(e=null),e||(e=this.getScene().activeCamera),this.absolutePosition.subtract(e.globalPosition).length()},t.prototype.clone=function(e,n,r){var o=this,a=i.a.Clone(function(){return new t(e,o.getScene())},this);if(a.name=e,a.id=e,n&&(a.parent=n),!r)for(var s=this.getDescendants(!0),u=0;u<s.length;u++){var l=s[u];l.clone&&l.clone(e+"."+l.name,a)}return a},t.prototype.serialize=function(e){var t=i.a.Serialize(this,e);return t.type=this.getClassName(),this.parent&&(t.parentId=this.parent.id),t.localMatrix=this.getPivotMatrix().asArray(),t.isEnabled=this.isEnabled(),this.parent&&(t.parentId=this.parent.id),t},t.Parse=function(e,n,r){var o=i.a.Parse(function(){return new t(e.name,n)},e,n,r);return e.localMatrix?o.setPreTransformMatrix(a.j.FromArray(e.localMatrix)):e.pivotMatrix&&o.setPivotMatrix(a.j.FromArray(e.pivotMatrix)),o.setEnabled(e.isEnabled),e.parentId&&(o._waitingParentId=e.parentId),o},t.prototype.getChildTransformNodes=function(e,n){var r=[];return this._getDescendants(r,e,function(e){return(!n||n(e))&&e instanceof t}),r},t.prototype.dispose=function(t,n){if(void 0===n&&(n=!1),this.getScene().stopAnimation(this),this.getScene().removeTransformNode(this),this.onAfterWorldMatrixUpdateObservable.clear(),t)for(var r=0,i=this.getChildTransformNodes(!0);r<i.length;r++){var o=i[r];o.parent=null,o.computeWorldMatrix(!0)}e.prototype.dispose.call(this,t,n)},t.BILLBOARDMODE_NONE=0,t.BILLBOARDMODE_X=1,t.BILLBOARDMODE_Y=2,t.BILLBOARDMODE_Z=4,t.BILLBOARDMODE_ALL=7,t._lookAtVectorCache=new a.x(0,0,0),t._rotationAxisCache=new a.q,r.c([Object(i.o)("position")],t.prototype,"_position",void 0),r.c([Object(i.o)("rotation")],t.prototype,"_rotation",void 0),r.c([Object(i.l)("rotationQuaternion")],t.prototype,"_rotationQuaternion",void 0),r.c([Object(i.o)("scaling")],t.prototype,"_scaling",void 0),r.c([Object(i.c)("billboardMode")],t.prototype,"_billboardMode",void 0),r.c([Object(i.c)()],t.prototype,"scalingDeterminant",void 0),r.c([Object(i.c)("infiniteDistance")],t.prototype,"_infiniteDistance",void 0),r.c([Object(i.c)()],t.prototype,"ignoreNonUniformScaling",void 0),r.c([Object(i.c)()],t.prototype,"reIntegrateRotationIntoRotationQuaternion",void 0),t}(n(25).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(34),i=n(0),o=n(3),a=n(77),s=n(82),u={min:0,max:0},l={min:0,max:0},c=function(e,t,n){var r=i.x.Dot(t.centerWorld,e),o=Math.abs(i.x.Dot(t.directions[0],e))*t.extendSize.x+Math.abs(i.x.Dot(t.directions[1],e))*t.extendSize.y+Math.abs(i.x.Dot(t.directions[2],e))*t.extendSize.z;n.min=r-o,n.max=r+o},h=function(e,t,n){return c(e,t,u),c(e,n,l),!(u.min>l.max||l.min>u.max)},d=function(){function e(e,t,n){this._isLocked=!1,this.boundingBox=new a.a(e,t,n),this.boundingSphere=new s.a(e,t,n)}return e.prototype.reConstruct=function(e,t,n){this.boundingBox.reConstruct(e,t,n),this.boundingSphere.reConstruct(e,t,n)},Object.defineProperty(e.prototype,"minimum",{get:function(){return this.boundingBox.minimum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this.boundingBox.maximum},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLocked",{get:function(){return this._isLocked},set:function(e){this._isLocked=e},enumerable:!0,configurable:!0}),e.prototype.update=function(e){this._isLocked||(this.boundingBox._update(e),this.boundingSphere._update(e))},e.prototype.centerOn=function(t,n){var r=e.TmpVector3[0].copyFrom(t).subtractInPlace(n),i=e.TmpVector3[1].copyFrom(t).addInPlace(n);return this.boundingBox.reConstruct(r,i,this.boundingBox.getWorldMatrix()),this.boundingSphere.reConstruct(r,i,this.boundingBox.getWorldMatrix()),this},e.prototype.scale=function(e){return this.boundingBox.scale(e),this.boundingSphere.scale(e),this},e.prototype.isInFrustum=function(e,t){return void 0===t&&(t=o.a.MESHES_CULLINGSTRATEGY_STANDARD),!(t!==o.a.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION&&t!==o.a.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY||!this.boundingSphere.isCenterInFrustum(e))||!!this.boundingSphere.isInFrustum(e)&&(!(t!==o.a.MESHES_CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY&&t!==o.a.MESHES_CULLINGSTRATEGY_OPTIMISTIC_INCLUSION_THEN_BSPHERE_ONLY)||this.boundingBox.isInFrustum(e))},Object.defineProperty(e.prototype,"diagonalLength",{get:function(){var t=this.boundingBox;return t.maximumWorld.subtractToRef(t.minimumWorld,e.TmpVector3[0]).length()},enumerable:!0,configurable:!0}),e.prototype.isCompletelyInFrustum=function(e){return this.boundingBox.isCompletelyInFrustum(e)},e.prototype._checkCollision=function(e){return e._canDoCollision(this.boundingSphere.centerWorld,this.boundingSphere.radiusWorld,this.boundingBox.minimumWorld,this.boundingBox.maximumWorld)},e.prototype.intersectsPoint=function(e){return!!this.boundingSphere.centerWorld&&!!this.boundingSphere.intersectsPoint(e)&&!!this.boundingBox.intersectsPoint(e)},e.prototype.intersects=function(e,t){if(!s.a.Intersects(this.boundingSphere,e.boundingSphere))return!1;if(!a.a.Intersects(this.boundingBox,e.boundingBox))return!1;if(!t)return!0;var n=this.boundingBox,r=e.boundingBox;return!!(h(n.directions[0],n,r)&&h(n.directions[1],n,r)&&h(n.directions[2],n,r)&&h(r.directions[0],n,r)&&h(r.directions[1],n,r)&&h(r.directions[2],n,r)&&h(i.x.Cross(n.directions[0],r.directions[0]),n,r)&&h(i.x.Cross(n.directions[0],r.directions[1]),n,r)&&h(i.x.Cross(n.directions[0],r.directions[2]),n,r)&&h(i.x.Cross(n.directions[1],r.directions[0]),n,r)&&h(i.x.Cross(n.directions[1],r.directions[1]),n,r)&&h(i.x.Cross(n.directions[1],r.directions[2]),n,r)&&h(i.x.Cross(n.directions[2],r.directions[0]),n,r)&&h(i.x.Cross(n.directions[2],r.directions[1]),n,r)&&h(i.x.Cross(n.directions[2],r.directions[2]),n,r))},e.TmpVector3=r.a.BuildArray(2,i.x.Zero),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(1),i=n(2),o=n(8),a=n(9),s=n(71),u=n(0),l=n(23),c=n(3),h=function(){function e(t){this.metadata=null,this.reservedDataStore=null,this._hasAlpha=!1,this.getAlphaFromRGB=!1,this.level=1,this.coordinatesIndex=0,this._coordinatesMode=c.a.TEXTURE_EXPLICIT_MODE,this.wrapU=c.a.TEXTURE_WRAP_ADDRESSMODE,this.wrapV=c.a.TEXTURE_WRAP_ADDRESSMODE,this.wrapR=c.a.TEXTURE_WRAP_ADDRESSMODE,this.anisotropicFilteringLevel=e.DEFAULT_ANISOTROPIC_FILTERING_LEVEL,this.gammaSpace=!0,this.invertZ=!1,this.lodLevelInAlpha=!1,this.isRenderTarget=!1,this.animations=new Array,this.onDisposeObservable=new o.c,this._onDisposeObserver=null,this.delayLoadState=c.a.DELAYLOADSTATE_NONE,this._scene=null,this._texture=null,this._uid=null,this._cachedSize=u.r.Zero(),this._scene=t||l.a.LastCreatedScene,this._scene&&(this.uniqueId=this._scene.getUniqueId(),this._scene.addTexture(this)),this._uid=null}return Object.defineProperty(e.prototype,"hasAlpha",{get:function(){return this._hasAlpha},set:function(e){this._hasAlpha!==e&&(this._hasAlpha=e,this._scene&&this._scene.markAllMaterialsAsDirty(c.a.MATERIAL_TextureDirtyFlag|c.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coordinatesMode",{get:function(){return this._coordinatesMode},set:function(e){this._coordinatesMode!==e&&(this._coordinatesMode=e,this._scene&&this._scene.markAllMaterialsAsDirty(c.a.MATERIAL_TextureDirtyFlag))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCube",{get:function(){return!!this._texture&&this._texture.isCube},set:function(e){this._texture&&(this._texture.isCube=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"is3D",{get:function(){return!!this._texture&&this._texture.is3D},set:function(e){this._texture&&(this._texture.is3D=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRGBD",{get:function(){return null!=this._texture&&this._texture._isRGBD},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noMipmap",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lodGenerationOffset",{get:function(){return this._texture?this._texture._lodGenerationOffset:0},set:function(e){this._texture&&(this._texture._lodGenerationOffset=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lodGenerationScale",{get:function(){return this._texture?this._texture._lodGenerationScale:0},set:function(e){this._texture&&(this._texture._lodGenerationScale=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uid",{get:function(){return this._uid||(this._uid=a.h.RandomId()),this._uid},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this.name},e.prototype.getClassName=function(){return"BaseTexture"},Object.defineProperty(e.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBlocking",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},e.prototype.getTextureMatrix=function(){return u.j.IdentityReadOnly},e.prototype.getReflectionTextureMatrix=function(){return u.j.IdentityReadOnly},e.prototype.getInternalTexture=function(){return this._texture},e.prototype.isReadyOrNotBlocking=function(){return!this.isBlocking||this.isReady()},e.prototype.isReady=function(){return this.delayLoadState===c.a.DELAYLOADSTATE_NOTLOADED?(this.delayLoad(),!1):!!this._texture&&this._texture.isReady},e.prototype.getSize=function(){if(this._texture){if(this._texture.width)return this._cachedSize.width=this._texture.width,this._cachedSize.height=this._texture.height,this._cachedSize;if(this._texture._size)return this._cachedSize.width=this._texture._size,this._cachedSize.height=this._texture._size,this._cachedSize}return this._cachedSize},e.prototype.getBaseSize=function(){return this.isReady()&&this._texture?this._texture._size?new u.r(this._texture._size,this._texture._size):new u.r(this._texture.baseWidth,this._texture.baseHeight):u.r.Zero()},e.prototype.updateSamplingMode=function(e){if(this._texture){var t=this.getScene();t&&t.getEngine().updateTextureSamplingMode(e,this._texture)}},e.prototype.scale=function(e){},Object.defineProperty(e.prototype,"canRescale",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype._getFromCache=function(e,t,n,r){if(!this._scene)return null;for(var i=this._scene.getEngine().getLoadedTexturesCache(),o=0;o<i.length;o++){var a=i[o];if(!(void 0!==r&&r!==a.invertY||a.url!==e||a.generateMipMaps!==!t||n&&n!==a.samplingMode))return a.incrementReferences(),a}return null},e.prototype._rebuild=function(){},e.prototype.delayLoad=function(){},e.prototype.clone=function(){return null},Object.defineProperty(e.prototype,"textureType",{get:function(){return this._texture&&void 0!==this._texture.type?this._texture.type:c.a.TEXTURETYPE_UNSIGNED_INT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textureFormat",{get:function(){return this._texture&&void 0!==this._texture.format?this._texture.format:c.a.TEXTUREFORMAT_RGBA},enumerable:!0,configurable:!0}),e.prototype.readPixels=function(e,t,n){if(void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=null),!this._texture)return null;var r=this.getSize(),i=r.width,o=r.height,a=this.getScene();if(!a)return null;var s=a.getEngine();return 0!=t&&(i/=Math.pow(2,t),o/=Math.pow(2,t),i=Math.round(i),o=Math.round(o)),s._readTexturePixels(this._texture,i,o,this._texture.isCube?e:-1,t,n)},e.prototype.releaseInternalTexture=function(){this._texture&&(this._texture.dispose(),this._texture=null)},Object.defineProperty(e.prototype,"sphericalPolynomial",{get:function(){return this._texture&&s.a&&this.isReady()?(this._texture._sphericalPolynomial||(this._texture._sphericalPolynomial=s.a.ConvertCubeMapTextureToSphericalPolynomial(this)),this._texture._sphericalPolynomial):null},set:function(e){this._texture&&(this._texture._sphericalPolynomial=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_lodTextureHigh",{get:function(){return this._texture?this._texture._lodTextureHigh:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_lodTextureMid",{get:function(){return this._texture?this._texture._lodTextureMid:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_lodTextureLow",{get:function(){return this._texture?this._texture._lodTextureLow:null},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(this._scene){this._scene.stopAnimation&&this._scene.stopAnimation(this),this._scene._removePendingData(this);var e=this._scene.textures.indexOf(this);e>=0&&this._scene.textures.splice(e,1),this._scene.onTextureRemovedObservable.notifyObservers(this),void 0!==this._texture&&(this.releaseInternalTexture(),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear())}},e.prototype.serialize=function(){if(!this.name)return null;var e=i.a.Serialize(this);return i.a.AppendSerializedAnimations(this,e),e},e.WhenAllReady=function(e,t){var n=e.length;if(0!==n)for(var r,i,o=function(){if((r=e[a]).isReady())0==--n&&t();else{var o=function(){i.removeCallback(o),0==--n&&t()};(i=r.onLoadObservable).add(o)}},a=0;a<e.length;a++)o();else t()},e.DEFAULT_ANISOTROPIC_FILTERING_LEVEL=4,r.c([Object(i.c)()],e.prototype,"uniqueId",void 0),r.c([Object(i.c)()],e.prototype,"name",void 0),r.c([Object(i.c)()],e.prototype,"metadata",void 0),r.c([Object(i.c)("hasAlpha")],e.prototype,"_hasAlpha",void 0),r.c([Object(i.c)()],e.prototype,"getAlphaFromRGB",void 0),r.c([Object(i.c)()],e.prototype,"level",void 0),r.c([Object(i.c)()],e.prototype,"coordinatesIndex",void 0),r.c([Object(i.c)("coordinatesMode")],e.prototype,"_coordinatesMode",void 0),r.c([Object(i.c)()],e.prototype,"wrapU",void 0),r.c([Object(i.c)()],e.prototype,"wrapV",void 0),r.c([Object(i.c)()],e.prototype,"wrapR",void 0),r.c([Object(i.c)()],e.prototype,"anisotropicFilteringLevel",void 0),r.c([Object(i.c)()],e.prototype,"isCube",null),r.c([Object(i.c)()],e.prototype,"is3D",null),r.c([Object(i.c)()],e.prototype,"gammaSpace",void 0),r.c([Object(i.c)()],e.prototype,"invertZ",void 0),r.c([Object(i.c)()],e.prototype,"lodLevelInAlpha",void 0),r.c([Object(i.c)()],e.prototype,"lodGenerationOffset",null),r.c([Object(i.c)()],e.prototype,"lodGenerationScale",null),r.c([Object(i.c)()],e.prototype,"isRenderTarget",void 0),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),i=function(){function e(){}return e._RemoveAndStorePivotPoint=function(t){t&&0===e._PivotCached&&(t.getPivotPointToRef(e._OldPivotPoint),e._OldPivotPoint.equalsToFloats(0,0,0)||(t.setPivotMatrix(r.j.IdentityReadOnly),e._OldPivotPoint.subtractToRef(t.getPivotPoint(),e._PivotTranslation),e._PivotTmpVector.copyFromFloats(1,1,1),e._PivotTmpVector.subtractInPlace(t.scaling),e._PivotTmpVector.multiplyInPlace(e._PivotTranslation),t.position.addInPlace(e._PivotTmpVector))),e._PivotCached++},e._RestorePivotPoint=function(t){t&&!e._OldPivotPoint.equalsToFloats(0,0,0)&&1===e._PivotCached&&(t.setPivotPoint(e._OldPivotPoint),e._PivotTmpVector.copyFromFloats(1,1,1),e._PivotTmpVector.subtractInPlace(t.scaling),e._PivotTmpVector.multiplyInPlace(e._PivotTranslation),t.position.subtractInPlace(e._PivotTmpVector)),this._PivotCached--},e._PivotCached=0,e._OldPivotPoint=new r.x,e._PivotTranslation=new r.x,e._PivotTmpVector=new r.x,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n(11),o=n(13);o.a.CreateSphere=function(e){for(var t=e.segments||32,n=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1,i=e.slice&&e.slice<=0?1:e.slice||1,a=0===e.sideOrientation?0:e.sideOrientation||o.a.DEFAULTSIDE,s=new r.x((e.diameterX||e.diameter||1)/2,(e.diameterY||e.diameter||1)/2,(e.diameterZ||e.diameter||1)/2),u=2+t,l=2*u,c=[],h=[],d=[],f=[],p=0;p<=u;p++){for(var _=p/u,m=_*Math.PI*i,g=0;g<=l;g++){var v=g/l,y=v*Math.PI*2*n,b=r.j.RotationZ(-m),T=r.j.RotationY(y),E=r.x.TransformCoordinates(r.x.Up(),b),x=r.x.TransformCoordinates(E,T),M=x.multiply(s),A=x.divide(s).normalize();h.push(M.x,M.y,M.z),d.push(A.x,A.y,A.z),f.push(v,_)}if(p>0)for(var S=h.length/3,C=S-2*(l+1);C+l+2<S;C++)c.push(C),c.push(C+1),c.push(C+l+1),c.push(C+l+1),c.push(C+1),c.push(C+l+2)}o.a._ComputeSides(a,h,c,d,f,e.frontUVs,e.backUVs);var P=new o.a;return P.indices=c,P.positions=h,P.normals=d,P.uvs=f,P},i.a.CreateSphere=function(e,t,n,r,i,o){return a.CreateSphere(e,{segments:t,diameterX:n,diameterY:n,diameterZ:n,sideOrientation:o,updatable:i},r)};var a=function(){function e(){}return e.CreateSphere=function(e,t,n){var r=new i.a(e,n);return t.sideOrientation=i.a._GetDefaultSideOrientation(t.sideOrientation),r._originalBuilderSideOrientation=t.sideOrientation,o.a.CreateSphere(t).applyToMesh(r,t.updatable),r},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(35),i=function(){function e(){}return Object.defineProperty(e,"Now",{get:function(){return r.a.IsWindowObjectExist()&&window.performance&&window.performance.now?window.performance.now():Date.now()},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n(11),o=n(41),a=function(){function e(e){var t=this;void 0===e&&(e=o.a.DefaultUtilityLayer),this.gizmoLayer=e,this._attachedMesh=null,this.scaleRatio=1,this._customMeshSet=!1,this.updateGizmoRotationToMatchAttachedMesh=!0,this.updateGizmoPositionToMatchAttachedMesh=!0,this._updateScale=!0,this._interactionsEnabled=!0,this._tempVector=new r.x,this._rootMesh=new i.a("gizmoRootNode",e.utilityLayerScene),this._rootMesh.rotationQuaternion=r.q.Identity(),this._beforeRenderObserver=this.gizmoLayer.utilityLayerScene.onBeforeRenderObservable.add(function(){t._update()})}return Object.defineProperty(e.prototype,"attachedMesh",{get:function(){return this._attachedMesh},set:function(e){this._attachedMesh=e,this._rootMesh.setEnabled(!!e),this._attachedMeshChanged(e)},enumerable:!0,configurable:!0}),e.prototype.setCustomMesh=function(e){if(e.getScene()!=this.gizmoLayer.utilityLayerScene)throw"When setting a custom mesh on a gizmo, the custom meshes scene must be the same as the gizmos (eg. gizmo.gizmoLayer.utilityLayerScene)";this._rootMesh.getChildMeshes().forEach(function(e){e.dispose()}),e.parent=this._rootMesh,this._customMeshSet=!0},e.prototype._attachedMeshChanged=function(e){},e.prototype._update=function(){if(this.attachedMesh){var e=this.attachedMesh._effectiveMesh||this.attachedMesh;if(this.updateGizmoPositionToMatchAttachedMesh&&this._rootMesh.position.copyFrom(e.absolutePosition),this.updateGizmoRotationToMatchAttachedMesh?e.getWorldMatrix().decompose(void 0,this._rootMesh.rotationQuaternion):this._rootMesh.rotationQuaternion.set(0,0,0,1),this._updateScale){var t=this.gizmoLayer.utilityLayerScene.activeCamera,n=t.globalPosition;t.devicePosition&&(n=t.devicePosition),this._rootMesh.position.subtractToRef(n,this._tempVector);var r=this._tempVector.length()*this.scaleRatio;this._rootMesh.scaling.set(r,r,r),e._getWorldMatrixDeterminant()<0&&(this._rootMesh.scaling.y*=-1)}}},e.prototype.dispose=function(){this._rootMesh.dispose(),this._beforeRenderObserver&&this.gizmoLayer.utilityLayerScene.onBeforeRenderObservable.remove(this._beforeRenderObserver)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return c});var r=n(1),i=n(9),o=n(4),a=n(81),s=n(43),u=n(3),l=function(){function e(){this._materialDefines=null,this._materialEffect=null}return Object.defineProperty(e.prototype,"effect",{get:function(){return this._materialEffect},enumerable:!0,configurable:!0}),e.prototype.setEffect=function(e,t){void 0===t&&(t=null),this._materialEffect!==e?(this._materialDefines=t,this._materialEffect=e):e||(this._materialDefines=null)},e}(),c=function(e){function t(t,n,r,i,o,a,s,u){void 0===u&&(u=!0);var l=e.call(this)||this;return l.materialIndex=t,l.verticesStart=n,l.verticesCount=r,l.indexStart=i,l.indexCount=o,l._linesIndexCount=0,l._linesIndexBuffer=null,l._lastColliderWorldVertices=null,l._lastColliderTransformMatrix=null,l._renderId=0,l._alphaIndex=0,l._distanceToCamera=0,l._currentMaterial=null,l._mesh=a,l._renderingMesh=s||a,a.subMeshes.push(l),l._trianglePlanes=[],l._id=a.subMeshes.length-1,u&&(l.refreshBoundingInfo(),a.computeWorldMatrix(!0)),l}return r.d(t,e),t.AddToMesh=function(e,n,r,i,o,a,s,u){return void 0===u&&(u=!0),new t(e,n,r,i,o,a,s,u)},Object.defineProperty(t.prototype,"IsGlobal",{get:function(){return 0===this.verticesStart&&this.verticesCount===this._mesh.getTotalVertices()},enumerable:!0,configurable:!0}),t.prototype.getBoundingInfo=function(){return this.IsGlobal?this._mesh.getBoundingInfo():this._boundingInfo},t.prototype.setBoundingInfo=function(e){return this._boundingInfo=e,this},t.prototype.getMesh=function(){return this._mesh},t.prototype.getRenderingMesh=function(){return this._renderingMesh},t.prototype.getMaterial=function(){var e=this._renderingMesh.material;if(null==e)return this._mesh.getScene().defaultMaterial;if(e.getSubMaterial){var t=e.getSubMaterial(this.materialIndex);return this._currentMaterial!==t&&(this._currentMaterial=t,this._materialDefines=null),t}return e},t.prototype.refreshBoundingInfo=function(e){if(void 0===e&&(e=null),this._lastColliderWorldVertices=null,this.IsGlobal||!this._renderingMesh||!this._renderingMesh.geometry)return this;if(e||(e=this._renderingMesh.getVerticesData(o.b.PositionKind)),!e)return this._boundingInfo=this._mesh.getBoundingInfo(),this;var t,n=this._renderingMesh.getIndices();if(0===this.indexStart&&this.indexCount===n.length){var r=this._renderingMesh.getBoundingInfo();t={minimum:r.minimum.clone(),maximum:r.maximum.clone()}}else t=i.h.ExtractMinAndMaxIndexed(e,n,this.indexStart,this.indexCount,this._renderingMesh.geometry.boundingBias);return this._boundingInfo?this._boundingInfo.reConstruct(t.minimum,t.maximum):this._boundingInfo=new s.a(t.minimum,t.maximum),this},t.prototype._checkCollision=function(e){return this.getBoundingInfo()._checkCollision(e)},t.prototype.updateBoundingInfo=function(e){var t=this.getBoundingInfo();return t||(this.refreshBoundingInfo(),t=this.getBoundingInfo()),t.update(e),this},t.prototype.isInFrustum=function(e){var t=this.getBoundingInfo();return!!t&&t.isInFrustum(e,this._mesh.cullingStrategy)},t.prototype.isCompletelyInFrustum=function(e){var t=this.getBoundingInfo();return!!t&&t.isCompletelyInFrustum(e)},t.prototype.render=function(e){return this._renderingMesh.render(this,e),this},t.prototype._getLinesIndexBuffer=function(e,t){if(!this._linesIndexBuffer){for(var n=[],r=this.indexStart;r<this.indexStart+this.indexCount;r+=3)n.push(e[r],e[r+1],e[r+1],e[r+2],e[r+2],e[r]);this._linesIndexBuffer=t.createIndexBuffer(n),this._linesIndexCount=n.length}return this._linesIndexBuffer},t.prototype.canIntersects=function(e){var t=this.getBoundingInfo();return!!t&&e.intersectsBox(t.boundingBox)},t.prototype.intersects=function(e,t,n,r,i){var o=this.getMaterial();if(!o)return null;switch(o.fillMode){case u.a.MATERIAL_PointListDrawMode:case u.a.MATERIAL_LineListDrawMode:case u.a.MATERIAL_LineLoopDrawMode:case u.a.MATERIAL_LineStripDrawMode:case u.a.MATERIAL_TriangleFanDrawMode:case u.a.MATERIAL_TriangleStripDrawMode:return null}return"InstancedLinesMesh"===this._mesh.getClassName()||"LinesMesh"===this._mesh.getClassName()?n.length?this._intersectLines(e,t,n,this._mesh.intersectionThreshold,r):this._intersectUnIndexedLines(e,t,n,this._mesh.intersectionThreshold,r):!n.length&&this._mesh._unIndexed?this._intersectUnIndexedTriangles(e,t,n,r,i):this._intersectTriangles(e,t,n,r,i)},t.prototype._intersectLines=function(e,t,n,r,i){for(var o=null,s=this.indexStart;s<this.indexStart+this.indexCount;s+=2){var u=e.intersectionSegment(t[n[s]],t[n[s+1]],r);if(!(u<0)&&(i||!o||u<o.distance)&&((o=new a.a(null,null,u)).faceId=s/2,i))break}return o},t.prototype._intersectUnIndexedLines=function(e,t,n,r,i){for(var o=null,s=this.verticesStart;s<this.verticesStart+this.verticesCount;s+=2){var u=e.intersectionSegment(t[s],t[s+1],r);if(!(u<0)&&(i||!o||u<o.distance)&&((o=new a.a(null,null,u)).faceId=s/2,i))break}return o},t.prototype._intersectTriangles=function(e,t,n,r,i){for(var o=null,a=this.indexStart;a<this.indexStart+this.indexCount;a+=3){var s=t[n[a]],u=t[n[a+1]],l=t[n[a+2]];if(!i||i(s,u,l,e)){var c=e.intersectsTriangle(s,u,l);if(c){if(c.distance<0)continue;if((r||!o||c.distance<o.distance)&&((o=c).faceId=a/3,r))break}}}return o},t.prototype._intersectUnIndexedTriangles=function(e,t,n,r,i){for(var o=null,a=this.verticesStart;a<this.verticesStart+this.verticesCount;a+=3){var s=t[a],u=t[a+1],l=t[a+2];if(!i||i(s,u,l,e)){var c=e.intersectsTriangle(s,u,l);if(c){if(c.distance<0)continue;if((r||!o||c.distance<o.distance)&&((o=c).faceId=a/3,r))break}}}return o},t.prototype._rebuild=function(){this._linesIndexBuffer&&(this._linesIndexBuffer=null)},t.prototype.clone=function(e,n){var r=new t(this.materialIndex,this.verticesStart,this.verticesCount,this.indexStart,this.indexCount,e,n,!1);if(!this.IsGlobal){var i=this.getBoundingInfo();if(!i)return r;r._boundingInfo=new s.a(i.minimum,i.maximum)}return r},t.prototype.dispose=function(){this._linesIndexBuffer&&(this._mesh.getScene().getEngine()._releaseBuffer(this._linesIndexBuffer),this._linesIndexBuffer=null);var e=this._mesh.subMeshes.indexOf(this);this._mesh.subMeshes.splice(e,1)},t.prototype.getClassName=function(){return"SubMesh"},t.CreateFromIndices=function(e,n,r,i,o){for(var a=Number.MAX_VALUE,s=-Number.MAX_VALUE,u=(o||i).getIndices(),l=n;l<n+r;l++){var c=u[l];c<a&&(a=c),c>s&&(s=c)}return new t(e,a,s-a+1,n,r,i,o)},t}(l)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(0),i=n(4),o=function(){function e(){this._pickingUnavailable=!1,this.hit=!1,this.distance=0,this.pickedPoint=null,this.pickedMesh=null,this.bu=0,this.bv=0,this.faceId=-1,this.subMeshId=0,this.pickedSprite=null,this.originMesh=null,this.ray=null}return e.prototype.getNormal=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!0),!this.pickedMesh||!this.pickedMesh.isVerticesDataPresent(i.b.NormalKind))return null;var n,o=this.pickedMesh.getIndices();if(!o)return null;if(t){var a=this.pickedMesh.getVerticesData(i.b.NormalKind),s=r.x.FromArray(a,3*o[3*this.faceId]),u=r.x.FromArray(a,3*o[3*this.faceId+1]),l=r.x.FromArray(a,3*o[3*this.faceId+2]);s=s.scale(this.bu),u=u.scale(this.bv),l=l.scale(1-this.bu-this.bv),n=new r.x(s.x+u.x+l.x,s.y+u.y+l.y,s.z+u.z+l.z)}else{var c=this.pickedMesh.getVerticesData(i.b.PositionKind),h=r.x.FromArray(c,3*o[3*this.faceId]),d=r.x.FromArray(c,3*o[3*this.faceId+1]),f=r.x.FromArray(c,3*o[3*this.faceId+2]),p=h.subtract(d),_=f.subtract(d);n=r.x.Cross(p,_)}if(e){var m=this.pickedMesh.getWorldMatrix();this.pickedMesh.nonUniformScaling&&(r.t.Matrix[0].copyFrom(m),(m=r.t.Matrix[0]).setTranslationFromFloats(0,0,0),m.invert(),m.transposeToRef(r.t.Matrix[1]),m=r.t.Matrix[1]),n=r.x.TransformNormal(n,m)}return n.normalize(),n},e.prototype.getTextureCoordinates=function(){if(!this.pickedMesh||!this.pickedMesh.isVerticesDataPresent(i.b.UVKind))return null;var e=this.pickedMesh.getIndices();if(!e)return null;var t=this.pickedMesh.getVerticesData(i.b.UVKind);if(!t)return null;var n=r.w.FromArray(t,2*e[3*this.faceId]),o=r.w.FromArray(t,2*e[3*this.faceId+1]),a=r.w.FromArray(t,2*e[3*this.faceId+2]);return n=n.scale(1-this.bu-this.bv),o=o.scale(this.bu),a=a.scale(this.bv),new r.w(n.x+o.x+a.x,n.y+o.y+a.y)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return a});var r=n(1),i=function(){function e(){}return e.KEYDOWN=1,e.KEYUP=2,e}(),o=function(e,t){this.type=e,this.event=t},a=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.type=t,r.event=n,r.skipOnPointerObservable=!1,r}return r.d(t,e),t}(o)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(0),i=n(11),o=n(13);o.a.CreateBox=function(e){var t,n=[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23],i=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0],a=[],s=e.width||e.size||1,u=e.height||e.size||1,l=e.depth||e.size||1,c=void 0===e.topBaseAt?1:e.topBaseAt,h=void 0===e.bottomBaseAt?0:e.bottomBaseAt,d=[2,0,3,1][c=(c+4)%4],f=[2,0,1,3][h=(h+4)%4],p=[1,-1,1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,-1,1,-1,1,1,1,1,-1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,-1,-1,-1,1];if(e.wrap){n=[2,3,0,2,0,1,4,5,6,4,6,7,9,10,11,9,11,8,12,14,15,12,13,14],p=[-1,1,1,1,1,1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,1,1,1,-1,1,-1,-1,1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1];for(var _=[[1,1,1],[-1,1,1],[-1,1,-1],[1,1,-1]],m=[[-1,-1,1],[1,-1,1],[1,-1,-1],[-1,-1,-1]],g=[17,18,19,16],v=[22,23,20,21];d>0;)_.unshift(_.pop()),g.unshift(g.pop()),d--;for(;f>0;)m.unshift(m.pop()),v.unshift(v.pop()),f--;_=_.flat(),m=m.flat(),p=p.concat(_).concat(m),n.push(g[0],g[2],g[3],g[0],g[1],g[2]),n.push(v[0],v[2],v[3],v[0],v[1],v[2])}var y=[s/2,u/2,l/2];t=p.reduce(function(e,t,n){return e.concat(t*y[n%3])},[]);for(var b=0===e.sideOrientation?0:e.sideOrientation||o.a.DEFAULTSIDE,T=e.faceUV||new Array(6),E=e.faceColors,x=[],M=0;M<6;M++)void 0===T[M]&&(T[M]=new r.y(0,0,1,1)),E&&void 0===E[M]&&(E[M]=new r.f(1,1,1,1));for(var A=0;A<6;A++)if(a.push(T[A].z,T[A].w),a.push(T[A].x,T[A].w),a.push(T[A].x,T[A].y),a.push(T[A].z,T[A].y),E)for(var S=0;S<4;S++)x.push(E[A].r,E[A].g,E[A].b,E[A].a);o.a._ComputeSides(b,t,n,i,a,e.frontUVs,e.backUVs);var C=new o.a;if(C.indices=n,C.positions=t,C.normals=i,C.uvs=a,E){var P=b===o.a.DOUBLESIDE?x.concat(x):x;C.colors=P}return C},i.a.CreateBox=function(e,t,n,r,i){return void 0===n&&(n=null),a.CreateBox(e,{size:t,sideOrientation:i,updatable:r},n)};var a=function(){function e(){}return e.CreateBox=function(e,t,n){void 0===n&&(n=null);var r=new i.a(e,n);return t.sideOrientation=i.a._GetDefaultSideOrientation(t.sideOrientation),r._originalBuilderSideOrientation=t.sideOrientation,o.a.CreateBox(t).applyToMesh(r,t.updatable),r},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),i=n(11),o=n(13),a=n(16);o.a.CreateCylinder=function(e){var t,n=e.height||2,i=0===e.diameterTop?0:e.diameterTop||e.diameter||1,a=0===e.diameterBottom?0:e.diameterBottom||e.diameter||1,s=e.tessellation||24,u=e.subdivisions||1,l=!!e.hasRings,c=!!e.enclose,h=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1,d=0===e.sideOrientation?0:e.sideOrientation||o.a.DEFAULTSIDE,f=e.faceUV||new Array(3),p=e.faceColors,_=2+(1+(1!==h&&c?2:0))*(l?u:1);for(t=0;t<_;t++)p&&void 0===p[t]&&(p[t]=new r.f(1,1,1,1));for(t=0;t<_;t++)f&&void 0===f[t]&&(f[t]=new r.y(0,0,1,1));var m,g,v,y,b,T,E=new Array,x=new Array,M=new Array,A=new Array,S=new Array,C=2*Math.PI*h/s,P=(a-i)/2/n,R=r.x.Zero(),D=r.x.Zero(),O=r.x.Zero(),w=r.x.Zero(),L=r.x.Zero(),I=r.c.Y,F=1,N=1,B=0,k=0;for(y=0;y<=u;y++)for(v=((g=y/u)*(i-a)+a)/2,F=l&&0!==y&&y!==u?2:1,T=0;T<F;T++){for(l&&(N+=T),c&&(N+=2*T),b=0;b<=s;b++)m=b*C,R.x=Math.cos(-m)*v,R.y=-n/2+g*n,R.z=Math.sin(-m)*v,0===i&&y===u?(D.x=M[M.length-3*(s+1)],D.y=M[M.length-3*(s+1)+1],D.z=M[M.length-3*(s+1)+2]):(D.x=R.x,D.z=R.z,D.y=Math.sqrt(D.x*D.x+D.z*D.z)*P,D.normalize()),0===b&&(O.copyFrom(R),w.copyFrom(D)),x.push(R.x,R.y,R.z),M.push(D.x,D.y,D.z),A.push(f[N].x+(f[N].z-f[N].x)*b/s,k=l?B!==N?f[N].y:f[N].w:f[N].y+(f[N].w-f[N].y)*g),p&&S.push(p[N].r,p[N].g,p[N].b,p[N].a);1!==h&&c&&(x.push(R.x,R.y,R.z),x.push(0,R.y,0),x.push(0,R.y,0),x.push(O.x,O.y,O.z),r.x.CrossToRef(I,D,L),L.normalize(),M.push(L.x,L.y,L.z,L.x,L.y,L.z),r.x.CrossToRef(w,I,L),L.normalize(),M.push(L.x,L.y,L.z,L.x,L.y,L.z),A.push(f[N+1].x,k=l?B!==N?f[N+1].y:f[N+1].w:f[N+1].y+(f[N+1].w-f[N+1].y)*g),A.push(f[N+1].z,k),A.push(f[N+2].x,k=l?B!==N?f[N+2].y:f[N+2].w:f[N+2].y+(f[N+2].w-f[N+2].y)*g),A.push(f[N+2].z,k),p&&(S.push(p[N+1].r,p[N+1].g,p[N+1].b,p[N+1].a),S.push(p[N+1].r,p[N+1].g,p[N+1].b,p[N+1].a),S.push(p[N+2].r,p[N+2].g,p[N+2].b,p[N+2].a),S.push(p[N+2].r,p[N+2].g,p[N+2].b,p[N+2].a))),B!==N&&(B=N)}var U=1!==h&&c?s+4:s;for(y=0,N=0;N<u;N++){var V=0,G=0,j=0,z=0;for(b=0;b<s;b++)z=(y+1)*(U+1)+(b+1),E.push(V=y*(U+1)+b,G=(y+1)*(U+1)+b,j=y*(U+1)+(b+1)),E.push(z,j,G);1!==h&&c&&(E.push(V+2,G+2,j+2),E.push(z+2,j+2,G+2),E.push(V+4,G+4,j+4),E.push(z+4,j+4,G+4)),y=l?y+2:y+1}var Y=function(e){var t=e?i/2:a/2;if(0!==t){var o,u,l,c=e?f[_-1]:f[0],d=null;p&&(d=e?p[_-1]:p[0]);var m=x.length/3,g=e?n/2:-n/2,v=new r.x(0,g,0);x.push(v.x,v.y,v.z),M.push(0,e?1:-1,0),A.push(c.x+.5*(c.z-c.x),c.y+.5*(c.w-c.y)),d&&S.push(d.r,d.g,d.b,d.a);var y=new r.w(.5,.5);for(l=0;l<=s;l++){o=2*Math.PI*l*h/s;var b=Math.cos(-o),T=Math.sin(-o);u=new r.x(b*t,g,T*t);var C=new r.w(b*y.x+.5,T*y.y+.5);x.push(u.x,u.y,u.z),M.push(0,e?1:-1,0),A.push(c.x+(c.z-c.x)*C.x,c.y+(c.w-c.y)*C.y),d&&S.push(d.r,d.g,d.b,d.a)}for(l=0;l<s;l++)e?(E.push(m),E.push(m+(l+2)),E.push(m+(l+1))):(E.push(m),E.push(m+(l+1)),E.push(m+(l+2)))}};Y(!1),Y(!0),o.a._ComputeSides(d,x,E,M,A,e.frontUVs,e.backUVs);var H=new o.a;return H.indices=E,H.positions=x,H.normals=M,H.uvs=A,p&&(H.colors=S),H},i.a.CreateCylinder=function(e,t,n,r,o,u,l,c,h){return void 0!==l&&l instanceof a.a||(void 0!==l&&(h=c||i.a.DEFAULTSIDE,c=l),l=u,u=1),s.CreateCylinder(e,{height:t,diameterTop:n,diameterBottom:r,tessellation:o,subdivisions:u,sideOrientation:h,updatable:c},l)};var s=function(){function e(){}return e.CreateCylinder=function(e,t,n){var r=new i.a(e,n);return t.sideOrientation=i.a._GetDefaultSideOrientation(t.sideOrientation),r._originalBuilderSideOrientation=t.sideOrientation,o.a.CreateCylinder(t).applyToMesh(r,t.updatable),r},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(11),i=n(16),o=n(8),a=n(0),s=n(17),u=n(39),l=n(45),c=(n(80),function(){function e(e){this._useAlternatePickedPointAboveMaxDragAngleDragSpeed=-1.1,this.maxDragAngle=0,this._useAlternatePickedPointAboveMaxDragAngle=!1,this.currentDraggingPointerID=-1,this.dragging=!1,this.dragDeltaRatio=.2,this.updateDragPlane=!0,this._debugMode=!1,this._moving=!1,this.onDragObservable=new o.c,this.onDragStartObservable=new o.c,this.onDragEndObservable=new o.c,this.moveAttached=!0,this.enabled=!0,this.detachCameraControls=!0,this.useObjectOrienationForDragging=!0,this.validateDrag=function(e){return!0},this._tmpVector=new a.x(0,0,0),this._alternatePickedPoint=new a.x(0,0,0),this._worldDragAxis=new a.x(0,0,0),this._targetPosition=new a.x(0,0,0),this._attachedElement=null,this._startDragRay=new u.a(new a.x,new a.x),this._lastPointerRay={},this._dragDelta=new a.x,this._pointA=new a.x(0,0,0),this._pointB=new a.x(0,0,0),this._pointC=new a.x(0,0,0),this._lineA=new a.x(0,0,0),this._lineB=new a.x(0,0,0),this._localAxis=new a.x(0,0,0),this._lookAt=new a.x(0,0,0),this._options=e||{};var t=0;if(this._options.dragAxis&&t++,this._options.dragPlaneNormal&&t++,t>1)throw"Multiple drag modes specified in dragBehavior options. Only one expected"}return Object.defineProperty(e.prototype,"name",{get:function(){return"PointerDrag"},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.attach=function(t){var n=this;this._scene=t.getScene(),this._attachedNode=t,e._planeScene||(this._debugMode?e._planeScene=this._scene:((e._planeScene=new i.a(this._scene.getEngine(),{virtual:!0})).detachControl(),this._scene.onDisposeObservable.addOnce(function(){e._planeScene.dispose(),e._planeScene=null}))),this._dragPlane=r.a.CreatePlane("pointerDragPlane",this._debugMode?1:1e4,e._planeScene,!1,r.a.DOUBLESIDE),this.lastDragPosition=new a.x(0,0,0),this._pointerObserver=this._scene.onPointerObservable.add(function(t,r){var i;if(n.enabled)if(t.type==s.a.POINTERDOWN)!n.dragging&&t.pickInfo&&t.pickInfo.hit&&t.pickInfo.pickedMesh&&t.pickInfo.pickedPoint&&t.pickInfo.ray&&(n._attachedNode==(i=t.pickInfo.pickedMesh)||i.isDescendantOf(n._attachedNode))&&n._startDrag(t.event.pointerId,t.pickInfo.ray,t.pickInfo.pickedPoint);else if(t.type==s.a.POINTERUP)n.currentDraggingPointerID==t.event.pointerId&&n.releaseDrag();else if(t.type==s.a.POINTERMOVE){var o=t.event.pointerId;n.currentDraggingPointerID===e._AnyMouseID&&o!==e._AnyMouseID&&"mouse"==t.event.pointerType&&(n._lastPointerRay[n.currentDraggingPointerID]&&(n._lastPointerRay[o]=n._lastPointerRay[n.currentDraggingPointerID],delete n._lastPointerRay[n.currentDraggingPointerID]),n.currentDraggingPointerID=o),n._lastPointerRay[o]||(n._lastPointerRay[o]=new u.a(new a.x,new a.x)),t.pickInfo&&t.pickInfo.ray&&(n._lastPointerRay[o].origin.copyFrom(t.pickInfo.ray.origin),n._lastPointerRay[o].direction.copyFrom(t.pickInfo.ray.direction),n.currentDraggingPointerID==o&&n.dragging&&n._moveDrag(t.pickInfo.ray))}}),this._beforeRenderObserver=this._scene.onBeforeRenderObservable.add(function(){n._moving&&n.moveAttached&&(l.a._RemoveAndStorePivotPoint(n._attachedNode),n._targetPosition.subtractToRef(n._attachedNode.absolutePosition,n._tmpVector),n._tmpVector.scaleInPlace(n.dragDeltaRatio),n._attachedNode.getAbsolutePosition().addToRef(n._tmpVector,n._tmpVector),n.validateDrag(n._tmpVector)&&n._attachedNode.setAbsolutePosition(n._tmpVector),l.a._RestorePivotPoint(n._attachedNode))})},e.prototype.releaseDrag=function(){this.dragging=!1,this.onDragEndObservable.notifyObservers({dragPlanePoint:this.lastDragPosition,pointerId:this.currentDraggingPointerID}),this.currentDraggingPointerID=-1,this._moving=!1,this.detachCameraControls&&this._attachedElement&&this._scene.activeCamera&&!this._scene.activeCamera.leftCamera&&this._scene.activeCamera.attachControl(this._attachedElement,!0)},e.prototype.startDrag=function(t,n,r){void 0===t&&(t=e._AnyMouseID),this._startDrag(t,n,r);var i=this._lastPointerRay[t];t===e._AnyMouseID&&(i=this._lastPointerRay[Object.keys(this._lastPointerRay)[0]]),i&&this._moveDrag(i)},e.prototype._startDrag=function(e,t,n){if(this._scene.activeCamera&&!this.dragging&&this._attachedNode){l.a._RemoveAndStorePivotPoint(this._attachedNode),t?(this._startDragRay.direction.copyFrom(t.direction),this._startDragRay.origin.copyFrom(t.origin)):(this._startDragRay.origin.copyFrom(this._scene.activeCamera.position),this._attachedNode.getWorldMatrix().getTranslationToRef(this._tmpVector),this._tmpVector.subtractToRef(this._scene.activeCamera.position,this._startDragRay.direction)),this._updateDragPlanePosition(this._startDragRay,n||this._tmpVector);var r=this._pickWithRayOnDragPlane(this._startDragRay);r&&(this.dragging=!0,this.currentDraggingPointerID=e,this.lastDragPosition.copyFrom(r),this.onDragStartObservable.notifyObservers({dragPlanePoint:r,pointerId:this.currentDraggingPointerID}),this._targetPosition.copyFrom(this._attachedNode.absolutePosition),this.detachCameraControls&&this._scene.activeCamera&&!this._scene.activeCamera.leftCamera&&(this._scene.activeCamera.inputs.attachedElement?(this._attachedElement=this._scene.activeCamera.inputs.attachedElement,this._scene.activeCamera.detachControl(this._scene.activeCamera.inputs.attachedElement)):this._attachedElement=null)),l.a._RestorePivotPoint(this._attachedNode)}},e.prototype._moveDrag=function(e){this._moving=!0;var t=this._pickWithRayOnDragPlane(e);if(t){this.updateDragPlane&&this._updateDragPlanePosition(e,t);var n=0;this._options.dragAxis?(a.x.TransformCoordinatesToRef(this._options.dragAxis,this._attachedNode.getWorldMatrix().getRotationMatrix(),this._worldDragAxis),t.subtractToRef(this.lastDragPosition,this._tmpVector),n=a.x.Dot(this._tmpVector,this._worldDragAxis),this._worldDragAxis.scaleToRef(n,this._dragDelta)):(n=this._dragDelta.length(),t.subtractToRef(this.lastDragPosition,this._dragDelta)),this._targetPosition.addInPlace(this._dragDelta),this.onDragObservable.notifyObservers({dragDistance:n,delta:this._dragDelta,dragPlanePoint:t,dragPlaneNormal:this._dragPlane.forward,pointerId:this.currentDraggingPointerID}),this.lastDragPosition.copyFrom(t)}},e.prototype._pickWithRayOnDragPlane=function(t){var n=this;if(!t)return null;var r=Math.acos(a.x.Dot(this._dragPlane.forward,t.direction));if(r>Math.PI/2&&(r=Math.PI-r),this.maxDragAngle>0&&r>this.maxDragAngle){if(this._useAlternatePickedPointAboveMaxDragAngle){this._tmpVector.copyFrom(t.direction),this._attachedNode.absolutePosition.subtractToRef(t.origin,this._alternatePickedPoint),this._alternatePickedPoint.normalize(),this._alternatePickedPoint.scaleInPlace(this._useAlternatePickedPointAboveMaxDragAngleDragSpeed*a.x.Dot(this._alternatePickedPoint,this._tmpVector)),this._tmpVector.addInPlace(this._alternatePickedPoint);var i=a.x.Dot(this._dragPlane.forward,this._tmpVector);return this._dragPlane.forward.scaleToRef(-i,this._alternatePickedPoint),this._alternatePickedPoint.addInPlace(this._tmpVector),this._alternatePickedPoint.addInPlace(this._attachedNode.absolutePosition),this._alternatePickedPoint}return null}var o=e._planeScene.pickWithRay(t,function(e){return e==n._dragPlane});return o&&o.hit&&o.pickedMesh&&o.pickedPoint?o.pickedPoint:null},e.prototype._updateDragPlanePosition=function(e,t){this._pointA.copyFrom(t),this._options.dragAxis?(this.useObjectOrienationForDragging?a.x.TransformCoordinatesToRef(this._options.dragAxis,this._attachedNode.getWorldMatrix().getRotationMatrix(),this._localAxis):this._localAxis.copyFrom(this._options.dragAxis),this._pointA.addToRef(this._localAxis,this._pointB),e.origin.subtractToRef(this._pointA,this._pointC),this._pointA.addToRef(this._pointC.normalize(),this._pointC),this._pointB.subtractToRef(this._pointA,this._lineA),this._pointC.subtractToRef(this._pointA,this._lineB),a.x.CrossToRef(this._lineA,this._lineB,this._lookAt),a.x.CrossToRef(this._lineA,this._lookAt,this._lookAt),this._lookAt.normalize(),this._dragPlane.position.copyFrom(this._pointA),this._pointA.addToRef(this._lookAt,this._lookAt),this._dragPlane.lookAt(this._lookAt)):this._options.dragPlaneNormal?(this.useObjectOrienationForDragging?a.x.TransformCoordinatesToRef(this._options.dragPlaneNormal,this._attachedNode.getWorldMatrix().getRotationMatrix(),this._localAxis):this._localAxis.copyFrom(this._options.dragPlaneNormal),this._dragPlane.position.copyFrom(this._pointA),this._pointA.addToRef(this._localAxis,this._lookAt),this._dragPlane.lookAt(this._lookAt)):(this._dragPlane.position.copyFrom(this._pointA),this._dragPlane.lookAt(e.origin)),this._dragPlane.position.copyFrom(this._attachedNode.absolutePosition),this._dragPlane.computeWorldMatrix(!0)},e.prototype.detach=function(){this._pointerObserver&&this._scene.onPointerObservable.remove(this._pointerObserver),this._beforeRenderObserver&&this._scene.onBeforeRenderObservable.remove(this._beforeRenderObserver),this.releaseDrag()},e._AnyMouseID=-2,e}())},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(3),i=function(){function e(){}return Object.defineProperty(e,"ForceFullSceneLoadingForIncremental",{get:function(){return e._ForceFullSceneLoadingForIncremental},set:function(t){e._ForceFullSceneLoadingForIncremental=t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ShowLoadingScreen",{get:function(){return e._ShowLoadingScreen},set:function(t){e._ShowLoadingScreen=t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loggingLevel",{get:function(){return e._loggingLevel},set:function(t){e._loggingLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CleanBoneMatrixWeights",{get:function(){return e._CleanBoneMatrixWeights},set:function(t){e._CleanBoneMatrixWeights=t},enumerable:!0,configurable:!0}),e._ForceFullSceneLoadingForIncremental=!1,e._ShowLoadingScreen=!0,e._CleanBoneMatrixWeights=!1,e._loggingLevel=r.a.SCENELOADER_NO_LOGGING,e}()},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.helperFunctions="const float PI=3.1415926535897932384626433832795;\nconst float LinearEncodePowerApprox=2.2;\nconst float GammaEncodePowerApprox=1.0/LinearEncodePowerApprox;\nconst vec3 LuminanceEncodeApprox=vec3(0.2126,0.7152,0.0722);\nconst float Epsilon=0.0000001;\n#define saturate(x) clamp(x,0.0,1.0)\n#define absEps(x) abs(x)+Epsilon\n#define maxEps(x) max(x,Epsilon)\n#define saturateEps(x) clamp(x,Epsilon,1.0)\nmat3 transposeMat3(mat3 inMatrix) {\nvec3 i0=inMatrix[0];\nvec3 i1=inMatrix[1];\nvec3 i2=inMatrix[2];\nmat3 outMatrix=mat3(\nvec3(i0.x,i1.x,i2.x),\nvec3(i0.y,i1.y,i2.y),\nvec3(i0.z,i1.z,i2.z)\n);\nreturn outMatrix;\n}\n\nmat3 inverseMat3(mat3 inMatrix) {\nfloat a00=inMatrix[0][0],a01=inMatrix[0][1],a02=inMatrix[0][2];\nfloat a10=inMatrix[1][0],a11=inMatrix[1][1],a12=inMatrix[1][2];\nfloat a20=inMatrix[2][0],a21=inMatrix[2][1],a22=inMatrix[2][2];\nfloat b01=a22*a11-a12*a21;\nfloat b11=-a22*a10+a12*a20;\nfloat b21=a21*a10-a11*a20;\nfloat det=a00*b01+a01*b11+a02*b21;\nreturn mat3(b01,(-a22*a01+a02*a21),(a12*a01-a02*a11),\nb11,(a22*a00-a02*a20),(-a12*a00+a02*a10),\nb21,(-a21*a00+a01*a20),(a11*a00-a01*a10))/det;\n}\nvec3 toLinearSpace(vec3 color)\n{\nreturn pow(color,vec3(LinearEncodePowerApprox));\n}\nvec3 toGammaSpace(vec3 color)\n{\nreturn pow(color,vec3(GammaEncodePowerApprox));\n}\nfloat square(float value)\n{\nreturn value*value;\n}\nfloat pow5(float value) {\nfloat sq=value*value;\nreturn sq*sq*value;\n}\nfloat getLuminance(vec3 color)\n{\nreturn clamp(dot(color,LuminanceEncodeApprox),0.,1.);\n}\n\nfloat getRand(vec2 seed) {\nreturn fract(sin(dot(seed.xy ,vec2(12.9898,78.233)))*43758.5453);\n}\nfloat dither(vec2 seed,float varianceAmount) {\nfloat rand=getRand(seed);\nfloat dither=mix(-varianceAmount/255.0,varianceAmount/255.0,rand);\nreturn dither;\n}\n\nconst float rgbdMaxRange=255.0;\nvec4 toRGBD(vec3 color) {\nfloat maxRGB=maxEps(max(color.r,max(color.g,color.b)));\nfloat D=max(rgbdMaxRange/maxRGB,1.);\nD=clamp(floor(D)/255.0,0.,1.);\n\nvec3 rgb=color.rgb*D;\n\nrgb=toGammaSpace(rgb);\nreturn vec4(rgb,D);\n}\nvec3 fromRGBD(vec4 rgbd) {\n\nrgbd.rgb=toLinearSpace(rgbd.rgb);\n\nreturn rgbd.rgb/rgbd.a;\n}"},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(0),i=n(13),o=n(4),a=n(49),s=n(55),u=n(43),l=n(3),c=n(9),h=n(29),d=function(){function e(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=null),this.delayLoadState=l.a.DELAYLOADSTATE_NONE,this._totalVertices=0,this._isDisposed=!1,this._indexBufferIsUpdatable=!1,this.id=e,this.uniqueId=t.getUniqueId(),this._engine=t.getEngine(),this._meshes=[],this._scene=t,this._vertexBuffers={},this._indices=[],this._updatable=r,n?this.setAllVerticesData(n,r):(this._totalVertices=0,this._indices=[]),this._engine.getCaps().vertexArrayObject&&(this._vertexArrayObjects={}),i&&(this.applyToMesh(i),i.computeWorldMatrix(!0))}return Object.defineProperty(e.prototype,"boundingBias",{get:function(){return this._boundingBias},set:function(e){this._boundingBias?this._boundingBias.copyFrom(e):this._boundingBias=e.clone(),this._updateBoundingInfo(!0,null)},enumerable:!0,configurable:!0}),e.CreateGeometryForMesh=function(t){var n=new e(e.RandomId(),t.getScene());return n.applyToMesh(t),n},Object.defineProperty(e.prototype,"extend",{get:function(){return this._extend},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},e.prototype.getEngine=function(){return this._engine},e.prototype.isReady=function(){return this.delayLoadState===l.a.DELAYLOADSTATE_LOADED||this.delayLoadState===l.a.DELAYLOADSTATE_NONE},Object.defineProperty(e.prototype,"doNotSerialize",{get:function(){for(var e=0;e<this._meshes.length;e++)if(!this._meshes[e].doNotSerialize)return!1;return!0},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){for(var e in this._vertexArrayObjects&&(this._vertexArrayObjects={}),0!==this._meshes.length&&this._indices&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices)),this._vertexBuffers)this._vertexBuffers[e]._rebuild()},e.prototype.setAllVerticesData=function(e,t){e.applyToGeometry(this,t),this.notifyUpdate()},e.prototype.setVerticesData=function(e,t,n,r){void 0===n&&(n=!1);var i=new o.b(this._engine,t,e,n,0===this._meshes.length,r);this.setVerticesBuffer(i)},e.prototype.removeVerticesData=function(e){this._vertexBuffers[e]&&(this._vertexBuffers[e].dispose(),delete this._vertexBuffers[e])},e.prototype.setVerticesBuffer=function(e,t){void 0===t&&(t=null);var n=e.getKind();if(this._vertexBuffers[n]&&this._vertexBuffers[n].dispose(),this._vertexBuffers[n]=e,n===o.b.PositionKind){var r=e.getData();null!=t?this._totalVertices=t:null!=r&&(this._totalVertices=r.length/(e.byteStride/4)),this._updateExtend(r),this._resetPointsArrayCache();for(var i=this._meshes,a=i.length,s=0;s<a;s++){var l=i[s];l._boundingInfo=new u.a(this._extend.minimum,this._extend.maximum),l._createGlobalSubMesh(!1),l.computeWorldMatrix(!0)}}this.notifyUpdate(n),this._vertexArrayObjects&&(this._disposeVertexArrayObjects(),this._vertexArrayObjects={})},e.prototype.updateVerticesDataDirectly=function(e,t,n,r){void 0===r&&(r=!1);var i=this.getVertexBuffer(e);i&&(i.updateDirectly(t,n,r),this.notifyUpdate(e))},e.prototype.updateVerticesData=function(e,t,n){void 0===n&&(n=!1);var r=this.getVertexBuffer(e);r&&(r.update(t),e===o.b.PositionKind&&this._updateBoundingInfo(n,t),this.notifyUpdate(e))},e.prototype._updateBoundingInfo=function(e,t){if(e&&this._updateExtend(t),this._resetPointsArrayCache(),e)for(var n=0,r=this._meshes;n<r.length;n++){var i=r[n];i._boundingInfo?i._boundingInfo.reConstruct(this._extend.minimum,this._extend.maximum):i._boundingInfo=new u.a(this._extend.minimum,this._extend.maximum);for(var o=0,a=i.subMeshes;o<a.length;o++)a[o].refreshBoundingInfo()}},e.prototype._bind=function(e,t){if(e){void 0===t&&(t=this._indexBuffer);var n=this.getVertexBuffers();n&&(t==this._indexBuffer&&this._vertexArrayObjects?(this._vertexArrayObjects[e.key]||(this._vertexArrayObjects[e.key]=this._engine.recordVertexArrayObject(n,t,e)),this._engine.bindVertexArrayObject(this._vertexArrayObjects[e.key],t)):this._engine.bindBuffers(n,t,e))}},e.prototype.getTotalVertices=function(){return this.isReady()?this._totalVertices:0},e.prototype.getVerticesData=function(e,t,n){var r=this.getVertexBuffer(e);if(!r)return null;var i=r.getData();if(!i)return null;var a=r.getSize()*o.b.GetTypeByteLength(r.type),s=this._totalVertices*r.getSize();if(r.type!==o.b.FLOAT||r.byteStride!==a){var u=[];return r.forEach(s,function(e){return u.push(e)}),u}if(!(i instanceof Array||i instanceof Float32Array)||0!==r.byteOffset||i.length!==s){if(i instanceof Array){var l=r.byteOffset/4;return c.h.Slice(i,l,l+s)}if(i instanceof ArrayBuffer)return new Float32Array(i,r.byteOffset,s);if(l=i.byteOffset+r.byteOffset,n||t&&1!==this._meshes.length){var h=new Float32Array(s),d=new Float32Array(i.buffer,l,s);return h.set(d),h}return new Float32Array(i.buffer,l,s)}return n||t&&1!==this._meshes.length?c.h.Slice(i):i},e.prototype.isVertexBufferUpdatable=function(e){var t=this._vertexBuffers[e];return!!t&&t.isUpdatable()},e.prototype.getVertexBuffer=function(e){return this.isReady()?this._vertexBuffers[e]:null},e.prototype.getVertexBuffers=function(){return this.isReady()?this._vertexBuffers:null},e.prototype.isVerticesDataPresent=function(e){return this._vertexBuffers?void 0!==this._vertexBuffers[e]:!!this._delayInfo&&-1!==this._delayInfo.indexOf(e)},e.prototype.getVerticesDataKinds=function(){var e,t=[];if(!this._vertexBuffers&&this._delayInfo)for(e in this._delayInfo)t.push(e);else for(e in this._vertexBuffers)t.push(e);return t},e.prototype.updateIndices=function(e,t,n){if(void 0===n&&(n=!1),this._indexBuffer)if(this._indexBufferIsUpdatable){var r=e.length!==this._indices.length;if(n||(this._indices=e.slice()),this._engine.updateDynamicIndexBuffer(this._indexBuffer,e,t),r)for(var i=0,o=this._meshes;i<o.length;i++)o[i]._createGlobalSubMesh(!0)}else this.setIndices(e,null,!0)},e.prototype.setIndices=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1),this._indexBuffer&&this._engine._releaseBuffer(this._indexBuffer),this._disposeVertexArrayObjects(),this._indices=e,this._indexBufferIsUpdatable=n,0!==this._meshes.length&&this._indices&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices,n)),null!=t&&(this._totalVertices=t);for(var r=0,i=this._meshes;r<i.length;r++)i[r]._createGlobalSubMesh(!0);this.notifyUpdate()},e.prototype.getTotalIndices=function(){return this.isReady()?this._indices.length:0},e.prototype.getIndices=function(e,t){if(!this.isReady())return null;var n=this._indices;if(t||e&&1!==this._meshes.length){for(var r=n.length,i=[],o=0;o<r;o++)i.push(n[o]);return i}return n},e.prototype.getIndexBuffer=function(){return this.isReady()?this._indexBuffer:null},e.prototype._releaseVertexArrayObject=function(e){void 0===e&&(e=null),e&&this._vertexArrayObjects&&this._vertexArrayObjects[e.key]&&(this._engine.releaseVertexArrayObject(this._vertexArrayObjects[e.key]),delete this._vertexArrayObjects[e.key])},e.prototype.releaseForMesh=function(e,t){var n=this._meshes,r=n.indexOf(e);-1!==r&&(n.splice(r,1),e._geometry=null,0===n.length&&t&&this.dispose())},e.prototype.applyToMesh=function(e){if(e._geometry!==this){var t=e._geometry;t&&t.releaseForMesh(e);var n=this._meshes;e._geometry=this,this._scene.pushGeometry(this),n.push(e),this.isReady()?this._applyToMesh(e):e._boundingInfo=this._boundingInfo}},e.prototype._updateExtend=function(e){void 0===e&&(e=null),e||(e=this.getVerticesData(o.b.PositionKind)),this._extend=c.h.ExtractMinAndMax(e,0,this._totalVertices,this.boundingBias,3)},e.prototype._applyToMesh=function(e){var t=this._meshes.length;for(var n in this._vertexBuffers){1===t&&this._vertexBuffers[n].create();var r=this._vertexBuffers[n].getBuffer();r&&(r.references=t),n===o.b.PositionKind&&(this._extend||this._updateExtend(),e._boundingInfo=new u.a(this._extend.minimum,this._extend.maximum),e._createGlobalSubMesh(!1),e._updateBoundingInfo())}1===t&&this._indices&&this._indices.length>0&&(this._indexBuffer=this._engine.createIndexBuffer(this._indices)),this._indexBuffer&&(this._indexBuffer.references=t),e._syncGeometryWithMorphTargetManager(),e.synchronizeInstances()},e.prototype.notifyUpdate=function(e){this.onGeometryUpdated&&this.onGeometryUpdated(this,e);for(var t=0,n=this._meshes;t<n.length;t++)n[t]._markSubMeshesAsAttributesDirty()},e.prototype.load=function(e,t){this.delayLoadState!==l.a.DELAYLOADSTATE_LOADING&&(this.isReady()?t&&t():(this.delayLoadState=l.a.DELAYLOADSTATE_LOADING,this._queueLoad(e,t)))},e.prototype._queueLoad=function(e,t){var n=this;this.delayLoadingFile&&(e._addPendingData(this),e._loadFile(this.delayLoadingFile,function(r){if(n._delayLoadingFunction){n._delayLoadingFunction(JSON.parse(r),n),n.delayLoadState=l.a.DELAYLOADSTATE_LOADED,n._delayInfo=[],e._removePendingData(n);for(var i=n._meshes,o=i.length,a=0;a<o;a++)n._applyToMesh(i[a]);t&&t()}},void 0,!0))},e.prototype.toLeftHanded=function(){var e=this.getIndices(!1);if(null!=e&&e.length>0){for(var t=0;t<e.length;t+=3){var n=e[t+0];e[t+0]=e[t+2],e[t+2]=n}this.setIndices(e)}var r=this.getVerticesData(o.b.PositionKind,!1);if(null!=r&&r.length>0){for(t=0;t<r.length;t+=3)r[t+2]=-r[t+2];this.setVerticesData(o.b.PositionKind,r,!1)}var i=this.getVerticesData(o.b.NormalKind,!1);if(null!=i&&i.length>0){for(t=0;t<i.length;t+=3)i[t+2]=-i[t+2];this.setVerticesData(o.b.NormalKind,i,!1)}},e.prototype._resetPointsArrayCache=function(){this._positions=null},e.prototype._generatePointsArray=function(){if(this._positions)return!0;var e=this.getVerticesData(o.b.PositionKind);if(!e||0===e.length)return!1;this._positions=[];for(var t=0;t<e.length;t+=3)this._positions.push(r.x.FromArray(e,t));return!0},e.prototype.isDisposed=function(){return this._isDisposed},e.prototype._disposeVertexArrayObjects=function(){if(this._vertexArrayObjects){for(var e in this._vertexArrayObjects)this._engine.releaseVertexArrayObject(this._vertexArrayObjects[e]);this._vertexArrayObjects={}}},e.prototype.dispose=function(){var e,t=this._meshes,n=t.length;for(e=0;e<n;e++)this.releaseForMesh(t[e]);for(var r in this._meshes=[],this._disposeVertexArrayObjects(),this._vertexBuffers)this._vertexBuffers[r].dispose();this._vertexBuffers={},this._totalVertices=0,this._indexBuffer&&this._engine._releaseBuffer(this._indexBuffer),this._indexBuffer=null,this._indices=[],this.delayLoadState=l.a.DELAYLOADSTATE_NONE,this.delayLoadingFile=null,this._delayLoadingFunction=null,this._delayInfo=[],this._boundingInfo=null,this._scene.removeGeometry(this),this._isDisposed=!0},e.prototype.copy=function(t){var n=new i.a;n.indices=[];var r=this.getIndices();if(r)for(var o=0;o<r.length;o++)n.indices.push(r[o]);var a,s=!1,l=!1;for(a in this._vertexBuffers){var c=this.getVerticesData(a);if(c&&(c instanceof Float32Array?n.set(new Float32Array(c),a):n.set(c.slice(0),a),!l)){var h=this.getVertexBuffer(a);h&&(l=!(s=h.isUpdatable()))}}var d=new e(t,this._scene,n,s);for(a in d.delayLoadState=this.delayLoadState,d.delayLoadingFile=this.delayLoadingFile,d._delayLoadingFunction=this._delayLoadingFunction,this._delayInfo)d._delayInfo=d._delayInfo||[],d._delayInfo.push(a);return d._boundingInfo=new u.a(this._extend.minimum,this._extend.maximum),d},e.prototype.serialize=function(){var e={};return e.id=this.id,e.updatable=this._updatable,h.a&&h.a.HasTags(this)&&(e.tags=h.a.GetTags(this)),e},e.prototype.toNumberArray=function(e){return Array.isArray(e)?e:Array.prototype.slice.call(e)},e.prototype.serializeVerticeData=function(){var e=this.serialize();return this.isVerticesDataPresent(o.b.PositionKind)&&(e.positions=this.toNumberArray(this.getVerticesData(o.b.PositionKind)),this.isVertexBufferUpdatable(o.b.PositionKind)&&(e.positions._updatable=!0)),this.isVerticesDataPresent(o.b.NormalKind)&&(e.normals=this.toNumberArray(this.getVerticesData(o.b.NormalKind)),this.isVertexBufferUpdatable(o.b.NormalKind)&&(e.normals._updatable=!0)),this.isVerticesDataPresent(o.b.TangentKind)&&(e.tangets=this.toNumberArray(this.getVerticesData(o.b.TangentKind)),this.isVertexBufferUpdatable(o.b.TangentKind)&&(e.tangets._updatable=!0)),this.isVerticesDataPresent(o.b.UVKind)&&(e.uvs=this.toNumberArray(this.getVerticesData(o.b.UVKind)),this.isVertexBufferUpdatable(o.b.UVKind)&&(e.uvs._updatable=!0)),this.isVerticesDataPresent(o.b.UV2Kind)&&(e.uv2s=this.toNumberArray(this.getVerticesData(o.b.UV2Kind)),this.isVertexBufferUpdatable(o.b.UV2Kind)&&(e.uv2s._updatable=!0)),this.isVerticesDataPresent(o.b.UV3Kind)&&(e.uv3s=this.toNumberArray(this.getVerticesData(o.b.UV3Kind)),this.isVertexBufferUpdatable(o.b.UV3Kind)&&(e.uv3s._updatable=!0)),this.isVerticesDataPresent(o.b.UV4Kind)&&(e.uv4s=this.toNumberArray(this.getVerticesData(o.b.UV4Kind)),this.isVertexBufferUpdatable(o.b.UV4Kind)&&(e.uv4s._updatable=!0)),this.isVerticesDataPresent(o.b.UV5Kind)&&(e.uv5s=this.toNumberArray(this.getVerticesData(o.b.UV5Kind)),this.isVertexBufferUpdatable(o.b.UV5Kind)&&(e.uv5s._updatable=!0)),this.isVerticesDataPresent(o.b.UV6Kind)&&(e.uv6s=this.toNumberArray(this.getVerticesData(o.b.UV6Kind)),this.isVertexBufferUpdatable(o.b.UV6Kind)&&(e.uv6s._updatable=!0)),this.isVerticesDataPresent(o.b.ColorKind)&&(e.colors=this.toNumberArray(this.getVerticesData(o.b.ColorKind)),this.isVertexBufferUpdatable(o.b.ColorKind)&&(e.colors._updatable=!0)),this.isVerticesDataPresent(o.b.MatricesIndicesKind)&&(e.matricesIndices=this.toNumberArray(this.getVerticesData(o.b.MatricesIndicesKind)),e.matricesIndices._isExpanded=!0,this.isVertexBufferUpdatable(o.b.MatricesIndicesKind)&&(e.matricesIndices._updatable=!0)),this.isVerticesDataPresent(o.b.MatricesWeightsKind)&&(e.matricesWeights=this.toNumberArray(this.getVerticesData(o.b.MatricesWeightsKind)),this.isVertexBufferUpdatable(o.b.MatricesWeightsKind)&&(e.matricesWeights._updatable=!0)),e.indices=this.toNumberArray(this.getIndices()),e},e.ExtractFromMesh=function(e,t){var n=e._geometry;return n?n.copy(t):null},e.RandomId=function(){return c.h.RandomId()},e._ImportGeometry=function(t,n){var i=n.getScene(),s=t.geometryId;if(s){var u=i.getGeometryByID(s);u&&u.applyToMesh(n)}else if(t instanceof ArrayBuffer){var l=n._binaryInfo;if(l.positionsAttrDesc&&l.positionsAttrDesc.count>0){var c=new Float32Array(t,l.positionsAttrDesc.offset,l.positionsAttrDesc.count);n.setVerticesData(o.b.PositionKind,c,!1)}if(l.normalsAttrDesc&&l.normalsAttrDesc.count>0){var h=new Float32Array(t,l.normalsAttrDesc.offset,l.normalsAttrDesc.count);n.setVerticesData(o.b.NormalKind,h,!1)}if(l.tangetsAttrDesc&&l.tangetsAttrDesc.count>0){var d=new Float32Array(t,l.tangetsAttrDesc.offset,l.tangetsAttrDesc.count);n.setVerticesData(o.b.TangentKind,d,!1)}if(l.uvsAttrDesc&&l.uvsAttrDesc.count>0){var f=new Float32Array(t,l.uvsAttrDesc.offset,l.uvsAttrDesc.count);n.setVerticesData(o.b.UVKind,f,!1)}if(l.uvs2AttrDesc&&l.uvs2AttrDesc.count>0){var p=new Float32Array(t,l.uvs2AttrDesc.offset,l.uvs2AttrDesc.count);n.setVerticesData(o.b.UV2Kind,p,!1)}if(l.uvs3AttrDesc&&l.uvs3AttrDesc.count>0){var _=new Float32Array(t,l.uvs3AttrDesc.offset,l.uvs3AttrDesc.count);n.setVerticesData(o.b.UV3Kind,_,!1)}if(l.uvs4AttrDesc&&l.uvs4AttrDesc.count>0){var m=new Float32Array(t,l.uvs4AttrDesc.offset,l.uvs4AttrDesc.count);n.setVerticesData(o.b.UV4Kind,m,!1)}if(l.uvs5AttrDesc&&l.uvs5AttrDesc.count>0){var g=new Float32Array(t,l.uvs5AttrDesc.offset,l.uvs5AttrDesc.count);n.setVerticesData(o.b.UV5Kind,g,!1)}if(l.uvs6AttrDesc&&l.uvs6AttrDesc.count>0){var v=new Float32Array(t,l.uvs6AttrDesc.offset,l.uvs6AttrDesc.count);n.setVerticesData(o.b.UV6Kind,v,!1)}if(l.colorsAttrDesc&&l.colorsAttrDesc.count>0){var y=new Float32Array(t,l.colorsAttrDesc.offset,l.colorsAttrDesc.count);n.setVerticesData(o.b.ColorKind,y,!1,l.colorsAttrDesc.stride)}if(l.matricesIndicesAttrDesc&&l.matricesIndicesAttrDesc.count>0){for(var b=new Int32Array(t,l.matricesIndicesAttrDesc.offset,l.matricesIndicesAttrDesc.count),T=[],E=0;E<b.length;E++){var x=b[E];T.push(255&x),T.push((65280&x)>>8),T.push((16711680&x)>>16),T.push(x>>24)}n.setVerticesData(o.b.MatricesIndicesKind,T,!1)}if(l.matricesWeightsAttrDesc&&l.matricesWeightsAttrDesc.count>0){var M=new Float32Array(t,l.matricesWeightsAttrDesc.offset,l.matricesWeightsAttrDesc.count);n.setVerticesData(o.b.MatricesWeightsKind,M,!1)}if(l.indicesAttrDesc&&l.indicesAttrDesc.count>0){var A=new Int32Array(t,l.indicesAttrDesc.offset,l.indicesAttrDesc.count);n.setIndices(A,null)}if(l.subMeshesAttrDesc&&l.subMeshesAttrDesc.count>0){var S=new Int32Array(t,l.subMeshesAttrDesc.offset,5*l.subMeshesAttrDesc.count);for(n.subMeshes=[],E=0;E<l.subMeshesAttrDesc.count;E++)a.b.AddToMesh(S[5*E+0],S[5*E+1],S[5*E+2],S[5*E+3],S[5*E+4],n)}}else if(t.positions&&t.normals&&t.indices){if(n.setVerticesData(o.b.PositionKind,t.positions,t.positions._updatable),n.setVerticesData(o.b.NormalKind,t.normals,t.normals._updatable),t.tangents&&n.setVerticesData(o.b.TangentKind,t.tangents,t.tangents._updatable),t.uvs&&n.setVerticesData(o.b.UVKind,t.uvs,t.uvs._updatable),t.uvs2&&n.setVerticesData(o.b.UV2Kind,t.uvs2,t.uvs2._updatable),t.uvs3&&n.setVerticesData(o.b.UV3Kind,t.uvs3,t.uvs3._updatable),t.uvs4&&n.setVerticesData(o.b.UV4Kind,t.uvs4,t.uvs4._updatable),t.uvs5&&n.setVerticesData(o.b.UV5Kind,t.uvs5,t.uvs5._updatable),t.uvs6&&n.setVerticesData(o.b.UV6Kind,t.uvs6,t.uvs6._updatable),t.colors&&n.setVerticesData(o.b.ColorKind,r.f.CheckColors4(t.colors,t.positions.length/3),t.colors._updatable),t.matricesIndices)if(t.matricesIndices._isExpanded)delete t.matricesIndices._isExpanded,n.setVerticesData(o.b.MatricesIndicesKind,t.matricesIndices,t.matricesIndices._updatable);else{for(T=[],E=0;E<t.matricesIndices.length;E++){var C=t.matricesIndices[E];T.push(255&C),T.push((65280&C)>>8),T.push((16711680&C)>>16),T.push(C>>24)}n.setVerticesData(o.b.MatricesIndicesKind,T,t.matricesIndices._updatable)}if(t.matricesIndicesExtra)if(t.matricesIndicesExtra._isExpanded)delete t.matricesIndices._isExpanded,n.setVerticesData(o.b.MatricesIndicesExtraKind,t.matricesIndicesExtra,t.matricesIndicesExtra._updatable);else{for(T=[],E=0;E<t.matricesIndicesExtra.length;E++)T.push(255&(C=t.matricesIndicesExtra[E])),T.push((65280&C)>>8),T.push((16711680&C)>>16),T.push(C>>24);n.setVerticesData(o.b.MatricesIndicesExtraKind,T,t.matricesIndicesExtra._updatable)}t.matricesWeights&&(e._CleanMatricesWeights(t,n),n.setVerticesData(o.b.MatricesWeightsKind,t.matricesWeights,t.matricesWeights._updatable)),t.matricesWeightsExtra&&n.setVerticesData(o.b.MatricesWeightsExtraKind,t.matricesWeightsExtra,t.matricesWeights._updatable),n.setIndices(t.indices,null)}if(t.subMeshes){n.subMeshes=[];for(var P=0;P<t.subMeshes.length;P++){var R=t.subMeshes[P];a.b.AddToMesh(R.materialIndex,R.verticesStart,R.verticesCount,R.indexStart,R.indexCount,n)}}n._shouldGenerateFlatShading&&(n.convertToFlatShadedMesh(),delete n._shouldGenerateFlatShading),n.computeWorldMatrix(!0),i.onMeshImportedObservable.notifyObservers(n)},e._CleanMatricesWeights=function(e,t){if(s.a.CleanBoneMatrixWeights){var n=0;if(e.skeletonId>-1){var r=t.getScene().getLastSkeletonByID(e.skeletonId);if(r){n=r.bones.length;for(var i=t.getVerticesData(o.b.MatricesIndicesKind),a=t.getVerticesData(o.b.MatricesIndicesExtraKind),u=e.matricesWeights,l=e.matricesWeightsExtra,c=e.numBoneInfluencer,h=u.length,d=0;d<h;d+=4){for(var f=0,p=-1,_=0;_<4;_++)f+=m=u[d+_],m<.001&&p<0&&(p=_);if(l)for(_=0;_<4;_++){var m;f+=m=l[d+_],m<.001&&p<0&&(p=_+4)}if((p<0||p>c-1)&&(p=c-1),f>.001){var g=1/f;for(_=0;_<4;_++)u[d+_]*=g;if(l)for(_=0;_<4;_++)l[d+_]*=g}else p>=4?(l[d+p-4]=1-f,a[d+p-4]=n):(u[d+p]=1-f,i[d+p]=n)}t.setVerticesData(o.b.MatricesIndicesKind,i),e.matricesWeightsExtra&&t.setVerticesData(o.b.MatricesIndicesExtraKind,a)}}}},e.Parse=function(t,n,a){if(n.getGeometryByID(t.id))return null;var s=new e(t.id,n,void 0,t.updatable);return h.a&&h.a.AddTagsTo(s,t.tags),t.delayLoadingFile?(s.delayLoadState=l.a.DELAYLOADSTATE_NOTLOADED,s.delayLoadingFile=a+t.delayLoadingFile,s._boundingInfo=new u.a(r.x.FromArray(t.boundingBoxMinimum),r.x.FromArray(t.boundingBoxMaximum)),s._delayInfo=[],t.hasUVs&&s._delayInfo.push(o.b.UVKind),t.hasUVs2&&s._delayInfo.push(o.b.UV2Kind),t.hasUVs3&&s._delayInfo.push(o.b.UV3Kind),t.hasUVs4&&s._delayInfo.push(o.b.UV4Kind),t.hasUVs5&&s._delayInfo.push(o.b.UV5Kind),t.hasUVs6&&s._delayInfo.push(o.b.UV6Kind),t.hasColors&&s._delayInfo.push(o.b.ColorKind),t.hasMatricesIndices&&s._delayInfo.push(o.b.MatricesIndicesKind),t.hasMatricesWeights&&s._delayInfo.push(o.b.MatricesWeightsKind),s._delayLoadingFunction=i.a.ImportVertexData):i.a.ImportVertexData(t,s),n.pushGeometry(s,!0),s},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(1),i=n(8),o=n(0),a=n(42),s=n(53),u=n(54),l=n(48),c=n(41),h=n(33),d=function(e){function t(n,r,a){void 0===r&&(r=o.e.Gray()),void 0===a&&(a=c.a.DefaultUtilityLayer);var s=e.call(this,a)||this;s._pointerObserver=null,s.snapDistance=0,s.onSnapObservable=new i.c;var l=new h.a("",a.utilityLayerScene);l.diffuseColor=r,l.specularColor=r.subtract(new o.e(.1,.1,.1));var d=new h.a("",a.utilityLayerScene);d.diffuseColor=r.add(new o.e(.3,.3,.3));var f=t._CreateArrow(a.utilityLayerScene,l);f.lookAt(s._rootMesh.position.add(n)),f.scaling.scaleInPlace(1/3),f.parent=s._rootMesh;var p=0,_=new o.x,m={snapDistance:0};s.dragBehavior=new u.a({dragAxis:n}),s.dragBehavior.moveAttached=!1,s._rootMesh.addBehavior(s.dragBehavior);var g=new o.x,v=new o.j;s.dragBehavior.onDragObservable.add(function(e){if(s.attachedMesh)if(s.attachedMesh.parent?(s.attachedMesh.parent.computeWorldMatrix().invertToRef(v),v.setTranslationFromFloats(0,0,0),o.x.TransformCoordinatesToRef(e.delta,v,g)):g.copyFrom(e.delta),0==s.snapDistance)s.attachedMesh.position.addInPlace(g);else if(p+=e.dragDistance,Math.abs(p)>s.snapDistance){var t=Math.floor(Math.abs(p)/s.snapDistance);p%=s.snapDistance,g.normalizeToRef(_),_.scaleInPlace(s.snapDistance*t),s.attachedMesh.position.addInPlace(_),m.snapDistance=s.snapDistance*t,s.onSnapObservable.notifyObservers(m)}}),s._pointerObserver=a.utilityLayerScene.onPointerObservable.add(function(e){if(!s._customMeshSet){var t=e.pickInfo&&-1!=s._rootMesh.getChildMeshes().indexOf(e.pickInfo.pickedMesh)?d:l;s._rootMesh.getChildMeshes().forEach(function(e){e.material=t,e.color&&(e.color=t.diffuseColor)})}});var y=a._getSharedGizmoLight();return y.includedOnlyMeshes=y.includedOnlyMeshes.concat(s._rootMesh.getChildMeshes(!1)),s}return r.d(t,e),t._CreateArrow=function(e,t){var n=new a.a("arrow",e),r=s.a.CreateCylinder("cylinder",{diameterTop:0,height:.075,diameterBottom:.0375,tessellation:96},e),i=s.a.CreateCylinder("cylinder",{diameterTop:.005,height:.275,diameterBottom:.005,tessellation:96},e);return i.material=t,r.parent=n,i.parent=n,r.material=t,r.rotation.x=Math.PI/2,r.position.z+=.3,i.position.z+=.1375,i.rotation.x=Math.PI/2,n},t._CreateArrowInstance=function(e,t){for(var n=new a.a("arrow",e),r=0,i=t.getChildMeshes();r<i.length;r++){var o=i[r];o.createInstance(o.name).parent=n}return n},t.prototype._attachedMeshChanged=function(e){this.dragBehavior&&(this.dragBehavior.enabled=!!e)},t.prototype.dispose=function(){this.onSnapObservable.clear(),this.gizmoLayer.utilityLayerScene.onPointerObservable.remove(this._pointerObserver),this.dragBehavior.detach(),e.prototype.dispose.call(this)},t}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.FilesToLoad={},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){this._xhr=new XMLHttpRequest}return e.prototype._injectCustomRequestHeaders=function(){for(var t in e.CustomRequestHeaders){var n=e.CustomRequestHeaders[t];n&&this._xhr.setRequestHeader(t,n)}},Object.defineProperty(e.prototype,"onprogress",{get:function(){return this._xhr.onprogress},set:function(e){this._xhr.onprogress=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this._xhr.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this._xhr.status},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusText",{get:function(){return this._xhr.statusText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"response",{get:function(){return this._xhr.response},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseURL",{get:function(){return this._xhr.responseURL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseText",{get:function(){return this._xhr.responseText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"responseType",{get:function(){return this._xhr.responseType},set:function(e){this._xhr.responseType=e},enumerable:!0,configurable:!0}),e.prototype.addEventListener=function(e,t,n){this._xhr.addEventListener(e,t,n)},e.prototype.removeEventListener=function(e,t,n){this._xhr.removeEventListener(e,t,n)},e.prototype.abort=function(){this._xhr.abort()},e.prototype.send=function(t){e.CustomRequestHeaders&&this._injectCustomRequestHeaders(),this._xhr.send(t)},e.prototype.open=function(t,n){for(var r=0,i=e.CustomRequestModifiers;r<i.length;r++)(0,i[r])(this._xhr);return this._xhr.open(t,n,!0)},e.CustomRequestHeaders={},e.CustomRequestModifiers=new Array,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){this._count=0,this._data={}}return e.prototype.copyFrom=function(e){var t=this;this.clear(),e.forEach(function(e,n){return t.add(e,n)})},e.prototype.get=function(e){var t=this._data[e];if(void 0!==t)return t},e.prototype.getOrAddWithFactory=function(e,t){var n=this.get(e);return void 0!==n?n:((n=t(e))&&this.add(e,n),n)},e.prototype.getOrAdd=function(e,t){var n=this.get(e);return void 0!==n?n:(this.add(e,t),t)},e.prototype.contains=function(e){return void 0!==this._data[e]},e.prototype.add=function(e,t){return void 0===this._data[e]&&(this._data[e]=t,++this._count,!0)},e.prototype.set=function(e,t){return void 0!==this._data[e]&&(this._data[e]=t,!0)},e.prototype.getAndRemove=function(e){var t=this.get(e);return void 0!==t?(delete this._data[e],--this._count,t):null},e.prototype.remove=function(e){return!!this.contains(e)&&(delete this._data[e],--this._count,!0)},e.prototype.clear=function(){this._data={},this._count=0},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.forEach=function(e){for(var t in this._data)e(t,this._data[t])},e.prototype.first=function(e){for(var t in this._data){var n=e(t,this._data[t]);if(n)return n}return null},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return l});var r=n(0),i=[Math.sqrt(1/(4*Math.PI)),-Math.sqrt(3/(4*Math.PI)),Math.sqrt(3/(4*Math.PI)),-Math.sqrt(3/(4*Math.PI)),Math.sqrt(15/(4*Math.PI)),-Math.sqrt(15/(4*Math.PI)),Math.sqrt(5/(16*Math.PI)),-Math.sqrt(15/(4*Math.PI)),Math.sqrt(15/(16*Math.PI))],o=[function(e){return 1},function(e){return e.y},function(e){return e.z},function(e){return e.x},function(e){return e.x*e.y},function(e){return e.y*e.z},function(e){return 3*e.z*e.z-1},function(e){return e.x*e.z},function(e){return e.x*e.x-e.y*e.y}],a=function(e,t){return i[e]*o[e](t)},s=[Math.PI,2*Math.PI/3,2*Math.PI/3,2*Math.PI/3,Math.PI/4,Math.PI/4,Math.PI/4,Math.PI/4,Math.PI/4],u=function(){function e(){this.preScaled=!1,this.l00=r.x.Zero(),this.l1_1=r.x.Zero(),this.l10=r.x.Zero(),this.l11=r.x.Zero(),this.l2_2=r.x.Zero(),this.l2_1=r.x.Zero(),this.l20=r.x.Zero(),this.l21=r.x.Zero(),this.l22=r.x.Zero()}return e.prototype.addLight=function(e,t,n){var i=new r.x(t.r,t.g,t.b).scale(n);this.l00=this.l00.add(i.scale(a(0,e))),this.l1_1=this.l1_1.add(i.scale(a(1,e))),this.l10=this.l10.add(i.scale(a(2,e))),this.l11=this.l11.add(i.scale(a(3,e))),this.l2_2=this.l2_2.add(i.scale(a(4,e))),this.l2_1=this.l2_1.add(i.scale(a(5,e))),this.l20=this.l20.add(i.scale(a(6,e))),this.l21=this.l21.add(i.scale(a(7,e))),this.l22=this.l22.add(i.scale(a(8,e)))},e.prototype.scaleInPlace=function(e){this.l00.scaleInPlace(e),this.l1_1.scaleInPlace(e),this.l10.scaleInPlace(e),this.l11.scaleInPlace(e),this.l2_2.scaleInPlace(e),this.l2_1.scaleInPlace(e),this.l20.scaleInPlace(e),this.l21.scaleInPlace(e),this.l22.scaleInPlace(e)},e.prototype.convertIncidentRadianceToIrradiance=function(){this.l00.scaleInPlace(s[0]),this.l1_1.scaleInPlace(s[1]),this.l10.scaleInPlace(s[2]),this.l11.scaleInPlace(s[3]),this.l2_2.scaleInPlace(s[4]),this.l2_1.scaleInPlace(s[5]),this.l20.scaleInPlace(s[6]),this.l21.scaleInPlace(s[7]),this.l22.scaleInPlace(s[8])},e.prototype.convertIrradianceToLambertianRadiance=function(){this.scaleInPlace(1/Math.PI)},e.prototype.preScaleForRendering=function(){this.preScaled=!0,this.l00.scaleInPlace(i[0]),this.l1_1.scaleInPlace(i[1]),this.l10.scaleInPlace(i[2]),this.l11.scaleInPlace(i[3]),this.l2_2.scaleInPlace(i[4]),this.l2_1.scaleInPlace(i[5]),this.l20.scaleInPlace(i[6]),this.l21.scaleInPlace(i[7]),this.l22.scaleInPlace(i[8])},e.FromArray=function(t){var n=new e;return r.x.FromArrayToRef(t[0],0,n.l00),r.x.FromArrayToRef(t[1],0,n.l1_1),r.x.FromArrayToRef(t[2],0,n.l10),r.x.FromArrayToRef(t[3],0,n.l11),r.x.FromArrayToRef(t[4],0,n.l2_2),r.x.FromArrayToRef(t[5],0,n.l2_1),r.x.FromArrayToRef(t[6],0,n.l20),r.x.FromArrayToRef(t[7],0,n.l21),r.x.FromArrayToRef(t[8],0,n.l22),n},e.FromPolynomial=function(t){var n=new e;return n.l00=t.xx.scale(.376127).add(t.yy.scale(.376127)).add(t.zz.scale(.376126)),n.l1_1=t.y.scale(.977204),n.l10=t.z.scale(.977204),n.l11=t.x.scale(.977204),n.l2_2=t.xy.scale(1.16538),n.l2_1=t.yz.scale(1.16538),n.l20=t.zz.scale(1.34567).subtract(t.xx.scale(.672834)).subtract(t.yy.scale(.672834)),n.l21=t.zx.scale(1.16538),n.l22=t.xx.scale(1.16538).subtract(t.yy.scale(1.16538)),n.l1_1.scaleInPlace(-1),n.l11.scaleInPlace(-1),n.l2_1.scaleInPlace(-1),n.l21.scaleInPlace(-1),n.scaleInPlace(Math.PI),n},e}(),l=function(){function e(){this.x=r.x.Zero(),this.y=r.x.Zero(),this.z=r.x.Zero(),this.xx=r.x.Zero(),this.yy=r.x.Zero(),this.zz=r.x.Zero(),this.xy=r.x.Zero(),this.yz=r.x.Zero(),this.zx=r.x.Zero()}return Object.defineProperty(e.prototype,"preScaledHarmonics",{get:function(){return this._harmonics||(this._harmonics=u.FromPolynomial(this)),this._harmonics.preScaled||this._harmonics.preScaleForRendering(),this._harmonics},enumerable:!0,configurable:!0}),e.prototype.addAmbient=function(e){var t=new r.x(e.r,e.g,e.b);this.xx=this.xx.add(t),this.yy=this.yy.add(t),this.zz=this.zz.add(t)},e.prototype.scaleInPlace=function(e){this.x.scaleInPlace(e),this.y.scaleInPlace(e),this.z.scaleInPlace(e),this.xx.scaleInPlace(e),this.yy.scaleInPlace(e),this.zz.scaleInPlace(e),this.yz.scaleInPlace(e),this.zx.scaleInPlace(e),this.xy.scaleInPlace(e)},e.FromHarmonics=function(t){var n=new e;return n._harmonics=t,n.x=t.l11.scale(1.02333).scale(-1),n.y=t.l1_1.scale(1.02333).scale(-1),n.z=t.l10.scale(1.02333),n.xx=t.l00.scale(.886277).subtract(t.l20.scale(.247708)).add(t.l22.scale(.429043)),n.yy=t.l00.scale(.886277).subtract(t.l20.scale(.247708)).subtract(t.l22.scale(.429043)),n.zz=t.l00.scale(.886277).add(t.l20.scale(.495417)),n.yz=t.l2_1.scale(.858086).scale(-1),n.zx=t.l21.scale(.858086).scale(-1),n.xy=t.l2_2.scale(.858086),n.scaleInPlace(1/Math.PI),n},e.FromArray=function(t){var n=new e;return r.x.FromArrayToRef(t[0],0,n.x),r.x.FromArrayToRef(t[1],0,n.y),r.x.FromArrayToRef(t[2],0,n.z),r.x.FromArrayToRef(t[3],0,n.xx),r.x.FromArrayToRef(t[4],0,n.yy),r.x.FromArrayToRef(t[5],0,n.zz),r.x.FromArrayToRef(t[6],0,n.yz),r.x.FromArrayToRef(t[7],0,n.zx),r.x.FromArrayToRef(t[8],0,n.xy),n},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(6),i=function(){function e(e,t,n){this._engine=e,this._noUBO=!e.supportsUniformBuffers,this._dynamic=n,this._data=t||[],this._uniformLocations={},this._uniformSizes={},this._uniformLocationPointer=0,this._needSync=!1,this._noUBO?(this.updateMatrix3x3=this._updateMatrix3x3ForEffect,this.updateMatrix2x2=this._updateMatrix2x2ForEffect,this.updateFloat=this._updateFloatForEffect,this.updateFloat2=this._updateFloat2ForEffect,this.updateFloat3=this._updateFloat3ForEffect,this.updateFloat4=this._updateFloat4ForEffect,this.updateMatrix=this._updateMatrixForEffect,this.updateVector3=this._updateVector3ForEffect,this.updateVector4=this._updateVector4ForEffect,this.updateColor3=this._updateColor3ForEffect,this.updateColor4=this._updateColor4ForEffect):(this._engine._uniformBuffers.push(this),this.updateMatrix3x3=this._updateMatrix3x3ForUniform,this.updateMatrix2x2=this._updateMatrix2x2ForUniform,this.updateFloat=this._updateFloatForUniform,this.updateFloat2=this._updateFloat2ForUniform,this.updateFloat3=this._updateFloat3ForUniform,this.updateFloat4=this._updateFloat4ForUniform,this.updateMatrix=this._updateMatrixForUniform,this.updateVector3=this._updateVector3ForUniform,this.updateVector4=this._updateVector4ForUniform,this.updateColor3=this._updateColor3ForUniform,this.updateColor4=this._updateColor4ForUniform)}return Object.defineProperty(e.prototype,"useUbo",{get:function(){return!this._noUBO},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSync",{get:function(){return!this._needSync},enumerable:!0,configurable:!0}),e.prototype.isDynamic=function(){return void 0!==this._dynamic},e.prototype.getData=function(){return this._bufferData},e.prototype.getBuffer=function(){return this._buffer},e.prototype._fillAlignment=function(e){var t;if(this._uniformLocationPointer%(t=e<=2?e:4)!=0){var n=this._uniformLocationPointer;this._uniformLocationPointer+=t-this._uniformLocationPointer%t;for(var r=this._uniformLocationPointer-n,i=0;i<r;i++)this._data.push(0)}},e.prototype.addUniform=function(e,t){if(!this._noUBO&&void 0===this._uniformLocations[e]){var n;if(t instanceof Array)t=(n=t).length;else{t=t,n=[];for(var r=0;r<t;r++)n.push(0)}for(this._fillAlignment(t),this._uniformSizes[e]=t,this._uniformLocations[e]=this._uniformLocationPointer,this._uniformLocationPointer+=t,r=0;r<t;r++)this._data.push(n[r]);this._needSync=!0}},e.prototype.addMatrix=function(e,t){this.addUniform(e,Array.prototype.slice.call(t.toArray()))},e.prototype.addFloat2=function(e,t,n){this.addUniform(e,[t,n])},e.prototype.addFloat3=function(e,t,n,r){this.addUniform(e,[t,n,r])},e.prototype.addColor3=function(e,t){var n=new Array;t.toArray(n),this.addUniform(e,n)},e.prototype.addColor4=function(e,t,n){var r=new Array;t.toArray(r),r.push(n),this.addUniform(e,r)},e.prototype.addVector3=function(e,t){var n=new Array;t.toArray(n),this.addUniform(e,n)},e.prototype.addMatrix3x3=function(e){this.addUniform(e,12)},e.prototype.addMatrix2x2=function(e){this.addUniform(e,8)},e.prototype.create=function(){this._noUBO||this._buffer||(this._fillAlignment(4),this._bufferData=new Float32Array(this._data),this._rebuild(),this._needSync=!0)},e.prototype._rebuild=function(){!this._noUBO&&this._bufferData&&(this._buffer=this._dynamic?this._engine.createDynamicUniformBuffer(this._bufferData):this._engine.createUniformBuffer(this._bufferData))},e.prototype.update=function(){this._buffer?(this._dynamic||this._needSync)&&(this._engine.updateUniformBuffer(this._buffer,this._bufferData),this._needSync=!1):this.create()},e.prototype.updateUniform=function(e,t,n){var i=this._uniformLocations[e];if(void 0===i){if(this._buffer)return void r.a.Error("Cannot add an uniform after UBO has been created.");this.addUniform(e,n),i=this._uniformLocations[e]}if(this._buffer||this.create(),this._dynamic)for(a=0;a<n;a++)this._bufferData[i+a]=t[a];else{for(var o=!1,a=0;a<n;a++)this._bufferData[i+a]!==t[a]&&(o=!0,this._bufferData[i+a]=t[a]);this._needSync=this._needSync||o}},e.prototype._updateMatrix3x3ForUniform=function(t,n){for(var r=0;r<3;r++)e._tempBuffer[4*r]=n[3*r],e._tempBuffer[4*r+1]=n[3*r+1],e._tempBuffer[4*r+2]=n[3*r+2],e._tempBuffer[4*r+3]=0;this.updateUniform(t,e._tempBuffer,12)},e.prototype._updateMatrix3x3ForEffect=function(e,t){this._currentEffect.setMatrix3x3(e,t)},e.prototype._updateMatrix2x2ForEffect=function(e,t){this._currentEffect.setMatrix2x2(e,t)},e.prototype._updateMatrix2x2ForUniform=function(t,n){for(var r=0;r<2;r++)e._tempBuffer[4*r]=n[2*r],e._tempBuffer[4*r+1]=n[2*r+1],e._tempBuffer[4*r+2]=0,e._tempBuffer[4*r+3]=0;this.updateUniform(t,e._tempBuffer,8)},e.prototype._updateFloatForEffect=function(e,t){this._currentEffect.setFloat(e,t)},e.prototype._updateFloatForUniform=function(t,n){e._tempBuffer[0]=n,this.updateUniform(t,e._tempBuffer,1)},e.prototype._updateFloat2ForEffect=function(e,t,n,r){void 0===r&&(r=""),this._currentEffect.setFloat2(e+r,t,n)},e.prototype._updateFloat2ForUniform=function(t,n,r){e._tempBuffer[0]=n,e._tempBuffer[1]=r,this.updateUniform(t,e._tempBuffer,2)},e.prototype._updateFloat3ForEffect=function(e,t,n,r,i){void 0===i&&(i=""),this._currentEffect.setFloat3(e+i,t,n,r)},e.prototype._updateFloat3ForUniform=function(t,n,r,i){e._tempBuffer[0]=n,e._tempBuffer[1]=r,e._tempBuffer[2]=i,this.updateUniform(t,e._tempBuffer,3)},e.prototype._updateFloat4ForEffect=function(e,t,n,r,i,o){void 0===o&&(o=""),this._currentEffect.setFloat4(e+o,t,n,r,i)},e.prototype._updateFloat4ForUniform=function(t,n,r,i,o){e._tempBuffer[0]=n,e._tempBuffer[1]=r,e._tempBuffer[2]=i,e._tempBuffer[3]=o,this.updateUniform(t,e._tempBuffer,4)},e.prototype._updateMatrixForEffect=function(e,t){this._currentEffect.setMatrix(e,t)},e.prototype._updateMatrixForUniform=function(e,t){this.updateUniform(e,t.toArray(),16)},e.prototype._updateVector3ForEffect=function(e,t){this._currentEffect.setVector3(e,t)},e.prototype._updateVector3ForUniform=function(t,n){n.toArray(e._tempBuffer),this.updateUniform(t,e._tempBuffer,3)},e.prototype._updateVector4ForEffect=function(e,t){this._currentEffect.setVector4(e,t)},e.prototype._updateVector4ForUniform=function(t,n){n.toArray(e._tempBuffer),this.updateUniform(t,e._tempBuffer,4)},e.prototype._updateColor3ForEffect=function(e,t,n){void 0===n&&(n=""),this._currentEffect.setColor3(e+n,t)},e.prototype._updateColor3ForUniform=function(t,n){n.toArray(e._tempBuffer),this.updateUniform(t,e._tempBuffer,3)},e.prototype._updateColor4ForEffect=function(e,t,n,r){void 0===r&&(r=""),this._currentEffect.setColor4(e+r,t,n)},e.prototype._updateColor4ForUniform=function(t,n,r){n.toArray(e._tempBuffer),e._tempBuffer[3]=r,this.updateUniform(t,e._tempBuffer,4)},e.prototype.setTexture=function(e,t){this._currentEffect.setTexture(e,t)},e.prototype.updateUniformDirectly=function(e,t){this.updateUniform(e,t,t.length),this.update()},e.prototype.bindToEffect=function(e,t){this._currentEffect=e,!this._noUBO&&this._buffer&&e.bindUniformBuffer(this._buffer,t)},e.prototype.dispose=function(){if(!this._noUBO){var e=this._engine._uniformBuffers,t=e.indexOf(this);-1!==t&&(e[t]=e[e.length-1],e.pop()),this._buffer&&this._engine._releaseBuffer(this._buffer)&&(this._buffer=null)}},e._MAX_UNIFORM_SIZE=256,e._tempBuffer=new Float32Array(e._MAX_UNIFORM_SIZE),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){this._isDirty=!0,this._areLightsDirty=!0,this._areAttributesDirty=!0,this._areTexturesDirty=!0,this._areFresnelDirty=!0,this._areMiscDirty=!0,this._areImageProcessingDirty=!0,this._normals=!1,this._uvs=!1,this._needNormals=!1,this._needUVs=!1}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),e.prototype.markAsProcessed=function(){this._isDirty=!1,this._areAttributesDirty=!1,this._areTexturesDirty=!1,this._areFresnelDirty=!1,this._areLightsDirty=!1,this._areMiscDirty=!1,this._areImageProcessingDirty=!1},e.prototype.markAsUnprocessed=function(){this._isDirty=!0},e.prototype.markAllAsDirty=function(){this._areTexturesDirty=!0,this._areAttributesDirty=!0,this._areLightsDirty=!0,this._areFresnelDirty=!0,this._areMiscDirty=!0,this._areImageProcessingDirty=!0,this._isDirty=!0},e.prototype.markAsImageProcessingDirty=function(){this._areImageProcessingDirty=!0,this._isDirty=!0},e.prototype.markAsLightDirty=function(){this._areLightsDirty=!0,this._isDirty=!0},e.prototype.markAsAttributesDirty=function(){this._areAttributesDirty=!0,this._isDirty=!0},e.prototype.markAsTexturesDirty=function(){this._areTexturesDirty=!0,this._isDirty=!0},e.prototype.markAsFresnelDirty=function(){this._areFresnelDirty=!0,this._isDirty=!0},e.prototype.markAsMiscDirty=function(){this._areMiscDirty=!0,this._isDirty=!0},e.prototype.rebuild=function(){this._keys&&delete this._keys,this._keys=[];for(var e=0,t=Object.keys(this);e<t.length;e++){var n=t[e];"_"!==n[0]&&this._keys.push(n)}},e.prototype.isEqual=function(e){if(this._keys.length!==e._keys.length)return!1;for(var t=0;t<this._keys.length;t++){var n=this._keys[t];if(this[n]!==e[n])return!1}return!0},e.prototype.cloneTo=function(e){this._keys.length!==e._keys.length&&(e._keys=this._keys.slice(0));for(var t=0;t<this._keys.length;t++){var n=this._keys[t];e[n]=this[n]}},e.prototype.reset=function(){for(var e=0;e<this._keys.length;e++){var t=this._keys[e];switch(typeof this[t]){case"number":this[t]=0;break;case"string":this[t]="";break;default:this[t]=!1}}},e.prototype.toString=function(){for(var e="",t=0;t<this._keys.length;t++){var n=this._keys[t],r=this[n];switch(typeof r){case"number":case"string":e+="#define "+n+" "+r+"\n";break;default:r&&(e+="#define "+n+"\n")}}return e},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(1),i=n(2),o=n(0),a=n(25),s=n(38);a.a.AddNodeConstructor("Light_Type_3",function(e,t){return function(){return new u(e,o.x.Zero(),t)}});var u=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i.groundColor=new o.e(0,0,0),i.direction=n||o.x.Up(),i}return r.d(t,e),t.prototype._buildUniformLayout=function(){this._uniformBuffer.addUniform("vLightData",4),this._uniformBuffer.addUniform("vLightDiffuse",4),this._uniformBuffer.addUniform("vLightSpecular",3),this._uniformBuffer.addUniform("vLightGround",3),this._uniformBuffer.addUniform("shadowsInfo",3),this._uniformBuffer.addUniform("depthValues",2),this._uniformBuffer.create()},t.prototype.getClassName=function(){return"HemisphericLight"},t.prototype.setDirectionToTarget=function(e){return this.direction=o.x.Normalize(e.subtract(o.x.Zero())),this.direction},t.prototype.getShadowGenerator=function(){return null},t.prototype.transferToEffect=function(e,t){var n=o.x.Normalize(this.direction);return this._uniformBuffer.updateFloat4("vLightData",n.x,n.y,n.z,0,t),this._uniformBuffer.updateColor3("vLightGround",this.groundColor.scale(this.intensity),t),this},t.prototype.computeWorldMatrix=function(){return this._worldMatrix||(this._worldMatrix=o.j.Identity()),this._worldMatrix},t.prototype.getTypeID=function(){return s.a.LIGHTTYPEID_HEMISPHERICLIGHT},t.prototype.prepareLightSpecificDefines=function(e,t){e["HEMILIGHT"+t]=!0},r.c([Object(i.e)()],t.prototype,"groundColor",void 0),r.c([Object(i.o)()],t.prototype,"direction",void 0),t}(s.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),i=n(20),o=n(29),a=n(22),s=function(e){function t(t,n){var r=e.call(this,t,n,!0)||this;return n.multiMaterials.push(r),r.subMaterials=new Array,r._storeEffectOnSubMeshes=!0,r}return r.d(t,e),Object.defineProperty(t.prototype,"subMaterials",{get:function(){return this._subMaterials},set:function(e){this._subMaterials=e,this._hookArray(e)},enumerable:!0,configurable:!0}),t.prototype.getChildren=function(){return this.subMaterials},t.prototype._hookArray=function(e){var t=this,n=e.push;e.push=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=n.apply(e,r);return t._markAllSubMeshesAsTexturesDirty(),o};var r=e.splice;e.splice=function(n,i){var o=r.apply(e,[n,i]);return t._markAllSubMeshesAsTexturesDirty(),o}},t.prototype.getSubMaterial=function(e){return e<0||e>=this.subMaterials.length?this.getScene().defaultMaterial:this.subMaterials[e]},t.prototype.getActiveTextures=function(){var t;return(t=e.prototype.getActiveTextures.call(this)).concat.apply(t,this.subMaterials.map(function(e){return e?e.getActiveTextures():[]}))},t.prototype.getClassName=function(){return"MultiMaterial"},t.prototype.isReadyForSubMesh=function(e,t,n){for(var r=0;r<this.subMaterials.length;r++){var i=this.subMaterials[r];if(i){if(i._storeEffectOnSubMeshes){if(!i.isReadyForSubMesh(e,t,n))return!1;continue}if(!i.isReady(e))return!1}}return!0},t.prototype.clone=function(e,n){for(var r=new t(e,this.getScene()),i=0;i<this.subMaterials.length;i++){var o,a=this.subMaterials[i];o=n&&a?a.clone(e+"-"+a.name):this.subMaterials[i],r.subMaterials.push(o)}return r},t.prototype.serialize=function(){var e={};e.name=this.name,e.id=this.id,o.a&&(e.tags=o.a.GetTags(this)),e.materials=[];for(var t=0;t<this.subMaterials.length;t++){var n=this.subMaterials[t];e.materials.push(n?n.id:null)}return e},t.prototype.dispose=function(t,n,r){var i=this.getScene();if(i){if(r)for(var o=0;o<this.subMaterials.length;o++){var a=this.subMaterials[o];a&&a.dispose(t,n)}(o=i.multiMaterials.indexOf(this))>=0&&i.multiMaterials.splice(o,1),e.prototype.dispose.call(this,t,n)}},t.ParseMultiMaterial=function(e,n){var r=new t(e.name,n);r.id=e.id,o.a&&o.a.AddTagsTo(r,e.tags);for(var i=0;i<e.materials.length;i++){var a=e.materials[i];r.subMaterials.push(a?n.getMaterialByID(a):null)}return r},t}(i.a);a.a.RegisteredTypes["BABYLON.MultiMaterial"]=s},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.bonesDeclaration="#if NUM_BONE_INFLUENCERS>0\n#ifdef BONETEXTURE\nuniform sampler2D boneSampler;\nuniform float boneTextureWidth;\n#else\nuniform mat4 mBones[BonesPerMesh];\n#endif\nattribute vec4 matricesIndices;\nattribute vec4 matricesWeights;\n#if NUM_BONE_INFLUENCERS>4\nattribute vec4 matricesIndicesExtra;\nattribute vec4 matricesWeightsExtra;\n#endif\n#ifdef BONETEXTURE\nmat4 readMatrixFromRawSampler(sampler2D smp,float index)\n{\nfloat offset=index*4.0;\nfloat dx=1.0/boneTextureWidth;\nvec4 m0=texture2D(smp,vec2(dx*(offset+0.5),0.));\nvec4 m1=texture2D(smp,vec2(dx*(offset+1.5),0.));\nvec4 m2=texture2D(smp,vec2(dx*(offset+2.5),0.));\nvec4 m3=texture2D(smp,vec2(dx*(offset+3.5),0.));\nreturn mat4(m0,m1,m2,m3);\n}\n#endif\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.instancesDeclaration="#ifdef INSTANCES\nattribute vec4 world0;\nattribute vec4 world1;\nattribute vec4 world2;\nattribute vec4 world3;\n#else\nuniform mat4 world;\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.instancesVertex="#ifdef INSTANCES\nmat4 finalWorld=mat4(world0,world1,world2,world3);\n#else\nmat4 finalWorld=world;\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.bonesVertex="#if NUM_BONE_INFLUENCERS>0\nmat4 influence;\n#ifdef BONETEXTURE\ninfluence=readMatrixFromRawSampler(boneSampler,matricesIndices[0])*matricesWeights[0];\n#if NUM_BONE_INFLUENCERS>1\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndices[1])*matricesWeights[1];\n#endif\n#if NUM_BONE_INFLUENCERS>2\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndices[2])*matricesWeights[2];\n#endif\n#if NUM_BONE_INFLUENCERS>3\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndices[3])*matricesWeights[3];\n#endif\n#if NUM_BONE_INFLUENCERS>4\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[0])*matricesWeightsExtra[0];\n#endif\n#if NUM_BONE_INFLUENCERS>5\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[1])*matricesWeightsExtra[1];\n#endif\n#if NUM_BONE_INFLUENCERS>6\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[2])*matricesWeightsExtra[2];\n#endif\n#if NUM_BONE_INFLUENCERS>7\ninfluence+=readMatrixFromRawSampler(boneSampler,matricesIndicesExtra[3])*matricesWeightsExtra[3];\n#endif\n#else\ninfluence=mBones[int(matricesIndices[0])]*matricesWeights[0];\n#if NUM_BONE_INFLUENCERS>1\ninfluence+=mBones[int(matricesIndices[1])]*matricesWeights[1];\n#endif\n#if NUM_BONE_INFLUENCERS>2\ninfluence+=mBones[int(matricesIndices[2])]*matricesWeights[2];\n#endif\n#if NUM_BONE_INFLUENCERS>3\ninfluence+=mBones[int(matricesIndices[3])]*matricesWeights[3];\n#endif\n#if NUM_BONE_INFLUENCERS>4\ninfluence+=mBones[int(matricesIndicesExtra[0])]*matricesWeightsExtra[0];\n#endif\n#if NUM_BONE_INFLUENCERS>5\ninfluence+=mBones[int(matricesIndicesExtra[1])]*matricesWeightsExtra[1];\n#endif\n#if NUM_BONE_INFLUENCERS>6\ninfluence+=mBones[int(matricesIndicesExtra[2])]*matricesWeightsExtra[2];\n#endif\n#if NUM_BONE_INFLUENCERS>7\ninfluence+=mBones[int(matricesIndicesExtra[3])]*matricesWeightsExtra[3];\n#endif\n#endif\nfinalWorld=finalWorld*influence;\n#endif"},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),i=n(12),o=n(62),a=n(3),s=function(e,t,n,r){this.name=e,this.worldAxisForNormal=t,this.worldAxisForFileX=n,this.worldAxisForFileY=r},u=function(){function e(){}return e.ConvertCubeMapTextureToSphericalPolynomial=function(e){if(!e.isCube)return null;var t,n,r=e.getSize().width,i=e.readPixels(0),o=e.readPixels(1);e.isRenderTarget?(t=e.readPixels(3),n=e.readPixels(2)):(t=e.readPixels(2),n=e.readPixels(3));var s=e.readPixels(4),u=e.readPixels(5),l=a.a.TEXTURETYPE_UNSIGNED_INT;return e.textureType&&e.textureType!==a.a.TEXTURETYPE_UNSIGNED_INT&&(l=a.a.TEXTURETYPE_FLOAT),this.ConvertCubeMapToSphericalPolynomial({size:r,right:i,left:o,up:t,down:n,front:s,back:u,format:a.a.TEXTUREFORMAT_RGBA,type:l,gammaSpace:e.gammaSpace})},e.ConvertCubeMapToSphericalPolynomial=function(e){for(var t=new o.a,n=0,s=2/e.size,u=s,l=.5*s-1,c=0;c<6;c++)for(var h=this.FileFaces[c],d=e[h.name],f=l,p=e.format===a.a.TEXTUREFORMAT_RGBA?4:3,_=0;_<e.size;_++){for(var m=l,g=0;g<e.size;g++){var v=h.worldAxisForFileX.scale(m).add(h.worldAxisForFileY.scale(f)).add(h.worldAxisForNormal);v.normalize();var y=Math.pow(1+m*m+f*f,-1.5),b=d[_*e.size*p+g*p+0],T=d[_*e.size*p+g*p+1],E=d[_*e.size*p+g*p+2];e.type===a.a.TEXTURETYPE_UNSIGNED_INT&&(b/=255,T/=255,E/=255),e.gammaSpace&&(b=Math.pow(i.a.Clamp(b),r.v),T=Math.pow(i.a.Clamp(T),r.v),E=Math.pow(i.a.Clamp(E),r.v));var x=new r.e(b,T,E);t.addLight(v,x,y),n+=y,m+=s}f+=u}var M=4*Math.PI*6/6/n;return t.scaleInPlace(M),t.convertIncidentRadianceToIrradiance(),t.convertIrradianceToLambertianRadiance(),o.b.FromHarmonics(t)},e.FileFaces=[new s("right",new r.x(1,0,0),new r.x(0,0,-1),new r.x(0,-1,0)),new s("left",new r.x(-1,0,0),new r.x(0,0,1),new r.x(0,-1,0)),new s("up",new r.x(0,1,0),new r.x(1,0,0),new r.x(0,0,1)),new s("down",new r.x(0,-1,0),new r.x(1,0,0),new r.x(0,0,-1)),new s("front",new r.x(0,0,1),new r.x(1,0,0),new r.x(0,-1,0)),new s("back",new r.x(0,0,-1),new r.x(-1,0,0),new r.x(0,-1,0))],e}()},function(e,t,n){"use strict";n.d(t,"b",function(){return h}),n.d(t,"a",function(){return d});var r=n(1),i=n(0),o=n(4),a=n(11),s=n(111),u=n(20),l=n(76),c=(n(126),n(127),n(15)),h=function(e){function t(t,n,r,a,s,u,c){void 0===n&&(n=null),void 0===r&&(r=null);var h=e.call(this,t,n,r,a,s)||this;h.useVertexColor=u,h.useVertexAlpha=c,h.color=new i.e(1,1,1),h.alpha=1,a&&(h.color=a.color.clone(),h.alpha=a.alpha,h.useVertexColor=a.useVertexColor,h.useVertexAlpha=a.useVertexAlpha),h.intersectionThreshold=.1;var d={attributes:[o.b.PositionKind,"world0","world1","world2","world3"],uniforms:["vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","world","viewProjection"],needAlphaBlending:!0,defines:[]};return!1===c&&(d.needAlphaBlending=!1),u?(d.defines.push("#define VERTEXCOLOR"),d.attributes.push(o.b.ColorKind)):d.uniforms.push("color"),h._colorShader=new l.a("colorShader",h.getScene(),"color",d),h}return r.d(t,e),t.prototype._addClipPlaneDefine=function(e){var t="#define "+e;-1===this._colorShader.options.defines.indexOf(t)&&this._colorShader.options.defines.push(t)},t.prototype._removeClipPlaneDefine=function(e){var t=this._colorShader.options.defines.indexOf("#define "+e);-1!==t&&this._colorShader.options.defines.splice(t,1)},t.prototype.isReady=function(){var t=this.getScene();return t.clipPlane?this._addClipPlaneDefine("CLIPPLANE"):this._removeClipPlaneDefine("CLIPPLANE"),t.clipPlane2?this._addClipPlaneDefine("CLIPPLANE2"):this._removeClipPlaneDefine("CLIPPLANE2"),t.clipPlane3?this._addClipPlaneDefine("CLIPPLANE3"):this._removeClipPlaneDefine("CLIPPLANE3"),t.clipPlane4?this._addClipPlaneDefine("CLIPPLANE4"):this._removeClipPlaneDefine("CLIPPLANE4"),!!this._colorShader.isReady()&&e.prototype.isReady.call(this)},t.prototype.getClassName=function(){return"LinesMesh"},Object.defineProperty(t.prototype,"material",{get:function(){return this._colorShader},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkCollisions",{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype._bind=function(e,t,n){if(!this._geometry)return this;var r=this._colorShader.getEffect(),i=this.isUnIndexed?null:this._geometry.getIndexBuffer();return this._geometry._bind(r,i),this.useVertexColor||this._colorShader.setColor4("color",this.color.toColor4(this.alpha)),c.a.BindClipPlane(r,this.getScene()),this},t.prototype._draw=function(e,t,n){if(!this._geometry||!this._geometry.getVertexBuffers()||!this._unIndexed&&!this._geometry.getIndexBuffer())return this;var r=this.getScene().getEngine();return this._unIndexed?r.drawArraysType(u.a.LineListDrawMode,e.verticesStart,e.verticesCount,n):r.drawElementsType(u.a.LineListDrawMode,e.indexStart,e.indexCount,n),this},t.prototype.dispose=function(t){this._colorShader.dispose(!1,!1,!0),e.prototype.dispose.call(this,t)},t.prototype.clone=function(e,n,r){return new t(e,this.getScene(),n,this,r)},t.prototype.createInstance=function(e){return new d(e,this)},t}(a.a),d=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.intersectionThreshold=n.intersectionThreshold,r}return r.d(t,e),t.prototype.getClassName=function(){return"InstancedLinesMesh"},t}(s.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(1),i=function(e){function t(t){var n=e.call(this)||this;return n._buffer=t,n}return r.d(t,e),Object.defineProperty(t.prototype,"underlyingResource",{get:function(){return this._buffer},enumerable:!0,configurable:!0}),t}(n(78).a)},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(33),o=n(58),a=function(){function e(t,n,a,s,u,l){if(void 0===n&&(n=1),void 0===a&&(a=2),this._scaleLinesFactor=4,this._instanced=!1,this.scaleLines=1,this.scaleLines=n,!s){var c=new i.a("",t);c.disableLighting=!0,c.emissiveColor=r.e.Red().scale(.5),s=o.a._CreateArrow(t,c)}if(!u){var h=new i.a("",t);h.disableLighting=!0,h.emissiveColor=r.e.Green().scale(.5),u=o.a._CreateArrow(t,h)}if(!l){var d=new i.a("",t);d.disableLighting=!0,d.emissiveColor=r.e.Blue().scale(.5),l=o.a._CreateArrow(t,d)}this._xAxis=s,this._xAxis.scaling.setAll(this.scaleLines*this._scaleLinesFactor),this._yAxis=u,this._yAxis.scaling.setAll(this.scaleLines*this._scaleLinesFactor),this._zAxis=l,this._zAxis.scaling.setAll(this.scaleLines*this._scaleLinesFactor),null!=a&&(e._SetRenderingGroupId(this._xAxis,a),e._SetRenderingGroupId(this._yAxis,a),e._SetRenderingGroupId(this._zAxis,a)),this.scene=t,this.update(new r.x,r.x.Right(),r.x.Up(),r.x.Forward())}return Object.defineProperty(e.prototype,"xAxis",{get:function(){return this._xAxis},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yAxis",{get:function(){return this._yAxis},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zAxis",{get:function(){return this._zAxis},enumerable:!0,configurable:!0}),e.prototype.update=function(e,t,n,r){this._xAxis.position.copyFrom(e),this._xAxis.setDirection(t),this._xAxis.scaling.setAll(this.scaleLines*this._scaleLinesFactor),this._yAxis.position.copyFrom(e),this._yAxis.setDirection(n),this._yAxis.scaling.setAll(this.scaleLines*this._scaleLinesFactor),this._zAxis.position.copyFrom(e),this._zAxis.setDirection(r),this._zAxis.scaling.setAll(this.scaleLines*this._scaleLinesFactor)},e.prototype.createInstance=function(){var t=o.a._CreateArrowInstance(this.scene,this._xAxis),n=o.a._CreateArrowInstance(this.scene,this._yAxis),r=o.a._CreateArrowInstance(this.scene,this._zAxis),i=new e(this.scene,this.scaleLines,null,t,n,r);return i._instanced=!0,i},e.prototype.dispose=function(){this._xAxis&&(this._xAxis.dispose(!1,!this._instanced),delete this._xAxis),this._yAxis&&(this._yAxis.dispose(!1,!this._instanced),delete this._yAxis),this._zAxis&&(this._zAxis.dispose(!1,!this._instanced),delete this._zAxis),delete this.scene},e._SetRenderingGroupId=function(e,t){e.getChildMeshes().forEach(function(e){e.renderingGroupId=t})},e}(),s=n(1),u=function(e){function t(t,n,i,o){void 0===o&&(o=1);var a=e.call(this,t,o)||this;return a.pos=r.x.Zero(),a.xaxis=r.x.Zero(),a.yaxis=r.x.Zero(),a.zaxis=r.x.Zero(),a.mesh=i,a.bone=n,a}return s.d(t,e),t.prototype.update=function(){if(this.mesh&&this.bone){var t=this.bone;t.getAbsolutePositionToRef(this.mesh,this.pos),t.getDirectionToRef(r.c.X,this.mesh,this.xaxis),t.getDirectionToRef(r.c.Y,this.mesh,this.yaxis),t.getDirectionToRef(r.c.Z,this.mesh,this.zaxis),e.prototype.update.call(this,this.pos,this.xaxis,this.yaxis,this.zaxis)}},t.prototype.dispose=function(){this.mesh&&(this.mesh=null,this.bone=null,e.prototype.dispose.call(this))},t}(a),l=n(9),c=n(8),h=n(16),d=n(10);Object.defineProperty(h.a.prototype,"debugLayer",{get:function(){return this._debugLayer||(this._debugLayer=new f(this)),this._debugLayer},enumerable:!0,configurable:!0});var f=function(){function e(e){var t=this;this.BJSINSPECTOR=this._getGlobalInspector(),this.onPropertyChangedObservable=new c.c,this._scene=e,this._scene.onDisposeObservable.add(function(){t._scene._debugLayer&&t._scene._debugLayer.hide()})}return e.prototype._createInspector=function(e){if(!this.isVisible()){var t=s.a({overlay:!1,showExplorer:!0,showInspector:!0,embedMode:!1,handleResize:!0,enablePopup:!0},e);this.BJSINSPECTOR=this.BJSINSPECTOR||this._getGlobalInspector(),this.BJSINSPECTOR.Inspector.Show(this._scene,t)}},e.prototype.select=function(e,t){this.BJSINSPECTOR&&(this.BJSINSPECTOR.Inspector.MarkLineContainerTitleForHighlighting(t),this.BJSINSPECTOR.Inspector.OnSelectionChangeObservable.notifyObservers(e))},e.prototype._getGlobalInspector=function(){return"undefined"!=typeof INSPECTOR?INSPECTOR:"undefined"!=typeof BABYLON&&void 0!==BABYLON.Inspector?BABYLON:void 0},e.prototype.isVisible=function(){return this.BJSINSPECTOR&&this.BJSINSPECTOR.Inspector.IsVisible},e.prototype.hide=function(){this.BJSINSPECTOR&&this.BJSINSPECTOR.Inspector.Hide()},e.prototype.show=function(t){var n=this;return new Promise(function(r,i){void 0===n.BJSINSPECTOR?l.h.LoadScript(t&&t.inspectorURL?t.inspectorURL:e.InspectorURL,function(){n._createInspector(t),r(n)}):(n._createInspector(t),r(n))})},e.InspectorURL="https://unpkg.com/babylonjs-inspector@"+d.b.Version+"/babylon.inspector.bundle.js",e}(),p=n(11),_=n(52),m=n(46),g=n(23),v=n(27),y=n(41),b=n(53),T=function(){function e(e){this._impostors=[],this._meshes=[],this._numMeshes=0,this._debugMeshMeshes=new Array,this._scene=e||g.a.LastCreatedScene;var t=this._scene.getPhysicsEngine();t&&(this._physicsEnginePlugin=t.getPhysicsPlugin()),this._utilityLayer=new y.a(this._scene,!1),this._utilityLayer.pickUtilitySceneFirst=!1,this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil=!0}return e.prototype._updateDebugMeshes=function(){for(var e=this._physicsEnginePlugin,t=0;t<this._numMeshes;t++){var n=this._impostors[t];if(n)if(n.isDisposed)this.hideImpostor(this._impostors[t--]);else{if(n.type===v.a.MeshImpostor)continue;var r=this._meshes[t];r&&e&&e.syncMeshWithImpostor(r,n)}}},e.prototype.showImpostor=function(e,t){if(!this._scene)return null;for(var n=0;n<this._numMeshes;n++)if(this._impostors[n]==e)return null;var r=this._getDebugMesh(e,t);return r&&(this._impostors[this._numMeshes]=e,this._meshes[this._numMeshes]=r,0===this._numMeshes&&(this._renderFunction=this._updateDebugMeshes.bind(this),this._scene.registerBeforeRender(this._renderFunction)),this._numMeshes++),r},e.prototype.hideImpostor=function(e){if(e&&this._scene&&this._utilityLayer){for(var t=!1,n=this._utilityLayer.utilityLayerScene,r=0;r<this._numMeshes;r++)if(this._impostors[r]==e){var i=this._meshes[r];if(!i)continue;n.removeMesh(i),i.dispose();var o=this._debugMeshMeshes.indexOf(i);o>-1&&this._debugMeshMeshes.splice(o,1),this._numMeshes--,this._numMeshes>0?(this._meshes[r]=this._meshes[this._numMeshes],this._impostors[r]=this._impostors[this._numMeshes],this._meshes[this._numMeshes]=null,this._impostors[this._numMeshes]=null):(this._meshes[0]=null,this._impostors[0]=null),t=!0;break}t&&0===this._numMeshes&&this._scene.unregisterBeforeRender(this._renderFunction)}},e.prototype._getDebugMaterial=function(e){return this._debugMaterial||(this._debugMaterial=new i.a("",e),this._debugMaterial.wireframe=!0,this._debugMaterial.emissiveColor=r.e.White(),this._debugMaterial.disableLighting=!0),this._debugMaterial},e.prototype._getDebugBoxMesh=function(e){return this._debugBoxMesh||(this._debugBoxMesh=_.a.CreateBox("physicsBodyBoxViewMesh",{size:1},e),this._debugBoxMesh.rotationQuaternion=r.q.Identity(),this._debugBoxMesh.material=this._getDebugMaterial(e),this._debugBoxMesh.setEnabled(!1)),this._debugBoxMesh.createInstance("physicsBodyBoxViewInstance")},e.prototype._getDebugSphereMesh=function(e){return this._debugSphereMesh||(this._debugSphereMesh=m.a.CreateSphere("physicsBodySphereViewMesh",{diameter:1},e),this._debugSphereMesh.rotationQuaternion=r.q.Identity(),this._debugSphereMesh.material=this._getDebugMaterial(e),this._debugSphereMesh.setEnabled(!1)),this._debugSphereMesh.createInstance("physicsBodyBoxViewInstance")},e.prototype._getDebugCylinderMesh=function(e){return this._debugCylinderMesh||(this._debugCylinderMesh=b.a.CreateCylinder("physicsBodyCylinderViewMesh",{diameterTop:1,diameterBottom:1,height:1},e),this._debugCylinderMesh.rotationQuaternion=r.q.Identity(),this._debugCylinderMesh.material=this._getDebugMaterial(e),this._debugCylinderMesh.setEnabled(!1)),this._debugCylinderMesh.createInstance("physicsBodyBoxViewInstance")},e.prototype._getDebugMeshMesh=function(e,t){var n=new p.a(e.name,t,null,e);return n.position=r.x.Zero(),n.setParent(e),n.material=this._getDebugMaterial(t),this._debugMeshMeshes.push(n),n},e.prototype._getDebugMesh=function(e,t){var n=this;if(!this._utilityLayer)return null;if(t&&t.parent&&t.parent.physicsImpostor)return null;var r=null,i=this._utilityLayer.utilityLayerScene;switch(e.type){case v.a.BoxImpostor:r=this._getDebugBoxMesh(i),e.getBoxSizeToRef(r.scaling);break;case v.a.SphereImpostor:r=this._getDebugSphereMesh(i);var o=e.getRadius();r.scaling.x=2*o,r.scaling.y=2*o,r.scaling.z=2*o;break;case v.a.MeshImpostor:t&&(r=this._getDebugMeshMesh(t,i));break;case v.a.NoImpostor:t&&t.getChildMeshes().filter(function(e){return e.physicsImpostor?1:0}).forEach(function(e){n._getDebugBoxMesh(i).parent=e});break;case v.a.CylinderImpostor:r=this._getDebugCylinderMesh(i);var a=e.object.getBoundingInfo();r.scaling.x=a.boundingBox.maximum.x-a.boundingBox.minimum.x,r.scaling.y=a.boundingBox.maximum.y-a.boundingBox.minimum.y,r.scaling.z=a.boundingBox.maximum.z-a.boundingBox.minimum.z}return r},e.prototype.dispose=function(){for(var e=this._numMeshes,t=0;t<e;t++)this.hideImpostor(this._impostors[0]);this._debugBoxMesh&&this._debugBoxMesh.dispose(),this._debugSphereMesh&&this._debugSphereMesh.dispose(),this._debugCylinderMesh&&this._debugCylinderMesh.dispose(),this._debugMaterial&&this._debugMaterial.dispose(),this._impostors.length=0,this._scene=null,this._physicsEnginePlugin=null,this._utilityLayer&&(this._utilityLayer.dispose(),this._utilityLayer=null)},e}(),E=n(40),x=function(){function e(e){this.ray=e}return e.CreateAndShow=function(t,n,r){var i=new e(t);return i.show(n,r),i},e.prototype.show=function(e,t){if(!this._renderFunction&&this.ray){var n=this.ray;this._renderFunction=this._render.bind(this),this._scene=e,this._renderPoints=[n.origin,n.origin.add(n.direction.scale(n.length))],this._renderLine=p.a.CreateLines("ray",this._renderPoints,e,!0),this._renderFunction&&this._scene.registerBeforeRender(this._renderFunction)}t&&this._renderLine&&this._renderLine.color.copyFrom(t)},e.prototype.hide=function(){this._renderFunction&&this._scene&&(this._scene.unregisterBeforeRender(this._renderFunction),this._scene=null,this._renderFunction=null,this._renderLine&&(this._renderLine.dispose(),this._renderLine=null),this._renderPoints=[])},e.prototype._render=function(){var e=this.ray;if(e){var t=this._renderPoints[1],n=Math.min(e.length,1e6);t.copyFrom(e.direction),t.scaleInPlace(n),t.addInPlace(e.origin),p.a.CreateLines("ray",this._renderPoints,this._scene,!0,this._renderLine)}},e.prototype.attachToMesh=function(e,t,n,i){this._attachedToMesh=e;var o=this.ray;o&&(o.direction||(o.direction=r.x.Zero()),o.origin||(o.origin=r.x.Zero()),i&&(o.length=i),n||(n=r.x.Zero()),t||(t=new r.x(0,0,-1)),this._meshSpaceDirection?(this._meshSpaceDirection.copyFrom(t),this._meshSpaceOrigin.copyFrom(n)):(this._meshSpaceDirection=t.clone(),this._meshSpaceOrigin=n.clone()),this._updateToMeshFunction||(this._updateToMeshFunction=this._updateToMesh.bind(this),this._attachedToMesh.getScene().registerBeforeRender(this._updateToMeshFunction)),this._updateToMesh())},e.prototype.detachFromMesh=function(){this._attachedToMesh&&(this._updateToMeshFunction&&this._attachedToMesh.getScene().unregisterBeforeRender(this._updateToMeshFunction),this._attachedToMesh=null,this._updateToMeshFunction=null)},e.prototype._updateToMesh=function(){var e=this.ray;this._attachedToMesh&&e&&(this._attachedToMesh._isDisposed?this.detachFromMesh():(this._attachedToMesh.getDirectionToRef(this._meshSpaceDirection,e.direction),r.x.TransformCoordinatesToRef(this._meshSpaceOrigin,this._attachedToMesh.getWorldMatrix(),e.origin)))},e.prototype.dispose=function(){this.hide(),this.detachFromMesh(),this.ray=null},e}(),M=function(){function e(e,t,n,i,o){void 0===i&&(i=!0),void 0===o&&(o=1),this.skeleton=e,this.mesh=t,this.autoUpdateBonesMatrices=i,this.renderingGroupId=o,this.color=r.e.White(),this._debugLines=new Array,this._isEnabled=!1,this._scene=n,this._utilityLayer=new y.a(this._scene,!1),this._utilityLayer.pickUtilitySceneFirst=!1,this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil=!0,this.update(),this._renderFunction=this.update.bind(this)}return Object.defineProperty(e.prototype,"debugMesh",{get:function(){return this._debugMesh},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(e){this._isEnabled!==e&&(this._isEnabled=e,e?this._scene.registerBeforeRender(this._renderFunction):this._scene.unregisterBeforeRender(this._renderFunction))},enumerable:!0,configurable:!0}),e.prototype._getBonePosition=function(e,t,n,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0);var s=r.t.Matrix[0],u=t.getParent();if(s.copyFrom(t.getLocalMatrix()),0!==i||0!==o||0!==a){var l=r.t.Matrix[1];r.j.IdentityToRef(l),l.setTranslationFromFloats(i,o,a),l.multiplyToRef(s,s)}u&&s.multiplyToRef(u.getAbsoluteTransform(),s),s.multiplyToRef(n,s),e.x=s.m[12],e.y=s.m[13],e.z=s.m[14]},e.prototype._getLinesForBonesWithLength=function(e,t){for(var n=e.length,i=this.mesh._effectiveMesh.position,o=0;o<n;o++){var a=e[o],s=this._debugLines[o];s||(s=[r.x.Zero(),r.x.Zero()],this._debugLines[o]=s),this._getBonePosition(s[0],a,t),this._getBonePosition(s[1],a,t,0,a.length,0),s[0].subtractInPlace(i),s[1].subtractInPlace(i)}},e.prototype._getLinesForBonesNoLength=function(e,t){for(var n=0,i=this.mesh._effectiveMesh,o=i.position,a=e.length-1;a>=0;a--){var s=e[a],u=s.getParent();if(u){var l=this._debugLines[n];l||(l=[r.x.Zero(),r.x.Zero()],this._debugLines[n]=l),s.getAbsolutePositionToRef(i,l[0]),u.getAbsolutePositionToRef(i,l[1]),l[0].subtractInPlace(o),l[1].subtractInPlace(o),n++}}},e.prototype.update=function(){if(this._utilityLayer){this.autoUpdateBonesMatrices&&this.skeleton.computeAbsoluteTransforms();var e=this.mesh._effectiveMesh;void 0===this.skeleton.bones[0].length?this._getLinesForBonesNoLength(this.skeleton.bones,e.getWorldMatrix()):this._getLinesForBonesWithLength(this.skeleton.bones,e.getWorldMatrix());var t=this._utilityLayer.utilityLayerScene;this._debugMesh?E.a.CreateLineSystem("",{lines:this._debugLines,updatable:!0,instance:this._debugMesh},t):(this._debugMesh=E.a.CreateLineSystem("",{lines:this._debugLines,updatable:!0,instance:null},t),this._debugMesh.renderingGroupId=this.renderingGroupId),this._debugMesh.position.copyFrom(this.mesh.position),this._debugMesh.color=this.color}},e.prototype.dispose=function(){this.isEnabled=!1,this._debugMesh&&(this.isEnabled=!1,this._debugMesh.dispose(),this._debugMesh=null),this._utilityLayer&&(this._utilityLayer.dispose(),this._utilityLayer=null)},e}();n.d(t,"AxesViewer",function(){return a}),n.d(t,"BoneAxesViewer",function(){return u}),n.d(t,"DebugLayer",function(){return f}),n.d(t,"PhysicsViewer",function(){return T}),n.d(t,"RayHelper",function(){return x}),n.d(t,"SkeletonViewer",function(){return M})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1),i=n(0),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._normalMatrix=new i.j,r.allowShaderHotSwapping=!0,r._storeEffectOnSubMeshes=!0,r}return r.d(t,e),t.prototype.getEffect=function(){return this._activeEffect},t.prototype.isReady=function(e,t){return!!e&&(!e.subMeshes||0===e.subMeshes.length||this.isReadyForSubMesh(e,e.subMeshes[0],t))},t.prototype.bindOnlyWorldMatrix=function(e){this._activeEffect.setMatrix("world",e)},t.prototype.bindOnlyNormalMatrix=function(e){this._activeEffect.setMatrix("normalMatrix",e)},t.prototype.bind=function(e,t){t&&this.bindForSubMesh(e,t,t.subMeshes[0])},t.prototype._afterBind=function(t,n){void 0===n&&(n=null),e.prototype._afterBind.call(this,t),this.getScene()._cachedEffect=n},t.prototype._mustRebind=function(e,t,n){return void 0===n&&(n=1),e.isCachedMaterialInvalid(this,t,n)},t}(n(20).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n(1),i=n(2),o=n(0),a=n(4),s=n(7),u=n(15),l=n(5),c=n(20),h=n(22),d=function(e){function t(t,n,i,a){void 0===a&&(a={});var s=e.call(this,t,n)||this;return s._textures={},s._textureArrays={},s._floats={},s._ints={},s._floatsArrays={},s._colors3={},s._colors3Arrays={},s._colors4={},s._vectors2={},s._vectors3={},s._vectors4={},s._matrices={},s._matrices3x3={},s._matrices2x2={},s._vectors2Arrays={},s._vectors3Arrays={},s._cachedWorldViewMatrix=new o.j,s._shaderPath=i,s._options=r.a({needAlphaBlending:!1,needAlphaTesting:!1,attributes:["position","normal","uv"],uniforms:["worldViewProjection"],uniformBuffers:[],samplers:[],defines:[]},a),s}return r.d(t,e),Object.defineProperty(t.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"ShaderMaterial"},t.prototype.needAlphaBlending=function(){return this.alpha<1||this._options.needAlphaBlending},t.prototype.needAlphaTesting=function(){return this._options.needAlphaTesting},t.prototype._checkUniform=function(e){-1===this._options.uniforms.indexOf(e)&&this._options.uniforms.push(e)},t.prototype.setTexture=function(e,t){return-1===this._options.samplers.indexOf(e)&&this._options.samplers.push(e),this._textures[e]=t,this},t.prototype.setTextureArray=function(e,t){return-1===this._options.samplers.indexOf(e)&&this._options.samplers.push(e),this._checkUniform(e),this._textureArrays[e]=t,this},t.prototype.setFloat=function(e,t){return this._checkUniform(e),this._floats[e]=t,this},t.prototype.setInt=function(e,t){return this._checkUniform(e),this._ints[e]=t,this},t.prototype.setFloats=function(e,t){return this._checkUniform(e),this._floatsArrays[e]=t,this},t.prototype.setColor3=function(e,t){return this._checkUniform(e),this._colors3[e]=t,this},t.prototype.setColor3Array=function(e,t){return this._checkUniform(e),this._colors3Arrays[e]=t.reduce(function(e,t){return t.toArray(e,e.length),e},[]),this},t.prototype.setColor4=function(e,t){return this._checkUniform(e),this._colors4[e]=t,this},t.prototype.setVector2=function(e,t){return this._checkUniform(e),this._vectors2[e]=t,this},t.prototype.setVector3=function(e,t){return this._checkUniform(e),this._vectors3[e]=t,this},t.prototype.setVector4=function(e,t){return this._checkUniform(e),this._vectors4[e]=t,this},t.prototype.setMatrix=function(e,t){return this._checkUniform(e),this._matrices[e]=t,this},t.prototype.setMatrix3x3=function(e,t){return this._checkUniform(e),this._matrices3x3[e]=t,this},t.prototype.setMatrix2x2=function(e,t){return this._checkUniform(e),this._matrices2x2[e]=t,this},t.prototype.setArray2=function(e,t){return this._checkUniform(e),this._vectors2Arrays[e]=t,this},t.prototype.setArray3=function(e,t){return this._checkUniform(e),this._vectors3Arrays[e]=t,this},t.prototype._checkCache=function(e,t){return!e||(this._effect&&this._effect.defines.indexOf("#define INSTANCES"),!1)},t.prototype.isReadyForSubMesh=function(e,t,n){return this.isReady(e,n)},t.prototype.isReady=function(e,t){var n=this.getScene(),r=n.getEngine();if(!this.checkReadyOnEveryCall&&this._renderId===n.getRenderId()&&this._checkCache(e,t))return!0;for(var i=[],o=[],s=new l.c,c=0;c<this._options.defines.length;c++)i.push(this._options.defines[c]);for(c=0;c<this._options.attributes.length;c++)o.push(this._options.attributes[c]);if(e&&e.isVerticesDataPresent(a.b.ColorKind)&&(o.push(a.b.ColorKind),i.push("#define VERTEXCOLOR")),t&&(i.push("#define INSTANCES"),u.a.PrepareAttributesForInstances(o,i)),e&&e.useBones&&e.computeBonesUsingShaders&&e.skeleton){o.push(a.b.MatricesIndicesKind),o.push(a.b.MatricesWeightsKind),e.numBoneInfluencers>4&&(o.push(a.b.MatricesIndicesExtraKind),o.push(a.b.MatricesWeightsExtraKind));var h=e.skeleton;i.push("#define NUM_BONE_INFLUENCERS "+e.numBoneInfluencers),s.addCPUSkinningFallback(0,e),h.isUsingTextureForMatrices?(i.push("#define BONETEXTURE"),-1===this._options.uniforms.indexOf("boneTextureWidth")&&this._options.uniforms.push("boneTextureWidth"),-1===this._options.samplers.indexOf("boneSampler")&&this._options.samplers.push("boneSampler")):(i.push("#define BonesPerMesh "+(h.bones.length+1)),-1===this._options.uniforms.indexOf("mBones")&&this._options.uniforms.push("mBones"))}else i.push("#define NUM_BONE_INFLUENCERS 0");for(var d in this._textures)if(!this._textures[d].isReady())return!1;e&&this._shouldTurnAlphaTestOn(e)&&i.push("#define ALPHATEST");var f=this._effect,p=i.join("\n");return this._effect=r.createEffect(this._shaderPath,{attributes:o,uniformsNames:this._options.uniforms,uniformBuffersNames:this._options.uniformBuffers,samplers:this._options.samplers,defines:p,fallbacks:s,onCompiled:this.onCompiled,onError:this.onError},r),!!this._effect.isReady()&&(f!==this._effect&&n.resetCachedMaterial(),this._renderId=n.getRenderId(),!0)},t.prototype.bindOnlyWorldMatrix=function(e){var t=this.getScene();this._effect&&(-1!==this._options.uniforms.indexOf("world")&&this._effect.setMatrix("world",e),-1!==this._options.uniforms.indexOf("worldView")&&(e.multiplyToRef(t.getViewMatrix(),this._cachedWorldViewMatrix),this._effect.setMatrix("worldView",this._cachedWorldViewMatrix)),-1!==this._options.uniforms.indexOf("worldViewProjection")&&this._effect.setMatrix("worldViewProjection",e.multiply(t.getTransformMatrix())))},t.prototype.bind=function(e,t){if(this.bindOnlyWorldMatrix(e),this._effect&&this.getScene().getCachedMaterial()!==this){var n;for(n in-1!==this._options.uniforms.indexOf("view")&&this._effect.setMatrix("view",this.getScene().getViewMatrix()),-1!==this._options.uniforms.indexOf("projection")&&this._effect.setMatrix("projection",this.getScene().getProjectionMatrix()),-1!==this._options.uniforms.indexOf("viewProjection")&&this._effect.setMatrix("viewProjection",this.getScene().getTransformMatrix()),u.a.BindBonesParameters(t,this._effect),this._textures)this._effect.setTexture(n,this._textures[n]);for(n in this._textureArrays)this._effect.setTextureArray(n,this._textureArrays[n]);for(n in this._ints)this._effect.setInt(n,this._ints[n]);for(n in this._floats)this._effect.setFloat(n,this._floats[n]);for(n in this._floatsArrays)this._effect.setArray(n,this._floatsArrays[n]);for(n in this._colors3)this._effect.setColor3(n,this._colors3[n]);for(n in this._colors3Arrays)this._effect.setArray3(n,this._colors3Arrays[n]);for(n in this._colors4){var r=this._colors4[n];this._effect.setFloat4(n,r.r,r.g,r.b,r.a)}for(n in this._vectors2)this._effect.setVector2(n,this._vectors2[n]);for(n in this._vectors3)this._effect.setVector3(n,this._vectors3[n]);for(n in this._vectors4)this._effect.setVector4(n,this._vectors4[n]);for(n in this._matrices)this._effect.setMatrix(n,this._matrices[n]);for(n in this._matrices3x3)this._effect.setMatrix3x3(n,this._matrices3x3[n]);for(n in this._matrices2x2)this._effect.setMatrix2x2(n,this._matrices2x2[n]);for(n in this._vectors2Arrays)this._effect.setArray2(n,this._vectors2Arrays[n]);for(n in this._vectors3Arrays)this._effect.setArray3(n,this._vectors3Arrays[n])}this._afterBind(t)},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);for(var n in this._textures)t.push(this._textures[n]);for(var n in this._textureArrays)for(var r=this._textureArrays[n],i=0;i<r.length;i++)t.push(r[i]);return t},t.prototype.hasTexture=function(t){if(e.prototype.hasTexture.call(this,t))return!0;for(var n in this._textures)if(this._textures[n]===t)return!0;for(var n in this._textureArrays)for(var r=this._textureArrays[n],i=0;i<r.length;i++)if(r[i]===t)return!0;return!1},t.prototype.clone=function(e){return new t(e,this.getScene(),this._shaderPath,this._options)},t.prototype.dispose=function(t,n,r){if(n){var i;for(i in this._textures)this._textures[i].dispose();for(i in this._textureArrays)for(var o=this._textureArrays[i],a=0;a<o.length;a++)o[a].dispose()}this._textures={},e.prototype.dispose.call(this,t,n,r)},t.prototype.serialize=function(){var e,t=i.a.Serialize(this);for(e in t.customType="BABYLON.ShaderMaterial",t.options=this._options,t.shaderPath=this._shaderPath,t.textures={},this._textures)t.textures[e]=this._textures[e].serialize();for(e in t.textureArrays={},this._textureArrays){t.textureArrays[e]=[];for(var n=this._textureArrays[e],r=0;r<n.length;r++)t.textureArrays[e].push(n[r].serialize())}for(e in t.floats={},this._floats)t.floats[e]=this._floats[e];for(e in t.FloatArrays={},this._floatsArrays)t.FloatArrays[e]=this._floatsArrays[e];for(e in t.colors3={},this._colors3)t.colors3[e]=this._colors3[e].asArray();for(e in t.colors3Arrays={},this._colors3Arrays)t.colors3Arrays[e]=this._colors3Arrays[e];for(e in t.colors4={},this._colors4)t.colors4[e]=this._colors4[e].asArray();for(e in t.vectors2={},this._vectors2)t.vectors2[e]=this._vectors2[e].asArray();for(e in t.vectors3={},this._vectors3)t.vectors3[e]=this._vectors3[e].asArray();for(e in t.vectors4={},this._vectors4)t.vectors4[e]=this._vectors4[e].asArray();for(e in t.matrices={},this._matrices)t.matrices[e]=this._matrices[e].asArray();for(e in t.matrices3x3={},this._matrices3x3)t.matrices3x3[e]=this._matrices3x3[e];for(e in t.matrices2x2={},this._matrices2x2)t.matrices2x2[e]=this._matrices2x2[e];for(e in t.vectors2Arrays={},this._vectors2Arrays)t.vectors2Arrays[e]=this._vectors2Arrays[e];for(e in t.vectors3Arrays={},this._vectors3Arrays)t.vectors3Arrays[e]=this._vectors3Arrays[e];return t},t.Parse=function(e,n,r){var a,u=i.a.Parse(function(){return new t(e.name,n,e.shaderPath,e.options)},e,n,r);for(a in e.textures)u.setTexture(a,s.a.Parse(e.textures[a],n,r));for(a in e.textureArrays){for(var l=e.textureArrays[a],c=new Array,h=0;h<l.length;h++)c.push(s.a.Parse(l[h],n,r));u.setTextureArray(a,c)}for(a in e.floats)u.setFloat(a,e.floats[a]);for(a in e.floatsArrays)u.setFloats(a,e.floatsArrays[a]);for(a in e.colors3)u.setColor3(a,o.e.FromArray(e.colors3[a]));for(a in e.colors3Arrays){var d=e.colors3Arrays[a].reduce(function(e,t,n){return n%3==0?e.push([t]):e[e.length-1].push(t),e},[]).map(function(e){return o.e.FromArray(e)});u.setColor3Array(a,d)}for(a in e.colors4)u.setColor4(a,o.f.FromArray(e.colors4[a]));for(a in e.vectors2)u.setVector2(a,o.w.FromArray(e.vectors2[a]));for(a in e.vectors3)u.setVector3(a,o.x.FromArray(e.vectors3[a]));for(a in e.vectors4)u.setVector4(a,o.y.FromArray(e.vectors4[a]));for(a in e.matrices)u.setMatrix(a,o.j.FromArray(e.matrices[a]));for(a in e.matrices3x3)u.setMatrix3x3(a,e.matrices3x3[a]);for(a in e.matrices2x2)u.setMatrix2x2(a,e.matrices2x2[a]);for(a in e.vectors2Arrays)u.setArray2(a,e.vectors2Arrays[a]);for(a in e.vectors3Arrays)u.setArray3(a,e.vectors3Arrays[a]);return u},t}(c.a);h.a.RegisteredTypes["BABYLON.ShaderMaterial"]=d},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(34),i=n(0),o=function(){function e(e,t,n){this.vectors=r.a.BuildArray(8,i.x.Zero),this.center=i.x.Zero(),this.centerWorld=i.x.Zero(),this.extendSize=i.x.Zero(),this.extendSizeWorld=i.x.Zero(),this.directions=r.a.BuildArray(3,i.x.Zero),this.vectorsWorld=r.a.BuildArray(8,i.x.Zero),this.minimumWorld=i.x.Zero(),this.maximumWorld=i.x.Zero(),this.minimum=i.x.Zero(),this.maximum=i.x.Zero(),this.reConstruct(e,t,n)}return e.prototype.reConstruct=function(e,t,n){var r=e.x,o=e.y,a=e.z,s=t.x,u=t.y,l=t.z,c=this.vectors;this.minimum.copyFromFloats(r,o,a),this.maximum.copyFromFloats(s,u,l),c[0].copyFromFloats(r,o,a),c[1].copyFromFloats(s,u,l),c[2].copyFromFloats(s,o,a),c[3].copyFromFloats(r,u,a),c[4].copyFromFloats(r,o,l),c[5].copyFromFloats(s,u,a),c[6].copyFromFloats(r,u,l),c[7].copyFromFloats(s,o,l),t.addToRef(e,this.center).scaleInPlace(.5),t.subtractToRef(e,this.extendSize).scaleInPlace(.5),this._worldMatrix=n||i.j.IdentityReadOnly,this._update(this._worldMatrix)},e.prototype.scale=function(t){var n=e.TmpVector3,r=this.maximum.subtractToRef(this.minimum,n[0]),i=r.length();r.normalizeFromLength(i);var o=r.scaleInPlace(i*t*.5),a=this.center.subtractToRef(o,n[1]),s=this.center.addToRef(o,n[2]);return this.reConstruct(a,s,this._worldMatrix),this},e.prototype.getWorldMatrix=function(){return this._worldMatrix},e.prototype._update=function(e){var t=this.minimumWorld,n=this.maximumWorld,r=this.directions,o=this.vectorsWorld,a=this.vectors;if(e.isIdentity()){for(t.copyFrom(this.minimum),n.copyFrom(this.maximum),s=0;s<8;++s)o[s].copyFrom(a[s]);this.extendSizeWorld.copyFrom(this.extendSize),this.centerWorld.copyFrom(this.center)}else{t.setAll(Number.MAX_VALUE),n.setAll(-Number.MAX_VALUE);for(var s=0;s<8;++s){var u=o[s];i.x.TransformCoordinatesToRef(a[s],e,u),t.minimizeInPlace(u),n.maximizeInPlace(u)}n.subtractToRef(t,this.extendSizeWorld).scaleInPlace(.5),n.addToRef(t,this.centerWorld).scaleInPlace(.5)}i.x.FromArrayToRef(e.m,0,r[0]),i.x.FromArrayToRef(e.m,4,r[1]),i.x.FromArrayToRef(e.m,8,r[2]),this._worldMatrix=e},e.prototype.isInFrustum=function(t){return e.IsInFrustum(this.vectorsWorld,t)},e.prototype.isCompletelyInFrustum=function(t){return e.IsCompletelyInFrustum(this.vectorsWorld,t)},e.prototype.intersectsPoint=function(e){var t=this.minimumWorld,n=this.maximumWorld,r=e.x,o=e.y,a=e.z,s=-i.h;return!(n.x-r<s||s>r-t.x||n.y-o<s||s>o-t.y||n.z-a<s||s>a-t.z)},e.prototype.intersectsSphere=function(t){return e.IntersectsSphere(this.minimumWorld,this.maximumWorld,t.centerWorld,t.radiusWorld)},e.prototype.intersectsMinMax=function(e,t){var n=this.minimumWorld,r=this.maximumWorld;return!(r.x<e.x||n.x>t.x||r.y<e.y||n.y>t.y||r.z<e.z||n.z>t.z)},e.Intersects=function(e,t){return e.intersectsMinMax(t.minimumWorld,t.maximumWorld)},e.IntersectsSphere=function(t,n,r,o){var a=e.TmpVector3[0];return i.x.ClampToRef(r,t,n,a),i.x.DistanceSquared(r,a)<=o*o},e.IsCompletelyInFrustum=function(e,t){for(var n=0;n<6;++n)for(var r=t[n],i=0;i<8;++i)if(r.dotCoordinate(e[i])<0)return!1;return!0},e.IsInFrustum=function(e,t){for(var n=0;n<6;++n){for(var r=!0,i=t[n],o=0;o<8;++o)if(i.dotCoordinate(e[o])>=0){r=!1;break}if(r)return!1}return!0},e.TmpVector3=r.a.BuildArray(3,i.x.Zero),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){this.references=0,this.capacity=0,this.is32Bits=!1}return Object.defineProperty(e.prototype,"underlyingResource",{get:function(){return null},enumerable:!0,configurable:!0}),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(3),i=function(){function e(){this.hoverCursor="",this.actions=new Array,this.isRecursive=!1}return Object.defineProperty(e,"HasTriggers",{get:function(){for(var t in e.Triggers)if(e.Triggers.hasOwnProperty(t))return!0;return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HasPickTriggers",{get:function(){for(var t in e.Triggers)if(e.Triggers.hasOwnProperty(t)){var n=parseInt(t);if(n>=r.a.ACTION_OnPickTrigger&&n<=r.a.ACTION_OnPickUpTrigger)return!0}return!1},enumerable:!0,configurable:!0}),e.HasSpecificTrigger=function(t){for(var n in e.Triggers)if(e.Triggers.hasOwnProperty(n)&&parseInt(n)===t)return!0;return!1},e.Triggers={},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(11),i=n(13);i.a.CreatePlane=function(e){var t=[],n=[],r=[],o=[],a=0===e.sideOrientation?0:e.sideOrientation||i.a.DEFAULTSIDE,s=(e.width||e.size||1)/2,u=(e.height||e.size||1)/2;n.push(-s,-u,0),r.push(0,0,-1),o.push(0,0),n.push(s,-u,0),r.push(0,0,-1),o.push(1,0),n.push(s,u,0),r.push(0,0,-1),o.push(1,1),n.push(-s,u,0),r.push(0,0,-1),o.push(0,1),t.push(0),t.push(1),t.push(2),t.push(0),t.push(2),t.push(3),i.a._ComputeSides(a,n,t,r,o,e.frontUVs,e.backUVs);var l=new i.a;return l.indices=t,l.positions=n,l.normals=r,l.uvs=o,l},r.a.CreatePlane=function(e,t,n,r,i){return o.CreatePlane(e,{size:t,width:t,height:t,sideOrientation:i,updatable:r},n)};var o=function(){function e(){}return e.CreatePlane=function(e,t,n){void 0===n&&(n=null);var o=new r.a(e,n);return t.sideOrientation=r.a._GetDefaultSideOrientation(t.sideOrientation),o._originalBuilderSideOrientation=t.sideOrientation,i.a.CreatePlane(t).applyToMesh(o,t.updatable),t.sourcePlane&&(o.translate(t.sourcePlane.normal,-t.sourcePlane.d),o.setDirection(t.sourcePlane.normal.scale(-1))),o},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e,t,n){this.bu=e,this.bv=t,this.distance=n,this.faceId=0,this.subMeshId=0}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(34),i=n(0),o=function(){function e(e,t,n){this.center=i.x.Zero(),this.centerWorld=i.x.Zero(),this.minimum=i.x.Zero(),this.maximum=i.x.Zero(),this.reConstruct(e,t,n)}return e.prototype.reConstruct=function(e,t,n){this.minimum.copyFrom(e),this.maximum.copyFrom(t);var r=i.x.Distance(e,t);t.addToRef(e,this.center).scaleInPlace(.5),this.radius=.5*r,this._update(n||i.j.IdentityReadOnly)},e.prototype.scale=function(t){var n=e.TmpVector3,r=n[0].setAll(this.radius*t),i=this.center.subtractToRef(r,n[1]),o=this.center.addToRef(r,n[2]);return this.reConstruct(i,o,this._worldMatrix),this},e.prototype.getWorldMatrix=function(){return this._worldMatrix},e.prototype._update=function(t){if(t.isIdentity())this.centerWorld.copyFrom(this.center),this.radiusWorld=this.radius;else{i.x.TransformCoordinatesToRef(this.center,t,this.centerWorld);var n=e.TmpVector3[0];i.x.TransformNormalFromFloatsToRef(1,1,1,t,n),this.radiusWorld=Math.max(Math.abs(n.x),Math.abs(n.y),Math.abs(n.z))*this.radius}},e.prototype.isInFrustum=function(e){for(var t=this.centerWorld,n=this.radiusWorld,r=0;r<6;r++)if(e[r].dotCoordinate(t)<=-n)return!1;return!0},e.prototype.isCenterInFrustum=function(e){for(var t=this.centerWorld,n=0;n<6;n++)if(e[n].dotCoordinate(t)<0)return!1;return!0},e.prototype.intersectsPoint=function(e){var t=i.x.DistanceSquared(this.centerWorld,e);return!(this.radiusWorld*this.radiusWorld<t)},e.Intersects=function(e,t){var n=i.x.DistanceSquared(e.centerWorld,t.centerWorld),r=e.radiusWorld+t.radiusWorld;return!(r*r<n)},e.TmpVector3=r.a.BuildArray(3,i.x.Zero),e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(20),i=n(4),o=n(3),a=function(){function e(e){this._vertexBuffers={},this._scene=e}return e.prototype._prepareBuffers=function(){if(!this._vertexBuffers[i.b.PositionKind]){var e=[];e.push(1,1),e.push(-1,1),e.push(-1,-1),e.push(1,-1),this._vertexBuffers[i.b.PositionKind]=new i.b(this._scene.getEngine(),e,i.b.PositionKind,!1,!1,2),this._buildIndexBuffer()}},e.prototype._buildIndexBuffer=function(){var e=[];e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),this._indexBuffer=this._scene.getEngine().createIndexBuffer(e)},e.prototype._rebuild=function(){var e=this._vertexBuffers[i.b.PositionKind];e&&(e._rebuild(),this._buildIndexBuffer())},e.prototype._prepareFrame=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null);var n=this._scene.activeCamera;return!(!n||!(t=t||n._postProcesses.filter(function(e){return null!=e}))||0===t.length||!this._scene.postProcessesEnabled||(t[0].activate(n,e,null!=t),0))},e.prototype.directRender=function(e,t,n,i,o){void 0===t&&(t=null),void 0===n&&(n=!1),void 0===i&&(i=0),void 0===o&&(o=0);for(var a=this._scene.getEngine(),s=0;s<e.length;s++){s<e.length-1?e[s+1].activate(this._scene.activeCamera,t):t?a.bindFramebuffer(t,i,void 0,void 0,n,void 0,o):a.restoreDefaultFramebuffer();var u=e[s],l=u.apply();l&&(u.onBeforeRenderObservable.notifyObservers(l),this._prepareBuffers(),a.bindBuffers(this._vertexBuffers,this._indexBuffer,l),a.drawElementsType(r.a.TriangleFillMode,0,6),u.onAfterRenderObservable.notifyObservers(l))}a.setDepthBuffer(!0),a.setDepthWrite(!0)},e.prototype._finalizeFrame=function(e,t,n,i,a){void 0===a&&(a=!1);var s=this._scene.activeCamera;if(s&&0!==(i=i||s._postProcesses.filter(function(e){return null!=e})).length&&this._scene.postProcessesEnabled){for(var u=this._scene.getEngine(),l=0,c=i.length;l<c;l++){var h=i[l];if(l<c-1?h._outputTexture=i[l+1].activate(s,t):t?(u.bindFramebuffer(t,n,void 0,void 0,a),h._outputTexture=t):(u.restoreDefaultFramebuffer(),h._outputTexture=null),e)break;var d=h.apply();d&&(h.onBeforeRenderObservable.notifyObservers(d),this._prepareBuffers(),u.bindBuffers(this._vertexBuffers,this._indexBuffer,d),u.drawElementsType(r.a.TriangleFillMode,0,6),h.onAfterRenderObservable.notifyObservers(d))}u.setDepthBuffer(!0),u.setDepthWrite(!0),u.setAlphaMode(o.a.ALPHA_DISABLE)}},e.prototype.dispose=function(){var e=this._vertexBuffers[i.b.PositionKind];e&&(e.dispose(),this._vertexBuffers[i.b.PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null)},e}()},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.lightFragmentDeclaration="#ifdef LIGHT{X}\nuniform vec4 vLightData{X};\nuniform vec4 vLightDiffuse{X};\n#ifdef SPECULARTERM\nuniform vec3 vLightSpecular{X};\n#else\nvec3 vLightSpecular{X}=vec3(0.);\n#endif\n#ifdef SHADOW{X}\n#if defined(SHADOWCUBE{X})\nuniform samplerCube shadowSampler{X};\n#else\nvarying vec4 vPositionFromLight{X};\nvarying float vDepthMetric{X};\n#if defined(SHADOWPCSS{X})\nuniform highp sampler2DShadow shadowSampler{X};\nuniform highp sampler2D depthSampler{X};\n#elif defined(SHADOWPCF{X})\nuniform highp sampler2DShadow shadowSampler{X};\n#else\nuniform sampler2D shadowSampler{X};\n#endif\nuniform mat4 lightMatrix{X};\n#endif\nuniform vec4 shadowsInfo{X};\nuniform vec2 depthValues{X};\n#endif\n#ifdef SPOTLIGHT{X}\nuniform vec4 vLightDirection{X};\nuniform vec4 vLightFalloff{X};\n#elif defined(POINTLIGHT{X})\nuniform vec4 vLightFalloff{X};\n#elif defined(HEMILIGHT{X})\nuniform vec3 vLightGround{X};\n#endif\n#ifdef PROJECTEDLIGHTTEXTURE{X}\nuniform mat4 textureProjectionMatrix{X};\nuniform sampler2D projectionLightSampler{X};\n#endif\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.lightUboDeclaration="#ifdef LIGHT{X}\nuniform Light{X}\n{\nvec4 vLightData;\nvec4 vLightDiffuse;\nvec3 vLightSpecular;\n#ifdef SPOTLIGHT{X}\nvec4 vLightDirection;\nvec4 vLightFalloff;\n#elif defined(POINTLIGHT{X})\nvec4 vLightFalloff;\n#elif defined(HEMILIGHT{X})\nvec3 vLightGround;\n#endif\nvec4 shadowsInfo;\nvec2 depthValues;\n} light{X};\n#ifdef PROJECTEDLIGHTTEXTURE{X}\nuniform mat4 textureProjectionMatrix{X};\nuniform sampler2D projectionLightSampler{X};\n#endif\n#ifdef SHADOW{X}\n#if defined(SHADOWCUBE{X})\nuniform samplerCube shadowSampler{X};\n#else\nvarying vec4 vPositionFromLight{X};\nvarying float vDepthMetric{X};\n#if defined(SHADOWPCSS{X})\nuniform highp sampler2DShadow shadowSampler{X};\nuniform highp sampler2D depthSampler{X};\n#elif defined(SHADOWPCF{X})\nuniform highp sampler2DShadow shadowSampler{X};\n#else\nuniform sampler2D shadowSampler{X};\n#endif\nuniform mat4 lightMatrix{X};\n#endif\n#endif\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.imageProcessingDeclaration="#ifdef EXPOSURE\nuniform float exposureLinear;\n#endif\n#ifdef CONTRAST\nuniform float contrast;\n#endif\n#ifdef VIGNETTE\nuniform vec2 vInverseScreenSize;\nuniform vec4 vignetteSettings1;\nuniform vec4 vignetteSettings2;\n#endif\n#ifdef COLORCURVES\nuniform vec4 vCameraColorCurveNegative;\nuniform vec4 vCameraColorCurveNeutral;\nuniform vec4 vCameraColorCurvePositive;\n#endif\n#ifdef COLORGRADING\n#ifdef COLORGRADING3D\nuniform highp sampler3D txColorTransform;\n#else\nuniform sampler2D txColorTransform;\n#endif\nuniform vec4 colorTransformSettings;\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.imageProcessingFunctions="#if defined(COLORGRADING) && !defined(COLORGRADING3D)\n\nvec3 sampleTexture3D(sampler2D colorTransform,vec3 color,vec2 sampler3dSetting)\n{\nfloat sliceSize=2.0*sampler3dSetting.x;\n#ifdef SAMPLER3DGREENDEPTH\nfloat sliceContinuous=(color.g-sampler3dSetting.x)*sampler3dSetting.y;\n#else\nfloat sliceContinuous=(color.b-sampler3dSetting.x)*sampler3dSetting.y;\n#endif\nfloat sliceInteger=floor(sliceContinuous);\n\n\nfloat sliceFraction=sliceContinuous-sliceInteger;\n#ifdef SAMPLER3DGREENDEPTH\nvec2 sliceUV=color.rb;\n#else\nvec2 sliceUV=color.rg;\n#endif\nsliceUV.x*=sliceSize;\nsliceUV.x+=sliceInteger*sliceSize;\nsliceUV=saturate(sliceUV);\nvec4 slice0Color=texture2D(colorTransform,sliceUV);\nsliceUV.x+=sliceSize;\nsliceUV=saturate(sliceUV);\nvec4 slice1Color=texture2D(colorTransform,sliceUV);\nvec3 result=mix(slice0Color.rgb,slice1Color.rgb,sliceFraction);\n#ifdef SAMPLER3DBGRMAP\ncolor.rgb=result.rgb;\n#else\ncolor.rgb=result.bgr;\n#endif\nreturn color;\n}\n#endif\n#ifdef TONEMAPPING_ACES\n\n\n\n\n\nconst mat3 ACESInputMat=mat3(\nvec3(0.59719,0.07600,0.02840),\nvec3(0.35458,0.90834,0.13383),\nvec3(0.04823,0.01566,0.83777)\n);\n\nconst mat3 ACESOutputMat=mat3(\nvec3( 1.60475,-0.10208,-0.00327),\nvec3(-0.53108,1.10813,-0.07276),\nvec3(-0.07367,-0.00605,1.07602)\n);\nvec3 RRTAndODTFit(vec3 v)\n{\nvec3 a=v*(v+0.0245786)-0.000090537;\nvec3 b=v*(0.983729*v+0.4329510)+0.238081;\nreturn a/b;\n}\nvec3 ACESFitted(vec3 color)\n{\ncolor=ACESInputMat*color;\n\ncolor=RRTAndODTFit(color);\ncolor=ACESOutputMat*color;\n\ncolor=saturate(color);\nreturn color;\n}\n#endif\nvec4 applyImageProcessing(vec4 result) {\n#ifdef EXPOSURE\nresult.rgb*=exposureLinear;\n#endif\n#ifdef VIGNETTE\n\nvec2 viewportXY=gl_FragCoord.xy*vInverseScreenSize;\nviewportXY=viewportXY*2.0-1.0;\nvec3 vignetteXY1=vec3(viewportXY*vignetteSettings1.xy+vignetteSettings1.zw,1.0);\nfloat vignetteTerm=dot(vignetteXY1,vignetteXY1);\nfloat vignette=pow(vignetteTerm,vignetteSettings2.w);\n\nvec3 vignetteColor=vignetteSettings2.rgb;\n#ifdef VIGNETTEBLENDMODEMULTIPLY\nvec3 vignetteColorMultiplier=mix(vignetteColor,vec3(1,1,1),vignette);\nresult.rgb*=vignetteColorMultiplier;\n#endif\n#ifdef VIGNETTEBLENDMODEOPAQUE\nresult.rgb=mix(vignetteColor,result.rgb,vignette);\n#endif\n#endif\n#ifdef TONEMAPPING\n#ifdef TONEMAPPING_ACES\nresult.rgb=ACESFitted(result.rgb);\n#else\nconst float tonemappingCalibration=1.590579;\nresult.rgb=1.0-exp2(-tonemappingCalibration*result.rgb);\n#endif\n#endif\n\nresult.rgb=toGammaSpace(result.rgb);\nresult.rgb=saturate(result.rgb);\n#ifdef CONTRAST\n\nvec3 resultHighContrast=result.rgb*result.rgb*(3.0-2.0*result.rgb);\nif (contrast<1.0) {\n\nresult.rgb=mix(vec3(0.5,0.5,0.5),result.rgb,contrast);\n} else {\n\nresult.rgb=mix(result.rgb,resultHighContrast,contrast-1.0);\n}\n#endif\n\n#ifdef COLORGRADING\nvec3 colorTransformInput=result.rgb*colorTransformSettings.xxx+colorTransformSettings.yyy;\n#ifdef COLORGRADING3D\nvec3 colorTransformOutput=texture(txColorTransform,colorTransformInput).rgb;\n#else\nvec3 colorTransformOutput=sampleTexture3D(txColorTransform,colorTransformInput,colorTransformSettings.yz).rgb;\n#endif\nresult.rgb=mix(result.rgb,colorTransformOutput,colorTransformSettings.www);\n#endif\n#ifdef COLORCURVES\n\nfloat luma=getLuminance(result.rgb);\nvec2 curveMix=clamp(vec2(luma*3.0-1.5,luma*-3.0+1.5),vec2(0.0),vec2(1.0));\nvec4 colorCurve=vCameraColorCurveNeutral+curveMix.x*vCameraColorCurvePositive-curveMix.y*vCameraColorCurveNegative;\nresult.rgb*=colorCurve.rgb;\nresult.rgb=mix(vec3(luma),result.rgb,colorCurve.a);\n#endif\nreturn result;\n}"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.logDepthDeclaration="#ifdef LOGARITHMICDEPTH\nuniform float logarithmicDepthConstant;\nvarying float vFragmentDepth;\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.clipPlaneFragment="#ifdef CLIPPLANE\nif (fClipDistance>0.0)\n{\ndiscard;\n}\n#endif\n#ifdef CLIPPLANE2\nif (fClipDistance2>0.0)\n{\ndiscard;\n}\n#endif\n#ifdef CLIPPLANE3\nif (fClipDistance3>0.0)\n{\ndiscard;\n}\n#endif\n#ifdef CLIPPLANE4\nif (fClipDistance4>0.0)\n{\ndiscard;\n}\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.clipPlaneVertex="#ifdef CLIPPLANE\nfClipDistance=dot(worldPos,vClipPlane);\n#endif\n#ifdef CLIPPLANE2\nfClipDistance2=dot(worldPos,vClipPlane2);\n#endif\n#ifdef CLIPPLANE3\nfClipDistance3=dot(worldPos,vClipPlane3);\n#endif\n#ifdef CLIPPLANE4\nfClipDistance4=dot(worldPos,vClipPlane4);\n#endif"},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=n(109),i=function(){},o=function(){function e(t){this._useSceneAutoClearSetup=!1,this._renderingGroups=new Array,this._autoClearDepthStencil={},this._customOpaqueSortCompareFn={},this._customAlphaTestSortCompareFn={},this._customTransparentSortCompareFn={},this._renderingGroupInfo=new i,this._scene=t;for(var n=e.MIN_RENDERINGGROUPS;n<e.MAX_RENDERINGGROUPS;n++)this._autoClearDepthStencil[n]={autoClear:!0,depth:!0,stencil:!0}}return e.prototype._clearDepthStencilBuffer=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this._depthStencilBufferAlreadyCleaned||(this._scene.getEngine().clear(null,!1,e,t),this._depthStencilBufferAlreadyCleaned=!0)},e.prototype.render=function(t,n,r,i){var o=this._renderingGroupInfo;if(o.scene=this._scene,o.camera=this._scene.activeCamera,this._scene.spriteManagers&&i)for(var a=0;a<this._scene.spriteManagers.length;a++)this.dispatchSprites(this._scene.spriteManagers[a]);for(a=e.MIN_RENDERINGGROUPS;a<e.MAX_RENDERINGGROUPS;a++){this._depthStencilBufferAlreadyCleaned=a===e.MIN_RENDERINGGROUPS;var s=this._renderingGroups[a];if(s){var u=Math.pow(2,a);if(o.renderingGroupId=a,this._scene.onBeforeRenderingGroupObservable.notifyObservers(o,u),e.AUTOCLEAR){var l=this._useSceneAutoClearSetup?this._scene.getAutoClearDepthStencilSetup(a):this._autoClearDepthStencil[a];l&&l.autoClear&&this._clearDepthStencilBuffer(l.depth,l.stencil)}for(var c=0,h=this._scene._beforeRenderingGroupDrawStage;c<h.length;c++)h[c].action(a);s.render(t,i,r,n);for(var d=0,f=this._scene._afterRenderingGroupDrawStage;d<f.length;d++)f[d].action(a);this._scene.onAfterRenderingGroupObservable.notifyObservers(o,u)}}},e.prototype.reset=function(){for(var t=e.MIN_RENDERINGGROUPS;t<e.MAX_RENDERINGGROUPS;t++){var n=this._renderingGroups[t];n&&n.prepare()}},e.prototype.dispose=function(){this.freeRenderingGroups(),this._renderingGroups.length=0,this._renderingGroupInfo=null},e.prototype.freeRenderingGroups=function(){for(var t=e.MIN_RENDERINGGROUPS;t<e.MAX_RENDERINGGROUPS;t++){var n=this._renderingGroups[t];n&&n.dispose()}},e.prototype._prepareRenderingGroup=function(e){void 0===this._renderingGroups[e]&&(this._renderingGroups[e]=new r.a(e,this._scene,this._customOpaqueSortCompareFn[e],this._customAlphaTestSortCompareFn[e],this._customTransparentSortCompareFn[e]))},e.prototype.dispatchSprites=function(e){var t=e.renderingGroupId||0;this._prepareRenderingGroup(t),this._renderingGroups[t].dispatchSprites(e)},e.prototype.dispatchParticles=function(e){var t=e.renderingGroupId||0;this._prepareRenderingGroup(t),this._renderingGroups[t].dispatchParticles(e)},e.prototype.dispatch=function(e,t,n){void 0===t&&(t=e.getMesh());var r=t.renderingGroupId||0;this._prepareRenderingGroup(r),this._renderingGroups[r].dispatch(e,t,n)},e.prototype.setRenderingOrder=function(e,t,n,r){if(void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),this._customOpaqueSortCompareFn[e]=t,this._customAlphaTestSortCompareFn[e]=n,this._customTransparentSortCompareFn[e]=r,this._renderingGroups[e]){var i=this._renderingGroups[e];i.opaqueSortCompareFn=this._customOpaqueSortCompareFn[e],i.alphaTestSortCompareFn=this._customAlphaTestSortCompareFn[e],i.transparentSortCompareFn=this._customTransparentSortCompareFn[e]}},e.prototype.setRenderingAutoClearDepthStencil=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0),this._autoClearDepthStencil[e]={autoClear:t,depth:n,stencil:r}},e.prototype.getAutoClearDepthStencilSetup=function(e){return this._autoClearDepthStencil[e]},e.MAX_RENDERINGGROUPS=4,e.MIN_RENDERINGGROUPS=0,e.AUTOCLEAR=!0,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(1),i=n(2),o=n(0),a=function(){function e(){this._dirty=!0,this._tempColor=new o.f(0,0,0,0),this._globalCurve=new o.f(0,0,0,0),this._highlightsCurve=new o.f(0,0,0,0),this._midtonesCurve=new o.f(0,0,0,0),this._shadowsCurve=new o.f(0,0,0,0),this._positiveCurve=new o.f(0,0,0,0),this._negativeCurve=new o.f(0,0,0,0),this._globalHue=30,this._globalDensity=0,this._globalSaturation=0,this._globalExposure=0,this._highlightsHue=30,this._highlightsDensity=0,this._highlightsSaturation=0,this._highlightsExposure=0,this._midtonesHue=30,this._midtonesDensity=0,this._midtonesSaturation=0,this._midtonesExposure=0,this._shadowsHue=30,this._shadowsDensity=0,this._shadowsSaturation=0,this._shadowsExposure=0}return Object.defineProperty(e.prototype,"globalHue",{get:function(){return this._globalHue},set:function(e){this._globalHue=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalDensity",{get:function(){return this._globalDensity},set:function(e){this._globalDensity=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalSaturation",{get:function(){return this._globalSaturation},set:function(e){this._globalSaturation=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"globalExposure",{get:function(){return this._globalExposure},set:function(e){this._globalExposure=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightsHue",{get:function(){return this._highlightsHue},set:function(e){this._highlightsHue=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightsDensity",{get:function(){return this._highlightsDensity},set:function(e){this._highlightsDensity=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightsSaturation",{get:function(){return this._highlightsSaturation},set:function(e){this._highlightsSaturation=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highlightsExposure",{get:function(){return this._highlightsExposure},set:function(e){this._highlightsExposure=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midtonesHue",{get:function(){return this._midtonesHue},set:function(e){this._midtonesHue=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midtonesDensity",{get:function(){return this._midtonesDensity},set:function(e){this._midtonesDensity=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midtonesSaturation",{get:function(){return this._midtonesSaturation},set:function(e){this._midtonesSaturation=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"midtonesExposure",{get:function(){return this._midtonesExposure},set:function(e){this._midtonesExposure=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowsHue",{get:function(){return this._shadowsHue},set:function(e){this._shadowsHue=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowsDensity",{get:function(){return this._shadowsDensity},set:function(e){this._shadowsDensity=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowsSaturation",{get:function(){return this._shadowsSaturation},set:function(e){this._shadowsSaturation=e,this._dirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shadowsExposure",{get:function(){return this._shadowsExposure},set:function(e){this._shadowsExposure=e,this._dirty=!0},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"ColorCurves"},e.Bind=function(e,t,n,r,i){void 0===n&&(n="vCameraColorCurvePositive"),void 0===r&&(r="vCameraColorCurveNeutral"),void 0===i&&(i="vCameraColorCurveNegative"),e._dirty&&(e._dirty=!1,e.getColorGradingDataToRef(e._globalHue,e._globalDensity,e._globalSaturation,e._globalExposure,e._globalCurve),e.getColorGradingDataToRef(e._highlightsHue,e._highlightsDensity,e._highlightsSaturation,e._highlightsExposure,e._tempColor),e._tempColor.multiplyToRef(e._globalCurve,e._highlightsCurve),e.getColorGradingDataToRef(e._midtonesHue,e._midtonesDensity,e._midtonesSaturation,e._midtonesExposure,e._tempColor),e._tempColor.multiplyToRef(e._globalCurve,e._midtonesCurve),e.getColorGradingDataToRef(e._shadowsHue,e._shadowsDensity,e._shadowsSaturation,e._shadowsExposure,e._tempColor),e._tempColor.multiplyToRef(e._globalCurve,e._shadowsCurve),e._highlightsCurve.subtractToRef(e._midtonesCurve,e._positiveCurve),e._midtonesCurve.subtractToRef(e._shadowsCurve,e._negativeCurve)),t&&(t.setFloat4(n,e._positiveCurve.r,e._positiveCurve.g,e._positiveCurve.b,e._positiveCurve.a),t.setFloat4(r,e._midtonesCurve.r,e._midtonesCurve.g,e._midtonesCurve.b,e._midtonesCurve.a),t.setFloat4(i,e._negativeCurve.r,e._negativeCurve.g,e._negativeCurve.b,e._negativeCurve.a))},e.PrepareUniforms=function(e){e.push("vCameraColorCurveNeutral","vCameraColorCurvePositive","vCameraColorCurveNegative")},e.prototype.getColorGradingDataToRef=function(t,n,r,i,o){null!=t&&(t=e.clamp(t,0,360),n=e.clamp(n,-100,100),r=e.clamp(r,-100,100),i=e.clamp(i,-100,100),n=e.applyColorGradingSliderNonlinear(n),n*=.5,i=e.applyColorGradingSliderNonlinear(i),n<0&&(n*=-1,t=(t+180)%360),e.fromHSBToRef(t,n,50+.25*i,o),o.scaleToRef(2,o),o.a=1+.01*r)},e.applyColorGradingSliderNonlinear=function(e){e/=100;var t=Math.abs(e);return t=Math.pow(t,2),e<0&&(t*=-1),100*t},e.fromHSBToRef=function(t,n,r,i){var o=e.clamp(t,0,360),a=e.clamp(n/100,0,1),s=e.clamp(r/100,0,1);if(0===a)i.r=s,i.g=s,i.b=s;else{o/=60;var u=Math.floor(o),l=o-u,c=s*(1-a),h=s*(1-a*l),d=s*(1-a*(1-l));switch(u){case 0:i.r=s,i.g=d,i.b=c;break;case 1:i.r=h,i.g=s,i.b=c;break;case 2:i.r=c,i.g=s,i.b=d;break;case 3:i.r=c,i.g=h,i.b=s;break;case 4:i.r=d,i.g=c,i.b=s;break;default:i.r=s,i.g=c,i.b=h}}i.a=1},e.clamp=function(e,t,n){return Math.min(Math.max(e,t),n)},e.prototype.clone=function(){return i.a.Clone(function(){return new e},this)},e.prototype.serialize=function(){return i.a.Serialize(this)},e.Parse=function(t){return i.a.Parse(function(){return new e},t,null,null)},r.c([Object(i.c)()],e.prototype,"_globalHue",void 0),r.c([Object(i.c)()],e.prototype,"_globalDensity",void 0),r.c([Object(i.c)()],e.prototype,"_globalSaturation",void 0),r.c([Object(i.c)()],e.prototype,"_globalExposure",void 0),r.c([Object(i.c)()],e.prototype,"_highlightsHue",void 0),r.c([Object(i.c)()],e.prototype,"_highlightsDensity",void 0),r.c([Object(i.c)()],e.prototype,"_highlightsSaturation",void 0),r.c([Object(i.c)()],e.prototype,"_highlightsExposure",void 0),r.c([Object(i.c)()],e.prototype,"_midtonesHue",void 0),r.c([Object(i.c)()],e.prototype,"_midtonesDensity",void 0),r.c([Object(i.c)()],e.prototype,"_midtonesSaturation",void 0),r.c([Object(i.c)()],e.prototype,"_midtonesExposure",void 0),e}();i.a._ColorCurvesParser=a.Parse},function(e,t,n){"use strict";var r=function(){function e(){this._isAlphaBlendDirty=!1,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1,this._alphaBlend=!1,this._blendFunctionParameters=new Array(4),this._blendEquationParameters=new Array(2),this._blendConstants=new Array(4),this.reset()}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isAlphaBlendDirty||this._isBlendFunctionParametersDirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaBlend",{get:function(){return this._alphaBlend},set:function(e){this._alphaBlend!==e&&(this._alphaBlend=e,this._isAlphaBlendDirty=!0)},enumerable:!0,configurable:!0}),e.prototype.setAlphaBlendConstants=function(e,t,n,r){this._blendConstants[0]===e&&this._blendConstants[1]===t&&this._blendConstants[2]===n&&this._blendConstants[3]===r||(this._blendConstants[0]=e,this._blendConstants[1]=t,this._blendConstants[2]=n,this._blendConstants[3]=r,this._isBlendConstantsDirty=!0)},e.prototype.setAlphaBlendFunctionParameters=function(e,t,n,r){this._blendFunctionParameters[0]===e&&this._blendFunctionParameters[1]===t&&this._blendFunctionParameters[2]===n&&this._blendFunctionParameters[3]===r||(this._blendFunctionParameters[0]=e,this._blendFunctionParameters[1]=t,this._blendFunctionParameters[2]=n,this._blendFunctionParameters[3]=r,this._isBlendFunctionParametersDirty=!0)},e.prototype.setAlphaEquationParameters=function(e,t){this._blendEquationParameters[0]===e&&this._blendEquationParameters[1]===t||(this._blendEquationParameters[0]=e,this._blendEquationParameters[1]=t,this._isBlendEquationParametersDirty=!0)},e.prototype.reset=function(){this._alphaBlend=!1,this._blendFunctionParameters[0]=null,this._blendFunctionParameters[1]=null,this._blendFunctionParameters[2]=null,this._blendFunctionParameters[3]=null,this._blendEquationParameters[0]=null,this._blendEquationParameters[1]=null,this._blendConstants[0]=null,this._blendConstants[1]=null,this._blendConstants[2]=null,this._blendConstants[3]=null,this._isAlphaBlendDirty=!0,this._isBlendFunctionParametersDirty=!1,this._isBlendEquationParametersDirty=!1,this._isBlendConstantsDirty=!1},e.prototype.apply=function(e){this.isDirty&&(this._isAlphaBlendDirty&&(this._alphaBlend?e.enable(e.BLEND):e.disable(e.BLEND),this._isAlphaBlendDirty=!1),this._isBlendFunctionParametersDirty&&(e.blendFuncSeparate(this._blendFunctionParameters[0],this._blendFunctionParameters[1],this._blendFunctionParameters[2],this._blendFunctionParameters[3]),this._isBlendFunctionParametersDirty=!1),this._isBlendEquationParametersDirty&&(e.blendEquationSeparate(this._blendEquationParameters[0],this._blendEquationParameters[1]),this._isBlendEquationParametersDirty=!1),this._isBlendConstantsDirty&&(e.blendColor(this._blendConstants[0],this._blendConstants[1],this._blendConstants[2],this._blendConstants[3]),this._isBlendConstantsDirty=!1))},e}(),i=function(){function e(){this._isDepthTestDirty=!1,this._isDepthMaskDirty=!1,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1,this.reset()}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isDepthFuncDirty||this._isDepthTestDirty||this._isDepthMaskDirty||this._isCullFaceDirty||this._isCullDirty||this._isZOffsetDirty||this._isFrontFaceDirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zOffset",{get:function(){return this._zOffset},set:function(e){this._zOffset!==e&&(this._zOffset=e,this._isZOffsetDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cullFace",{get:function(){return this._cullFace},set:function(e){this._cullFace!==e&&(this._cullFace=e,this._isCullFaceDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cull",{get:function(){return this._cull},set:function(e){this._cull!==e&&(this._cull=e,this._isCullDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthFunc",{get:function(){return this._depthFunc},set:function(e){this._depthFunc!==e&&(this._depthFunc=e,this._isDepthFuncDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return this._depthMask},set:function(e){this._depthMask!==e&&(this._depthMask=e,this._isDepthMaskDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return this._depthTest},set:function(e){this._depthTest!==e&&(this._depthTest=e,this._isDepthTestDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frontFace",{get:function(){return this._frontFace},set:function(e){this._frontFace!==e&&(this._frontFace=e,this._isFrontFaceDirty=!0)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._depthMask=!0,this._depthTest=!0,this._depthFunc=null,this._cullFace=null,this._cull=null,this._zOffset=0,this._frontFace=null,this._isDepthTestDirty=!0,this._isDepthMaskDirty=!0,this._isDepthFuncDirty=!1,this._isCullFaceDirty=!1,this._isCullDirty=!1,this._isZOffsetDirty=!1,this._isFrontFaceDirty=!1},e.prototype.apply=function(e){this.isDirty&&(this._isCullDirty&&(this.cull?e.enable(e.CULL_FACE):e.disable(e.CULL_FACE),this._isCullDirty=!1),this._isCullFaceDirty&&(e.cullFace(this.cullFace),this._isCullFaceDirty=!1),this._isDepthMaskDirty&&(e.depthMask(this.depthMask),this._isDepthMaskDirty=!1),this._isDepthTestDirty&&(this.depthTest?e.enable(e.DEPTH_TEST):e.disable(e.DEPTH_TEST),this._isDepthTestDirty=!1),this._isDepthFuncDirty&&(e.depthFunc(this.depthFunc),this._isDepthFuncDirty=!1),this._isZOffsetDirty&&(this.zOffset?(e.enable(e.POLYGON_OFFSET_FILL),e.polygonOffset(this.zOffset,0)):e.disable(e.POLYGON_OFFSET_FILL),this._isZOffsetDirty=!1),this._isFrontFaceDirty&&(e.frontFace(this.frontFace),this._isFrontFaceDirty=!1))},e}(),o=n(3),a=function(){function e(){this._isStencilTestDirty=!1,this._isStencilMaskDirty=!1,this._isStencilFuncDirty=!1,this._isStencilOpDirty=!1,this.reset()}return Object.defineProperty(e.prototype,"isDirty",{get:function(){return this._isStencilTestDirty||this._isStencilMaskDirty||this._isStencilFuncDirty||this._isStencilOpDirty},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilFunc",{get:function(){return this._stencilFunc},set:function(e){this._stencilFunc!==e&&(this._stencilFunc=e,this._isStencilFuncDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilFuncRef",{get:function(){return this._stencilFuncRef},set:function(e){this._stencilFuncRef!==e&&(this._stencilFuncRef=e,this._isStencilFuncDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilFuncMask",{get:function(){return this._stencilFuncMask},set:function(e){this._stencilFuncMask!==e&&(this._stencilFuncMask=e,this._isStencilFuncDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilOpStencilFail",{get:function(){return this._stencilOpStencilFail},set:function(e){this._stencilOpStencilFail!==e&&(this._stencilOpStencilFail=e,this._isStencilOpDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilOpDepthFail",{get:function(){return this._stencilOpDepthFail},set:function(e){this._stencilOpDepthFail!==e&&(this._stencilOpDepthFail=e,this._isStencilOpDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilOpStencilDepthPass",{get:function(){return this._stencilOpStencilDepthPass},set:function(e){this._stencilOpStencilDepthPass!==e&&(this._stencilOpStencilDepthPass=e,this._isStencilOpDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilMask",{get:function(){return this._stencilMask},set:function(e){this._stencilMask!==e&&(this._stencilMask=e,this._isStencilMaskDirty=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stencilTest",{get:function(){return this._stencilTest},set:function(e){this._stencilTest!==e&&(this._stencilTest=e,this._isStencilTestDirty=!0)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._stencilTest=!1,this._stencilMask=255,this._stencilFunc=e.ALWAYS,this._stencilFuncRef=1,this._stencilFuncMask=255,this._stencilOpStencilFail=e.KEEP,this._stencilOpDepthFail=e.KEEP,this._stencilOpStencilDepthPass=e.REPLACE,this._isStencilTestDirty=!0,this._isStencilMaskDirty=!0,this._isStencilFuncDirty=!0,this._isStencilOpDirty=!0},e.prototype.apply=function(e){this.isDirty&&(this._isStencilTestDirty&&(this.stencilTest?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this._isStencilTestDirty=!1),this._isStencilMaskDirty&&(e.stencilMask(this.stencilMask),this._isStencilMaskDirty=!1),this._isStencilFuncDirty&&(e.stencilFunc(this.stencilFunc,this.stencilFuncRef,this.stencilFuncMask),this._isStencilFuncDirty=!1),this._isStencilOpDirty&&(e.stencilOp(this.stencilOpStencilFail,this.stencilOpDepthFail,this.stencilOpStencilDepthPass),this._isStencilOpDirty=!1))},e.ALWAYS=o.a.ALWAYS,e.KEEP=o.a.KEEP,e.REPLACE=o.a.REPLACE,e}();n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a})},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.clipPlaneFragmentDeclaration="#ifdef CLIPPLANE\nvarying float fClipDistance;\n#endif\n#ifdef CLIPPLANE2\nvarying float fClipDistance2;\n#endif\n#ifdef CLIPPLANE3\nvarying float fClipDistance3;\n#endif\n#ifdef CLIPPLANE4\nvarying float fClipDistance4;\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.clipPlaneVertexDeclaration="#ifdef CLIPPLANE\nuniform vec4 vClipPlane;\nvarying float fClipDistance;\n#endif\n#ifdef CLIPPLANE2\nuniform vec4 vClipPlane2;\nvarying float fClipDistance2;\n#endif\n#ifdef CLIPPLANE3\nuniform vec4 vClipPlane3;\nvarying float fClipDistance3;\n#endif\n#ifdef CLIPPLANE4\nuniform vec4 vClipPlane4;\nvarying float fClipDistance4;\n#endif"},function(e,t,n){"use strict";n.r(t);var r=n(30),i=n(8),o=n(0),a=n(22),s=function(){function e(e,t){this.triggerOptions=e,this.onBeforeExecuteObservable=new i.c,e.parameter?(this.trigger=e.trigger,this._triggerParameter=e.parameter):this.trigger=e.trigger?e.trigger:e,this._nextActiveAction=this,this._condition=t}return e.prototype._prepare=function(){},e.prototype.getTriggerParameter=function(){return this._triggerParameter},e.prototype._executeCurrent=function(e){if(this._nextActiveAction._condition){var t=this._nextActiveAction._condition,n=this._actionManager.getScene().getRenderId();if(t._evaluationId===n){if(!t._currentResult)return}else{if(t._evaluationId=n,!t.isValid())return void(t._currentResult=!1);t._currentResult=!0}}this.onBeforeExecuteObservable.notifyObservers(this),this._nextActiveAction.execute(e),this.skipToNextActiveAction()},e.prototype.execute=function(e){},e.prototype.skipToNextActiveAction=function(){this._nextActiveAction._child?(this._nextActiveAction._child._actionManager||(this._nextActiveAction._child._actionManager=this._actionManager),this._nextActiveAction=this._nextActiveAction._child):this._nextActiveAction=this},e.prototype.then=function(e){return this._child=e,e._actionManager=this._actionManager,e._prepare(),e},e.prototype._getProperty=function(e){return this._actionManager._getProperty(e)},e.prototype._getEffectiveTarget=function(e,t){return this._actionManager._getEffectiveTarget(e,t)},e.prototype.serialize=function(e){},e.prototype._serialize=function(e,t){var n={type:1,children:[],name:e.name,properties:e.properties||[]};if(this._child&&this._child.serialize(n),this._condition){var r=this._condition.serialize();return r.children.push(n),t&&t.children.push(r),r}return t&&t.children.push(n),n},e._SerializeValueAsString=function(e){return"number"==typeof e?e.toString():"boolean"==typeof e?e?"true":"false":e instanceof o.w?e.x+", "+e.y:e instanceof o.x?e.x+", "+e.y+", "+e.z:e instanceof o.e?e.r+", "+e.g+", "+e.b:e instanceof o.f?e.r+", "+e.g+", "+e.b+", "+e.a:e},e._GetTargetProperty=function(e){return{name:"target",targetType:e._isMesh?"MeshProperties":e._isLight?"LightProperties":e._isCamera?"CameraProperties":"SceneProperties",value:e._isScene?"Scene":e.name}},e}();a.a.RegisteredTypes["BABYLON.Action"]=s;var u=n(36),l=n(1),c=function(){function e(e){this._actionManager=e}return e.prototype.isValid=function(){return!0},e.prototype._getProperty=function(e){return this._actionManager._getProperty(e)},e.prototype._getEffectiveTarget=function(e,t){return this._actionManager._getEffectiveTarget(e,t)},e.prototype.serialize=function(){},e.prototype._serialize=function(e){return{type:2,children:[],name:e.name,properties:e.properties}},e}(),h=function(e){function t(n,r,i,o,a){void 0===a&&(a=t.IsEqual);var s=e.call(this,n)||this;return s.propertyPath=i,s.value=o,s.operator=a,s._target=r,s._effectiveTarget=s._getEffectiveTarget(r,s.propertyPath),s._property=s._getProperty(s.propertyPath),s}return l.d(t,e),Object.defineProperty(t,"IsEqual",{get:function(){return t._IsEqual},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsDifferent",{get:function(){return t._IsDifferent},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsGreater",{get:function(){return t._IsGreater},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsLesser",{get:function(){return t._IsLesser},enumerable:!0,configurable:!0}),t.prototype.isValid=function(){switch(this.operator){case t.IsGreater:return this._effectiveTarget[this._property]>this.value;case t.IsLesser:return this._effectiveTarget[this._property]<this.value;case t.IsEqual:case t.IsDifferent:var e;return e=this.value.equals?this.value.equals(this._effectiveTarget[this._property]):this.value===this._effectiveTarget[this._property],this.operator===t.IsEqual?e:!e}return!1},t.prototype.serialize=function(){return this._serialize({name:"ValueCondition",properties:[s._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:s._SerializeValueAsString(this.value)},{name:"operator",value:t.GetOperatorName(this.operator)}]})},t.GetOperatorName=function(e){switch(e){case t._IsEqual:return"IsEqual";case t._IsDifferent:return"IsDifferent";case t._IsGreater:return"IsGreater";case t._IsLesser:return"IsLesser";default:return""}},t._IsEqual=0,t._IsDifferent=1,t._IsGreater=2,t._IsLesser=3,t}(c),d=function(e){function t(t,n){var r=e.call(this,t)||this;return r.predicate=n,r}return l.d(t,e),t.prototype.isValid=function(){return this.predicate()},t}(c),f=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.value=r,i._target=n,i}return l.d(t,e),t.prototype.isValid=function(){return this._target.state===this.value},t.prototype.serialize=function(){return this._serialize({name:"StateCondition",properties:[s._GetTargetProperty(this._target),{name:"value",value:this.value}]})},t}(c);a.a.RegisteredTypes["BABYLON.ValueCondition"]=h,a.a.RegisteredTypes["BABYLON.PredicateCondition"]=d,a.a.RegisteredTypes["BABYLON.StateCondition"]=f;var p=n(6),_=n(3),m=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.propertyPath=r,o._target=o._effectiveTarget=n,o}return l.d(t,e),t.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,this.propertyPath),this._property=this._getProperty(this.propertyPath)},t.prototype.execute=function(){this._effectiveTarget[this._property]=!this._effectiveTarget[this._property]},t.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"SwitchBooleanAction",properties:[s._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath}]},t)},t}(s),g=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o.value=r,o._target=n,o}return l.d(t,e),t.prototype.execute=function(){this._target.state=this.value},t.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"SetStateAction",properties:[s._GetTargetProperty(this._target),{name:"value",value:this.value}]},t)},t}(s),v=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.propertyPath=r,a.value=i,a._target=a._effectiveTarget=n,a}return l.d(t,e),t.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,this.propertyPath),this._property=this._getProperty(this.propertyPath)},t.prototype.execute=function(){this._effectiveTarget[this._property]=this.value,this._target.markAsDirty&&this._target.markAsDirty(this._property)},t.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"SetValueAction",properties:[s._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:s._SerializeValueAsString(this.value)}]},t)},t}(s),y=function(e){function t(t,n,r,i,o){var a=e.call(this,t,o)||this;return a.propertyPath=r,a.value=i,a._target=a._effectiveTarget=n,a}return l.d(t,e),t.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,this.propertyPath),this._property=this._getProperty(this.propertyPath),"number"!=typeof this._effectiveTarget[this._property]&&p.a.Warn("Warning: IncrementValueAction can only be used with number values")},t.prototype.execute=function(){this._effectiveTarget[this._property]+=this.value,this._target.markAsDirty&&this._target.markAsDirty(this._property)},t.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"IncrementValueAction",properties:[s._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:s._SerializeValueAsString(this.value)}]},t)},t}(s),b=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,a)||this;return s.from=r,s.to=i,s.loop=o,s._target=n,s}return l.d(t,e),t.prototype._prepare=function(){},t.prototype.execute=function(){this._actionManager.getScene().beginAnimation(this._target,this.from,this.to,this.loop)},t.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"PlayAnimationAction",properties:[s._GetTargetProperty(this._target),{name:"from",value:String(this.from)},{name:"to",value:String(this.to)},{name:"loop",value:s._SerializeValueAsString(this.loop)||!1}]},t)},t}(s),T=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i._target=n,i}return l.d(t,e),t.prototype._prepare=function(){},t.prototype.execute=function(){this._actionManager.getScene().stopAnimation(this._target)},t.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"StopAnimationAction",properties:[s._GetTargetProperty(this._target)]},t)},t}(s),E=function(e){function t(t,n){return void 0===t&&(t=_.a.ACTION_NothingTrigger),e.call(this,t,n)||this}return l.d(t,e),t.prototype.execute=function(){},t.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"DoNothingAction",properties:[]},t)},t}(s),x=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i.children=n,i}return l.d(t,e),t.prototype._prepare=function(){for(var e=0;e<this.children.length;e++)this.children[e]._actionManager=this._actionManager,this.children[e]._prepare()},t.prototype.execute=function(e){for(var t=0;t<this.children.length;t++)this.children[t].execute(e)},t.prototype.serialize=function(t){for(var n=e.prototype._serialize.call(this,{name:"CombineAction",properties:[],combine:[]},t),r=0;r<this.children.length;r++)n.combine.push(this.children[r].serialize(null));return n},t}(s),M=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i.func=n,i}return l.d(t,e),t.prototype.execute=function(e){this.func(e)},t}(s),A=function(e){function t(t,n,r,i){var o=e.call(this,t,i)||this;return o._target=n,o._parent=r,o}return l.d(t,e),t.prototype._prepare=function(){},t.prototype.execute=function(){if(this._target.parent!==this._parent){var e=this._parent.getWorldMatrix().clone();e.invert(),this._target.position=o.x.TransformCoordinates(this._target.position,e),this._target.parent=this._parent}},t.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"SetParentAction",properties:[s._GetTargetProperty(this._target),s._GetTargetProperty(this._parent)]},t)},t}(s);a.a.RegisteredTypes["BABYLON.SetParentAction"]=A,a.a.RegisteredTypes["BABYLON.ExecuteCodeAction"]=M,a.a.RegisteredTypes["BABYLON.DoNothingAction"]=E,a.a.RegisteredTypes["BABYLON.StopAnimationAction"]=T,a.a.RegisteredTypes["BABYLON.PlayAnimationAction"]=b,a.a.RegisteredTypes["BABYLON.IncrementValueAction"]=y,a.a.RegisteredTypes["BABYLON.SetValueAction"]=v,a.a.RegisteredTypes["BABYLON.SetStateAction"]=g,a.a.RegisteredTypes["BABYLON.SetParentAction"]=A;var S=n(23),C=n(32),P=function(e){function t(t){var n=e.call(this)||this;return n._scene=t||S.a.LastCreatedScene,t.actionManagers.push(n),n}return l.d(t,e),t.prototype.dispose=function(){for(var e=this._scene.actionManagers.indexOf(this),n=0;n<this.actions.length;n++){var r=this.actions[n];0==--t.Triggers[r.trigger]&&delete t.Triggers[r.trigger]}e>-1&&this._scene.actionManagers.splice(e,1)},t.prototype.getScene=function(){return this._scene},t.prototype.hasSpecificTriggers=function(e){for(var t=0;t<this.actions.length;t++)if(e.indexOf(this.actions[t].trigger)>-1)return!0;return!1},t.prototype.hasSpecificTriggers2=function(e,t){for(var n=0;n<this.actions.length;n++){var r=this.actions[n];if(e==r.trigger||t==r.trigger)return!0}return!1},t.prototype.hasSpecificTrigger=function(e,t){for(var n=0;n<this.actions.length;n++){var r=this.actions[n];if(r.trigger===e){if(!t)return!0;if(t(r.getTriggerParameter()))return!0}}return!1},Object.defineProperty(t.prototype,"hasPointerTriggers",{get:function(){for(var e=0;e<this.actions.length;e++){var n=this.actions[e];if(n.trigger>=t.OnPickTrigger&&n.trigger<=t.OnPointerOutTrigger)return!0}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPickTriggers",{get:function(){for(var e=0;e<this.actions.length;e++){var n=this.actions[e];if(n.trigger>=t.OnPickTrigger&&n.trigger<=t.OnPickUpTrigger)return!0}return!1},enumerable:!0,configurable:!0}),t.prototype.registerAction=function(e){return e.trigger===t.OnEveryFrameTrigger&&this.getScene().actionManager!==this?(p.a.Warn("OnEveryFrameTrigger can only be used with scene.actionManager"),null):(this.actions.push(e),t.Triggers[e.trigger]?t.Triggers[e.trigger]++:t.Triggers[e.trigger]=1,e._actionManager=this,e._prepare(),e)},t.prototype.unregisterAction=function(e){var n=this.actions.indexOf(e);return-1!==n&&(this.actions.splice(n,1),0==(t.Triggers[e.trigger]-=1)&&delete t.Triggers[e.trigger],delete e._actionManager,!0)},t.prototype.processTrigger=function(e,n){for(var r=0;r<this.actions.length;r++){var i=this.actions[r];if(i.trigger===e){if(n&&(e===t.OnKeyUpTrigger||e===t.OnKeyDownTrigger)){var o=i.getTriggerParameter();if(o&&o!==n.sourceEvent.keyCode){if(!o.toLowerCase)continue;var a=o.toLowerCase();if(a!==n.sourceEvent.key&&String.fromCharCode(n.sourceEvent.charCode?n.sourceEvent.charCode:n.sourceEvent.keyCode).toLowerCase()!==a)continue}}i._executeCurrent(n)}}},t.prototype._getEffectiveTarget=function(e,t){for(var n=t.split("."),r=0;r<n.length-1;r++)e=e[n[r]];return e},t.prototype._getProperty=function(e){var t=e.split(".");return t[t.length-1]},t.prototype.serialize=function(e){for(var n={children:new Array,name:e,type:3,properties:new Array},r=0;r<this.actions.length;r++){var i={type:0,children:new Array,name:t.GetTriggerName(this.actions[r].trigger),properties:new Array},o=this.actions[r].triggerOptions;if(o&&"number"!=typeof o)if(o.parameter instanceof Node)i.properties.push(s._GetTargetProperty(o.parameter));else{var a={};C.a.DeepCopy(o.parameter,a,["mesh"]),o.parameter&&o.parameter.mesh&&(a._meshId=o.parameter.mesh.id),i.properties.push({name:"parameter",targetType:null,value:a})}this.actions[r].serialize(i),n.children.push(i)}return n},t.Parse=function(e,n,r){var i=new t(r);null===n?r.actionManager=i:n.actionManager=i;for(var s=function(e,t,n,r){if(null===r){var i=parseFloat(t);return"true"===t||"false"===t?"true"===t:isNaN(i)?t:i}for(var a=r.split("."),s=t.split(","),u=0;u<a.length;u++)n=n[a[u]];if("boolean"==typeof n)return"true"===s[0];if("string"==typeof n)return s[0];var l=new Array;for(u=0;u<s.length;u++)l.push(parseFloat(s[u]));return n instanceof o.x?o.x.FromArray(l):n instanceof o.y?o.y.FromArray(l):n instanceof o.e?o.e.FromArray(l):n instanceof o.f?o.f.FromArray(l):parseFloat(s[0])},u=function(e,n,o,l,d){if(void 0===d&&(d=null),!e.detached){var f=new Array,p=null,_=null,m=e.combine&&e.combine.length>0;if(f.push(2===e.type?i:n),m){for(var g=new Array,v=0;v<e.combine.length;v++)u(e.combine[v],t.NothingTrigger,o,l,g);f.push(g)}else for(var y=0;y<e.properties.length;y++){var b=e.properties[y].value,T=e.properties[y].name,x=e.properties[y].targetType;"target"===T?b=p=null!==x&&"SceneProperties"===x?r:r.getNodeByName(b):"parent"===T?b=r.getNodeByName(b):"sound"===T?r.getSoundByName&&(b=r.getSoundByName(b)):"propertyPath"!==T?b=2===e.type&&"operator"===T?h[b]:s(0,b,p,"value"===T?_:null):_=b,f.push(b)}f.push(null===d?o:null),"InterpolateValueAction"===e.name&&(f[f.length-1]=f[f.length-2],f[f.length-2]=o);var M=function(e,t){var n=a.a.GetClass("BABYLON."+e);if(n){var r=Object.create(n.prototype);return r.constructor.apply(r,t),r}}(e.name,f);if(M instanceof c&&null!==o){var A=new E(n,o);l?l.then(A):i.registerAction(A),l=A}for(null===d?M instanceof c?(o=M,M=l):(o=null,l?l.then(M):i.registerAction(M)):d.push(M),y=0;y<e.children.length;y++)u(e.children[y],n,o,M,null)}},l=0;l<e.children.length;l++){var d,f=e.children[l];if(f.properties.length>0){var p=f.properties[0].value,_=null===f.properties[0].targetType?p:r.getMeshByName(p);_._meshId&&(_.mesh=r.getMeshByID(_._meshId)),d={trigger:t[f.name],parameter:_}}else d=t[f.name];for(var m=0;m<f.children.length;m++)f.detached||u(f.children[m],d,null,null)}},t.GetTriggerName=function(e){switch(e){case 0:return"NothingTrigger";case 1:return"OnPickTrigger";case 2:return"OnLeftPickTrigger";case 3:return"OnRightPickTrigger";case 4:return"OnCenterPickTrigger";case 5:return"OnPickDownTrigger";case 6:return"OnPickUpTrigger";case 7:return"OnLongPressTrigger";case 8:return"OnPointerOverTrigger";case 9:return"OnPointerOutTrigger";case 10:return"OnEveryFrameTrigger";case 11:return"OnIntersectionEnterTrigger";case 12:return"OnIntersectionExitTrigger";case 13:return"OnKeyDownTrigger";case 14:return"OnKeyUpTrigger";case 15:return"OnPickOutTrigger";default:return""}},t.NothingTrigger=_.a.ACTION_NothingTrigger,t.OnPickTrigger=_.a.ACTION_OnPickTrigger,t.OnLeftPickTrigger=_.a.ACTION_OnLeftPickTrigger,t.OnRightPickTrigger=_.a.ACTION_OnRightPickTrigger,t.OnCenterPickTrigger=_.a.ACTION_OnCenterPickTrigger,t.OnPickDownTrigger=_.a.ACTION_OnPickDownTrigger,t.OnDoublePickTrigger=_.a.ACTION_OnDoublePickTrigger,t.OnPickUpTrigger=_.a.ACTION_OnPickUpTrigger,t.OnPickOutTrigger=_.a.ACTION_OnPickOutTrigger,t.OnLongPressTrigger=_.a.ACTION_OnLongPressTrigger,t.OnPointerOverTrigger=_.a.ACTION_OnPointerOverTrigger,t.OnPointerOutTrigger=_.a.ACTION_OnPointerOutTrigger,t.OnEveryFrameTrigger=_.a.ACTION_OnEveryFrameTrigger,t.OnIntersectionEnterTrigger=_.a.ACTION_OnIntersectionEnterTrigger,t.OnIntersectionExitTrigger=_.a.ACTION_OnIntersectionExitTrigger,t.OnKeyDownTrigger=_.a.ACTION_OnKeyDownTrigger,t.OnKeyUpTrigger=15,t}(n(79).a),R=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i._sound=n,i}return l.d(t,e),t.prototype._prepare=function(){},t.prototype.execute=function(){void 0!==this._sound&&this._sound.play()},t.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"PlaySoundAction",properties:[{name:"sound",value:this._sound.name}]},t)},t}(s),D=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i._sound=n,i}return l.d(t,e),t.prototype._prepare=function(){},t.prototype.execute=function(){void 0!==this._sound&&this._sound.stop()},t.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"StopSoundAction",properties:[{name:"sound",value:this._sound.name}]},t)},t}(s);a.a.RegisteredTypes["BABYLON.PlaySoundAction"]=D,a.a.RegisteredTypes["BABYLON.StopSoundAction"]=D;var O,w=n(12),L=n(2);!function(e){e[e.STEP=1]="STEP"}(O||(O={}));var I=function(){function e(e,t,n){this.name=e,this.from=t,this.to=n}return e.prototype.clone=function(){return new e(this.name,this.from,this.to)},e}(),F=n(25),N=function(){},B=function(){function e(t,n,r,i,o,a){this.name=t,this.targetProperty=n,this.framePerSecond=r,this.dataType=i,this.loopMode=o,this.enableBlending=a,this._runtimeAnimations=new Array,this._events=new Array,this.blendingSpeed=.01,this._ranges={},this.targetPropertyPath=n.split("."),this.dataType=i,this.loopMode=void 0===o?e.ANIMATIONLOOPMODE_CYCLE:o}return e._PrepareAnimation=function(t,n,r,i,a,s,u,l){var c=void 0;if(!isNaN(parseFloat(a))&&isFinite(a)?c=e.ANIMATIONTYPE_FLOAT:a instanceof o.q?c=e.ANIMATIONTYPE_QUATERNION:a instanceof o.x?c=e.ANIMATIONTYPE_VECTOR3:a instanceof o.w?c=e.ANIMATIONTYPE_VECTOR2:a instanceof o.e?c=e.ANIMATIONTYPE_COLOR3:a instanceof o.r&&(c=e.ANIMATIONTYPE_SIZE),null==c)return null;var h=new e(t,n,r,c,u);return h.setKeys([{frame:0,value:a},{frame:i,value:s}]),void 0!==l&&h.setEasingFunction(l),h},e.CreateAnimation=function(t,n,r,i){var o=new e(t+"Animation",t,r,n,e.ANIMATIONLOOPMODE_CONSTANT);return o.setEasingFunction(i),o},e.CreateAndStartAnimation=function(t,n,r,i,o,a,s,u,l,c){var h=e._PrepareAnimation(t,r,i,o,a,s,u,l);return h?n.getScene().beginDirectAnimation(n,[h],0,o,1===h.loopMode,1,c):null},e.CreateAndStartHierarchyAnimation=function(t,n,r,i,o,a,s,u,l,c,h){var d=e._PrepareAnimation(t,i,o,a,s,u,l,c);return d?n.getScene().beginDirectHierarchyAnimation(n,r,[d],0,a,1===d.loopMode,1,h):null},e.CreateMergeAndStartAnimation=function(t,n,r,i,o,a,s,u,l,c){var h=e._PrepareAnimation(t,r,i,o,a,s,u,l);return h?(n.animations.push(h),n.getScene().beginAnimation(n,0,o,1===h.loopMode,1,c)):null},e.TransitionTo=function(e,t,n,r,i,o,a,s){if(void 0===s&&(s=null),a<=0)return n[e]=t,s&&s(),null;var u=i*(a/1e3);o.setKeys([{frame:0,value:n[e].clone?n[e].clone():n[e]},{frame:u,value:t}]),n.animations||(n.animations=[]),n.animations.push(o);var l=r.beginAnimation(n,0,u,!1);return l.onAnimationEnd=s,l},Object.defineProperty(e.prototype,"runtimeAnimations",{get:function(){return this._runtimeAnimations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasRunningRuntimeAnimations",{get:function(){for(var e=0,t=this._runtimeAnimations;e<t.length;e++)if(!t[e].isStopped)return!0;return!1},enumerable:!0,configurable:!0}),e.prototype.toString=function(e){var t="Name: "+this.name+", property: "+this.targetProperty;if(t+=", datatype: "+["Float","Vector3","Quaternion","Matrix","Color3","Vector2"][this.dataType],t+=", nKeys: "+(this._keys?this._keys.length:"none"),t+=", nRanges: "+(this._ranges?Object.keys(this._ranges).length:"none"),e){t+=", Ranges: {";var n=!0;for(var r in this._ranges)n&&(t+=", ",n=!1),t+=r;t+="}"}return t},e.prototype.addEvent=function(e){this._events.push(e)},e.prototype.removeEvents=function(e){for(var t=0;t<this._events.length;t++)this._events[t].frame===e&&(this._events.splice(t,1),t--)},e.prototype.getEvents=function(){return this._events},e.prototype.createRange=function(e,t,n){this._ranges[e]||(this._ranges[e]=new I(e,t,n))},e.prototype.deleteRange=function(e,t){void 0===t&&(t=!0);var n=this._ranges[e];if(n){if(t)for(var r=n.from,i=n.to,o=this._keys.length-1;o>=0;o--)this._keys[o].frame>=r&&this._keys[o].frame<=i&&this._keys.splice(o,1);this._ranges[e]=null}},e.prototype.getRange=function(e){return this._ranges[e]},e.prototype.getKeys=function(){return this._keys},e.prototype.getHighestFrame=function(){for(var e=0,t=0,n=this._keys.length;t<n;t++)e<this._keys[t].frame&&(e=this._keys[t].frame);return e},e.prototype.getEasingFunction=function(){return this._easingFunction},e.prototype.setEasingFunction=function(e){this._easingFunction=e},e.prototype.floatInterpolateFunction=function(e,t,n){return w.a.Lerp(e,t,n)},e.prototype.floatInterpolateFunctionWithTangents=function(e,t,n,r,i){return w.a.Hermite(e,t,n,r,i)},e.prototype.quaternionInterpolateFunction=function(e,t,n){return o.q.Slerp(e,t,n)},e.prototype.quaternionInterpolateFunctionWithTangents=function(e,t,n,r,i){return o.q.Hermite(e,t,n,r,i).normalize()},e.prototype.vector3InterpolateFunction=function(e,t,n){return o.x.Lerp(e,t,n)},e.prototype.vector3InterpolateFunctionWithTangents=function(e,t,n,r,i){return o.x.Hermite(e,t,n,r,i)},e.prototype.vector2InterpolateFunction=function(e,t,n){return o.w.Lerp(e,t,n)},e.prototype.vector2InterpolateFunctionWithTangents=function(e,t,n,r,i){return o.w.Hermite(e,t,n,r,i)},e.prototype.sizeInterpolateFunction=function(e,t,n){return o.r.Lerp(e,t,n)},e.prototype.color3InterpolateFunction=function(e,t,n){return o.e.Lerp(e,t,n)},e.prototype._getKeyValue=function(e){return"function"==typeof e?e():e},e.prototype._interpolate=function(t,n){if(n.loopMode===e.ANIMATIONLOOPMODE_CONSTANT&&n.repeatCount>0)return n.highLimitValue.clone?n.highLimitValue.clone():n.highLimitValue;var r=this._keys;if(1===r.length)return this._getKeyValue(r[0].value);var i=n.key;if(r[i].frame>=t)for(;i-1>=0&&r[i].frame>=t;)i--;for(var o=i;o<r.length;o++){var a=r[o+1];if(a.frame>=t){n.key=o;var s=r[o],u=this._getKeyValue(s.value);if(s.interpolation===O.STEP)return u;var l=this._getKeyValue(a.value),c=void 0!==s.outTangent&&void 0!==a.inTangent,h=a.frame-s.frame,d=(t-s.frame)/h,f=this.getEasingFunction();switch(null!=f&&(d=f.ease(d)),this.dataType){case e.ANIMATIONTYPE_FLOAT:var p=c?this.floatInterpolateFunctionWithTangents(u,s.outTangent*h,l,a.inTangent*h,d):this.floatInterpolateFunction(u,l,d);switch(n.loopMode){case e.ANIMATIONLOOPMODE_CYCLE:case e.ANIMATIONLOOPMODE_CONSTANT:return p;case e.ANIMATIONLOOPMODE_RELATIVE:return n.offsetValue*n.repeatCount+p}break;case e.ANIMATIONTYPE_QUATERNION:var _=c?this.quaternionInterpolateFunctionWithTangents(u,s.outTangent.scale(h),l,a.inTangent.scale(h),d):this.quaternionInterpolateFunction(u,l,d);switch(n.loopMode){case e.ANIMATIONLOOPMODE_CYCLE:case e.ANIMATIONLOOPMODE_CONSTANT:return _;case e.ANIMATIONLOOPMODE_RELATIVE:return _.addInPlace(n.offsetValue.scale(n.repeatCount))}return _;case e.ANIMATIONTYPE_VECTOR3:var m=c?this.vector3InterpolateFunctionWithTangents(u,s.outTangent.scale(h),l,a.inTangent.scale(h),d):this.vector3InterpolateFunction(u,l,d);switch(n.loopMode){case e.ANIMATIONLOOPMODE_CYCLE:case e.ANIMATIONLOOPMODE_CONSTANT:return m;case e.ANIMATIONLOOPMODE_RELATIVE:return m.add(n.offsetValue.scale(n.repeatCount))}case e.ANIMATIONTYPE_VECTOR2:var g=c?this.vector2InterpolateFunctionWithTangents(u,s.outTangent.scale(h),l,a.inTangent.scale(h),d):this.vector2InterpolateFunction(u,l,d);switch(n.loopMode){case e.ANIMATIONLOOPMODE_CYCLE:case e.ANIMATIONLOOPMODE_CONSTANT:return g;case e.ANIMATIONLOOPMODE_RELATIVE:return g.add(n.offsetValue.scale(n.repeatCount))}case e.ANIMATIONTYPE_SIZE:switch(n.loopMode){case e.ANIMATIONLOOPMODE_CYCLE:case e.ANIMATIONLOOPMODE_CONSTANT:return this.sizeInterpolateFunction(u,l,d);case e.ANIMATIONLOOPMODE_RELATIVE:return this.sizeInterpolateFunction(u,l,d).add(n.offsetValue.scale(n.repeatCount))}case e.ANIMATIONTYPE_COLOR3:switch(n.loopMode){case e.ANIMATIONLOOPMODE_CYCLE:case e.ANIMATIONLOOPMODE_CONSTANT:return this.color3InterpolateFunction(u,l,d);case e.ANIMATIONLOOPMODE_RELATIVE:return this.color3InterpolateFunction(u,l,d).add(n.offsetValue.scale(n.repeatCount))}case e.ANIMATIONTYPE_MATRIX:switch(n.loopMode){case e.ANIMATIONLOOPMODE_CYCLE:case e.ANIMATIONLOOPMODE_CONSTANT:if(e.AllowMatricesInterpolation)return this.matrixInterpolateFunction(u,l,d,n.workValue);case e.ANIMATIONLOOPMODE_RELATIVE:return u}}break}}return this._getKeyValue(r[r.length-1].value)},e.prototype.matrixInterpolateFunction=function(t,n,r,i){return e.AllowMatrixDecomposeForInterpolation?i?(o.j.DecomposeLerpToRef(t,n,r,i),i):o.j.DecomposeLerp(t,n,r):i?(o.j.LerpToRef(t,n,r,i),i):o.j.Lerp(t,n,r)},e.prototype.clone=function(){var t=new e(this.name,this.targetPropertyPath.join("."),this.framePerSecond,this.dataType,this.loopMode);if(t.enableBlending=this.enableBlending,t.blendingSpeed=this.blendingSpeed,this._keys&&t.setKeys(this._keys),this._ranges)for(var n in t._ranges={},this._ranges){var r=this._ranges[n];r&&(t._ranges[n]=r.clone())}return t},e.prototype.setKeys=function(e){this._keys=e.slice(0)},e.prototype.serialize=function(){var t={};t.name=this.name,t.property=this.targetProperty,t.framePerSecond=this.framePerSecond,t.dataType=this.dataType,t.loopBehavior=this.loopMode,t.enableBlending=this.enableBlending,t.blendingSpeed=this.blendingSpeed;var n=this.dataType;t.keys=[];for(var r=this.getKeys(),i=0;i<r.length;i++){var o=r[i],a={};switch(a.frame=o.frame,n){case e.ANIMATIONTYPE_FLOAT:a.values=[o.value];break;case e.ANIMATIONTYPE_QUATERNION:case e.ANIMATIONTYPE_MATRIX:case e.ANIMATIONTYPE_VECTOR3:case e.ANIMATIONTYPE_COLOR3:a.values=o.value.asArray()}t.keys.push(a)}for(var s in t.ranges=[],this._ranges){var u=this._ranges[s];if(u){var l={};l.name=s,l.from=u.from,l.to=u.to,t.ranges.push(l)}}return t},Object.defineProperty(e,"ANIMATIONTYPE_FLOAT",{get:function(){return e._ANIMATIONTYPE_FLOAT},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ANIMATIONTYPE_VECTOR3",{get:function(){return e._ANIMATIONTYPE_VECTOR3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ANIMATIONTYPE_VECTOR2",{get:function(){return e._ANIMATIONTYPE_VECTOR2},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ANIMATIONTYPE_SIZE",{get:function(){return e._ANIMATIONTYPE_SIZE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ANIMATIONTYPE_QUATERNION",{get:function(){return e._ANIMATIONTYPE_QUATERNION},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ANIMATIONTYPE_MATRIX",{get:function(){return e._ANIMATIONTYPE_MATRIX},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ANIMATIONTYPE_COLOR3",{get:function(){return e._ANIMATIONTYPE_COLOR3},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ANIMATIONLOOPMODE_RELATIVE",{get:function(){return e._ANIMATIONLOOPMODE_RELATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ANIMATIONLOOPMODE_CYCLE",{get:function(){return e._ANIMATIONLOOPMODE_CYCLE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ANIMATIONLOOPMODE_CONSTANT",{get:function(){return e._ANIMATIONLOOPMODE_CONSTANT},enumerable:!0,configurable:!0}),e._UniversalLerp=function(e,t,n){var r=e.constructor;return r.Lerp?r.Lerp(e,t,n):r.Slerp?r.Slerp(e,t,n):e.toFixed?e*(1-n)+n*t:t},e.Parse=function(t){var n,r,i=new e(t.name,t.property,t.framePerSecond,t.dataType,t.loopBehavior),a=t.dataType,s=[];for(t.enableBlending&&(i.enableBlending=t.enableBlending),t.blendingSpeed&&(i.blendingSpeed=t.blendingSpeed),r=0;r<t.keys.length;r++){var u,l,c=t.keys[r];switch(a){case e.ANIMATIONTYPE_FLOAT:n=c.values[0],c.values.length>=1&&(u=c.values[1]),c.values.length>=2&&(l=c.values[2]);break;case e.ANIMATIONTYPE_QUATERNION:if(n=o.q.FromArray(c.values),c.values.length>=8){var h=o.q.FromArray(c.values.slice(4,8));h.equals(o.q.Zero())||(u=h)}if(c.values.length>=12){var d=o.q.FromArray(c.values.slice(8,12));d.equals(o.q.Zero())||(l=d)}break;case e.ANIMATIONTYPE_MATRIX:n=o.j.FromArray(c.values);break;case e.ANIMATIONTYPE_COLOR3:n=o.e.FromArray(c.values);break;case e.ANIMATIONTYPE_VECTOR3:default:n=o.x.FromArray(c.values)}var f={};f.frame=c.frame,f.value=n,null!=u&&(f.inTangent=u),null!=l&&(f.outTangent=l),s.push(f)}if(i.setKeys(s),t.ranges)for(r=0;r<t.ranges.length;r++)i.createRange((n=t.ranges[r]).name,n.from,n.to);return i},e.AppendSerializedAnimations=function(e,t){L.a.AppendSerializedAnimations(e,t)},e.AllowMatricesInterpolation=!1,e.AllowMatrixDecomposeForInterpolation=!0,e._ANIMATIONTYPE_FLOAT=0,e._ANIMATIONTYPE_VECTOR3=1,e._ANIMATIONTYPE_QUATERNION=2,e._ANIMATIONTYPE_MATRIX=3,e._ANIMATIONTYPE_COLOR3=4,e._ANIMATIONTYPE_VECTOR2=5,e._ANIMATIONTYPE_SIZE=6,e._ANIMATIONLOOPMODE_RELATIVE=0,e._ANIMATIONLOOPMODE_CYCLE=1,e._ANIMATIONLOOPMODE_CONSTANT=2,e}();a.a.RegisteredTypes["BABYLON.Animation"]=B,F.a._AnimationRangeFactory=function(e,t,n){return new I(e,t,n)};var k=function(e){function t(t,n,r,o,a,s,u,l){void 0===a&&(a=1e3);var c=e.call(this,t,s)||this;return c.duration=1e3,c.onInterpolationDoneObservable=new i.c,c.propertyPath=r,c.value=o,c.duration=a,c.stopOtherAnimations=u,c.onInterpolationDone=l,c._target=c._effectiveTarget=n,c}return l.d(t,e),t.prototype._prepare=function(){this._effectiveTarget=this._getEffectiveTarget(this._effectiveTarget,this.propertyPath),this._property=this._getProperty(this.propertyPath)},t.prototype.execute=function(){var e,t=this,n=this._actionManager.getScene(),r=[{frame:0,value:this._effectiveTarget[this._property]},{frame:100,value:this.value}];if("number"==typeof this.value)e=B.ANIMATIONTYPE_FLOAT;else if(this.value instanceof o.e)e=B.ANIMATIONTYPE_COLOR3;else if(this.value instanceof o.x)e=B.ANIMATIONTYPE_VECTOR3;else if(this.value instanceof o.j)e=B.ANIMATIONTYPE_MATRIX;else{if(!(this.value instanceof o.q))return void p.a.Warn("InterpolateValueAction: Unsupported type ("+typeof this.value+")");e=B.ANIMATIONTYPE_QUATERNION}var i=new B("InterpolateValueAction",this._property,1e3/this.duration*100,e,B.ANIMATIONLOOPMODE_CONSTANT);i.setKeys(r),this.stopOtherAnimations&&n.stopAnimation(this._effectiveTarget),n.beginDirectAnimation(this._effectiveTarget,[i],0,100,!1,1,function(){t.onInterpolationDoneObservable.notifyObservers(t),t.onInterpolationDone&&t.onInterpolationDone()})},t.prototype.serialize=function(t){return e.prototype._serialize.call(this,{name:"InterpolateValueAction",properties:[s._GetTargetProperty(this._target),{name:"propertyPath",value:this.propertyPath},{name:"value",value:s._SerializeValueAsString(this.value)},{name:"duration",value:s._SerializeValueAsString(this.duration)},{name:"stopOtherAnimations",value:s._SerializeValueAsString(this.stopOtherAnimations)||!1}]},t)},t}(s);a.a.RegisteredTypes["BABYLON.InterpolateValueAction"]=k;var U=Object.freeze(new o.q(0,0,0,0)),V=Object.freeze(o.x.Zero()),G=Object.freeze(o.w.Zero()),j=Object.freeze(o.r.Zero()),z=Object.freeze(o.e.Black()),Y=function(){function e(e,t,n,r){var i=this;if(this._events=new Array,this._currentFrame=0,this._originalValue=new Array,this._originalBlendValue=null,this._offsetsCache={},this._highLimitsCache={},this._stopped=!1,this._blendingFactor=0,this._currentValue=null,this._currentActiveTarget=null,this._directTarget=null,this._targetPath="",this._weight=1,this._ratioOffset=0,this._previousDelay=0,this._previousRatio=0,this._targetIsArray=!1,this._animation=t,this._target=e,this._scene=n,this._host=r,this._activeTargets=[],t._runtimeAnimations.push(this),this._animationState={key:0,repeatCount:0,loopMode:this._getCorrectLoopMode()},this._animation.dataType===B.ANIMATIONTYPE_MATRIX&&(this._animationState.workValue=o.j.Zero()),this._keys=this._animation.getKeys(),this._minFrame=this._keys[0].frame,this._maxFrame=this._keys[this._keys.length-1].frame,this._minValue=this._keys[0].value,this._maxValue=this._keys[this._keys.length-1].value,0!==this._minFrame&&this._keys.splice(0,0,{frame:0,value:this._minValue}),this._target instanceof Array){for(var a=0,s=0,u=this._target;s<u.length;s++)this._preparePath(u[s],a),this._getOriginalValues(a),a++;this._targetIsArray=!0}else this._preparePath(this._target),this._getOriginalValues(),this._targetIsArray=!1,this._directTarget=this._activeTargets[0];var l=t.getEvents();l&&l.length>0&&l.forEach(function(e){i._events.push(e._clone())}),this._enableBlending=e&&e.animationPropertiesOverride?e.animationPropertiesOverride.enableBlending:this._animation.enableBlending}return Object.defineProperty(e.prototype,"currentFrame",{get:function(){return this._currentFrame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._weight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentValue",{get:function(){return this._currentValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetPath",{get:function(){return this._targetPath},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this._currentActiveTarget},enumerable:!0,configurable:!0}),e.prototype._preparePath=function(e,t){void 0===t&&(t=0);var n=this._animation.targetPropertyPath;if(n.length>1){for(var r=e[n[0]],i=1;i<n.length-1;i++)r=r[n[i]];this._targetPath=n[n.length-1],this._activeTargets[t]=r}else this._targetPath=n[0],this._activeTargets[t]=e},Object.defineProperty(e.prototype,"animation",{get:function(){return this._animation},enumerable:!0,configurable:!0}),e.prototype.reset=function(e){if(void 0===e&&(e=!1),e)if(this._target instanceof Array)for(var t=0,n=0,r=this._target;n<r.length;n++)void 0!==this._originalValue[t]&&this._setValue(r[n],this._activeTargets[t],this._originalValue[t],-1,t),t++;else void 0!==this._originalValue[0]&&this._setValue(this._target,this._directTarget,this._originalValue[0],-1,0);for(this._offsetsCache={},this._highLimitsCache={},this._currentFrame=0,this._blendingFactor=0,t=0;t<this._events.length;t++)this._events[t].isDone=!1},e.prototype.isStopped=function(){return this._stopped},e.prototype.dispose=function(){var e=this._animation.runtimeAnimations.indexOf(this);e>-1&&this._animation.runtimeAnimations.splice(e,1)},e.prototype.setValue=function(e,t){if(this._targetIsArray)for(var n=0;n<this._target.length;n++)this._setValue(this._target[n],this._activeTargets[n],e,t,n);else this._setValue(this._target,this._directTarget,e,t,0)},e.prototype._getOriginalValues=function(e){var t;void 0===e&&(e=0);var n=this._activeTargets[e];this._originalValue[e]=(t=n.getRestPose&&"_matrix"===this._targetPath?n.getRestPose():n[this._targetPath])&&t.clone?t.clone():t},e.prototype._setValue=function(e,t,n,r,i){if(this._currentActiveTarget=t,this._weight=r,this._enableBlending&&this._blendingFactor<=1){if(!this._originalBlendValue){var a=t[this._targetPath];this._originalBlendValue=a.clone?a.clone():a}this._originalBlendValue.m?B.AllowMatrixDecomposeForInterpolation?this._currentValue?o.j.DecomposeLerpToRef(this._originalBlendValue,n,this._blendingFactor,this._currentValue):this._currentValue=o.j.DecomposeLerp(this._originalBlendValue,n,this._blendingFactor):this._currentValue?o.j.LerpToRef(this._originalBlendValue,n,this._blendingFactor,this._currentValue):this._currentValue=o.j.Lerp(this._originalBlendValue,n,this._blendingFactor):this._currentValue=B._UniversalLerp(this._originalBlendValue,n,this._blendingFactor),this._blendingFactor+=e&&e.animationPropertiesOverride?e.animationPropertiesOverride.blendingSpeed:this._animation.blendingSpeed}else this._currentValue=n;-1!==r?this._scene._registerTargetForLateAnimationBinding(this,this._originalValue[i]):t[this._targetPath]=this._currentValue,e.markAsDirty&&e.markAsDirty(this._animation.targetProperty)},e.prototype._getCorrectLoopMode=function(){return this._target&&this._target.animationPropertiesOverride?this._target.animationPropertiesOverride.loopMode:this._animation.loopMode},e.prototype.goToFrame=function(e){var t=this._animation.getKeys();e<t[0].frame?e=t[0].frame:e>t[t.length-1].frame&&(e=t[t.length-1].frame),this._currentFrame=e;var n=this._animation._interpolate(e,this._animationState);this.setValue(n,-1)},e.prototype._prepareForSpeedRatioChange=function(e){this._ratioOffset=this._previousRatio-this._previousDelay*(this._animation.framePerSecond*e)/1e3},e.prototype.animate=function(e,t,n,r,i,o){void 0===o&&(o=-1);var a=this._animation,s=a.targetPropertyPath;if(!s||s.length<1)return this._stopped=!0,!1;var u=!0;(t<this._minFrame||t>this._maxFrame)&&(t=this._minFrame),(n<this._minFrame||n>this._maxFrame)&&(n=this._maxFrame);var l,c,h=n-t,d=e*(a.framePerSecond*i)/1e3+this._ratioOffset,f=0;if(this._previousDelay=e,this._previousRatio=d,!r&&n>=t&&d>=h)u=!1,f=a._getKeyValue(this._maxValue);else if(!r&&t>=n&&d<=h)u=!1,f=a._getKeyValue(this._minValue);else if(this._animationState.loopMode!==B.ANIMATIONLOOPMODE_CYCLE){var p=n.toString()+t.toString();if(!this._offsetsCache[p]){this._animationState.repeatCount=0,this._animationState.loopMode=B.ANIMATIONLOOPMODE_CYCLE;var _=a._interpolate(t,this._animationState),m=a._interpolate(n,this._animationState);switch(this._animationState.loopMode=this._getCorrectLoopMode(),a.dataType){case B.ANIMATIONTYPE_FLOAT:this._offsetsCache[p]=m-_;break;case B.ANIMATIONTYPE_QUATERNION:this._offsetsCache[p]=m.subtract(_);break;case B.ANIMATIONTYPE_VECTOR3:this._offsetsCache[p]=m.subtract(_);case B.ANIMATIONTYPE_VECTOR2:this._offsetsCache[p]=m.subtract(_);case B.ANIMATIONTYPE_SIZE:this._offsetsCache[p]=m.subtract(_);case B.ANIMATIONTYPE_COLOR3:this._offsetsCache[p]=m.subtract(_)}this._highLimitsCache[p]=m}f=this._highLimitsCache[p],l=this._offsetsCache[p]}if(void 0===l)switch(a.dataType){case B.ANIMATIONTYPE_FLOAT:l=0;break;case B.ANIMATIONTYPE_QUATERNION:l=U;break;case B.ANIMATIONTYPE_VECTOR3:l=V;break;case B.ANIMATIONTYPE_VECTOR2:l=G;break;case B.ANIMATIONTYPE_SIZE:l=j;break;case B.ANIMATIONTYPE_COLOR3:l=z}if(this._host&&this._host.syncRoot){var g=this._host.syncRoot;c=t+(g.masterFrame-g.fromFrame)/(g.toFrame-g.fromFrame)*(n-t)}else c=u&&0!==h?t+d%h:n;var v=this._events;if((h>0&&this.currentFrame>c||h<0&&this.currentFrame<c)&&(this._onLoop(),v.length))for(var y=0;y<v.length;y++)v[y].onlyOnce||(v[y].isDone=!1);this._currentFrame=c,this._animationState.repeatCount=0===h?0:d/h>>0,this._animationState.highLimitValue=f,this._animationState.offsetValue=l;var b=a._interpolate(c,this._animationState);if(this.setValue(b,o),v.length)for(y=0;y<v.length;y++)if(h>0&&c>=v[y].frame&&v[y].frame>=t||h<0&&c<=v[y].frame&&v[y].frame<=t){var T=v[y];T.isDone||(T.onlyOnce&&(v.splice(y,1),y--),T.isDone=!0,T.action(c))}return u||(this._stopped=!0),u},e}(),H=n(16),W=n(47),X=n(34),K=function(e){function t(t,n,r,i,a,s,u){void 0===r&&(r=null),void 0===i&&(i=null),void 0===a&&(a=null),void 0===s&&(s=null),void 0===u&&(u=null);var l=e.call(this,t,n.getScene(),!1)||this;return l.name=t,l.children=new Array,l.animations=new Array,l._index=null,l._absoluteTransform=new o.j,l._invertedAbsoluteTransform=new o.j,l._scalingDeterminant=1,l._worldTransform=new o.j,l._needToDecompose=!0,l._needToCompose=!1,l._linkedTransformNode=null,l._waitingTransformNodeId=null,l._skeleton=n,l._localMatrix=i?i.clone():o.j.Identity(),l._restPose=a||l._localMatrix.clone(),l._baseMatrix=s||l._localMatrix.clone(),l._index=u,n.bones.push(l),l.setParent(r,!1),(s||i)&&l._updateDifferenceMatrix(),l}return l.d(t,e),Object.defineProperty(t.prototype,"_matrix",{get:function(){return this._compose(),this._localMatrix},set:function(e){this._localMatrix.copyFrom(e),this._needToDecompose=!0},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"Bone"},t.prototype.getSkeleton=function(){return this._skeleton},t.prototype.getParent=function(){return this._parent},t.prototype.getChildren=function(){return this.children},t.prototype.setParent=function(e,t){if(void 0===t&&(t=!0),this._parent!==e){if(this._parent){var n=this._parent.children.indexOf(this);-1!==n&&this._parent.children.splice(n,1)}this._parent=e,this._parent&&this._parent.children.push(this),t&&this._updateDifferenceMatrix(),this.markAsDirty()}},t.prototype.getLocalMatrix=function(){return this._compose(),this._localMatrix},t.prototype.getBaseMatrix=function(){return this._baseMatrix},t.prototype.getRestPose=function(){return this._restPose},t.prototype.getWorldMatrix=function(){return this._worldTransform},t.prototype.returnToRest=function(){this.updateMatrix(this._restPose.clone())},t.prototype.getInvertedAbsoluteTransform=function(){return this._invertedAbsoluteTransform},t.prototype.getAbsoluteTransform=function(){return this._absoluteTransform},t.prototype.linkTransformNode=function(e){this._linkedTransformNode&&this._skeleton._numBonesWithLinkedTransformNode--,this._linkedTransformNode=e,this._linkedTransformNode&&this._skeleton._numBonesWithLinkedTransformNode++},Object.defineProperty(t.prototype,"position",{get:function(){return this._decompose(),this._localPosition},set:function(e){this._decompose(),this._localPosition.copyFrom(e),this._markAsDirtyAndCompose()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotation",{get:function(){return this.getRotation()},set:function(e){this.setRotation(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationQuaternion",{get:function(){return this._decompose(),this._localRotation},set:function(e){this.setRotationQuaternion(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaling",{get:function(){return this.getScale()},set:function(e){this.setScale(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animationPropertiesOverride",{get:function(){return this._skeleton.animationPropertiesOverride},enumerable:!0,configurable:!0}),t.prototype._decompose=function(){this._needToDecompose&&(this._needToDecompose=!1,this._localScaling||(this._localScaling=o.x.Zero(),this._localRotation=o.q.Zero(),this._localPosition=o.x.Zero()),this._localMatrix.decompose(this._localScaling,this._localRotation,this._localPosition))},t.prototype._compose=function(){this._needToCompose&&(this._needToCompose=!1,o.j.ComposeToRef(this._localScaling,this._localRotation,this._localPosition,this._localMatrix))},t.prototype.updateMatrix=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n=!0),this._baseMatrix.copyFrom(e),t&&this._updateDifferenceMatrix(),n?(this._localMatrix.copyFrom(e),this._markAsDirtyAndDecompose()):this.markAsDirty()},t.prototype._updateDifferenceMatrix=function(e,t){if(void 0===t&&(t=!0),e||(e=this._baseMatrix),this._parent?e.multiplyToRef(this._parent._absoluteTransform,this._absoluteTransform):this._absoluteTransform.copyFrom(e),this._absoluteTransform.invertToRef(this._invertedAbsoluteTransform),t)for(var n=0;n<this.children.length;n++)this.children[n]._updateDifferenceMatrix();this._scalingDeterminant=this._absoluteTransform.determinant()<0?-1:1},t.prototype.markAsDirty=function(){this._currentRenderId++,this._childUpdateId++,this._skeleton._markAsDirty()},t.prototype._markAsDirtyAndCompose=function(){this.markAsDirty(),this._needToCompose=!0},t.prototype._markAsDirtyAndDecompose=function(){this.markAsDirty(),this._needToDecompose=!0},t.prototype.translate=function(e,n,r){void 0===n&&(n=o.s.LOCAL);var i=this.getLocalMatrix();if(n==o.s.LOCAL)i.addAtIndex(12,e.x),i.addAtIndex(13,e.y),i.addAtIndex(14,e.z);else{var a=null;r&&(a=r.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var s=t._tmpMats[0],u=t._tmpVecs[0];this._parent&&(r&&a?(s.copyFrom(this._parent.getAbsoluteTransform()),s.multiplyToRef(a,s)):s.copyFrom(this._parent.getAbsoluteTransform())),s.setTranslationFromFloats(0,0,0),s.invert(),o.x.TransformCoordinatesToRef(e,s,u),i.addAtIndex(12,u.x),i.addAtIndex(13,u.y),i.addAtIndex(14,u.z)}this._markAsDirtyAndDecompose()},t.prototype.setPosition=function(e,n,r){void 0===n&&(n=o.s.LOCAL);var i=this.getLocalMatrix();if(n==o.s.LOCAL)i.setTranslationFromFloats(e.x,e.y,e.z);else{var a=null;r&&(a=r.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var s=t._tmpMats[0],u=t._tmpVecs[0];this._parent&&(r&&a?(s.copyFrom(this._parent.getAbsoluteTransform()),s.multiplyToRef(a,s)):s.copyFrom(this._parent.getAbsoluteTransform())),s.invert(),o.x.TransformCoordinatesToRef(e,s,u),i.setTranslationFromFloats(u.x,u.y,u.z)}this._markAsDirtyAndDecompose()},t.prototype.setAbsolutePosition=function(e,t){this.setPosition(e,o.s.WORLD,t)},t.prototype.scale=function(e,n,r,i){void 0===i&&(i=!1);var a=this.getLocalMatrix(),s=t._tmpMats[0];o.j.ScalingToRef(e,n,r,s),s.multiplyToRef(a,a),s.invert();for(var u=0,l=this.children;u<l.length;u++){var c=(f=l[u]).getLocalMatrix();c.multiplyToRef(s,c),c.multiplyAtIndex(12,e),c.multiplyAtIndex(13,n),c.multiplyAtIndex(14,r),f._markAsDirtyAndDecompose()}if(this._markAsDirtyAndDecompose(),i)for(var h=0,d=this.children;h<d.length;h++){var f;(f=d[h]).scale(e,n,r,i)}},t.prototype.setScale=function(e){this._decompose(),this._localScaling.copyFrom(e),this._markAsDirtyAndCompose()},t.prototype.getScale=function(){return this._decompose(),this._localScaling},t.prototype.getScaleToRef=function(e){this._decompose(),e.copyFrom(this._localScaling)},t.prototype.setYawPitchRoll=function(e,n,r,i,a){if(void 0===i&&(i=o.s.LOCAL),i===o.s.LOCAL){var s=t._tmpQuat;return o.q.RotationYawPitchRollToRef(e,n,r,s),void this.setRotationQuaternion(s,i,a)}var u=t._tmpMats[0];if(this._getNegativeRotationToRef(u,a)){var l=t._tmpMats[1];o.j.RotationYawPitchRollToRef(e,n,r,l),u.multiplyToRef(l,l),this._rotateWithMatrix(l,i,a)}},t.prototype.rotate=function(e,n,r,i){void 0===r&&(r=o.s.LOCAL);var a=t._tmpMats[0];a.setTranslationFromFloats(0,0,0),o.j.RotationAxisToRef(e,n,a),this._rotateWithMatrix(a,r,i)},t.prototype.setAxisAngle=function(e,n,r,i){if(void 0===r&&(r=o.s.LOCAL),r===o.s.LOCAL){var a=t._tmpQuat;return o.q.RotationAxisToRef(e,n,a),void this.setRotationQuaternion(a,r,i)}var s=t._tmpMats[0];if(this._getNegativeRotationToRef(s,i)){var u=t._tmpMats[1];o.j.RotationAxisToRef(e,n,u),s.multiplyToRef(u,u),this._rotateWithMatrix(u,r,i)}},t.prototype.setRotation=function(e,t,n){void 0===t&&(t=o.s.LOCAL),this.setYawPitchRoll(e.y,e.x,e.z,t,n)},t.prototype.setRotationQuaternion=function(e,n,r){if(void 0===n&&(n=o.s.LOCAL),n===o.s.LOCAL)return this._decompose(),this._localRotation.copyFrom(e),void this._markAsDirtyAndCompose();var i=t._tmpMats[0];if(this._getNegativeRotationToRef(i,r)){var a=t._tmpMats[1];o.j.FromQuaternionToRef(e,a),i.multiplyToRef(a,a),this._rotateWithMatrix(a,n,r)}},t.prototype.setRotationMatrix=function(e,n,r){if(void 0===n&&(n=o.s.LOCAL),n===o.s.LOCAL){var i=t._tmpQuat;return o.q.FromRotationMatrixToRef(e,i),void this.setRotationQuaternion(i,n,r)}var a=t._tmpMats[0];if(this._getNegativeRotationToRef(a,r)){var s=t._tmpMats[1];s.copyFrom(e),a.multiplyToRef(e,s),this._rotateWithMatrix(s,n,r)}},t.prototype._rotateWithMatrix=function(e,n,r){void 0===n&&(n=o.s.LOCAL);var i=this.getLocalMatrix(),a=i.m[12],s=i.m[13],u=i.m[14],l=this.getParent(),c=t._tmpMats[3],h=t._tmpMats[4];l&&n==o.s.WORLD?(r?(c.copyFrom(r.getWorldMatrix()),l.getAbsoluteTransform().multiplyToRef(c,c)):c.copyFrom(l.getAbsoluteTransform()),h.copyFrom(c),h.invert(),i.multiplyToRef(c,i),i.multiplyToRef(e,i),i.multiplyToRef(h,i)):n==o.s.WORLD&&r?(c.copyFrom(r.getWorldMatrix()),h.copyFrom(c),h.invert(),i.multiplyToRef(c,i),i.multiplyToRef(e,i),i.multiplyToRef(h,i)):i.multiplyToRef(e,i),i.setTranslationFromFloats(a,s,u),this.computeAbsoluteTransforms(),this._markAsDirtyAndDecompose()},t.prototype._getNegativeRotationToRef=function(e,n){var r=t._tmpMats[2];return e.copyFrom(this.getAbsoluteTransform()),n&&(e.multiplyToRef(n.getWorldMatrix(),e),o.j.ScalingToRef(n.scaling.x,n.scaling.y,n.scaling.z,r)),e.invert(),!isNaN(e.m[0])&&(r.multiplyAtIndex(0,this._scalingDeterminant),e.multiplyToRef(r,e),!0)},t.prototype.getPosition=function(e,t){void 0===e&&(e=o.s.LOCAL),void 0===t&&(t=null);var n=o.x.Zero();return this.getPositionToRef(e,t,n),n},t.prototype.getPositionToRef=function(e,n,r){if(void 0===e&&(e=o.s.LOCAL),e==o.s.LOCAL){var i=this.getLocalMatrix();r.x=i.m[12],r.y=i.m[13],r.z=i.m[14]}else{var a=null;n&&(a=n.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var s=t._tmpMats[0];n&&a?(s.copyFrom(this.getAbsoluteTransform()),s.multiplyToRef(a,s)):s=this.getAbsoluteTransform(),r.x=s.m[12],r.y=s.m[13],r.z=s.m[14]}},t.prototype.getAbsolutePosition=function(e){void 0===e&&(e=null);var t=o.x.Zero();return this.getPositionToRef(o.s.WORLD,e,t),t},t.prototype.getAbsolutePositionToRef=function(e,t){this.getPositionToRef(o.s.WORLD,e,t)},t.prototype.computeAbsoluteTransforms=function(){if(this._compose(),this._parent)this._localMatrix.multiplyToRef(this._parent._absoluteTransform,this._absoluteTransform);else{this._absoluteTransform.copyFrom(this._localMatrix);var e=this._skeleton.getPoseMatrix();e&&this._absoluteTransform.multiplyToRef(e,this._absoluteTransform)}for(var t=this.children,n=t.length,r=0;r<n;r++)t[r].computeAbsoluteTransforms()},t.prototype.getDirection=function(e,t){void 0===t&&(t=null);var n=o.x.Zero();return this.getDirectionToRef(e,t,n),n},t.prototype.getDirectionToRef=function(e,n,r){void 0===n&&(n=null);var i=null;n&&(i=n.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var a=t._tmpMats[0];a.copyFrom(this.getAbsoluteTransform()),n&&i&&a.multiplyToRef(i,a),o.x.TransformNormalToRef(e,a,r),r.normalize()},t.prototype.getRotation=function(e,t){void 0===e&&(e=o.s.LOCAL),void 0===t&&(t=null);var n=o.x.Zero();return this.getRotationToRef(e,t,n),n},t.prototype.getRotationToRef=function(e,n,r){void 0===e&&(e=o.s.LOCAL),void 0===n&&(n=null);var i=t._tmpQuat;this.getRotationQuaternionToRef(e,n,i),i.toEulerAnglesToRef(r)},t.prototype.getRotationQuaternion=function(e,t){void 0===e&&(e=o.s.LOCAL),void 0===t&&(t=null);var n=o.q.Identity();return this.getRotationQuaternionToRef(e,t,n),n},t.prototype.getRotationQuaternionToRef=function(e,n,r){if(void 0===e&&(e=o.s.LOCAL),void 0===n&&(n=null),e==o.s.LOCAL)this._decompose(),r.copyFrom(this._localRotation);else{var i=t._tmpMats[0],a=this.getAbsoluteTransform();n?a.multiplyToRef(n.getWorldMatrix(),i):i.copyFrom(a),i.multiplyAtIndex(0,this._scalingDeterminant),i.multiplyAtIndex(1,this._scalingDeterminant),i.multiplyAtIndex(2,this._scalingDeterminant),i.decompose(void 0,r,void 0)}},t.prototype.getRotationMatrix=function(e,t){void 0===e&&(e=o.s.LOCAL);var n=o.j.Identity();return this.getRotationMatrixToRef(e,t,n),n},t.prototype.getRotationMatrixToRef=function(e,n,r){if(void 0===e&&(e=o.s.LOCAL),e==o.s.LOCAL)this.getLocalMatrix().getRotationMatrixToRef(r);else{var i=t._tmpMats[0],a=this.getAbsoluteTransform();n?a.multiplyToRef(n.getWorldMatrix(),i):i.copyFrom(a),i.multiplyAtIndex(0,this._scalingDeterminant),i.multiplyAtIndex(1,this._scalingDeterminant),i.multiplyAtIndex(2,this._scalingDeterminant),i.getRotationMatrixToRef(r)}},t.prototype.getAbsolutePositionFromLocal=function(e,t){void 0===t&&(t=null);var n=o.x.Zero();return this.getAbsolutePositionFromLocalToRef(e,t,n),n},t.prototype.getAbsolutePositionFromLocalToRef=function(e,n,r){void 0===n&&(n=null);var i=null;n&&(i=n.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var a=t._tmpMats[0];n&&i?(a.copyFrom(this.getAbsoluteTransform()),a.multiplyToRef(i,a)):a=this.getAbsoluteTransform(),o.x.TransformCoordinatesToRef(e,a,r)},t.prototype.getLocalPositionFromAbsolute=function(e,t){void 0===t&&(t=null);var n=o.x.Zero();return this.getLocalPositionFromAbsoluteToRef(e,t,n),n},t.prototype.getLocalPositionFromAbsoluteToRef=function(e,n,r){void 0===n&&(n=null);var i=null;n&&(i=n.getWorldMatrix()),this._skeleton.computeAbsoluteTransforms();var a=t._tmpMats[0];a.copyFrom(this.getAbsoluteTransform()),n&&i&&a.multiplyToRef(i,a),a.invert(),o.x.TransformCoordinatesToRef(e,a,r)},t._tmpVecs=X.a.BuildArray(2,o.x.Zero),t._tmpQuat=o.q.Identity(),t._tmpMats=X.a.BuildArray(5,o.j.Identity),t}(F.a),Q=function(){function e(e,t,n,r,o,a,s,u,l){void 0===n&&(n=0),void 0===r&&(r=100),void 0===o&&(o=!1),void 0===a&&(a=1),this.target=t,this.fromFrame=n,this.toFrame=r,this.loopAnimation=o,this.onAnimationEnd=s,this.onAnimationLoop=l,this._localDelayOffset=null,this._pausedDelay=null,this._runtimeAnimations=new Array,this._paused=!1,this._speedRatio=1,this._weight=-1,this._syncRoot=null,this.disposeOnEnd=!0,this.animationStarted=!1,this.onAnimationEndObservable=new i.c,this.onAnimationLoopObservable=new i.c,this._scene=e,u&&this.appendAnimations(t,u),this._speedRatio=a,e._activeAnimatables.push(this)}return Object.defineProperty(e.prototype,"syncRoot",{get:function(){return this._syncRoot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"masterFrame",{get:function(){return 0===this._runtimeAnimations.length?0:this._runtimeAnimations[0].currentFrame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weight",{get:function(){return this._weight},set:function(e){this._weight=-1!==e?Math.min(Math.max(e,0),1):-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speedRatio",{get:function(){return this._speedRatio},set:function(e){for(var t=0;t<this._runtimeAnimations.length;t++)this._runtimeAnimations[t]._prepareForSpeedRatioChange(e);this._speedRatio=e},enumerable:!0,configurable:!0}),e.prototype.syncWith=function(e){if(this._syncRoot=e,e){var t=this._scene._activeAnimatables.indexOf(this);t>-1&&(this._scene._activeAnimatables.splice(t,1),this._scene._activeAnimatables.push(this))}return this},e.prototype.getAnimations=function(){return this._runtimeAnimations},e.prototype.appendAnimations=function(e,t){for(var n=this,r=0;r<t.length;r++){var i=new Y(e,t[r],this._scene,this);i._onLoop=function(){n.onAnimationLoopObservable.notifyObservers(n),n.onAnimationLoop&&n.onAnimationLoop()},this._runtimeAnimations.push(i)}},e.prototype.getAnimationByTargetProperty=function(e){for(var t=this._runtimeAnimations,n=0;n<t.length;n++)if(t[n].animation.targetProperty===e)return t[n].animation;return null},e.prototype.getRuntimeAnimationByTargetProperty=function(e){for(var t=this._runtimeAnimations,n=0;n<t.length;n++)if(t[n].animation.targetProperty===e)return t[n];return null},e.prototype.reset=function(){for(var e=this._runtimeAnimations,t=0;t<e.length;t++)e[t].reset(!0);this._localDelayOffset=null,this._pausedDelay=null},e.prototype.enableBlending=function(e){for(var t=this._runtimeAnimations,n=0;n<t.length;n++)t[n].animation.enableBlending=!0,t[n].animation.blendingSpeed=e},e.prototype.disableBlending=function(){for(var e=this._runtimeAnimations,t=0;t<e.length;t++)e[t].animation.enableBlending=!1},e.prototype.goToFrame=function(e){var t=this._runtimeAnimations;if(t[0]){var n=0!==this.speedRatio?1e3*(e-t[0].currentFrame)/(t[0].animation.framePerSecond*this.speedRatio):0;null===this._localDelayOffset&&(this._localDelayOffset=0),this._localDelayOffset-=n}for(var r=0;r<t.length;r++)t[r].goToFrame(e)},e.prototype.pause=function(){this._paused||(this._paused=!0)},e.prototype.restart=function(){this._paused=!1},e.prototype._raiseOnAnimationEnd=function(){this.onAnimationEnd&&this.onAnimationEnd(),this.onAnimationEndObservable.notifyObservers(this)},e.prototype.stop=function(e,t){if(e||t){var n=this._scene._activeAnimatables.indexOf(this);if(n>-1){for(var r=(o=this._runtimeAnimations).length-1;r>=0;r--){var i=o[r];e&&i.animation.name!=e||t&&!t(i.target)||(i.dispose(),o.splice(r,1))}0==o.length&&(this._scene._activeAnimatables.splice(n,1),this._raiseOnAnimationEnd())}}else if((r=this._scene._activeAnimatables.indexOf(this))>-1){this._scene._activeAnimatables.splice(r,1);var o=this._runtimeAnimations;for(r=0;r<o.length;r++)o[r].dispose();this._raiseOnAnimationEnd()}},e.prototype.waitAsync=function(){var e=this;return new Promise(function(t,n){e.onAnimationEndObservable.add(function(){t(e)},void 0,void 0,e,!0)})},e.prototype._animate=function(e){if(this._paused)return this.animationStarted=!1,null===this._pausedDelay&&(this._pausedDelay=e),!0;if(null===this._localDelayOffset?(this._localDelayOffset=e,this._pausedDelay=null):null!==this._pausedDelay&&(this._localDelayOffset+=e-this._pausedDelay,this._pausedDelay=null),0===this._weight)return!0;var t,n=!1,r=this._runtimeAnimations;for(t=0;t<r.length;t++){var i=r[t].animate(e-this._localDelayOffset,this.fromFrame,this.toFrame,this.loopAnimation,this._speedRatio,this._weight);n=n||i}if(this.animationStarted=n,!n){if(this.disposeOnEnd)for(t=this._scene._activeAnimatables.indexOf(this),this._scene._activeAnimatables.splice(t,1),t=0;t<r.length;t++)r[t].dispose();this._raiseOnAnimationEnd(),this.disposeOnEnd&&(this.onAnimationEnd=null,this.onAnimationLoop=null,this.onAnimationLoopObservable.clear(),this.onAnimationEndObservable.clear())}return n},e}();H.a.prototype._animate=function(){if(this.animationsEnabled){var e=this._activeAnimatables;if(0!==e.length){var t=W.a.Now;if(!this._animationTimeLast){if(this._pendingData.length>0)return;this._animationTimeLast=t}this._animationTime+=this.useConstantAnimationDeltaTime?16:(t-this._animationTimeLast)*this.animationTimeScale;var n=this._animationTime;this._animationTimeLast=t;for(var r=0;r<e.length;r++)e[r]._animate(n);this._processLateAnimationBindings()}}},H.a.prototype.beginWeightedAnimation=function(e,t,n,r,i,o,a,s,u,l){void 0===r&&(r=1),void 0===o&&(o=1);var c=this.beginAnimation(e,t,n,i,o,a,s,!1,u,l);return c.weight=r,c},H.a.prototype.beginAnimation=function(e,t,n,r,i,o,a,s,u,l){void 0===i&&(i=1),void 0===s&&(s=!0),t>n&&i>0&&(i*=-1),s&&this.stopAnimation(e,void 0,u),a||(a=new Q(this,e,t,n,r,i,o,void 0,l));var c=!u||u(e);if(e.animations&&c&&a.appendAnimations(e,e.animations),e.getAnimatables)for(var h=e.getAnimatables(),d=0;d<h.length;d++)this.beginAnimation(h[d],t,n,r,i,o,a,s,u,l);return a.reset(),a},H.a.prototype.beginHierarchyAnimation=function(e,t,n,r,i,o,a,s,u,l,c){void 0===o&&(o=1),void 0===u&&(u=!0);var h=e.getDescendants(t),d=[];d.push(this.beginAnimation(e,n,r,i,o,a,s,u,l));for(var f=0,p=h;f<p.length;f++)d.push(this.beginAnimation(p[f],n,r,i,o,a,s,u,l));return d},H.a.prototype.beginDirectAnimation=function(e,t,n,r,i,o,a,s){return void 0===o&&(o=1),new Q(this,e,n,r,i,o,a,t,s)},H.a.prototype.beginDirectHierarchyAnimation=function(e,t,n,r,i,o,a,s,u){var l=e.getDescendants(t),c=[];c.push(this.beginDirectAnimation(e,n,r,i,o,a,s,u));for(var h=0,d=l;h<d.length;h++)c.push(this.beginDirectAnimation(d[h],n,r,i,o,a,s,u));return c},H.a.prototype.getAnimatableByTarget=function(e){for(var t=0;t<this._activeAnimatables.length;t++)if(this._activeAnimatables[t].target===e)return this._activeAnimatables[t];return null},H.a.prototype.getAllAnimatablesByTarget=function(e){for(var t=[],n=0;n<this._activeAnimatables.length;n++)this._activeAnimatables[n].target===e&&t.push(this._activeAnimatables[n]);return t},H.a.prototype.stopAnimation=function(e,t,n){for(var r=0,i=this.getAllAnimatablesByTarget(e);r<i.length;r++)i[r].stop(t,n)},H.a.prototype.stopAllAnimations=function(){if(this._activeAnimatables){for(var e=0;e<this._activeAnimatables.length;e++)this._activeAnimatables[e].stop();this._activeAnimatables=[]}for(var t=0,n=this.animationGroups;t<n.length;t++)n[t].stop()},H.a.prototype._registerTargetForLateAnimationBinding=function(e,t){var n=e.target;this._registeredForLateAnimationBindings.pushNoDuplicate(n),n._lateAnimationHolders||(n._lateAnimationHolders={}),n._lateAnimationHolders[e.targetPath]||(n._lateAnimationHolders[e.targetPath]={totalWeight:0,animations:[],originalValue:t}),n._lateAnimationHolders[e.targetPath].animations.push(e),n._lateAnimationHolders[e.targetPath].totalWeight+=e.weight},H.a.prototype._processLateAnimationBindingsForMatrices=function(e){var t=1,n=o.t.Vector3[0],r=o.t.Vector3[1],i=o.t.Quaternion[0],a=0,s=e.animations[0],u=1;if(e.totalWeight<1)e.originalValue.decompose(r,i,n),u=1-e.totalWeight;else if(a=1,t=e.totalWeight,s.currentValue.decompose(r,i,n),1==(u=s.weight/t))return s.currentValue;r.scaleInPlace(u),n.scaleInPlace(u),i.scaleInPlace(u);for(var l=a;l<e.animations.length;l++){var c=e.animations[l],h=(u=c.weight/t,o.t.Vector3[2]),d=o.t.Vector3[3],f=o.t.Quaternion[1];c.currentValue.decompose(d,f,h),d.scaleAndAddToRef(u,r),f.scaleAndAddToRef(u,i),h.scaleAndAddToRef(u,n)}var p=s._animationState.workValue;return o.j.ComposeToRef(r,i,n,p),p},H.a.prototype._processLateAnimationBindingsForQuaternions=function(e,t){var n=e.originalValue;if(1===e.animations.length)return o.q.SlerpToRef(n,e.animations[0].currentValue,Math.min(1,e.totalWeight),t),t;var r,i,a=1;if(e.totalWeight<1){var s=1-e.totalWeight;i=[],(r=[]).push(n),i.push(s)}else{if(2===e.animations.length)return o.q.SlerpToRef(e.animations[0].currentValue,e.animations[1].currentValue,e.animations[1].weight/e.totalWeight,t),t;r=[],i=[],a=e.totalWeight}for(var u=0;u<e.animations.length;u++){var l=e.animations[u];r.push(l.currentValue),i.push(l.weight/a)}for(var c=0,h=null,d=0;d<r.length;)h?(o.q.SlerpToRef(h,r[d],i[d]/(c+=i[d]),h),d++):(o.q.SlerpToRef(r[d],r[d+1],i[d+1]/(i[d]+i[d+1]),t),h=t,c=i[d]+i[d+1],d+=2);return h},H.a.prototype._processLateAnimationBindings=function(){if(this._registeredForLateAnimationBindings.length){for(var e=0;e<this._registeredForLateAnimationBindings.length;e++){var t=this._registeredForLateAnimationBindings.data[e];for(var n in t._lateAnimationHolders){var r=t._lateAnimationHolders[n],i=r.animations[0],a=r.originalValue,s=t[n];if(B.AllowMatrixDecomposeForInterpolation&&a.m)s=this._processLateAnimationBindingsForMatrices(r);else if(void 0!==a.w)s=this._processLateAnimationBindingsForQuaternions(r,s||o.q.Identity());else{var u=0,l=1;if(r.totalWeight<1)s=a.scale?a.scale(1-r.totalWeight):a*(1-r.totalWeight);else{var c=i.weight/(l=r.totalWeight);s=1!==c?i.currentValue.scale?i.currentValue.scale(c):i.currentValue*c:i.currentValue,u=1}for(var h=u;h<r.animations.length;h++){var d=r.animations[h],f=d.weight/l;d.currentValue.scaleAndAddToRef?d.currentValue.scaleAndAddToRef(f,s):s+=d.currentValue*f}}t[n]=s}t._lateAnimationHolders={}}this._registeredForLateAnimationBindings.reset()}},K.prototype.copyAnimationRange=function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=null),0===this.animations.length&&(this.animations.push(new B(this.name,"_matrix",e.animations[0].framePerSecond,B.ANIMATIONTYPE_MATRIX,0)),this.animations[0].setKeys([]));var o=e.animations[0].getRange(t);if(!o)return!1;for(var a,s,u,l=o.from,c=o.to,h=e.animations[0].getKeys(),d=e.length,f=e.getParent(),p=this.getParent(),_=r&&f&&d&&this.length&&d!==this.length,m=_&&p&&f?p.length/f.length:1,g=r&&!p&&i&&(1!==i.x||1!==i.y||1!==i.z),v=this.animations[0].getKeys(),y=0,b=h.length;y<b;y++)(a=h[y]).frame>=l&&a.frame<=c&&(r?(u=a.value.clone(),_?(s=u.getTranslation(),u.setTranslation(s.scaleInPlace(m))):g&&i?(s=u.getTranslation(),u.setTranslation(s.multiplyInPlace(i))):u=a.value):u=a.value,v.push({frame:a.frame+n,value:u}));return this.animations[0].createRange(t,l+n,c+n),!0};var q=function(){},Z=function(){function e(e,t){void 0===t&&(t=null),this.name=e,this._targetedAnimations=new Array,this._animatables=new Array,this._from=Number.MAX_VALUE,this._to=-Number.MAX_VALUE,this._speedRatio=1,this._loopAnimation=!1,this.onAnimationEndObservable=new i.c,this.onAnimationLoopObservable=new i.c,this.onAnimationGroupEndObservable=new i.c,this.onAnimationGroupPauseObservable=new i.c,this.onAnimationGroupPlayObservable=new i.c,this._scene=t||S.a.LastCreatedScene,this.uniqueId=this._scene.getUniqueId(),this._scene.animationGroups.push(this)}return Object.defineProperty(e.prototype,"from",{get:function(){return this._from},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"to",{get:function(){return this._to},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStarted",{get:function(){return this._isStarted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isStarted&&!this._isPaused},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speedRatio",{get:function(){return this._speedRatio},set:function(e){if(this._speedRatio!==e){this._speedRatio=e;for(var t=0;t<this._animatables.length;t++)this._animatables[t].speedRatio=this._speedRatio}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loopAnimation",{get:function(){return this._loopAnimation},set:function(e){if(this._loopAnimation!==e){this._loopAnimation=e;for(var t=0;t<this._animatables.length;t++)this._animatables[t].loopAnimation=this._loopAnimation}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetedAnimations",{get:function(){return this._targetedAnimations},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animatables",{get:function(){return this._animatables},enumerable:!0,configurable:!0}),e.prototype.addTargetedAnimation=function(e,t){var n={animation:e,target:t},r=e.getKeys();return this._from>r[0].frame&&(this._from=r[0].frame),this._to<r[r.length-1].frame&&(this._to=r[r.length-1].frame),this._targetedAnimations.push(n),n},e.prototype.normalize=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),null==e&&(e=this._from),null==t&&(t=this._to);for(var n=0;n<this._targetedAnimations.length;n++){var r=this._targetedAnimations[n].animation.getKeys(),i=r[0],o=r[r.length-1];if(i.frame>e){var a={frame:e,value:i.value,inTangent:i.inTangent,outTangent:i.outTangent,interpolation:i.interpolation};r.splice(0,0,a)}o.frame<t&&r.push(a={frame:t,value:o.value,inTangent:o.outTangent,outTangent:o.outTangent,interpolation:o.interpolation})}return this._from=e,this._to=t,this},e.prototype.start=function(e,t,n,r){var i=this;if(void 0===e&&(e=!1),void 0===t&&(t=1),this._isStarted||0===this._targetedAnimations.length)return this;this._loopAnimation=e;for(var o=function(o){var s=a._scene.beginDirectAnimation(o.target,[o.animation],void 0!==n?n:a._from,void 0!==r?r:a._to,e,t);s.onAnimationEnd=function(){i.onAnimationEndObservable.notifyObservers(o),i._checkAnimationGroupEnded(s)},s.onAnimationLoop=function(){i.onAnimationLoopObservable.notifyObservers(o)},a._animatables.push(s)},a=this,s=0,u=this._targetedAnimations;s<u.length;s++)o(u[s]);if(this._speedRatio=t,void 0!==n&&void 0!==r)if(n<r&&this._speedRatio<0){var l=r;r=n,n=l}else n>r&&this._speedRatio>0&&(this._speedRatio=-t);return this._isStarted=!0,this._isPaused=!1,this.onAnimationGroupPlayObservable.notifyObservers(this),this},e.prototype.pause=function(){if(!this._isStarted)return this;this._isPaused=!0;for(var e=0;e<this._animatables.length;e++)this._animatables[e].pause();return this.onAnimationGroupPauseObservable.notifyObservers(this),this},e.prototype.play=function(e){return this.isStarted&&this._animatables.length===this._targetedAnimations.length?(void 0!==e&&(this.loopAnimation=e),this.restart()):(this.stop(),this.start(e,this._speedRatio)),this._isPaused=!1,this},e.prototype.reset=function(){if(!this._isStarted)return this;for(var e=0;e<this._animatables.length;e++)this._animatables[e].reset();return this},e.prototype.restart=function(){if(!this._isStarted)return this;for(var e=0;e<this._animatables.length;e++)this._animatables[e].restart();return this.onAnimationGroupPlayObservable.notifyObservers(this),this},e.prototype.stop=function(){if(!this._isStarted)return this;for(var e=this._animatables.slice(),t=0;t<e.length;t++)e[t].stop();return this._isStarted=!1,this},e.prototype.setWeightForAllAnimatables=function(e){for(var t=0;t<this._animatables.length;t++)this._animatables[t].weight=e;return this},e.prototype.syncAllAnimationsWith=function(e){for(var t=0;t<this._animatables.length;t++)this._animatables[t].syncWith(e);return this},e.prototype.goToFrame=function(e){if(!this._isStarted)return this;for(var t=0;t<this._animatables.length;t++)this._animatables[t].goToFrame(e);return this},e.prototype.dispose=function(){this._targetedAnimations=[],this._animatables=[];var e=this._scene.animationGroups.indexOf(this);e>-1&&this._scene.animationGroups.splice(e,1),this.onAnimationEndObservable.clear(),this.onAnimationGroupEndObservable.clear(),this.onAnimationGroupPauseObservable.clear(),this.onAnimationGroupPlayObservable.clear(),this.onAnimationLoopObservable.clear()},e.prototype._checkAnimationGroupEnded=function(e){var t=this._animatables.indexOf(e);t>-1&&this._animatables.splice(t,1),0===this._animatables.length&&(this._isStarted=!1,this.onAnimationGroupEndObservable.notifyObservers(this))},e.prototype.clone=function(t,n){for(var r=new e(t||this.name,this._scene),i=0,o=this._targetedAnimations;i<o.length;i++){var a=o[i];r.addTargetedAnimation(a.animation.clone(),n?n(a.target):a.target)}return r},e.Parse=function(t,n){for(var r=new e(t.name,n),i=0;i<t.targetedAnimations.length;i++){var o=t.targetedAnimations[i],a=B.Parse(o.animation),s=o.targetId;if("influence"===o.animation.property){var u=n.getMorphTargetById(s);u&&r.addTargetedAnimation(a,u)}else{var l=n.getNodeByID(s);null!=l&&r.addTargetedAnimation(a,l)}}return null!==t.from&&null!==t.from&&r.normalize(t.from,t.to),r},e.prototype.getClassName=function(){return"AnimationGroup"},e.prototype.toString=function(e){var t="Name: "+this.name;return t+=", type: "+this.getClassName(),e&&(t+=", from: "+this._from,t+=", to: "+this._to,t+=", isStarted: "+this._isStarted,t+=", speedRatio: "+this._speedRatio,t+=", targetedAnimations length: "+this._targetedAnimations.length,t+=", animatables length: "+this._animatables),t},e}(),J=function(){this.enableBlending=!1,this.blendingSpeed=.01,this.loopMode=B.ANIMATIONLOOPMODE_CYCLE},$=function(){function e(){this._easingMode=e.EASINGMODE_EASEIN}return e.prototype.setEasingMode=function(e){var t=Math.min(Math.max(e,0),2);this._easingMode=t},e.prototype.getEasingMode=function(){return this._easingMode},e.prototype.easeInCore=function(e){throw new Error("You must implement this method")},e.prototype.ease=function(t){switch(this._easingMode){case e.EASINGMODE_EASEIN:return this.easeInCore(t);case e.EASINGMODE_EASEOUT:return 1-this.easeInCore(1-t)}return t>=.5?.5*(1-this.easeInCore(2*(1-t)))+.5:.5*this.easeInCore(2*t)},e.EASINGMODE_EASEIN=0,e.EASINGMODE_EASEOUT=1,e.EASINGMODE_EASEINOUT=2,e}(),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.easeInCore=function(e){return e=Math.max(0,Math.min(1,e)),1-Math.sqrt(1-e*e)},t}($),te=function(e){function t(t){void 0===t&&(t=1);var n=e.call(this)||this;return n.amplitude=t,n}return l.d(t,e),t.prototype.easeInCore=function(e){var t=Math.max(0,this.amplitude);return Math.pow(e,3)-e*t*Math.sin(3.141592653589793*e)},t}($),ne=function(e){function t(t,n){void 0===t&&(t=3),void 0===n&&(n=2);var r=e.call(this)||this;return r.bounces=t,r.bounciness=n,r}return l.d(t,e),t.prototype.easeInCore=function(e){var t=Math.max(0,this.bounces),n=this.bounciness;n<=1&&(n=1.001);var r=Math.pow(n,t),i=1-n,o=(1-r)/i+.5*r,a=Math.log(-e*o*(1-n)+1)/Math.log(n),s=Math.floor(a),u=s+1,l=(1-Math.pow(n,s))/(i*o),c=.5*(l+(1-Math.pow(n,u))/(i*o)),h=e-c,d=c-l;return-Math.pow(1/n,t-s)/(d*d)*(h-d)*(h+d)},t}($),re=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.easeInCore=function(e){return e*e*e},t}($),ie=function(e){function t(t,n){void 0===t&&(t=3),void 0===n&&(n=3);var r=e.call(this)||this;return r.oscillations=t,r.springiness=n,r}return l.d(t,e),t.prototype.easeInCore=function(e){var t=Math.max(0,this.oscillations),n=Math.max(0,this.springiness);return(0==n?e:(Math.exp(n*e)-1)/(Math.exp(n)-1))*Math.sin((6.283185307179586*t+1.5707963267948966)*e)},t}($),oe=function(e){function t(t){void 0===t&&(t=2);var n=e.call(this)||this;return n.exponent=t,n}return l.d(t,e),t.prototype.easeInCore=function(e){return this.exponent<=0?e:(Math.exp(this.exponent*e)-1)/(Math.exp(this.exponent)-1)},t}($),ae=function(e){function t(t){void 0===t&&(t=2);var n=e.call(this)||this;return n.power=t,n}return l.d(t,e),t.prototype.easeInCore=function(e){var t=Math.max(0,this.power);return Math.pow(e,t)},t}($),se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.easeInCore=function(e){return e*e},t}($),ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.easeInCore=function(e){return e*e*e*e},t}($),le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.easeInCore=function(e){return e*e*e*e*e},t}($),ce=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.easeInCore=function(e){return 1-Math.sin(1.5707963267948966*(1-e))},t}($),he=function(e){function t(t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=1);var o=e.call(this)||this;return o.x1=t,o.y1=n,o.x2=r,o.y2=i,o}return l.d(t,e),t.prototype.easeInCore=function(e){return o.d.Interpolate(e,this.x1,this.y1,this.x2,this.y2)},t}($),de=function(){function e(e,t,n){this.frame=e,this.action=t,this.onlyOnce=n,this.isDone=!1}return e.prototype._clone=function(){return new e(this.frame,this.action,this.onlyOnce)},e}(),fe=n(11),pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t}(r.a),_e=function(e){function t(t){var n=e.call(this)||this;return n.scene=t,n.sounds=[],n.effectLayers=[],n.layers=[],n.lensFlareSystems=[],n.proceduralTextures=[],n.reflectionProbes=[],n}return l.d(t,e),t.prototype.addAllToScene=function(){var e=this;this.cameras.forEach(function(t){e.scene.addCamera(t)}),this.lights.forEach(function(t){e.scene.addLight(t)}),this.meshes.forEach(function(t){e.scene.addMesh(t)}),this.skeletons.forEach(function(t){e.scene.addSkeleton(t)}),this.animations.forEach(function(t){e.scene.addAnimation(t)}),this.animationGroups.forEach(function(t){e.scene.addAnimationGroup(t)}),this.multiMaterials.forEach(function(t){e.scene.addMultiMaterial(t)}),this.materials.forEach(function(t){e.scene.addMaterial(t)}),this.morphTargetManagers.forEach(function(t){e.scene.addMorphTargetManager(t)}),this.geometries.forEach(function(t){e.scene.addGeometry(t)}),this.transformNodes.forEach(function(t){e.scene.addTransformNode(t)}),this.actionManagers.forEach(function(t){e.scene.addActionManager(t)}),this.textures.forEach(function(t){e.scene.addTexture(t)}),this.reflectionProbes.forEach(function(t){e.scene.addReflectionProbe(t)}),this.environmentTexture&&(this.scene.environmentTexture=this.environmentTexture);for(var t=0,n=this.scene._serializableComponents;t<n.length;t++)n[t].addFromContainer(this)},t.prototype.removeAllFromScene=function(){var e=this;this.cameras.forEach(function(t){e.scene.removeCamera(t)}),this.lights.forEach(function(t){e.scene.removeLight(t)}),this.meshes.forEach(function(t){e.scene.removeMesh(t)}),this.skeletons.forEach(function(t){e.scene.removeSkeleton(t)}),this.animations.forEach(function(t){e.scene.removeAnimation(t)}),this.animationGroups.forEach(function(t){e.scene.removeAnimationGroup(t)}),this.multiMaterials.forEach(function(t){e.scene.removeMultiMaterial(t)}),this.materials.forEach(function(t){e.scene.removeMaterial(t)}),this.morphTargetManagers.forEach(function(t){e.scene.removeMorphTargetManager(t)}),this.geometries.forEach(function(t){e.scene.removeGeometry(t)}),this.transformNodes.forEach(function(t){e.scene.removeTransformNode(t)}),this.actionManagers.forEach(function(t){e.scene.removeActionManager(t)}),this.textures.forEach(function(t){e.scene.removeTexture(t)}),this.reflectionProbes.forEach(function(t){e.scene.removeReflectionProbe(t)}),this.environmentTexture===this.scene.environmentTexture&&(this.scene.environmentTexture=null);for(var t=0,n=this.scene._serializableComponents;t<n.length;t++)n[t].removeFromContainer(this)},t.prototype.dispose=function(){this.cameras.forEach(function(e){e.dispose()}),this.cameras=[],this.lights.forEach(function(e){e.dispose()}),this.lights=[],this.meshes.forEach(function(e){e.dispose()}),this.meshes=[],this.skeletons.forEach(function(e){e.dispose()}),this.skeletons=[],this.animationGroups.forEach(function(e){e.dispose()}),this.animationGroups=[],this.multiMaterials.forEach(function(e){e.dispose()}),this.multiMaterials=[],this.materials.forEach(function(e){e.dispose()}),this.materials=[],this.geometries.forEach(function(e){e.dispose()}),this.geometries=[],this.transformNodes.forEach(function(e){e.dispose()}),this.transformNodes=[],this.actionManagers.forEach(function(e){e.dispose()}),this.actionManagers=[],this.textures.forEach(function(e){e.dispose()}),this.textures=[],this.reflectionProbes.forEach(function(e){e.dispose()}),this.reflectionProbes=[],this.environmentTexture&&(this.environmentTexture.dispose(),this.environmentTexture=null);for(var e=0,t=this.scene._serializableComponents;e<t.length;e++)t[e].removeFromContainer(this,!0)},t.prototype._moveAssets=function(e,t,n){if(e)for(var r=0,i=e;r<i.length;r++){var o=i[r],a=!0;if(n)for(var s=0,u=n;s<u.length;s++)if(o===u[s]){a=!1;break}a&&t.push(o)}},t.prototype.moveAllFromScene=function(e){for(var t in void 0===e&&(e=new pe),this)this.hasOwnProperty(t)&&(this[t]=this[t]||[],this._moveAssets(this.scene[t],this[t],e[t]));this.removeAllFromScene()},t.prototype.createRootMesh=function(){var e=new fe.a("assetContainerRootMesh",this.scene);return this.meshes.forEach(function(t){t.parent||e.addChild(t)}),this.meshes.unshift(e),e},t}(r.a),me=n(10),ge=function(){function e(e){this.SMOOTHING=.75,this.FFT_SIZE=512,this.BARGRAPHAMPLITUDE=256,this.DEBUGCANVASPOS={x:20,y:20},this.DEBUGCANVASSIZE={width:320,height:200},this._scene=e,this._audioEngine=me.b.audioEngine,this._audioEngine.canUseWebAudio&&this._audioEngine.audioContext&&(this._webAudioAnalyser=this._audioEngine.audioContext.createAnalyser(),this._webAudioAnalyser.minDecibels=-140,this._webAudioAnalyser.maxDecibels=0,this._byteFreqs=new Uint8Array(this._webAudioAnalyser.frequencyBinCount),this._byteTime=new Uint8Array(this._webAudioAnalyser.frequencyBinCount),this._floatFreqs=new Float32Array(this._webAudioAnalyser.frequencyBinCount))}return e.prototype.getFrequencyBinCount=function(){return this._audioEngine.canUseWebAudio?this._webAudioAnalyser.frequencyBinCount:0},e.prototype.getByteFrequencyData=function(){return this._audioEngine.canUseWebAudio&&(this._webAudioAnalyser.smoothingTimeConstant=this.SMOOTHING,this._webAudioAnalyser.fftSize=this.FFT_SIZE,this._webAudioAnalyser.getByteFrequencyData(this._byteFreqs)),this._byteFreqs},e.prototype.getByteTimeDomainData=function(){return this._audioEngine.canUseWebAudio&&(this._webAudioAnalyser.smoothingTimeConstant=this.SMOOTHING,this._webAudioAnalyser.fftSize=this.FFT_SIZE,this._webAudioAnalyser.getByteTimeDomainData(this._byteTime)),this._byteTime},e.prototype.getFloatFrequencyData=function(){return this._audioEngine.canUseWebAudio&&(this._webAudioAnalyser.smoothingTimeConstant=this.SMOOTHING,this._webAudioAnalyser.fftSize=this.FFT_SIZE,this._webAudioAnalyser.getFloatFrequencyData(this._floatFreqs)),this._floatFreqs},e.prototype.drawDebugCanvas=function(){var e=this;if(this._audioEngine.canUseWebAudio&&(this._debugCanvas||(this._debugCanvas=document.createElement("canvas"),this._debugCanvas.width=this.DEBUGCANVASSIZE.width,this._debugCanvas.height=this.DEBUGCANVASSIZE.height,this._debugCanvas.style.position="absolute",this._debugCanvas.style.top=this.DEBUGCANVASPOS.y+"px",this._debugCanvas.style.left=this.DEBUGCANVASPOS.x+"px",this._debugCanvasContext=this._debugCanvas.getContext("2d"),document.body.appendChild(this._debugCanvas),this._registerFunc=function(){e.drawDebugCanvas()},this._scene.registerBeforeRender(this._registerFunc)),this._registerFunc&&this._debugCanvasContext)){var t=this.getByteFrequencyData();this._debugCanvasContext.fillStyle="rgb(0, 0, 0)",this._debugCanvasContext.fillRect(0,0,this.DEBUGCANVASSIZE.width,this.DEBUGCANVASSIZE.height);for(var n=0;n<this.getFrequencyBinCount();n++){var r=this.DEBUGCANVASSIZE.height*(t[n]/this.BARGRAPHAMPLITUDE),i=this.DEBUGCANVASSIZE.height-r-1,o=this.DEBUGCANVASSIZE.width/this.getFrequencyBinCount(),a=n/this.getFrequencyBinCount()*360;this._debugCanvasContext.fillStyle="hsl("+a+", 100%, 50%)",this._debugCanvasContext.fillRect(n*o,i,o,r)}}},e.prototype.stopDebugCanvas=function(){this._debugCanvas&&(this._registerFunc&&(this._scene.unregisterBeforeRender(this._registerFunc),this._registerFunc=null),document.body.removeChild(this._debugCanvas),this._debugCanvas=null,this._debugCanvasContext=null)},e.prototype.connectAudioNodes=function(e,t){this._audioEngine.canUseWebAudio&&(e.connect(this._webAudioAnalyser),this._webAudioAnalyser.connect(t))},e.prototype.dispose=function(){this._audioEngine.canUseWebAudio&&this._webAudioAnalyser.disconnect()},e}();me.b.AudioEngineFactory=function(e){return new ve(e)};var ve=function(){function e(e){var t=this;void 0===e&&(e=null),this._audioContext=null,this._audioContextInitialized=!1,this._muteButton=null,this.canUseWebAudio=!1,this.WarnedWebAudioUnsupported=!1,this.isMP3supported=!1,this.isOGGsupported=!1,this.unlocked=!0,this.useCustomUnlockedButton=!1,this.onAudioUnlockedObservable=new i.c,this.onAudioLockedObservable=new i.c,this._tryToRun=!1,this._onResize=function(){t._moveButtonToTopLeft()},void 0===window.AudioContext&&void 0===window.webkitAudioContext||(window.AudioContext=window.AudioContext||window.webkitAudioContext,this.canUseWebAudio=!0);var n=document.createElement("audio");this._hostElement=e;try{n&&n.canPlayType&&n.canPlayType('audio/mpeg; codecs="mp3"').replace(/^no$/,"")&&(this.isMP3supported=!0)}catch(e){}try{n&&n.canPlayType&&n.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.isOGGsupported=!0)}catch(e){}}return Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._audioContextInitialized?this.unlocked||this._muteButton||this._displayMuteButton():this._initializeAudioContext(),this._audioContext},enumerable:!0,configurable:!0}),e.prototype.lock=function(){this._triggerSuspendedState()},e.prototype.unlock=function(){this._triggerRunningState()},e.prototype._resumeAudioContext=function(){var e;return this._audioContext.resume&&(e=this._audioContext.resume()),e||Promise.resolve()},e.prototype._initializeAudioContext=function(){try{this.canUseWebAudio&&(this._audioContext=new AudioContext,this.masterGain=this._audioContext.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this._audioContext.destination),this._audioContextInitialized=!0,"running"===this._audioContext.state&&this._triggerRunningState())}catch(e){this.canUseWebAudio=!1,p.a.Error("Web Audio: "+e.message)}},e.prototype._triggerRunningState=function(){var e=this;this._tryToRun||(this._tryToRun=!0,this._resumeAudioContext().then(function(){e._tryToRun=!1,e._muteButton&&e._hideMuteButton()}).catch(function(){e._tryToRun=!1,e.unlocked=!1}),this.unlocked=!0,this.onAudioUnlockedObservable.notifyObservers(this))},e.prototype._triggerSuspendedState=function(){this.unlocked=!1,this.onAudioLockedObservable.notifyObservers(this),this._displayMuteButton()},e.prototype._displayMuteButton=function(){var e=this;if(!this.useCustomUnlockedButton&&!this._muteButton){this._muteButton=document.createElement("BUTTON"),this._muteButton.className="babylonUnmuteIcon",this._muteButton.id="babylonUnmuteIconBtn",this._muteButton.title="Unmute";var t=document.createElement("style");t.appendChild(document.createTextNode(".babylonUnmuteIcon { position: absolute; left: 20px; top: 20px; height: 40px; width: 60px; background-color: rgba(51,51,51,0.7); background-image: url(data:image/svg+xml;charset=UTF-8,%3Csvg%20version%3D%221.1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2239%22%20height%3D%2232%22%20viewBox%3D%220%200%2039%2032%22%3E%3Cpath%20fill%3D%22white%22%20d%3D%22M9.625%2018.938l-0.031%200.016h-4.953q-0.016%200-0.031-0.016v-12.453q0-0.016%200.031-0.016h4.953q0.031%200%200.031%200.016v12.453zM12.125%207.688l8.719-8.703v27.453l-8.719-8.719-0.016-0.047v-9.938zM23.359%207.875l1.406-1.406%204.219%204.203%204.203-4.203%201.422%201.406-4.219%204.219%204.219%204.203-1.484%201.359-4.141-4.156-4.219%204.219-1.406-1.422%204.219-4.203z%22%3E%3C%2Fpath%3E%3C%2Fsvg%3E);  background-size: 80%; background-repeat:no-repeat; background-position: center; background-position-y: 4px; border: none; outline: none; transition: transform 0.125s ease-out; cursor: pointer; z-index: 9999; } .babylonUnmuteIcon:hover { transform: scale(1.05) } .babylonUnmuteIcon:active { background-color: rgba(51,51,51,1) }")),document.getElementsByTagName("head")[0].appendChild(t),document.body.appendChild(this._muteButton),this._moveButtonToTopLeft(),this._muteButton.addEventListener("touchend",function(){e._triggerRunningState()},!0),this._muteButton.addEventListener("click",function(){e._triggerRunningState()},!0),window.addEventListener("resize",this._onResize)}},e.prototype._moveButtonToTopLeft=function(){this._hostElement&&this._muteButton&&(this._muteButton.style.top=this._hostElement.offsetTop+20+"px",this._muteButton.style.left=this._hostElement.offsetLeft+20+"px")},e.prototype._hideMuteButton=function(){this._muteButton&&(document.body.removeChild(this._muteButton),this._muteButton=null)},e.prototype.dispose=function(){this.canUseWebAudio&&this._audioContextInitialized&&(this._connectedAnalyser&&this._audioContext&&(this._connectedAnalyser.stopDebugCanvas(),this._connectedAnalyser.dispose(),this.masterGain.disconnect(),this.masterGain.connect(this._audioContext.destination),this._connectedAnalyser=null),this.masterGain.gain.value=1),this.WarnedWebAudioUnsupported=!1,this._hideMuteButton(),window.removeEventListener("resize",this._onResize),this.onAudioUnlockedObservable.clear(),this.onAudioLockedObservable.clear()},e.prototype.getGlobalVolume=function(){return this.canUseWebAudio&&this._audioContextInitialized?this.masterGain.gain.value:-1},e.prototype.setGlobalVolume=function(e){this.canUseWebAudio&&this._audioContextInitialized&&(this.masterGain.gain.value=e)},e.prototype.connectToAnalyser=function(e){this._connectedAnalyser&&this._connectedAnalyser.stopDebugCanvas(),this.canUseWebAudio&&this._audioContextInitialized&&this._audioContext&&(this._connectedAnalyser=e,this.masterGain.disconnect(),this._connectedAnalyser.connectAudioNodes(this.masterGain,this._audioContext.destination))},e}(),ye=n(9),be=n(19),Te=function(){function e(t,n,r,a,s){var u=this;if(void 0===a&&(a=null),this.autoplay=!1,this.loop=!1,this.useCustomAttenuation=!1,this.isPlaying=!1,this.isPaused=!1,this.spatialSound=!1,this.refDistance=1,this.rolloffFactor=1,this.maxDistance=100,this.distanceModel="linear",this.onEndedObservable=new i.c,this._panningModel="equalpower",this._playbackRate=1,this._streaming=!1,this._startTime=0,this._startOffset=0,this._position=o.x.Zero(),this._positionInEmitterSpace=!1,this._localDirection=new o.x(1,0,0),this._volume=1,this._isReadyToPlay=!1,this._isDirectional=!1,this._coneInnerAngle=360,this._coneOuterAngle=360,this._coneOuterGain=0,this._isOutputConnected=!1,this._urlType="Unknown",this.name=t,this._scene=r,e._SceneComponentInitialization(r),this._readyToPlayCallback=a,this._customAttenuationFunction=function(e,t,n,r,i){return t<n?e*(1-t/n):0},s&&(this.autoplay=s.autoplay||!1,this.loop=s.loop||!1,void 0!==s.volume&&(this._volume=s.volume),this.spatialSound=s.spatialSound||!1,this.maxDistance=s.maxDistance||100,this.useCustomAttenuation=s.useCustomAttenuation||!1,this.rolloffFactor=s.rolloffFactor||1,this.refDistance=s.refDistance||1,this.distanceModel=s.distanceModel||"linear",this._playbackRate=s.playbackRate||1,this._streaming=s.streaming||!1),me.b.audioEngine.canUseWebAudio&&me.b.audioEngine.audioContext){this._soundGain=me.b.audioEngine.audioContext.createGain(),this._soundGain.gain.value=this._volume,this._inputAudioNode=this._soundGain,this._outputAudioNode=this._soundGain,this.spatialSound&&this._createSpatialParameters(),this._scene.mainSoundTrack.AddSound(this);var l=!0;if(n)try{"string"==typeof n?this._urlType="String":n instanceof ArrayBuffer?this._urlType="ArrayBuffer":n instanceof MediaStream?this._urlType="MediaStream":Array.isArray(n)&&(this._urlType="Array");var c=[],h=!1;switch(this._urlType){case"MediaStream":this._streaming=!0,this._isReadyToPlay=!0,this._streamingSource=me.b.audioEngine.audioContext.createMediaStreamSource(n),this.autoplay&&this.play(),this._readyToPlayCallback&&this._readyToPlayCallback();break;case"ArrayBuffer":n.byteLength>0&&(h=!0,this._soundLoaded(n));break;case"String":c.push(n);case"Array":0===c.length&&(c=n);for(var d=0;d<c.length;d++){var f=c[d];if(-1!==f.indexOf(".mp3",f.length-4)&&me.b.audioEngine.isMP3supported&&(h=!0),-1!==f.indexOf(".ogg",f.length-4)&&me.b.audioEngine.isOGGsupported&&(h=!0),-1!==f.indexOf(".wav",f.length-4)&&(h=!0),-1!==f.indexOf("blob:")&&(h=!0),h){this._streaming?(this._htmlAudioElement=new Audio(f),this._htmlAudioElement.controls=!1,this._htmlAudioElement.loop=this.loop,ye.h.SetCorsBehavior(f,this._htmlAudioElement),this._htmlAudioElement.preload="auto",this._htmlAudioElement.addEventListener("canplaythrough",function(){u._isReadyToPlay=!0,u.autoplay&&u.play(),u._readyToPlayCallback&&u._readyToPlayCallback()}),document.body.appendChild(this._htmlAudioElement),this._htmlAudioElement.load()):this._scene._loadFile(f,function(e){u._soundLoaded(e)},void 0,!0,!0,function(e){e&&p.a.Error("XHR "+e.status+" error on: "+f+"."),p.a.Error("Sound creation aborted."),u._scene.mainSoundTrack.RemoveSound(u)});break}}break;default:l=!1}l?h||(this._isReadyToPlay=!0,this._readyToPlayCallback&&window.setTimeout(function(){u._readyToPlayCallback&&u._readyToPlayCallback()},1e3)):p.a.Error("Parameter must be a URL to the sound, an Array of URLs (.mp3 & .ogg) or an ArrayBuffer of the sound.")}catch(e){p.a.Error("Unexpected error. Sound creation aborted."),this._scene.mainSoundTrack.RemoveSound(this)}}else this._scene.mainSoundTrack.AddSound(this),me.b.audioEngine.WarnedWebAudioUnsupported||(p.a.Error("Web Audio is not supported by your browser."),me.b.audioEngine.WarnedWebAudioUnsupported=!0),this._readyToPlayCallback&&window.setTimeout(function(){u._readyToPlayCallback&&u._readyToPlayCallback()},1e3)}return e.prototype.dispose=function(){me.b.audioEngine.canUseWebAudio&&(this.isPlaying&&this.stop(),this._isReadyToPlay=!1,-1===this.soundTrackId?this._scene.mainSoundTrack.RemoveSound(this):this._scene.soundTracks&&this._scene.soundTracks[this.soundTrackId].RemoveSound(this),this._soundGain&&(this._soundGain.disconnect(),this._soundGain=null),this._soundPanner&&(this._soundPanner.disconnect(),this._soundPanner=null),this._soundSource&&(this._soundSource.disconnect(),this._soundSource=null),this._audioBuffer=null,this._htmlAudioElement&&(this._htmlAudioElement.pause(),this._htmlAudioElement.src="",document.body.removeChild(this._htmlAudioElement)),this._streamingSource&&this._streamingSource.disconnect(),this._connectedTransformNode&&this._registerFunc&&(this._connectedTransformNode.unregisterAfterWorldMatrixUpdate(this._registerFunc),this._connectedTransformNode=null))},e.prototype.isReady=function(){return this._isReadyToPlay},e.prototype._soundLoaded=function(e){var t=this;me.b.audioEngine.audioContext&&me.b.audioEngine.audioContext.decodeAudioData(e,function(e){t._audioBuffer=e,t._isReadyToPlay=!0,t.autoplay&&t.play(),t._readyToPlayCallback&&t._readyToPlayCallback()},function(e){p.a.Error("Error while decoding audio data for: "+t.name+" / Error: "+e)})},e.prototype.setAudioBuffer=function(e){me.b.audioEngine.canUseWebAudio&&(this._audioBuffer=e,this._isReadyToPlay=!0)},e.prototype.updateOptions=function(e){e&&(this.loop=e.loop||this.loop,this.maxDistance=e.maxDistance||this.maxDistance,this.useCustomAttenuation=e.useCustomAttenuation||this.useCustomAttenuation,this.rolloffFactor=e.rolloffFactor||this.rolloffFactor,this.refDistance=e.refDistance||this.refDistance,this.distanceModel=e.distanceModel||this.distanceModel,this._playbackRate=e.playbackRate||this._playbackRate,this._updateSpatialParameters(),this.isPlaying&&(this._streaming&&this._htmlAudioElement?this._htmlAudioElement.playbackRate=this._playbackRate:this._soundSource&&(this._soundSource.playbackRate.value=this._playbackRate)))},e.prototype._createSpatialParameters=function(){me.b.audioEngine.canUseWebAudio&&me.b.audioEngine.audioContext&&(this._scene.headphone&&(this._panningModel="HRTF"),this._soundPanner=me.b.audioEngine.audioContext.createPanner(),this._updateSpatialParameters(),this._soundPanner.connect(this._outputAudioNode),this._inputAudioNode=this._soundPanner)},e.prototype._updateSpatialParameters=function(){this.spatialSound&&this._soundPanner&&(this.useCustomAttenuation?(this._soundPanner.distanceModel="linear",this._soundPanner.maxDistance=Number.MAX_VALUE,this._soundPanner.refDistance=1,this._soundPanner.rolloffFactor=1,this._soundPanner.panningModel=this._panningModel):(this._soundPanner.distanceModel=this.distanceModel,this._soundPanner.maxDistance=this.maxDistance,this._soundPanner.refDistance=this.refDistance,this._soundPanner.rolloffFactor=this.rolloffFactor,this._soundPanner.panningModel=this._panningModel))},e.prototype.switchPanningModelToHRTF=function(){this._panningModel="HRTF",this._switchPanningModel()},e.prototype.switchPanningModelToEqualPower=function(){this._panningModel="equalpower",this._switchPanningModel()},e.prototype._switchPanningModel=function(){me.b.audioEngine.canUseWebAudio&&this.spatialSound&&this._soundPanner&&(this._soundPanner.panningModel=this._panningModel)},e.prototype.connectToSoundTrackAudioNode=function(e){me.b.audioEngine.canUseWebAudio&&(this._isOutputConnected&&this._outputAudioNode.disconnect(),this._outputAudioNode.connect(e),this._isOutputConnected=!0)},e.prototype.setDirectionalCone=function(e,t,n){t<e?p.a.Error("setDirectionalCone(): outer angle of the cone must be superior or equal to the inner angle."):(this._coneInnerAngle=e,this._coneOuterAngle=t,this._coneOuterGain=n,this._isDirectional=!0,this.isPlaying&&this.loop&&(this.stop(),this.play()))},Object.defineProperty(e.prototype,"directionalConeInnerAngle",{get:function(){return this._coneInnerAngle},set:function(e){if(e!=this._coneInnerAngle){if(this._coneOuterAngle<e)return void p.a.Error("directionalConeInnerAngle: outer angle of the cone must be superior or equal to the inner angle.");this._coneInnerAngle=e,me.b.audioEngine.canUseWebAudio&&this.spatialSound&&this._soundPanner&&(this._soundPanner.coneInnerAngle=this._coneInnerAngle)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"directionalConeOuterAngle",{get:function(){return this._coneOuterAngle},set:function(e){if(e!=this._coneOuterAngle){if(e<this._coneInnerAngle)return void p.a.Error("directionalConeOuterAngle: outer angle of the cone must be superior or equal to the inner angle.");this._coneOuterAngle=e,me.b.audioEngine.canUseWebAudio&&this.spatialSound&&this._soundPanner&&(this._soundPanner.coneOuterAngle=this._coneOuterAngle)}},enumerable:!0,configurable:!0}),e.prototype.setPosition=function(e){this._position=e,me.b.audioEngine.canUseWebAudio&&this.spatialSound&&this._soundPanner&&!isNaN(this._position.x)&&!isNaN(this._position.y)&&!isNaN(this._position.z)&&this._soundPanner.setPosition(this._position.x,this._position.y,this._position.z)},e.prototype.setLocalDirectionToMesh=function(e){this._localDirection=e,me.b.audioEngine.canUseWebAudio&&this._connectedTransformNode&&this.isPlaying&&this._updateDirection()},e.prototype._updateDirection=function(){if(this._connectedTransformNode&&this._soundPanner){var e=this._connectedTransformNode.getWorldMatrix(),t=o.x.TransformNormal(this._localDirection,e);t.normalize(),this._soundPanner.setOrientation(t.x,t.y,t.z)}},e.prototype.updateDistanceFromListener=function(){if(me.b.audioEngine.canUseWebAudio&&this._connectedTransformNode&&this.useCustomAttenuation&&this._soundGain&&this._scene.activeCamera){var e=this._connectedTransformNode.getDistanceToCamera(this._scene.activeCamera);this._soundGain.gain.value=this._customAttenuationFunction(this._volume,e,this.maxDistance,this.refDistance,this.rolloffFactor)}},e.prototype.setAttenuationFunction=function(e){this._customAttenuationFunction=e},e.prototype.play=function(e,t){var n=this;if(this._isReadyToPlay&&this._scene.audioEnabled&&me.b.audioEngine.audioContext)try{this._startOffset<0&&(e=-this._startOffset,this._startOffset=0);var r=e?me.b.audioEngine.audioContext.currentTime+e:me.b.audioEngine.audioContext.currentTime;if(this._soundSource&&this._streamingSource||this.spatialSound&&this._soundPanner&&(isNaN(this._position.x)||isNaN(this._position.y)||isNaN(this._position.z)||this._soundPanner.setPosition(this._position.x,this._position.y,this._position.z),this._isDirectional&&(this._soundPanner.coneInnerAngle=this._coneInnerAngle,this._soundPanner.coneOuterAngle=this._coneOuterAngle,this._soundPanner.coneOuterGain=this._coneOuterGain,this._connectedTransformNode?this._updateDirection():this._soundPanner.setOrientation(this._localDirection.x,this._localDirection.y,this._localDirection.z))),this._streaming)this._streamingSource||(this._streamingSource=me.b.audioEngine.audioContext.createMediaElementSource(this._htmlAudioElement),this._htmlAudioElement.onended=function(){n._onended()},this._htmlAudioElement.playbackRate=this._playbackRate),this._streamingSource.disconnect(),this._streamingSource.connect(this._inputAudioNode),this._htmlAudioElement&&(i=function(){if(me.b.audioEngine.unlocked){var e=n._htmlAudioElement.play();void 0!==e&&e.catch(function(e){me.b.audioEngine.lock(),(n.loop||n.autoplay)&&me.b.audioEngine.onAudioUnlockedObservable.addOnce(function(){i()})})}else(n.loop||n.autoplay)&&me.b.audioEngine.onAudioUnlockedObservable.addOnce(function(){i()})})();else{var i=function(){me.b.audioEngine.audioContext&&(n._soundSource=me.b.audioEngine.audioContext.createBufferSource(),n._soundSource.buffer=n._audioBuffer,n._soundSource.connect(n._inputAudioNode),n._soundSource.loop=n.loop,n._soundSource.playbackRate.value=n._playbackRate,n._soundSource.onended=function(){n._onended()},n._soundSource.start(r=e?me.b.audioEngine.audioContext.currentTime+e:me.b.audioEngine.audioContext.currentTime,n.isPaused?n._startOffset%n._soundSource.buffer.duration:t||0))};"suspended"===me.b.audioEngine.audioContext.state?setTimeout(function(){"suspended"===me.b.audioEngine.audioContext.state?(me.b.audioEngine.lock(),(n.loop||n.autoplay)&&me.b.audioEngine.onAudioUnlockedObservable.addOnce(function(){i()})):i()},500):i()}this._startTime=r,this.isPlaying=!0,this.isPaused=!1}catch(e){p.a.Error("Error while trying to play audio: "+this.name+", "+e.message)}},e.prototype._onended=function(){this.isPlaying=!1,this.onended&&this.onended(),this.onEndedObservable.notifyObservers(this)},e.prototype.stop=function(e){var t=this;this.isPlaying&&(this._streaming?(this._htmlAudioElement?(this._htmlAudioElement.pause(),this._htmlAudioElement.currentTime>0&&(this._htmlAudioElement.currentTime=0)):this._streamingSource.disconnect(),this.isPlaying=!1):me.b.audioEngine.audioContext&&this._soundSource&&(this._soundSource.stop(e?me.b.audioEngine.audioContext.currentTime+e:me.b.audioEngine.audioContext.currentTime),this._soundSource.onended=function(){t.isPlaying=!1},this.isPaused||(this._startOffset=0)))},e.prototype.pause=function(){this.isPlaying&&(this.isPaused=!0,this._streaming?this._htmlAudioElement?this._htmlAudioElement.pause():this._streamingSource.disconnect():me.b.audioEngine.audioContext&&(this.stop(0),this._startOffset+=me.b.audioEngine.audioContext.currentTime-this._startTime))},e.prototype.setVolume=function(e,t){me.b.audioEngine.canUseWebAudio&&this._soundGain&&(t&&me.b.audioEngine.audioContext?(this._soundGain.gain.cancelScheduledValues(me.b.audioEngine.audioContext.currentTime),this._soundGain.gain.setValueAtTime(this._soundGain.gain.value,me.b.audioEngine.audioContext.currentTime),this._soundGain.gain.linearRampToValueAtTime(e,me.b.audioEngine.audioContext.currentTime+t)):this._soundGain.gain.value=e),this._volume=e},e.prototype.setPlaybackRate=function(e){this._playbackRate=e,this.isPlaying&&(this._streaming&&this._htmlAudioElement?this._htmlAudioElement.playbackRate=this._playbackRate:this._soundSource&&(this._soundSource.playbackRate.value=this._playbackRate))},e.prototype.getVolume=function(){return this._volume},e.prototype.attachToMesh=function(e){var t=this;this._connectedTransformNode&&this._registerFunc&&(this._connectedTransformNode.unregisterAfterWorldMatrixUpdate(this._registerFunc),this._registerFunc=null),this._connectedTransformNode=e,this.spatialSound||(this.spatialSound=!0,this._createSpatialParameters(),this.isPlaying&&this.loop&&(this.stop(),this.play())),this._onRegisterAfterWorldMatrixUpdate(this._connectedTransformNode),this._registerFunc=function(e){return t._onRegisterAfterWorldMatrixUpdate(e)},this._connectedTransformNode.registerAfterWorldMatrixUpdate(this._registerFunc)},e.prototype.detachFromMesh=function(){this._connectedTransformNode&&this._registerFunc&&(this._connectedTransformNode.unregisterAfterWorldMatrixUpdate(this._registerFunc),this._registerFunc=null,this._connectedTransformNode=null)},e.prototype._onRegisterAfterWorldMatrixUpdate=function(e){if(e.getBoundingInfo){var t=e;if(this._positionInEmitterSpace)t.worldMatrixFromCache.invertToRef(o.t.Matrix[0]),this.setPosition(o.t.Matrix[0].getTranslation());else{var n=t.getBoundingInfo();this.setPosition(n.boundingSphere.centerWorld)}me.b.audioEngine.canUseWebAudio&&this._isDirectional&&this.isPlaying&&this._updateDirection()}},e.prototype.clone=function(){var t=this;if(this._streaming)return null;var n=function(){t._isReadyToPlay?(i._audioBuffer=t.getAudioBuffer(),i._isReadyToPlay=!0,i.autoplay&&i.play()):window.setTimeout(n,300)},r={autoplay:this.autoplay,loop:this.loop,volume:this._volume,spatialSound:this.spatialSound,maxDistance:this.maxDistance,useCustomAttenuation:this.useCustomAttenuation,rolloffFactor:this.rolloffFactor,refDistance:this.refDistance,distanceModel:this.distanceModel},i=new e(this.name+"_cloned",new ArrayBuffer(0),this._scene,null,r);return this.useCustomAttenuation&&i.setAttenuationFunction(this._customAttenuationFunction),i.setPosition(this._position),i.setPlaybackRate(this._playbackRate),n(),i},e.prototype.getAudioBuffer=function(){return this._audioBuffer},e.prototype.serialize=function(){var e={name:this.name,url:this.name,autoplay:this.autoplay,loop:this.loop,volume:this._volume,spatialSound:this.spatialSound,maxDistance:this.maxDistance,rolloffFactor:this.rolloffFactor,refDistance:this.refDistance,distanceModel:this.distanceModel,playbackRate:this._playbackRate,panningModel:this._panningModel,soundTrackId:this.soundTrackId};return this.spatialSound&&(this._connectedTransformNode&&(e.connectedMeshId=this._connectedTransformNode.id),e.position=this._position.asArray(),e.refDistance=this.refDistance,e.distanceModel=this.distanceModel,e.isDirectional=this._isDirectional,e.localDirectionToMesh=this._localDirection.asArray(),e.coneInnerAngle=this._coneInnerAngle,e.coneOuterAngle=this._coneOuterAngle,e.coneOuterGain=this._coneOuterGain),e},e.Parse=function(t,n,r,i){var a,s=t.name;a=t.url?r+t.url:r+s;var u,l={autoplay:t.autoplay,loop:t.loop,volume:t.volume,spatialSound:t.spatialSound,maxDistance:t.maxDistance,rolloffFactor:t.rolloffFactor,refDistance:t.refDistance,distanceModel:t.distanceModel,playbackRate:t.playbackRate};if(i){var c=function(){i._isReadyToPlay?(u._audioBuffer=i.getAudioBuffer(),u._isReadyToPlay=!0,u.autoplay&&u.play()):window.setTimeout(c,300)};u=new e(s,new ArrayBuffer(0),n,null,l),c()}else u=new e(s,a,n,function(){n._removePendingData(u)},l),n._addPendingData(u);if(t.position){var h=o.x.FromArray(t.position);u.setPosition(h)}if(t.isDirectional&&(u.setDirectionalCone(t.coneInnerAngle||360,t.coneOuterAngle||360,t.coneOuterGain||0),t.localDirectionToMesh)){var d=o.x.FromArray(t.localDirectionToMesh);u.setLocalDirectionToMesh(d)}if(t.connectedMeshId){var f=n.getMeshByID(t.connectedMeshId);f&&u.attachToMesh(f)}return u},e._SceneComponentInitialization=function(e){throw be.a.WarnImport("AudioSceneComponent")},e}(),Ee=function(){function e(e,t){void 0===t&&(t={}),this.id=-1,this._isMainTrack=!1,this._isInitialized=!1,this._scene=e,this.soundCollection=new Array,this._options=t,!this._isMainTrack&&this._scene.soundTracks&&(this._scene.soundTracks.push(this),this.id=this._scene.soundTracks.length-1)}return e.prototype._initializeSoundTrackAudioGraph=function(){me.b.audioEngine.canUseWebAudio&&me.b.audioEngine.audioContext&&(this._outputAudioNode=me.b.audioEngine.audioContext.createGain(),this._outputAudioNode.connect(me.b.audioEngine.masterGain),this._options&&(this._options.volume&&(this._outputAudioNode.gain.value=this._options.volume),this._options.mainTrack&&(this._isMainTrack=this._options.mainTrack)),this._isInitialized=!0)},e.prototype.dispose=function(){if(me.b.audioEngine&&me.b.audioEngine.canUseWebAudio){for(this._connectedAnalyser&&this._connectedAnalyser.stopDebugCanvas();this.soundCollection.length;)this.soundCollection[0].dispose();this._outputAudioNode&&this._outputAudioNode.disconnect(),this._outputAudioNode=null}},e.prototype.AddSound=function(e){this._isInitialized||this._initializeSoundTrackAudioGraph(),me.b.audioEngine.canUseWebAudio&&this._outputAudioNode&&e.connectToSoundTrackAudioNode(this._outputAudioNode),e.soundTrackId&&(-1===e.soundTrackId?this._scene.mainSoundTrack.RemoveSound(e):this._scene.soundTracks&&this._scene.soundTracks[e.soundTrackId].RemoveSound(e)),this.soundCollection.push(e),e.soundTrackId=this.id},e.prototype.RemoveSound=function(e){var t=this.soundCollection.indexOf(e);-1!==t&&this.soundCollection.splice(t,1)},e.prototype.setVolume=function(e){me.b.audioEngine.canUseWebAudio&&this._outputAudioNode&&(this._outputAudioNode.gain.value=e)},e.prototype.switchPanningModelToHRTF=function(){if(me.b.audioEngine.canUseWebAudio)for(var e=0;e<this.soundCollection.length;e++)this.soundCollection[e].switchPanningModelToHRTF()},e.prototype.switchPanningModelToEqualPower=function(){if(me.b.audioEngine.canUseWebAudio)for(var e=0;e<this.soundCollection.length;e++)this.soundCollection[e].switchPanningModelToEqualPower()},e.prototype.connectToAnalyser=function(e){this._connectedAnalyser&&this._connectedAnalyser.stopDebugCanvas(),this._connectedAnalyser=e,me.b.audioEngine.canUseWebAudio&&this._outputAudioNode&&(this._outputAudioNode.disconnect(),this._connectedAnalyser.connectAudioNodes(this._outputAudioNode,me.b.audioEngine.masterGain))},e}(),xe=n(14);r.a.AddParser(xe.a.NAME_AUDIO,function(e,t,n,r){var i,o=[];if(n.sounds=n.sounds||[],null!=e.sounds)for(var a=0,s=e.sounds.length;a<s;a++){var u=e.sounds[a];me.b.audioEngine.canUseWebAudio?(u.url||(u.url=u.name),o[u.url]?n.sounds.push(Te.Parse(u,t,r,o[u.url])):(i=Te.Parse(u,t,r),o[u.url]=i,n.sounds.push(i))):n.sounds.push(new Te(u.name,null,t))}o=[]}),Object.defineProperty(H.a.prototype,"mainSoundTrack",{get:function(){var e=this._getComponent(xe.a.NAME_AUDIO);return e||(e=new Me(this),this._addComponent(e)),this._mainSoundTrack||(this._mainSoundTrack=new Ee(this,{mainTrack:!0})),this._mainSoundTrack},enumerable:!0,configurable:!0}),H.a.prototype.getSoundByName=function(e){var t;for(t=0;t<this.mainSoundTrack.soundCollection.length;t++)if(this.mainSoundTrack.soundCollection[t].name===e)return this.mainSoundTrack.soundCollection[t];if(this.soundTracks)for(var n=0;n<this.soundTracks.length;n++)for(t=0;t<this.soundTracks[n].soundCollection.length;t++)if(this.soundTracks[n].soundCollection[t].name===e)return this.soundTracks[n].soundCollection[t];return null},Object.defineProperty(H.a.prototype,"audioEnabled",{get:function(){var e=this._getComponent(xe.a.NAME_AUDIO);return e||(e=new Me(this),this._addComponent(e)),e.audioEnabled},set:function(e){var t=this._getComponent(xe.a.NAME_AUDIO);t||(t=new Me(this),this._addComponent(t)),e?t.enableAudio():t.disableAudio()},enumerable:!0,configurable:!0}),Object.defineProperty(H.a.prototype,"headphone",{get:function(){var e=this._getComponent(xe.a.NAME_AUDIO);return e||(e=new Me(this),this._addComponent(e)),e.headphone},set:function(e){var t=this._getComponent(xe.a.NAME_AUDIO);t||(t=new Me(this),this._addComponent(t)),e?t.switchAudioModeForHeadphones():t.switchAudioModeForNormalSpeakers()},enumerable:!0,configurable:!0});var Me=function(){function e(e){this.name=xe.a.NAME_AUDIO,this._audioEnabled=!0,this._headphone=!1,this.scene=e,e.soundTracks=new Array,e.sounds=new Array}return Object.defineProperty(e.prototype,"audioEnabled",{get:function(){return this._audioEnabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headphone",{get:function(){return this._headphone},enumerable:!0,configurable:!0}),e.prototype.register=function(){this.scene._afterRenderStage.registerStep(xe.a.STEP_AFTERRENDER_AUDIO,this,this._afterRender)},e.prototype.rebuild=function(){},e.prototype.serialize=function(e){if(e.sounds=[],this.scene.soundTracks)for(var t=0;t<this.scene.soundTracks.length;t++)for(var n=this.scene.soundTracks[t],r=0;r<n.soundCollection.length;r++)e.sounds.push(n.soundCollection[r].serialize())},e.prototype.addFromContainer=function(e){var t=this;e.sounds&&e.sounds.forEach(function(e){e.play(),e.autoplay=!0,t.scene.mainSoundTrack.AddSound(e)})},e.prototype.removeFromContainer=function(e,t){var n=this;void 0===t&&(t=!1),e.sounds&&e.sounds.forEach(function(e){e.stop(),e.autoplay=!1,n.scene.mainSoundTrack.RemoveSound(e),t&&e.dispose()})},e.prototype.dispose=function(){var e=this.scene;if(e._mainSoundTrack&&e.mainSoundTrack.dispose(),e.soundTracks)for(var t=0;t<e.soundTracks.length;t++)e.soundTracks[t].dispose()},e.prototype.disableAudio=function(){var e,t=this.scene;for(this._audioEnabled=!1,e=0;e<t.mainSoundTrack.soundCollection.length;e++)t.mainSoundTrack.soundCollection[e].pause();if(t.soundTracks)for(e=0;e<t.soundTracks.length;e++)for(var n=0;n<t.soundTracks[e].soundCollection.length;n++)t.soundTracks[e].soundCollection[n].pause()},e.prototype.enableAudio=function(){var e,t=this.scene;for(this._audioEnabled=!0,e=0;e<t.mainSoundTrack.soundCollection.length;e++)t.mainSoundTrack.soundCollection[e].isPaused&&t.mainSoundTrack.soundCollection[e].play();if(t.soundTracks)for(e=0;e<t.soundTracks.length;e++)for(var n=0;n<t.soundTracks[e].soundCollection.length;n++)t.soundTracks[e].soundCollection[n].isPaused&&t.soundTracks[e].soundCollection[n].play()},e.prototype.switchAudioModeForHeadphones=function(){var e=this.scene;if(this._headphone=!0,e.mainSoundTrack.switchPanningModelToHRTF(),e.soundTracks)for(var t=0;t<e.soundTracks.length;t++)e.soundTracks[t].switchPanningModelToHRTF()},e.prototype.switchAudioModeForNormalSpeakers=function(){var e=this.scene;if(this._headphone=!1,e.mainSoundTrack.switchPanningModelToEqualPower(),e.soundTracks)for(var t=0;t<e.soundTracks.length;t++)e.soundTracks[t].switchPanningModelToEqualPower()},e.prototype._afterRender=function(){var e=this.scene;if(this._audioEnabled&&e._mainSoundTrack&&e.soundTracks&&(0!==e._mainSoundTrack.soundCollection.length||1!==e.soundTracks.length)){var t,n=me.b.audioEngine;if((t=e.activeCameras.length>0?e.activeCameras[0]:e.activeCamera)&&n.audioContext){n.audioContext.listener.setPosition(t.position.x,t.position.y,t.position.z),t.rigCameras&&t.rigCameras.length>0&&(t=t.rigCameras[0]);var r,i=o.j.Invert(t.getViewMatrix()),a=o.x.TransformNormal(new o.x(0,0,-1),i);for(a.normalize(),isNaN(a.x)||isNaN(a.y)||isNaN(a.z)||n.audioContext.listener.setOrientation(a.x,a.y,a.z,0,1,0),r=0;r<e.mainSoundTrack.soundCollection.length;r++){var s=e.mainSoundTrack.soundCollection[r];s.useCustomAttenuation&&s.updateDistanceFromListener()}if(e.soundTracks)for(r=0;r<e.soundTracks.length;r++)for(var u=0;u<e.soundTracks[r].soundCollection.length;u++)(s=e.soundTracks[r].soundCollection[u]).useCustomAttenuation&&s.updateDistanceFromListener()}}},e}();Te._SceneComponentInitialization=function(e){var t=e._getComponent(xe.a.NAME_AUDIO);t||(t=new Me(e),e._addComponent(t))};var Ae=function(){function e(e,t,n){var r=this;if(this.loop=!1,this._coneInnerAngle=360,this._coneOuterAngle=360,this._volume=1,this.isPlaying=!1,this.isPaused=!1,this._sounds=[],this._weights=[],t.length!==n.length)throw new Error("Sounds length does not equal weights length");this.loop=e,this._weights=n;for(var i=0,o=0,a=n;o<a.length;o++)i+=a[o];for(var s=i>0?1/i:0,u=0;u<this._weights.length;u++)this._weights[u]*=s;this._sounds=t;for(var l=0,c=this._sounds;l<c.length;l++)c[l].onEndedObservable.add(function(){r._onended()})}return Object.defineProperty(e.prototype,"directionalConeInnerAngle",{get:function(){return this._coneInnerAngle},set:function(e){if(e!==this._coneInnerAngle){if(this._coneOuterAngle<e)return void p.a.Error("directionalConeInnerAngle: outer angle of the cone must be superior or equal to the inner angle.");this._coneInnerAngle=e;for(var t=0,n=this._sounds;t<n.length;t++)n[t].directionalConeInnerAngle=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"directionalConeOuterAngle",{get:function(){return this._coneOuterAngle},set:function(e){if(e!==this._coneOuterAngle){if(e<this._coneInnerAngle)return void p.a.Error("directionalConeOuterAngle: outer angle of the cone must be superior or equal to the inner angle.");this._coneOuterAngle=e;for(var t=0,n=this._sounds;t<n.length;t++)n[t].directionalConeOuterAngle=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(e){if(e!==this._volume)for(var t=0,n=this._sounds;t<n.length;t++)n[t].setVolume(e)},enumerable:!0,configurable:!0}),e.prototype._onended=function(){void 0!==this._currentIndex&&(this._sounds[this._currentIndex].autoplay=!1),this.loop&&this.isPlaying?this.play():this.isPlaying=!1},e.prototype.pause=function(){this.isPaused=!0,void 0!==this._currentIndex&&this._sounds[this._currentIndex].pause()},e.prototype.stop=function(){this.isPlaying=!1,void 0!==this._currentIndex&&this._sounds[this._currentIndex].stop()},e.prototype.play=function(e){if(!this.isPaused){this.stop();for(var t=Math.random(),n=0,r=0;r<this._weights.length;r++)if(t<=(n+=this._weights[r])){this._currentIndex=r;break}}var i=this._sounds[this._currentIndex];i.isReady()?i.play(0,this.isPaused?void 0:e):i.autoplay=!0,this.isPlaying=!0,this.isPaused=!1},e}(),Se=n(17),Ce=function(){function e(){this._zoomStopsAnimation=!1,this._idleRotationSpeed=.05,this._idleRotationWaitTime=2e3,this._idleRotationSpinupTime=2e3,this._isPointerDown=!1,this._lastFrameTime=null,this._lastInteractionTime=-1/0,this._cameraRotationSpeed=0,this._lastFrameRadius=0}return Object.defineProperty(e.prototype,"name",{get:function(){return"AutoRotation"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomStopsAnimation",{get:function(){return this._zoomStopsAnimation},set:function(e){this._zoomStopsAnimation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idleRotationSpeed",{get:function(){return this._idleRotationSpeed},set:function(e){this._idleRotationSpeed=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idleRotationWaitTime",{get:function(){return this._idleRotationWaitTime},set:function(e){this._idleRotationWaitTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"idleRotationSpinupTime",{get:function(){return this._idleRotationSpinupTime},set:function(e){this._idleRotationSpinupTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationInProgress",{get:function(){return Math.abs(this._cameraRotationSpeed)>0},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.attach=function(e){var t=this;this._attachedCamera=e;var n=this._attachedCamera.getScene();this._onPrePointerObservableObserver=n.onPrePointerObservable.add(function(e){e.type!==Se.a.POINTERDOWN?e.type===Se.a.POINTERUP&&(t._isPointerDown=!1):t._isPointerDown=!0}),this._onAfterCheckInputsObserver=e.onAfterCheckInputsObservable.add(function(){var e=W.a.Now,n=0;null!=t._lastFrameTime&&(n=e-t._lastFrameTime),t._lastFrameTime=e,t._applyUserInteraction();var r=Math.max(Math.min((e-t._lastInteractionTime-t._idleRotationWaitTime)/t._idleRotationSpinupTime,1),0);t._cameraRotationSpeed=t._idleRotationSpeed*r,t._attachedCamera&&(t._attachedCamera.alpha-=t._cameraRotationSpeed*(n/1e3))})},e.prototype.detach=function(){if(this._attachedCamera){var e=this._attachedCamera.getScene();this._onPrePointerObservableObserver&&e.onPrePointerObservable.remove(this._onPrePointerObservableObserver),this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver),this._attachedCamera=null}},e.prototype._userIsZooming=function(){return!!this._attachedCamera&&0!==this._attachedCamera.inertialRadiusOffset},e.prototype._shouldAnimationStopForInteraction=function(){if(!this._attachedCamera)return!1;var e=!1;return this._lastFrameRadius===this._attachedCamera.radius&&0!==this._attachedCamera.inertialRadiusOffset&&(e=!0),this._lastFrameRadius=this._attachedCamera.radius,this._zoomStopsAnimation?e:this._userIsZooming()},e.prototype._applyUserInteraction=function(){this._userIsMoving()&&!this._shouldAnimationStopForInteraction()&&(this._lastInteractionTime=W.a.Now)},e.prototype._userIsMoving=function(){return!!this._attachedCamera&&(0!==this._attachedCamera.inertialAlphaOffset||0!==this._attachedCamera.inertialBetaOffset||0!==this._attachedCamera.inertialRadiusOffset||0!==this._attachedCamera.inertialPanningX||0!==this._attachedCamera.inertialPanningY||this._isPointerDown)},e}(),Pe=function(){function e(){this.transitionDuration=450,this.lowerRadiusTransitionRange=2,this.upperRadiusTransitionRange=-2,this._autoTransitionRange=!1,this._radiusIsAnimating=!1,this._radiusBounceTransition=null,this._animatables=new Array}return Object.defineProperty(e.prototype,"name",{get:function(){return"Bouncing"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoTransitionRange",{get:function(){return this._autoTransitionRange},set:function(e){var t=this;if(this._autoTransitionRange!==e){this._autoTransitionRange=e;var n=this._attachedCamera;n&&(e?this._onMeshTargetChangedObserver=n.onMeshTargetChangedObservable.add(function(e){if(e){e.computeWorldMatrix(!0);var n=e.getBoundingInfo().diagonalLength;t.lowerRadiusTransitionRange=.05*n,t.upperRadiusTransitionRange=.05*n}}):this._onMeshTargetChangedObserver&&n.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver))}},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.attach=function(e){var t=this;this._attachedCamera=e,this._onAfterCheckInputsObserver=e.onAfterCheckInputsObservable.add(function(){t._attachedCamera&&(t._isRadiusAtLimit(t._attachedCamera.lowerRadiusLimit)&&t._applyBoundRadiusAnimation(t.lowerRadiusTransitionRange),t._isRadiusAtLimit(t._attachedCamera.upperRadiusLimit)&&t._applyBoundRadiusAnimation(t.upperRadiusTransitionRange))})},e.prototype.detach=function(){this._attachedCamera&&(this._onAfterCheckInputsObserver&&this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver),this._onMeshTargetChangedObserver&&this._attachedCamera.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver),this._attachedCamera=null)},e.prototype._isRadiusAtLimit=function(e){return!!this._attachedCamera&&this._attachedCamera.radius===e&&!this._radiusIsAnimating},e.prototype._applyBoundRadiusAnimation=function(t){var n=this;if(this._attachedCamera){this._radiusBounceTransition||(e.EasingFunction.setEasingMode(e.EasingMode),this._radiusBounceTransition=B.CreateAnimation("radius",B.ANIMATIONTYPE_FLOAT,60,e.EasingFunction)),this._cachedWheelPrecision=this._attachedCamera.wheelPrecision,this._attachedCamera.wheelPrecision=1/0,this._attachedCamera.inertialRadiusOffset=0,this.stopAllAnimations(),this._radiusIsAnimating=!0;var r=B.TransitionTo("radius",this._attachedCamera.radius+t,this._attachedCamera,this._attachedCamera.getScene(),60,this._radiusBounceTransition,this.transitionDuration,function(){return n._clearAnimationLocks()});r&&this._animatables.push(r)}},e.prototype._clearAnimationLocks=function(){this._radiusIsAnimating=!1,this._attachedCamera&&(this._attachedCamera.wheelPrecision=this._cachedWheelPrecision)},e.prototype.stopAllAnimations=function(){for(this._attachedCamera&&(this._attachedCamera.animations=[]);this._animatables.length;)this._animatables[0].onAnimationEnd=null,this._animatables[0].stop(),this._animatables.shift()},e.EasingFunction=new te(.3),e.EasingMode=$.EASINGMODE_EASEOUT,e}(),Re=function(){function e(){this._mode=e.FitFrustumSidesMode,this._radiusScale=1,this._positionScale=.5,this._defaultElevation=.3,this._elevationReturnTime=1500,this._elevationReturnWaitTime=1e3,this._zoomStopsAnimation=!1,this._framingTime=1500,this.autoCorrectCameraLimitsAndSensibility=!0,this._isPointerDown=!1,this._lastInteractionTime=-1/0,this._animatables=new Array,this._betaIsAnimating=!1}return Object.defineProperty(e.prototype,"name",{get:function(){return"Framing"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(e){this._mode=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radiusScale",{get:function(){return this._radiusScale},set:function(e){this._radiusScale=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positionScale",{get:function(){return this._positionScale},set:function(e){this._positionScale=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultElevation",{get:function(){return this._defaultElevation},set:function(e){this._defaultElevation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elevationReturnTime",{get:function(){return this._elevationReturnTime},set:function(e){this._elevationReturnTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"elevationReturnWaitTime",{get:function(){return this._elevationReturnWaitTime},set:function(e){this._elevationReturnWaitTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomStopsAnimation",{get:function(){return this._zoomStopsAnimation},set:function(e){this._zoomStopsAnimation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"framingTime",{get:function(){return this._framingTime},set:function(e){this._framingTime=e},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.attach=function(t){var n=this;this._attachedCamera=t;var r=this._attachedCamera.getScene();e.EasingFunction.setEasingMode(e.EasingMode),this._onPrePointerObservableObserver=r.onPrePointerObservable.add(function(e){e.type!==Se.a.POINTERDOWN?e.type===Se.a.POINTERUP&&(n._isPointerDown=!1):n._isPointerDown=!0}),this._onMeshTargetChangedObserver=t.onMeshTargetChangedObservable.add(function(e){e&&n.zoomOnMesh(e)}),this._onAfterCheckInputsObserver=t.onAfterCheckInputsObservable.add(function(){n._applyUserInteraction(),n._maintainCameraAboveGround()})},e.prototype.detach=function(){if(this._attachedCamera){var e=this._attachedCamera.getScene();this._onPrePointerObservableObserver&&e.onPrePointerObservable.remove(this._onPrePointerObservableObserver),this._onAfterCheckInputsObserver&&this._attachedCamera.onAfterCheckInputsObservable.remove(this._onAfterCheckInputsObserver),this._onMeshTargetChangedObserver&&this._attachedCamera.onMeshTargetChangedObservable.remove(this._onMeshTargetChangedObserver),this._attachedCamera=null}},e.prototype.zoomOnMesh=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),e.computeWorldMatrix(!0);var r=e.getBoundingInfo().boundingBox;this.zoomOnBoundingInfo(r.minimumWorld,r.maximumWorld,t,n)},e.prototype.zoomOnMeshHierarchy=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null),e.computeWorldMatrix(!0);var r=e.getHierarchyBoundingVectors(!0);this.zoomOnBoundingInfo(r.min,r.max,t,n)},e.prototype.zoomOnMeshesHierarchy=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=null);for(var r=new o.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),i=new o.x(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),a=0;a<e.length;a++){var s=e[a].getHierarchyBoundingVectors(!0);ye.h.CheckExtends(s.min,r,i),ye.h.CheckExtends(s.max,r,i)}this.zoomOnBoundingInfo(r,i,t,n)},e.prototype.zoomOnBoundingInfo=function(t,n,r,i){var a,s=this;if(void 0===r&&(r=!1),void 0===i&&(i=null),this._attachedCamera){var u=t.y,l=u+(n.y-u)*this._positionScale,c=n.subtract(t).scale(.5);if(r)a=new o.x(0,l,0);else{var h=t.add(c);a=new o.x(h.x,l,h.z)}this._vectorTransition||(this._vectorTransition=B.CreateAnimation("target",B.ANIMATIONTYPE_VECTOR3,60,e.EasingFunction)),this._betaIsAnimating=!0;var d=B.TransitionTo("target",a,this._attachedCamera,this._attachedCamera.getScene(),60,this._vectorTransition,this._framingTime);d&&this._animatables.push(d);var f=0;if(this._mode===e.FitFrustumSidesMode){var p=this._calculateLowerRadiusFromModelBoundingSphere(t,n);this.autoCorrectCameraLimitsAndSensibility&&(this._attachedCamera.lowerRadiusLimit=c.length()+this._attachedCamera.minZ),f=p}else this._mode===e.IgnoreBoundsSizeMode&&(f=this._calculateLowerRadiusFromModelBoundingSphere(t,n),this.autoCorrectCameraLimitsAndSensibility&&null===this._attachedCamera.lowerRadiusLimit&&(this._attachedCamera.lowerRadiusLimit=this._attachedCamera.minZ));if(this.autoCorrectCameraLimitsAndSensibility){var _=n.subtract(t).length();this._attachedCamera.panningSensibility=5e3/_,this._attachedCamera.wheelPrecision=100/f}this._radiusTransition||(this._radiusTransition=B.CreateAnimation("radius",B.ANIMATIONTYPE_FLOAT,60,e.EasingFunction)),(d=B.TransitionTo("radius",f,this._attachedCamera,this._attachedCamera.getScene(),60,this._radiusTransition,this._framingTime,function(){s.stopAllAnimations(),i&&i(),s._attachedCamera&&s._attachedCamera.useInputToRestoreState&&s._attachedCamera.storeState()}))&&this._animatables.push(d)}},e.prototype._calculateLowerRadiusFromModelBoundingSphere=function(t,n){var r=n.subtract(t).length(),i=this._getFrustumSlope(),o=.5*r*this._radiusScale,a=o*Math.sqrt(1+1/(i.x*i.x)),s=o*Math.sqrt(1+1/(i.y*i.y)),u=Math.max(a,s),l=this._attachedCamera;return l?(l.lowerRadiusLimit&&this._mode===e.IgnoreBoundsSizeMode&&(u=u<l.lowerRadiusLimit?l.lowerRadiusLimit:u),l.upperRadiusLimit&&(u=u>l.upperRadiusLimit?l.upperRadiusLimit:u),u):0},e.prototype._maintainCameraAboveGround=function(){var t=this;if(!(this._elevationReturnTime<0)){var n=.5*Math.PI-this._defaultElevation,r=.5*Math.PI;if(this._attachedCamera&&!this._betaIsAnimating&&this._attachedCamera.beta>r&&W.a.Now-this._lastInteractionTime>=this._elevationReturnWaitTime){this._betaIsAnimating=!0,this.stopAllAnimations(),this._betaTransition||(this._betaTransition=B.CreateAnimation("beta",B.ANIMATIONTYPE_FLOAT,60,e.EasingFunction));var i=B.TransitionTo("beta",n,this._attachedCamera,this._attachedCamera.getScene(),60,this._betaTransition,this._elevationReturnTime,function(){t._clearAnimationLocks(),t.stopAllAnimations()});i&&this._animatables.push(i)}}},e.prototype._getFrustumSlope=function(){var e=this._attachedCamera;if(!e)return o.w.Zero();var t=e.getScene().getEngine().getAspectRatio(e),n=Math.tan(e.fov/2);return new o.w(n*t,n)},e.prototype._clearAnimationLocks=function(){this._betaIsAnimating=!1},e.prototype._applyUserInteraction=function(){this.isUserIsMoving&&(this._lastInteractionTime=W.a.Now,this.stopAllAnimations(),this._clearAnimationLocks())},e.prototype.stopAllAnimations=function(){for(this._attachedCamera&&(this._attachedCamera.animations=[]);this._animatables.length;)this._animatables[0]&&(this._animatables[0].onAnimationEnd=null,this._animatables[0].stop()),this._animatables.shift()},Object.defineProperty(e.prototype,"isUserIsMoving",{get:function(){return!!this._attachedCamera&&(0!==this._attachedCamera.inertialAlphaOffset||0!==this._attachedCamera.inertialBetaOffset||0!==this._attachedCamera.inertialRadiusOffset||0!==this._attachedCamera.inertialPanningX||0!==this._attachedCamera.inertialPanningY||this._isPointerDown)},enumerable:!0,configurable:!0}),e.EasingFunction=new oe,e.EasingMode=$.EASINGMODE_EASEINOUT,e.IgnoreBoundsSizeMode=0,e.FitFrustumSidesMode=1,e}(),De=function(e,t,n,r){void 0===t&&(t=new o.x),void 0===n&&(n=0),void 0===r&&(r=!1),this.direction=e,this.rotatedDirection=t,this.diff=n,this.ignore=r},Oe=function(){function e(e){this.ui=e,this.name="AttachToBoxBehavior",this.distanceAwayFromFace=.15,this.distanceAwayFromBottomOfFace=.15,this._faceVectors=[new De(o.x.Up()),new De(o.x.Down()),new De(o.x.Left()),new De(o.x.Right()),new De(o.x.Forward()),new De(o.x.Forward().scaleInPlace(-1))],this._tmpMatrix=new o.j,this._tmpVector=new o.x,this._zeroVector=o.x.Zero(),this._lookAtTmpMatrix=new o.j}return e.prototype.init=function(){},e.prototype._closestFace=function(e){var t=this;return this._faceVectors.forEach(function(n){t._target.rotationQuaternion||(t._target.rotationQuaternion=o.q.RotationYawPitchRoll(t._target.rotation.y,t._target.rotation.x,t._target.rotation.z)),t._target.rotationQuaternion.toRotationMatrix(t._tmpMatrix),o.x.TransformCoordinatesToRef(n.direction,t._tmpMatrix,n.rotatedDirection),n.diff=o.x.GetAngleBetweenVectors(n.rotatedDirection,e,o.x.Cross(n.rotatedDirection,e))}),this._faceVectors.reduce(function(e,t){return e.ignore?t:t.ignore?e:e.diff<t.diff?e:t},this._faceVectors[0])},e.prototype._lookAtToRef=function(e,t,n){void 0===t&&(t=new o.x(0,1,0)),o.j.LookAtLHToRef(this._zeroVector,e,t,this._lookAtTmpMatrix),this._lookAtTmpMatrix.invert(),o.q.FromRotationMatrixToRef(this._lookAtTmpMatrix,n)},e.prototype.attach=function(e){var t=this;this._target=e,this._scene=this._target.getScene(),this._onRenderObserver=this._scene.onBeforeRenderObservable.add(function(){if(t._scene.activeCamera){var n=t._scene.activeCamera.position;t._scene.activeCamera.devicePosition&&(n=t._scene.activeCamera.devicePosition);var r=t._closestFace(n.subtract(e.position));t._scene.activeCamera.leftCamera?t._scene.activeCamera.leftCamera.computeWorldMatrix().getRotationMatrixToRef(t._tmpMatrix):t._scene.activeCamera.computeWorldMatrix().getRotationMatrixToRef(t._tmpMatrix),o.x.TransformCoordinatesToRef(o.x.Up(),t._tmpMatrix,t._tmpVector),t._faceVectors.forEach(function(e){r.direction.x&&e.direction.x&&(e.ignore=!0),r.direction.y&&e.direction.y&&(e.ignore=!0),r.direction.z&&e.direction.z&&(e.ignore=!0)});var i=t._closestFace(t._tmpVector);t._faceVectors.forEach(function(e){e.ignore=!1}),t.ui.position.copyFrom(e.position),r.direction.x&&(r.rotatedDirection.scaleToRef(e.scaling.x/2+t.distanceAwayFromFace,t._tmpVector),t.ui.position.addInPlace(t._tmpVector)),r.direction.y&&(r.rotatedDirection.scaleToRef(e.scaling.y/2+t.distanceAwayFromFace,t._tmpVector),t.ui.position.addInPlace(t._tmpVector)),r.direction.z&&(r.rotatedDirection.scaleToRef(e.scaling.z/2+t.distanceAwayFromFace,t._tmpVector),t.ui.position.addInPlace(t._tmpVector)),t.ui.rotationQuaternion||(t.ui.rotationQuaternion=o.q.RotationYawPitchRoll(t.ui.rotation.y,t.ui.rotation.x,t.ui.rotation.z)),r.rotatedDirection.scaleToRef(-1,t._tmpVector),t._lookAtToRef(t._tmpVector,i.rotatedDirection,t.ui.rotationQuaternion),i.direction.x&&t.ui.up.scaleToRef(t.distanceAwayFromBottomOfFace-e.scaling.x/2,t._tmpVector),i.direction.y&&t.ui.up.scaleToRef(t.distanceAwayFromBottomOfFace-e.scaling.y/2,t._tmpVector),i.direction.z&&t.ui.up.scaleToRef(t.distanceAwayFromBottomOfFace-e.scaling.z/2,t._tmpVector),t.ui.position.addInPlace(t._tmpVector)}})},e.prototype.detach=function(){this._scene.onBeforeRenderObservable.remove(this._onRenderObserver)},e}(),we=function(){function e(){var e=this;this.delay=0,this.fadeInTime=300,this._millisecondsPerFrame=1e3/60,this._hovered=!1,this._hoverValue=0,this._ownerNode=null,this._update=function(){if(e._ownerNode){if(e._hoverValue+=e._hovered?e._millisecondsPerFrame:-e._millisecondsPerFrame,e._setAllVisibility(e._ownerNode,(e._hoverValue-e.delay)/e.fadeInTime),e._ownerNode.visibility>1)return e._setAllVisibility(e._ownerNode,1),void(e._hoverValue=e.fadeInTime+e.delay);if(e._ownerNode.visibility<0&&(e._setAllVisibility(e._ownerNode,0),e._hoverValue<0))return void(e._hoverValue=0);setTimeout(e._update,e._millisecondsPerFrame)}}}return Object.defineProperty(e.prototype,"name",{get:function(){return"FadeInOut"},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.attach=function(e){this._ownerNode=e,this._setAllVisibility(this._ownerNode,0)},e.prototype.detach=function(){this._ownerNode=null},e.prototype.fadeIn=function(e){this._hovered=e,this._update()},e.prototype._setAllVisibility=function(e,t){var n=this;e.visibility=t,e.getChildMeshes().forEach(function(e){n._setAllVisibility(e,t)})},e}(),Le=n(54),Ie=function(){function e(){this._startDistance=0,this._initialScale=new o.x(0,0,0),this._targetScale=new o.x(0,0,0),this._sceneRenderObserver=null,this._dragBehaviorA=new Le.a({}),this._dragBehaviorA.moveAttached=!1,this._dragBehaviorB=new Le.a({}),this._dragBehaviorB.moveAttached=!1}return Object.defineProperty(e.prototype,"name",{get:function(){return"MultiPointerScale"},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype._getCurrentDistance=function(){return this._dragBehaviorA.lastDragPosition.subtract(this._dragBehaviorB.lastDragPosition).length()},e.prototype.attach=function(e){var t=this;this._ownerNode=e,this._dragBehaviorA.onDragStartObservable.add(function(n){t._dragBehaviorA.dragging&&t._dragBehaviorB.dragging&&(t._dragBehaviorA.currentDraggingPointerID==t._dragBehaviorB.currentDraggingPointerID?t._dragBehaviorA.releaseDrag():(t._initialScale.copyFrom(e.scaling),t._startDistance=t._getCurrentDistance()))}),this._dragBehaviorB.onDragStartObservable.add(function(n){t._dragBehaviorA.dragging&&t._dragBehaviorB.dragging&&(t._dragBehaviorA.currentDraggingPointerID==t._dragBehaviorB.currentDraggingPointerID?t._dragBehaviorB.releaseDrag():(t._initialScale.copyFrom(e.scaling),t._startDistance=t._getCurrentDistance()))}),[this._dragBehaviorA,this._dragBehaviorB].forEach(function(e){e.onDragObservable.add(function(){if(t._dragBehaviorA.dragging&&t._dragBehaviorB.dragging){var e=t._getCurrentDistance()/t._startDistance;t._initialScale.scaleToRef(e,t._targetScale)}})}),e.addBehavior(this._dragBehaviorA),e.addBehavior(this._dragBehaviorB),this._sceneRenderObserver=e.getScene().onBeforeRenderObservable.add(function(){if(t._dragBehaviorA.dragging&&t._dragBehaviorB.dragging){var n=t._targetScale.subtract(e.scaling).scaleInPlace(.1);n.length()>.01&&e.scaling.addInPlace(n)}})},e.prototype.detach=function(){var e=this;this._ownerNode.getScene().onBeforeRenderObservable.remove(this._sceneRenderObserver),[this._dragBehaviorA,this._dragBehaviorB].forEach(function(t){t.onDragStartObservable.clear(),t.onDragObservable.clear(),e._ownerNode.removeBehavior(t)})},e}(),Fe=n(24),Ne=n(21),Be=n(45),ke=function(){function e(){this._sceneRenderObserver=null,this._targetPosition=new o.x(0,0,0),this._moving=!1,this._startingOrientation=new o.q,this.zDragFactor=3,this.rotateDraggedObject=!0,this.dragging=!1,this.dragDeltaRatio=.2,this.currentDraggingPointerID=-1,this.detachCameraControls=!0,this.onDragStartObservable=new i.c,this.onDragEndObservable=new i.c}return Object.defineProperty(e.prototype,"name",{get:function(){return"SixDofDrag"},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.attach=function(t){var n=this;this._ownerNode=t,this._scene=this._ownerNode.getScene(),e._virtualScene||((e._virtualScene=new H.a(this._scene.getEngine())).detachControl(),this._scene.getEngine().scenes.pop());var r=null,i=new o.x(0,0,0);this._virtualOriginMesh=new Fe.a("",e._virtualScene),this._virtualOriginMesh.rotationQuaternion=new o.q,this._virtualDragMesh=new Fe.a("",e._virtualScene),this._virtualDragMesh.rotationQuaternion=new o.q;var a=null;this._pointerObserver=this._scene.onPointerObservable.add(function(e,t){if(e.type==Se.a.POINTERDOWN){if(!n.dragging&&e.pickInfo&&e.pickInfo.hit&&e.pickInfo.pickedMesh&&e.pickInfo.ray&&(n._ownerNode==(h=e.pickInfo.pickedMesh)||h.isDescendantOf(n._ownerNode))){n._scene.activeCamera&&n._scene.activeCamera.cameraRigMode==Ne.a.RIG_MODE_NONE&&e.pickInfo.ray.origin.copyFrom(n._scene.activeCamera.globalPosition),Be.a._RemoveAndStorePivotPoint(r=n._ownerNode),i.copyFrom(e.pickInfo.ray.origin),n._virtualOriginMesh.position.copyFrom(e.pickInfo.ray.origin),n._virtualOriginMesh.lookAt(e.pickInfo.ray.origin.add(e.pickInfo.ray.direction)),n._virtualOriginMesh.removeChild(n._virtualDragMesh),r.computeWorldMatrix(),n._virtualDragMesh.position.copyFrom(r.absolutePosition),r.rotationQuaternion||(r.rotationQuaternion=o.q.RotationYawPitchRoll(r.rotation.y,r.rotation.x,r.rotation.z));var s=r.parent;r.setParent(null),n._virtualDragMesh.rotationQuaternion.copyFrom(r.rotationQuaternion),r.setParent(s),n._virtualOriginMesh.addChild(n._virtualDragMesh),n._targetPosition.copyFrom(n._virtualDragMesh.absolutePosition),n.dragging=!0,n.currentDraggingPointerID=e.event.pointerId,n.detachCameraControls&&n._scene.activeCamera&&!n._scene.activeCamera.leftCamera&&(n._scene.activeCamera.inputs.attachedElement?(a=n._scene.activeCamera.inputs.attachedElement,n._scene.activeCamera.detachControl(n._scene.activeCamera.inputs.attachedElement)):a=null),Be.a._RestorePivotPoint(r),n.onDragStartObservable.notifyObservers({})}}else if(e.type==Se.a.POINTERUP)n.currentDraggingPointerID==e.event.pointerId&&(n.dragging=!1,n._moving=!1,n.currentDraggingPointerID=-1,r=null,n._virtualOriginMesh.removeChild(n._virtualDragMesh),n.detachCameraControls&&a&&n._scene.activeCamera&&!n._scene.activeCamera.leftCamera&&n._scene.activeCamera.attachControl(a,!0),n.onDragEndObservable.notifyObservers({}));else if(e.type==Se.a.POINTERMOVE&&n.currentDraggingPointerID==e.event.pointerId&&n.dragging&&e.pickInfo&&e.pickInfo.ray&&r){var u=n.zDragFactor;n._scene.activeCamera&&n._scene.activeCamera.cameraRigMode==Ne.a.RIG_MODE_NONE&&(e.pickInfo.ray.origin.copyFrom(n._scene.activeCamera.globalPosition),u=0);var l=e.pickInfo.ray.origin.subtract(i);i.copyFrom(e.pickInfo.ray.origin);var c=-o.x.Dot(l,e.pickInfo.ray.direction);n._virtualOriginMesh.addChild(n._virtualDragMesh),n._virtualDragMesh.position.z-=n._virtualDragMesh.position.z<1?c*n.zDragFactor:c*u*n._virtualDragMesh.position.z,n._virtualDragMesh.position.z<0&&(n._virtualDragMesh.position.z=0),n._virtualOriginMesh.position.copyFrom(e.pickInfo.ray.origin),n._virtualOriginMesh.lookAt(e.pickInfo.ray.origin.add(e.pickInfo.ray.direction)),n._virtualOriginMesh.removeChild(n._virtualDragMesh),n._targetPosition.copyFrom(n._virtualDragMesh.absolutePosition),r.parent&&o.x.TransformCoordinatesToRef(n._targetPosition,o.j.Invert(r.parent.getWorldMatrix()),n._targetPosition),n._moving||n._startingOrientation.copyFrom(n._virtualDragMesh.rotationQuaternion),n._moving=!0}var h});var s=new o.q;this._sceneRenderObserver=t.getScene().onBeforeRenderObservable.add(function(){if(n.dragging&&n._moving&&r){if(Be.a._RemoveAndStorePivotPoint(r),r.position.addInPlace(n._targetPosition.subtract(r.position).scale(n.dragDeltaRatio)),n.rotateDraggedObject){s.copyFrom(n._startingOrientation),s.x=-s.x,s.y=-s.y,s.z=-s.z,n._virtualDragMesh.rotationQuaternion.multiplyToRef(s,s),o.q.RotationYawPitchRollToRef(s.toEulerAngles("xyz").y,0,0,s),s.multiplyToRef(n._startingOrientation,s);var e=r.parent;(!e||e.scaling&&!e.scaling.isNonUniformWithinEpsilon(.001))&&(r.setParent(null),o.q.SlerpToRef(r.rotationQuaternion,s,n.dragDeltaRatio,r.rotationQuaternion),r.setParent(e))}Be.a._RestorePivotPoint(r)}})},e.prototype.detach=function(){this._scene&&this._scene.onPointerObservable.remove(this._pointerObserver),this._ownerNode&&this._ownerNode.getScene().onBeforeRenderObservable.remove(this._sceneRenderObserver),this._virtualOriginMesh&&this._virtualOriginMesh.dispose(),this._virtualDragMesh&&this._virtualDragMesh.dispose(),this.onDragEndObservable.clear(),this.onDragStartObservable.clear()},e}(),Ue=function(){function e(e,t,n){if(this.targetPosition=o.x.Zero(),this.poleTargetPosition=o.x.Zero(),this.poleTargetLocalOffset=o.x.Zero(),this.poleAngle=0,this.slerpAmount=1,this._bone1Quat=o.q.Identity(),this._bone1Mat=o.j.Identity(),this._bone2Ang=Math.PI,this._maxAngle=Math.PI,this._rightHandedSystem=!1,this._bendAxis=o.x.Right(),this._slerping=!1,this._adjustRoll=0,this._bone2=t,this._bone1=t.getParent(),this._bone1){this.mesh=e;var r=t.getPosition();if(t.getAbsoluteTransform().determinant()>0&&(this._rightHandedSystem=!0,this._bendAxis.x=0,this._bendAxis.y=0,this._bendAxis.z=-1,r.x>r.y&&r.x>r.z&&(this._adjustRoll=.5*Math.PI,this._bendAxis.z=1)),this._bone1.length){var i=this._bone1.getScale(),a=this._bone2.getScale();this._bone1Length=this._bone1.length*i.y*this.mesh.scaling.y,this._bone2Length=this._bone2.length*a.y*this.mesh.scaling.y}else if(this._bone1.children[0]){e.computeWorldMatrix(!0);var s=this._bone2.children[0].getAbsolutePosition(e),u=this._bone2.getAbsolutePosition(e),l=this._bone1.getAbsolutePosition(e);this._bone1Length=o.x.Distance(s,u),this._bone2Length=o.x.Distance(u,l)}this._bone1.getRotationMatrixToRef(o.s.WORLD,e,this._bone1Mat),this.maxAngle=Math.PI,n&&(n.targetMesh&&(this.targetMesh=n.targetMesh,this.targetMesh.computeWorldMatrix(!0)),n.poleTargetMesh?(this.poleTargetMesh=n.poleTargetMesh,this.poleTargetMesh.computeWorldMatrix(!0)):n.poleTargetBone?this.poleTargetBone=n.poleTargetBone:this._bone1.getParent()&&(this.poleTargetBone=this._bone1.getParent()),n.poleTargetLocalOffset&&this.poleTargetLocalOffset.copyFrom(n.poleTargetLocalOffset),n.poleAngle&&(this.poleAngle=n.poleAngle),n.bendAxis&&this._bendAxis.copyFrom(n.bendAxis),n.maxAngle&&(this.maxAngle=n.maxAngle),n.slerpAmount&&(this.slerpAmount=n.slerpAmount))}}return Object.defineProperty(e.prototype,"maxAngle",{get:function(){return this._maxAngle},set:function(e){this._setMaxAngle(e)},enumerable:!0,configurable:!0}),e.prototype._setMaxAngle=function(e){e<0&&(e=0),(e>Math.PI||null==e)&&(e=Math.PI),this._maxAngle=e;var t=this._bone1Length,n=this._bone2Length;this._maxReach=Math.sqrt(t*t+n*n-2*t*n*Math.cos(e))},e.prototype.update=function(){var t=this._bone1;if(t){var n=this.targetPosition,r=this.poleTargetPosition,i=e._tmpMats[0],a=e._tmpMats[1];this.targetMesh&&n.copyFrom(this.targetMesh.getAbsolutePosition()),this.poleTargetBone?this.poleTargetBone.getAbsolutePositionFromLocalToRef(this.poleTargetLocalOffset,this.mesh,r):this.poleTargetMesh&&o.x.TransformCoordinatesToRef(this.poleTargetLocalOffset,this.poleTargetMesh.getWorldMatrix(),r);var s=e._tmpVecs[0],u=e._tmpVecs[1],l=e._tmpVecs[2],c=e._tmpVecs[3],h=e._tmpVecs[4],d=e._tmpQuat;t.getAbsolutePositionToRef(this.mesh,s),r.subtractToRef(s,h),0==h.x&&0==h.y&&0==h.z?h.y=1:h.normalize(),n.subtractToRef(s,c),c.normalize(),o.x.CrossToRef(c,h,u),u.normalize(),o.x.CrossToRef(c,u,l),l.normalize(),o.j.FromXYZAxesToRef(l,c,u,i);var f=this._bone1Length,p=this._bone2Length,_=o.x.Distance(s,n);this._maxReach>0&&(_=Math.min(this._maxReach,_));var m=(p*p+_*_-f*f)/(2*p*_),g=(_*_+f*f-p*p)/(2*_*f);m>1&&(m=1),g>1&&(g=1),m<-1&&(m=-1),g<-1&&(g=-1);var v=Math.acos(m),y=Math.acos(g),b=-v-y;if(this._rightHandedSystem)o.j.RotationYawPitchRollToRef(0,0,this._adjustRoll,a),a.multiplyToRef(i,i),o.j.RotationAxisToRef(this._bendAxis,y,a),a.multiplyToRef(i,i);else{var T=e._tmpVecs[5];T.copyFrom(this._bendAxis),T.x*=-1,o.j.RotationAxisToRef(T,-y,a),a.multiplyToRef(i,i)}this.poleAngle&&(o.j.RotationAxisToRef(c,this.poleAngle,a),i.multiplyToRef(a,i)),this._bone1&&(this.slerpAmount<1?(this._slerping||o.q.FromRotationMatrixToRef(this._bone1Mat,this._bone1Quat),o.q.FromRotationMatrixToRef(i,d),o.q.SlerpToRef(this._bone1Quat,d,this.slerpAmount,this._bone1Quat),b=this._bone2Ang*(1-this.slerpAmount)+b*this.slerpAmount,this._bone1.setRotationQuaternion(this._bone1Quat,o.s.WORLD,this.mesh),this._slerping=!0):(this._bone1.setRotationMatrix(i,o.s.WORLD,this.mesh),this._bone1Mat.copyFrom(i),this._slerping=!1)),this._bone2.setAxisAngle(this._bendAxis,b,o.s.LOCAL),this._bone2Ang=b}},e._tmpVecs=[o.x.Zero(),o.x.Zero(),o.x.Zero(),o.x.Zero(),o.x.Zero(),o.x.Zero()],e._tmpQuat=o.q.Identity(),e._tmpMats=[o.j.Identity(),o.j.Identity()],e}(),Ve=function(){function e(e,t,n,r){if(this.upAxis=o.x.Up(),this.upAxisSpace=o.s.LOCAL,this.adjustYaw=0,this.adjustPitch=0,this.adjustRoll=0,this.slerpAmount=1,this._boneQuat=o.q.Identity(),this._slerping=!1,this._firstFrameSkipped=!1,this._fowardAxis=o.x.Forward(),this.mesh=e,this.bone=t,this.target=n,r&&(r.adjustYaw&&(this.adjustYaw=r.adjustYaw),r.adjustPitch&&(this.adjustPitch=r.adjustPitch),r.adjustRoll&&(this.adjustRoll=r.adjustRoll),this.maxYaw=null!=r.maxYaw?r.maxYaw:Math.PI,this.minYaw=null!=r.minYaw?r.minYaw:-Math.PI,this.maxPitch=null!=r.maxPitch?r.maxPitch:Math.PI,this.minPitch=null!=r.minPitch?r.minPitch:-Math.PI,null!=r.slerpAmount&&(this.slerpAmount=r.slerpAmount),null!=r.upAxis&&(this.upAxis=r.upAxis),null!=r.upAxisSpace&&(this.upAxisSpace=r.upAxisSpace),null!=r.yawAxis||null!=r.pitchAxis)){var i=o.c.Y,a=o.c.X;null!=r.yawAxis&&(i=r.yawAxis.clone()).normalize(),null!=r.pitchAxis&&(a=r.pitchAxis.clone()).normalize();var s=o.x.Cross(a,i);this._transformYawPitch=o.j.Identity(),o.j.FromXYZAxesToRef(a,i,s,this._transformYawPitch),this._transformYawPitchInv=this._transformYawPitch.clone(),this._transformYawPitch.invert()}t.getParent()||this.upAxisSpace!=o.s.BONE||(this.upAxisSpace=o.s.LOCAL)}return Object.defineProperty(e.prototype,"minYaw",{get:function(){return this._minYaw},set:function(e){this._minYaw=e,this._minYawSin=Math.sin(e),this._minYawCos=Math.cos(e),null!=this._maxYaw&&(this._midYawConstraint=.5*this._getAngleDiff(this._minYaw,this._maxYaw)+this._minYaw,this._yawRange=this._maxYaw-this._minYaw)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxYaw",{get:function(){return this._maxYaw},set:function(e){this._maxYaw=e,this._maxYawSin=Math.sin(e),this._maxYawCos=Math.cos(e),null!=this._minYaw&&(this._midYawConstraint=.5*this._getAngleDiff(this._minYaw,this._maxYaw)+this._minYaw,this._yawRange=this._maxYaw-this._minYaw)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minPitch",{get:function(){return this._minPitch},set:function(e){this._minPitch=e,this._minPitchTan=Math.tan(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPitch",{get:function(){return this._maxPitch},set:function(e){this._maxPitch=e,this._maxPitchTan=Math.tan(e)},enumerable:!0,configurable:!0}),e.prototype.update=function(){if(this.slerpAmount<1&&!this._firstFrameSkipped)this._firstFrameSkipped=!0;else{var t=this.bone,n=e._tmpVecs[0];t.getAbsolutePositionToRef(this.mesh,n);var r=this.target,i=e._tmpMats[0],a=e._tmpMats[1],s=this.mesh,u=t.getParent(),l=e._tmpVecs[1];l.copyFrom(this.upAxis),this.upAxisSpace==o.s.BONE&&u?(this._transformYawPitch&&o.x.TransformCoordinatesToRef(l,this._transformYawPitchInv,l),u.getDirectionToRef(l,this.mesh,l)):this.upAxisSpace==o.s.LOCAL&&(s.getDirectionToRef(l,l),1==s.scaling.x&&1==s.scaling.y&&1==s.scaling.z||l.normalize());var c=!1,h=!1;if(this._maxYaw==Math.PI&&this._minYaw==-Math.PI||(c=!0),this._maxPitch==Math.PI&&this._minPitch==-Math.PI||(h=!0),c||h){var d=e._tmpMats[2],f=e._tmpMats[3];if(this.upAxisSpace==o.s.BONE&&1==l.y&&u)u.getRotationMatrixToRef(o.s.WORLD,this.mesh,d);else if(this.upAxisSpace!=o.s.LOCAL||1!=l.y||u){(_=e._tmpVecs[2]).copyFrom(this._fowardAxis),this._transformYawPitch&&o.x.TransformCoordinatesToRef(_,this._transformYawPitchInv,_),u?u.getDirectionToRef(_,this.mesh,_):s.getDirectionToRef(_,_);var p=o.x.Cross(l,_);p.normalize();var _=o.x.Cross(p,l);o.j.FromXYZAxesToRef(p,l,_,d)}else d.copyFrom(s.getWorldMatrix());d.invertToRef(f);var m=null;if(h){var g=e._tmpVecs[3];r.subtractToRef(n,g),o.x.TransformCoordinatesToRef(g,f,g),m=Math.sqrt(g.x*g.x+g.z*g.z);var v=Math.atan2(g.y,m),y=v;v>this._maxPitch?(g.y=this._maxPitchTan*m,y=this._maxPitch):v<this._minPitch&&(g.y=this._minPitchTan*m,y=this._minPitch),v!=y&&(o.x.TransformCoordinatesToRef(g,d,g),g.addInPlace(n),r=g)}if(c){r.subtractToRef(n,g=e._tmpVecs[4]),o.x.TransformCoordinatesToRef(g,f,g);var b=Math.atan2(g.x,g.z),T=b;if((b>this._maxYaw||b<this._minYaw)&&(null==m&&(m=Math.sqrt(g.x*g.x+g.z*g.z)),this._yawRange>Math.PI?this._isAngleBetween(b,this._maxYaw,this._midYawConstraint)?(g.z=this._maxYawCos*m,g.x=this._maxYawSin*m,T=this._maxYaw):this._isAngleBetween(b,this._midYawConstraint,this._minYaw)&&(g.z=this._minYawCos*m,g.x=this._minYawSin*m,T=this._minYaw):b>this._maxYaw?(g.z=this._maxYawCos*m,g.x=this._maxYawSin*m,T=this._maxYaw):b<this._minYaw&&(g.z=this._minYawCos*m,g.x=this._minYawSin*m,T=this._minYaw)),this._slerping&&this._yawRange>Math.PI){var E=e._tmpVecs[8];E.copyFrom(o.c.Z),this._transformYawPitch&&o.x.TransformCoordinatesToRef(E,this._transformYawPitchInv,E);var x=e._tmpMats[4];this._boneQuat.toRotationMatrix(x),this.mesh.getWorldMatrix().multiplyToRef(x,x),o.x.TransformCoordinatesToRef(E,x,E),o.x.TransformCoordinatesToRef(E,f,E);var M=Math.atan2(E.x,E.z);if(this._getAngleBetween(M,b)>this._getAngleBetween(M,this._midYawConstraint)){null==m&&(m=Math.sqrt(g.x*g.x+g.z*g.z));var A=this._getAngleBetween(M,this._maxYaw);this._getAngleBetween(M,this._minYaw)<A?(T=M+.75*Math.PI,g.z=Math.cos(T)*m,g.x=Math.sin(T)*m):(T=M-.75*Math.PI,g.z=Math.cos(T)*m,g.x=Math.sin(T)*m)}}b!=T&&(o.x.TransformCoordinatesToRef(g,d,g),g.addInPlace(n),r=g)}}var S=e._tmpVecs[5],C=e._tmpVecs[6],P=e._tmpVecs[7],R=e._tmpQuat;r.subtractToRef(n,S),S.normalize(),o.x.CrossToRef(l,S,C),C.normalize(),o.x.CrossToRef(S,C,P),P.normalize(),o.j.FromXYZAxesToRef(C,P,S,i),0===C.x&&0===C.y&&0===C.z||0===P.x&&0===P.y&&0===P.z||0===S.x&&0===S.y&&0===S.z||((this.adjustYaw||this.adjustPitch||this.adjustRoll)&&(o.j.RotationYawPitchRollToRef(this.adjustYaw,this.adjustPitch,this.adjustRoll,a),a.multiplyToRef(i,i)),this.slerpAmount<1?(this._slerping||this.bone.getRotationQuaternionToRef(o.s.WORLD,this.mesh,this._boneQuat),this._transformYawPitch&&this._transformYawPitch.multiplyToRef(i,i),o.q.FromRotationMatrixToRef(i,R),o.q.SlerpToRef(this._boneQuat,R,this.slerpAmount,this._boneQuat),this.bone.setRotationQuaternion(this._boneQuat,o.s.WORLD,this.mesh),this._slerping=!0):(this._transformYawPitch&&this._transformYawPitch.multiplyToRef(i,i),this.bone.setRotationMatrix(i,o.s.WORLD,this.mesh),this._slerping=!1))}},e.prototype._getAngleDiff=function(e,t){var n=t-e;return(n%=2*Math.PI)>Math.PI?n-=2*Math.PI:n<-Math.PI&&(n+=2*Math.PI),n},e.prototype._getAngleBetween=function(e,t){var n=0;return(n=(e=(e%=2*Math.PI)<0?e+2*Math.PI:e)<(t=(t%=2*Math.PI)<0?t+2*Math.PI:t)?t-e:e-t)>Math.PI&&(n=2*Math.PI-n),n},e.prototype._isAngleBetween=function(e,t,n){if(e=(e%=2*Math.PI)<0?e+2*Math.PI:e,(t=(t%=2*Math.PI)<0?t+2*Math.PI:t)<(n=(n%=2*Math.PI)<0?n+2*Math.PI:n)){if(e>t&&e<n)return!0}else if(e>n&&e<t)return!0;return!1},e._tmpVecs=X.a.BuildArray(10,o.x.Zero),e._tmpQuat=o.q.Identity(),e._tmpMats=X.a.BuildArray(5,o.j.Identity),e}(),Ge=n(7),je=n(26);me.b.prototype.updateRawTexture=function(e,t,n,r,i,o){if(void 0===i&&(i=null),void 0===o&&(o=me.b.TEXTURETYPE_UNSIGNED_INT),e){var a=this._getRGBABufferInternalSizedFormat(o,n),s=this._getInternalFormat(n),u=this._getWebGLTextureType(o);this._bindTextureDirectly(this._gl.TEXTURE_2D,e,!0),this._unpackFlipY(void 0===r||!!r),this._doNotHandleContextLost||(e._bufferView=t,e.format=n,e.type=o,e.invertY=r,e._compression=i),e.width%4!=0&&this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,1),i&&t?this._gl.compressedTexImage2D(this._gl.TEXTURE_2D,0,this.getCaps().s3tc[i],e.width,e.height,0,t):this._gl.texImage2D(this._gl.TEXTURE_2D,0,a,e.width,e.height,0,s,u,t),e.generateMipMaps&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(this._gl.TEXTURE_2D,null),e.isReady=!0}},me.b.prototype.createRawTexture=function(e,t,n,r,i,o,a,s,u){void 0===s&&(s=null),void 0===u&&(u=me.b.TEXTURETYPE_UNSIGNED_INT);var l=new je.a(this,je.a.DATASOURCE_RAW);l.baseWidth=t,l.baseHeight=n,l.width=t,l.height=n,l.format=r,l.generateMipMaps=i,l.samplingMode=a,l.invertY=o,l._compression=s,l.type=u,this._doNotHandleContextLost||(l._bufferView=e),this.updateRawTexture(l,e,r,o,s,u),this._bindTextureDirectly(this._gl.TEXTURE_2D,l,!0);var c=this._getSamplingParameters(a,i);return this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,c.mag),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,c.min),i&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(this._gl.TEXTURE_2D,null),this._internalTexturesCache.push(l),l},me.b.prototype.createRawCubeTexture=function(e,t,n,r,i,o,a,s){void 0===s&&(s=null);var u=this._gl,l=new je.a(this,je.a.DATASOURCE_CUBERAW);l.isCube=!0,l.format=n,l.type=r,this._doNotHandleContextLost||(l._bufferViewArray=e);var c=this._getWebGLTextureType(r),h=this._getInternalFormat(n);h===u.RGB&&(h=u.RGBA),c!==u.FLOAT||this._caps.textureFloatLinearFiltering?c!==this._gl.HALF_FLOAT_OES||this._caps.textureHalfFloatLinearFiltering?c!==u.FLOAT||this._caps.textureFloatRender?c!==u.HALF_FLOAT||this._caps.colorBufferFloat||(i=!1,p.a.Warn("Render to half float textures is not supported. Mipmap generation forced to false.")):(i=!1,p.a.Warn("Render to float textures is not supported. Mipmap generation forced to false.")):(i=!1,a=me.b.TEXTURE_NEAREST_SAMPLINGMODE,p.a.Warn("Half float texture filtering is not supported. Mipmap generation and sampling mode are forced to false and TEXTURE_NEAREST_SAMPLINGMODE, respectively.")):(i=!1,a=me.b.TEXTURE_NEAREST_SAMPLINGMODE,p.a.Warn("Float texture filtering is not supported. Mipmap generation and sampling mode are forced to false and TEXTURE_NEAREST_SAMPLINGMODE, respectively."));var d=t;l.width=t,l.height=d,!this.needPOTTextures||ye.h.IsExponentOfTwo(l.width)&&ye.h.IsExponentOfTwo(l.height)||(i=!1),e&&this.updateRawCubeTexture(l,e,n,r,o,s),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,l,!0),e&&i&&this._gl.generateMipmap(this._gl.TEXTURE_CUBE_MAP);var f=this._getSamplingParameters(a,i);return u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_MAG_FILTER,f.mag),u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_MIN_FILTER,f.min),u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_WRAP_S,u.CLAMP_TO_EDGE),u.texParameteri(u.TEXTURE_CUBE_MAP,u.TEXTURE_WRAP_T,u.CLAMP_TO_EDGE),this._bindTextureDirectly(u.TEXTURE_CUBE_MAP,null),l.generateMipMaps=i,l},me.b.prototype.updateRawCubeTexture=function(e,t,n,r,i,o,a){void 0===o&&(o=null),void 0===a&&(a=0),e._bufferViewArray=t,e.format=n,e.type=r,e.invertY=i,e._compression=o;var s=this._gl,u=this._getWebGLTextureType(r),l=this._getInternalFormat(n),c=this._getRGBABufferInternalSizedFormat(r),h=!1;l===s.RGB&&(l=s.RGBA,h=!0),this._bindTextureDirectly(s.TEXTURE_CUBE_MAP,e,!0),this._unpackFlipY(void 0===i||!!i),e.width%4!=0&&s.pixelStorei(s.UNPACK_ALIGNMENT,1);for(var d=0;d<6;d++){var f=t[d];o?s.compressedTexImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+d,a,this.getCaps().s3tc[o],e.width,e.height,0,f):(h&&(f=this._convertRGBtoRGBATextureData(f,e.width,e.height,r)),s.texImage2D(s.TEXTURE_CUBE_MAP_POSITIVE_X+d,a,c,e.width,e.height,0,l,u,f))}(!this.needPOTTextures||ye.h.IsExponentOfTwo(e.width)&&ye.h.IsExponentOfTwo(e.height))&&e.generateMipMaps&&0===a&&this._gl.generateMipmap(this._gl.TEXTURE_CUBE_MAP),this._bindTextureDirectly(this._gl.TEXTURE_CUBE_MAP,null),e.isReady=!0},me.b.prototype.createRawCubeTextureFromUrl=function(e,t,n,r,i,o,a,s,u,l,c,h){var d=this;void 0===u&&(u=null),void 0===l&&(l=null),void 0===c&&(c=me.b.TEXTURE_TRILINEAR_SAMPLINGMODE),void 0===h&&(h=!1);var f=this._gl,p=this.createRawCubeTexture(null,n,r,i,!o,h,c);return t._addPendingData(p),p.url=e,this._internalTexturesCache.push(p),this._loadFile(e,function(e){!function(e){var n=p.width,o=a(e);if(o){if(s){var l=d._getWebGLTextureType(i),c=d._getInternalFormat(r),_=d._getRGBABufferInternalSizedFormat(i),m=!1;c===f.RGB&&(c=f.RGBA,m=!0),d._bindTextureDirectly(f.TEXTURE_CUBE_MAP,p,!0),d._unpackFlipY(!1);for(var g=s(o),v=0;v<g.length;v++)for(var y=n>>v,b=0;b<6;b++){var T=g[v][b];m&&(T=d._convertRGBtoRGBATextureData(T,y,y,i)),f.texImage2D(b,v,_,y,y,0,c,l,T)}d._bindTextureDirectly(f.TEXTURE_CUBE_MAP,null)}else d.updateRawCubeTexture(p,o,r,i,h);p.isReady=!0,t._removePendingData(p),u&&u()}}(e)},void 0,t.offlineProvider,!0,function(e,n){t._removePendingData(p),l&&e&&l(e.status+" "+e.statusText,n)}),p},me.b.prototype.createRawTexture3D=function(e,t,n,r,i,o,a,s,u,l){void 0===u&&(u=null),void 0===l&&(l=me.b.TEXTURETYPE_UNSIGNED_INT);var c=new je.a(this,je.a.DATASOURCE_RAW3D);c.baseWidth=t,c.baseHeight=n,c.baseDepth=r,c.width=t,c.height=n,c.depth=r,c.format=i,c.type=l,c.generateMipMaps=o,c.samplingMode=s,c.is3D=!0,this._doNotHandleContextLost||(c._bufferView=e),this.updateRawTexture3D(c,e,i,a,u,l),this._bindTextureDirectly(this._gl.TEXTURE_3D,c,!0);var h=this._getSamplingParameters(s,o);return this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_MAG_FILTER,h.mag),this._gl.texParameteri(this._gl.TEXTURE_3D,this._gl.TEXTURE_MIN_FILTER,h.min),o&&this._gl.generateMipmap(this._gl.TEXTURE_3D),this._bindTextureDirectly(this._gl.TEXTURE_3D,null),this._internalTexturesCache.push(c),c},me.b.prototype.updateRawTexture3D=function(e,t,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=me.b.TEXTURETYPE_UNSIGNED_INT);var a=this._getWebGLTextureType(o),s=this._getInternalFormat(n),u=this._getRGBABufferInternalSizedFormat(o,n);this._bindTextureDirectly(this._gl.TEXTURE_3D,e,!0),this._unpackFlipY(void 0===r||!!r),this._doNotHandleContextLost||(e._bufferView=t,e.format=n,e.invertY=r,e._compression=i),e.width%4!=0&&this._gl.pixelStorei(this._gl.UNPACK_ALIGNMENT,1),i&&t?this._gl.compressedTexImage3D(this._gl.TEXTURE_3D,0,this.getCaps().s3tc[i],e.width,e.height,e.depth,0,t):this._gl.texImage3D(this._gl.TEXTURE_3D,0,u,e.width,e.height,e.depth,0,s,a,t),e.generateMipMaps&&this._gl.generateMipmap(this._gl.TEXTURE_3D),this._bindTextureDirectly(this._gl.TEXTURE_3D,null),e.isReady=!0};var ze=function(e){function t(t,n,r,i,o,a,s,u,l){void 0===a&&(a=!0),void 0===s&&(s=!1),void 0===u&&(u=_.a.TEXTURE_TRILINEAR_SAMPLINGMODE),void 0===l&&(l=_.a.TEXTURETYPE_UNSIGNED_INT);var c=e.call(this,null,o,!a,s)||this;return c.format=i,c._engine=o.getEngine(),c._texture=o.getEngine().createRawTexture(t,n,r,i,a,s,u,null,l),c.wrapU=Ge.a.CLAMP_ADDRESSMODE,c.wrapV=Ge.a.CLAMP_ADDRESSMODE,c}return l.d(t,e),t.prototype.update=function(e){this._engine.updateRawTexture(this._texture,e,this._texture.format,this._texture.invertY,null,this._texture.type)},t.CreateLuminanceTexture=function(e,n,r,i,o,a,s){return void 0===o&&(o=!0),void 0===a&&(a=!1),void 0===s&&(s=_.a.TEXTURE_TRILINEAR_SAMPLINGMODE),new t(e,n,r,_.a.TEXTUREFORMAT_LUMINANCE,i,o,a,s)},t.CreateLuminanceAlphaTexture=function(e,n,r,i,o,a,s){return void 0===o&&(o=!0),void 0===a&&(a=!1),void 0===s&&(s=_.a.TEXTURE_TRILINEAR_SAMPLINGMODE),new t(e,n,r,_.a.TEXTUREFORMAT_LUMINANCE_ALPHA,i,o,a,s)},t.CreateAlphaTexture=function(e,n,r,i,o,a,s){return void 0===o&&(o=!0),void 0===a&&(a=!1),void 0===s&&(s=_.a.TEXTURE_TRILINEAR_SAMPLINGMODE),new t(e,n,r,_.a.TEXTUREFORMAT_ALPHA,i,o,a,s)},t.CreateRGBTexture=function(e,n,r,i,o,a,s,u){return void 0===o&&(o=!0),void 0===a&&(a=!1),void 0===s&&(s=_.a.TEXTURE_TRILINEAR_SAMPLINGMODE),void 0===u&&(u=_.a.TEXTURETYPE_UNSIGNED_INT),new t(e,n,r,_.a.TEXTUREFORMAT_RGB,i,o,a,s,u)},t.CreateRGBATexture=function(e,n,r,i,o,a,s,u){return void 0===o&&(o=!0),void 0===a&&(a=!1),void 0===s&&(s=_.a.TEXTURE_TRILINEAR_SAMPLINGMODE),void 0===u&&(u=_.a.TEXTURETYPE_UNSIGNED_INT),new t(e,n,r,_.a.TEXTUREFORMAT_RGBA,i,o,a,s,u)},t.CreateRTexture=function(e,n,r,i,o,a,s,u){return void 0===o&&(o=!0),void 0===a&&(a=!1),void 0===s&&(s=Ge.a.TRILINEAR_SAMPLINGMODE),void 0===u&&(u=_.a.TEXTURETYPE_FLOAT),new t(e,n,r,_.a.TEXTUREFORMAT_R,i,o,a,s,u)},t}(Ge.a),Ye=function(){function e(e,t,n){this.name=e,this.id=t,this.bones=new Array,this.needInitialSkinMatrix=!1,this.overrideMesh=null,this._isDirty=!0,this._meshesWithPoseMatrix=new Array,this._identity=o.j.Identity(),this._ranges={},this._lastAbsoluteTransformsUpdateId=-1,this._canUseTextureForBones=!1,this._uniqueId=0,this._numBonesWithLinkedTransformNode=0,this._hasWaitingData=null,this.doNotSerialize=!1,this._useTextureToStoreBoneMatrices=!0,this._animationPropertiesOverride=null,this.onBeforeComputeObservable=new i.c,this.bones=[],this._scene=n||S.a.LastCreatedScene,this._uniqueId=this._scene.getUniqueId(),this._scene.addSkeleton(this),this._isDirty=!0;var r=this._scene.getEngine().getCaps();this._canUseTextureForBones=r.textureFloat&&r.maxVertexTextureImageUnits>0}return Object.defineProperty(e.prototype,"useTextureToStoreBoneMatrices",{get:function(){return this._useTextureToStoreBoneMatrices},set:function(e){this._useTextureToStoreBoneMatrices=e,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationPropertiesOverride",{get:function(){return this._animationPropertiesOverride?this._animationPropertiesOverride:this._scene.animationPropertiesOverride},set:function(e){this._animationPropertiesOverride=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUsingTextureForMatrices",{get:function(){return this.useTextureToStoreBoneMatrices&&this._canUseTextureForBones&&!this.needInitialSkinMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"uniqueId",{get:function(){return this._uniqueId},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"Skeleton"},e.prototype.getChildren=function(){return this.bones.filter(function(e){return!e.getParent()})},e.prototype.getTransformMatrices=function(e){return this.needInitialSkinMatrix&&e._bonesTransformMatrices?e._bonesTransformMatrices:(this._transformMatrices||this.prepare(),this._transformMatrices)},e.prototype.getTransformMatrixTexture=function(){return this._transformMatrixTexture},e.prototype.getScene=function(){return this._scene},e.prototype.toString=function(e){var t="Name: "+this.name+", nBones: "+this.bones.length;if(t+=", nAnimationRanges: "+(this._ranges?Object.keys(this._ranges).length:"none"),e){t+=", Ranges: {";var n=!0;for(var r in this._ranges)n&&(t+=", ",n=!1),t+=r;t+="}"}return t},e.prototype.getBoneIndexByName=function(e){for(var t=0,n=this.bones.length;t<n;t++)if(this.bones[t].name===e)return t;return-1},e.prototype.createAnimationRange=function(e,t,n){if(!this._ranges[e]){this._ranges[e]=new I(e,t,n);for(var r=0,i=this.bones.length;r<i;r++)this.bones[r].animations[0]&&this.bones[r].animations[0].createRange(e,t,n)}},e.prototype.deleteAnimationRange=function(e,t){void 0===t&&(t=!0);for(var n=0,r=this.bones.length;n<r;n++)this.bones[n].animations[0]&&this.bones[n].animations[0].deleteRange(e,t);this._ranges[e]=null},e.prototype.getAnimationRange=function(e){return this._ranges[e]},e.prototype.getAnimationRanges=function(){var e,t=[];for(e in this._ranges)t.push(this._ranges[e]);return t},e.prototype.copyAnimationRange=function(e,t,n){if(void 0===n&&(n=!1),this._ranges[t]||!e.getAnimationRange(t))return!1;var r,i,o=!0,a=this._getHighestAnimationFrame()+1,s={},u=e.bones;for(i=0,r=u.length;i<r;i++)s[u[i].name]=u[i];this.bones.length!==u.length&&(p.a.Warn("copyAnimationRange: this rig has "+this.bones.length+" bones, while source as "+u.length),o=!1);var l=n&&this.dimensionsAtRest&&e.dimensionsAtRest?this.dimensionsAtRest.divide(e.dimensionsAtRest):null;for(i=0,r=this.bones.length;i<r;i++){var c=this.bones[i].name,h=s[c];h?o=o&&this.bones[i].copyAnimationRange(h,t,a,n,l):(p.a.Warn("copyAnimationRange: not same rig, missing source bone "+c),o=!1)}var d=e.getAnimationRange(t);return d&&(this._ranges[t]=new I(t,d.from+a,d.to+a)),o},e.prototype.returnToRest=function(){for(var e=0;e<this.bones.length;e++)this.bones[e].returnToRest()},e.prototype._getHighestAnimationFrame=function(){for(var e=0,t=0,n=this.bones.length;t<n;t++)if(this.bones[t].animations[0]){var r=this.bones[t].animations[0].getHighestFrame();e<r&&(e=r)}return e},e.prototype.beginAnimation=function(e,t,n,r){var i=this.getAnimationRange(e);return i?this._scene.beginAnimation(this,i.from,i.to,t,n,r):null},e.prototype._markAsDirty=function(){this._isDirty=!0},e.prototype._registerMeshWithPoseMatrix=function(e){this._meshesWithPoseMatrix.push(e)},e.prototype._unregisterMeshWithPoseMatrix=function(e){var t=this._meshesWithPoseMatrix.indexOf(e);t>-1&&this._meshesWithPoseMatrix.splice(t,1)},e.prototype._computeTransformMatrices=function(e,t){this.onBeforeComputeObservable.notifyObservers(this);for(var n=0;n<this.bones.length;n++){var r=this.bones[n];r._childUpdateId++;var i=r.getParent();if(i?r.getLocalMatrix().multiplyToRef(i.getWorldMatrix(),r.getWorldMatrix()):t?r.getLocalMatrix().multiplyToRef(t,r.getWorldMatrix()):r.getWorldMatrix().copyFrom(r.getLocalMatrix()),-1!==r._index){var o=null===r._index?n:r._index;r.getInvertedAbsoluteTransform().multiplyToArray(r.getWorldMatrix(),e,16*o)}}this._identity.copyToArray(e,16*this.bones.length)},e.prototype.prepare=function(){if(this._numBonesWithLinkedTransformNode>0)for(var e=0,t=this.bones;e<t.length;e++){var n=t[e];n._linkedTransformNode&&(n._linkedTransformNode.computeWorldMatrix(),n._matrix=n._linkedTransformNode._localMatrix,n.markAsDirty())}if(this._isDirty){if(this.needInitialSkinMatrix)for(var r=0;r<this._meshesWithPoseMatrix.length;r++){var i=this._meshesWithPoseMatrix[r],a=i.getPoseMatrix();if(i._bonesTransformMatrices&&i._bonesTransformMatrices.length===16*(this.bones.length+1)||(i._bonesTransformMatrices=new Float32Array(16*(this.bones.length+1))),this._synchronizedWithMesh!==i){this._synchronizedWithMesh=i;for(var s=0;s<this.bones.length;s++){var u=this.bones[s];u.getParent()||(u.getBaseMatrix().multiplyToRef(a,o.t.Matrix[1]),u._updateDifferenceMatrix(o.t.Matrix[1]))}}this._computeTransformMatrices(i._bonesTransformMatrices,a)}else this._transformMatrices&&this._transformMatrices.length===16*(this.bones.length+1)||(this._transformMatrices=new Float32Array(16*(this.bones.length+1)),this.isUsingTextureForMatrices&&(this._transformMatrixTexture&&this._transformMatrixTexture.dispose(),this._transformMatrixTexture=ze.CreateRGBATexture(this._transformMatrices,4*(this.bones.length+1),1,this._scene,!1,!1,_.a.TEXTURE_NEAREST_SAMPLINGMODE,_.a.TEXTURETYPE_FLOAT))),this._computeTransformMatrices(this._transformMatrices,null),this.isUsingTextureForMatrices&&this._transformMatrixTexture&&this._transformMatrixTexture.update(this._transformMatrices);this._isDirty=!1,this._scene._activeBones.addCount(this.bones.length,!1)}},e.prototype.getAnimatables=function(){if(!this._animatables||this._animatables.length!==this.bones.length){this._animatables=[];for(var e=0;e<this.bones.length;e++)this._animatables.push(this.bones[e])}return this._animatables},e.prototype.clone=function(t,n){var r=new e(t,n||t,this._scene);r.needInitialSkinMatrix=this.needInitialSkinMatrix;for(var i=0;i<this.bones.length;i++){var o=this.bones[i],a=null,s=o.getParent();if(s){var u=this.bones.indexOf(s);a=r.bones[u]}var l=new K(o.name,r,a,o.getBaseMatrix().clone(),o.getRestPose().clone());C.a.DeepCopy(o.animations,l.animations)}if(this._ranges)for(var c in r._ranges={},this._ranges){var h=this._ranges[c];h&&(r._ranges[c]=h.clone())}return this._isDirty=!0,r},e.prototype.enableBlending=function(e){void 0===e&&(e=.01),this.bones.forEach(function(t){t.animations.forEach(function(t){t.enableBlending=!0,t.blendingSpeed=e})})},e.prototype.dispose=function(){this._meshesWithPoseMatrix=[],this.getScene().stopAnimation(this),this.getScene().removeSkeleton(this),this._transformMatrixTexture&&(this._transformMatrixTexture.dispose(),this._transformMatrixTexture=null)},e.prototype.serialize=function(){var e={};e.name=this.name,e.id=this.id,this.dimensionsAtRest&&(e.dimensionsAtRest=this.dimensionsAtRest.asArray()),e.bones=[],e.needInitialSkinMatrix=this.needInitialSkinMatrix;for(var t=0;t<this.bones.length;t++){var n=this.bones[t],r=n.getParent(),i={parentBoneIndex:r?this.bones.indexOf(r):-1,name:n.name,matrix:n.getBaseMatrix().toArray(),rest:n.getRestPose().toArray()};for(var o in e.bones.push(i),n.length&&(i.length=n.length),n.metadata&&(i.metadata=n.metadata),n.animations&&n.animations.length>0&&(i.animation=n.animations[0].serialize()),e.ranges=[],this._ranges){var a=this._ranges[o];if(a){var s={};s.name=o,s.from=a.from,s.to=a.to,e.ranges.push(s)}}}return e},e.Parse=function(t,n){var r,i=new e(t.name,t.id,n);for(t.dimensionsAtRest&&(i.dimensionsAtRest=o.x.FromArray(t.dimensionsAtRest)),i.needInitialSkinMatrix=t.needInitialSkinMatrix,r=0;r<t.bones.length;r++){var a=t.bones[r],s=null;a.parentBoneIndex>-1&&(s=i.bones[a.parentBoneIndex]);var u=a.rest?o.j.FromArray(a.rest):null,l=new K(a.name,i,s,o.j.FromArray(a.matrix),u);null!=a.id&&(l.id=a.id),a.length&&(l.length=a.length),a.metadata&&(l.metadata=a.metadata),a.animation&&l.animations.push(B.Parse(a.animation)),null!=a.linkedTransformNodeId&&(i._hasWaitingData=!0,l._waitingTransformNodeId=a.linkedTransformNodeId)}if(t.ranges)for(r=0;r<t.ranges.length;r++){var c=t.ranges[r];i.createAnimationRange(c.name,c.from,c.to)}return i},e.prototype.computeAbsoluteTransforms=function(e){void 0===e&&(e=!1);var t=this._scene.getRenderId();(this._lastAbsoluteTransformsUpdateId!=t||e)&&(this.bones[0].computeAbsoluteTransforms(),this._lastAbsoluteTransformsUpdateId=t)},e.prototype.getPoseMatrix=function(){var e=null;return this._meshesWithPoseMatrix.length>0&&(e=this._meshesWithPoseMatrix[0].getPoseMatrix()),e},e.prototype.sortBones=function(){for(var e=new Array,t=new Array(this.bones.length),n=0;n<this.bones.length;n++)this._sortBones(n,e,t);this.bones=e},e.prototype._sortBones=function(e,t,n){if(!n[e]){n[e]=!0;var r=this.bones[e];void 0===r._index&&(r._index=e);var i=r.getParent();i&&this._sortBones(this.bones.indexOf(i),t,n),t.push(r)}},e}(),He={},We=function(){function e(e){this.attached={},this.camera=e,this.checkInputs=function(){}}return e.prototype.add=function(e){var t=e.getSimpleName();this.attached[t]?p.a.Warn("camera input of type "+t+" already exists on camera"):(this.attached[t]=e,e.camera=this.camera,e.checkInputs&&(this.checkInputs=this._addCheckInputs(e.checkInputs.bind(e))),this.attachedElement&&e.attachControl(this.attachedElement))},e.prototype.remove=function(e){for(var t in this.attached){var n=this.attached[t];n===e&&(n.detachControl(this.attachedElement),n.camera=null,delete this.attached[t],this.rebuildInputCheck())}},e.prototype.removeByType=function(e){for(var t in this.attached){var n=this.attached[t];n.getClassName()===e&&(n.detachControl(this.attachedElement),n.camera=null,delete this.attached[t],this.rebuildInputCheck())}},e.prototype._addCheckInputs=function(e){var t=this.checkInputs;return function(){t(),e()}},e.prototype.attachInput=function(e){this.attachedElement&&e.attachControl(this.attachedElement,this.noPreventDefault)},e.prototype.attachElement=function(e,t){if(void 0===t&&(t=!1),!this.attachedElement)for(var n in t=!Ne.a.ForceAttachControlToAlwaysPreventDefault&&t,this.attachedElement=e,this.noPreventDefault=t,this.attached)this.attached[n].attachControl(e,t)},e.prototype.detachElement=function(e,t){if(void 0===t&&(t=!1),this.attachedElement===e){for(var n in this.attached)this.attached[n].detachControl(e),t&&(this.attached[n].camera=null);this.attachedElement=null}},e.prototype.rebuildInputCheck=function(){for(var e in this.checkInputs=function(){},this.attached){var t=this.attached[e];t.checkInputs&&(this.checkInputs=this._addCheckInputs(t.checkInputs.bind(t)))}},e.prototype.clear=function(){this.attachedElement&&this.detachElement(this.attachedElement,!0),this.attached={},this.attachedElement=null,this.checkInputs=function(){}},e.prototype.serialize=function(e){var t={};for(var n in this.attached){var r=this.attached[n],i=L.a.Serialize(r);t[r.getClassName()]=i}e.inputsmgr=t},e.prototype.parse=function(e){var t=e.inputsmgr;if(t){for(var n in this.clear(),t)if(i=He[n]){var r=L.a.Parse(function(){return new i},t[n],null);this.add(r)}}else for(var n in this.attached){var i;(i=He[this.attached[n].getClassName()])&&(r=L.a.Parse(function(){return new i},e,null),this.remove(this.attached[n]),this.add(r))}},e}(),Xe=function(e,t){this.x=e,this.y=t},Ke=function(){function e(t,n,r,i,o,a,s){void 0===i&&(i=0),void 0===o&&(o=1),void 0===a&&(a=2),void 0===s&&(s=3),this.id=t,this.index=n,this.browserGamepad=r,this._leftStick={x:0,y:0},this._rightStick={x:0,y:0},this._isConnected=!0,this._invertLeftStickY=!1,this.type=e.GAMEPAD,this._leftStickAxisX=i,this._leftStickAxisY=o,this._rightStickAxisX=a,this._rightStickAxisY=s,this.browserGamepad.axes.length>=2&&(this._leftStick={x:this.browserGamepad.axes[this._leftStickAxisX],y:this.browserGamepad.axes[this._leftStickAxisY]}),this.browserGamepad.axes.length>=4&&(this._rightStick={x:this.browserGamepad.axes[this._rightStickAxisX],y:this.browserGamepad.axes[this._rightStickAxisY]})}return Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._isConnected},enumerable:!0,configurable:!0}),e.prototype.onleftstickchanged=function(e){this._onleftstickchanged=e},e.prototype.onrightstickchanged=function(e){this._onrightstickchanged=e},Object.defineProperty(e.prototype,"leftStick",{get:function(){return this._leftStick},set:function(e){!this._onleftstickchanged||this._leftStick.x===e.x&&this._leftStick.y===e.y||this._onleftstickchanged(e),this._leftStick=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightStick",{get:function(){return this._rightStick},set:function(e){!this._onrightstickchanged||this._rightStick.x===e.x&&this._rightStick.y===e.y||this._onrightstickchanged(e),this._rightStick=e},enumerable:!0,configurable:!0}),e.prototype.update=function(){this._leftStick&&(this.leftStick={x:this.browserGamepad.axes[this._leftStickAxisX],y:this.browserGamepad.axes[this._leftStickAxisY]},this._invertLeftStickY&&(this.leftStick.y*=-1)),this._rightStick&&(this.rightStick={x:this.browserGamepad.axes[this._rightStickAxisX],y:this.browserGamepad.axes[this._rightStickAxisY]})},e.prototype.dispose=function(){},e.GAMEPAD=0,e.GENERIC=1,e.XBOX=2,e.POSE_ENABLED=3,e}(),Qe=function(e){function t(t,n,r){var o=e.call(this,t,n,r)||this;return o.onButtonDownObservable=new i.c,o.onButtonUpObservable=new i.c,o.type=Ke.GENERIC,o._buttons=new Array(r.buttons.length),o}return l.d(t,e),t.prototype.onbuttondown=function(e){this._onbuttondown=e},t.prototype.onbuttonup=function(e){this._onbuttonup=e},t.prototype._setButtonValue=function(e,t,n){return e!==t&&(1===e&&(this._onbuttondown&&this._onbuttondown(n),this.onButtonDownObservable.notifyObservers(n)),0===e&&(this._onbuttonup&&this._onbuttonup(n),this.onButtonUpObservable.notifyObservers(n))),e},t.prototype.update=function(){e.prototype.update.call(this);for(var t=0;t<this._buttons.length;t++)this._buttons[t]=this._setButtonValue(this.browserGamepad.buttons[t].value,this._buttons[t],t)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.onButtonDownObservable.clear(),this.onButtonUpObservable.clear()},t}(Ke),qe=function(){function e(){this.gamepadRotationSensibility=80,this.gamepadMoveSensibility=40}return e.prototype.attachControl=function(e,t){var n=this,r=this.camera.getScene().gamepadManager;this._onGamepadConnectedObserver=r.onGamepadConnectedObservable.add(function(e){e.type!==Ke.POSE_ENABLED&&(n.gamepad&&e.type!==Ke.XBOX||(n.gamepad=e))}),this._onGamepadDisconnectedObserver=r.onGamepadDisconnectedObservable.add(function(e){n.gamepad===e&&(n.gamepad=null)}),this.gamepad=r.getGamepadByType(Ke.XBOX)},e.prototype.detachControl=function(e){this.camera.getScene().gamepadManager.onGamepadConnectedObservable.remove(this._onGamepadConnectedObserver),this.camera.getScene().gamepadManager.onGamepadDisconnectedObservable.remove(this._onGamepadDisconnectedObserver),this.gamepad=null},e.prototype.checkInputs=function(){if(this.gamepad){var e=this.camera,t=this.gamepad.rightStick;if(t){if(0!=t.x){var n=t.x/this.gamepadRotationSensibility;0!=n&&Math.abs(n)>.005&&(e.inertialAlphaOffset+=n)}if(0!=t.y){var r=t.y/this.gamepadRotationSensibility;0!=r&&Math.abs(r)>.005&&(e.inertialBetaOffset+=r)}}var i=this.gamepad.leftStick;if(i&&0!=i.y){var o=i.y/this.gamepadMoveSensibility;0!=o&&Math.abs(o)>.005&&(this.camera.inertialRadiusOffset-=o)}}},e.prototype.getClassName=function(){return"ArcRotateCameraGamepadInput"},e.prototype.getSimpleName=function(){return"gamepad"},l.c([Object(L.c)()],e.prototype,"gamepadRotationSensibility",void 0),l.c([Object(L.c)()],e.prototype,"gamepadMoveSensibility",void 0),e}();He.ArcRotateCameraGamepadInput=qe;var Ze=n(51),Je=function(){function e(){this.keysUp=[38],this.keysDown=[40],this.keysLeft=[37],this.keysRight=[39],this.keysReset=[220],this.panningSensibility=50,this.zoomingSensibility=25,this.useAltToZoom=!0,this.angularSpeed=.01,this._keys=new Array}return e.prototype.attachControl=function(e,t){var n=this;this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add(function(){n._keys=[]}),this._onKeyboardObserver=this._scene.onKeyboardObservable.add(function(e){var r,i=e.event;i.metaKey||(e.type===Ze.a.KEYDOWN?(n._ctrlPressed=i.ctrlKey,n._altPressed=i.altKey,(-1!==n.keysUp.indexOf(i.keyCode)||-1!==n.keysDown.indexOf(i.keyCode)||-1!==n.keysLeft.indexOf(i.keyCode)||-1!==n.keysRight.indexOf(i.keyCode)||-1!==n.keysReset.indexOf(i.keyCode))&&(-1===(r=n._keys.indexOf(i.keyCode))&&n._keys.push(i.keyCode),i.preventDefault&&(t||i.preventDefault()))):-1===n.keysUp.indexOf(i.keyCode)&&-1===n.keysDown.indexOf(i.keyCode)&&-1===n.keysLeft.indexOf(i.keyCode)&&-1===n.keysRight.indexOf(i.keyCode)&&-1===n.keysReset.indexOf(i.keyCode)||((r=n._keys.indexOf(i.keyCode))>=0&&n._keys.splice(r,1),i.preventDefault&&(t||i.preventDefault())))}))},e.prototype.detachControl=function(e){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys=[]},e.prototype.checkInputs=function(){if(this._onKeyboardObserver)for(var e=this.camera,t=0;t<this._keys.length;t++){var n=this._keys[t];-1!==this.keysLeft.indexOf(n)?this._ctrlPressed&&this.camera._useCtrlForPanning?e.inertialPanningX-=1/this.panningSensibility:e.inertialAlphaOffset-=this.angularSpeed:-1!==this.keysUp.indexOf(n)?this._ctrlPressed&&this.camera._useCtrlForPanning?e.inertialPanningY+=1/this.panningSensibility:this._altPressed&&this.useAltToZoom?e.inertialRadiusOffset+=1/this.zoomingSensibility:e.inertialBetaOffset-=this.angularSpeed:-1!==this.keysRight.indexOf(n)?this._ctrlPressed&&this.camera._useCtrlForPanning?e.inertialPanningX+=1/this.panningSensibility:e.inertialAlphaOffset+=this.angularSpeed:-1!==this.keysDown.indexOf(n)?this._ctrlPressed&&this.camera._useCtrlForPanning?e.inertialPanningY-=1/this.panningSensibility:this._altPressed&&this.useAltToZoom?e.inertialRadiusOffset-=1/this.zoomingSensibility:e.inertialBetaOffset+=this.angularSpeed:-1!==this.keysReset.indexOf(n)&&e.useInputToRestoreState&&e.restoreState()}},e.prototype.getClassName=function(){return"ArcRotateCameraKeyboardMoveInput"},e.prototype.getSimpleName=function(){return"keyboard"},l.c([Object(L.c)()],e.prototype,"keysUp",void 0),l.c([Object(L.c)()],e.prototype,"keysDown",void 0),l.c([Object(L.c)()],e.prototype,"keysLeft",void 0),l.c([Object(L.c)()],e.prototype,"keysRight",void 0),l.c([Object(L.c)()],e.prototype,"keysReset",void 0),l.c([Object(L.c)()],e.prototype,"panningSensibility",void 0),l.c([Object(L.c)()],e.prototype,"zoomingSensibility",void 0),l.c([Object(L.c)()],e.prototype,"useAltToZoom",void 0),l.c([Object(L.c)()],e.prototype,"angularSpeed",void 0),e}();He.ArcRotateCameraKeyboardMoveInput=Je;var $e=function(){function e(){this.wheelPrecision=3,this.wheelDeltaPercentage=0}return e.prototype.computeDeltaFromMouseWheelLegacyEvent=function(e,t){var n=.01*e.wheelDelta*this.wheelDeltaPercentage*t;return e.wheelDelta>0?n/(1+this.wheelDeltaPercentage):n*(1+this.wheelDeltaPercentage)},e.prototype.attachControl=function(e,t){var n=this;this._wheel=function(e,r){if(e.type===Se.a.POINTERWHEEL){var i=e.event,o=0,a=i;if(a.wheelDelta)if(n.wheelDeltaPercentage){if((o=n.computeDeltaFromMouseWheelLegacyEvent(a,n.camera.radius))>0){for(var s=n.camera.radius,u=n.camera.inertialRadiusOffset+o,l=0;l<20&&Math.abs(u)>.001;l++)s-=u,u*=n.camera.inertia;s=w.a.Clamp(s,0,Number.MAX_VALUE),o=n.computeDeltaFromMouseWheelLegacyEvent(a,s)}}else o=a.wheelDelta/(40*n.wheelPrecision);else o=-(i.deltaY||i.detail)/n.wheelPrecision;o&&(n.camera.inertialRadiusOffset+=o),i.preventDefault&&(t||i.preventDefault())}},this._observer=this.camera.getScene().onPointerObservable.add(this._wheel,Se.a.POINTERWHEEL)},e.prototype.detachControl=function(e){this._observer&&e&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null,this._wheel=null)},e.prototype.getClassName=function(){return"ArcRotateCameraMouseWheelInput"},e.prototype.getSimpleName=function(){return"mousewheel"},l.c([Object(L.c)()],e.prototype,"wheelPrecision",void 0),l.c([Object(L.c)()],e.prototype,"wheelDeltaPercentage",void 0),e}();He.ArcRotateCameraMouseWheelInput=$e;var et=function(){function e(){this.buttons=[0,1,2]}return e.prototype.attachControl=function(e,t){var n=this,r=this.camera.getEngine(),i=0,o=null;this.pointA=null,this.pointB=null,this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._buttonsPressed=0,this._pointerInput=function(a,s){var u=a.event,l="touch"===u.pointerType;if(!r.isInVRExclusivePointerMode&&(a.type===Se.a.POINTERMOVE||-1!==n.buttons.indexOf(u.button))){var c=u.srcElement||u.target;if(n._altKey=u.altKey,n._ctrlKey=u.ctrlKey,n._metaKey=u.metaKey,n._shiftKey=u.shiftKey,n._buttonsPressed=u.buttons,r.isPointerLock){var h=u.movementX||u.mozMovementX||u.webkitMovementX||u.msMovementX||0,d=u.movementY||u.mozMovementY||u.webkitMovementY||u.msMovementY||0;n.onTouch(null,h,d),n.pointA=null,n.pointB=null}else if(a.type===Se.a.POINTERDOWN&&c){try{c.setPointerCapture(u.pointerId)}catch(e){}null===n.pointA?n.pointA={x:u.clientX,y:u.clientY,pointerId:u.pointerId,type:u.pointerType}:null===n.pointB&&(n.pointB={x:u.clientX,y:u.clientY,pointerId:u.pointerId,type:u.pointerType}),n.onButtonDown(u),t||(u.preventDefault(),e.focus())}else if(a.type===Se.a.POINTERDOUBLETAP)n.onDoubleTap(u.pointerType);else if(a.type===Se.a.POINTERUP&&c){try{c.releasePointerCapture(u.pointerId)}catch(e){}l||(n.pointB=null),r._badOS?n.pointA=n.pointB=null:n.pointB&&n.pointA&&n.pointA.pointerId==u.pointerId?(n.pointA=n.pointB,n.pointB=null):n.pointA&&n.pointB&&n.pointB.pointerId==u.pointerId?n.pointB=null:n.pointA=n.pointB=null,(0!==i||o)&&(n.onMultiTouch(n.pointA,n.pointB,i,0,o,null),i=0,o=null),n.onButtonUp(u),t||u.preventDefault()}else if(a.type===Se.a.POINTERMOVE)if(t||u.preventDefault(),n.pointA&&null===n.pointB)n.onTouch(n.pointA,h=u.clientX-n.pointA.x,d=u.clientY-n.pointA.y),n.pointA.x=u.clientX,n.pointA.y=u.clientY;else if(n.pointA&&n.pointB){var f=n.pointA.pointerId===u.pointerId?n.pointA:n.pointB;f.x=u.clientX,f.y=u.clientY;var p=n.pointA.x-n.pointB.x,_=n.pointA.y-n.pointB.y,m=p*p+_*_,g={x:(n.pointA.x+n.pointB.x)/2,y:(n.pointA.y+n.pointB.y)/2,pointerId:u.pointerId,type:a.type};n.onMultiTouch(n.pointA,n.pointB,i,m,o,g),o=g,i=m}}},this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,Se.a.POINTERDOWN|Se.a.POINTERUP|Se.a.POINTERMOVE),this._onLostFocus=function(){n.pointA=n.pointB=null,i=0,o=null,n.onLostFocus()},e.addEventListener("contextmenu",this.onContextMenu.bind(this),!1),ye.h.RegisterTopRootEvents([{name:"blur",handler:this._onLostFocus}])},e.prototype.detachControl=function(e){this._onLostFocus&&ye.h.UnregisterTopRootEvents([{name:"blur",handler:this._onLostFocus}]),e&&this._observer&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null,this.onContextMenu&&e.removeEventListener("contextmenu",this.onContextMenu),this._onLostFocus=null),this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._buttonsPressed=0},e.prototype.getClassName=function(){return"BaseCameraPointersInput"},e.prototype.getSimpleName=function(){return"pointers"},e.prototype.onDoubleTap=function(e){},e.prototype.onTouch=function(e,t,n){},e.prototype.onMultiTouch=function(e,t,n,r,i,o){},e.prototype.onContextMenu=function(e){e.preventDefault()},e.prototype.onButtonDown=function(e){},e.prototype.onButtonUp=function(e){},e.prototype.onLostFocus=function(){},l.c([Object(L.c)()],e.prototype,"buttons",void 0),e}(),tt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buttons=[0,1,2],t.angularSensibilityX=1e3,t.angularSensibilityY=1e3,t.pinchPrecision=12,t.pinchDeltaPercentage=0,t.panningSensibility=1e3,t.multiTouchPanning=!0,t.multiTouchPanAndZoom=!0,t.pinchInwards=!0,t._isPanClick=!1,t._twoFingerActivityCount=0,t._isPinching=!1,t}return l.d(t,e),t.prototype.getClassName=function(){return"ArcRotateCameraPointersInput"},t.prototype.onTouch=function(e,t,n){0!==this.panningSensibility&&(this._ctrlKey&&this.camera._useCtrlForPanning||this._isPanClick)?(this.camera.inertialPanningX+=-t/this.panningSensibility,this.camera.inertialPanningY+=n/this.panningSensibility):(this.camera.inertialAlphaOffset-=t/this.angularSensibilityX,this.camera.inertialBetaOffset-=n/this.angularSensibilityY)},t.prototype.onDoubleTap=function(e){this.camera.useInputToRestoreState&&this.camera.restoreState()},t.prototype.onMultiTouch=function(e,t,n,r,i,o){if(!(0===n&&null===i||0===r&&null===o)){var a=this.pinchInwards?1:-1;if(this.multiTouchPanAndZoom){if(this.camera.inertialRadiusOffset+=this.pinchDeltaPercentage?.001*(r-n)*this.camera.radius*this.pinchDeltaPercentage:(r-n)/(this.pinchPrecision*a*(this.angularSensibilityX+this.angularSensibilityY)/2),0!==this.panningSensibility&&i&&o){var s=o.x-i.x,u=o.y-i.y;this.camera.inertialPanningX+=-s/this.panningSensibility,this.camera.inertialPanningY+=u/this.panningSensibility}}else{this._twoFingerActivityCount++;var l=Math.sqrt(n),c=Math.sqrt(r);this._isPinching||this._twoFingerActivityCount<20&&Math.abs(c-l)>this.camera.pinchToPanMaxDistance?(this.camera.inertialRadiusOffset+=this.pinchDeltaPercentage?.001*(r-n)*this.camera.radius*this.pinchDeltaPercentage:(r-n)/(this.pinchPrecision*a*(this.angularSensibilityX+this.angularSensibilityY)/2),this._isPinching=!0):0!==this.panningSensibility&&this.multiTouchPanning&&o&&i&&(u=o.y-i.y,this.camera.inertialPanningX+=-(s=o.x-i.x)/this.panningSensibility,this.camera.inertialPanningY+=u/this.panningSensibility)}}},t.prototype.onButtonDown=function(e){this._isPanClick=e.button===this.camera._panningMouseButton},t.prototype.onButtonUp=function(e){this._twoFingerActivityCount=0,this._isPinching=!1},t.prototype.onLostFocus=function(){this._isPanClick=!1,this._twoFingerActivityCount=0,this._isPinching=!1},l.c([Object(L.c)()],t.prototype,"buttons",void 0),l.c([Object(L.c)()],t.prototype,"angularSensibilityX",void 0),l.c([Object(L.c)()],t.prototype,"angularSensibilityY",void 0),l.c([Object(L.c)()],t.prototype,"pinchPrecision",void 0),l.c([Object(L.c)()],t.prototype,"pinchDeltaPercentage",void 0),l.c([Object(L.c)()],t.prototype,"panningSensibility",void 0),l.c([Object(L.c)()],t.prototype,"multiTouchPanning",void 0),l.c([Object(L.c)()],t.prototype,"multiTouchPanAndZoom",void 0),t}(et);He.ArcRotateCameraPointersInput=tt;var nt=function(e){function t(t){return e.call(this,t)||this}return l.d(t,e),t.prototype.addMouseWheel=function(){return this.add(new $e),this},t.prototype.addPointers=function(){return this.add(new tt),this},t.prototype.addKeyboard=function(){return this.add(new Je),this},t}(We);nt.prototype.addVRDeviceOrientation=function(){return this.add(new rt),this};var rt=function(){function e(){this.alphaCorrection=1,this.gammaCorrection=1,this._alpha=0,this._gamma=0,this._dirty=!1,this._deviceOrientationHandler=this._onOrientationEvent.bind(this)}return e.prototype.attachControl=function(e,t){this.camera.attachControl(e,t),window.addEventListener("deviceorientation",this._deviceOrientationHandler)},e.prototype._onOrientationEvent=function(e){null!==e.alpha&&(this._alpha=(0|+e.alpha)*this.alphaCorrection),null!==e.gamma&&(this._gamma=(0|+e.gamma)*this.gammaCorrection),this._dirty=!0},e.prototype.checkInputs=function(){this._dirty&&(this._dirty=!1,this._gamma<0&&(this._gamma=180+this._gamma),this.camera.alpha=-this._alpha/180*Math.PI%Math.PI*2,this.camera.beta=this._gamma/180*Math.PI)},e.prototype.detachControl=function(e){window.removeEventListener("deviceorientation",this._deviceOrientationHandler)},e.prototype.getClassName=function(){return"ArcRotateCameraVRDeviceOrientationInput"},e.prototype.getSimpleName=function(){return"VRDeviceOrientation"},e}();He.ArcRotateCameraVRDeviceOrientationInput=rt;var it=function(){function e(){this.keysForward=[87],this.keysBackward=[83],this.keysUp=[69],this.keysDown=[81],this.keysRight=[68],this.keysLeft=[65],this._keys=new Array}return e.prototype.attachControl=function(e,t){var n=this;this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add(function(){n._keys=[]}),this._onKeyboardObserver=this._scene.onKeyboardObservable.add(function(e){var r,i=e.event;e.type===Ze.a.KEYDOWN?-1===n.keysForward.indexOf(i.keyCode)&&-1===n.keysBackward.indexOf(i.keyCode)&&-1===n.keysUp.indexOf(i.keyCode)&&-1===n.keysDown.indexOf(i.keyCode)&&-1===n.keysLeft.indexOf(i.keyCode)&&-1===n.keysRight.indexOf(i.keyCode)||(-1===(r=n._keys.indexOf(i.keyCode))&&n._keys.push(i.keyCode),t||i.preventDefault()):-1===n.keysForward.indexOf(i.keyCode)&&-1===n.keysBackward.indexOf(i.keyCode)&&-1===n.keysUp.indexOf(i.keyCode)&&-1===n.keysDown.indexOf(i.keyCode)&&-1===n.keysLeft.indexOf(i.keyCode)&&-1===n.keysRight.indexOf(i.keyCode)||((r=n._keys.indexOf(i.keyCode))>=0&&n._keys.splice(r,1),t||i.preventDefault())}))},e.prototype.detachControl=function(e){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys=[]},e.prototype.getClassName=function(){return"FlyCameraKeyboardInput"},e.prototype._onLostFocus=function(e){this._keys=[]},e.prototype.getSimpleName=function(){return"keyboard"},e.prototype.checkInputs=function(){if(this._onKeyboardObserver)for(var e=this.camera,t=0;t<this._keys.length;t++){var n=this._keys[t],r=e._computeLocalCameraSpeed();-1!==this.keysForward.indexOf(n)?e._localDirection.copyFromFloats(0,0,r):-1!==this.keysBackward.indexOf(n)?e._localDirection.copyFromFloats(0,0,-r):-1!==this.keysUp.indexOf(n)?e._localDirection.copyFromFloats(0,r,0):-1!==this.keysDown.indexOf(n)?e._localDirection.copyFromFloats(0,-r,0):-1!==this.keysRight.indexOf(n)?e._localDirection.copyFromFloats(r,0,0):-1!==this.keysLeft.indexOf(n)&&e._localDirection.copyFromFloats(-r,0,0),e.getScene().useRightHandedSystem&&(e._localDirection.z*=-1),e.getViewMatrix().invertToRef(e._cameraTransformMatrix),o.x.TransformNormalToRef(e._localDirection,e._cameraTransformMatrix,e._transformedDirection),e.cameraDirection.addInPlace(e._transformedDirection)}},l.c([Object(L.c)()],e.prototype,"keysForward",void 0),l.c([Object(L.c)()],e.prototype,"keysBackward",void 0),l.c([Object(L.c)()],e.prototype,"keysUp",void 0),l.c([Object(L.c)()],e.prototype,"keysDown",void 0),l.c([Object(L.c)()],e.prototype,"keysRight",void 0),l.c([Object(L.c)()],e.prototype,"keysLeft",void 0),e}();He.FlyCameraKeyboardInput=it;var ot=function(){function e(e){void 0===e&&(e=!0),this.buttons=[0,1,2],this.buttonsYaw=[-1,0,1],this.buttonsPitch=[-1,0,1],this.buttonsRoll=[2],this.activeButton=-1,this.angularSensibility=1e3,this.previousPosition=null}return e.prototype.attachControl=function(e,t){var n=this;this.element=e,this.noPreventDefault=t,this._observer=this.camera.getScene().onPointerObservable.add(function(e,t){n._pointerInput(e,t)},Se.a.POINTERDOWN|Se.a.POINTERUP|Se.a.POINTERMOVE),this._rollObserver=this.camera.getScene().onBeforeRenderObservable.add(function(){n.camera.rollCorrect&&n.camera.restoreRoll(n.camera.rollCorrect)}),this._mousemoveCallback=function(e){n._onMouseMove(e)},e.addEventListener("mousemove",this._mousemoveCallback,!1)},e.prototype.detachControl=function(e){this._observer&&e&&(this.camera.getScene().onPointerObservable.remove(this._observer),this.camera.getScene().onBeforeRenderObservable.remove(this._rollObserver),this._mousemoveCallback&&e.removeEventListener("mousemove",this._mousemoveCallback),this._observer=null,this._rollObserver=null,this.previousPosition=null,this.noPreventDefault=void 0)},e.prototype.getClassName=function(){return"FlyCameraMouseInput"},e.prototype.getSimpleName=function(){return"mouse"},e.prototype._pointerInput=function(e,t){var n=e.event,r=this.camera.getEngine();if(!r.isInVRExclusivePointerMode&&(this.touchEnabled||"touch"!==n.pointerType)&&(e.type===Se.a.POINTERMOVE||-1!==this.buttons.indexOf(n.button))){var i=n.srcElement||n.target;if(e.type===Se.a.POINTERDOWN&&i){try{i.setPointerCapture(n.pointerId)}catch(n){}this.previousPosition={x:n.clientX,y:n.clientY},this.activeButton=n.button,this.noPreventDefault||(n.preventDefault(),this.element.focus())}else if(e.type===Se.a.POINTERUP&&i){try{i.releasePointerCapture(n.pointerId)}catch(n){}this.activeButton=-1,this.previousPosition=null,this.noPreventDefault||n.preventDefault()}else if(e.type===Se.a.POINTERMOVE){if(!this.previousPosition||r.isPointerLock)return;this.rotateCamera(n.clientX-this.previousPosition.x,n.clientY-this.previousPosition.y),this.previousPosition={x:n.clientX,y:n.clientY},this.noPreventDefault||n.preventDefault()}}},e.prototype._onMouseMove=function(e){var t=this.camera.getEngine();t.isPointerLock&&!t.isInVRExclusivePointerMode&&(this.rotateCamera(e.movementX||e.mozMovementX||e.webkitMovementX||e.msMovementX||0,e.movementY||e.mozMovementY||e.webkitMovementY||e.msMovementY||0),this.previousPosition=null,this.noPreventDefault||e.preventDefault())},e.prototype.rotateCamera=function(e,t){var n=this,r=this.camera;this.camera.getScene().useRightHandedSystem&&(e*=-1),r.parent&&r.parent._getWorldMatrixDeterminant()<0&&(e*=-1);var i,a=e/this.angularSensibility,s=t/this.angularSensibility,u=o.q.RotationYawPitchRoll(r.rotation.y,r.rotation.x,r.rotation.z);if(this.buttonsPitch.some(function(e){return e===n.activeButton})&&(i=o.q.RotationAxis(o.c.X,s),u.multiplyInPlace(i)),this.buttonsYaw.some(function(e){return e===n.activeButton})){i=o.q.RotationAxis(o.c.Y,a),u.multiplyInPlace(i);var l=r.bankedTurnLimit+r._trackRoll;r.bankedTurn&&-l<r.rotation.z&&r.rotation.z<l&&(i=o.q.RotationAxis(o.c.Z,r.bankedTurnMultiplier*-a),u.multiplyInPlace(i))}this.buttonsRoll.some(function(e){return e===n.activeButton})&&(i=o.q.RotationAxis(o.c.Z,-a),r._trackRoll-=a,u.multiplyInPlace(i)),u.toEulerAnglesToRef(r.rotation)},l.c([Object(L.c)()],e.prototype,"buttons",void 0),l.c([Object(L.c)()],e.prototype,"angularSensibility",void 0),e}();He.FlyCameraMouseInput=ot;var at=function(){function e(){this.keysHeightOffsetIncr=[38],this.keysHeightOffsetDecr=[40],this.keysHeightOffsetModifierAlt=!1,this.keysHeightOffsetModifierCtrl=!1,this.keysHeightOffsetModifierShift=!1,this.keysRotationOffsetIncr=[37],this.keysRotationOffsetDecr=[39],this.keysRotationOffsetModifierAlt=!1,this.keysRotationOffsetModifierCtrl=!1,this.keysRotationOffsetModifierShift=!1,this.keysRadiusIncr=[40],this.keysRadiusDecr=[38],this.keysRadiusModifierAlt=!0,this.keysRadiusModifierCtrl=!1,this.keysRadiusModifierShift=!1,this.heightSensibility=1,this.rotationSensibility=1,this.radiusSensibility=1,this._keys=new Array}return e.prototype.attachControl=function(e,t){var n=this;this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add(function(){n._keys=[]}),this._onKeyboardObserver=this._scene.onKeyboardObservable.add(function(e){var r,i=e.event;i.metaKey||(e.type===Ze.a.KEYDOWN?(n._ctrlPressed=i.ctrlKey,n._altPressed=i.altKey,n._shiftPressed=i.shiftKey,(-1!==n.keysHeightOffsetIncr.indexOf(i.keyCode)||-1!==n.keysHeightOffsetDecr.indexOf(i.keyCode)||-1!==n.keysRotationOffsetIncr.indexOf(i.keyCode)||-1!==n.keysRotationOffsetDecr.indexOf(i.keyCode)||-1!==n.keysRadiusIncr.indexOf(i.keyCode)||-1!==n.keysRadiusDecr.indexOf(i.keyCode))&&(-1===(r=n._keys.indexOf(i.keyCode))&&n._keys.push(i.keyCode),i.preventDefault&&(t||i.preventDefault()))):-1===n.keysHeightOffsetIncr.indexOf(i.keyCode)&&-1===n.keysHeightOffsetDecr.indexOf(i.keyCode)&&-1===n.keysRotationOffsetIncr.indexOf(i.keyCode)&&-1===n.keysRotationOffsetDecr.indexOf(i.keyCode)&&-1===n.keysRadiusIncr.indexOf(i.keyCode)&&-1===n.keysRadiusDecr.indexOf(i.keyCode)||((r=n._keys.indexOf(i.keyCode))>=0&&n._keys.splice(r,1),i.preventDefault&&(t||i.preventDefault())))}))},e.prototype.detachControl=function(e){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys=[]},e.prototype.checkInputs=function(){var e=this;this._onKeyboardObserver&&this._keys.forEach(function(t){-1!==e.keysHeightOffsetIncr.indexOf(t)&&e._modifierHeightOffset()?e.camera.heightOffset+=e.heightSensibility:-1!==e.keysHeightOffsetDecr.indexOf(t)&&e._modifierHeightOffset()?e.camera.heightOffset-=e.heightSensibility:-1!==e.keysRotationOffsetIncr.indexOf(t)&&e._modifierRotationOffset()?(e.camera.rotationOffset+=e.rotationSensibility,e.camera.rotationOffset%=360):-1!==e.keysRotationOffsetDecr.indexOf(t)&&e._modifierRotationOffset()?(e.camera.rotationOffset-=e.rotationSensibility,e.camera.rotationOffset%=360):-1!==e.keysRadiusIncr.indexOf(t)&&e._modifierRadius()?e.camera.radius+=e.radiusSensibility:-1!==e.keysRadiusDecr.indexOf(t)&&e._modifierRadius()&&(e.camera.radius-=e.radiusSensibility)})},e.prototype.getClassName=function(){return"FollowCameraKeyboardMoveInput"},e.prototype.getSimpleName=function(){return"keyboard"},e.prototype._modifierHeightOffset=function(){return this.keysHeightOffsetModifierAlt===this._altPressed&&this.keysHeightOffsetModifierCtrl===this._ctrlPressed&&this.keysHeightOffsetModifierShift===this._shiftPressed},e.prototype._modifierRotationOffset=function(){return this.keysRotationOffsetModifierAlt===this._altPressed&&this.keysRotationOffsetModifierCtrl===this._ctrlPressed&&this.keysRotationOffsetModifierShift===this._shiftPressed},e.prototype._modifierRadius=function(){return this.keysRadiusModifierAlt===this._altPressed&&this.keysRadiusModifierCtrl===this._ctrlPressed&&this.keysRadiusModifierShift===this._shiftPressed},l.c([Object(L.c)()],e.prototype,"keysHeightOffsetIncr",void 0),l.c([Object(L.c)()],e.prototype,"keysHeightOffsetDecr",void 0),l.c([Object(L.c)()],e.prototype,"keysHeightOffsetModifierAlt",void 0),l.c([Object(L.c)()],e.prototype,"keysHeightOffsetModifierCtrl",void 0),l.c([Object(L.c)()],e.prototype,"keysHeightOffsetModifierShift",void 0),l.c([Object(L.c)()],e.prototype,"keysRotationOffsetIncr",void 0),l.c([Object(L.c)()],e.prototype,"keysRotationOffsetDecr",void 0),l.c([Object(L.c)()],e.prototype,"keysRotationOffsetModifierAlt",void 0),l.c([Object(L.c)()],e.prototype,"keysRotationOffsetModifierCtrl",void 0),l.c([Object(L.c)()],e.prototype,"keysRotationOffsetModifierShift",void 0),l.c([Object(L.c)()],e.prototype,"keysRadiusIncr",void 0),l.c([Object(L.c)()],e.prototype,"keysRadiusDecr",void 0),l.c([Object(L.c)()],e.prototype,"keysRadiusModifierAlt",void 0),l.c([Object(L.c)()],e.prototype,"keysRadiusModifierCtrl",void 0),l.c([Object(L.c)()],e.prototype,"keysRadiusModifierShift",void 0),l.c([Object(L.c)()],e.prototype,"heightSensibility",void 0),l.c([Object(L.c)()],e.prototype,"rotationSensibility",void 0),l.c([Object(L.c)()],e.prototype,"radiusSensibility",void 0),e}();He.FollowCameraKeyboardMoveInput=at;var st=function(){function e(){this.axisControlRadius=!0,this.axisControlHeight=!1,this.axisControlRotation=!1,this.wheelPrecision=3,this.wheelDeltaPercentage=0}return e.prototype.attachControl=function(e,t){var n=this;this._wheel=function(e,r){if(e.type===Se.a.POINTERWHEEL){var i=e.event,o=0,a=Math.max(-1,Math.min(1,i.deltaY||i.wheelDelta||-i.detail));n.wheelDeltaPercentage?(console.assert(n.axisControlRadius+n.axisControlHeight+n.axisControlRotation<=1,"wheelDeltaPercentage only usable when mouse wheel controlls ONE axis. Currently enabled: axisControlRadius: "+n.axisControlRadius+", axisControlHeightOffset: "+n.axisControlHeight+", axisControlRotationOffset: "+n.axisControlRotation),n.axisControlRadius?o=.01*a*n.wheelDeltaPercentage*n.camera.radius:n.axisControlHeight?o=.01*a*n.wheelDeltaPercentage*n.camera.heightOffset:n.axisControlRotation&&(o=.01*a*n.wheelDeltaPercentage*n.camera.rotationOffset)):o=a*n.wheelPrecision,o&&(n.axisControlRadius?n.camera.radius+=o:n.axisControlHeight?n.camera.heightOffset-=o:n.axisControlRotation&&(n.camera.rotationOffset-=o)),i.preventDefault&&(t||i.preventDefault())}},this._observer=this.camera.getScene().onPointerObservable.add(this._wheel,Se.a.POINTERWHEEL)},e.prototype.detachControl=function(e){this._observer&&e&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null,this._wheel=null)},e.prototype.getClassName=function(){return"ArcRotateCameraMouseWheelInput"},e.prototype.getSimpleName=function(){return"mousewheel"},l.c([Object(L.c)()],e.prototype,"axisControlRadius",void 0),l.c([Object(L.c)()],e.prototype,"axisControlHeight",void 0),l.c([Object(L.c)()],e.prototype,"axisControlRotation",void 0),l.c([Object(L.c)()],e.prototype,"wheelPrecision",void 0),l.c([Object(L.c)()],e.prototype,"wheelDeltaPercentage",void 0),e}();He.FollowCameraMouseWheelInput=st;var ut=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.angularSensibilityX=1,t.angularSensibilityY=1,t.pinchPrecision=1e4,t.pinchDeltaPercentage=0,t.axisXControlRadius=!1,t.axisXControlHeight=!1,t.axisXControlRotation=!0,t.axisYControlRadius=!1,t.axisYControlHeight=!0,t.axisYControlRotation=!1,t.axisPinchControlRadius=!0,t.axisPinchControlHeight=!1,t.axisPinchControlRotation=!1,t.warningEnable=!0,t._warningCounter=0,t}return l.d(t,e),t.prototype.getClassName=function(){return"FollowCameraPointersInput"},t.prototype.onTouch=function(e,t,n){this._warning(),this.axisXControlRotation?this.camera.rotationOffset+=t/this.angularSensibilityX:this.axisYControlRotation&&(this.camera.rotationOffset+=n/this.angularSensibilityX),this.axisXControlHeight?this.camera.heightOffset+=t/this.angularSensibilityY:this.axisYControlHeight&&(this.camera.heightOffset+=n/this.angularSensibilityY),this.axisXControlRadius?this.camera.radius-=t/this.angularSensibilityY:this.axisYControlRadius&&(this.camera.radius-=n/this.angularSensibilityY)},t.prototype.onMultiTouch=function(e,t,n,r,i,o){if(!(0===n&&null===i||0===r&&null===o)){var a=(r-n)/(this.pinchPrecision*(this.angularSensibilityX+this.angularSensibilityY)/2);this.pinchDeltaPercentage?(a*=.01*this.pinchDeltaPercentage,this.axisPinchControlRotation&&(this.camera.rotationOffset+=a*this.camera.rotationOffset),this.axisPinchControlHeight&&(this.camera.heightOffset+=a*this.camera.heightOffset),this.axisPinchControlRadius&&(this.camera.radius-=a*this.camera.radius)):(this.axisPinchControlRotation&&(this.camera.rotationOffset+=a),this.axisPinchControlHeight&&(this.camera.heightOffset+=a),this.axisPinchControlRadius&&(this.camera.radius-=a))}},t.prototype._warning=function(){if(this.warningEnable&&this._warningCounter++%100==0){var e="It probably only makes sense to control ONE camera property with each pointer axis. Set 'warningEnable = false' if you are sure. Currently enabled: ";console.assert(this.axisXControlRotation+this.axisXControlHeight+this.axisXControlRadius<=1,e+"axisXControlRotation: "+this.axisXControlRotation+", axisXControlHeight: "+this.axisXControlHeight+", axisXControlRadius: "+this.axisXControlRadius),console.assert(this.axisYControlRotation+this.axisYControlHeight+this.axisYControlRadius<=1,e+"axisYControlRotation: "+this.axisYControlRotation+", axisYControlHeight: "+this.axisYControlHeight+", axisYControlRadius: "+this.axisYControlRadius),console.assert(this.axisPinchControlRotation+this.axisPinchControlHeight+this.axisPinchControlRadius<=1,e+"axisPinchControlRotation: "+this.axisPinchControlRotation+", axisPinchControlHeight: "+this.axisPinchControlHeight+", axisPinchControlRadius: "+this.axisPinchControlRadius)}},l.c([Object(L.c)()],t.prototype,"angularSensibilityX",void 0),l.c([Object(L.c)()],t.prototype,"angularSensibilityY",void 0),l.c([Object(L.c)()],t.prototype,"pinchPrecision",void 0),l.c([Object(L.c)()],t.prototype,"pinchDeltaPercentage",void 0),l.c([Object(L.c)()],t.prototype,"axisXControlRadius",void 0),l.c([Object(L.c)()],t.prototype,"axisXControlHeight",void 0),l.c([Object(L.c)()],t.prototype,"axisXControlRotation",void 0),l.c([Object(L.c)()],t.prototype,"axisYControlRadius",void 0),l.c([Object(L.c)()],t.prototype,"axisYControlHeight",void 0),l.c([Object(L.c)()],t.prototype,"axisYControlRotation",void 0),l.c([Object(L.c)()],t.prototype,"axisPinchControlRadius",void 0),l.c([Object(L.c)()],t.prototype,"axisPinchControlHeight",void 0),l.c([Object(L.c)()],t.prototype,"axisPinchControlRotation",void 0),t}(et);He.FollowCameraPointersInput=ut;var lt=function(){function e(){this.keysUp=[38],this.keysDown=[40],this.keysLeft=[37],this.keysRight=[39],this._keys=new Array}return e.prototype.attachControl=function(e,t){var n=this;this._onCanvasBlurObserver||(this._scene=this.camera.getScene(),this._engine=this._scene.getEngine(),this._onCanvasBlurObserver=this._engine.onCanvasBlurObservable.add(function(){n._keys=[]}),this._onKeyboardObserver=this._scene.onKeyboardObservable.add(function(e){var r,i=e.event;i.metaKey||(e.type===Ze.a.KEYDOWN?-1===n.keysUp.indexOf(i.keyCode)&&-1===n.keysDown.indexOf(i.keyCode)&&-1===n.keysLeft.indexOf(i.keyCode)&&-1===n.keysRight.indexOf(i.keyCode)||(-1===(r=n._keys.indexOf(i.keyCode))&&n._keys.push(i.keyCode),t||i.preventDefault()):-1===n.keysUp.indexOf(i.keyCode)&&-1===n.keysDown.indexOf(i.keyCode)&&-1===n.keysLeft.indexOf(i.keyCode)&&-1===n.keysRight.indexOf(i.keyCode)||((r=n._keys.indexOf(i.keyCode))>=0&&n._keys.splice(r,1),t||i.preventDefault()))}))},e.prototype.detachControl=function(e){this._scene&&(this._onKeyboardObserver&&this._scene.onKeyboardObservable.remove(this._onKeyboardObserver),this._onCanvasBlurObserver&&this._engine.onCanvasBlurObservable.remove(this._onCanvasBlurObserver),this._onKeyboardObserver=null,this._onCanvasBlurObserver=null),this._keys=[]},e.prototype.checkInputs=function(){if(this._onKeyboardObserver)for(var e=this.camera,t=0;t<this._keys.length;t++){var n=this._keys[t],r=e._computeLocalCameraSpeed();-1!==this.keysLeft.indexOf(n)?e._localDirection.copyFromFloats(-r,0,0):-1!==this.keysUp.indexOf(n)?e._localDirection.copyFromFloats(0,0,r):-1!==this.keysRight.indexOf(n)?e._localDirection.copyFromFloats(r,0,0):-1!==this.keysDown.indexOf(n)&&e._localDirection.copyFromFloats(0,0,-r),e.getScene().useRightHandedSystem&&(e._localDirection.z*=-1),e.getViewMatrix().invertToRef(e._cameraTransformMatrix),o.x.TransformNormalToRef(e._localDirection,e._cameraTransformMatrix,e._transformedDirection),e.cameraDirection.addInPlace(e._transformedDirection)}},e.prototype.getClassName=function(){return"FreeCameraKeyboardMoveInput"},e.prototype._onLostFocus=function(){this._keys=[]},e.prototype.getSimpleName=function(){return"keyboard"},l.c([Object(L.c)()],e.prototype,"keysUp",void 0),l.c([Object(L.c)()],e.prototype,"keysDown",void 0),l.c([Object(L.c)()],e.prototype,"keysLeft",void 0),l.c([Object(L.c)()],e.prototype,"keysRight",void 0),e}();He.FreeCameraKeyboardMoveInput=lt;var ct=function(){function e(e){void 0===e&&(e=!0),this.touchEnabled=e,this.buttons=[0,1,2],this.angularSensibility=2e3,this.previousPosition=null,this.onPointerMovedObservable=new i.c,this._allowCameraRotation=!0}return e.prototype.attachControl=function(e,t){var n=this,r=this.camera.getEngine();this._pointerInput||(this._pointerInput=function(i){var o=i.event;if(!r.isInVRExclusivePointerMode&&(n.touchEnabled||"touch"!==o.pointerType)&&(i.type===Se.a.POINTERMOVE||-1!==n.buttons.indexOf(o.button))){var a=o.srcElement||o.target;if(i.type===Se.a.POINTERDOWN&&a){try{a.setPointerCapture(o.pointerId)}catch(e){}n.previousPosition={x:o.clientX,y:o.clientY},t||(o.preventDefault(),e.focus())}else if(i.type===Se.a.POINTERUP&&a){try{a.releasePointerCapture(o.pointerId)}catch(e){}n.previousPosition=null,t||o.preventDefault()}else if(i.type===Se.a.POINTERMOVE){if(!n.previousPosition||r.isPointerLock)return;var s=o.clientX-n.previousPosition.x,u=o.clientY-n.previousPosition.y;n.camera.getScene().useRightHandedSystem&&(s*=-1),n.camera.parent&&n.camera.parent._getWorldMatrixDeterminant()<0&&(s*=-1),n._allowCameraRotation&&(n.camera.cameraRotation.y+=s/n.angularSensibility,n.camera.cameraRotation.x+=u/n.angularSensibility),n.onPointerMovedObservable.notifyObservers({offsetX:s,offsetY:u}),n.previousPosition={x:o.clientX,y:o.clientY},t||o.preventDefault()}}}),this._onMouseMove=function(e){if(r.isPointerLock&&!r.isInVRExclusivePointerMode){var i=e.movementX||e.mozMovementX||e.webkitMovementX||e.msMovementX||0;n.camera.getScene().useRightHandedSystem&&(i*=-1),n.camera.parent&&n.camera.parent._getWorldMatrixDeterminant()<0&&(i*=-1),n.camera.cameraRotation.y+=i/n.angularSensibility,n.camera.cameraRotation.x+=(e.movementY||e.mozMovementY||e.webkitMovementY||e.msMovementY||0)/n.angularSensibility,n.previousPosition=null,t||e.preventDefault()}},this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,Se.a.POINTERDOWN|Se.a.POINTERUP|Se.a.POINTERMOVE),e.addEventListener("mousemove",this._onMouseMove,!1),e.addEventListener("contextmenu",this.onContextMenu.bind(this),!1)},e.prototype.onContextMenu=function(e){e.preventDefault()},e.prototype.detachControl=function(e){this._observer&&e&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._onMouseMove&&e.removeEventListener("mousemove",this._onMouseMove),this.onContextMenu&&e.removeEventListener("contextmenu",this.onContextMenu),this.onPointerMovedObservable&&this.onPointerMovedObservable.clear(),this._observer=null,this._onMouseMove=null,this.previousPosition=null)},e.prototype.getClassName=function(){return"FreeCameraMouseInput"},e.prototype.getSimpleName=function(){return"mouse"},l.c([Object(L.c)()],e.prototype,"buttons",void 0),l.c([Object(L.c)()],e.prototype,"angularSensibility",void 0),e}();He.FreeCameraMouseInput=ct;var ht=function(){function e(){this.touchAngularSensibility=2e5,this.touchMoveSensibility=250,this._offsetX=null,this._offsetY=null,this._pointerPressed=new Array}return e.prototype.attachControl=function(e,t){var n=this,r=null;void 0===this._pointerInput&&(this._onLostFocus=function(){n._offsetX=null,n._offsetY=null},this._pointerInput=function(e){var i=e.event;if("mouse"!==i.pointerType)if(e.type===Se.a.POINTERDOWN){if(t||i.preventDefault(),n._pointerPressed.push(i.pointerId),1!==n._pointerPressed.length)return;r={x:i.clientX,y:i.clientY}}else if(e.type===Se.a.POINTERUP){if(t||i.preventDefault(),-1===(o=n._pointerPressed.indexOf(i.pointerId)))return;if(n._pointerPressed.splice(o,1),0!=o)return;r=null,n._offsetX=null,n._offsetY=null}else if(e.type===Se.a.POINTERMOVE){if(t||i.preventDefault(),!r)return;var o;if(0!=(o=n._pointerPressed.indexOf(i.pointerId)))return;n._offsetX=i.clientX-r.x,n._offsetY=-(i.clientY-r.y)}}),this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,Se.a.POINTERDOWN|Se.a.POINTERUP|Se.a.POINTERMOVE),this._onLostFocus&&e.addEventListener("blur",this._onLostFocus)},e.prototype.detachControl=function(e){this._pointerInput&&e&&(this._observer&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null),this._onLostFocus&&(e.removeEventListener("blur",this._onLostFocus),this._onLostFocus=null),this._pointerPressed=[],this._offsetX=null,this._offsetY=null)},e.prototype.checkInputs=function(){if(this._offsetX&&this._offsetY){var e=this.camera;if(e.cameraRotation.y+=this._offsetX/this.touchAngularSensibility,this._pointerPressed.length>1)e.cameraRotation.x+=-this._offsetY/this.touchAngularSensibility;else{var t=e._computeLocalCameraSpeed(),n=new o.x(0,0,t*this._offsetY/this.touchMoveSensibility);o.j.RotationYawPitchRollToRef(e.rotation.y,e.rotation.x,0,e._cameraRotationMatrix),e.cameraDirection.addInPlace(o.x.TransformCoordinates(n,e._cameraRotationMatrix))}}},e.prototype.getClassName=function(){return"FreeCameraTouchInput"},e.prototype.getSimpleName=function(){return"touch"},l.c([Object(L.c)()],e.prototype,"touchAngularSensibility",void 0),l.c([Object(L.c)()],e.prototype,"touchMoveSensibility",void 0),e}();He.FreeCameraTouchInput=ht;var dt=function(e){function t(t){var n=e.call(this,t)||this;return n._mouseInput=null,n}return l.d(t,e),t.prototype.addKeyboard=function(){return this.add(new lt),this},t.prototype.addMouse=function(e){return void 0===e&&(e=!0),this._mouseInput||(this._mouseInput=new ct(e),this.add(this._mouseInput)),this},t.prototype.removeMouse=function(){return this._mouseInput&&this.remove(this._mouseInput),this},t.prototype.addTouch=function(){return this.add(new ht),this},t.prototype.clear=function(){e.prototype.clear.call(this),this._mouseInput=null},t}(We);dt.prototype.addDeviceOrientation=function(){return this._deviceOrientationInput||(this._deviceOrientationInput=new ft,this.add(this._deviceOrientationInput)),this};var ft=function(){function e(){var e=this;this._screenOrientationAngle=0,this._screenQuaternion=new o.q,this._alpha=0,this._beta=0,this._gamma=0,this._onDeviceOrientationChangedObservable=new i.c,this._orientationChanged=function(){e._screenOrientationAngle=void 0!==window.orientation?+window.orientation:window.screen.orientation&&window.screen.orientation.angle?window.screen.orientation.angle:0,e._screenOrientationAngle=-ye.h.ToRadians(e._screenOrientationAngle/2),e._screenQuaternion.copyFromFloats(0,Math.sin(e._screenOrientationAngle),0,Math.cos(e._screenOrientationAngle))},this._deviceOrientation=function(t){e._alpha=null!==t.alpha?t.alpha:0,e._beta=null!==t.beta?t.beta:0,e._gamma=null!==t.gamma?t.gamma:0,null!==t.alpha&&e._onDeviceOrientationChangedObservable.notifyObservers()},this._constantTranform=new o.q(-Math.sqrt(.5),0,0,Math.sqrt(.5)),this._orientationChanged()}return Object.defineProperty(e.prototype,"camera",{get:function(){return this._camera},set:function(e){var t=this;this._camera=e,null==this._camera||this._camera.rotationQuaternion||(this._camera.rotationQuaternion=new o.q),this._camera&&this._camera.onDisposeObservable.add(function(){t._onDeviceOrientationChangedObservable.clear()})},enumerable:!0,configurable:!0}),e.prototype.attachControl=function(e,t){window.addEventListener("orientationchange",this._orientationChanged),window.addEventListener("deviceorientation",this._deviceOrientation),this._orientationChanged()},e.prototype.detachControl=function(e){window.removeEventListener("orientationchange",this._orientationChanged),window.removeEventListener("deviceorientation",this._deviceOrientation),this._alpha=0},e.prototype.checkInputs=function(){this._alpha&&(o.q.RotationYawPitchRollToRef(ye.h.ToRadians(this._alpha),ye.h.ToRadians(this._beta),-ye.h.ToRadians(this._gamma),this.camera.rotationQuaternion),this._camera.rotationQuaternion.multiplyInPlace(this._screenQuaternion),this._camera.rotationQuaternion.multiplyInPlace(this._constantTranform),this._camera.rotationQuaternion.z*=-1,this._camera.rotationQuaternion.w*=-1)},e.prototype.getClassName=function(){return"FreeCameraDeviceOrientationInput"},e.prototype.getSimpleName=function(){return"deviceOrientation"},e}();He.FreeCameraDeviceOrientationInput=ft;var pt=function(){function e(){this.gamepadAngularSensibility=200,this.gamepadMoveSensibility=40,this._cameraTransform=o.j.Identity(),this._deltaTransform=o.x.Zero(),this._vector3=o.x.Zero(),this._vector2=o.w.Zero()}return e.prototype.attachControl=function(e,t){var n=this,r=this.camera.getScene().gamepadManager;this._onGamepadConnectedObserver=r.onGamepadConnectedObservable.add(function(e){e.type!==Ke.POSE_ENABLED&&(n.gamepad&&e.type!==Ke.XBOX||(n.gamepad=e))}),this._onGamepadDisconnectedObserver=r.onGamepadDisconnectedObservable.add(function(e){n.gamepad===e&&(n.gamepad=null)}),this.gamepad=r.getGamepadByType(Ke.XBOX)},e.prototype.detachControl=function(e){this.camera.getScene().gamepadManager.onGamepadConnectedObservable.remove(this._onGamepadConnectedObserver),this.camera.getScene().gamepadManager.onGamepadDisconnectedObservable.remove(this._onGamepadDisconnectedObserver),this.gamepad=null},e.prototype.checkInputs=function(){if(this.gamepad&&this.gamepad.leftStick){var e=this.camera,t=this.gamepad.leftStick,n=t.x/this.gamepadMoveSensibility,r=t.y/this.gamepadMoveSensibility;t.x=Math.abs(n)>.005?0+n:0,t.y=Math.abs(r)>.005?0+r:0;var i=this.gamepad.rightStick;if(i){var a=i.x/this.gamepadAngularSensibility,s=i.y/this.gamepadAngularSensibility;i.x=Math.abs(a)>.001?0+a:0,i.y=Math.abs(s)>.001?0+s:0}else i={x:0,y:0};e.rotationQuaternion?e.rotationQuaternion.toRotationMatrix(this._cameraTransform):o.j.RotationYawPitchRollToRef(e.rotation.y,e.rotation.x,0,this._cameraTransform);var u=50*e._computeLocalCameraSpeed();this._vector3.copyFromFloats(t.x*u,0,-t.y*u),o.x.TransformCoordinatesToRef(this._vector3,this._cameraTransform,this._deltaTransform),e.cameraDirection.addInPlace(this._deltaTransform),this._vector2.copyFromFloats(i.y,i.x),e.cameraRotation.addInPlace(this._vector2)}},e.prototype.getClassName=function(){return"FreeCameraGamepadInput"},e.prototype.getSimpleName=function(){return"gamepad"},l.c([Object(L.c)()],e.prototype,"gamepadAngularSensibility",void 0),l.c([Object(L.c)()],e.prototype,"gamepadMoveSensibility",void 0),e}();He.FreeCameraGamepadInput=pt;var _t,mt=n(61);!function(e){e[e.X=0]="X",e[e.Y=1]="Y",e[e.Z=2]="Z"}(_t||(_t={}));var gt=function(){function e(t){var n=this;if(this._leftJoystick=!!t,e._globalJoystickIndex++,this._axisTargetedByLeftAndRight=_t.X,this._axisTargetedByUpAndDown=_t.Y,this.reverseLeftRight=!1,this.reverseUpDown=!1,this._touches=new mt.a,this.deltaPosition=o.x.Zero(),this._joystickSensibility=25,this._inversedSensibility=1/(this._joystickSensibility/1e3),this._onResize=function(t){e.vjCanvasWidth=window.innerWidth,e.vjCanvasHeight=window.innerHeight,e.Canvas&&(e.Canvas.width=e.vjCanvasWidth,e.Canvas.height=e.vjCanvasHeight),e.halfWidth=e.vjCanvasWidth/2},!e.Canvas){window.addEventListener("resize",this._onResize,!1),e.Canvas=document.createElement("canvas"),e.vjCanvasWidth=window.innerWidth,e.vjCanvasHeight=window.innerHeight,e.Canvas.width=window.innerWidth,e.Canvas.height=window.innerHeight,e.Canvas.style.width="100%",e.Canvas.style.height="100%",e.Canvas.style.position="absolute",e.Canvas.style.backgroundColor="transparent",e.Canvas.style.top="0px",e.Canvas.style.left="0px",e.Canvas.style.zIndex="5",e.Canvas.style.msTouchAction="none",e.Canvas.setAttribute("touch-action","none");var r=e.Canvas.getContext("2d");if(!r)throw new Error("Unable to create canvas for virtual joystick");(e.vjCanvasContext=r).strokeStyle="#ffffff",e.vjCanvasContext.lineWidth=2,document.body.appendChild(e.Canvas)}e.halfWidth=e.Canvas.width/2,this.pressed=!1,this._joystickColor="cyan",this._joystickPointerID=-1,this._joystickPointerPos=new o.w(0,0),this._joystickPreviousPointerPos=new o.w(0,0),this._joystickPointerStartPos=new o.w(0,0),this._deltaJoystickVector=new o.w(0,0),this._onPointerDownHandlerRef=function(e){n._onPointerDown(e)},this._onPointerMoveHandlerRef=function(e){n._onPointerMove(e)},this._onPointerUpHandlerRef=function(e){n._onPointerUp(e)},e.Canvas.addEventListener("pointerdown",this._onPointerDownHandlerRef,!1),e.Canvas.addEventListener("pointermove",this._onPointerMoveHandlerRef,!1),e.Canvas.addEventListener("pointerup",this._onPointerUpHandlerRef,!1),e.Canvas.addEventListener("pointerout",this._onPointerUpHandlerRef,!1),e.Canvas.addEventListener("contextmenu",function(e){e.preventDefault()},!1),requestAnimationFrame(function(){n._drawVirtualJoystick()})}return e.prototype.setJoystickSensibility=function(e){this._joystickSensibility=e,this._inversedSensibility=1/(this._joystickSensibility/1e3)},e.prototype._onPointerDown=function(t){t.preventDefault(),(!0===this._leftJoystick?t.clientX<e.halfWidth:t.clientX>e.halfWidth)&&this._joystickPointerID<0?(this._joystickPointerID=t.pointerId,this._joystickPointerStartPos.x=t.clientX,this._joystickPointerStartPos.y=t.clientY,this._joystickPointerPos=this._joystickPointerStartPos.clone(),this._joystickPreviousPointerPos=this._joystickPointerStartPos.clone(),this._deltaJoystickVector.x=0,this._deltaJoystickVector.y=0,this.pressed=!0,this._touches.add(t.pointerId.toString(),t)):e._globalJoystickIndex<2&&this._action&&(this._action(),this._touches.add(t.pointerId.toString(),{x:t.clientX,y:t.clientY,prevX:t.clientX,prevY:t.clientY}))},e.prototype._onPointerMove=function(e){if(this._joystickPointerID==e.pointerId){this._joystickPointerPos.x=e.clientX,this._joystickPointerPos.y=e.clientY,this._deltaJoystickVector=this._joystickPointerPos.clone(),this._deltaJoystickVector=this._deltaJoystickVector.subtract(this._joystickPointerStartPos);var t=(this.reverseLeftRight?-1:1)*this._deltaJoystickVector.x/this._inversedSensibility;switch(this._axisTargetedByLeftAndRight){case _t.X:this.deltaPosition.x=Math.min(1,Math.max(-1,t));break;case _t.Y:this.deltaPosition.y=Math.min(1,Math.max(-1,t));break;case _t.Z:this.deltaPosition.z=Math.min(1,Math.max(-1,t))}var n=(this.reverseUpDown?1:-1)*this._deltaJoystickVector.y/this._inversedSensibility;switch(this._axisTargetedByUpAndDown){case _t.X:this.deltaPosition.x=Math.min(1,Math.max(-1,n));break;case _t.Y:this.deltaPosition.y=Math.min(1,Math.max(-1,n));break;case _t.Z:this.deltaPosition.z=Math.min(1,Math.max(-1,n))}}else{var r=this._touches.get(e.pointerId.toString());r&&(r.x=e.clientX,r.y=e.clientY)}},e.prototype._onPointerUp=function(t){if(this._joystickPointerID==t.pointerId)e.vjCanvasContext.clearRect(this._joystickPointerStartPos.x-64,this._joystickPointerStartPos.y-64,128,128),e.vjCanvasContext.clearRect(this._joystickPreviousPointerPos.x-42,this._joystickPreviousPointerPos.y-42,84,84),this._joystickPointerID=-1,this.pressed=!1;else{var n=this._touches.get(t.pointerId.toString());n&&e.vjCanvasContext.clearRect(n.prevX-44,n.prevY-44,88,88)}this._deltaJoystickVector.x=0,this._deltaJoystickVector.y=0,this._touches.remove(t.pointerId.toString())},e.prototype.setJoystickColor=function(e){this._joystickColor=e},e.prototype.setActionOnTouch=function(e){this._action=e},e.prototype.setAxisForLeftRight=function(e){switch(e){case _t.X:case _t.Y:case _t.Z:this._axisTargetedByLeftAndRight=e;break;default:this._axisTargetedByLeftAndRight=_t.X}},e.prototype.setAxisForUpDown=function(e){switch(e){case _t.X:case _t.Y:case _t.Z:this._axisTargetedByUpAndDown=e;break;default:this._axisTargetedByUpAndDown=_t.Y}},e.prototype._drawVirtualJoystick=function(){var t=this;this.pressed&&this._touches.forEach(function(n,r){r.pointerId===t._joystickPointerID?(e.vjCanvasContext.clearRect(t._joystickPointerStartPos.x-64,t._joystickPointerStartPos.y-64,128,128),e.vjCanvasContext.clearRect(t._joystickPreviousPointerPos.x-42,t._joystickPreviousPointerPos.y-42,84,84),e.vjCanvasContext.beginPath(),e.vjCanvasContext.lineWidth=6,e.vjCanvasContext.strokeStyle=t._joystickColor,e.vjCanvasContext.arc(t._joystickPointerStartPos.x,t._joystickPointerStartPos.y,40,0,2*Math.PI,!0),e.vjCanvasContext.stroke(),e.vjCanvasContext.closePath(),e.vjCanvasContext.beginPath(),e.vjCanvasContext.strokeStyle=t._joystickColor,e.vjCanvasContext.lineWidth=2,e.vjCanvasContext.arc(t._joystickPointerStartPos.x,t._joystickPointerStartPos.y,60,0,2*Math.PI,!0),e.vjCanvasContext.stroke(),e.vjCanvasContext.closePath(),e.vjCanvasContext.beginPath(),e.vjCanvasContext.strokeStyle=t._joystickColor,e.vjCanvasContext.arc(t._joystickPointerPos.x,t._joystickPointerPos.y,40,0,2*Math.PI,!0),e.vjCanvasContext.stroke(),e.vjCanvasContext.closePath(),t._joystickPreviousPointerPos=t._joystickPointerPos.clone()):(e.vjCanvasContext.clearRect(r.prevX-44,r.prevY-44,88,88),e.vjCanvasContext.beginPath(),e.vjCanvasContext.fillStyle="white",e.vjCanvasContext.beginPath(),e.vjCanvasContext.strokeStyle="red",e.vjCanvasContext.lineWidth=6,e.vjCanvasContext.arc(r.x,r.y,40,0,2*Math.PI,!0),e.vjCanvasContext.stroke(),e.vjCanvasContext.closePath(),r.prevX=r.x,r.prevY=r.y)}),requestAnimationFrame(function(){t._drawVirtualJoystick()})},e.prototype.releaseCanvas=function(){e.Canvas&&(e.Canvas.removeEventListener("pointerdown",this._onPointerDownHandlerRef),e.Canvas.removeEventListener("pointermove",this._onPointerMoveHandlerRef),e.Canvas.removeEventListener("pointerup",this._onPointerUpHandlerRef),e.Canvas.removeEventListener("pointerout",this._onPointerUpHandlerRef),window.removeEventListener("resize",this._onResize),document.body.removeChild(e.Canvas),e.Canvas=null)},e._globalJoystickIndex=0,e}();dt.prototype.addVirtualJoystick=function(){return this.add(new vt),this};var vt=function(){function e(){}return e.prototype.getLeftJoystick=function(){return this._leftjoystick},e.prototype.getRightJoystick=function(){return this._rightjoystick},e.prototype.checkInputs=function(){if(this._leftjoystick){var e=this.camera,t=50*e._computeLocalCameraSpeed(),n=o.j.RotationYawPitchRoll(e.rotation.y,e.rotation.x,0),r=o.x.TransformCoordinates(new o.x(this._leftjoystick.deltaPosition.x*t,this._leftjoystick.deltaPosition.y*t,this._leftjoystick.deltaPosition.z*t),n);e.cameraDirection=e.cameraDirection.add(r),e.cameraRotation=e.cameraRotation.addVector3(this._rightjoystick.deltaPosition),this._leftjoystick.pressed||(this._leftjoystick.deltaPosition=this._leftjoystick.deltaPosition.scale(.9)),this._rightjoystick.pressed||(this._rightjoystick.deltaPosition=this._rightjoystick.deltaPosition.scale(.9))}},e.prototype.attachControl=function(e,t){this._leftjoystick=new gt(!0),this._leftjoystick.setAxisForUpDown(_t.Z),this._leftjoystick.setAxisForLeftRight(_t.X),this._leftjoystick.setJoystickSensibility(.15),this._rightjoystick=new gt(!1),this._rightjoystick.setAxisForUpDown(_t.X),this._rightjoystick.setAxisForLeftRight(_t.Y),this._rightjoystick.reverseUpDown=!0,this._rightjoystick.setJoystickSensibility(.05),this._rightjoystick.setJoystickColor("yellow")},e.prototype.detachControl=function(e){this._leftjoystick.releaseCanvas(),this._rightjoystick.releaseCanvas()},e.prototype.getClassName=function(){return"FreeCameraVirtualJoystickInput"},e.prototype.getSimpleName=function(){return"virtualJoystick"},e}();He.FreeCameraVirtualJoystickInput=vt;var yt=function(e){function t(t,n,r,i){void 0===i&&(i=!0);var a=e.call(this,t,n,r,i)||this;return a.cameraDirection=new o.x(0,0,0),a.cameraRotation=new o.w(0,0),a.updateUpVectorFromRotation=!1,a._tmpQuaternion=new o.q,a.rotation=new o.x(0,0,0),a.speed=2,a.noRotationConstraint=!1,a.lockedTarget=null,a._currentTarget=o.x.Zero(),a._initialFocalDistance=1,a._viewMatrix=o.j.Zero(),a._camMatrix=o.j.Zero(),a._cameraTransformMatrix=o.j.Zero(),a._cameraRotationMatrix=o.j.Zero(),a._referencePoint=new o.x(0,0,1),a._transformedReferencePoint=o.x.Zero(),a._globalCurrentTarget=o.x.Zero(),a._globalCurrentUpVector=o.x.Zero(),a._defaultUp=o.x.Up(),a._cachedRotationZ=0,a._cachedQuaternionRotationZ=0,a}return l.d(t,e),t.prototype.getFrontPosition=function(e){this.getWorldMatrix();var t=this.getTarget().subtract(this.position);return t.normalize(),t.scaleInPlace(e),this.globalPosition.add(t)},t.prototype._getLockedTargetPosition=function(){return this.lockedTarget?(this.lockedTarget.absolutePosition&&this.lockedTarget.computeWorldMatrix(),this.lockedTarget.absolutePosition||this.lockedTarget):null},t.prototype.storeState=function(){return this._storedPosition=this.position.clone(),this._storedRotation=this.rotation.clone(),this.rotationQuaternion&&(this._storedRotationQuaternion=this.rotationQuaternion.clone()),e.prototype.storeState.call(this)},t.prototype._restoreStateValues=function(){return!!e.prototype._restoreStateValues.call(this)&&(this.position=this._storedPosition.clone(),this.rotation=this._storedRotation.clone(),this.rotationQuaternion&&(this.rotationQuaternion=this._storedRotationQuaternion.clone()),this.cameraDirection.copyFromFloats(0,0,0),this.cameraRotation.copyFromFloats(0,0),!0)},t.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache.lockedTarget=new o.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.rotation=new o.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.rotationQuaternion=new o.q(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},t.prototype._updateCache=function(t){t||e.prototype._updateCache.call(this);var n=this._getLockedTargetPosition();n?this._cache.lockedTarget?this._cache.lockedTarget.copyFrom(n):this._cache.lockedTarget=n.clone():this._cache.lockedTarget=null,this._cache.rotation.copyFrom(this.rotation),this.rotationQuaternion&&this._cache.rotationQuaternion.copyFrom(this.rotationQuaternion)},t.prototype._isSynchronizedViewMatrix=function(){if(!e.prototype._isSynchronizedViewMatrix.call(this))return!1;var t=this._getLockedTargetPosition();return(this._cache.lockedTarget?this._cache.lockedTarget.equals(t):!t)&&(this.rotationQuaternion?this.rotationQuaternion.equals(this._cache.rotationQuaternion):this._cache.rotation.equals(this.rotation))},t.prototype._computeLocalCameraSpeed=function(){var e=this.getEngine();return this.speed*Math.sqrt(e.getDeltaTime()/(100*e.getFps()))},t.prototype.setTarget=function(e){this.upVector.normalize(),this._initialFocalDistance=e.subtract(this.position).length(),this.position.z===e.z&&(this.position.z+=o.h),o.j.LookAtLHToRef(this.position,e,this._defaultUp,this._camMatrix),this._camMatrix.invert(),this.rotation.x=Math.atan(this._camMatrix.m[6]/this._camMatrix.m[10]);var t=e.subtract(this.position);this.rotation.y=t.x>=0?-Math.atan(t.z/t.x)+Math.PI/2:-Math.atan(t.z/t.x)-Math.PI/2,this.rotation.z=0,isNaN(this.rotation.x)&&(this.rotation.x=0),isNaN(this.rotation.y)&&(this.rotation.y=0),isNaN(this.rotation.z)&&(this.rotation.z=0),this.rotationQuaternion&&o.q.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this.rotationQuaternion)},t.prototype.getTarget=function(){return this._currentTarget},t.prototype._decideIfNeedsToMove=function(){return Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0},t.prototype._updatePosition=function(){if(this.parent)return this.parent.getWorldMatrix().invertToRef(o.t.Matrix[0]),o.x.TransformNormalToRef(this.cameraDirection,o.t.Matrix[0],o.t.Vector3[0]),void this.position.addInPlace(o.t.Vector3[0]);this.position.addInPlace(this.cameraDirection)},t.prototype._checkInputs=function(){var t=this._decideIfNeedsToMove(),n=Math.abs(this.cameraRotation.x)>0||Math.abs(this.cameraRotation.y)>0;if(t&&this._updatePosition(),n&&(this.rotation.x+=this.cameraRotation.x,this.rotation.y+=this.cameraRotation.y,this.rotationQuaternion&&this.rotation.lengthSquared()&&o.q.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this.rotationQuaternion),!this.noRotationConstraint)){var r=Math.PI/2*.95;this.rotation.x>r&&(this.rotation.x=r),this.rotation.x<-r&&(this.rotation.x=-r)}t&&(Math.abs(this.cameraDirection.x)<this.speed*o.h&&(this.cameraDirection.x=0),Math.abs(this.cameraDirection.y)<this.speed*o.h&&(this.cameraDirection.y=0),Math.abs(this.cameraDirection.z)<this.speed*o.h&&(this.cameraDirection.z=0),this.cameraDirection.scaleInPlace(this.inertia)),n&&(Math.abs(this.cameraRotation.x)<this.speed*o.h&&(this.cameraRotation.x=0),Math.abs(this.cameraRotation.y)<this.speed*o.h&&(this.cameraRotation.y=0),this.cameraRotation.scaleInPlace(this.inertia)),e.prototype._checkInputs.call(this)},t.prototype._updateCameraRotationMatrix=function(){this.rotationQuaternion?this.rotationQuaternion.toRotationMatrix(this._cameraRotationMatrix):o.j.RotationYawPitchRollToRef(this.rotation.y,this.rotation.x,this.rotation.z,this._cameraRotationMatrix)},t.prototype._rotateUpVectorWithCameraRotationMatrix=function(){return o.x.TransformNormalToRef(this._defaultUp,this._cameraRotationMatrix,this.upVector),this},t.prototype._getViewMatrix=function(){return this.lockedTarget&&this.setTarget(this._getLockedTargetPosition()),this._updateCameraRotationMatrix(),this.rotationQuaternion&&this._cachedQuaternionRotationZ!=this.rotationQuaternion.z?(this._rotateUpVectorWithCameraRotationMatrix(),this._cachedQuaternionRotationZ=this.rotationQuaternion.z):this._cachedRotationZ!=this.rotation.z&&(this._rotateUpVectorWithCameraRotationMatrix(),this._cachedRotationZ=this.rotation.z),o.x.TransformCoordinatesToRef(this._referencePoint,this._cameraRotationMatrix,this._transformedReferencePoint),this.position.addToRef(this._transformedReferencePoint,this._currentTarget),this.updateUpVectorFromRotation&&(this.rotationQuaternion?o.c.Y.rotateByQuaternionToRef(this.rotationQuaternion,this.upVector):(o.q.FromEulerVectorToRef(this.rotation,this._tmpQuaternion),o.c.Y.rotateByQuaternionToRef(this._tmpQuaternion,this.upVector))),this._computeViewMatrix(this.position,this._currentTarget,this.upVector),this._viewMatrix},t.prototype._computeViewMatrix=function(e,t,n){if(this.parent){var r=this.parent.getWorldMatrix();o.x.TransformCoordinatesToRef(e,r,this._globalPosition),o.x.TransformCoordinatesToRef(t,r,this._globalCurrentTarget),o.x.TransformNormalToRef(n,r,this._globalCurrentUpVector),this._markSyncedWithParent()}else this._globalPosition.copyFrom(e),this._globalCurrentTarget.copyFrom(t),this._globalCurrentUpVector.copyFrom(n);this.getScene().useRightHandedSystem?o.j.LookAtRHToRef(this._globalPosition,this._globalCurrentTarget,this._globalCurrentUpVector,this._viewMatrix):o.j.LookAtLHToRef(this._globalPosition,this._globalCurrentTarget,this._globalCurrentUpVector,this._viewMatrix)},t.prototype.createRigCamera=function(e,n){if(this.cameraRigMode!==Ne.a.RIG_MODE_NONE){var r=new t(e,this.position.clone(),this.getScene());return this.cameraRigMode!==Ne.a.RIG_MODE_VR&&this.cameraRigMode!==Ne.a.RIG_MODE_WEBVR||(this.rotationQuaternion||(this.rotationQuaternion=new o.q),r._cameraRigParams={},r.rotationQuaternion=new o.q),r}return null},t.prototype._updateRigCameras=function(){var t=this._rigCameras[0],n=this._rigCameras[1];switch(this.computeWorldMatrix(),this.cameraRigMode){case Ne.a.RIG_MODE_STEREOSCOPIC_ANAGLYPH:case Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:case Ne.a.RIG_MODE_STEREOSCOPIC_OVERUNDER:var r=this.cameraRigMode===Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?-1:1;this._getRigCamPositionAndTarget(this._cameraRigParams.stereoHalfAngle*(this.cameraRigMode===Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED?1:-1),t),this._getRigCamPositionAndTarget(this._cameraRigParams.stereoHalfAngle*r,n);break;case Ne.a.RIG_MODE_VR:t.rotationQuaternion?(t.rotationQuaternion.copyFrom(this.rotationQuaternion),n.rotationQuaternion.copyFrom(this.rotationQuaternion)):(t.rotation.copyFrom(this.rotation),n.rotation.copyFrom(this.rotation)),t.position.copyFrom(this.position),n.position.copyFrom(this.position)}e.prototype._updateRigCameras.call(this)},t.prototype._getRigCamPositionAndTarget=function(e,n){this.getTarget().subtractToRef(this.position,t._TargetFocalPoint),t._TargetFocalPoint.normalize().scaleInPlace(this._initialFocalDistance);var r=t._TargetFocalPoint.addInPlace(this.position);o.j.TranslationToRef(-r.x,-r.y,-r.z,t._TargetTransformMatrix),t._TargetTransformMatrix.multiplyToRef(o.j.RotationY(e),t._RigCamTransformMatrix),o.j.TranslationToRef(r.x,r.y,r.z,t._TargetTransformMatrix),t._RigCamTransformMatrix.multiplyToRef(t._TargetTransformMatrix,t._RigCamTransformMatrix),o.x.TransformCoordinatesToRef(this.position,t._RigCamTransformMatrix,n.position),n.setTarget(r)},t.prototype.getClassName=function(){return"TargetCamera"},t._RigCamTransformMatrix=new o.j,t._TargetTransformMatrix=new o.j,t._TargetFocalPoint=new o.x,l.c([Object(L.o)()],t.prototype,"rotation",void 0),l.c([Object(L.c)()],t.prototype,"speed",void 0),l.c([Object(L.k)("lockedTargetId")],t.prototype,"lockedTarget",void 0),t}(Ne.a),bt=function(e){function t(t,n,r,i){void 0===i&&(i=!0);var a=e.call(this,t,n,r,i)||this;return a.ellipsoid=new o.x(.5,1,.5),a.ellipsoidOffset=new o.x(0,0,0),a.checkCollisions=!1,a.applyGravity=!1,a._needMoveForGravity=!1,a._oldPosition=o.x.Zero(),a._diffPosition=o.x.Zero(),a._newPosition=o.x.Zero(),a._collisionMask=-1,a._onCollisionPositionChange=function(e,t,n){void 0===n&&(n=null),a._newPosition.copyFrom(t),a._newPosition.subtractToRef(a._oldPosition,a._diffPosition),a._diffPosition.length()>me.b.CollisionsEpsilon&&(a.position.addInPlace(a._diffPosition),a.onCollide&&n&&a.onCollide(n))},a.inputs=new dt(a),a.inputs.addKeyboard().addMouse(),a}return l.d(t,e),Object.defineProperty(t.prototype,"angularSensibility",{get:function(){var e=this.inputs.attached.mouse;return e?e.angularSensibility:0},set:function(e){var t=this.inputs.attached.mouse;t&&(t.angularSensibility=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysUp",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysUp:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysUp=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysDown",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysDown:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysDown=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysLeft",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysLeft:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysLeft=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysRight",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysRight:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysRight=e)},enumerable:!0,configurable:!0}),t.prototype.attachControl=function(e,t){this.inputs.attachElement(e,t)},t.prototype.detachControl=function(e){this.inputs.detachElement(e),this.cameraDirection=new o.x(0,0,0),this.cameraRotation=new o.w(0,0)},Object.defineProperty(t.prototype,"collisionMask",{get:function(){return this._collisionMask},set:function(e){this._collisionMask=isNaN(e)?-1:e},enumerable:!0,configurable:!0}),t.prototype._collideWithWorld=function(e){(this.parent?o.x.TransformCoordinates(this.position,this.parent.getWorldMatrix()):this.position).subtractFromFloatsToRef(0,this.ellipsoid.y,0,this._oldPosition),this._oldPosition.addInPlace(this.ellipsoidOffset);var t=this.getScene().collisionCoordinator;this._collider||(this._collider=t.createCollider()),this._collider._radius=this.ellipsoid,this._collider.collisionMask=this._collisionMask;var n=e;this.applyGravity&&(n=e.add(this.getScene().gravity)),t.getNewPosition(this._oldPosition,n,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId)},t.prototype._checkInputs=function(){this._localDirection||(this._localDirection=o.x.Zero(),this._transformedDirection=o.x.Zero()),this.inputs.checkInputs(),e.prototype._checkInputs.call(this)},t.prototype._decideIfNeedsToMove=function(){return this._needMoveForGravity||Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0},t.prototype._updatePosition=function(){this.checkCollisions&&this.getScene().collisionsEnabled?this._collideWithWorld(this.cameraDirection):e.prototype._updatePosition.call(this)},t.prototype.dispose=function(){this.inputs.clear(),e.prototype.dispose.call(this)},t.prototype.getClassName=function(){return"FreeCamera"},l.c([Object(L.o)()],t.prototype,"ellipsoid",void 0),l.c([Object(L.o)()],t.prototype,"ellipsoidOffset",void 0),l.c([Object(L.c)()],t.prototype,"checkCollisions",void 0),l.c([Object(L.c)()],t.prototype,"applyGravity",void 0),t}(yt);F.a.AddNodeConstructor("TouchCamera",function(e,t){return function(){return new Tt(e,o.x.Zero(),t)}});var Tt=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.inputs.addTouch(),i._setupInputs(),i}return l.d(t,e),Object.defineProperty(t.prototype,"touchAngularSensibility",{get:function(){var e=this.inputs.attached.touch;return e?e.touchAngularSensibility:0},set:function(e){var t=this.inputs.attached.touch;t&&(t.touchAngularSensibility=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"touchMoveSensibility",{get:function(){var e=this.inputs.attached.touch;return e?e.touchMoveSensibility:0},set:function(e){var t=this.inputs.attached.touch;t&&(t.touchMoveSensibility=e)},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"TouchCamera"},t.prototype._setupInputs=function(){var e=this.inputs.attached.mouse;e&&(e.touchEnabled=!1)},t}(bt);F.a.AddNodeConstructor("ArcRotateCamera",function(e,t){return function(){return new Et(e,0,0,1,o.x.Zero(),t)}});var Et=function(e){function t(t,n,r,a,s,u,l){void 0===l&&(l=!0);var c=e.call(this,t,o.x.Zero(),u,l)||this;return c._upVector=o.x.Up(),c.inertialAlphaOffset=0,c.inertialBetaOffset=0,c.inertialRadiusOffset=0,c.lowerAlphaLimit=null,c.upperAlphaLimit=null,c.lowerBetaLimit=.01,c.upperBetaLimit=Math.PI-.01,c.lowerRadiusLimit=null,c.upperRadiusLimit=null,c.inertialPanningX=0,c.inertialPanningY=0,c.pinchToPanMaxDistance=20,c.panningDistanceLimit=null,c.panningOriginTarget=o.x.Zero(),c.panningInertia=.9,c.zoomOnFactor=1,c.targetScreenOffset=o.w.Zero(),c.allowUpsideDown=!0,c.useInputToRestoreState=!0,c._viewMatrix=new o.j,c.panningAxis=new o.x(1,1,0),c.onMeshTargetChangedObservable=new i.c,c.checkCollisions=!1,c.collisionRadius=new o.x(.5,.5,.5),c._previousPosition=o.x.Zero(),c._collisionVelocity=o.x.Zero(),c._newPosition=o.x.Zero(),c._computationVector=o.x.Zero(),c._onCollisionPositionChange=function(e,t,n){void 0===n&&(n=null),n?(c.setPosition(t),c.onCollide&&c.onCollide(n)):c._previousPosition.copyFrom(c._position);var r=Math.cos(c.alpha),i=Math.sin(c.alpha),o=Math.cos(c.beta),a=Math.sin(c.beta);0===a&&(a=1e-4);var s=c._getTargetPosition();c._computationVector.copyFromFloats(c.radius*r*a,c.radius*o,c.radius*i*a),s.addToRef(c._computationVector,c._newPosition),c._position.copyFrom(c._newPosition);var u=c.upVector;c.allowUpsideDown&&c.beta<0&&(u=(u=u.clone()).negate()),c._computeViewMatrix(c._position,s,u),c._viewMatrix.addAtIndex(12,c.targetScreenOffset.x),c._viewMatrix.addAtIndex(13,c.targetScreenOffset.y),c._collisionTriggered=!1},c._target=o.x.Zero(),s&&c.setTarget(s),c.alpha=n,c.beta=r,c.radius=a,c.getViewMatrix(),c.inputs=new nt(c),c.inputs.addKeyboard().addMouseWheel().addPointers(),c}return l.d(t,e),Object.defineProperty(t.prototype,"target",{get:function(){return this._target},set:function(e){this.setTarget(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this.setPosition(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"upVector",{get:function(){return this._upVector},set:function(e){this._upToYMatrix||(this._YToUpMatrix=new o.j,this._upToYMatrix=new o.j,this._upVector=o.x.Zero()),e.normalize(),this._upVector.copyFrom(e),this.setMatUp()},enumerable:!0,configurable:!0}),t.prototype.setMatUp=function(){o.j.RotationAlignToRef(o.x.UpReadOnly,this._upVector,this._YToUpMatrix),o.j.RotationAlignToRef(this._upVector,o.x.UpReadOnly,this._upToYMatrix)},Object.defineProperty(t.prototype,"angularSensibilityX",{get:function(){var e=this.inputs.attached.pointers;return e?e.angularSensibilityX:0},set:function(e){var t=this.inputs.attached.pointers;t&&(t.angularSensibilityX=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angularSensibilityY",{get:function(){var e=this.inputs.attached.pointers;return e?e.angularSensibilityY:0},set:function(e){var t=this.inputs.attached.pointers;t&&(t.angularSensibilityY=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pinchPrecision",{get:function(){var e=this.inputs.attached.pointers;return e?e.pinchPrecision:0},set:function(e){var t=this.inputs.attached.pointers;t&&(t.pinchPrecision=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pinchDeltaPercentage",{get:function(){var e=this.inputs.attached.pointers;return e?e.pinchDeltaPercentage:0},set:function(e){var t=this.inputs.attached.pointers;t&&(t.pinchDeltaPercentage=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"panningSensibility",{get:function(){var e=this.inputs.attached.pointers;return e?e.panningSensibility:0},set:function(e){var t=this.inputs.attached.pointers;t&&(t.panningSensibility=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysUp",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysUp:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysUp=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysDown",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysDown:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysDown=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysLeft",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysLeft:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysLeft=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysRight",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysRight:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysRight=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wheelPrecision",{get:function(){var e=this.inputs.attached.mousewheel;return e?e.wheelPrecision:0},set:function(e){var t=this.inputs.attached.mousewheel;t&&(t.wheelPrecision=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wheelDeltaPercentage",{get:function(){var e=this.inputs.attached.mousewheel;return e?e.wheelDeltaPercentage:0},set:function(e){var t=this.inputs.attached.mousewheel;t&&(t.wheelDeltaPercentage=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bouncingBehavior",{get:function(){return this._bouncingBehavior},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useBouncingBehavior",{get:function(){return null!=this._bouncingBehavior},set:function(e){e!==this.useBouncingBehavior&&(e?(this._bouncingBehavior=new Pe,this.addBehavior(this._bouncingBehavior)):this._bouncingBehavior&&(this.removeBehavior(this._bouncingBehavior),this._bouncingBehavior=null))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"framingBehavior",{get:function(){return this._framingBehavior},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useFramingBehavior",{get:function(){return null!=this._framingBehavior},set:function(e){e!==this.useFramingBehavior&&(e?(this._framingBehavior=new Re,this.addBehavior(this._framingBehavior)):this._framingBehavior&&(this.removeBehavior(this._framingBehavior),this._framingBehavior=null))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoRotationBehavior",{get:function(){return this._autoRotationBehavior},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useAutoRotationBehavior",{get:function(){return null!=this._autoRotationBehavior},set:function(e){e!==this.useAutoRotationBehavior&&(e?(this._autoRotationBehavior=new Ce,this.addBehavior(this._autoRotationBehavior)):this._autoRotationBehavior&&(this.removeBehavior(this._autoRotationBehavior),this._autoRotationBehavior=null))},enumerable:!0,configurable:!0}),t.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache._target=new o.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cache.alpha=void 0,this._cache.beta=void 0,this._cache.radius=void 0,this._cache.targetScreenOffset=o.w.Zero()},t.prototype._updateCache=function(t){t||e.prototype._updateCache.call(this),this._cache._target.copyFrom(this._getTargetPosition()),this._cache.alpha=this.alpha,this._cache.beta=this.beta,this._cache.radius=this.radius,this._cache.targetScreenOffset.copyFrom(this.targetScreenOffset)},t.prototype._getTargetPosition=function(){if(this._targetHost&&this._targetHost.getAbsolutePosition){var e=this._targetHost.absolutePosition;this._targetBoundingCenter?e.addToRef(this._targetBoundingCenter,this._target):this._target.copyFrom(e)}return this._getLockedTargetPosition()||this._target},t.prototype.storeState=function(){return this._storedAlpha=this.alpha,this._storedBeta=this.beta,this._storedRadius=this.radius,this._storedTarget=this._getTargetPosition().clone(),e.prototype.storeState.call(this)},t.prototype._restoreStateValues=function(){return!!e.prototype._restoreStateValues.call(this)&&(this.alpha=this._storedAlpha,this.beta=this._storedBeta,this.radius=this._storedRadius,this.setTarget(this._storedTarget.clone()),this.inertialAlphaOffset=0,this.inertialBetaOffset=0,this.inertialRadiusOffset=0,this.inertialPanningX=0,this.inertialPanningY=0,!0)},t.prototype._isSynchronizedViewMatrix=function(){return!!e.prototype._isSynchronizedViewMatrix.call(this)&&this._cache._target.equals(this._getTargetPosition())&&this._cache.alpha===this.alpha&&this._cache.beta===this.beta&&this._cache.radius===this.radius&&this._cache.targetScreenOffset.equals(this.targetScreenOffset)},t.prototype.attachControl=function(e,t,n,r){var i=this;void 0===n&&(n=!0),void 0===r&&(r=2),this._useCtrlForPanning=n,this._panningMouseButton=r,this.inputs.attachElement(e,t),this._reset=function(){i.inertialAlphaOffset=0,i.inertialBetaOffset=0,i.inertialRadiusOffset=0,i.inertialPanningX=0,i.inertialPanningY=0}},t.prototype.detachControl=function(e){this.inputs.detachElement(e),this._reset&&this._reset()},t.prototype._checkInputs=function(){if(!this._collisionTriggered){if(this.inputs.checkInputs(),0!==this.inertialAlphaOffset||0!==this.inertialBetaOffset||0!==this.inertialRadiusOffset){var t=this.inertialAlphaOffset;this.beta<=0&&(t*=-1),this.getScene().useRightHandedSystem&&(t*=-1),this.parent&&this.parent._getWorldMatrixDeterminant()<0&&(t*=-1),this.alpha+=t,this.beta+=this.inertialBetaOffset,this.radius-=this.inertialRadiusOffset,this.inertialAlphaOffset*=this.inertia,this.inertialBetaOffset*=this.inertia,this.inertialRadiusOffset*=this.inertia,Math.abs(this.inertialAlphaOffset)<o.h&&(this.inertialAlphaOffset=0),Math.abs(this.inertialBetaOffset)<o.h&&(this.inertialBetaOffset=0),Math.abs(this.inertialRadiusOffset)<this.speed*o.h&&(this.inertialRadiusOffset=0)}0===this.inertialPanningX&&0===this.inertialPanningY||(this._localDirection||(this._localDirection=o.x.Zero(),this._transformedDirection=o.x.Zero()),this._localDirection.copyFromFloats(this.inertialPanningX,this.inertialPanningY,this.inertialPanningY),this._localDirection.multiplyInPlace(this.panningAxis),this._viewMatrix.invertToRef(this._cameraTransformMatrix),o.x.TransformNormalToRef(this._localDirection,this._cameraTransformMatrix,this._transformedDirection),this.panningAxis.y||(this._transformedDirection.y=0),this._targetHost||(this.panningDistanceLimit?(this._transformedDirection.addInPlace(this._target),o.x.DistanceSquared(this._transformedDirection,this.panningOriginTarget)<=this.panningDistanceLimit*this.panningDistanceLimit&&this._target.copyFrom(this._transformedDirection)):this._target.addInPlace(this._transformedDirection)),this.inertialPanningX*=this.panningInertia,this.inertialPanningY*=this.panningInertia,Math.abs(this.inertialPanningX)<this.speed*o.h&&(this.inertialPanningX=0),Math.abs(this.inertialPanningY)<this.speed*o.h&&(this.inertialPanningY=0)),this._checkLimits(),e.prototype._checkInputs.call(this)}},t.prototype._checkLimits=function(){null==this.lowerBetaLimit?this.allowUpsideDown&&this.beta>Math.PI&&(this.beta=this.beta-2*Math.PI):this.beta<this.lowerBetaLimit&&(this.beta=this.lowerBetaLimit),null==this.upperBetaLimit?this.allowUpsideDown&&this.beta<-Math.PI&&(this.beta=this.beta+2*Math.PI):this.beta>this.upperBetaLimit&&(this.beta=this.upperBetaLimit),null!==this.lowerAlphaLimit&&this.alpha<this.lowerAlphaLimit&&(this.alpha=this.lowerAlphaLimit),null!==this.upperAlphaLimit&&this.alpha>this.upperAlphaLimit&&(this.alpha=this.upperAlphaLimit),null!==this.lowerRadiusLimit&&this.radius<this.lowerRadiusLimit&&(this.radius=this.lowerRadiusLimit,this.inertialRadiusOffset=0),null!==this.upperRadiusLimit&&this.radius>this.upperRadiusLimit&&(this.radius=this.upperRadiusLimit,this.inertialRadiusOffset=0)},t.prototype.rebuildAnglesAndRadius=function(){this._position.subtractToRef(this._getTargetPosition(),this._computationVector),0===this._upVector.x&&1===this._upVector.y&&0===this._upVector.z||o.x.TransformCoordinatesToRef(this._computationVector,this._upToYMatrix,this._computationVector),this.radius=this._computationVector.length(),0===this.radius&&(this.radius=1e-4),this.alpha=0===this._computationVector.x&&0===this._computationVector.z?Math.PI/2:Math.acos(this._computationVector.x/Math.sqrt(Math.pow(this._computationVector.x,2)+Math.pow(this._computationVector.z,2))),this._computationVector.z<0&&(this.alpha=2*Math.PI-this.alpha),this.beta=Math.acos(this._computationVector.y/this.radius),this._checkLimits()},t.prototype.setPosition=function(e){this._position.equals(e)||(this._position.copyFrom(e),this.rebuildAnglesAndRadius())},t.prototype.setTarget=function(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),e.getBoundingInfo)this._targetBoundingCenter=t?e.getBoundingInfo().boundingBox.centerWorld.clone():null,e.computeWorldMatrix(),this._targetHost=e,this._target=this._getTargetPosition(),this.onMeshTargetChangedObservable.notifyObservers(this._targetHost);else{var r=e,i=this._getTargetPosition();if(i&&!n&&i.equals(r))return;this._targetHost=null,this._target=r,this._targetBoundingCenter=null,this.onMeshTargetChangedObservable.notifyObservers(null)}this.rebuildAnglesAndRadius()},t.prototype._getViewMatrix=function(){var e=Math.cos(this.alpha),t=Math.sin(this.alpha),n=Math.cos(this.beta),r=Math.sin(this.beta);0===r&&(r=1e-4);var i=this._getTargetPosition();if(this._computationVector.copyFromFloats(this.radius*e*r,this.radius*n,this.radius*t*r),0===this._upVector.x&&1===this._upVector.y&&0===this._upVector.z||o.x.TransformCoordinatesToRef(this._computationVector,this._YToUpMatrix,this._computationVector),i.addToRef(this._computationVector,this._newPosition),this.getScene().collisionsEnabled&&this.checkCollisions){var a=this.getScene().collisionCoordinator;this._collider||(this._collider=a.createCollider()),this._collider._radius=this.collisionRadius,this._newPosition.subtractToRef(this._position,this._collisionVelocity),this._collisionTriggered=!0,a.getNewPosition(this._position,this._collisionVelocity,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId)}else{this._position.copyFrom(this._newPosition);var s=this.upVector;this.allowUpsideDown&&r<0&&(s=(s=s.clone()).negate()),this._computeViewMatrix(this._position,i,s),this._viewMatrix.addAtIndex(12,this.targetScreenOffset.x),this._viewMatrix.addAtIndex(13,this.targetScreenOffset.y)}return this._currentTarget=i,this._viewMatrix},t.prototype.zoomOn=function(e,t){void 0===t&&(t=!1),e=e||this.getScene().meshes;var n=fe.a.MinMax(e),r=o.x.Distance(n.min,n.max);this.radius=r*this.zoomOnFactor,this.focusOn({min:n.min,max:n.max,distance:r},t)},t.prototype.focusOn=function(e,t){var n,r;if(void 0===t&&(t=!1),void 0===e.min){var i=e||this.getScene().meshes;n=fe.a.MinMax(i),r=o.x.Distance(n.min,n.max)}else n=e,r=e.distance;this._target=fe.a.Center(n),t||(this.maxZ=2*r)},t.prototype.createRigCamera=function(e,n){var r=0;switch(this.cameraRigMode){case Ne.a.RIG_MODE_STEREOSCOPIC_ANAGLYPH:case Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case Ne.a.RIG_MODE_STEREOSCOPIC_OVERUNDER:case Ne.a.RIG_MODE_VR:r=this._cameraRigParams.stereoHalfAngle*(0===n?1:-1);break;case Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:r=this._cameraRigParams.stereoHalfAngle*(0===n?-1:1)}var i=new t(e,this.alpha+r,this.beta,this.radius,this._target,this.getScene());return i._cameraRigParams={},i},t.prototype._updateRigCameras=function(){var t=this._rigCameras[0],n=this._rigCameras[1];switch(t.beta=n.beta=this.beta,this.cameraRigMode){case Ne.a.RIG_MODE_STEREOSCOPIC_ANAGLYPH:case Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:case Ne.a.RIG_MODE_STEREOSCOPIC_OVERUNDER:case Ne.a.RIG_MODE_VR:t.alpha=this.alpha-this._cameraRigParams.stereoHalfAngle,n.alpha=this.alpha+this._cameraRigParams.stereoHalfAngle;break;case Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED:t.alpha=this.alpha+this._cameraRigParams.stereoHalfAngle,n.alpha=this.alpha-this._cameraRigParams.stereoHalfAngle}e.prototype._updateRigCameras.call(this)},t.prototype.dispose=function(){this.inputs.clear(),e.prototype.dispose.call(this)},t.prototype.getClassName=function(){return"ArcRotateCamera"},l.c([Object(L.c)()],t.prototype,"alpha",void 0),l.c([Object(L.c)()],t.prototype,"beta",void 0),l.c([Object(L.c)()],t.prototype,"radius",void 0),l.c([Object(L.o)("target")],t.prototype,"_target",void 0),l.c([Object(L.o)("upVector")],t.prototype,"_upVector",void 0),l.c([Object(L.c)()],t.prototype,"inertialAlphaOffset",void 0),l.c([Object(L.c)()],t.prototype,"inertialBetaOffset",void 0),l.c([Object(L.c)()],t.prototype,"inertialRadiusOffset",void 0),l.c([Object(L.c)()],t.prototype,"lowerAlphaLimit",void 0),l.c([Object(L.c)()],t.prototype,"upperAlphaLimit",void 0),l.c([Object(L.c)()],t.prototype,"lowerBetaLimit",void 0),l.c([Object(L.c)()],t.prototype,"upperBetaLimit",void 0),l.c([Object(L.c)()],t.prototype,"lowerRadiusLimit",void 0),l.c([Object(L.c)()],t.prototype,"upperRadiusLimit",void 0),l.c([Object(L.c)()],t.prototype,"inertialPanningX",void 0),l.c([Object(L.c)()],t.prototype,"inertialPanningY",void 0),l.c([Object(L.c)()],t.prototype,"pinchToPanMaxDistance",void 0),l.c([Object(L.c)()],t.prototype,"panningDistanceLimit",void 0),l.c([Object(L.o)()],t.prototype,"panningOriginTarget",void 0),l.c([Object(L.c)()],t.prototype,"panningInertia",void 0),l.c([Object(L.c)()],t.prototype,"zoomOnFactor",void 0),l.c([Object(L.c)()],t.prototype,"targetScreenOffset",void 0),l.c([Object(L.c)()],t.prototype,"allowUpsideDown",void 0),l.c([Object(L.c)()],t.prototype,"useInputToRestoreState",void 0),t}(yt);F.a.AddNodeConstructor("DeviceOrientationCamera",function(e,t){return function(){return new xt(e,o.x.Zero(),t)}});var xt=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i._tmpDragQuaternion=new o.q,i._disablePointerInputWhenUsingDeviceOrientation=!0,i._dragFactor=0,i._quaternionCache=new o.q,i.inputs.addDeviceOrientation(),i.inputs._deviceOrientationInput&&i.inputs._deviceOrientationInput._onDeviceOrientationChangedObservable.addOnce(function(){i._disablePointerInputWhenUsingDeviceOrientation&&i.inputs._mouseInput&&(i.inputs._mouseInput._allowCameraRotation=!1,i.inputs._mouseInput.onPointerMovedObservable.add(function(e){0!=i._dragFactor&&(i._initialQuaternion||(i._initialQuaternion=new o.q),o.q.FromEulerAnglesToRef(0,e.offsetX*i._dragFactor,0,i._tmpDragQuaternion),i._initialQuaternion.multiplyToRef(i._tmpDragQuaternion,i._initialQuaternion))}))}),i}return l.d(t,e),t.prototype.enableHorizontalDragging=function(e){void 0===e&&(e=1/300),this._dragFactor=e},t.prototype.getClassName=function(){return"DeviceOrientationCamera"},t.prototype._checkInputs=function(){e.prototype._checkInputs.call(this),this._quaternionCache.copyFrom(this.rotationQuaternion),this._initialQuaternion&&this._initialQuaternion.multiplyToRef(this.rotationQuaternion,this.rotationQuaternion)},t.prototype.resetToCurrentRotation=function(e){var t=this;void 0===e&&(e=o.c.Y),this.rotationQuaternion&&(this._initialQuaternion||(this._initialQuaternion=new o.q),this._initialQuaternion.copyFrom(this._quaternionCache||this.rotationQuaternion),["x","y","z"].forEach(function(n){e[n]?t._initialQuaternion[n]*=-1:t._initialQuaternion[n]=0}),this._initialQuaternion.normalize(),this._initialQuaternion.multiplyToRef(this.rotationQuaternion,this.rotationQuaternion))},t}(bt),Mt=function(e){function t(t){return e.call(this,t)||this}return l.d(t,e),t.prototype.addKeyboard=function(){return this.add(new it),this},t.prototype.addMouse=function(e){return void 0===e&&(e=!0),this.add(new ot(e)),this},t}(We),At=function(e){function t(t,n,r,i){void 0===i&&(i=!0);var a=e.call(this,t,n,r,i)||this;return a.ellipsoid=new o.x(1,1,1),a.ellipsoidOffset=new o.x(0,0,0),a.checkCollisions=!1,a.applyGravity=!1,a.cameraDirection=o.x.Zero(),a._trackRoll=0,a.rollCorrect=100,a.bankedTurn=!1,a.bankedTurnLimit=Math.PI/2,a.bankedTurnMultiplier=1,a._needMoveForGravity=!1,a._oldPosition=o.x.Zero(),a._diffPosition=o.x.Zero(),a._newPosition=o.x.Zero(),a._collisionMask=-1,a._onCollisionPositionChange=function(e,t,n){void 0===n&&(n=null),a._newPosition.copyFrom(t),a._newPosition.subtractToRef(a._oldPosition,a._diffPosition),a._diffPosition.length()>me.b.CollisionsEpsilon&&(a.position.addInPlace(a._diffPosition),a.onCollide&&n&&a.onCollide(n))},a.inputs=new Mt(a),a.inputs.addKeyboard().addMouse(),a}return l.d(t,e),Object.defineProperty(t.prototype,"angularSensibility",{get:function(){var e=this.inputs.attached.mouse;return e?e.angularSensibility:0},set:function(e){var t=this.inputs.attached.mouse;t&&(t.angularSensibility=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysForward",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysForward:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysForward=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysBackward",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysBackward:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysBackward=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysUp",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysUp:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysUp=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysDown",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysDown:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysDown=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysLeft",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysLeft:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysLeft=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keysRight",{get:function(){var e=this.inputs.attached.keyboard;return e?e.keysRight:[]},set:function(e){var t=this.inputs.attached.keyboard;t&&(t.keysRight=e)},enumerable:!0,configurable:!0}),t.prototype.attachControl=function(e,t){this.inputs.attachElement(e,t)},t.prototype.detachControl=function(e){this.inputs.detachElement(e),this.cameraDirection=new o.x(0,0,0)},Object.defineProperty(t.prototype,"collisionMask",{get:function(){return this._collisionMask},set:function(e){this._collisionMask=isNaN(e)?-1:e},enumerable:!0,configurable:!0}),t.prototype._collideWithWorld=function(e){(this.parent?o.x.TransformCoordinates(this.position,this.parent.getWorldMatrix()):this.position).subtractFromFloatsToRef(0,this.ellipsoid.y,0,this._oldPosition),this._oldPosition.addInPlace(this.ellipsoidOffset);var t=this.getScene().collisionCoordinator;this._collider||(this._collider=t.createCollider()),this._collider._radius=this.ellipsoid,this._collider.collisionMask=this._collisionMask;var n=e;this.applyGravity&&(n=e.add(this.getScene().gravity)),t.getNewPosition(this._oldPosition,n,this._collider,3,null,this._onCollisionPositionChange,this.uniqueId)},t.prototype._checkInputs=function(){this._localDirection||(this._localDirection=o.x.Zero(),this._transformedDirection=o.x.Zero()),this.inputs.checkInputs(),e.prototype._checkInputs.call(this)},t.prototype._decideIfNeedsToMove=function(){return this._needMoveForGravity||Math.abs(this.cameraDirection.x)>0||Math.abs(this.cameraDirection.y)>0||Math.abs(this.cameraDirection.z)>0},t.prototype._updatePosition=function(){this.checkCollisions&&this.getScene().collisionsEnabled?this._collideWithWorld(this.cameraDirection):e.prototype._updatePosition.call(this)},t.prototype.restoreRoll=function(e){var t=this._trackRoll,n=t-this.rotation.z;Math.abs(n)>=.001&&(this.rotation.z+=n/e,Math.abs(t-this.rotation.z)<=.001&&(this.rotation.z=t))},t.prototype.dispose=function(){this.inputs.clear(),e.prototype.dispose.call(this)},t.prototype.getClassName=function(){return"FlyCamera"},l.c([Object(L.o)()],t.prototype,"ellipsoid",void 0),l.c([Object(L.o)()],t.prototype,"ellipsoidOffset",void 0),l.c([Object(L.c)()],t.prototype,"checkCollisions",void 0),l.c([Object(L.c)()],t.prototype,"applyGravity",void 0),t}(yt),St=function(e){function t(t){return e.call(this,t)||this}return l.d(t,e),t.prototype.addKeyboard=function(){return this.add(new at),this},t.prototype.addMouseWheel=function(){return this.add(new st),this},t.prototype.addPointers=function(){return this.add(new ut),this},t.prototype.addVRDeviceOrientation=function(){return console.warn("DeviceOrientation support not yet implemented for FollowCamera."),this},t}(We);F.a.AddNodeConstructor("FollowCamera",function(e,t){return function(){return new Pt(e,o.x.Zero(),t)}}),F.a.AddNodeConstructor("ArcFollowCamera",function(e,t){return function(){return new Rt(e,0,0,1,null,t)}});var Ct,Pt=function(e){function t(t,n,r,i){void 0===i&&(i=null);var o=e.call(this,t,n,r)||this;return o.radius=12,o.lowerRadiusLimit=null,o.upperRadiusLimit=null,o.rotationOffset=0,o.lowerRotationOffsetLimit=null,o.upperRotationOffsetLimit=null,o.heightOffset=4,o.lowerHeightOffsetLimit=null,o.upperHeightOffsetLimit=null,o.cameraAcceleration=.05,o.maxCameraSpeed=20,o.lockedTarget=i,o.inputs=new St(o),o.inputs.addKeyboard().addMouseWheel().addPointers(),o}return l.d(t,e),t.prototype._follow=function(e){if(e){var t;if(e.rotationQuaternion){var n=new o.j;e.rotationQuaternion.toRotationMatrix(n),t=Math.atan2(n.m[8],n.m[10])}else t=e.rotation.y;var r=ye.h.ToRadians(this.rotationOffset)+t,i=e.getAbsolutePosition(),a=i.x+Math.sin(r)*this.radius,s=i.z+Math.cos(r)*this.radius,u=(a-this.position.x)*this.cameraAcceleration*2,l=(i.y+this.heightOffset-this.position.y)*this.cameraAcceleration,c=(s-this.position.z)*this.cameraAcceleration*2;(u>this.maxCameraSpeed||u<-this.maxCameraSpeed)&&(u=u<1?-this.maxCameraSpeed:this.maxCameraSpeed),(l>this.maxCameraSpeed||l<-this.maxCameraSpeed)&&(l=l<1?-this.maxCameraSpeed:this.maxCameraSpeed),(c>this.maxCameraSpeed||c<-this.maxCameraSpeed)&&(c=c<1?-this.maxCameraSpeed:this.maxCameraSpeed),this.position=new o.x(this.position.x+u,this.position.y+l,this.position.z+c),this.setTarget(i)}},t.prototype.attachControl=function(e,t){this.inputs.attachElement(e,t),this._reset=function(){}},t.prototype.detachControl=function(e){this.inputs.detachElement(e),this._reset&&this._reset()},t.prototype._checkInputs=function(){this.inputs.checkInputs(),this._checkLimits(),e.prototype._checkInputs.call(this),this.lockedTarget&&this._follow(this.lockedTarget)},t.prototype._checkLimits=function(){null!==this.lowerRadiusLimit&&this.radius<this.lowerRadiusLimit&&(this.radius=this.lowerRadiusLimit),null!==this.upperRadiusLimit&&this.radius>this.upperRadiusLimit&&(this.radius=this.upperRadiusLimit),null!==this.lowerHeightOffsetLimit&&this.heightOffset<this.lowerHeightOffsetLimit&&(this.heightOffset=this.lowerHeightOffsetLimit),null!==this.upperHeightOffsetLimit&&this.heightOffset>this.upperHeightOffsetLimit&&(this.heightOffset=this.upperHeightOffsetLimit),null!==this.lowerRotationOffsetLimit&&this.rotationOffset<this.lowerRotationOffsetLimit&&(this.rotationOffset=this.lowerRotationOffsetLimit),null!==this.upperRotationOffsetLimit&&this.rotationOffset>this.upperRotationOffsetLimit&&(this.rotationOffset=this.upperRotationOffsetLimit)},t.prototype.getClassName=function(){return"FollowCamera"},l.c([Object(L.c)()],t.prototype,"radius",void 0),l.c([Object(L.c)()],t.prototype,"lowerRadiusLimit",void 0),l.c([Object(L.c)()],t.prototype,"upperRadiusLimit",void 0),l.c([Object(L.c)()],t.prototype,"rotationOffset",void 0),l.c([Object(L.c)()],t.prototype,"lowerRotationOffsetLimit",void 0),l.c([Object(L.c)()],t.prototype,"upperRotationOffsetLimit",void 0),l.c([Object(L.c)()],t.prototype,"heightOffset",void 0),l.c([Object(L.c)()],t.prototype,"lowerHeightOffsetLimit",void 0),l.c([Object(L.c)()],t.prototype,"upperHeightOffsetLimit",void 0),l.c([Object(L.c)()],t.prototype,"cameraAcceleration",void 0),l.c([Object(L.c)()],t.prototype,"maxCameraSpeed",void 0),l.c([Object(L.k)("lockedTargetId")],t.prototype,"lockedTarget",void 0),t}(yt),Rt=function(e){function t(t,n,r,i,a,s){var u=e.call(this,t,o.x.Zero(),s)||this;return u.alpha=n,u.beta=r,u.radius=i,u.target=a,u._cartesianCoordinates=o.x.Zero(),u._follow(),u}return l.d(t,e),t.prototype._follow=function(){if(this.target){this._cartesianCoordinates.x=this.radius*Math.cos(this.alpha)*Math.cos(this.beta),this._cartesianCoordinates.y=this.radius*Math.sin(this.beta),this._cartesianCoordinates.z=this.radius*Math.sin(this.alpha)*Math.cos(this.beta);var e=this.target.getAbsolutePosition();this.position=e.add(this._cartesianCoordinates),this.setTarget(e)}},t.prototype._checkInputs=function(){e.prototype._checkInputs.call(this),this._follow()},t.prototype.getClassName=function(){return"ArcFollowCamera"},t}(yt),Dt=n(35),Ot=n(39);!function(e){e[e.VIVE=0]="VIVE",e[e.OCULUS=1]="OCULUS",e[e.WINDOWS=2]="WINDOWS",e[e.GEAR_VR=3]="GEAR_VR",e[e.DAYDREAM=4]="DAYDREAM",e[e.GENERIC=5]="GENERIC"}(Ct||(Ct={}));var wt,Lt,It=function(){function e(){}return e.InitiateController=function(e){for(var t=0,n=this._ControllerFactories;t<n.length;t++){var r=n[t];if(r.canCreate(e))return r.create(e)}if(this._DefaultControllerFactory)return this._DefaultControllerFactory(e);throw"The type of gamepad you are trying to load needs to be imported first or is not supported."},e._ControllerFactories=[],e._DefaultControllerFactory=null,e}(),Ft=function(e){function t(t){var n=e.call(this,t.id,t.index,t)||this;return n._deviceRoomPosition=o.x.Zero(),n._deviceRoomRotationQuaternion=new o.q,n.devicePosition=o.x.Zero(),n.deviceRotationQuaternion=new o.q,n.deviceScaleFactor=1,n._trackPosition=!0,n._maxRotationDistFromHeadset=Math.PI/5,n._draggedRoomRotation=0,n._leftHandSystemQuaternion=new o.q,n._deviceToWorld=o.j.Identity(),n._pointingPoseNode=null,n._workingMatrix=o.j.Identity(),n._meshAttachedObservable=new i.c,n.type=Ke.POSE_ENABLED,n.controllerType=Ct.GENERIC,n.position=o.x.Zero(),n.rotationQuaternion=new o.q,n._calculatedPosition=o.x.Zero(),n._calculatedRotation=new o.q,o.q.RotationYawPitchRollToRef(Math.PI,0,0,n._leftHandSystemQuaternion),n}return l.d(t,e),t.prototype._disableTrackPosition=function(e){this._trackPosition&&(this._calculatedPosition.copyFrom(e),this._trackPosition=!1)},t.prototype.update=function(){e.prototype.update.call(this),this._updatePoseAndMesh()},t.prototype._updatePoseAndMesh=function(){if(this.updateFromDevice(this.browserGamepad.pose),!this._trackPosition&&S.a.LastCreatedScene&&S.a.LastCreatedScene.activeCamera&&S.a.LastCreatedScene.activeCamera.devicePosition&&((e=S.a.LastCreatedScene.activeCamera)._computeDevicePosition(),this._deviceToWorld.setTranslation(e.devicePosition),e.deviceRotationQuaternion)){var e;(e=e)._deviceRoomRotationQuaternion.toEulerAnglesToRef(o.t.Vector3[0]);var t=Math.atan2(Math.sin(o.t.Vector3[0].y-this._draggedRoomRotation),Math.cos(o.t.Vector3[0].y-this._draggedRoomRotation));if(Math.abs(t)>this._maxRotationDistFromHeadset){var n=t-(t<0?-this._maxRotationDistFromHeadset:this._maxRotationDistFromHeadset);this._draggedRoomRotation+=n;var r=Math.sin(-n),i=Math.cos(-n);this._calculatedPosition.x=this._calculatedPosition.x*i-this._calculatedPosition.z*r,this._calculatedPosition.z=this._calculatedPosition.x*r+this._calculatedPosition.z*i}}o.x.TransformCoordinatesToRef(this._calculatedPosition,this._deviceToWorld,this.devicePosition),this._deviceToWorld.getRotationMatrixToRef(this._workingMatrix),o.q.FromRotationMatrixToRef(this._workingMatrix,this.deviceRotationQuaternion),this.deviceRotationQuaternion.multiplyInPlace(this._calculatedRotation),this._mesh&&(this._mesh.position.copyFrom(this.devicePosition),this._mesh.rotationQuaternion&&this._mesh.rotationQuaternion.copyFrom(this.deviceRotationQuaternion))},t.prototype.updateFromDevice=function(e){if(e){this.rawPose=e,e.position&&(this._deviceRoomPosition.copyFromFloats(e.position[0],e.position[1],-e.position[2]),this._mesh&&this._mesh.getScene().useRightHandedSystem&&(this._deviceRoomPosition.z*=-1),this._trackPosition&&this._deviceRoomPosition.scaleToRef(this.deviceScaleFactor,this._calculatedPosition),this._calculatedPosition.addInPlace(this.position));var t=this.rawPose;e.orientation&&t.orientation&&(this._deviceRoomRotationQuaternion.copyFromFloats(t.orientation[0],t.orientation[1],-t.orientation[2],-t.orientation[3]),this._mesh&&(this._mesh.getScene().useRightHandedSystem?(this._deviceRoomRotationQuaternion.z*=-1,this._deviceRoomRotationQuaternion.w*=-1):this._deviceRoomRotationQuaternion.multiplyToRef(this._leftHandSystemQuaternion,this._deviceRoomRotationQuaternion)),this._deviceRoomRotationQuaternion.multiplyToRef(this.rotationQuaternion,this._calculatedRotation))}},t.prototype.attachToMesh=function(e){if(this._mesh&&(this._mesh.parent=null),this._mesh=e,this._poseControlledCamera&&(this._mesh.parent=this._poseControlledCamera),this._mesh.rotationQuaternion||(this._mesh.rotationQuaternion=new o.q),this._updatePoseAndMesh(),this._pointingPoseNode){for(var t=[],n=this._pointingPoseNode;n.parent;)t.push(n.parent),n=n.parent;t.reverse().forEach(function(e){e.computeWorldMatrix(!0)})}this._meshAttachedObservable.notifyObservers(e)},t.prototype.attachToPoseControlledCamera=function(e){this._poseControlledCamera=e,this._mesh&&(this._mesh.parent=this._poseControlledCamera)},t.prototype.dispose=function(){this._mesh&&this._mesh.dispose(),this._mesh=null,e.prototype.dispose.call(this)},Object.defineProperty(t.prototype,"mesh",{get:function(){return this._mesh},enumerable:!0,configurable:!0}),t.prototype.getForwardRay=function(e){if(void 0===e&&(e=100),!this.mesh)return new Ot.a(o.x.Zero(),new o.x(0,0,1),e);var t=this._pointingPoseNode?this._pointingPoseNode.getWorldMatrix():this.mesh.getWorldMatrix(),n=t.getTranslation(),r=new o.x(0,0,-1),i=o.x.TransformNormal(r,t),a=o.x.Normalize(i);return new Ot.a(n,a,e)},t.POINTING_POSE="POINTING_POSE",t}(Ke);!function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.X=2]="X",e[e.Y=3]="Y",e[e.Start=4]="Start",e[e.Back=5]="Back",e[e.LB=6]="LB",e[e.RB=7]="RB",e[e.LeftStick=8]="LeftStick",e[e.RightStick=9]="RightStick"}(wt||(wt={})),function(e){e[e.Up=0]="Up",e[e.Down=1]="Down",e[e.Left=2]="Left",e[e.Right=3]="Right"}(Lt||(Lt={}));var Nt=function(e){function t(t,n,r,o){void 0===o&&(o=!1);var a=e.call(this,t,n,r,0,1,2,3)||this;return a._leftTrigger=0,a._rightTrigger=0,a.onButtonDownObservable=new i.c,a.onButtonUpObservable=new i.c,a.onPadDownObservable=new i.c,a.onPadUpObservable=new i.c,a._buttonA=0,a._buttonB=0,a._buttonX=0,a._buttonY=0,a._buttonBack=0,a._buttonStart=0,a._buttonLB=0,a._buttonRB=0,a._buttonLeftStick=0,a._buttonRightStick=0,a._dPadUp=0,a._dPadDown=0,a._dPadLeft=0,a._dPadRight=0,a._isXboxOnePad=!1,a.type=Ke.XBOX,a._isXboxOnePad=o,a}return l.d(t,e),t.prototype.onlefttriggerchanged=function(e){this._onlefttriggerchanged=e},t.prototype.onrighttriggerchanged=function(e){this._onrighttriggerchanged=e},Object.defineProperty(t.prototype,"leftTrigger",{get:function(){return this._leftTrigger},set:function(e){this._onlefttriggerchanged&&this._leftTrigger!==e&&this._onlefttriggerchanged(e),this._leftTrigger=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightTrigger",{get:function(){return this._rightTrigger},set:function(e){this._onrighttriggerchanged&&this._rightTrigger!==e&&this._onrighttriggerchanged(e),this._rightTrigger=e},enumerable:!0,configurable:!0}),t.prototype.onbuttondown=function(e){this._onbuttondown=e},t.prototype.onbuttonup=function(e){this._onbuttonup=e},t.prototype.ondpaddown=function(e){this._ondpaddown=e},t.prototype.ondpadup=function(e){this._ondpadup=e},t.prototype._setButtonValue=function(e,t,n){return e!==t&&(1===e&&(this._onbuttondown&&this._onbuttondown(n),this.onButtonDownObservable.notifyObservers(n)),0===e&&(this._onbuttonup&&this._onbuttonup(n),this.onButtonUpObservable.notifyObservers(n))),e},t.prototype._setDPadValue=function(e,t,n){return e!==t&&(1===e&&(this._ondpaddown&&this._ondpaddown(n),this.onPadDownObservable.notifyObservers(n)),0===e&&(this._ondpadup&&this._ondpadup(n),this.onPadUpObservable.notifyObservers(n))),e},Object.defineProperty(t.prototype,"buttonA",{get:function(){return this._buttonA},set:function(e){this._buttonA=this._setButtonValue(e,this._buttonA,wt.A)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonB",{get:function(){return this._buttonB},set:function(e){this._buttonB=this._setButtonValue(e,this._buttonB,wt.B)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonX",{get:function(){return this._buttonX},set:function(e){this._buttonX=this._setButtonValue(e,this._buttonX,wt.X)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonY",{get:function(){return this._buttonY},set:function(e){this._buttonY=this._setButtonValue(e,this._buttonY,wt.Y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonStart",{get:function(){return this._buttonStart},set:function(e){this._buttonStart=this._setButtonValue(e,this._buttonStart,wt.Start)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonBack",{get:function(){return this._buttonBack},set:function(e){this._buttonBack=this._setButtonValue(e,this._buttonBack,wt.Back)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonLB",{get:function(){return this._buttonLB},set:function(e){this._buttonLB=this._setButtonValue(e,this._buttonLB,wt.LB)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonRB",{get:function(){return this._buttonRB},set:function(e){this._buttonRB=this._setButtonValue(e,this._buttonRB,wt.RB)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonLeftStick",{get:function(){return this._buttonLeftStick},set:function(e){this._buttonLeftStick=this._setButtonValue(e,this._buttonLeftStick,wt.LeftStick)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buttonRightStick",{get:function(){return this._buttonRightStick},set:function(e){this._buttonRightStick=this._setButtonValue(e,this._buttonRightStick,wt.RightStick)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dPadUp",{get:function(){return this._dPadUp},set:function(e){this._dPadUp=this._setDPadValue(e,this._dPadUp,Lt.Up)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dPadDown",{get:function(){return this._dPadDown},set:function(e){this._dPadDown=this._setDPadValue(e,this._dPadDown,Lt.Down)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dPadLeft",{get:function(){return this._dPadLeft},set:function(e){this._dPadLeft=this._setDPadValue(e,this._dPadLeft,Lt.Left)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dPadRight",{get:function(){return this._dPadRight},set:function(e){this._dPadRight=this._setDPadValue(e,this._dPadRight,Lt.Right)},enumerable:!0,configurable:!0}),t.prototype.update=function(){e.prototype.update.call(this),this._isXboxOnePad?(this.buttonA=this.browserGamepad.buttons[0].value,this.buttonB=this.browserGamepad.buttons[1].value,this.buttonX=this.browserGamepad.buttons[2].value,this.buttonY=this.browserGamepad.buttons[3].value,this.buttonLB=this.browserGamepad.buttons[4].value,this.buttonRB=this.browserGamepad.buttons[5].value,this.leftTrigger=this.browserGamepad.axes[2],this.rightTrigger=this.browserGamepad.axes[5],this.buttonBack=this.browserGamepad.buttons[9].value,this.buttonStart=this.browserGamepad.buttons[8].value,this.buttonLeftStick=this.browserGamepad.buttons[6].value,this.buttonRightStick=this.browserGamepad.buttons[7].value,this.dPadUp=this.browserGamepad.buttons[11].value,this.dPadDown=this.browserGamepad.buttons[12].value,this.dPadLeft=this.browserGamepad.buttons[13].value,this.dPadRight=this.browserGamepad.buttons[14].value):(this.buttonA=this.browserGamepad.buttons[0].value,this.buttonB=this.browserGamepad.buttons[1].value,this.buttonX=this.browserGamepad.buttons[2].value,this.buttonY=this.browserGamepad.buttons[3].value,this.buttonLB=this.browserGamepad.buttons[4].value,this.buttonRB=this.browserGamepad.buttons[5].value,this.leftTrigger=this.browserGamepad.buttons[6].value,this.rightTrigger=this.browserGamepad.buttons[7].value,this.buttonBack=this.browserGamepad.buttons[8].value,this.buttonStart=this.browserGamepad.buttons[9].value,this.buttonLeftStick=this.browserGamepad.buttons[10].value,this.buttonRightStick=this.browserGamepad.buttons[11].value,this.dPadUp=this.browserGamepad.buttons[12].value,this.dPadDown=this.browserGamepad.buttons[13].value,this.dPadLeft=this.browserGamepad.buttons[14].value,this.dPadRight=this.browserGamepad.buttons[15].value)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.onButtonDownObservable.clear(),this.onButtonUpObservable.clear(),this.onPadDownObservable.clear(),this.onPadUpObservable.clear()},t}(Ke),Bt=function(){function e(e){var t=this;this._scene=e,this._babylonGamepads=[],this._oneGamepadConnected=!1,this._isMonitoring=!1,this.onGamepadDisconnectedObservable=new i.c,Dt.a.IsWindowObjectExist()?(this._gamepadEventSupported="GamepadEvent"in window,this._gamepadSupport=navigator.getGamepads||navigator.webkitGetGamepads||navigator.msGetGamepads||navigator.webkitGamepads):this._gamepadEventSupported=!1,this.onGamepadConnectedObservable=new i.c(function(e){for(var n in t._babylonGamepads){var r=t._babylonGamepads[n];r&&r._isConnected&&t.onGamepadConnectedObservable.notifyObserver(e,r)}}),this._onGamepadConnectedEvent=function(e){var n,r=e.gamepad;r.index in t._babylonGamepads&&t._babylonGamepads[r.index].isConnected||(t._babylonGamepads[r.index]?((n=t._babylonGamepads[r.index]).browserGamepad=r,n._isConnected=!0):n=t._addNewGamepad(r),t.onGamepadConnectedObservable.notifyObservers(n),t._startMonitoringGamepads())},this._onGamepadDisconnectedEvent=function(e){var n=e.gamepad;for(var r in t._babylonGamepads)if(t._babylonGamepads[r].index===n.index){var i=t._babylonGamepads[r];i._isConnected=!1,t.onGamepadDisconnectedObservable.notifyObservers(i);break}},this._gamepadSupport&&(this._updateGamepadObjects(),this._babylonGamepads.length&&this._startMonitoringGamepads(),this._gamepadEventSupported?(window.addEventListener("gamepadconnected",this._onGamepadConnectedEvent,!1),window.addEventListener("gamepaddisconnected",this._onGamepadDisconnectedEvent,!1)):this._startMonitoringGamepads())}return Object.defineProperty(e.prototype,"gamepads",{get:function(){return this._babylonGamepads},enumerable:!0,configurable:!0}),e.prototype.getGamepadByType=function(e){void 0===e&&(e=Ke.XBOX);for(var t=0,n=this._babylonGamepads;t<n.length;t++){var r=n[t];if(r&&r.type===e)return r}return null},e.prototype.dispose=function(){this._gamepadEventSupported&&(this._onGamepadConnectedEvent&&window.removeEventListener("gamepadconnected",this._onGamepadConnectedEvent),this._onGamepadDisconnectedEvent&&window.removeEventListener("gamepaddisconnected",this._onGamepadDisconnectedEvent),this._onGamepadConnectedEvent=null,this._onGamepadDisconnectedEvent=null),this._babylonGamepads.forEach(function(e){e.dispose()}),this.onGamepadConnectedObservable.clear(),this.onGamepadDisconnectedObservable.clear(),this._oneGamepadConnected=!1,this._stopMonitoringGamepads(),this._babylonGamepads=[]},e.prototype._addNewGamepad=function(e){var t;this._oneGamepadConnected||(this._oneGamepadConnected=!0);var n=-1!==e.id.search("Xbox One");return t=n||-1!==e.id.search("Xbox 360")||-1!==e.id.search("xinput")?new Nt(e.id,e.index,e,n):e.pose?It.InitiateController(e):new Qe(e.id,e.index,e),this._babylonGamepads[t.index]=t,t},e.prototype._startMonitoringGamepads=function(){this._isMonitoring||(this._isMonitoring=!0,this._scene||this._checkGamepadsStatus())},e.prototype._stopMonitoringGamepads=function(){this._isMonitoring=!1},e.prototype._checkGamepadsStatus=function(){var e=this;for(var t in this._updateGamepadObjects(),this._babylonGamepads){var n=this._babylonGamepads[t];n&&n.isConnected&&n.update()}this._isMonitoring&&!this._scene&&ye.h.QueueNewFrame(function(){e._checkGamepadsStatus()})},e.prototype._updateGamepadObjects=function(){for(var e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[],t=0;t<e.length;t++){var n=e[t];if(n)if(this._babylonGamepads[n.index])this._babylonGamepads[t].browserGamepad=n,this._babylonGamepads[t].isConnected||(this._babylonGamepads[t]._isConnected=!0,this.onGamepadConnectedObservable.notifyObservers(this._babylonGamepads[t]));else{var r=this._addNewGamepad(n);this.onGamepadConnectedObservable.notifyObservers(r)}}},e}();Object.defineProperty(H.a.prototype,"gamepadManager",{get:function(){if(!this._gamepadManager){this._gamepadManager=new Bt(this);var e=this._getComponent(xe.a.NAME_GAMEPAD);e||(e=new kt(this),this._addComponent(e))}return this._gamepadManager},enumerable:!0,configurable:!0}),dt.prototype.addGamepad=function(){return this.add(new pt),this},nt.prototype.addGamepad=function(){return this.add(new qe),this};var kt=function(){function e(e){this.name=xe.a.NAME_GAMEPAD,this.scene=e}return e.prototype.register=function(){this.scene._beforeCameraUpdateStage.registerStep(xe.a.STEP_BEFORECAMERAUPDATE_GAMEPAD,this,this._beforeCameraUpdate)},e.prototype.rebuild=function(){},e.prototype.dispose=function(){var e=this.scene._gamepadManager;e&&(e.dispose(),this.scene._gamepadManager=null)},e.prototype._beforeCameraUpdate=function(){var e=this.scene._gamepadManager;e&&e._isMonitoring&&e._checkGamepadsStatus()},e}();F.a.AddNodeConstructor("FreeCamera",function(e,t){return function(){return new Ut(e,o.x.Zero(),t)}});var Ut=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.inputs.addGamepad(),i}return l.d(t,e),Object.defineProperty(t.prototype,"gamepadAngularSensibility",{get:function(){var e=this.inputs.attached.gamepad;return e?e.gamepadAngularSensibility:0},set:function(e){var t=this.inputs.attached.gamepad;t&&(t.gamepadAngularSensibility=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gamepadMoveSensibility",{get:function(){var e=this.inputs.attached.gamepad;return e?e.gamepadMoveSensibility:0},set:function(e){var t=this.inputs.attached.gamepad;t&&(t.gamepadMoveSensibility=e)},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"UniversalCamera"},t}(Tt);Ne.a._createDefaultParsedCamera=function(e,t){return new Ut(e,o.x.Zero(),t)},F.a.AddNodeConstructor("GamepadCamera",function(e,t){return function(){return new Vt(e,o.x.Zero(),t)}});var Vt=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return l.d(t,e),t.prototype.getClassName=function(){return"GamepadCamera"},t}(Ut),Gt=n(28),jt=n(5);jt.a.ShadersStore.postprocessVertexShader="\nattribute vec2 position;\nuniform vec2 scale;\n\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nvUV=(position*madd+madd)*scale;\ngl_Position=vec4(position,0.0,1.0);\n}";var zt=function(){function e(e,t,n,r,a,s,u,l,c,h,d,f,p,m){void 0===u&&(u=_.a.TEXTURE_NEAREST_SAMPLINGMODE),void 0===h&&(h=null),void 0===d&&(d=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===f&&(f="postprocess"),void 0===m&&(m=!1),this.name=e,this.width=-1,this.height=-1,this._outputTexture=null,this.autoClear=!0,this.alphaMode=_.a.ALPHA_DISABLE,this.animations=new Array,this.enablePixelPerfectMode=!1,this.forceFullscreenViewport=!0,this.scaleMode=_.a.SCALEMODE_FLOOR,this.alwaysForcePOT=!1,this._samples=1,this.adaptScaleToCurrentViewport=!1,this._reusable=!1,this._textures=new Gt.a(2),this._currentRenderTextureInd=0,this._scaleRatio=new o.w(1,1),this._texelSize=o.w.Zero(),this.onActivateObservable=new i.c,this.onSizeChangedObservable=new i.c,this.onApplyObservable=new i.c,this.onBeforeRenderObservable=new i.c,this.onAfterRenderObservable=new i.c,null!=s?(this._camera=s,this._scene=s.getScene(),s.attachPostProcess(this),this._engine=this._scene.getEngine(),this._scene.postProcesses.push(this),this.uniqueId=this._scene.getUniqueId()):l&&(this._engine=l,this._engine.postProcesses.push(this)),this._options=a,this.renderTargetSamplingMode=u||_.a.TEXTURE_NEAREST_SAMPLINGMODE,this._reusable=c||!1,this._textureType=d,this._samplers=r||[],this._samplers.push("textureSampler"),this._fragmentUrl=t,this._vertexUrl=f,this._parameters=n||[],this._parameters.push("scale"),this._indexParameters=p,m||this.updateEffect(h)}return Object.defineProperty(e.prototype,"samples",{get:function(){return this._samples},set:function(e){var t=this;this._samples=e,this._textures.forEach(function(e){e.samples!==t._samples&&t._engine.updateRenderTargetTextureSampleCount(e,t._samples)})},enumerable:!0,configurable:!0}),e.prototype.getEffectName=function(){return this._fragmentUrl},Object.defineProperty(e.prototype,"onActivate",{set:function(e){this._onActivateObserver&&this.onActivateObservable.remove(this._onActivateObserver),e&&(this._onActivateObserver=this.onActivateObservable.add(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onSizeChanged",{set:function(e){this._onSizeChangedObserver&&this.onSizeChangedObservable.remove(this._onSizeChangedObserver),this._onSizeChangedObserver=this.onSizeChangedObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onApply",{set:function(e){this._onApplyObserver&&this.onApplyObservable.remove(this._onApplyObserver),this._onApplyObserver=this.onApplyObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBeforeRender",{set:function(e){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onAfterRender",{set:function(e){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=this.onAfterRenderObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputTexture",{get:function(){return this._textures.data[this._currentRenderTextureInd]},set:function(e){this._forcedOutputTexture=e},enumerable:!0,configurable:!0}),e.prototype.getCamera=function(){return this._camera},Object.defineProperty(e.prototype,"texelSize",{get:function(){return this._shareOutputWithPostProcess?this._shareOutputWithPostProcess.texelSize:(this._forcedOutputTexture&&this._texelSize.copyFromFloats(1/this._forcedOutputTexture.width,1/this._forcedOutputTexture.height),this._texelSize)},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"PostProcess"},e.prototype.getEngine=function(){return this._engine},e.prototype.getEffect=function(){return this._effect},e.prototype.shareOutputWith=function(e){return this._disposeTextures(),this._shareOutputWithPostProcess=e,this},e.prototype.useOwnOutput=function(){0==this._textures.length&&(this._textures=new Gt.a(2)),this._shareOutputWithPostProcess=null},e.prototype.updateEffect=function(e,t,n,r,i,o){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),this._effect=this._engine.createEffect({vertex:this._vertexUrl,fragment:this._fragmentUrl},["position"],t||this._parameters,n||this._samplers,null!==e?e:"",void 0,i,o,r||this._indexParameters)},e.prototype.isReusable=function(){return this._reusable},e.prototype.markTextureDirty=function(){this.width=-1},e.prototype.activate=function(e,t,n){var r=this;void 0===t&&(t=null);var i=(e=e||this._camera).getScene(),o=i.getEngine(),a=o.getCaps().maxTextureSize,s=(t?t.width:this._engine.getRenderWidth(!0))*this._options|0,u=(t?t.height:this._engine.getRenderHeight(!0))*this._options|0,l=e.parent;!l||l.leftCamera!=e&&l.rightCamera!=e||(s/=2);var c,h=this._options.width||s,d=this._options.height||u;if(!this._shareOutputWithPostProcess&&!this._forcedOutputTexture){if(this.adaptScaleToCurrentViewport){var f=o.currentViewport;f&&(h*=f.width,d*=f.height)}if((this.renderTargetSamplingMode===_.a.TEXTURE_TRILINEAR_SAMPLINGMODE||this.alwaysForcePOT)&&(this._options.width||(h=o.needPOTTextures?ye.h.GetExponentOfTwo(h,a,this.scaleMode):h),this._options.height||(d=o.needPOTTextures?ye.h.GetExponentOfTwo(d,a,this.scaleMode):d)),this.width!==h||this.height!==d){if(this._textures.length>0){for(var p=0;p<this._textures.length;p++)this._engine._releaseTexture(this._textures.data[p]);this._textures.reset()}this.width=h,this.height=d;var m={width:this.width,height:this.height},g={generateMipMaps:!1,generateDepthBuffer:n||0===e._postProcesses.indexOf(this),generateStencilBuffer:(n||0===e._postProcesses.indexOf(this))&&this._engine.isStencilEnable,samplingMode:this.renderTargetSamplingMode,type:this._textureType};this._textures.push(this._engine.createRenderTargetTexture(m,g)),this._reusable&&this._textures.push(this._engine.createRenderTargetTexture(m,g)),this._texelSize.copyFromFloats(1/this.width,1/this.height),this.onSizeChangedObservable.notifyObservers(this)}this._textures.forEach(function(e){e.samples!==r.samples&&r._engine.updateRenderTargetTextureSampleCount(e,r.samples)})}return this._shareOutputWithPostProcess?c=this._shareOutputWithPostProcess.inputTexture:this._forcedOutputTexture?(c=this._forcedOutputTexture,this.width=this._forcedOutputTexture.width,this.height=this._forcedOutputTexture.height):c=this.inputTexture,this.enablePixelPerfectMode?(this._scaleRatio.copyFromFloats(s/h,u/d),this._engine.bindFramebuffer(c,0,s,u,this.forceFullscreenViewport)):(this._scaleRatio.copyFromFloats(1,1),this._engine.bindFramebuffer(c,0,void 0,void 0,this.forceFullscreenViewport)),this.onActivateObservable.notifyObservers(e),this.autoClear&&this.alphaMode===_.a.ALPHA_DISABLE&&this._engine.clear(this.clearColor?this.clearColor:i.clearColor,i._allowPostProcessClearColor,!0,!0),this._reusable&&(this._currentRenderTextureInd=(this._currentRenderTextureInd+1)%2),c},Object.defineProperty(e.prototype,"isSupported",{get:function(){return this._effect.isSupported},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aspectRatio",{get:function(){return this._shareOutputWithPostProcess?this._shareOutputWithPostProcess.aspectRatio:this._forcedOutputTexture?this._forcedOutputTexture.width/this._forcedOutputTexture.height:this.width/this.height},enumerable:!0,configurable:!0}),e.prototype.isReady=function(){return this._effect&&this._effect.isReady()},e.prototype.apply=function(){return this._effect&&this._effect.isReady()?(this._engine.enableEffect(this._effect),this._engine.setState(!1),this._engine.setDepthBuffer(!1),this._engine.setDepthWrite(!1),this._engine.setAlphaMode(this.alphaMode),this.alphaConstants&&this.getEngine().setAlphaConstants(this.alphaConstants.r,this.alphaConstants.g,this.alphaConstants.b,this.alphaConstants.a),this._effect._bindTexture("textureSampler",this._shareOutputWithPostProcess?this._shareOutputWithPostProcess.inputTexture:this._forcedOutputTexture?this._forcedOutputTexture:this.inputTexture),this._effect.setVector2("scale",this._scaleRatio),this.onApplyObservable.notifyObservers(this._effect),this._effect):null},e.prototype._disposeTextures=function(){if(!this._shareOutputWithPostProcess&&!this._forcedOutputTexture){if(this._textures.length>0)for(var e=0;e<this._textures.length;e++)this._engine._releaseTexture(this._textures.data[e]);this._textures.dispose()}},e.prototype.dispose=function(e){if(e=e||this._camera,this._disposeTextures(),this._scene){var t=this._scene.postProcesses.indexOf(this);-1!==t&&this._scene.postProcesses.splice(t,1)}else{var n=this._engine.postProcesses.indexOf(this);-1!==n&&this._engine.postProcesses.splice(n,1)}if(e){if(e.detachPostProcess(this),0===e._postProcesses.indexOf(this)&&e._postProcesses.length>0){var r=this._camera._getFirstPostProcess();r&&r.markTextureDirty()}this.onActivateObservable.clear(),this.onAfterRenderObservable.clear(),this.onApplyObservable.clear(),this.onBeforeRenderObservable.clear(),this.onSizeChangedObservable.clear()}},e}();jt.a.ShadersStore.passPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nvoid main(void)\n{\ngl_FragColor=texture2D(textureSampler,vUV);\n}",jt.a.ShadersStore.passCubePixelShader="\nvarying vec2 vUV;\nuniform samplerCube textureSampler;\nvoid main(void)\n{\nvec2 uv=vUV*2.0-1.0;\n#ifdef POSITIVEX\ngl_FragColor=textureCube(textureSampler,vec3(1.001,uv.y,uv.x));\n#endif\n#ifdef NEGATIVEX\ngl_FragColor=textureCube(textureSampler,vec3(-1.001,uv.y,uv.x));\n#endif\n#ifdef POSITIVEY\ngl_FragColor=textureCube(textureSampler,vec3(uv.y,1.001,uv.x));\n#endif\n#ifdef NEGATIVEY\ngl_FragColor=textureCube(textureSampler,vec3(uv.y,-1.001,uv.x));\n#endif\n#ifdef POSITIVEZ\ngl_FragColor=textureCube(textureSampler,vec3(uv,1.001));\n#endif\n#ifdef NEGATIVEZ\ngl_FragColor=textureCube(textureSampler,vec3(uv,-1.001));\n#endif\n}";var Yt=function(e){function t(t,n,r,i,o,a,s,u){return void 0===r&&(r=null),void 0===s&&(s=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===u&&(u=!1),e.call(this,t,"pass",null,null,n,r,i,o,a,void 0,s,void 0,null,u)||this}return l.d(t,e),t}(zt),Ht=function(e){function t(t,n,r,i,o,a,s,u){void 0===r&&(r=null),void 0===s&&(s=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===u&&(u=!1);var l=e.call(this,t,"passCube",null,null,n,r,i,o,a,"#define POSITIVEX",s,void 0,null,u)||this;return l._face=0,l}return l.d(t,e),Object.defineProperty(t.prototype,"face",{get:function(){return this._face},set:function(e){if(!(e<0||e>5))switch(this._face=e,this._face){case 0:this.updateEffect("#define POSITIVEX");break;case 1:this.updateEffect("#define NEGATIVEX");break;case 2:this.updateEffect("#define POSITIVEY");break;case 3:this.updateEffect("#define NEGATIVEY");break;case 4:this.updateEffect("#define POSITIVEZ");break;case 5:this.updateEffect("#define NEGATIVEZ")}},enumerable:!0,configurable:!0}),t}(zt);me.b._RescalePostProcessFactory=function(e){return new Yt("rescale",1,null,me.b.TEXTURE_BILINEAR_SAMPLINGMODE,e,!1,me.b.TEXTURETYPE_UNSIGNED_INT)},jt.a.ShadersStore.anaglyphPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform sampler2D leftSampler;\nvoid main(void)\n{\nvec4 leftFrag=texture2D(leftSampler,vUV);\nleftFrag=vec4(1.0,leftFrag.g,leftFrag.b,1.0);\nvec4 rightFrag=texture2D(textureSampler,vUV);\nrightFrag=vec4(rightFrag.r,1.0,1.0,1.0);\ngl_FragColor=vec4(rightFrag.rgb*leftFrag.rgb,1.0);\n}";var Wt=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,"anaglyph",null,["leftSampler"],n,r[1],i,o,a)||this;return s._passedProcess=r[0]._rigPostProcess,s.onApplyObservable.add(function(e){e.setTextureFromPostProcess("leftSampler",s._passedProcess)}),s}return l.d(t,e),t}(zt);Ne.a._setStereoscopicAnaglyphRigMode=function(e){e._rigCameras[0]._rigPostProcess=new Yt(e.name+"_passthru",1,e._rigCameras[0]),e._rigCameras[1]._rigPostProcess=new Wt(e.name+"_anaglyph",1,e._rigCameras)},F.a.AddNodeConstructor("AnaglyphArcRotateCamera",function(e,t,n){return function(){return new Xt(e,0,0,1,o.x.Zero(),n.interaxial_distance,t)}});var Xt=function(e){function t(t,n,r,i,o,a,s){var u=e.call(this,t,n,r,i,o,s)||this;return u.interaxialDistance=a,u.setCameraRigMode(Ne.a.RIG_MODE_STEREOSCOPIC_ANAGLYPH,{interaxialDistance:a}),u}return l.d(t,e),t.prototype.getClassName=function(){return"AnaglyphArcRotateCamera"},t}(Et);F.a.AddNodeConstructor("AnaglyphFreeCamera",function(e,t,n){return function(){return new Kt(e,o.x.Zero(),n.interaxial_distance,t)}});var Kt=function(e){function t(t,n,r,i){var o=e.call(this,t,n,i)||this;return o.interaxialDistance=r,o.setCameraRigMode(Ne.a.RIG_MODE_STEREOSCOPIC_ANAGLYPH,{interaxialDistance:r}),o}return l.d(t,e),t.prototype.getClassName=function(){return"AnaglyphFreeCamera"},t}(bt);F.a.AddNodeConstructor("AnaglyphGamepadCamera",function(e,t,n){return function(){return new Qt(e,o.x.Zero(),n.interaxial_distance,t)}});var Qt=function(e){function t(t,n,r,i){var o=e.call(this,t,n,i)||this;return o.interaxialDistance=r,o.setCameraRigMode(Ne.a.RIG_MODE_STEREOSCOPIC_ANAGLYPH,{interaxialDistance:r}),o}return l.d(t,e),t.prototype.getClassName=function(){return"AnaglyphGamepadCamera"},t}(Vt);F.a.AddNodeConstructor("AnaglyphUniversalCamera",function(e,t,n){return function(){return new qt(e,o.x.Zero(),n.interaxial_distance,t)}});var qt=function(e){function t(t,n,r,i){var o=e.call(this,t,n,i)||this;return o.interaxialDistance=r,o.setCameraRigMode(Ne.a.RIG_MODE_STEREOSCOPIC_ANAGLYPH,{interaxialDistance:r}),o}return l.d(t,e),t.prototype.getClassName=function(){return"AnaglyphUniversalCamera"},t}(Ut);jt.a.ShadersStore.stereoscopicInterlacePixelShader="const vec3 TWO=vec3(2.0,2.0,2.0);\nvarying vec2 vUV;\nuniform sampler2D camASampler;\nuniform sampler2D textureSampler;\nuniform vec2 stepSize;\nvoid main(void)\n{\nbool useCamB;\nvec2 texCoord1;\nvec2 texCoord2;\nvec3 frag1;\nvec3 frag2;\n#ifdef IS_STEREOSCOPIC_HORIZ\nuseCamB=vUV.x>0.5;\ntexCoord1=vec2(useCamB ? (vUV.x-0.5)*2.0 : vUV.x*2.0,vUV.y);\ntexCoord2=vec2(texCoord1.x+stepSize.x,vUV.y);\n#else\nuseCamB=vUV.y>0.5;\ntexCoord1=vec2(vUV.x,useCamB ? (vUV.y-0.5)*2.0 : vUV.y*2.0);\ntexCoord2=vec2(vUV.x,texCoord1.y+stepSize.y);\n#endif\n\nif (useCamB){\nfrag1=texture2D(textureSampler,texCoord1).rgb;\nfrag2=texture2D(textureSampler,texCoord2).rgb;\n}else{\nfrag1=texture2D(camASampler ,texCoord1).rgb;\nfrag2=texture2D(camASampler ,texCoord2).rgb;\n}\ngl_FragColor=vec4((frag1+frag2)/TWO,1.0);\n}";var Zt=function(e){function t(t,n,r,i,a,s){var u=e.call(this,t,"stereoscopicInterlace",["stepSize"],["camASampler"],1,n[1],i,a,s,r?"#define IS_STEREOSCOPIC_HORIZ 1":void 0)||this;return u._passedProcess=n[0]._rigPostProcess,u._stepSize=new o.w(1/u.width,1/u.height),u.onSizeChangedObservable.add(function(){u._stepSize=new o.w(1/u.width,1/u.height)}),u.onApplyObservable.add(function(e){e.setTextureFromPostProcess("camASampler",u._passedProcess),e.setFloat2("stepSize",u._stepSize.x,u._stepSize.y)}),u}return l.d(t,e),t}(zt);Ne.a._setStereoscopicRigMode=function(e){var t=e.cameraRigMode===Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL||e.cameraRigMode===Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_CROSSEYED;e._rigCameras[0]._rigPostProcess=new Yt(e.name+"_passthru",1,e._rigCameras[0]),e._rigCameras[1]._rigPostProcess=new Zt(e.name+"_stereoInterlace",e._rigCameras,t)},F.a.AddNodeConstructor("StereoscopicArcRotateCamera",function(e,t,n){return function(){return new Jt(e,0,0,1,o.x.Zero(),n.interaxial_distance,n.isStereoscopicSideBySide,t)}});var Jt=function(e){function t(t,n,r,i,o,a,s,u){var l=e.call(this,t,n,r,i,o,u)||this;return l.interaxialDistance=a,l.isStereoscopicSideBySide=s,l.setCameraRigMode(s?Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:Ne.a.RIG_MODE_STEREOSCOPIC_OVERUNDER,{interaxialDistance:a}),l}return l.d(t,e),t.prototype.getClassName=function(){return"StereoscopicArcRotateCamera"},t}(Et);F.a.AddNodeConstructor("StereoscopicFreeCamera",function(e,t,n){return function(){return new $t(e,o.x.Zero(),n.interaxial_distance,n.isStereoscopicSideBySide,t)}});var $t=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,o)||this;return a.interaxialDistance=r,a.isStereoscopicSideBySide=i,a.setCameraRigMode(i?Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:Ne.a.RIG_MODE_STEREOSCOPIC_OVERUNDER,{interaxialDistance:r}),a}return l.d(t,e),t.prototype.getClassName=function(){return"StereoscopicFreeCamera"},t}(bt);F.a.AddNodeConstructor("StereoscopicGamepadCamera",function(e,t,n){return function(){return new en(e,o.x.Zero(),n.interaxial_distance,n.isStereoscopicSideBySide,t)}});var en=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,o)||this;return a.interaxialDistance=r,a.isStereoscopicSideBySide=i,a.setCameraRigMode(i?Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:Ne.a.RIG_MODE_STEREOSCOPIC_OVERUNDER,{interaxialDistance:r}),a}return l.d(t,e),t.prototype.getClassName=function(){return"StereoscopicGamepadCamera"},t}(Vt);F.a.AddNodeConstructor("StereoscopicFreeCamera",function(e,t,n){return function(){return new tn(e,o.x.Zero(),n.interaxial_distance,n.isStereoscopicSideBySide,t)}});var tn=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,o)||this;return a.interaxialDistance=r,a.isStereoscopicSideBySide=i,a.setCameraRigMode(i?Ne.a.RIG_MODE_STEREOSCOPIC_SIDEBYSIDE_PARALLEL:Ne.a.RIG_MODE_STEREOSCOPIC_OVERUNDER,{interaxialDistance:r}),a}return l.d(t,e),t.prototype.getClassName=function(){return"StereoscopicUniversalCamera"},t}(Ut);F.a.AddNodeConstructor("VirtualJoysticksCamera",function(e,t){return function(){return new nn(e,o.x.Zero(),t)}});var nn=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.inputs.addVirtualJoystick(),i}return l.d(t,e),t.prototype.getClassName=function(){return"VirtualJoysticksCamera"},t}(bt),rn=function(){function e(){this.compensateDistortion=!0,this.multiviewEnabled=!1}return Object.defineProperty(e.prototype,"aspectRatio",{get:function(){return this.hResolution/(2*this.vResolution)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"aspectRatioFov",{get:function(){return 2*Math.atan(this.postProcessScaleFactor*this.vScreenSize/(2*this.eyeToScreenDistance))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftHMatrix",{get:function(){return o.j.Translation(4*(this.hScreenSize/4-this.lensSeparationDistance/2)/this.hScreenSize,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightHMatrix",{get:function(){return o.j.Translation(-4*(this.hScreenSize/4-this.lensSeparationDistance/2)/this.hScreenSize,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftPreViewMatrix",{get:function(){return o.j.Translation(.5*this.interpupillaryDistance,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightPreViewMatrix",{get:function(){return o.j.Translation(-.5*this.interpupillaryDistance,0,0)},enumerable:!0,configurable:!0}),e.GetDefault=function(){var t=new e;return t.hResolution=1280,t.vResolution=800,t.hScreenSize=.149759993,t.vScreenSize=.0935999975,t.vScreenCenter=.0467999987,t.eyeToScreenDistance=.0410000011,t.lensSeparationDistance=.063500002,t.interpupillaryDistance=.064000003,t.distortionK=[1,.219999999,.239999995,0],t.chromaAbCorrection=[.995999992,-.00400000019,1.01400006,0],t.postProcessScaleFactor=1.714605507808412,t.lensCenterOffset=.151976421,t},e}();jt.a.ShadersStore.vrDistortionCorrectionPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform vec2 LensCenter;\nuniform vec2 Scale;\nuniform vec2 ScaleIn;\nuniform vec4 HmdWarpParam;\nvec2 HmdWarp(vec2 in01) {\nvec2 theta=(in01-LensCenter)*ScaleIn;\nfloat rSq=theta.x*theta.x+theta.y*theta.y;\nvec2 rvector=theta*(HmdWarpParam.x+HmdWarpParam.y*rSq+HmdWarpParam.z*rSq*rSq+HmdWarpParam.w*rSq*rSq*rSq);\nreturn LensCenter+Scale*rvector;\n}\nvoid main(void)\n{\nvec2 tc=HmdWarp(vUV);\nif (tc.x <0.0 || tc.x>1.0 || tc.y<0.0 || tc.y>1.0)\ngl_FragColor=vec4(0.0,0.0,0.0,0.0);\nelse{\ngl_FragColor=texture2D(textureSampler,tc);\n}\n}";var on=function(e){function t(t,n,r,i){var a=e.call(this,t,"vrDistortionCorrection",["LensCenter","Scale","ScaleIn","HmdWarpParam"],null,i.postProcessScaleFactor,n,Ge.a.BILINEAR_SAMPLINGMODE)||this;return a._isRightEye=r,a._distortionFactors=i.distortionK,a._postProcessScaleFactor=i.postProcessScaleFactor,a._lensCenterOffset=i.lensCenterOffset,a.adaptScaleToCurrentViewport=!0,a.onSizeChangedObservable.add(function(){a._scaleIn=new o.w(2,2/a.aspectRatio),a._scaleFactor=new o.w(1/a._postProcessScaleFactor*.5,1/a._postProcessScaleFactor*.5*a.aspectRatio),a._lensCenter=new o.w(a._isRightEye?.5-.5*a._lensCenterOffset:.5+.5*a._lensCenterOffset,.5)}),a.onApplyObservable.add(function(e){e.setFloat2("LensCenter",a._lensCenter.x,a._lensCenter.y),e.setFloat2("Scale",a._scaleFactor.x,a._scaleFactor.y),e.setFloat2("ScaleIn",a._scaleIn.x,a._scaleIn.y),e.setFloat4("HmdWarpParam",a._distortionFactors[0],a._distortionFactors[1],a._distortionFactors[2],a._distortionFactors[3])}),a}return l.d(t,e),t}(zt);jt.a.ShadersStore.vrMultiviewToSingleviewPixelShader="#ifdef GL_ES\nprecision mediump sampler2DArray;\n#endif\nvarying vec2 vUV;\nuniform sampler2DArray multiviewSampler;\nuniform int imageIndex;\nvoid main(void)\n{\ngl_FragColor=texture(multiviewSampler,vec3(vUV,imageIndex));\n}";var an=n(63),sn=n(83),un=n(91);me.b.prototype.createRenderTargetCubeTexture=function(e,t){var n=l.a({generateMipMaps:!0,generateDepthBuffer:!0,generateStencilBuffer:!1,type:me.b.TEXTURETYPE_UNSIGNED_INT,samplingMode:me.b.TEXTURE_TRILINEAR_SAMPLINGMODE,format:me.b.TEXTUREFORMAT_RGBA},t);n.generateStencilBuffer=n.generateDepthBuffer&&n.generateStencilBuffer,(n.type!==me.b.TEXTURETYPE_FLOAT||this._caps.textureFloatLinearFiltering)&&(n.type!==me.b.TEXTURETYPE_HALF_FLOAT||this._caps.textureHalfFloatLinearFiltering)||(n.samplingMode=me.b.TEXTURE_NEAREST_SAMPLINGMODE);var r=this._gl,i=new je.a(this,je.a.DATASOURCE_RENDERTARGET);this._bindTextureDirectly(r.TEXTURE_CUBE_MAP,i,!0);var o=this._getSamplingParameters(n.samplingMode,n.generateMipMaps);n.type!==me.b.TEXTURETYPE_FLOAT||this._caps.textureFloat||(n.type=me.b.TEXTURETYPE_UNSIGNED_INT,p.a.Warn("Float textures are not supported. Cube render target forced to TEXTURETYPE_UNESIGNED_BYTE type")),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MAG_FILTER,o.mag),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_MIN_FILTER,o.min),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_CUBE_MAP,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE);for(var a=0;a<6;a++)r.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+a,0,this._getRGBABufferInternalSizedFormat(n.type,n.format),e,e,0,this._getInternalFormat(n.format),this._getWebGLTextureType(n.type),null);var s=r.createFramebuffer();return this._bindUnboundFramebuffer(s),i._depthStencilBuffer=this._setupFramebufferDepthAttachments(n.generateStencilBuffer,n.generateDepthBuffer,e,e),n.generateMipMaps&&r.generateMipmap(r.TEXTURE_CUBE_MAP),this._bindTextureDirectly(r.TEXTURE_CUBE_MAP,null),r.bindRenderbuffer(r.RENDERBUFFER,null),this._bindUnboundFramebuffer(null),i._framebuffer=s,i.width=e,i.height=e,i.isReady=!0,i.isCube=!0,i.samples=1,i.generateMipMaps=n.generateMipMaps,i.samplingMode=n.samplingMode,i.type=n.type,i.format=n.format,i._generateDepthBuffer=n.generateDepthBuffer,i._generateStencilBuffer=n.generateStencilBuffer,this._internalTexturesCache.push(i),i};var ln=function(e){function t(t,n,r,a,s,u,l,c,h,d,f,p,m){void 0===s&&(s=!0),void 0===u&&(u=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===l&&(l=!1),void 0===c&&(c=Ge.a.TRILINEAR_SAMPLINGMODE),void 0===h&&(h=!0),void 0===d&&(d=!1),void 0===f&&(f=!1),void 0===p&&(p=_.a.TEXTUREFORMAT_RGBA),void 0===m&&(m=!1);var g=e.call(this,null,r,!a)||this;return g.isCube=l,g.renderParticles=!0,g.renderSprites=!1,g.coordinatesMode=Ge.a.PROJECTION_MODE,g.ignoreCameraViewport=!1,g.onBeforeBindObservable=new i.c,g.onAfterUnbindObservable=new i.c,g.onBeforeRenderObservable=new i.c,g.onAfterRenderObservable=new i.c,g.onClearObservable=new i.c,g._currentRefreshId=-1,g._refreshRate=1,g._samples=1,g.boundingBoxPosition=o.x.Zero(),(r=g.getScene())?(g.renderList=new Array,g._engine=r.getEngine(),g.name=t,g.isRenderTarget=!0,g._initialSizeParameter=n,g._processSizeParameter(n),g._resizeObserver=g.getScene().getEngine().onResizeObservable.add(function(){}),g._generateMipMaps=!!a,g._doNotChangeAspectRatio=s,g._renderingManager=new un.b(r),g._renderingManager._useSceneAutoClearSetup=!0,f?g:(g._renderTargetOptions={generateMipMaps:a,type:u,format:p,samplingMode:c,generateDepthBuffer:h,generateStencilBuffer:d},c===Ge.a.NEAREST_SAMPLINGMODE&&(g.wrapU=Ge.a.CLAMP_ADDRESSMODE,g.wrapV=Ge.a.CLAMP_ADDRESSMODE),m||(l?(g._texture=r.getEngine().createRenderTargetCubeTexture(g.getRenderSize(),g._renderTargetOptions),g.coordinatesMode=Ge.a.INVCUBIC_MODE,g._textureMatrix=o.j.Identity()):g._texture=r.getEngine().createRenderTargetTexture(g._size,g._renderTargetOptions)),g)):g}return l.d(t,e),Object.defineProperty(t.prototype,"renderList",{get:function(){return this._renderList},set:function(e){this._renderList=e,this._renderList&&this._hookArray(this._renderList)},enumerable:!0,configurable:!0}),t.prototype._hookArray=function(e){var t=this,n=e.push;e.push=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=0===e.length,a=n.apply(e,r);return o&&t.getScene().meshes.forEach(function(e){e._markSubMeshesAsLightDirty()}),a};var r=e.splice;e.splice=function(n,i){var o=r.apply(e,[n,i]);return 0===e.length&&t.getScene().meshes.forEach(function(e){e._markSubMeshesAsLightDirty()}),o}},Object.defineProperty(t.prototype,"onAfterUnbind",{set:function(e){this._onAfterUnbindObserver&&this.onAfterUnbindObservable.remove(this._onAfterUnbindObserver),this._onAfterUnbindObserver=this.onAfterUnbindObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onBeforeRender",{set:function(e){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onAfterRender",{set:function(e){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=this.onAfterRenderObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onClear",{set:function(e){this._onClearObserver&&this.onClearObservable.remove(this._onClearObserver),this._onClearObserver=this.onClearObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderTargetOptions",{get:function(){return this._renderTargetOptions},enumerable:!0,configurable:!0}),t.prototype._onRatioRescale=function(){this._sizeRatio&&this.resize(this._initialSizeParameter)},Object.defineProperty(t.prototype,"boundingBoxSize",{get:function(){return this._boundingBoxSize},set:function(e){if(!this._boundingBoxSize||!this._boundingBoxSize.equals(e)){this._boundingBoxSize=e;var t=this.getScene();t&&t.markAllMaterialsAsDirty(_.a.MATERIAL_TextureDirtyFlag)}},enumerable:!0,configurable:!0}),t.prototype.createDepthStencilTexture=function(e,t,n){if(void 0===e&&(e=0),void 0===t&&(t=!0),void 0===n&&(n=!1),this.getScene()){var r=this.getScene().getEngine();this.depthStencilTexture=r.createDepthStencilTexture(this._size,{bilinearFiltering:t,comparisonFunction:e,generateStencil:n,isCube:this.isCube}),r.setFrameBufferDepthStencilTexture(this)}},t.prototype._processSizeParameter=function(e){e.ratio?(this._sizeRatio=e.ratio,this._size={width:this._bestReflectionRenderTargetDimension(this._engine.getRenderWidth(),this._sizeRatio),height:this._bestReflectionRenderTargetDimension(this._engine.getRenderHeight(),this._sizeRatio)}):this._size=e},Object.defineProperty(t.prototype,"samples",{get:function(){return this._samples},set:function(e){if(this._samples!==e){var t=this.getScene();t&&(this._samples=t.getEngine().updateRenderTargetTextureSampleCount(this._texture,e))}},enumerable:!0,configurable:!0}),t.prototype.resetRefreshCounter=function(){this._currentRefreshId=-1},Object.defineProperty(t.prototype,"refreshRate",{get:function(){return this._refreshRate},set:function(e){this._refreshRate=e,this.resetRefreshCounter()},enumerable:!0,configurable:!0}),t.prototype.addPostProcess=function(e){if(!this._postProcessManager){var t=this.getScene();if(!t)return;this._postProcessManager=new sn.a(t),this._postProcesses=new Array}this._postProcesses.push(e),this._postProcesses[0].autoClear=!1},t.prototype.clearPostProcesses=function(e){if(void 0===e&&(e=!1),this._postProcesses){if(e)for(var t=0,n=this._postProcesses;t<n.length;t++)n[t].dispose();this._postProcesses=[]}},t.prototype.removePostProcess=function(e){if(this._postProcesses){var t=this._postProcesses.indexOf(e);-1!==t&&(this._postProcesses.splice(t,1),this._postProcesses.length>0&&(this._postProcesses[0].autoClear=!1))}},t.prototype._shouldRender=function(){return-1===this._currentRefreshId?(this._currentRefreshId=1,!0):this.refreshRate===this._currentRefreshId?(this._currentRefreshId=1,!0):(this._currentRefreshId++,!1)},t.prototype.getRenderSize=function(){return this.getRenderWidth()},t.prototype.getRenderWidth=function(){return this._size.width?this._size.width:this._size},t.prototype.getRenderHeight=function(){return this._size.width?this._size.height:this._size},Object.defineProperty(t.prototype,"canRescale",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.scale=function(e){var t=this.getRenderSize()*e;this.resize(t)},t.prototype.getReflectionTextureMatrix=function(){return this.isCube?this._textureMatrix:e.prototype.getReflectionTextureMatrix.call(this)},t.prototype.resize=function(e){var t=this.isCube;this.releaseInternalTexture();var n=this.getScene();n&&(this._processSizeParameter(e),this._texture=t?n.getEngine().createRenderTargetCubeTexture(this.getRenderSize(),this._renderTargetOptions):n.getEngine().createRenderTargetTexture(this._size,this._renderTargetOptions))},t.prototype.render=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),a=this.getScene()){var n,r=a.getEngine();if(void 0!==this.useCameraPostProcesses&&(e=this.useCameraPostProcesses),this._waitingRenderList){this.renderList=[];for(var i=0;i<this._waitingRenderList.length;i++){var o=a.getMeshByID(this._waitingRenderList[i]);o&&this.renderList.push(o)}delete this._waitingRenderList}if(this.renderListPredicate){var a;if(this.renderList?this.renderList.length=0:this.renderList=[],!(a=this.getScene()))return;var s=a.meshes;for(i=0;i<s.length;i++){var u=s[i];this.renderListPredicate(u)&&this.renderList.push(u)}}this.onBeforeBindObservable.notifyObservers(this),this.activeCamera?(n=this.activeCamera,r.setViewport(this.activeCamera.viewport,this.getRenderWidth(),this.getRenderHeight()),this.activeCamera!==a.activeCamera&&a.setTransformMatrix(this.activeCamera.getViewMatrix(),this.activeCamera.getProjectionMatrix(!0))):(n=a.activeCamera)&&r.setViewport(n.viewport,this.getRenderWidth(),this.getRenderHeight()),this._renderingManager.reset();for(var l=this.renderList?this.renderList:a.getActiveMeshes().data,c=this.renderList?this.renderList.length:a.getActiveMeshes().length,h=a.getRenderId(),d=0;d<c;d++)if(u=l[d]){if(!u.isReady(0===this.refreshRate)){this.resetRefreshCounter();continue}var f;if(u._preActivateForIntermediateRendering(h),f=!(this.renderList||!n)&&0==(u.layerMask&n.layerMask),u.isEnabled()&&u.isVisible&&u.subMeshes&&!f&&u._activate(h,!0)){u.isAnInstance?u=u.sourceMesh:u._internalAbstractMeshDataInfo._onlyForInstancesIntermediate=!1,u._internalAbstractMeshDataInfo._isActiveIntermediate=!0;for(var p=0;p<u.subMeshes.length;p++){var _=u.subMeshes[p];a._activeIndices.addCount(_.indexCount,!1),this._renderingManager.dispatch(_,u)}}}for(var m=0;m<a.particleSystems.length;m++){var g=a.particleSystems[m],v=g.emitter;g.isStarted()&&v&&v.position&&v.isEnabled()&&l.indexOf(v)>=0&&this._renderingManager.dispatchParticles(g)}if(this.isCube)for(var y=0;y<6;y++)this.renderToTarget(y,l,e,t),a.incrementRenderId(),a.resetCachedMaterial();else this.renderToTarget(0,l,e,t);this.onAfterUnbindObservable.notifyObservers(this),a.activeCamera&&(this.activeCamera&&this.activeCamera!==a.activeCamera&&a.setTransformMatrix(a.activeCamera.getViewMatrix(),a.activeCamera.getProjectionMatrix(!0)),r.setViewport(a.activeCamera.viewport)),a.resetCachedMaterial()}},t.prototype._bestReflectionRenderTargetDimension=function(e,t){var n=e*t,r=ye.h.NearestPOT(n+16384/(128+n));return Math.min(ye.h.FloorPOT(e),r)},t.prototype._bindFrameBuffer=function(e){void 0===e&&(e=0);var t=this.getScene();if(t){var n=t.getEngine();this._texture&&n.bindFramebuffer(this._texture,this.isCube?e:void 0,void 0,void 0,this.ignoreCameraViewport,this.depthStencilTexture?this.depthStencilTexture:void 0)}},t.prototype.unbindFrameBuffer=function(e,t){var n=this;this._texture&&e.unBindFramebuffer(this._texture,this.isCube,function(){n.onAfterRenderObservable.notifyObservers(t)})},t.prototype.renderToTarget=function(e,t,n,r){var i=this.getScene();if(i){var o=i.getEngine();if(this._texture){this._postProcessManager?this._postProcessManager._prepareFrame(this._texture,this._postProcesses):n&&i.postProcessManager._prepareFrame(this._texture)||this._bindFrameBuffer(e),this.onBeforeRenderObservable.notifyObservers(e),this.onClearObservable.hasObservers()?this.onClearObservable.notifyObservers(o):o.clear(this.clearColor||i.clearColor,!0,!0,!0),this._doNotChangeAspectRatio||i.updateTransformMatrix(!0);for(var a=0,s=i._beforeRenderTargetDrawStage;a<s.length;a++)s[a].action(this);this._renderingManager.render(this.customRenderFunction,t,this.renderParticles,this.renderSprites);for(var u=0,l=i._afterRenderTargetDrawStage;u<l.length;u++)l[u].action(this);this._postProcessManager?this._postProcessManager._finalizeFrame(!1,this._texture,e,this._postProcesses,this.ignoreCameraViewport):n&&i.postProcessManager._finalizeFrame(!1,this._texture,e),this._doNotChangeAspectRatio||i.updateTransformMatrix(!0),r&&ye.h.DumpFramebuffer(this.getRenderWidth(),this.getRenderHeight(),o),this.isCube&&5!==e?this.onAfterRenderObservable.notifyObservers(e):(this.isCube&&5===e&&o.generateMipMapsForCubemap(this._texture),this.unbindFrameBuffer(o,e))}}},t.prototype.setRenderingOrder=function(e,t,n,r){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),this._renderingManager.setRenderingOrder(e,t,n,r)},t.prototype.setRenderingAutoClearDepthStencil=function(e,t){this._renderingManager.setRenderingAutoClearDepthStencil(e,t),this._renderingManager._useSceneAutoClearSetup=!1},t.prototype.clone=function(){var e=this.getSize(),n=new t(this.name,e,this.getScene(),this._renderTargetOptions.generateMipMaps,this._doNotChangeAspectRatio,this._renderTargetOptions.type,this.isCube,this._renderTargetOptions.samplingMode,this._renderTargetOptions.generateDepthBuffer,this._renderTargetOptions.generateStencilBuffer);return n.hasAlpha=this.hasAlpha,n.level=this.level,n.coordinatesMode=this.coordinatesMode,this.renderList&&(n.renderList=this.renderList.slice(0)),n},t.prototype.serialize=function(){if(!this.name)return null;var t=e.prototype.serialize.call(this);if(t.renderTargetSize=this.getRenderSize(),t.renderList=[],this.renderList)for(var n=0;n<this.renderList.length;n++)t.renderList.push(this.renderList[n].id);return t},t.prototype.disposeFramebufferObjects=function(){var e=this.getInternalTexture(),t=this.getScene();e&&t&&t.getEngine()._releaseFramebufferObjects(e)},t.prototype.dispose=function(){this._postProcessManager&&(this._postProcessManager.dispose(),this._postProcessManager=null),this.clearPostProcesses(!0),this._resizeObserver&&(this.getScene().getEngine().onResizeObservable.remove(this._resizeObserver),this._resizeObserver=null),this.renderList=null;var t=this.getScene();if(t){var n=t.customRenderTargets.indexOf(this);n>=0&&t.customRenderTargets.splice(n,1);for(var r=0,i=t.cameras;r<i.length;r++){var o=i[r];(n=o.customRenderTargets.indexOf(this))>=0&&o.customRenderTargets.splice(n,1)}e.prototype.dispose.call(this)}},t.prototype._rebuild=function(){this.refreshRate===t.REFRESHRATE_RENDER_ONCE&&(this.refreshRate=t.REFRESHRATE_RENDER_ONCE),this._postProcessManager&&this._postProcessManager._rebuild()},t.prototype.freeRenderingGroups=function(){this._renderingManager&&this._renderingManager.freeRenderingGroups()},t.prototype.getViewCount=function(){return 1},t.REFRESHRATE_RENDER_ONCE=0,t.REFRESHRATE_RENDER_ONEVERYFRAME=1,t.REFRESHRATE_RENDER_ONEVERYTWOFRAMES=2,t}(Ge.a);Ge.a._CreateRenderTargetTexture=function(e,t,n,r){return new ln(e,t,n,r)};var cn=function(e){function t(t,n){void 0===n&&(n=512);var r=e.call(this,"multiview rtt",n,t,!1,!0,je.a.DATASOURCE_UNKNOWN,!1,void 0,!1,!1,!0,void 0,!0)||this,i=t.getEngine().createMultiviewRenderTargetTexture(r.getRenderWidth(),r.getRenderHeight());return i.isMultiview=!0,r._texture=i,r}return l.d(t,e),t.prototype._bindFrameBuffer=function(e){void 0===e&&(e=0),this._texture&&this.getScene().getEngine().bindMultiviewFramebuffer(this._texture)},t.prototype.getViewCount=function(){return 2},t}(ln);me.b.prototype.createMultiviewRenderTargetTexture=function(e,t){var n=this._gl;if(!this.getCaps().multiview)throw"Multiview is not supported";var r=new je.a(this,je.a.DATASOURCE_UNKNOWN,!0);return r.width=e,r.height=t,r._framebuffer=n.createFramebuffer(),r._colorTextureArray=n.createTexture(),n.bindTexture(n.TEXTURE_2D_ARRAY,r._colorTextureArray),n.texStorage3D(n.TEXTURE_2D_ARRAY,1,n.RGBA8,e,t,2),r._depthStencilTextureArray=n.createTexture(),n.bindTexture(n.TEXTURE_2D_ARRAY,r._depthStencilTextureArray),n.texStorage3D(n.TEXTURE_2D_ARRAY,1,n.DEPTH32F_STENCIL8,e,t,2),r.isReady=!0,r},me.b.prototype.bindMultiviewFramebuffer=function(e){var t=this._gl,n=this.getCaps().multiview;if(this.bindFramebuffer(e,void 0,void 0,void 0,!0),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,e._framebuffer),!e._colorTextureArray||!e._depthStencilTextureArray)throw"Invalid multiview frame buffer";n.framebufferTextureMultiviewOVR(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,e._colorTextureArray,0,0,2),n.framebufferTextureMultiviewOVR(t.DRAW_FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,e._depthStencilTextureArray,0,0,2)},Ne.a.prototype._useMultiviewToSingleView=!1,Ne.a.prototype._multiviewTexture=null,Ne.a.prototype._resizeOrCreateMultiviewTexture=function(e,t){this._multiviewTexture?this._multiviewTexture.getRenderWidth()==e&&this._multiviewTexture.getRenderHeight()==t||(this._multiviewTexture.dispose(),this._multiviewTexture=new cn(this.getScene(),{width:e,height:t})):this._multiviewTexture=new cn(this.getScene(),{width:e,height:t})},H.a.prototype._transformMatrixR=o.j.Zero(),H.a.prototype._multiviewSceneUbo=null,H.a.prototype._createMultiviewUbo=function(){this._multiviewSceneUbo=new an.a(this.getEngine(),void 0,!0),this._multiviewSceneUbo.addUniform("viewProjection",16),this._multiviewSceneUbo.addUniform("viewProjectionR",16),this._multiviewSceneUbo.addUniform("view",16)},H.a.prototype._updateMultiviewUbo=function(e,t){e&&t&&e.multiplyToRef(t,this._transformMatrixR),e&&t&&(e.multiplyToRef(t,o.t.Matrix[0]),o.i.GetRightPlaneToRef(o.t.Matrix[0],this._frustumPlanes[3])),this._multiviewSceneUbo&&(this._multiviewSceneUbo.updateMatrix("viewProjection",this.getTransformMatrix()),this._multiviewSceneUbo.updateMatrix("viewProjectionR",this._transformMatrixR),this._multiviewSceneUbo.updateMatrix("view",this._viewMatrix),this._multiviewSceneUbo.update())},H.a.prototype._renderMultiviewToSingleView=function(e){e._resizeOrCreateMultiviewTexture(e._rigPostProcess&&e._rigPostProcess&&e._rigPostProcess.width>0?e._rigPostProcess.width/2:this.getEngine().getRenderWidth(!0)/2,e._rigPostProcess&&e._rigPostProcess&&e._rigPostProcess.height>0?e._rigPostProcess.height:this.getEngine().getRenderHeight(!0)),this._multiviewSceneUbo||this._createMultiviewUbo(),e.outputRenderTarget=e._multiviewTexture,this._renderForCamera(e),e.outputRenderTarget=null;for(var t=0;t<e._rigCameras.length;t++){var n=this.getEngine();this._activeCamera=e._rigCameras[t],n.setViewport(this._activeCamera.viewport),this.postProcessManager&&(this.postProcessManager._prepareFrame(),this.postProcessManager._finalizeFrame(this._activeCamera.isIntermediate))}};var hn=function(e){function t(t,n,r){var i=e.call(this,t,"vrMultiviewToSingleview",["imageIndex"],["multiviewSampler"],r,n,Ge.a.BILINEAR_SAMPLINGMODE)||this;return i.onSizeChangedObservable.add(function(){}),i.onApplyObservable.add(function(e){e.setInt("imageIndex",n._scene.activeCamera&&n._scene.activeCamera.isLeftCamera?0:1),e.setTexture("multiviewSampler",n._multiviewTexture)}),i}return l.d(t,e),t}(zt);Ne.a._setVRRigMode=function(e,t){var n=t.vrCameraMetrics||rn.GetDefault();e._rigCameras[0]._cameraRigParams.vrMetrics=n,e._rigCameras[0].viewport=new o.z(0,0,.5,1),e._rigCameras[0]._cameraRigParams.vrWorkMatrix=new o.j,e._rigCameras[0]._cameraRigParams.vrHMatrix=n.leftHMatrix,e._rigCameras[0]._cameraRigParams.vrPreViewMatrix=n.leftPreViewMatrix,e._rigCameras[0].getProjectionMatrix=e._rigCameras[0]._getVRProjectionMatrix,e._rigCameras[1]._cameraRigParams.vrMetrics=n,e._rigCameras[1].viewport=new o.z(.5,0,.5,1),e._rigCameras[1]._cameraRigParams.vrWorkMatrix=new o.j,e._rigCameras[1]._cameraRigParams.vrHMatrix=n.rightHMatrix,e._rigCameras[1]._cameraRigParams.vrPreViewMatrix=n.rightPreViewMatrix,e._rigCameras[1].getProjectionMatrix=e._rigCameras[1]._getVRProjectionMatrix,n.multiviewEnabled&&(e.getScene().getEngine().getCaps().multiview?(e._useMultiviewToSingleView=!0,e._rigPostProcess=new hn("VRMultiviewToSingleview",e,n.postProcessScaleFactor)):(p.a.Warn("Multiview is not supported, falling back to standard rendering"),n.multiviewEnabled=!1)),n.compensateDistortion&&(e._rigCameras[0]._rigPostProcess=new on("VR_Distort_Compensation_Left",e._rigCameras[0],!1,n),e._rigCameras[1]._rigPostProcess=new on("VR_Distort_Compensation_Right",e._rigCameras[1],!0,n))},F.a.AddNodeConstructor("VRDeviceOrientationFreeCamera",function(e,t){return function(){return new dn(e,0,0,1,o.x.Zero(),t)}});var dn=function(e){function t(t,n,r,i,o,a,s,u){void 0===s&&(s=!0),void 0===u&&(u=rn.GetDefault());var l=e.call(this,t,n,r,i,o,a)||this;return u.compensateDistortion=s,l.setCameraRigMode(Ne.a.RIG_MODE_VR,{vrCameraMetrics:u}),l.inputs.addVRDeviceOrientation(),l}return l.d(t,e),t.prototype.getClassName=function(){return"VRDeviceOrientationArcRotateCamera"},t}(Et);F.a.AddNodeConstructor("VRDeviceOrientationFreeCamera",function(e,t){return function(){return new fn(e,o.x.Zero(),t)}});var fn=function(e){function t(t,n,r,i,o){void 0===i&&(i=!0),void 0===o&&(o=rn.GetDefault());var a=e.call(this,t,n,r)||this;return o.compensateDistortion=i,a.setCameraRigMode(Ne.a.RIG_MODE_VR,{vrCameraMetrics:o}),a}return l.d(t,e),t.prototype.getClassName=function(){return"VRDeviceOrientationFreeCamera"},t}(xt);F.a.AddNodeConstructor("VRDeviceOrientationGamepadCamera",function(e,t){return function(){return new pn(e,o.x.Zero(),t)}});var pn=function(e){function t(t,n,r,i,o){void 0===i&&(i=!0),void 0===o&&(o=rn.GetDefault());var a=e.call(this,t,n,r,i,o)||this;return a.inputs.addGamepad(),a}return l.d(t,e),t.prototype.getClassName=function(){return"VRDeviceOrientationGamepadCamera"},t}(fn),_n=n(65);Ne.a._setWebVRRigMode=function(e,t){if(t.vrDisplay){var n=t.vrDisplay.getEyeParameters("left"),r=t.vrDisplay.getEyeParameters("right");e._rigCameras[0].viewport=new o.z(0,0,.5,1),e._rigCameras[0].setCameraRigParameter("left",!0),e._rigCameras[0].setCameraRigParameter("specs",t.specs),e._rigCameras[0].setCameraRigParameter("eyeParameters",n),e._rigCameras[0].setCameraRigParameter("frameData",t.frameData),e._rigCameras[0].setCameraRigParameter("parentCamera",t.parentCamera),e._rigCameras[0]._cameraRigParams.vrWorkMatrix=new o.j,e._rigCameras[0].getProjectionMatrix=e._getWebVRProjectionMatrix,e._rigCameras[0].parent=e,e._rigCameras[0]._getViewMatrix=e._getWebVRViewMatrix,e._rigCameras[1].viewport=new o.z(.5,0,.5,1),e._rigCameras[1].setCameraRigParameter("eyeParameters",r),e._rigCameras[1].setCameraRigParameter("specs",t.specs),e._rigCameras[1].setCameraRigParameter("frameData",t.frameData),e._rigCameras[1].setCameraRigParameter("parentCamera",t.parentCamera),e._rigCameras[1]._cameraRigParams.vrWorkMatrix=new o.j,e._rigCameras[1].getProjectionMatrix=e._getWebVRProjectionMatrix,e._rigCameras[1].parent=e,e._rigCameras[1]._getViewMatrix=e._getWebVRViewMatrix}},Object.defineProperty(me.b.prototype,"isInVRExclusivePointerMode",{get:function(){return this._vrExclusivePointerMode},enumerable:!0,configurable:!0}),me.b.prototype._prepareVRComponent=function(){this._vrSupported=!1,this._vrExclusivePointerMode=!1,this.onVRDisplayChangedObservable=new i.c,this.onVRRequestPresentComplete=new i.c,this.onVRRequestPresentStart=new i.c},me.b.prototype.isVRDevicePresent=function(){return!!this._vrDisplay},me.b.prototype.getVRDevice=function(){return this._vrDisplay},me.b.prototype.initWebVR=function(){return this.initWebVRAsync(),this.onVRDisplayChangedObservable},me.b.prototype.initWebVRAsync=function(){var e=this,t=function(){var t={vrDisplay:e._vrDisplay,vrSupported:e._vrSupported};e.onVRDisplayChangedObservable.notifyObservers(t),e._webVRInitPromise=new Promise(function(e){e(t)})};return this._onVrDisplayConnect||(this._onVrDisplayConnect=function(n){e._vrDisplay=n.display,t()},this._onVrDisplayDisconnect=function(){e._vrDisplay.cancelAnimationFrame(e._frameHandler),e._vrDisplay=void 0,e._frameHandler=ye.h.QueueNewFrame(e._bindedRenderFunction),t()},this._onVrDisplayPresentChange=function(){e._vrExclusivePointerMode=e._vrDisplay&&e._vrDisplay.isPresenting},window.addEventListener("vrdisplayconnect",this._onVrDisplayConnect),window.addEventListener("vrdisplaydisconnect",this._onVrDisplayDisconnect),window.addEventListener("vrdisplaypresentchange",this._onVrDisplayPresentChange)),this._webVRInitPromise=this._webVRInitPromise||this._getVRDisplaysAsync(),this._webVRInitPromise.then(t),this._webVRInitPromise},me.b.prototype._getVRDisplaysAsync=function(){var e=this;return new Promise(function(t){navigator.getVRDisplays?navigator.getVRDisplays().then(function(n){e._vrSupported=!0,e._vrDisplay=n[0],t({vrDisplay:e._vrDisplay,vrSupported:e._vrSupported})}):(e._vrDisplay=void 0,e._vrSupported=!1,t({vrDisplay:e._vrDisplay,vrSupported:e._vrSupported}))})},me.b.prototype.enableVR=function(){var e=this;this._vrDisplay&&!this._vrDisplay.isPresenting&&(this.onVRRequestPresentStart.notifyObservers(this),this._vrDisplay.requestPresent([{source:this.getRenderingCanvas()}]).then(function(){e.onVRRequestPresentComplete.notifyObservers(!0),e._onVRFullScreenTriggered()}).catch(function(){e.onVRRequestPresentComplete.notifyObservers(!1)}))},me.b.prototype._onVRFullScreenTriggered=function(){if(this._vrDisplay&&this._vrDisplay.isPresenting){this._oldSize=new o.r(this.getRenderWidth(),this.getRenderHeight()),this._oldHardwareScaleFactor=this.getHardwareScalingLevel();var e=this._vrDisplay.getEyeParameters("left");this.setHardwareScalingLevel(1),this.setSize(2*e.renderWidth,e.renderHeight)}else this.setHardwareScalingLevel(this._oldHardwareScaleFactor),this.setSize(this._oldSize.width,this._oldSize.height)},me.b.prototype.disableVR=function(){var e=this;this._vrDisplay&&this._vrDisplay.isPresenting&&this._vrDisplay.exitPresent().then(function(){return e._onVRFullScreenTriggered()}).catch(function(){return e._onVRFullScreenTriggered()}),Dt.a.IsWindowObjectExist()&&(window.removeEventListener("vrdisplaypointerrestricted",this._onVRDisplayPointerRestricted),window.removeEventListener("vrdisplaypointerunrestricted",this._onVRDisplayPointerUnrestricted),this._onVrDisplayConnect&&(window.removeEventListener("vrdisplayconnect",this._onVrDisplayConnect),this._onVrDisplayDisconnect&&window.removeEventListener("vrdisplaydisconnect",this._onVrDisplayDisconnect),this._onVrDisplayPresentChange&&window.removeEventListener("vrdisplaypresentchange",this._onVrDisplayPresentChange),this._onVrDisplayConnect=null,this._onVrDisplayDisconnect=null))},me.b.prototype._connectVREvents=function(e,t){this._onVRDisplayPointerRestricted=function(){e&&e.requestPointerLock()},this._onVRDisplayPointerUnrestricted=function(){t.exitPointerLock&&t.exitPointerLock()},Dt.a.IsWindowObjectExist()&&(window.addEventListener("vrdisplaypointerrestricted",this._onVRDisplayPointerRestricted,!1),window.addEventListener("vrdisplaypointerunrestricted",this._onVRDisplayPointerUnrestricted,!1))},me.b.prototype._submitVRFrame=function(){if(this._vrDisplay&&this._vrDisplay.isPresenting)try{this._vrDisplay.submitFrame()}catch(e){ye.h.Warn("webVR submitFrame has had an unexpected failure: "+e)}},me.b.prototype.isVRPresenting=function(){return this._vrDisplay&&this._vrDisplay.isPresenting},me.b.prototype._requestVRFrame=function(){this._frameHandler=ye.h.QueueNewFrame(this._bindedRenderFunction,this._vrDisplay)},F.a.AddNodeConstructor("WebVRFreeCamera",function(e,t){return function(){return new mn(e,o.x.Zero(),t)}}),F.a.AddNodeConstructor("WebVRGamepadCamera",function(e,t){return function(){return new mn(e,o.x.Zero(),t)}});var mn=function(e){function t(t,n,r,a){void 0===a&&(a={});var s=e.call(this,t,n,r)||this;s.webVROptions=a,s._vrDevice=null,s.rawPose=null,s._specsVersion="1.1",s._attached=!1,s._descendants=[],s._deviceRoomPosition=o.x.Zero(),s._deviceRoomRotationQuaternion=o.q.Identity(),s._standingMatrix=null,s.devicePosition=o.x.Zero(),s.deviceRotationQuaternion=o.q.Identity(),s.deviceScaleFactor=1,s._deviceToWorld=o.j.Identity(),s._worldToDevice=o.j.Identity(),s.controllers=[],s.onControllersAttachedObservable=new i.c,s.onControllerMeshLoadedObservable=new i.c,s.onPoseUpdatedFromDeviceObservable=new i.c,s._poseSet=!1,s.rigParenting=!0,s._defaultHeight=void 0,s._htmlElementAttached=null,s._detachIfAttached=function(){var e=s.getEngine().getVRDevice();e&&!e.isPresenting&&s._htmlElementAttached&&s.detachControl(s._htmlElementAttached)},s._workingVector=o.x.Zero(),s._oneVector=o.x.One(),s._workingMatrix=o.j.Identity(),s._tmpMatrix=new o.j,s._cache.position=o.x.Zero(),a.defaultHeight&&(s._defaultHeight=a.defaultHeight,s.position.y=s._defaultHeight),s.minZ=.1,5===arguments.length&&(s.webVROptions=arguments[4]),null==s.webVROptions.trackPosition&&(s.webVROptions.trackPosition=!0),null==s.webVROptions.controllerMeshes&&(s.webVROptions.controllerMeshes=!0),null==s.webVROptions.defaultLightingOnControllers&&(s.webVROptions.defaultLightingOnControllers=!0),s.rotationQuaternion=new o.q,s.webVROptions&&s.webVROptions.positionScale&&(s.deviceScaleFactor=s.webVROptions.positionScale);var u=s.getEngine();return s._onVREnabled=function(e){e&&s.initControllers()},u.onVRRequestPresentComplete.add(s._onVREnabled),u.initWebVR().add(function(e){e.vrDisplay&&s._vrDevice!==e.vrDisplay&&(s._vrDevice=e.vrDisplay,s.setCameraRigMode(Ne.a.RIG_MODE_WEBVR,{parentCamera:s,vrDisplay:s._vrDevice,frameData:s._frameData,specs:s._specsVersion}),s._attached&&s.getEngine().enableVR())}),"undefined"!=typeof VRFrameData&&(s._frameData=new VRFrameData),a.useMultiview&&(s.getScene().getEngine().getCaps().multiview?(s._useMultiviewToSingleView=!0,s._rigPostProcess=new hn("VRMultiviewToSingleview",s,1)):(p.a.Warn("Multiview is not supported, falling back to standard rendering"),s._useMultiviewToSingleView=!1)),r.onBeforeCameraRenderObservable.add(function(e){e.parent===s&&s.rigParenting&&(s._descendants=s.getDescendants(!0,function(e){var t=s.controllers.some(function(t){return t._mesh===e}),n=-1!==s._rigCameras.indexOf(e);return!t&&!n}),s._descendants.forEach(function(t){t.parent=e}))}),r.onAfterCameraRenderObservable.add(function(e){e.parent===s&&s.rigParenting&&s._descendants.forEach(function(e){e.parent=s})}),s}return l.d(t,e),t.prototype.deviceDistanceToRoomGround=function(){return this._standingMatrix?(this._standingMatrix.getTranslationToRef(this._workingVector),this._deviceRoomPosition.y+this._workingVector.y):this._defaultHeight||0},t.prototype.useStandingMatrix=function(e){var t=this;void 0===e&&(e=function(e){}),this.getEngine().initWebVRAsync().then(function(n){n.vrDisplay&&n.vrDisplay.stageParameters&&n.vrDisplay.stageParameters.sittingToStandingTransform&&t.webVROptions.trackPosition?(t._standingMatrix=new o.j,o.j.FromFloat32ArrayToRefScaled(n.vrDisplay.stageParameters.sittingToStandingTransform,0,1,t._standingMatrix),t.getScene().useRightHandedSystem||t._standingMatrix&&t._standingMatrix.toggleModelMatrixHandInPlace(),e(!0)):e(!1)})},t.prototype.useStandingMatrixAsync=function(){var e=this;return new Promise(function(t){e.useStandingMatrix(function(e){t(e)})})},t.prototype.dispose=function(){this._detachIfAttached(),this.getEngine().onVRRequestPresentComplete.removeCallback(this._onVREnabled),this._updateCacheWhenTrackingDisabledObserver&&this._scene.onBeforeRenderObservable.remove(this._updateCacheWhenTrackingDisabledObserver),e.prototype.dispose.call(this)},t.prototype.getControllerByName=function(e){for(var t=0,n=this.controllers;t<n.length;t++){var r=n[t];if(r.hand===e)return r}return null},Object.defineProperty(t.prototype,"leftController",{get:function(){return this._leftController||(this._leftController=this.getControllerByName("left")),this._leftController},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightController",{get:function(){return this._rightController||(this._rightController=this.getControllerByName("right")),this._rightController},enumerable:!0,configurable:!0}),t.prototype.getForwardRay=function(t){return void 0===t&&(t=100),this.leftCamera?e.prototype.getForwardRay.call(this,t,this.leftCamera.getWorldMatrix(),this.leftCamera.globalPosition):e.prototype.getForwardRay.call(this,t)},t.prototype._checkInputs=function(){this._vrDevice&&this._vrDevice.isPresenting&&(this._vrDevice.getFrameData(this._frameData),this.updateFromDevice(this._frameData.pose)),e.prototype._checkInputs.call(this)},t.prototype.updateFromDevice=function(e){e&&e.orientation&&(this.rawPose=e,this._deviceRoomRotationQuaternion.copyFromFloats(e.orientation[0],e.orientation[1],-e.orientation[2],-e.orientation[3]),this.getScene().useRightHandedSystem&&(this._deviceRoomRotationQuaternion.z*=-1,this._deviceRoomRotationQuaternion.w*=-1),this.webVROptions.trackPosition&&this.rawPose.position&&(this._deviceRoomPosition.copyFromFloats(this.rawPose.position[0],this.rawPose.position[1],-this.rawPose.position[2]),this.getScene().useRightHandedSystem&&(this._deviceRoomPosition.z*=-1)),this._poseSet=!0)},t.prototype.attachControl=function(t,n){e.prototype.attachControl.call(this,t,n),this._attached=!0,this._htmlElementAttached=t,n=!Ne.a.ForceAttachControlToAlwaysPreventDefault&&n,this._vrDevice&&this.getEngine().enableVR(),window.addEventListener("vrdisplaypresentchange",this._detachIfAttached)},t.prototype.detachControl=function(t){this.getScene().gamepadManager.onGamepadConnectedObservable.remove(this._onGamepadConnectedObserver),this.getScene().gamepadManager.onGamepadDisconnectedObservable.remove(this._onGamepadDisconnectedObserver),e.prototype.detachControl.call(this,t),this._attached=!1,this.getEngine().disableVR(),window.removeEventListener("vrdisplaypresentchange",this._detachIfAttached)},t.prototype.getClassName=function(){return"WebVRFreeCamera"},t.prototype.resetToCurrentRotation=function(){this._vrDevice.resetPose()},t.prototype._updateRigCameras=function(){var e=this._rigCameras[0],t=this._rigCameras[1];e.rotationQuaternion.copyFrom(this._deviceRoomRotationQuaternion),t.rotationQuaternion.copyFrom(this._deviceRoomRotationQuaternion),e.position.copyFrom(this._deviceRoomPosition),t.position.copyFrom(this._deviceRoomPosition)},t.prototype._correctPositionIfNotTrackPosition=function(e,t){void 0===t&&(t=!1),this.rawPose&&this.rawPose.position&&!this.webVROptions.trackPosition&&(o.j.TranslationToRef(this.rawPose.position[0],this.rawPose.position[1],-this.rawPose.position[2],this._tmpMatrix),t||this._tmpMatrix.invert(),this._tmpMatrix.multiplyToRef(e,e))},t.prototype._updateCache=function(t){var n=this;this.rotationQuaternion.equals(this._cache.rotationQuaternion)&&this.position.equals(this._cache.position)||(this.updateCacheCalled||(this.updateCacheCalled=!0,this.update()),this.rotationQuaternion.toRotationMatrix(this._workingMatrix),o.x.TransformCoordinatesToRef(this._deviceRoomPosition,this._workingMatrix,this._workingVector),this.devicePosition.subtractToRef(this._workingVector,this._workingVector),o.j.ComposeToRef(this._oneVector,this.rotationQuaternion,this._workingVector,this._deviceToWorld),this._deviceToWorld.getTranslationToRef(this._workingVector),this._workingVector.addInPlace(this.position),this._workingVector.subtractInPlace(this._cache.position),this._deviceToWorld.setTranslation(this._workingVector),this._deviceToWorld.invertToRef(this._worldToDevice),this.controllers.forEach(function(e){e._deviceToWorld.copyFrom(n._deviceToWorld),n._correctPositionIfNotTrackPosition(e._deviceToWorld),e.update()})),t||e.prototype._updateCache.call(this),this.updateCacheCalled=!1},t.prototype._computeDevicePosition=function(){o.x.TransformCoordinatesToRef(this._deviceRoomPosition,this._deviceToWorld,this.devicePosition)},t.prototype.update=function(){this._computeDevicePosition(),o.j.FromQuaternionToRef(this._deviceRoomRotationQuaternion,this._workingMatrix),this._workingMatrix.multiplyToRef(this._deviceToWorld,this._workingMatrix),o.q.FromRotationMatrixToRef(this._workingMatrix,this.deviceRotationQuaternion),this._poseSet&&this.onPoseUpdatedFromDeviceObservable.notifyObservers(null),e.prototype.update.call(this)},t.prototype._getViewMatrix=function(){return o.j.Identity()},t.prototype._getWebVRViewMatrix=function(){var e=this._cameraRigParams.parentCamera;return e._updateCache(),o.j.FromArrayToRef(this._cameraRigParams.left?this._cameraRigParams.frameData.leftViewMatrix:this._cameraRigParams.frameData.rightViewMatrix,0,this._webvrViewMatrix),this.getScene().useRightHandedSystem||this._webvrViewMatrix.toggleModelMatrixHandInPlace(),this._webvrViewMatrix.getRotationMatrixToRef(this._cameraRotationMatrix),o.x.TransformCoordinatesToRef(this._referencePoint,this._cameraRotationMatrix,this._transformedReferencePoint),this.position.addToRef(this._transformedReferencePoint,this._currentTarget),1!==e.deviceScaleFactor&&(this._webvrViewMatrix.invert(),e.deviceScaleFactor&&(this._webvrViewMatrix.multiplyAtIndex(12,e.deviceScaleFactor),this._webvrViewMatrix.multiplyAtIndex(13,e.deviceScaleFactor),this._webvrViewMatrix.multiplyAtIndex(14,e.deviceScaleFactor)),this._webvrViewMatrix.invert()),e._correctPositionIfNotTrackPosition(this._webvrViewMatrix,!0),e._worldToDevice.multiplyToRef(this._webvrViewMatrix,this._webvrViewMatrix),this._workingMatrix=this._workingMatrix||o.j.Identity(),this._webvrViewMatrix.invertToRef(this._workingMatrix),this._workingMatrix.multiplyToRef(e.getWorldMatrix(),this._workingMatrix),this._workingMatrix.getTranslationToRef(this._globalPosition),this._markSyncedWithParent(),this._webvrViewMatrix},t.prototype._getWebVRProjectionMatrix=function(){var e=this.parent;return e._vrDevice.depthNear=e.minZ,e._vrDevice.depthFar=e.maxZ,o.j.FromArrayToRef(this._cameraRigParams.left?this._cameraRigParams.frameData.leftProjectionMatrix:this._cameraRigParams.frameData.rightProjectionMatrix,0,this._projectionMatrix),this.getScene().useRightHandedSystem||this._projectionMatrix.toggleProjectionMatrixHandInPlace(),this._projectionMatrix},t.prototype.initControllers=function(){var e=this;this.controllers=[];var t=this.getScene().gamepadManager;this._onGamepadDisconnectedObserver=t.onGamepadDisconnectedObservable.add(function(t){if(t.type===Ke.POSE_ENABLED){var n=t;n.defaultModel&&n.defaultModel.setEnabled(!1),"right"===n.hand&&(e._rightController=null),"left"===n.hand&&(e._leftController=null);var r=e.controllers.indexOf(n);-1!==r&&e.controllers.splice(r,1)}}),this._onGamepadConnectedObserver=t.onGamepadConnectedObservable.add(function(t){if(t.type===Ke.POSE_ENABLED){var n=t;if(e.webVROptions.trackPosition||(n._disableTrackPosition(new o.x("left"==n.hand?-.15:.15,-.5,.25)),e._updateCacheWhenTrackingDisabledObserver||(e._updateCacheWhenTrackingDisabledObserver=e._scene.onBeforeRenderObservable.add(function(){e._updateCache()}))),n.deviceScaleFactor=e.deviceScaleFactor,n._deviceToWorld.copyFrom(e._deviceToWorld),e._correctPositionIfNotTrackPosition(n._deviceToWorld),e.webVROptions.controllerMeshes&&(n.defaultModel?n.defaultModel.setEnabled(!0):n.initControllerMesh(e.getScene(),function(t){if(t.scaling.scaleInPlace(e.deviceScaleFactor),e.onControllerMeshLoadedObservable.notifyObservers(n),e.webVROptions.defaultLightingOnControllers){e._lightOnControllers||(e._lightOnControllers=new _n.a("vrControllersLight",new o.x(0,1,0),e.getScene()));var r=function(e,t){var n=e.getChildren();n&&0!==n.length&&n.forEach(function(e){t.includedOnlyMeshes.push(e),r(e,t)})};e._lightOnControllers.includedOnlyMeshes.push(t),r(t,e._lightOnControllers)}})),n.attachToPoseControlledCamera(e),-1===e.controllers.indexOf(n)){e.controllers.push(n);for(var r=!1,i=0;i<e.controllers.length;i++)e.controllers[i].controllerType===Ct.VIVE&&(r?e.controllers[i].hand="right":(r=!0,e.controllers[i].hand="left"));e.controllers.length>=2&&e.onControllersAttachedObservable.notifyObservers(e.controllers)}}})},t}(bt),gn=function(e){function t(t){var n=e.call(this,t)||this;return n.onTriggerStateChangedObservable=new i.c,n.onMainButtonStateChangedObservable=new i.c,n.onSecondaryButtonStateChangedObservable=new i.c,n.onPadStateChangedObservable=new i.c,n.onPadValuesChangedObservable=new i.c,n.pad={x:0,y:0},n._changes={pressChanged:!1,touchChanged:!1,valueChanged:!1,changed:!1},n._buttons=new Array(t.buttons.length),n.hand=t.hand,n}return l.d(t,e),t.prototype.onButtonStateChange=function(e){this._onButtonStateChange=e},Object.defineProperty(t.prototype,"defaultModel",{get:function(){return this._defaultModel},enumerable:!0,configurable:!0}),t.prototype.update=function(){e.prototype.update.call(this);for(var t=0;t<this._buttons.length;t++)this._setButtonValue(this.browserGamepad.buttons[t],this._buttons[t],t);this.leftStick.x===this.pad.x&&this.leftStick.y===this.pad.y||(this.pad.x=this.leftStick.x,this.pad.y=this.leftStick.y,this.onPadValuesChangedObservable.notifyObservers(this.pad))},t.prototype._setButtonValue=function(e,t,n){e||(e={pressed:!1,touched:!1,value:0}),t?(this._checkChanges(e,t),this._changes.changed&&(this._onButtonStateChange&&this._onButtonStateChange(this.index,n,e),this._handleButtonChange(n,e,this._changes)),this._buttons[n].pressed=e.pressed,this._buttons[n].touched=e.touched,this._buttons[n].value=e.value<1e-8?0:e.value):this._buttons[n]={pressed:e.pressed,touched:e.touched,value:e.value}},t.prototype._checkChanges=function(e,t){return this._changes.pressChanged=e.pressed!==t.pressed,this._changes.touchChanged=e.touched!==t.touched,this._changes.valueChanged=e.value!==t.value,this._changes.changed=this._changes.pressChanged||this._changes.touchChanged||this._changes.valueChanged,this._changes},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.onTriggerStateChangedObservable.clear(),this.onMainButtonStateChangedObservable.clear(),this.onSecondaryButtonStateChangedObservable.clear(),this.onPadStateChangedObservable.clear(),this.onPadValuesChangedObservable.clear()},t}(Ft),vn=n(31),yn=n(33),bn=function(e){function t(t,n,r,i,o,a){void 0===r&&(r=null),void 0===o&&(o=_.a.TEXTURE_TRILINEAR_SAMPLINGMODE),void 0===a&&(a=_.a.TEXTUREFORMAT_RGBA);var s=e.call(this,null,r,!i,void 0,o,void 0,void 0,void 0,void 0,a)||this;s.name=t,s._engine=s.getScene().getEngine(),s.wrapU=Ge.a.CLAMP_ADDRESSMODE,s.wrapV=Ge.a.CLAMP_ADDRESSMODE,s._generateMipMaps=i,n.getContext?(s._canvas=n,s._texture=s._engine.createDynamicTexture(n.width,n.height,i,o)):(s._canvas=document.createElement("canvas"),s._texture=n.width||0===n.width?s._engine.createDynamicTexture(n.width,n.height,i,o):s._engine.createDynamicTexture(n,n,i,o));var u=s.getSize();return s._canvas.width=u.width,s._canvas.height=u.height,s._context=s._canvas.getContext("2d"),s}return l.d(t,e),t.prototype.getClassName=function(){return"DynamicTexture"},Object.defineProperty(t.prototype,"canRescale",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype._recreate=function(e){this._canvas.width=e.width,this._canvas.height=e.height,this.releaseInternalTexture(),this._texture=this._engine.createDynamicTexture(e.width,e.height,this._generateMipMaps,this.samplingMode)},t.prototype.scale=function(e){var t=this.getSize();t.width*=e,t.height*=e,this._recreate(t)},t.prototype.scaleTo=function(e,t){var n=this.getSize();n.width=e,n.height=t,this._recreate(n)},t.prototype.getContext=function(){return this._context},t.prototype.clear=function(){var e=this.getSize();this._context.fillRect(0,0,e.width,e.height)},t.prototype.update=function(e,t){void 0===t&&(t=!1),this._engine.updateDynamicTexture(this._texture,this._canvas,void 0===e||e,t,this._format||void 0)},t.prototype.drawText=function(e,t,n,r,i,o,a,s){void 0===s&&(s=!0);var u=this.getSize();if(o&&(this._context.fillStyle=o,this._context.fillRect(0,0,u.width,u.height)),this._context.font=r,null==t){var l=this._context.measureText(e);t=(u.width-l.width)/2}if(null==n){var c=parseInt(r.replace(/\D/g,""));n=u.height/2+c/3.65}this._context.fillStyle=i,this._context.fillText(e,t,n),s&&this.update(a)},t.prototype.clone=function(){var e=this.getScene();if(!e)return this;var n=this.getSize(),r=new t(this.name,n,e,this._generateMipMaps);return r.hasAlpha=this.hasAlpha,r.level=this.level,r.wrapU=this.wrapU,r.wrapV=this.wrapV,r},t.prototype.serialize=function(){var t=this.getScene();t&&!t.isReady()&&p.a.Warn("The scene must be ready before serializing the dynamic texture");var n=e.prototype.serialize.call(this);return n.base64String=this._canvas.toDataURL(),n.invertY=this._invertY,n.samplingMode=this.samplingMode,n},t.prototype._rebuild=function(){this.update()},t}(Ge.a),Tn=(n(86),n(56),n(87),"\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n#include<imageProcessingDeclaration>\n#include<helperFunctions>\n#include<imageProcessingFunctions>\nvoid main(void)\n{\nvec4 result=texture2D(textureSampler,vUV);\n#ifdef IMAGEPROCESSING\n#ifndef FROMLINEARSPACE\n\nresult.rgb=toLinearSpace(result.rgb);\n#endif\nresult=applyImageProcessing(result);\n#else\n\n#ifdef FROMLINEARSPACE\nresult=applyImageProcessing(result);\n#endif\n#endif\ngl_FragColor=result;\n}");jt.a.ShadersStore.imageProcessingPixelShader=Tn;var En=function(e){function t(t,n,r,i,o,a,s,u){void 0===r&&(r=null),void 0===s&&(s=_.a.TEXTURETYPE_UNSIGNED_INT);var l=e.call(this,t,"imageProcessing",[],[],n,r,i,o,a,null,s,"postprocess",null,!0)||this;return l._fromLinearSpace=!0,l._defines={IMAGEPROCESSING:!1,VIGNETTE:!1,VIGNETTEBLENDMODEMULTIPLY:!1,VIGNETTEBLENDMODEOPAQUE:!1,TONEMAPPING:!1,TONEMAPPING_ACES:!1,CONTRAST:!1,COLORCURVES:!1,COLORGRADING:!1,COLORGRADING3D:!1,FROMLINEARSPACE:!1,SAMPLER3DGREENDEPTH:!1,SAMPLER3DBGRMAP:!1,IMAGEPROCESSINGPOSTPROCESS:!1,EXPOSURE:!1},u?(u.applyByPostProcess=!0,l._attachImageProcessingConfiguration(u,!0),l.fromLinearSpace=!1):(l._attachImageProcessingConfiguration(null,!0),l.imageProcessingConfiguration.applyByPostProcess=!0),l.onApply=function(e){l.imageProcessingConfiguration.bind(e,l.aspectRatio)},l}return l.d(t,e),Object.defineProperty(t.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(e){this._attachImageProcessingConfiguration(e)},enumerable:!0,configurable:!0}),t.prototype._attachImageProcessingConfiguration=function(e,t){var n=this;if(void 0===t&&(t=!1),e!==this._imageProcessingConfiguration){if(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),e)this._imageProcessingConfiguration=e;else{var r=null,i=this.getEngine(),o=this.getCamera();if(o)r=o.getScene();else if(i&&i.scenes){var a=i.scenes;r=a[a.length-1]}else r=S.a.LastCreatedScene;this._imageProcessingConfiguration=r.imageProcessingConfiguration}this._imageProcessingConfiguration&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add(function(){n._updateParameters()})),t||this._updateParameters()}},Object.defineProperty(t.prototype,"colorCurves",{get:function(){return this.imageProcessingConfiguration.colorCurves},set:function(e){this.imageProcessingConfiguration.colorCurves=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorCurvesEnabled",{get:function(){return this.imageProcessingConfiguration.colorCurvesEnabled},set:function(e){this.imageProcessingConfiguration.colorCurvesEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorGradingTexture",{get:function(){return this.imageProcessingConfiguration.colorGradingTexture},set:function(e){this.imageProcessingConfiguration.colorGradingTexture=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colorGradingEnabled",{get:function(){return this.imageProcessingConfiguration.colorGradingEnabled},set:function(e){this.imageProcessingConfiguration.colorGradingEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exposure",{get:function(){return this.imageProcessingConfiguration.exposure},set:function(e){this.imageProcessingConfiguration.exposure=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toneMappingEnabled",{get:function(){return this._imageProcessingConfiguration.toneMappingEnabled},set:function(e){this._imageProcessingConfiguration.toneMappingEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"toneMappingType",{get:function(){return this._imageProcessingConfiguration.toneMappingType},set:function(e){this._imageProcessingConfiguration.toneMappingType=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contrast",{get:function(){return this.imageProcessingConfiguration.contrast},set:function(e){this.imageProcessingConfiguration.contrast=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vignetteStretch",{get:function(){return this.imageProcessingConfiguration.vignetteStretch},set:function(e){this.imageProcessingConfiguration.vignetteStretch=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vignetteCentreX",{get:function(){return this.imageProcessingConfiguration.vignetteCentreX},set:function(e){this.imageProcessingConfiguration.vignetteCentreX=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vignetteCentreY",{get:function(){return this.imageProcessingConfiguration.vignetteCentreY},set:function(e){this.imageProcessingConfiguration.vignetteCentreY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vignetteWeight",{get:function(){return this.imageProcessingConfiguration.vignetteWeight},set:function(e){this.imageProcessingConfiguration.vignetteWeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vignetteColor",{get:function(){return this.imageProcessingConfiguration.vignetteColor},set:function(e){this.imageProcessingConfiguration.vignetteColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vignetteCameraFov",{get:function(){return this.imageProcessingConfiguration.vignetteCameraFov},set:function(e){this.imageProcessingConfiguration.vignetteCameraFov=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vignetteBlendMode",{get:function(){return this.imageProcessingConfiguration.vignetteBlendMode},set:function(e){this.imageProcessingConfiguration.vignetteBlendMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"vignetteEnabled",{get:function(){return this.imageProcessingConfiguration.vignetteEnabled},set:function(e){this.imageProcessingConfiguration.vignetteEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fromLinearSpace",{get:function(){return this._fromLinearSpace},set:function(e){this._fromLinearSpace!==e&&(this._fromLinearSpace=e,this._updateParameters())},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"ImageProcessingPostProcess"},t.prototype._updateParameters=function(){this._defines.FROMLINEARSPACE=this._fromLinearSpace,this.imageProcessingConfiguration.prepareDefines(this._defines,!0);var e="";for(var t in this._defines)this._defines[t]&&(e+="#define "+t+";\r\n");var n=["textureSampler"],r=["scale"];vn.a&&(vn.a.PrepareSamplers(n,this._defines),vn.a.PrepareUniforms(r,this._defines)),this.updateEffect(e,r,n)},t.prototype.dispose=function(t){e.prototype.dispose.call(this,t),this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration&&(this.imageProcessingConfiguration.applyByPostProcess=!1)},l.c([Object(L.c)()],t.prototype,"_fromLinearSpace",void 0),t}(zt),xn=n(13),Mn=n(4);fe.a._GroundMeshParser=function(e,t){return An.Parse(e,t)};var An=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.generateOctree=!1,r}return l.d(t,e),t.prototype.getClassName=function(){return"GroundMesh"},Object.defineProperty(t.prototype,"subdivisions",{get:function(){return Math.min(this._subdivisionsX,this._subdivisionsY)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subdivisionsX",{get:function(){return this._subdivisionsX},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subdivisionsY",{get:function(){return this._subdivisionsY},enumerable:!0,configurable:!0}),t.prototype.optimize=function(e,t){void 0===t&&(t=32),this._subdivisionsX=e,this._subdivisionsY=e,this.subdivide(e),this.createOrUpdateSubmeshesOctree&&this.createOrUpdateSubmeshesOctree(t)},t.prototype.getHeightAtCoordinates=function(e,t){var n=this.getWorldMatrix(),r=o.t.Matrix[5];n.invertToRef(r);var i=o.t.Vector3[8];if(o.x.TransformCoordinatesFromFloatsToRef(e,0,t,r,i),t=i.z,(e=i.x)<this._minX||e>this._maxX||t<this._minZ||t>this._maxZ)return this.position.y;this._heightQuads&&0!=this._heightQuads.length||(this._initHeightQuads(),this._computeHeightQuads());var a=this._getFacetAt(e,t);return o.x.TransformCoordinatesFromFloatsToRef(0,-(a.x*e+a.z*t+a.w)/a.y,0,n,i),i.y},t.prototype.getNormalAtCoordinates=function(e,t){var n=new o.x(0,1,0);return this.getNormalAtCoordinatesToRef(e,t,n),n},t.prototype.getNormalAtCoordinatesToRef=function(e,t,n){var r=this.getWorldMatrix(),i=o.t.Matrix[5];r.invertToRef(i);var a=o.t.Vector3[8];if(o.x.TransformCoordinatesFromFloatsToRef(e,0,t,i,a),t=a.z,(e=a.x)<this._minX||e>this._maxX||t<this._minZ||t>this._maxZ)return this;this._heightQuads&&0!=this._heightQuads.length||(this._initHeightQuads(),this._computeHeightQuads());var s=this._getFacetAt(e,t);return o.x.TransformNormalFromFloatsToRef(s.x,s.y,s.z,r,n),this},t.prototype.updateCoordinateHeights=function(){return this._heightQuads&&0!=this._heightQuads.length||this._initHeightQuads(),this._computeHeightQuads(),this},t.prototype._getFacetAt=function(e,t){var n=Math.floor((e+this._maxX)*this._subdivisionsX/this._width),r=Math.floor(-(t+this._maxZ)*this._subdivisionsY/this._height+this._subdivisionsY),i=this._heightQuads[r*this._subdivisionsX+n];return t<i.slope.x*e+i.slope.y?i.facet1:i.facet2},t.prototype._initHeightQuads=function(){var e=this._subdivisionsX,t=this._subdivisionsY;this._heightQuads=new Array;for(var n=0;n<t;n++)for(var r=0;r<e;r++){var i={slope:o.w.Zero(),facet1:new o.y(0,0,0,0),facet2:new o.y(0,0,0,0)};this._heightQuads[n*e+r]=i}return this},t.prototype._computeHeightQuads=function(){var e=this.getVerticesData(Mn.b.PositionKind);if(!e)return this;for(var t=o.t.Vector3[3],n=o.t.Vector3[2],r=o.t.Vector3[1],i=o.t.Vector3[0],a=o.t.Vector3[4],s=o.t.Vector3[5],u=o.t.Vector3[6],l=o.t.Vector3[7],c=o.t.Vector3[8],h=0,d=0,f=0,p=0,_=0,m=0,g=0,v=this._subdivisionsX,y=this._subdivisionsY,b=0;b<y;b++)for(var T=0;T<v;T++){f=(b+1)*(v+1)*3,t.x=e[(d=b*(v+1)*3)+(h=3*T)],t.y=e[d+h+1],t.z=e[d+h+2],n.x=e[d+h+3],n.y=e[d+h+4],n.z=e[d+h+5],r.x=e[f+h],r.y=e[f+h+1],r.z=e[f+h+2],i.x=e[f+h+3],i.y=e[f+h+4],i.z=e[f+h+5],_=t.z-(p=(i.z-t.z)/(i.x-t.x))*t.x,n.subtractToRef(t,a),r.subtractToRef(t,s),i.subtractToRef(t,u),o.x.CrossToRef(u,s,l),o.x.CrossToRef(a,u,c),l.normalize(),c.normalize(),m=-(l.x*t.x+l.y*t.y+l.z*t.z),g=-(c.x*n.x+c.y*n.y+c.z*n.z);var E=this._heightQuads[b*v+T];E.slope.copyFromFloats(p,_),E.facet1.copyFromFloats(l.x,l.y,l.z,m),E.facet2.copyFromFloats(c.x,c.y,c.z,g)}return this},t.prototype.serialize=function(t){e.prototype.serialize.call(this,t),t.subdivisionsX=this._subdivisionsX,t.subdivisionsY=this._subdivisionsY,t.minX=this._minX,t.maxX=this._maxX,t.minZ=this._minZ,t.maxZ=this._maxZ,t.width=this._width,t.height=this._height},t.Parse=function(e,n){var r=new t(e.name,n);return r._subdivisionsX=e.subdivisionsX||1,r._subdivisionsY=e.subdivisionsY||1,r._minX=e.minX,r._maxX=e.maxX,r._minZ=e.minZ,r._maxZ=e.maxZ,r._width=e.width,r._height=e.height,r},t}(fe.a);xn.a.CreateGround=function(e){var t,n,r=[],i=[],a=[],s=[],u=e.width||1,l=e.height||1,c=e.subdivisionsX||e.subdivisions||1,h=e.subdivisionsY||e.subdivisions||1;for(t=0;t<=h;t++)for(n=0;n<=c;n++){var d=new o.x(n*u/c-u/2,0,(h-t)*l/h-l/2),f=new o.x(0,1,0);i.push(d.x,d.y,d.z),a.push(f.x,f.y,f.z),s.push(n/c,1-t/h)}for(t=0;t<h;t++)for(n=0;n<c;n++)r.push(n+1+(t+1)*(c+1)),r.push(n+1+t*(c+1)),r.push(n+t*(c+1)),r.push(n+(t+1)*(c+1)),r.push(n+1+(t+1)*(c+1)),r.push(n+t*(c+1));var p=new xn.a;return p.indices=r,p.positions=i,p.normals=a,p.uvs=s,p},xn.a.CreateTiledGround=function(e){var t,n,r,i,a=null!=e.xmin?e.xmin:-1,s=null!=e.zmin?e.zmin:-1,u=null!=e.xmax?e.xmax:1,l=null!=e.zmax?e.zmax:1,c=e.subdivisions||{w:1,h:1},h=e.precision||{w:1,h:1},d=new Array,f=new Array,p=new Array,_=new Array;c.h=c.h<1?1:c.h,c.w=c.w<1?1:c.w,h.w=h.w<1?1:h.w,h.h=h.h<1?1:h.h;var m=(u-a)/c.w,g=(l-s)/c.h;function v(e,r,i,a){var s=f.length/3,u=h.w+1;for(t=0;t<h.h;t++)for(n=0;n<h.w;n++){var l=[s+n+t*u,s+(n+1)+t*u,s+(n+1)+(t+1)*u,s+n+(t+1)*u];d.push(l[1]),d.push(l[2]),d.push(l[3]),d.push(l[0]),d.push(l[1]),d.push(l[3])}var c=o.x.Zero(),m=new o.x(0,1,0);for(t=0;t<=h.h;t++)for(c.z=t*(a-r)/h.h+r,n=0;n<=h.w;n++)c.x=n*(i-e)/h.w+e,c.y=0,f.push(c.x,c.y,c.z),p.push(m.x,m.y,m.z),_.push(n/h.w,t/h.h)}for(r=0;r<c.h;r++)for(i=0;i<c.w;i++)v(a+i*m,s+r*g,a+(i+1)*m,s+(r+1)*g);var y=new xn.a;return y.indices=d,y.positions=f,y.normals=p,y.uvs=_,y},xn.a.CreateGroundFromHeightMap=function(e){var t,n,r=[],i=[],a=[],s=[],u=e.colorFilter||new o.e(.3,.59,.11),l=e.alphaFilter||0,c=!1;if(e.minHeight>e.maxHeight){c=!0;var h=e.maxHeight;e.maxHeight=e.minHeight,e.minHeight=h}for(t=0;t<=e.subdivisions;t++)for(n=0;n<=e.subdivisions;n++){var d=new o.x(n*e.width/e.subdivisions-e.width/2,0,(e.subdivisions-t)*e.height/e.subdivisions-e.height/2),f=4*(((d.x+e.width/2)/e.width*(e.bufferWidth-1)|0)+((1-(d.z+e.height/2)/e.height)*(e.bufferHeight-1)|0)*e.bufferWidth),p=e.buffer[f]/255,_=e.buffer[f+1]/255,m=e.buffer[f+2]/255;c&&(p=1-p,_=1-_,m=1-m),d.y=e.buffer[f+3]/255>=l?e.minHeight+(e.maxHeight-e.minHeight)*(p*u.r+_*u.g+m*u.b):e.minHeight-o.h,i.push(d.x,d.y,d.z),a.push(0,0,0),s.push(n/e.subdivisions,1-t/e.subdivisions)}for(t=0;t<e.subdivisions;t++)for(n=0;n<e.subdivisions;n++){var g=n+1+(t+1)*(e.subdivisions+1),v=n+1+t*(e.subdivisions+1),y=n+t*(e.subdivisions+1),b=n+(t+1)*(e.subdivisions+1),T=i[3*g+1]>=e.minHeight,E=i[3*y+1]>=e.minHeight;T&&i[3*v+1]>=e.minHeight&&E&&(r.push(g),r.push(v),r.push(y)),i[3*b+1]>=e.minHeight&&T&&E&&(r.push(b),r.push(g),r.push(y))}xn.a.ComputeNormals(i,r,a);var x=new xn.a;return x.indices=r,x.positions=i,x.normals=a,x.uvs=s,x},fe.a.CreateGround=function(e,t,n,r,i,o){return Sn.CreateGround(e,{width:t,height:n,subdivisions:r,updatable:o},i)},fe.a.CreateTiledGround=function(e,t,n,r,i,o,a,s,u){return Sn.CreateTiledGround(e,{xmin:t,zmin:n,xmax:r,zmax:i,subdivisions:o,precision:a,updatable:u},s)},fe.a.CreateGroundFromHeightMap=function(e,t,n,r,i,o,a,s,u,l,c){return Sn.CreateGroundFromHeightMap(e,t,{width:n,height:r,subdivisions:i,minHeight:o,maxHeight:a,updatable:u,onReady:l,alphaFilter:c},s)};var Sn=function(){function e(){}return e.CreateGround=function(e,t,n){var r=new An(e,n);return r._setReady(!1),r._subdivisionsX=t.subdivisionsX||t.subdivisions||1,r._subdivisionsY=t.subdivisionsY||t.subdivisions||1,r._width=t.width||1,r._height=t.height||1,r._maxX=r._width/2,r._maxZ=r._height/2,r._minX=-r._maxX,r._minZ=-r._maxZ,xn.a.CreateGround(t).applyToMesh(r,t.updatable),r._setReady(!0),r},e.CreateTiledGround=function(e,t,n){void 0===n&&(n=null);var r=new fe.a(e,n);return xn.a.CreateTiledGround(t).applyToMesh(r,t.updatable),r},e.CreateGroundFromHeightMap=function(e,t,n,r){void 0===r&&(r=null);var i=n.width||10,a=n.height||10,s=n.subdivisions||1,u=n.minHeight||0,l=n.maxHeight||1,c=n.colorFilter||new o.e(.3,.59,.11),h=n.alphaFilter||0,d=n.updatable,f=n.onReady,p=new An(e,r=r||S.a.LastCreatedScene);return p._subdivisionsX=s,p._subdivisionsY=s,p._width=i,p._height=a,p._maxX=p._width/2,p._maxZ=p._height/2,p._minX=-p._maxX,p._minZ=-p._maxZ,p._setReady(!1),ye.h.LoadImage(t,function(e){var t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("Unable to get 2d context for CreateGroundFromHeightMap");if(!r.isDisposed){var o=e.width,_=e.height;t.width=o,t.height=_,n.drawImage(e,0,0);var m=n.getImageData(0,0,o,_).data;xn.a.CreateGroundFromHeightMap({width:i,height:a,subdivisions:s,minHeight:u,maxHeight:l,colorFilter:c,buffer:m,bufferWidth:o,bufferHeight:_,alphaFilter:h}).applyToMesh(p,d),f&&f(p),p._setReady(!0)}},function(){},r.offlineProvider),p},e}();xn.a.CreateTorus=function(e){for(var t=[],n=[],r=[],i=[],a=e.diameter||1,s=e.thickness||.5,u=e.tessellation||16,l=0===e.sideOrientation?0:e.sideOrientation||xn.a.DEFAULTSIDE,c=u+1,h=0;h<=u;h++)for(var d=h/u,f=h*Math.PI*2/u-Math.PI/2,p=o.j.Translation(a/2,0,0).multiply(o.j.RotationY(f)),_=0;_<=u;_++){var m=1-_/u,g=_*Math.PI*2/u+Math.PI,v=Math.cos(g),y=Math.sin(g),b=new o.x(v,y,0),T=b.scale(s/2),E=new o.w(d,m);T=o.x.TransformCoordinates(T,p),b=o.x.TransformNormal(b,p),n.push(T.x,T.y,T.z),r.push(b.x,b.y,b.z),i.push(E.x,E.y);var x=(h+1)%c,M=(_+1)%c;t.push(h*c+_),t.push(h*c+M),t.push(x*c+_),t.push(h*c+M),t.push(x*c+M),t.push(x*c+_)}xn.a._ComputeSides(l,n,t,r,i,e.frontUVs,e.backUVs);var A=new xn.a;return A.indices=t,A.positions=n,A.normals=r,A.uvs=i,A},fe.a.CreateTorus=function(e,t,n,r,i,o,a){return Pn.CreateTorus(e,{diameter:t,thickness:n,tessellation:r,sideOrientation:a,updatable:o},i)};var Cn,Pn=function(){function e(){}return e.CreateTorus=function(e,t,n){var r=new fe.a(e,n);return t.sideOrientation=fe.a._GetDefaultSideOrientation(t.sideOrientation),r._originalBuilderSideOrientation=t.sideOrientation,xn.a.CreateTorus(t).applyToMesh(r,t.updatable),r},e}(),Rn=n(53),Dn=function(){function e(t,n){if(void 0===n&&(n=null),this.scene=t,this._pointerDownOnMeshAsked=!1,this._isActionableMesh=!1,this._teleportationRequestInitiated=!1,this._teleportationBackRequestInitiated=!1,this._rotationRightAsked=!1,this._rotationLeftAsked=!1,this._dpadPressed=!0,this._activePointer=!1,this._id=e._idCounter++,n)this._gazeTracker=n.clone("gazeTracker");else{this._gazeTracker=fe.a.CreateTorus("gazeTracker",.0035,.0025,20,t,!1),this._gazeTracker.bakeCurrentTransformIntoVertices(),this._gazeTracker.isPickable=!1,this._gazeTracker.isVisible=!1;var r=new yn.a("targetMat",t);r.specularColor=o.e.Black(),r.emissiveColor=new o.e(.7,.7,.7),r.backFaceCulling=!1,this._gazeTracker.material=r}}return e.prototype._getForwardRay=function(e){return new Ot.a(o.x.Zero(),new o.x(0,0,e))},e.prototype._selectionPointerDown=function(){this._pointerDownOnMeshAsked=!0,this._currentHit&&this.scene.simulatePointerDown(this._currentHit,{pointerId:this._id})},e.prototype._selectionPointerUp=function(){this._currentHit&&this.scene.simulatePointerUp(this._currentHit,{pointerId:this._id}),this._pointerDownOnMeshAsked=!1},e.prototype._activatePointer=function(){this._activePointer=!0},e.prototype._deactivatePointer=function(){this._activePointer=!1},e.prototype._updatePointerDistance=function(e){void 0===e&&(e=100)},e.prototype.dispose=function(){this._interactionsEnabled=!1,this._teleportationEnabled=!1,this._gazeTracker&&this._gazeTracker.dispose()},e._idCounter=0,e}(),On=function(e){function t(t,n,r){var i=e.call(this,n,r)||this;i.webVRController=t,i._laserPointer=fe.a.CreateCylinder("laserPointer",1,.004,2e-4,20,1,n,!1);var a=new yn.a("laserPointerMat",n);if(a.emissiveColor=new o.e(.7,.7,.7),a.alpha=.6,i._laserPointer.material=a,i._laserPointer.rotation.x=Math.PI/2,i._laserPointer.position.z=-.5,i._laserPointer.isVisible=!1,i._laserPointer.isPickable=!1,!t.mesh){var s=new fe.a("preloadControllerMesh",n),u=new fe.a(Ft.POINTING_POSE,n);u.rotation.x=-.7,s.addChild(u),t.attachToMesh(s)}return i._setLaserPointerParent(t.mesh),i._meshAttachedObserver=t._meshAttachedObservable.add(function(e){i._setLaserPointerParent(e)}),i}return l.d(t,e),t.prototype._getForwardRay=function(e){return this.webVRController.getForwardRay(e)},t.prototype._activatePointer=function(){e.prototype._activatePointer.call(this),this._laserPointer.isVisible=!0},t.prototype._deactivatePointer=function(){e.prototype._deactivatePointer.call(this),this._laserPointer.isVisible=!1},t.prototype._setLaserPointerColor=function(e){this._laserPointer.material.emissiveColor=e},t.prototype._setLaserPointerParent=function(e){var t=function(e){e.isPickable=!1,e.getChildMeshes().forEach(function(e){t(e)})};t(e);var n=e.getChildren(void 0,!1),r=e;this.webVRController._pointingPoseNode=null;for(var i=0;i<n.length;i++)if(n[i].name&&n[i].name.indexOf(Ft.POINTING_POSE)>=0){this.webVRController._pointingPoseNode=r=n[i];break}this._laserPointer.parent=r},t.prototype._updatePointerDistance=function(e){void 0===e&&(e=100),this._laserPointer.scaling.y=e,this._laserPointer.position.z=-e/2},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._laserPointer.dispose(),this._meshAttachedObserver&&this.webVRController._meshAttachedObservable.remove(this._meshAttachedObserver)},t}(Dn),wn=function(e){function t(t,n){var r=e.call(this,n)||this;return r.getCamera=t,r}return l.d(t,e),t.prototype._getForwardRay=function(e){var t=this.getCamera();return t?t.getForwardRay(e):new Ot.a(o.x.Zero(),o.x.Forward())},t}(Dn),Ln=function(){},In=function(){function e(e,t){var n=this;if(void 0===t&&(t={}),this.webVROptions=t,this._webVRsupported=!1,this._webVRready=!1,this._webVRrequesting=!1,this._webVRpresenting=!1,this._fullscreenVRpresenting=!1,this.onEnteringVRObservable=new i.c,this.onAfterEnteringVRObservable=new i.c,this.onExitingVRObservable=new i.c,this.onControllerMeshLoadedObservable=new i.c,this._useCustomVRButton=!1,this._teleportationRequested=!1,this._teleportActive=!1,this._floorMeshesCollection=[],this._rotationAllowed=!0,this._teleportBackwardsVector=new o.x(0,-1,-1),this._isDefaultTeleportationTarget=!0,this._teleportationFillColor="#444444",this._teleportationBorderColor="#FFFFFF",this._rotationAngle=0,this._haloCenter=new o.x(0,0,0),this._padSensibilityUp=.65,this._padSensibilityDown=.35,this._leftController=null,this._rightController=null,this.onNewMeshSelected=new i.c,this.onNewMeshPicked=new i.c,this.onBeforeCameraTeleport=new i.c,this.onAfterCameraTeleport=new i.c,this.onSelectedMeshUnselected=new i.c,this.teleportationEnabled=!0,this._teleportationInitialized=!1,this._interactionsEnabled=!1,this._interactionsRequested=!1,this._displayGaze=!0,this._displayLaserPointer=!0,this.updateGazeTrackerScale=!0,this.updateGazeTrackerColor=!0,this.requestPointerLockOnFullScreen=!0,this._onResize=function(){n.moveButtonToBottomRight(),n._fullscreenVRpresenting&&n._webVRready&&n.exitVR()},this._onFullscreenChange=function(){var e=document;void 0!==e.fullscreen?n._fullscreenVRpresenting=document.fullscreen:void 0!==e.mozFullScreen?n._fullscreenVRpresenting=e.mozFullScreen:void 0!==e.webkitIsFullScreen?n._fullscreenVRpresenting=e.webkitIsFullScreen:void 0!==e.msIsFullScreen?n._fullscreenVRpresenting=e.msIsFullScreen:void 0!==document.msFullscreenElement&&(n._fullscreenVRpresenting=document.msFullscreenElement),!n._fullscreenVRpresenting&&n._canvas&&(n.exitVR(),n._useCustomVRButton||(n._btnVR.style.top=n._canvas.offsetTop+n._canvas.offsetHeight-70+"px",n._btnVR.style.left=n._canvas.offsetLeft+n._canvas.offsetWidth-100+"px"))},this._cachedAngularSensibility={angularSensibilityX:null,angularSensibilityY:null,angularSensibility:null},this.beforeRender=function(){n._leftController&&n._leftController._activePointer&&n._castRayAndSelectObject(n._leftController),n._rightController&&n._rightController._activePointer&&n._castRayAndSelectObject(n._rightController),n._noControllerIsActive?n._castRayAndSelectObject(n._cameraGazer):n._cameraGazer._gazeTracker.isVisible=!1},this._onNewGamepadConnected=function(e){if(e.type!==Ke.POSE_ENABLED)e.leftStick&&e.onleftstickchanged(function(e){n._teleportationInitialized&&n.teleportationEnabled&&(!n._leftController&&!n._rightController||n._leftController&&!n._leftController._activePointer&&n._rightController&&!n._rightController._activePointer)&&(n._checkTeleportWithRay(e,n._cameraGazer),n._checkTeleportBackwards(e,n._cameraGazer))}),e.rightStick&&e.onrightstickchanged(function(e){n._teleportationInitialized&&n._checkRotate(e,n._cameraGazer)}),e.type===Ke.XBOX&&(e.onbuttondown(function(e){n._interactionsEnabled&&e===wt.A&&n._cameraGazer._selectionPointerDown()}),e.onbuttonup(function(e){n._interactionsEnabled&&e===wt.A&&n._cameraGazer._selectionPointerUp()}));else{var t=e,r=new On(t,n._scene,n._cameraGazer._gazeTracker);"right"===t.hand||n._leftController&&n._leftController.webVRController!=t?n._rightController=r:n._leftController=r,n._tryEnableInteractionOnController(r)}},this._tryEnableInteractionOnController=function(e){n._interactionsRequested&&!e._interactionsEnabled&&n._enableInteractionOnController(e),n._teleportationRequested&&!e._teleportationEnabled&&n._enableTeleportationOnController(e)},this._onNewGamepadDisconnected=function(e){e instanceof gn&&("left"===e.hand&&null!=n._leftController&&(n._leftController.dispose(),n._leftController=null),"right"===e.hand&&null!=n._rightController&&(n._rightController.dispose(),n._rightController=null))},this._workingVector=o.x.Zero(),this._workingQuaternion=o.q.Identity(),this._workingMatrix=o.j.Identity(),this._scene=e,this._canvas=e.getEngine().getRenderingCanvas(),void 0===t.createFallbackVRDeviceOrientationFreeCamera&&(t.createFallbackVRDeviceOrientationFreeCamera=!0),void 0===t.createDeviceOrientationCamera&&(t.createDeviceOrientationCamera=!0),void 0===t.laserToggle&&(t.laserToggle=!0),void 0===t.defaultHeight&&(t.defaultHeight=1.7),t.useCustomVRButton&&(this._useCustomVRButton=!0,t.customVRButton&&(this._btnVR=t.customVRButton)),t.rayLength&&(this._rayLength=t.rayLength),this._defaultHeight=t.defaultHeight,t.positionScale&&(this._rayLength*=t.positionScale,this._defaultHeight*=t.positionScale),this._hasEnteredVR=!1,this._position=this._scene.activeCamera?this._scene.activeCamera.position.clone():new o.x(0,this._defaultHeight,0),t.createDeviceOrientationCamera||!this._scene.activeCamera){if(this._deviceOrientationCamera=new xt("deviceOrientationVRHelper",this._position.clone(),e),this._scene.activeCamera&&(this._deviceOrientationCamera.minZ=this._scene.activeCamera.minZ,this._deviceOrientationCamera.maxZ=this._scene.activeCamera.maxZ,this._scene.activeCamera instanceof yt&&this._scene.activeCamera.rotation)){var r=this._scene.activeCamera;this._deviceOrientationCamera.rotationQuaternion.copyFrom(r.rotationQuaternion?r.rotationQuaternion:o.q.RotationYawPitchRoll(r.rotation.y,r.rotation.x,r.rotation.z)),this._deviceOrientationCamera.rotation=r.rotation.clone()}this._scene.activeCamera=this._deviceOrientationCamera,this._canvas&&this._scene.activeCamera.attachControl(this._canvas)}else this._existingCamera=this._scene.activeCamera;if(t.createFallbackVRDeviceOrientationFreeCamera&&(t.useMultiview&&(t.vrDeviceOrientationCameraMetrics||(t.vrDeviceOrientationCameraMetrics=rn.GetDefault()),t.vrDeviceOrientationCameraMetrics.multiviewEnabled=!0),this._vrDeviceOrientationCamera=new fn("VRDeviceOrientationVRHelper",this._position,this._scene,!0,t.vrDeviceOrientationCameraMetrics),this._vrDeviceOrientationCamera.angularSensibility=Number.MAX_VALUE),this._webVRCamera=new mn("WebVRHelper",this._position,this._scene,t),this._webVRCamera.useStandingMatrix(),this._cameraGazer=new wn(function(){return n.currentVRCamera},e),!this._useCustomVRButton){this._btnVR=document.createElement("BUTTON"),this._btnVR.className="babylonVRicon",this._btnVR.id="babylonVRiconbtn",this._btnVR.title="Click to switch to VR";var a=document.createElement("style");a.appendChild(document.createTextNode(".babylonVRicon { position: absolute; right: 20px; height: 50px; width: 80px; background-color: rgba(51,51,51,0.7); background-image: url(data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%222048%22%20height%3D%221152%22%20viewBox%3D%220%200%202048%201152%22%20version%3D%221.1%22%3E%3Cpath%20transform%3D%22rotate%28180%201024%2C576.0000000000001%29%22%20d%3D%22m1109%2C896q17%2C0%2030%2C-12t13%2C-30t-12.5%2C-30.5t-30.5%2C-12.5l-170%2C0q-18%2C0%20-30.5%2C12.5t-12.5%2C30.5t13%2C30t30%2C12l170%2C0zm-85%2C256q59%2C0%20132.5%2C-1.5t154.5%2C-5.5t164.5%2C-11.5t163%2C-20t150%2C-30t124.5%2C-41.5q23%2C-11%2042%2C-24t38%2C-30q27%2C-25%2041%2C-61.5t14%2C-72.5l0%2C-257q0%2C-123%20-47%2C-232t-128%2C-190t-190%2C-128t-232%2C-47l-81%2C0q-37%2C0%20-68.5%2C14t-60.5%2C34.5t-55.5%2C45t-53%2C45t-53%2C34.5t-55.5%2C14t-55.5%2C-14t-53%2C-34.5t-53%2C-45t-55.5%2C-45t-60.5%2C-34.5t-68.5%2C-14l-81%2C0q-123%2C0%20-232%2C47t-190%2C128t-128%2C190t-47%2C232l0%2C257q0%2C68%2038%2C115t97%2C73q54%2C24%20124.5%2C41.5t150%2C30t163%2C20t164.5%2C11.5t154.5%2C5.5t132.5%2C1.5zm939%2C-298q0%2C39%20-24.5%2C67t-58.5%2C42q-54%2C23%20-122%2C39.5t-143.5%2C28t-155.5%2C19t-157%2C11t-148.5%2C5t-129.5%2C1.5q-59%2C0%20-130%2C-1.5t-148%2C-5t-157%2C-11t-155.5%2C-19t-143.5%2C-28t-122%2C-39.5q-34%2C-14%20-58.5%2C-42t-24.5%2C-67l0%2C-257q0%2C-106%2040.5%2C-199t110%2C-162.5t162.5%2C-109.5t199%2C-40l81%2C0q27%2C0%2052%2C14t50%2C34.5t51%2C44.5t55.5%2C44.5t63.5%2C34.5t74%2C14t74%2C-14t63.5%2C-34.5t55.5%2C-44.5t51%2C-44.5t50%2C-34.5t52%2C-14l14%2C0q37%2C0%2070%2C0.5t64.5%2C4.5t63.5%2C12t68%2C23q71%2C30%20128.5%2C78.5t98.5%2C110t63.5%2C133.5t22.5%2C149l0%2C257z%22%20fill%3D%22white%22%20/%3E%3C/svg%3E%0A); background-size: 80%; background-repeat:no-repeat; background-position: center; border: none; outline: none; transition: transform 0.125s ease-out } .babylonVRicon:hover { transform: scale(1.05) } .babylonVRicon:active {background-color: rgba(51,51,51,1) } .babylonVRicon:focus {background-color: rgba(51,51,51,1) }.babylonVRicon.vrdisplaypresenting { display: none; }")),document.getElementsByTagName("head")[0].appendChild(a),this.moveButtonToBottomRight()}this._btnVR&&this._btnVR.addEventListener("click",function(){n.isInVRMode?n.exitVR():n.enterVR()}),window.addEventListener("resize",this._onResize),document.addEventListener("fullscreenchange",this._onFullscreenChange,!1),document.addEventListener("mozfullscreenchange",this._onFullscreenChange,!1),document.addEventListener("webkitfullscreenchange",this._onFullscreenChange,!1),document.addEventListener("msfullscreenchange",this._onFullscreenChange,!1),document.onmsfullscreenchange=this._onFullscreenChange,t.createFallbackVRDeviceOrientationFreeCamera?this.displayVRButton():this._scene.getEngine().onVRDisplayChangedObservable.add(function(e){e.vrDisplay&&n.displayVRButton()}),this._onKeyDown=function(e){27===e.keyCode&&n.isInVRMode&&n.exitVR()},document.addEventListener("keydown",this._onKeyDown),this._scene.onPrePointerObservable.add(function(){n.isInVRMode&&(n.exitVR(),n._fullscreenVRpresenting&&n._scene.getEngine().exitFullscreen())},Se.a.POINTERDOUBLETAP,!1),this._onVRDisplayChanged=function(e){return n.onVRDisplayChanged(e)},this._onVrDisplayPresentChange=function(){return n.onVrDisplayPresentChange()},this._onVRRequestPresentStart=function(){n._webVRrequesting=!0,n.updateButtonVisibility()},this._onVRRequestPresentComplete=function(){n._webVRrequesting=!1,n.updateButtonVisibility()},e.getEngine().onVRDisplayChangedObservable.add(this._onVRDisplayChanged),e.getEngine().onVRRequestPresentStart.add(this._onVRRequestPresentStart),e.getEngine().onVRRequestPresentComplete.add(this._onVRRequestPresentComplete),window.addEventListener("vrdisplaypresentchange",this._onVrDisplayPresentChange),e.onDisposeObservable.add(function(){n.dispose()}),this._webVRCamera.onControllerMeshLoadedObservable.add(function(e){return n._onDefaultMeshLoaded(e)}),this._scene.gamepadManager.onGamepadConnectedObservable.add(this._onNewGamepadConnected),this._scene.gamepadManager.onGamepadDisconnectedObservable.add(this._onNewGamepadDisconnected),this.updateButtonVisibility(),this._circleEase=new ee,this._circleEase.setEasingMode($.EASINGMODE_EASEINOUT),this.webVROptions.floorMeshes&&this.enableTeleportation({floorMeshes:this.webVROptions.floorMeshes})}return Object.defineProperty(e.prototype,"onEnteringVR",{get:function(){return this.onEnteringVRObservable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onExitingVR",{get:function(){return this.onExitingVRObservable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onControllerMeshLoaded",{get:function(){return this.onControllerMeshLoadedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"teleportationTarget",{get:function(){return this._teleportationTarget},set:function(e){e&&(e.name="teleportationTarget",this._isDefaultTeleportationTarget=!1,this._teleportationTarget=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gazeTrackerMesh",{get:function(){return this._cameraGazer._gazeTracker},set:function(e){e&&(this._cameraGazer._gazeTracker&&this._cameraGazer._gazeTracker.dispose(),this._leftController&&this._leftController._gazeTracker&&this._leftController._gazeTracker.dispose(),this._rightController&&this._rightController._gazeTracker&&this._rightController._gazeTracker.dispose(),this._cameraGazer._gazeTracker=e,this._cameraGazer._gazeTracker.bakeCurrentTransformIntoVertices(),this._cameraGazer._gazeTracker.isPickable=!1,this._cameraGazer._gazeTracker.isVisible=!1,this._cameraGazer._gazeTracker.name="gazeTracker",this._leftController&&(this._leftController._gazeTracker=this._cameraGazer._gazeTracker.clone("gazeTracker")),this._rightController&&(this._rightController._gazeTracker=this._cameraGazer._gazeTracker.clone("gazeTracker")))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftControllerGazeTrackerMesh",{get:function(){return this._leftController?this._leftController._gazeTracker:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightControllerGazeTrackerMesh",{get:function(){return this._rightController?this._rightController._gazeTracker:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayGaze",{get:function(){return this._displayGaze},set:function(e){this._displayGaze=e,e||(this._cameraGazer._gazeTracker.isVisible=!1,this._leftController&&(this._leftController._gazeTracker.isVisible=!1),this._rightController&&(this._rightController._gazeTracker.isVisible=!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayLaserPointer",{get:function(){return this._displayLaserPointer},set:function(e){this._displayLaserPointer=e,e?(this._rightController&&this._rightController._activatePointer(),this._leftController&&this._leftController._activatePointer()):(this._rightController&&(this._rightController._deactivatePointer(),this._rightController._gazeTracker.isVisible=!1),this._leftController&&(this._leftController._deactivatePointer(),this._leftController._gazeTracker.isVisible=!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deviceOrientationCamera",{get:function(){return this._deviceOrientationCamera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentVRCamera",{get:function(){return this._webVRready?this._webVRCamera:this._scene.activeCamera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"webVRCamera",{get:function(){return this._webVRCamera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vrDeviceOrientationCamera",{get:function(){return this._vrDeviceOrientationCamera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"_teleportationRequestInitiated",{get:function(){return this._cameraGazer._teleportationRequestInitiated||null!==this._leftController&&this._leftController._teleportationRequestInitiated||null!==this._rightController&&this._rightController._teleportationRequestInitiated},enumerable:!0,configurable:!0}),e.prototype._onDefaultMeshLoaded=function(e){this._leftController&&this._leftController.webVRController==e&&e.mesh&&this._leftController._setLaserPointerParent(e.mesh),this._rightController&&this._rightController.webVRController==e&&e.mesh&&this._rightController._setLaserPointerParent(e.mesh);try{this.onControllerMeshLoadedObservable.notifyObservers(e)}catch(e){p.a.Warn("Error in your custom logic onControllerMeshLoaded: "+e)}},Object.defineProperty(e.prototype,"isInVRMode",{get:function(){return this._webVRpresenting||this._fullscreenVRpresenting},enumerable:!0,configurable:!0}),e.prototype.onVrDisplayPresentChange=function(){var e=this._scene.getEngine().getVRDevice();if(e){var t=this._webVRpresenting;this._webVRpresenting=e.isPresenting,t&&!this._webVRpresenting&&this.exitVR()}else p.a.Warn("Detected VRDisplayPresentChange on an unknown VRDisplay. Did you can enterVR on the vrExperienceHelper?");this.updateButtonVisibility()},e.prototype.onVRDisplayChanged=function(e){this._webVRsupported=e.vrSupported,this._webVRready=!!e.vrDisplay,this._webVRpresenting=e.vrDisplay&&e.vrDisplay.isPresenting,this.updateButtonVisibility()},e.prototype.moveButtonToBottomRight=function(){this._canvas&&!this._useCustomVRButton&&(this._btnVR.style.top=this._canvas.offsetTop+this._canvas.offsetHeight-70+"px",this._btnVR.style.left=this._canvas.offsetLeft+this._canvas.offsetWidth-100+"px")},e.prototype.displayVRButton=function(){this._useCustomVRButton||this._btnVRDisplayed||(document.body.appendChild(this._btnVR),this._btnVRDisplayed=!0)},e.prototype.updateButtonVisibility=function(){this._btnVR&&!this._useCustomVRButton&&(this._btnVR.className="babylonVRicon",this.isInVRMode?this._btnVR.className+=" vrdisplaypresenting":(this._webVRready&&(this._btnVR.className+=" vrdisplayready"),this._webVRsupported&&(this._btnVR.className+=" vrdisplaysupported"),this._webVRrequesting&&(this._btnVR.className+=" vrdisplayrequesting")))},e.prototype.enterVR=function(){var e=this;if(this.onEnteringVRObservable)try{this.onEnteringVRObservable.notifyObservers(this)}catch(e){p.a.Warn("Error in your custom logic onEnteringVR: "+e)}if(this._scene.activeCamera){if(this._position=this._scene.activeCamera.position.clone(),this.vrDeviceOrientationCamera&&(this.vrDeviceOrientationCamera.rotation=o.q.FromRotationMatrix(this._scene.activeCamera.getWorldMatrix().getRotationMatrix()).toEulerAngles(),this.vrDeviceOrientationCamera.angularSensibility=2e3),this.webVRCamera){var t=this.webVRCamera.deviceRotationQuaternion.toEulerAngles().y,n=o.q.FromRotationMatrix(this._scene.activeCamera.getWorldMatrix().getRotationMatrix()).toEulerAngles().y-t,r=this.webVRCamera.rotationQuaternion.toEulerAngles().y;this.webVRCamera.rotationQuaternion=o.q.FromEulerAngles(0,r+n,0)}this._existingCamera=this._scene.activeCamera,this._existingCamera.angularSensibilityX&&(this._cachedAngularSensibility.angularSensibilityX=this._existingCamera.angularSensibilityX,this._existingCamera.angularSensibilityX=Number.MAX_VALUE),this._existingCamera.angularSensibilityY&&(this._cachedAngularSensibility.angularSensibilityY=this._existingCamera.angularSensibilityY,this._existingCamera.angularSensibilityY=Number.MAX_VALUE),this._existingCamera.angularSensibility&&(this._cachedAngularSensibility.angularSensibility=this._existingCamera.angularSensibility,this._existingCamera.angularSensibility=Number.MAX_VALUE)}this._webVRrequesting||(this._webVRready?this._webVRpresenting||(this._scene.getEngine().onVRRequestPresentComplete.addOnce(function(t){e.onAfterEnteringVRObservable.notifyObservers({success:t})}),this._webVRCamera.position=this._position,this._scene.activeCamera=this._webVRCamera):this._vrDeviceOrientationCamera&&(this._vrDeviceOrientationCamera.position=this._position,this._scene.activeCamera&&(this._vrDeviceOrientationCamera.minZ=this._scene.activeCamera.minZ),this._scene.activeCamera=this._vrDeviceOrientationCamera,this._scene.getEngine().enterFullscreen(this.requestPointerLockOnFullScreen),this.updateButtonVisibility(),this._vrDeviceOrientationCamera.onViewMatrixChangedObservable.addOnce(function(){e.onAfterEnteringVRObservable.notifyObservers({success:!0})})),this._scene.activeCamera&&this._canvas&&this._scene.activeCamera.attachControl(this._canvas),this._interactionsEnabled&&this._scene.registerBeforeRender(this.beforeRender),this._displayLaserPointer&&[this._leftController,this._rightController].forEach(function(e){e&&e._activatePointer()}),this._hasEnteredVR=!0)},e.prototype.exitVR=function(){if(this._hasEnteredVR){if(this.onExitingVRObservable)try{this.onExitingVRObservable.notifyObservers(this)}catch(e){p.a.Warn("Error in your custom logic onExitingVR: "+e)}this._webVRpresenting&&this._scene.getEngine().disableVR(),this._scene.activeCamera&&(this._position=this._scene.activeCamera.position.clone()),this.vrDeviceOrientationCamera&&(this.vrDeviceOrientationCamera.angularSensibility=Number.MAX_VALUE),this._deviceOrientationCamera?(this._deviceOrientationCamera.position=this._position,this._scene.activeCamera=this._deviceOrientationCamera,this._canvas&&this._scene.activeCamera.attachControl(this._canvas),this._cachedAngularSensibility.angularSensibilityX&&(this._deviceOrientationCamera.angularSensibilityX=this._cachedAngularSensibility.angularSensibilityX,this._cachedAngularSensibility.angularSensibilityX=null),this._cachedAngularSensibility.angularSensibilityY&&(this._deviceOrientationCamera.angularSensibilityY=this._cachedAngularSensibility.angularSensibilityY,this._cachedAngularSensibility.angularSensibilityY=null),this._cachedAngularSensibility.angularSensibility&&(this._deviceOrientationCamera.angularSensibility=this._cachedAngularSensibility.angularSensibility,this._cachedAngularSensibility.angularSensibility=null)):this._existingCamera&&(this._existingCamera.position=this._position,this._scene.activeCamera=this._existingCamera,this._cachedAngularSensibility.angularSensibilityX&&(this._existingCamera.angularSensibilityX=this._cachedAngularSensibility.angularSensibilityX,this._cachedAngularSensibility.angularSensibilityX=null),this._cachedAngularSensibility.angularSensibilityY&&(this._existingCamera.angularSensibilityY=this._cachedAngularSensibility.angularSensibilityY,this._cachedAngularSensibility.angularSensibilityY=null),this._cachedAngularSensibility.angularSensibility&&(this._existingCamera.angularSensibility=this._cachedAngularSensibility.angularSensibility,this._cachedAngularSensibility.angularSensibility=null)),this.updateButtonVisibility(),this._interactionsEnabled&&(this._scene.unregisterBeforeRender(this.beforeRender),this._cameraGazer._gazeTracker.isVisible=!1,this._leftController&&(this._leftController._gazeTracker.isVisible=!1),this._rightController&&(this._rightController._gazeTracker.isVisible=!1)),this._scene.getEngine().resize(),[this._leftController,this._rightController].forEach(function(e){e&&e._deactivatePointer()}),this._hasEnteredVR=!1;var e=this._scene.getEngine();e._onVrDisplayPresentChange&&e._onVrDisplayPresentChange()}},Object.defineProperty(e.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e,this._scene.activeCamera&&(this._scene.activeCamera.position=e)},enumerable:!0,configurable:!0}),e.prototype.enableInteractions=function(){var e=this;this._interactionsEnabled||(this._interactionsRequested=!0,this._leftController&&this._enableInteractionOnController(this._leftController),this._rightController&&this._enableInteractionOnController(this._rightController),this.raySelectionPredicate=function(t){return t.isVisible&&(t.isPickable||t.name===e._floorMeshName)},this.meshSelectionPredicate=function(){return!0},this._raySelectionPredicate=function(t){return!!(e._isTeleportationFloor(t)||-1===t.name.indexOf("gazeTracker")&&-1===t.name.indexOf("teleportationTarget")&&-1===t.name.indexOf("torusTeleportation"))&&e.raySelectionPredicate(t)},this._interactionsEnabled=!0)},Object.defineProperty(e.prototype,"_noControllerIsActive",{get:function(){return!(this._leftController&&this._leftController._activePointer||this._rightController&&this._rightController._activePointer)},enumerable:!0,configurable:!0}),e.prototype._isTeleportationFloor=function(e){for(var t=0;t<this._floorMeshesCollection.length;t++)if(this._floorMeshesCollection[t].id===e.id)return!0;return!(!this._floorMeshName||e.name!==this._floorMeshName)},e.prototype.addFloorMesh=function(e){this._floorMeshesCollection&&(this._floorMeshesCollection.indexOf(e)>-1||this._floorMeshesCollection.push(e))},e.prototype.removeFloorMesh=function(e){if(this._floorMeshesCollection){var t=this._floorMeshesCollection.indexOf(e);-1!==t&&this._floorMeshesCollection.splice(t,1)}},e.prototype.enableTeleportation=function(e){if(void 0===e&&(e={}),!this._teleportationInitialized){this._teleportationRequested=!0,this.enableInteractions(),e.floorMeshName&&(this._floorMeshName=e.floorMeshName),e.floorMeshes&&(this._floorMeshesCollection=e.floorMeshes),null!=this._leftController&&this._enableTeleportationOnController(this._leftController),null!=this._rightController&&this._enableTeleportationOnController(this._rightController);var t=new vn.a;t.vignetteColor=new o.f(0,0,0,0),t.vignetteEnabled=!0,this._postProcessMove=new En("postProcessMove",1,this._webVRCamera,void 0,void 0,void 0,void 0,t),this._webVRCamera.detachPostProcess(this._postProcessMove),this._teleportationInitialized=!0,this._isDefaultTeleportationTarget&&(this._createTeleportationCircles(),this._teleportationTarget.scaling.scaleInPlace(this._webVRCamera.deviceScaleFactor))}},e.prototype._enableInteractionOnController=function(e){var t=this;e.webVRController.mesh&&(e._interactionsEnabled=!0,this.isInVRMode&&this._displayLaserPointer&&e._activatePointer(),this.webVROptions.laserToggle&&e.webVRController.onMainButtonStateChangedObservable.add(function(n){t._displayLaserPointer&&1===n.value&&(e._activePointer?e._deactivatePointer():e._activatePointer(),t.displayGaze&&(e._gazeTracker.isVisible=e._activePointer))}),e.webVRController.onTriggerStateChangedObservable.add(function(n){var r=e;t._noControllerIsActive&&(r=t._cameraGazer),r._pointerDownOnMeshAsked?n.value<t._padSensibilityDown&&r._selectionPointerUp():n.value>t._padSensibilityUp&&r._selectionPointerDown()}))},e.prototype._checkTeleportWithRay=function(e,t){this._teleportationRequestInitiated&&!t._teleportationRequestInitiated||(t._teleportationRequestInitiated?Math.sqrt(e.y*e.y+e.x*e.x)<this._padSensibilityDown&&(this._teleportActive&&this.teleportCamera(this._haloCenter),t._teleportationRequestInitiated=!1):e.y<-this._padSensibilityUp&&t._dpadPressed&&(t._activatePointer(),t._teleportationRequestInitiated=!0))},e.prototype._checkRotate=function(e,t){t._teleportationRequestInitiated||(t._rotationLeftAsked?e.x>-this._padSensibilityDown&&(t._rotationLeftAsked=!1):e.x<-this._padSensibilityUp&&t._dpadPressed&&(t._rotationLeftAsked=!0,this._rotationAllowed&&this._rotateCamera(!1)),t._rotationRightAsked?e.x<this._padSensibilityDown&&(t._rotationRightAsked=!1):e.x>this._padSensibilityUp&&t._dpadPressed&&(t._rotationRightAsked=!0,this._rotationAllowed&&this._rotateCamera(!0)))},e.prototype._checkTeleportBackwards=function(e,t){if(!t._teleportationRequestInitiated)if(e.y>this._padSensibilityUp&&t._dpadPressed){if(!t._teleportationBackRequestInitiated){if(!this.currentVRCamera)return;var n=o.q.FromRotationMatrix(this.currentVRCamera.getWorldMatrix().getRotationMatrix()),r=this.currentVRCamera.position;this.currentVRCamera.devicePosition&&this.currentVRCamera.deviceRotationQuaternion&&(n=this.currentVRCamera.deviceRotationQuaternion,r=this.currentVRCamera.devicePosition),n.toEulerAnglesToRef(this._workingVector),this._workingVector.z=0,this._workingVector.x=0,o.q.RotationYawPitchRollToRef(this._workingVector.y,this._workingVector.x,this._workingVector.z,this._workingQuaternion),this._workingQuaternion.toRotationMatrix(this._workingMatrix),o.x.TransformCoordinatesToRef(this._teleportBackwardsVector,this._workingMatrix,this._workingVector);var i=new Ot.a(r,this._workingVector),a=this._scene.pickWithRay(i,this._raySelectionPredicate);a&&a.pickedPoint&&a.pickedMesh&&this._isTeleportationFloor(a.pickedMesh)&&a.distance<5&&this.teleportCamera(a.pickedPoint),t._teleportationBackRequestInitiated=!0}}else t._teleportationBackRequestInitiated=!1},e.prototype._enableTeleportationOnController=function(e){var t=this;e.webVRController.mesh&&(e._interactionsEnabled||this._enableInteractionOnController(e),e._interactionsEnabled=!0,e._teleportationEnabled=!0,e.webVRController.controllerType===Ct.VIVE&&(e._dpadPressed=!1,e.webVRController.onPadStateChangedObservable.add(function(t){e._dpadPressed=t.pressed,e._dpadPressed||(e._rotationLeftAsked=!1,e._rotationRightAsked=!1,e._teleportationBackRequestInitiated=!1)})),e.webVRController.onPadValuesChangedObservable.add(function(n){t.teleportationEnabled&&(t._checkTeleportBackwards(n,e),t._checkTeleportWithRay(n,e)),t._checkRotate(n,e)}))},e.prototype._createTeleportationCircles=function(){this._teleportationTarget=fe.a.CreateGround("teleportationTarget",2,2,2,this._scene),this._teleportationTarget.isPickable=!1;var e=new bn("DynamicTexture",512,this._scene,!0);e.hasAlpha=!0;var t=e.getContext();t.beginPath(),t.arc(256,256,200,0,2*Math.PI,!1),t.fillStyle=this._teleportationFillColor,t.fill(),t.lineWidth=10,t.strokeStyle=this._teleportationBorderColor,t.stroke(),t.closePath(),e.update();var n=new yn.a("TextPlaneMaterial",this._scene);n.diffuseTexture=e,this._teleportationTarget.material=n;var r=fe.a.CreateTorus("torusTeleportation",.75,.1,25,this._scene,!1);r.isPickable=!1,r.parent=this._teleportationTarget;var i=new B("animationInnerCircle","position.y",30,B.ANIMATIONTYPE_FLOAT,B.ANIMATIONLOOPMODE_CYCLE),o=[];o.push({frame:0,value:0}),o.push({frame:30,value:.4}),o.push({frame:60,value:0}),i.setKeys(o);var a=new ce;a.setEasingMode($.EASINGMODE_EASEINOUT),i.setEasingFunction(a),r.animations=[],r.animations.push(i),this._scene.beginAnimation(r,0,60,!0),this._hideTeleportationTarget()},e.prototype._displayTeleportationTarget=function(){this._teleportActive=!0,this._teleportationInitialized&&(this._teleportationTarget.isVisible=!0,this._isDefaultTeleportationTarget&&(this._teleportationTarget.getChildren()[0].isVisible=!0))},e.prototype._hideTeleportationTarget=function(){this._teleportActive=!1,this._teleportationInitialized&&(this._teleportationTarget.isVisible=!1,this._isDefaultTeleportationTarget&&(this._teleportationTarget.getChildren()[0].isVisible=!1))},e.prototype._rotateCamera=function(e){var t=this;if(this.currentVRCamera instanceof bt){e?this._rotationAngle++:this._rotationAngle--,this.currentVRCamera.animations=[];var n=o.q.FromRotationMatrix(o.j.RotationY(Math.PI/4*this._rotationAngle)),r=new B("animationRotation","rotationQuaternion",90,B.ANIMATIONTYPE_QUATERNION,B.ANIMATIONLOOPMODE_CONSTANT),i=[];i.push({frame:0,value:this.currentVRCamera.rotationQuaternion}),i.push({frame:6,value:n}),r.setKeys(i),r.setEasingFunction(this._circleEase),this.currentVRCamera.animations.push(r),this._postProcessMove.animations=[];var a=new B("animationPP","vignetteWeight",90,B.ANIMATIONTYPE_FLOAT,B.ANIMATIONLOOPMODE_CONSTANT),s=[];s.push({frame:0,value:0}),s.push({frame:3,value:4}),s.push({frame:6,value:0}),a.setKeys(s),a.setEasingFunction(this._circleEase),this._postProcessMove.animations.push(a);var u=new B("animationPP2","vignetteStretch",90,B.ANIMATIONTYPE_FLOAT,B.ANIMATIONLOOPMODE_CONSTANT),l=[];l.push({frame:0,value:0}),l.push({frame:3,value:10}),l.push({frame:6,value:0}),u.setKeys(l),u.setEasingFunction(this._circleEase),this._postProcessMove.animations.push(u),this._postProcessMove.imageProcessingConfiguration.vignetteWeight=0,this._postProcessMove.imageProcessingConfiguration.vignetteStretch=0,this._postProcessMove.samples=4,this._webVRCamera.attachPostProcess(this._postProcessMove),this._scene.beginAnimation(this._postProcessMove,0,6,!1,1,function(){t._webVRCamera.detachPostProcess(t._postProcessMove)}),this._scene.beginAnimation(this.currentVRCamera,0,6,!1,1)}},e.prototype._moveTeleportationSelectorTo=function(e,t,n){if(e.pickedPoint){t._teleportationRequestInitiated&&(this._displayTeleportationTarget(),this._haloCenter.copyFrom(e.pickedPoint),this._teleportationTarget.position.copyFrom(e.pickedPoint));var r=this._convertNormalToDirectionOfRay(e.getNormal(!0,!1),n);if(r){var i=o.x.Cross(o.c.Y,r),a=o.x.Cross(r,i);o.x.RotationFromAxisToRef(a,r,i,this._teleportationTarget.rotation)}this._teleportationTarget.position.y+=.1}},e.prototype.teleportCamera=function(e){var t=this;if(this.currentVRCamera instanceof bt){this.webVRCamera.leftCamera?(this._workingVector.copyFrom(this.webVRCamera.leftCamera.globalPosition),this._workingVector.subtractInPlace(this.webVRCamera.position),e.subtractToRef(this._workingVector,this._workingVector)):this._workingVector.copyFrom(e),this._workingVector.y+=this.isInVRMode?this.webVRCamera.deviceDistanceToRoomGround()*this._webVRCamera.deviceScaleFactor:this._defaultHeight,this.onBeforeCameraTeleport.notifyObservers(this._workingVector),this.currentVRCamera.animations=[];var n=new B("animationCameraTeleportation","position",90,B.ANIMATIONTYPE_VECTOR3,B.ANIMATIONLOOPMODE_CONSTANT);n.setKeys([{frame:0,value:this.currentVRCamera.position},{frame:11,value:this._workingVector}]),n.setEasingFunction(this._circleEase),this.currentVRCamera.animations.push(n),this._postProcessMove.animations=[];var r=new B("animationPP","vignetteWeight",90,B.ANIMATIONTYPE_FLOAT,B.ANIMATIONLOOPMODE_CONSTANT),i=[];i.push({frame:0,value:0}),i.push({frame:5,value:8}),i.push({frame:11,value:0}),r.setKeys(i),this._postProcessMove.animations.push(r);var o=new B("animationPP2","vignetteStretch",90,B.ANIMATIONTYPE_FLOAT,B.ANIMATIONLOOPMODE_CONSTANT),a=[];a.push({frame:0,value:0}),a.push({frame:5,value:10}),a.push({frame:11,value:0}),o.setKeys(a),this._postProcessMove.animations.push(o),this._postProcessMove.imageProcessingConfiguration.vignetteWeight=0,this._postProcessMove.imageProcessingConfiguration.vignetteStretch=0,this._webVRCamera.attachPostProcess(this._postProcessMove),this._scene.beginAnimation(this._postProcessMove,0,11,!1,1,function(){t._webVRCamera.detachPostProcess(t._postProcessMove)}),this._scene.beginAnimation(this.currentVRCamera,0,11,!1,1,function(){t.onAfterCameraTeleport.notifyObservers(t._workingVector)}),this._hideTeleportationTarget()}},e.prototype._convertNormalToDirectionOfRay=function(e,t){return e&&Math.acos(o.x.Dot(e,t.direction))<Math.PI/2&&e.scaleInPlace(-1),e},e.prototype._castRayAndSelectObject=function(e){if(this.currentVRCamera instanceof bt){var t=e._getForwardRay(this._rayLength),n=this._scene.pickWithRay(t,this._raySelectionPredicate);if(n&&(e._laserPointer&&(n.originMesh=e._laserPointer.parent),this._scene.simulatePointerMove(n,{pointerId:e._id})),e._currentHit=n,n&&n.pickedPoint){if(this._displayGaze){var r=1;e._gazeTracker.isVisible=!0,e._isActionableMesh&&(r=3),this.updateGazeTrackerScale&&(e._gazeTracker.scaling.x=n.distance*r,e._gazeTracker.scaling.y=n.distance*r,e._gazeTracker.scaling.z=n.distance*r);var i=this._convertNormalToDirectionOfRay(n.getNormal(),t);if(i){var a=o.x.Cross(o.c.Y,i),s=o.x.Cross(i,a);o.x.RotationFromAxisToRef(s,i,a,e._gazeTracker.rotation)}e._gazeTracker.position.copyFrom(n.pickedPoint),e._gazeTracker.position.x<0?e._gazeTracker.position.x+=.002:e._gazeTracker.position.x-=.002,e._gazeTracker.position.y<0?e._gazeTracker.position.y+=.002:e._gazeTracker.position.y-=.002,e._gazeTracker.position.z<0?e._gazeTracker.position.z+=.002:e._gazeTracker.position.z-=.002}e._updatePointerDistance(n.distance)}else e._updatePointerDistance(),e._gazeTracker.isVisible=!1;if(n&&n.pickedMesh){if(this._teleportationInitialized&&this._isTeleportationFloor(n.pickedMesh)&&n.pickedPoint)return e._currentMeshSelected&&!this._isTeleportationFloor(e._currentMeshSelected)&&this._notifySelectedMeshUnselected(e._currentMeshSelected),e._currentMeshSelected=null,void(e._teleportationRequestInitiated&&this._moveTeleportationSelectorTo(n,e,t));if(n.pickedMesh!==e._currentMeshSelected)if(this.meshSelectionPredicate(n.pickedMesh)){this.onNewMeshPicked.notifyObservers(n),e._currentMeshSelected=n.pickedMesh,n.pickedMesh.isPickable&&n.pickedMesh.actionManager?(this.changeGazeColor(new o.e(0,0,1)),this.changeLaserColor(new o.e(.2,.2,1)),e._isActionableMesh=!0):(this.changeGazeColor(new o.e(.7,.7,.7)),this.changeLaserColor(new o.e(.7,.7,.7)),e._isActionableMesh=!1);try{this.onNewMeshSelected.notifyObservers(n.pickedMesh)}catch(e){p.a.Warn("Error in your custom logic onNewMeshSelected: "+e)}}else this._notifySelectedMeshUnselected(e._currentMeshSelected),e._currentMeshSelected=null,this.changeGazeColor(new o.e(.7,.7,.7)),this.changeLaserColor(new o.e(.7,.7,.7))}else this._notifySelectedMeshUnselected(e._currentMeshSelected),e._currentMeshSelected=null,this.changeGazeColor(new o.e(.7,.7,.7)),this.changeLaserColor(new o.e(.7,.7,.7))}},e.prototype._notifySelectedMeshUnselected=function(e){e&&this.onSelectedMeshUnselected.notifyObservers(e)},e.prototype.changeLaserColor=function(e){this._leftController&&this._leftController._setLaserPointerColor(e),this._rightController&&this._rightController._setLaserPointerColor(e)},e.prototype.changeGazeColor=function(e){this.updateGazeTrackerColor&&this._cameraGazer._gazeTracker.material&&(this._cameraGazer._gazeTracker.material.emissiveColor=e,this._leftController&&(this._leftController._gazeTracker.material.emissiveColor=e),this._rightController&&(this._rightController._gazeTracker.material.emissiveColor=e))},e.prototype.dispose=function(){this.isInVRMode&&this.exitVR(),this._postProcessMove&&this._postProcessMove.dispose(),this._webVRCamera&&this._webVRCamera.dispose(),this._vrDeviceOrientationCamera&&this._vrDeviceOrientationCamera.dispose(),!this._useCustomVRButton&&this._btnVR.parentNode&&document.body.removeChild(this._btnVR),this._deviceOrientationCamera&&this._scene.activeCamera!=this._deviceOrientationCamera&&this._deviceOrientationCamera.dispose(),this._cameraGazer&&this._cameraGazer.dispose(),this._leftController&&this._leftController.dispose(),this._rightController&&this._rightController.dispose(),this._teleportationTarget&&this._teleportationTarget.dispose(),this._floorMeshesCollection=[],document.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("vrdisplaypresentchange",this._onVrDisplayPresentChange),window.removeEventListener("resize",this._onResize),document.removeEventListener("fullscreenchange",this._onFullscreenChange),document.removeEventListener("mozfullscreenchange",this._onFullscreenChange),document.removeEventListener("webkitfullscreenchange",this._onFullscreenChange),document.removeEventListener("msfullscreenchange",this._onFullscreenChange),document.onmsfullscreenchange=null,this._scene.getEngine().onVRDisplayChangedObservable.removeCallback(this._onVRDisplayChanged),this._scene.getEngine().onVRRequestPresentStart.removeCallback(this._onVRRequestPresentStart),this._scene.getEngine().onVRRequestPresentComplete.removeCallback(this._onVRRequestPresentComplete),window.removeEventListener("vrdisplaypresentchange",this._onVrDisplayPresentChange),this._scene.gamepadManager.onGamepadConnectedObservable.removeCallback(this._onNewGamepadConnected),this._scene.gamepadManager.onGamepadDisconnectedObservable.removeCallback(this._onNewGamepadDisconnected),this._scene.unregisterBeforeRender(this.beforeRender)},e.prototype.getClassName=function(){return"VRExperienceHelper"},e}(),Fn=function(e){function t(t,n){var r=e.call(this,t,o.x.Zero(),n)||this;return r.minZ=0,r.rotationQuaternion=new o.q,r.cameraRigMode=Ne.a.RIG_MODE_CUSTOM,r.updateUpVectorFromRotation=!0,r._updateNumberOfRigCameras(1),r}return l.d(t,e),t.prototype._updateNumberOfRigCameras=function(e){for(void 0===e&&(e=1);this.rigCameras.length<e;){var t=new yt("view: "+this.rigCameras.length,o.x.Zero(),this.getScene());t.minZ=0,t.parent=this,t.rotationQuaternion=new o.q,t.updateUpVectorFromRotation=!0,this.rigCameras.push(t)}for(;this.rigCameras.length>e;){var n=this.rigCameras.pop();n&&n.dispose()}},t.prototype._updateForDualEyeDebugging=function(e){void 0===e&&(e=.01),this._updateNumberOfRigCameras(2),this.rigCameras[0].viewport=new o.z(0,0,.5,1),this.rigCameras[0].position.x=-e/2,this.rigCameras[0].outputRenderTarget=null,this.rigCameras[1].viewport=new o.z(.5,0,.5,1),this.rigCameras[1].position.x=e/2,this.rigCameras[1].outputRenderTarget=null},t.prototype.updateFromXRSessionManager=function(e){var n=this;if(!e._currentXRFrame||!e._currentXRFrame.getDevicePose)return!1;var r=e._currentXRFrame.getDevicePose(e._frameOfReference);return!(!r||!r.poseModelMatrix||(o.j.FromFloat32ArrayToRefScaled(r.poseModelMatrix,0,1,t._TmpMatrix),this._scene.useRightHandedSystem||t._TmpMatrix.toggleModelMatrixHandInPlace(),t._TmpMatrix.getTranslationToRef(this.position),t._TmpMatrix.getRotationMatrixToRef(t._TmpMatrix),o.q.FromRotationMatrixToRef(t._TmpMatrix,this.rotationQuaternion),this.computeWorldMatrix(),this._updateNumberOfRigCameras(e._currentXRFrame.views.length),e._currentXRFrame.views.forEach(function(t,i){o.j.FromFloat32ArrayToRefScaled(r.getViewMatrix(t),0,1,n.rigCameras[i]._computedViewMatrix),o.j.FromFloat32ArrayToRefScaled(t.projectionMatrix,0,1,n.rigCameras[i]._projectionMatrix),n._scene.useRightHandedSystem||(n.rigCameras[i]._computedViewMatrix.toggleModelMatrixHandInPlace(),n.rigCameras[i]._projectionMatrix.toggleProjectionMatrixHandInPlace());var a=e._xrSession.baseLayer.getViewport(t),s=e._xrSession.baseLayer.framebufferWidth,u=e._xrSession.baseLayer.framebufferHeight;n.rigCameras[i].viewport.width=a.width/s,n.rigCameras[i].viewport.height=a.height/u,n.rigCameras[i].viewport.x=a.x/s,n.rigCameras[i].viewport.y=a.y/u,n.rigCameras[i].outputRenderTarget=e._sessionRenderTargetTexture}),0))},t._TmpMatrix=new o.j,t}(bt),Nn=function(){function e(e){this.scene=e,this.onXRFrameObservable=new i.c,this.onXRSessionEnded=new i.c,this._sessionRenderTargetTexture=null,this._tmpMatrix=new o.j}return e.prototype.initializeAsync=function(){var e=this;return p.a.Warn("The WebXR APIs are still under development and are subject to change in the future."),this._xrNavigator=navigator,this._xrNavigator.xr?this._xrNavigator.xr.requestDevice().then(function(t){return e._xrDevice=t,e.scene.getEngine()._gl.setCompatibleXRDevice(e._xrDevice)}):Promise.reject("webXR not supported by this browser")},e.prototype.enterXRAsync=function(t,n){var r=this;return this._xrDevice.requestSession(t).then(function(e){return r._xrSession=e,r._xrSession.addEventListener("end",function(){r._sessionRenderTargetTexture=null,r.scene.getEngine().restoreDefaultFramebuffer(),r.scene.getEngine().customAnimationFrameRequester=null,r.onXRSessionEnded.notifyObservers(null),r.scene.getEngine()._renderLoop()},{once:!0}),r._xrSession.baseLayer=new XRWebGLLayer(r._xrSession,r.scene.getEngine()._gl),r._xrSession.requestFrameOfReference(n)}).then(function(t){r._frameOfReference=t,r.scene.getEngine().customAnimationFrameRequester={requestAnimationFrame:r._xrSession.requestAnimationFrame.bind(r._xrSession),renderFunction:function(e,t){r._currentXRFrame=t,r.onXRFrameObservable.notifyObservers(null),r.scene.getEngine()._renderLoop()}},r._sessionRenderTargetTexture=e._CreateRenderTargetTextureFromSession(r._xrSession,r.scene),window.cancelAnimationFrame(r.scene.getEngine()._frameHandler),r.scene.getEngine()._renderLoop()})},e.prototype.exitXRAsync=function(){return this._xrSession.end()},e.prototype.environmentPointHitTestAsync=function(e){var t=this;return new Promise(function(n){var r=new Float32Array([e.origin.x,e.origin.y,e.origin.z]),i=new Float32Array([e.direction.x,e.direction.y,e.direction.z]);t.scene.useRightHandedSystem||(r[2]*=-1,i[2]*=-1),t._xrSession.requestHitTest(r,i,t._frameOfReference).then(function(e){if(e.length>0){o.j.FromFloat32ArrayToRefScaled(e[0].hitMatrix,0,1,t._tmpMatrix);var r=t._tmpMatrix.getTranslation();t.scene.useRightHandedSystem||(r.z*=-1),n(r)}else n(null)}).catch(function(){n(null)})})},e.prototype.supportsSessionAsync=function(e){return this._xrDevice.supportsSession(e).then(function(){return!0}).catch(function(){return!1})},e._CreateRenderTargetTextureFromSession=function(e,t){var n=new je.a(t.getEngine(),je.a.DATASOURCE_UNKNOWN,!0);n.width=e.baseLayer.framebufferWidth,n.height=e.baseLayer.framebufferHeight,n._framebuffer=e.baseLayer.framebuffer;var r=new ln("XR renderTargetTexture",{width:n.width,height:n.height},t,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,!0);return r._texture=n,r},e.prototype.dispose=function(){this.onXRFrameObservable.clear(),this.onXRSessionEnded.clear()},e}();!function(e){e[e.ENTERING_XR=0]="ENTERING_XR",e[e.EXITING_XR=1]="EXITING_XR",e[e.IN_XR=2]="IN_XR",e[e.NOT_IN_XR=3]="NOT_IN_XR"}(Cn||(Cn={}));var Bn,kn=function(){function e(e){this.scene=e,this.state=Cn.NOT_IN_XR,this.onStateChangedObservable=new i.c,this._nonVRCamera=null,this._originalSceneAutoClear=!0,this._supported=!1,this.camera=new Fn("",e),this._sessionManager=new Nn(e),this.container=new Fe.a("",e),this.camera.parent=this.container}return e.prototype._setState=function(e){this.state=e,this.onStateChangedObservable.notifyObservers(this.state)},e.CreateAsync=function(t){var n=new e(t);return n._sessionManager.initializeAsync().then(function(){return n._supported=!0,n}).catch(function(){return n})},e.prototype.exitXRAsync=function(){return this._setState(Cn.EXITING_XR),this._sessionManager.exitXRAsync()},e.prototype.enterXRAsync=function(e,t){var n=this;if(!this._supported)throw"XR session not supported by this browser";return this._setState(Cn.ENTERING_XR),this._sessionManager.enterXRAsync(e,t).then(function(){n._originalSceneAutoClear=n.scene.autoClear,n._nonVRCamera=n.scene.activeCamera,n.scene.autoClear=!1,n.scene.activeCamera=n.camera,n._sessionManager.onXRFrameObservable.add(function(){n.camera.updateFromXRSessionManager(n._sessionManager)}),n._sessionManager.onXRSessionEnded.addOnce(function(){n.camera.rigCameras.forEach(function(e){e.outputRenderTarget=null}),n.scene.autoClear=n._originalSceneAutoClear,n.scene.activeCamera=n._nonVRCamera,n._sessionManager.onXRFrameObservable.clear(),n._setState(Cn.NOT_IN_XR)}),n._setState(Cn.IN_XR)})},e.prototype.environmentPointHitTestAsync=function(e){return this._sessionManager.environmentPointHitTestAsync(e)},e.prototype.setPositionOfCameraUsingContainer=function(t){this.camera.globalPosition.subtractToRef(t,e._TmpVector),this.container.position.subtractInPlace(e._TmpVector)},e.prototype.rotateCameraByQuaternionUsingContainer=function(e){this.container.rotationQuaternion||(this.container.rotationQuaternion=o.q.FromEulerVector(this.container.rotation)),this.container.rotationQuaternion.multiplyInPlace(e),this.container.position.rotateByQuaternionAroundPointToRef(e,this.camera.globalPosition,this.container.position)},e.prototype.supportsSessionAsync=function(e){return this._supported?this._sessionManager.supportsSessionAsync(e):Promise.resolve(!1)},e.prototype.dispose=function(){this.camera.dispose(),this.container.dispose(),this.onStateChangedObservable.clear(),this._sessionManager.dispose()},e._TmpVector=new o.x,e}(),Un=function(){function e(e,t){this.element=e,this.initializationOptions=t}return e.prototype.update=function(e){},e}(),Vn=function(){},Gn=function(){function e(e,t){var n=this;if(this.scene=e,this._buttons=[],this._activeButton=null,this.activeButtonChangedObservable=new i.c,this._overlay=document.createElement("div"),this._overlay.style.cssText="z-index:11;position: absolute; right: 20px;bottom: 50px;",t.customButtons)this._buttons=t.customButtons;else{var r=document.createElement("button");r.style.cssText="color: #868686; border-color: #868686; border-style: solid; margin-left: 10px; height: 50px; width: 80px; background-color: rgba(51,51,51,0.7); background-repeat:no-repeat; background-position: center; outline: none;",r.innerText="HMD",this._buttons.push(new Un(r,{immersive:!0,outputContext:t.outputCanvasContext})),this._buttons[this._buttons.length-1].update=function(e){this.element.style.display=null===e||e===this?"":"none",this.element.innerText=e===this?"EXIT":"HMD"};var o=document.createElement("button");o.style.cssText=r.style.cssText,o.innerText="Window",this._buttons.push(new Un(o,{immersive:!1,environmentIntegration:!0,outputContext:t.outputCanvasContext})),this._buttons[this._buttons.length-1].update=function(e){this.element.style.display=null===e||e===this?"":"none",this.element.innerText=e===this?"EXIT":"Window"},this._updateButtons(null)}var a=e.getEngine().getRenderingCanvas();a&&a.parentNode&&(a.parentNode.appendChild(this._overlay),e.onDisposeObservable.addOnce(function(){n.dispose()}))}return e.CreateAsync=function(t,n,r){var i=this,o=new e(t,r),a=o._buttons.map(function(e){return n.supportsSessionAsync(e.initializationOptions)});return n.onStateChangedObservable.add(function(e){e==Cn.NOT_IN_XR&&o._updateButtons(null)}),Promise.all(a).then(function(e){return e.forEach(function(e,t){e&&(o._overlay.appendChild(o._buttons[t].element),o._buttons[t].element.onclick=function(){return l.b(i,void 0,void 0,function(){return l.e(this,function(e){switch(e.label){case 0:return n.state!=Cn.IN_XR?[3,2]:(o._updateButtons(null),[4,n.exitXRAsync()]);case 1:return e.sent(),[2];case 2:return n.state!=Cn.NOT_IN_XR?[3,4]:(o._updateButtons(o._buttons[t]),[4,n.enterXRAsync(o._buttons[t].initializationOptions,"eye-level")]);case 3:e.sent(),e.label=4;case 4:return[2]}})})})}),o})},e.prototype._updateButtons=function(e){var t=this;this._activeButton=e,this._buttons.forEach(function(e){e.update(t._activeButton)}),this.activeButtonChangedObservable.notifyObservers(this._activeButton)},e.prototype.dispose=function(){var e=this.scene.getEngine().getRenderingCanvas();e&&e.parentNode&&e.parentNode.contains(this._overlay)&&e.parentNode.removeChild(this._overlay),this.activeButtonChangedObservable.clear()},e}(),jn=function(){function e(e){this.pointer=new Fe.a("controllerPointer",e)}return e.prototype.dispose=function(){this.grip&&this.grip.dispose(),this.pointer.dispose()},e}(),zn=function(){function e(e){var t=this;this.helper=e,this.controllers=[],this._tmpMatrix=new o.j,this._frameObserver=e._sessionManager.onXRFrameObservable.add(function(){if(e._sessionManager._currentXRFrame&&e._sessionManager._currentXRFrame.getDevicePose){var n=e._sessionManager._currentXRFrame;e._sessionManager._xrSession.getInputSources().forEach(function(r,i){var a=n.getInputPose(r,e._sessionManager._frameOfReference);if(a){t.controllers.length<=i&&t.controllers.push(new jn(e.container.getScene()));var s=t.controllers[i];a.gripMatrix&&(s.grip||(s.grip=new Fe.a("controllerGrip",e.container.getScene())),o.j.FromFloat32ArrayToRefScaled(a.gripMatrix,0,1,t._tmpMatrix),s.grip.getScene().useRightHandedSystem||t._tmpMatrix.toggleModelMatrixHandInPlace(),s.grip.rotationQuaternion||(s.grip.rotationQuaternion=new o.q),t._tmpMatrix.decompose(s.grip.scaling,s.grip.rotationQuaternion,s.grip.position)),o.j.FromFloat32ArrayToRefScaled(a.targetRay.transformMatrix,0,1,t._tmpMatrix),s.pointer.getScene().useRightHandedSystem||t._tmpMatrix.toggleModelMatrixHandInPlace(),s.pointer.rotationQuaternion||(s.pointer.rotationQuaternion=new o.q),t._tmpMatrix.decompose(s.pointer.scaling,s.pointer.rotationQuaternion,s.pointer.position)}})}})}return e.prototype.dispose=function(){this.controllers.forEach(function(e){e.dispose()}),this.helper._sessionManager.onXRFrameObservable.remove(this._frameObserver)},e}(),Yn=function(){function e(e,t){var n=this;this._canvas=null,this.canvasContext=null,t||((t=document.createElement("canvas")).style.cssText="position:absolute; bottom:0px;right:0px;z-index:10;width:100%;height:100%;background-color: #000000;"),this._setManagedOutputCanvas(t),e.onStateChangedObservable.add(function(t){t==Cn.ENTERING_XR?n._addCanvas():e.state==Cn.NOT_IN_XR&&n._removeCanvas()})}return e.prototype.dispose=function(){this._removeCanvas(),this._setManagedOutputCanvas(null)},e.prototype._setManagedOutputCanvas=function(e){this._removeCanvas(),e?(this._canvas=e,this.canvasContext=this._canvas.getContext("xrpresent")):(this._canvas=null,this.canvasContext=null)},e.prototype._addCanvas=function(){this._canvas&&document.body.appendChild(this._canvas)},e.prototype._removeCanvas=function(){this._canvas&&document.body.contains(this._canvas)&&document.body.removeChild(this._canvas)},e}(),Hn=(Bn={root:0,found:!1},function(e,t,n,r){Bn.root=0,Bn.found=!1;var i=t*t-4*e*n;if(i<0)return Bn;var o=Math.sqrt(i),a=(-t-o)/(2*e),s=(-t+o)/(2*e);if(a>s){var u=s;s=a,a=u}return a>0&&a<r?(Bn.root=a,Bn.found=!0,Bn):s>0&&s<r?(Bn.root=s,Bn.found=!0,Bn):Bn}),Wn=function(){function e(){this._collisionPoint=o.x.Zero(),this._planeIntersectionPoint=o.x.Zero(),this._tempVector=o.x.Zero(),this._tempVector2=o.x.Zero(),this._tempVector3=o.x.Zero(),this._tempVector4=o.x.Zero(),this._edge=o.x.Zero(),this._baseToVertex=o.x.Zero(),this._destinationPoint=o.x.Zero(),this._slidePlaneNormal=o.x.Zero(),this._displacementVector=o.x.Zero(),this._radius=o.x.One(),this._retry=0,this._basePointWorld=o.x.Zero(),this._velocityWorld=o.x.Zero(),this._normalizedVelocity=o.x.Zero(),this._collisionMask=-1}return Object.defineProperty(e.prototype,"collisionMask",{get:function(){return this._collisionMask},set:function(e){this._collisionMask=isNaN(e)?-1:e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"slidePlaneNormal",{get:function(){return this._slidePlaneNormal},enumerable:!0,configurable:!0}),e.prototype._initialize=function(e,t,n){this._velocity=t,o.x.NormalizeToRef(t,this._normalizedVelocity),this._basePoint=e,e.multiplyToRef(this._radius,this._basePointWorld),t.multiplyToRef(this._radius,this._velocityWorld),this._velocityWorldLength=this._velocityWorld.length(),this._epsilon=n,this.collisionFound=!1},e.prototype._checkPointInTriangle=function(e,t,n,r,i){t.subtractToRef(e,this._tempVector),n.subtractToRef(e,this._tempVector2),o.x.CrossToRef(this._tempVector,this._tempVector2,this._tempVector4);var a=o.x.Dot(this._tempVector4,i);return!(a<0)&&(r.subtractToRef(e,this._tempVector3),o.x.CrossToRef(this._tempVector2,this._tempVector3,this._tempVector4),!((a=o.x.Dot(this._tempVector4,i))<0)&&(o.x.CrossToRef(this._tempVector3,this._tempVector,this._tempVector4),(a=o.x.Dot(this._tempVector4,i))>=0))},e.prototype._canDoCollision=function(e,t,n,r){var i=o.x.Distance(this._basePointWorld,e),a=Math.max(this._radius.x,this._radius.y,this._radius.z);return!(i>this._velocityWorldLength+a+t||!function(e,t,n,r){return!(e.x>n.x+r||n.x-r>t.x||e.y>n.y+r||n.y-r>t.y||e.z>n.z+r||n.z-r>t.z)}(n,r,this._basePointWorld,this._velocityWorldLength+a))},e.prototype._testTriangle=function(e,t,n,r,i,a){var s,u=!1;t||(t=[]),t[e]||(t[e]=new o.n(0,0,0,0),t[e].copyFromPoints(n,r,i));var l=t[e];if(a||l.isFrontFacingTo(this._normalizedVelocity,0)){var c=l.signedDistanceTo(this._basePoint),h=o.x.Dot(l.normal,this._velocity);if(0==h){if(Math.abs(c)>=1)return;u=!0,s=0}else{var d=(1-c)/h;if((s=(-1-c)/h)>d){var f=d;d=s,s=f}if(s>1||d<0)return;s<0&&(s=0),s>1&&(s=1)}this._collisionPoint.copyFromFloats(0,0,0);var p=!1,_=1;if(u||(this._basePoint.subtractToRef(l.normal,this._planeIntersectionPoint),this._velocity.scaleToRef(s,this._tempVector),this._planeIntersectionPoint.addInPlace(this._tempVector),this._checkPointInTriangle(this._planeIntersectionPoint,n,r,i,l.normal)&&(p=!0,_=s,this._collisionPoint.copyFrom(this._planeIntersectionPoint))),!p){var m=this._velocity.lengthSquared(),g=m;this._basePoint.subtractToRef(n,this._tempVector);var v=2*o.x.Dot(this._velocity,this._tempVector),y=this._tempVector.lengthSquared()-1,b=Hn(g,v,y,_);b.found&&(_=b.root,p=!0,this._collisionPoint.copyFrom(n)),this._basePoint.subtractToRef(r,this._tempVector),v=2*o.x.Dot(this._velocity,this._tempVector),y=this._tempVector.lengthSquared()-1,(b=Hn(g,v,y,_)).found&&(_=b.root,p=!0,this._collisionPoint.copyFrom(r)),this._basePoint.subtractToRef(i,this._tempVector),v=2*o.x.Dot(this._velocity,this._tempVector),y=this._tempVector.lengthSquared()-1,(b=Hn(g,v,y,_)).found&&(_=b.root,p=!0,this._collisionPoint.copyFrom(i)),r.subtractToRef(n,this._edge),n.subtractToRef(this._basePoint,this._baseToVertex);var T=this._edge.lengthSquared(),E=o.x.Dot(this._edge,this._velocity),x=o.x.Dot(this._edge,this._baseToVertex);if(g=T*-m+E*E,v=T*(2*o.x.Dot(this._velocity,this._baseToVertex))-2*E*x,y=T*(1-this._baseToVertex.lengthSquared())+x*x,(b=Hn(g,v,y,_)).found){var M=(E*b.root-x)/T;M>=0&&M<=1&&(_=b.root,p=!0,this._edge.scaleInPlace(M),n.addToRef(this._edge,this._collisionPoint))}i.subtractToRef(r,this._edge),r.subtractToRef(this._basePoint,this._baseToVertex),T=this._edge.lengthSquared(),E=o.x.Dot(this._edge,this._velocity),x=o.x.Dot(this._edge,this._baseToVertex),g=T*-m+E*E,v=T*(2*o.x.Dot(this._velocity,this._baseToVertex))-2*E*x,y=T*(1-this._baseToVertex.lengthSquared())+x*x,(b=Hn(g,v,y,_)).found&&(M=(E*b.root-x)/T)>=0&&M<=1&&(_=b.root,p=!0,this._edge.scaleInPlace(M),r.addToRef(this._edge,this._collisionPoint)),n.subtractToRef(i,this._edge),i.subtractToRef(this._basePoint,this._baseToVertex),T=this._edge.lengthSquared(),E=o.x.Dot(this._edge,this._velocity),x=o.x.Dot(this._edge,this._baseToVertex),g=T*-m+E*E,v=T*(2*o.x.Dot(this._velocity,this._baseToVertex))-2*E*x,y=T*(1-this._baseToVertex.lengthSquared())+x*x,(b=Hn(g,v,y,_)).found&&(M=(E*b.root-x)/T)>=0&&M<=1&&(_=b.root,p=!0,this._edge.scaleInPlace(M),i.addToRef(this._edge,this._collisionPoint))}if(p){var A=_*this._velocity.length();(!this.collisionFound||A<this._nearestDistance)&&(this.intersectionPoint?this.intersectionPoint.copyFrom(this._collisionPoint):this.intersectionPoint=this._collisionPoint.clone(),this._nearestDistance=A,this.collisionFound=!0)}}},e.prototype._collide=function(e,t,n,r,i,o,a){for(var s=r;s<i;s+=3)this._testTriangle(s,e,t[n[s+2]-o],t[n[s+1]-o],t[n[s]-o],a)},e.prototype._getResponse=function(e,t){e.addToRef(t,this._destinationPoint),t.scaleInPlace(this._nearestDistance/t.length()),this._basePoint.addToRef(t,e),e.subtractToRef(this.intersectionPoint,this._slidePlaneNormal),this._slidePlaneNormal.normalize(),this._slidePlaneNormal.scaleToRef(this._epsilon,this._displacementVector),e.addInPlace(this._displacementVector),this.intersectionPoint.addInPlace(this._displacementVector),this._slidePlaneNormal.scaleInPlace(o.n.SignedDistanceToPlaneFromPositionAndNormal(this.intersectionPoint,this._slidePlaneNormal,this._destinationPoint)),this._destinationPoint.subtractInPlace(this._slidePlaneNormal),this._destinationPoint.subtractToRef(this.intersectionPoint,t)},e}(),Xn=function(){function e(){this._scaledPosition=o.x.Zero(),this._scaledVelocity=o.x.Zero(),this._finalPosition=o.x.Zero()}return e.prototype.getNewPosition=function(e,t,n,r,i,o,a){e.divideToRef(n._radius,this._scaledPosition),t.divideToRef(n._radius,this._scaledVelocity),n.collidedMesh=null,n._retry=0,n._initialVelocity=this._scaledVelocity,n._initialPosition=this._scaledPosition,this._collideWithWorld(this._scaledPosition,this._scaledVelocity,n,r,this._finalPosition,i),this._finalPosition.multiplyInPlace(n._radius),o(a,this._finalPosition,n.collidedMesh)},e.prototype.createCollider=function(){return new Wn},e.prototype.init=function(e){this._scene=e},e.prototype._collideWithWorld=function(e,t,n,r,i,o){void 0===o&&(o=null);var a=10*me.b.CollisionsEpsilon;if(n._retry>=r)i.copyFrom(e);else{var s=o?o.collisionMask:n.collisionMask;n._initialize(e,t,a);for(var u=0;u<this._scene.meshes.length;u++){var l=this._scene.meshes[u];l.isEnabled()&&l.checkCollisions&&l.subMeshes&&l!==o&&0!=(s&l.collisionGroup)&&l._checkCollision(n)}n.collisionFound?(0===t.x&&0===t.y&&0===t.z||n._getResponse(e,t),t.length()<=a?i.copyFrom(e):(n._retry++,this._collideWithWorld(e,t,n,r,i,o))):e.addToRef(t,i)}},e}();H.a.CollisionCoordinatorFactory=function(){return new Xn};var Kn=n(50),Qn=n(81),qn=n(108),Zn=n(77),Jn=n(43),$n=n(82),er=function(){function e(e,t,n,r,i,o){this.entries=new Array,this._boundingVectors=new Array,this._capacity=n,this._depth=r,this._maxDepth=i,this._creationFunc=o,this._minPoint=e,this._maxPoint=t,this._boundingVectors.push(e.clone()),this._boundingVectors.push(t.clone()),this._boundingVectors.push(e.clone()),this._boundingVectors[2].x=t.x,this._boundingVectors.push(e.clone()),this._boundingVectors[3].y=t.y,this._boundingVectors.push(e.clone()),this._boundingVectors[4].z=t.z,this._boundingVectors.push(t.clone()),this._boundingVectors[5].z=e.z,this._boundingVectors.push(t.clone()),this._boundingVectors[6].x=e.x,this._boundingVectors.push(t.clone()),this._boundingVectors[7].y=e.y}return Object.defineProperty(e.prototype,"capacity",{get:function(){return this._capacity},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minPoint",{get:function(){return this._minPoint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPoint",{get:function(){return this._maxPoint},enumerable:!0,configurable:!0}),e.prototype.addEntry=function(e){if(this.blocks)for(var t=0;t<this.blocks.length;t++)this.blocks[t].addEntry(e);else this._creationFunc(e,this),this.entries.length>this.capacity&&this._depth<this._maxDepth&&this.createInnerBlocks()},e.prototype.removeEntry=function(e){if(this.blocks)for(var t=0;t<this.blocks.length;t++)this.blocks[t].removeEntry(e);else{var n=this.entries.indexOf(e);n>-1&&this.entries.splice(n,1)}},e.prototype.addEntries=function(e){for(var t=0;t<e.length;t++)this.addEntry(e[t])},e.prototype.select=function(e,t,n){if(Zn.a.IsInFrustum(this._boundingVectors,e)){if(this.blocks){for(var r=0;r<this.blocks.length;r++)this.blocks[r].select(e,t,n);return}n?t.concat(this.entries):t.concatWithNoDuplicate(this.entries)}},e.prototype.intersects=function(e,t,n,r){if(Zn.a.IntersectsSphere(this._minPoint,this._maxPoint,e,t)){if(this.blocks){for(var i=0;i<this.blocks.length;i++)this.blocks[i].intersects(e,t,n,r);return}r?n.concat(this.entries):n.concatWithNoDuplicate(this.entries)}},e.prototype.intersectsRay=function(e,t){if(e.intersectsBoxMinMax(this._minPoint,this._maxPoint)){if(this.blocks){for(var n=0;n<this.blocks.length;n++)this.blocks[n].intersectsRay(e,t);return}t.concatWithNoDuplicate(this.entries)}},e.prototype.createInnerBlocks=function(){e._CreateBlocks(this._minPoint,this._maxPoint,this.entries,this._capacity,this._depth,this._maxDepth,this,this._creationFunc)},e._CreateBlocks=function(t,n,r,i,a,s,u,l){u.blocks=new Array;for(var c=new o.x((n.x-t.x)/2,(n.y-t.y)/2,(n.z-t.z)/2),h=0;h<2;h++)for(var d=0;d<2;d++)for(var f=0;f<2;f++){var p=new e(t.add(c.multiplyByFloats(h,d,f)),t.add(c.multiplyByFloats(h+1,d+1,f+1)),i,a+1,s,l);p.addEntries(r),u.blocks.push(p)}},e}(),tr=function(){function e(e,t,n){void 0===n&&(n=2),this.maxDepth=n,this.dynamicContent=new Array,this._maxBlockCapacity=t||64,this._selectionContent=new Gt.b(1024),this._creationFunc=e}return e.prototype.update=function(e,t,n){er._CreateBlocks(e,t,n,this._maxBlockCapacity,0,this.maxDepth,this,this._creationFunc)},e.prototype.addMesh=function(e){for(var t=0;t<this.blocks.length;t++)this.blocks[t].addEntry(e)},e.prototype.removeMesh=function(e){for(var t=0;t<this.blocks.length;t++)this.blocks[t].removeEntry(e)},e.prototype.select=function(e,t){this._selectionContent.reset();for(var n=0;n<this.blocks.length;n++)this.blocks[n].select(e,this._selectionContent,t);return t?this._selectionContent.concat(this.dynamicContent):this._selectionContent.concatWithNoDuplicate(this.dynamicContent),this._selectionContent},e.prototype.intersects=function(e,t,n){this._selectionContent.reset();for(var r=0;r<this.blocks.length;r++)this.blocks[r].intersects(e,t,this._selectionContent,n);return n?this._selectionContent.concat(this.dynamicContent):this._selectionContent.concatWithNoDuplicate(this.dynamicContent),this._selectionContent},e.prototype.intersectsRay=function(e){this._selectionContent.reset();for(var t=0;t<this.blocks.length;t++)this.blocks[t].intersectsRay(e,this._selectionContent);return this._selectionContent.concatWithNoDuplicate(this.dynamicContent),this._selectionContent},e.CreationFuncForMeshes=function(e,t){var n=e.getBoundingInfo();!e.isBlocked&&n.boundingBox.intersectsMinMax(t.minPoint,t.maxPoint)&&t.entries.push(e)},e.CreationFuncForSubMeshes=function(e,t){e.getBoundingInfo().boundingBox.intersectsMinMax(t.minPoint,t.maxPoint)&&t.entries.push(e)},e}();H.a.prototype.createOrUpdateSelectionOctree=function(e,t){void 0===e&&(e=64),void 0===t&&(t=2);var n=this._getComponent(xe.a.NAME_OCTREE);n||(n=new nr(this),this._addComponent(n)),this._selectionOctree||(this._selectionOctree=new tr(tr.CreationFuncForMeshes,e,t));var r=this.getWorldExtends();return this._selectionOctree.update(r.min,r.max,this.meshes),this._selectionOctree},Object.defineProperty(H.a.prototype,"selectionOctree",{get:function(){return this._selectionOctree},enumerable:!0,configurable:!0}),Fe.a.prototype.createOrUpdateSubmeshesOctree=function(e,t){void 0===e&&(e=64),void 0===t&&(t=2);var n=this.getScene(),r=n._getComponent(xe.a.NAME_OCTREE);r||(r=new nr(n),n._addComponent(r)),this._submeshesOctree||(this._submeshesOctree=new tr(tr.CreationFuncForSubMeshes,e,t)),this.computeWorldMatrix(!0);var i=this.getBoundingInfo().boundingBox;return this._submeshesOctree.update(i.minimumWorld,i.maximumWorld,this.subMeshes),this._submeshesOctree};var nr=function(){function e(e){this.name=xe.a.NAME_OCTREE,this.checksIsEnabled=!0,this._tempRay=new Ot.a(o.x.Zero(),new o.x(1,1,1)),this.scene=e,this.scene.getActiveMeshCandidates=this.getActiveMeshCandidates.bind(this),this.scene.getActiveSubMeshCandidates=this.getActiveSubMeshCandidates.bind(this),this.scene.getCollidingSubMeshCandidates=this.getCollidingSubMeshCandidates.bind(this),this.scene.getIntersectingSubMeshCandidates=this.getIntersectingSubMeshCandidates.bind(this)}return e.prototype.register=function(){var e=this;this.scene.onMeshRemovedObservable.add(function(t){var n=e.scene.selectionOctree;if(null!=n){var r=n.dynamicContent.indexOf(t);-1!==r&&n.dynamicContent.splice(r,1)}}),this.scene.onMeshImportedObservable.add(function(t){var n=e.scene.selectionOctree;null!=n&&n.addMesh(t)})},e.prototype.getActiveMeshCandidates=function(){return this.scene._selectionOctree?this.scene._selectionOctree.select(this.scene.frustumPlanes):this.scene._getDefaultMeshCandidates()},e.prototype.getActiveSubMeshCandidates=function(e){return e._submeshesOctree&&e.useOctreeForRenderingSelection?e._submeshesOctree.select(this.scene.frustumPlanes):this.scene._getDefaultSubMeshCandidates(e)},e.prototype.getIntersectingSubMeshCandidates=function(e,t){return e._submeshesOctree&&e.useOctreeForPicking?(Ot.a.TransformToRef(t,e.getWorldMatrix(),this._tempRay),e._submeshesOctree.intersectsRay(this._tempRay)):this.scene._getDefaultSubMeshCandidates(e)},e.prototype.getCollidingSubMeshCandidates=function(e,t){if(e._submeshesOctree&&e.useOctreeForCollisions){var n=t._velocityWorldLength+Math.max(t._radius.x,t._radius.y,t._radius.z);return e._submeshesOctree.intersects(t._basePointWorld,n)}return this.scene._getDefaultSubMeshCandidates(e)},e.prototype.rebuild=function(){},e.prototype.dispose=function(){},e}(),rr=n(74),ir=n(128),or=function(){this._timeElapsedQueryEnded=!1},ar=function(){this.occlusionInternalRetryCounter=0,this.isOcclusionQueryInProgress=!1,this.isOccluded=!1,this.occlusionRetryCount=-1,this.occlusionType=Fe.a.OCCLUSION_TYPE_NONE,this.occlusionQueryAlgorithmType=Fe.a.OCCLUSION_ALGORITHM_TYPE_CONSERVATIVE};me.b.prototype.createQuery=function(){return this._gl.createQuery()},me.b.prototype.deleteQuery=function(e){return this._gl.deleteQuery(e),this},me.b.prototype.isQueryResultAvailable=function(e){return this._gl.getQueryParameter(e,this._gl.QUERY_RESULT_AVAILABLE)},me.b.prototype.getQueryResult=function(e){return this._gl.getQueryParameter(e,this._gl.QUERY_RESULT)},me.b.prototype.beginOcclusionQuery=function(e,t){var n=this._getGlAlgorithmType(e);return this._gl.beginQuery(n,t),this},me.b.prototype.endOcclusionQuery=function(e){var t=this._getGlAlgorithmType(e);return this._gl.endQuery(t),this},me.b.prototype._createTimeQuery=function(){var e=this.getCaps().timerQuery;return e.createQueryEXT?e.createQueryEXT():this.createQuery()},me.b.prototype._deleteTimeQuery=function(e){var t=this.getCaps().timerQuery;t.deleteQueryEXT?t.deleteQueryEXT(e):this.deleteQuery(e)},me.b.prototype._getTimeQueryResult=function(e){var t=this.getCaps().timerQuery;return t.getQueryObjectEXT?t.getQueryObjectEXT(e,t.QUERY_RESULT_EXT):this.getQueryResult(e)},me.b.prototype._getTimeQueryAvailability=function(e){var t=this.getCaps().timerQuery;return t.getQueryObjectEXT?t.getQueryObjectEXT(e,t.QUERY_RESULT_AVAILABLE_EXT):this.isQueryResultAvailable(e)},me.b.prototype.startTimeQuery=function(){var e=this.getCaps(),t=e.timerQuery;if(!t)return null;var n=new or;if(this._gl.getParameter(t.GPU_DISJOINT_EXT),e.canUseTimestampForTimerQuery)n._startTimeQuery=this._createTimeQuery(),t.queryCounterEXT(n._startTimeQuery,t.TIMESTAMP_EXT);else{if(this._currentNonTimestampToken)return this._currentNonTimestampToken;n._timeElapsedQuery=this._createTimeQuery(),t.beginQueryEXT?t.beginQueryEXT(t.TIME_ELAPSED_EXT,n._timeElapsedQuery):this._gl.beginQuery(t.TIME_ELAPSED_EXT,n._timeElapsedQuery),this._currentNonTimestampToken=n}return n},me.b.prototype.endTimeQuery=function(e){var t=this.getCaps(),n=t.timerQuery;if(!n||!e)return-1;if(t.canUseTimestampForTimerQuery){if(!e._startTimeQuery)return-1;e._endTimeQuery||(e._endTimeQuery=this._createTimeQuery(),n.queryCounterEXT(e._endTimeQuery,n.TIMESTAMP_EXT))}else if(!e._timeElapsedQueryEnded){if(!e._timeElapsedQuery)return-1;n.endQueryEXT?n.endQueryEXT(n.TIME_ELAPSED_EXT):this._gl.endQuery(n.TIME_ELAPSED_EXT),e._timeElapsedQueryEnded=!0}var r=this._gl.getParameter(n.GPU_DISJOINT_EXT),i=!1;if(e._endTimeQuery?i=this._getTimeQueryAvailability(e._endTimeQuery):e._timeElapsedQuery&&(i=this._getTimeQueryAvailability(e._timeElapsedQuery)),i&&!r){var o=0;if(t.canUseTimestampForTimerQuery){if(!e._startTimeQuery||!e._endTimeQuery)return-1;var a=this._getTimeQueryResult(e._startTimeQuery);o=this._getTimeQueryResult(e._endTimeQuery)-a,this._deleteTimeQuery(e._startTimeQuery),this._deleteTimeQuery(e._endTimeQuery),e._startTimeQuery=null,e._endTimeQuery=null}else{if(!e._timeElapsedQuery)return-1;o=this._getTimeQueryResult(e._timeElapsedQuery),this._deleteTimeQuery(e._timeElapsedQuery),e._timeElapsedQuery=null,e._timeElapsedQueryEnded=!1,this._currentNonTimestampToken=null}return o}return-1},me.b.prototype._getGlAlgorithmType=function(e){return e===Fe.a.OCCLUSION_ALGORITHM_TYPE_CONSERVATIVE?this._gl.ANY_SAMPLES_PASSED_CONSERVATIVE:this._gl.ANY_SAMPLES_PASSED},Object.defineProperty(Fe.a.prototype,"isOcclusionQueryInProgress",{get:function(){return this._occlusionDataStorage.isOcclusionQueryInProgress},enumerable:!1,configurable:!0}),Object.defineProperty(Fe.a.prototype,"_occlusionDataStorage",{get:function(){return this.__occlusionDataStorage||(this.__occlusionDataStorage=new ar),this.__occlusionDataStorage},enumerable:!1,configurable:!0}),Object.defineProperty(Fe.a.prototype,"isOccluded",{get:function(){return this._occlusionDataStorage.isOccluded},set:function(e){this._occlusionDataStorage.isOccluded=e},enumerable:!0,configurable:!0}),Object.defineProperty(Fe.a.prototype,"occlusionQueryAlgorithmType",{get:function(){return this._occlusionDataStorage.occlusionQueryAlgorithmType},set:function(e){this._occlusionDataStorage.occlusionQueryAlgorithmType=e},enumerable:!0,configurable:!0}),Object.defineProperty(Fe.a.prototype,"occlusionType",{get:function(){return this._occlusionDataStorage.occlusionType},set:function(e){this._occlusionDataStorage.occlusionType=e},enumerable:!0,configurable:!0}),Object.defineProperty(Fe.a.prototype,"occlusionRetryCount",{get:function(){return this._occlusionDataStorage.occlusionRetryCount},set:function(e){this._occlusionDataStorage.occlusionRetryCount=e},enumerable:!0,configurable:!0}),Fe.a.prototype._checkOcclusionQuery=function(){var e=this._occlusionDataStorage;if(e.occlusionType===Fe.a.OCCLUSION_TYPE_NONE)return e.isOccluded=!1,!1;var t=this.getEngine();if(t.webGLVersion<2)return e.isOccluded=!1,!1;if(!t.isQueryResultAvailable)return e.isOccluded=!1,!1;if(this.isOcclusionQueryInProgress&&this._occlusionQuery)if(t.isQueryResultAvailable(this._occlusionQuery)){var n=t.getQueryResult(this._occlusionQuery);e.isOcclusionQueryInProgress=!1,e.occlusionInternalRetryCounter=0,e.isOccluded=1!==n}else{if(e.occlusionInternalRetryCounter++,!(-1!==e.occlusionRetryCount&&e.occlusionInternalRetryCounter>e.occlusionRetryCount))return!1;e.isOcclusionQueryInProgress=!1,e.occlusionInternalRetryCounter=0,e.isOccluded=e.occlusionType!==Fe.a.OCCLUSION_TYPE_OPTIMISTIC&&e.isOccluded}var r=this.getScene();if(r.getBoundingBoxRenderer){var i=r.getBoundingBoxRenderer();this._occlusionQuery||(this._occlusionQuery=t.createQuery()),t.beginOcclusionQuery(e.occlusionQueryAlgorithmType,this._occlusionQuery),i.renderOcclusionBoundingBox(this),t.endOcclusionQuery(e.occlusionQueryAlgorithmType),this._occlusionDataStorage.isOcclusionQueryInProgress=!0}return e.isOccluded},me.b.prototype.createTransformFeedback=function(){return this._gl.createTransformFeedback()},me.b.prototype.deleteTransformFeedback=function(e){this._gl.deleteTransformFeedback(e)},me.b.prototype.bindTransformFeedback=function(e){this._gl.bindTransformFeedback(this._gl.TRANSFORM_FEEDBACK,e)},me.b.prototype.beginTransformFeedback=function(e){void 0===e&&(e=!0),this._gl.beginTransformFeedback(e?this._gl.POINTS:this._gl.TRIANGLES)},me.b.prototype.endTransformFeedback=function(){this._gl.endTransformFeedback()},me.b.prototype.setTranformFeedbackVaryings=function(e,t){this._gl.transformFeedbackVaryings(e,t,this._gl.INTERLEAVED_ATTRIBS)},me.b.prototype.bindTransformFeedbackBuffer=function(e){this._gl.bindBufferBase(this._gl.TRANSFORM_FEEDBACK_BUFFER,0,e?e.underlyingResource:null)};var sr=n(107),ur=function(){function e(){}return e.COPY=1,e.CUT=2,e.PASTE=3,e}(),lr=function(){function e(e,t){this.type=e,this.event=t}return e.GetTypeFromCharacter=function(e){switch(e){case 67:return ur.COPY;case 86:return ur.PASTE;case 88:return ur.CUT;default:return-1}},e}(),cr=n(59),hr=n(55),dr=function(){function e(e,t,n){this.lengthComputable=e,this.loaded=t,this.total=n}return e.FromProgressEvent=function(t){return new e(t.lengthComputable,t.loaded,t.total)},e}(),fr=function(){function e(){}return Object.defineProperty(e,"ForceFullSceneLoadingForIncremental",{get:function(){return hr.a.ForceFullSceneLoadingForIncremental},set:function(e){hr.a.ForceFullSceneLoadingForIncremental=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ShowLoadingScreen",{get:function(){return hr.a.ShowLoadingScreen},set:function(e){hr.a.ShowLoadingScreen=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"loggingLevel",{get:function(){return hr.a.loggingLevel},set:function(e){hr.a.loggingLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CleanBoneMatrixWeights",{get:function(){return hr.a.CleanBoneMatrixWeights},set:function(e){hr.a.CleanBoneMatrixWeights=e},enumerable:!0,configurable:!0}),e._getDefaultPlugin=function(){return e._registeredPlugins[".babylon"]},e._getPluginForExtension=function(t){return e._registeredPlugins[t]||(p.a.Warn("Unable to find a plugin to load "+t+" files. Trying to use .babylon default plugin. To load from a specific filetype (eg. gltf) see: http://doc.babylonjs.com/how_to/load_from_any_file_type"),e._getDefaultPlugin())},e._getPluginForDirectLoad=function(t){for(var n in e._registeredPlugins){var r=e._registeredPlugins[n].plugin;if(r.canDirectLoad&&r.canDirectLoad(t))return e._registeredPlugins[n]}return e._getDefaultPlugin()},e._getPluginForFilename=function(t){var n=t.indexOf("?");-1!==n&&(t=t.substring(0,n));var r=t.lastIndexOf("."),i=t.substring(r,t.length).toLowerCase();return e._getPluginForExtension(i)},e._getDirectLoad=function(e){return"data:"===e.substr(0,5)?e.substr(5):null},e._loadData=function(t,n,r,i,o,a,s){var u,l=e._getDirectLoad(t.name),c=s?e._getPluginForExtension(s):l?e._getPluginForDirectLoad(t.name):e._getPluginForFilename(t.name);if(!(u=c.plugin.createPlugin?c.plugin.createPlugin():c.plugin))throw"The loader plugin corresponding to the file type you are trying to load has not been found. If using es6, please import the plugin you wish to use before.";var h,d=c.isBinary;e.OnPluginActivatedObservable.notifyObservers(u);var f=function(e,t){n.isDisposed?o("Scene has been disposed"):(n.offlineProvider=h,r(u,e,t))},p=null,_=!1,m=u.onDisposeObservable;m&&m.add(function(){_=!0,p&&(p.abort(),p=null),a()});var g=function(){_||(p=ye.h.LoadFile(t.url,f,i?function(e){i(dr.FromProgressEvent(e))}:void 0,h,d,function(e,t){o("Failed to load scene."+(t?" "+t.message:""),t)}))};if(l)return f(l),u;var v=t.file||cr.a.FilesToLoad[t.name.toLowerCase()];if(-1===t.rootUrl.indexOf("file:")||-1!==t.rootUrl.indexOf("file:")&&!v){var y=n.getEngine(),b=y.enableOfflineSupport;if(b){for(var T=!1,E=0,x=n.disableOfflineSupportExceptionRules;E<x.length;E++)if(x[E].test(t.url)){T=!0;break}b=!T}b&&me.b.OfflineProviderFactory?h=me.b.OfflineProviderFactory(t.url,g,y.disableManifestCheck):g()}else v?p=ye.h.ReadFile(v,f,i,d):o("Unable to find file named "+t.name);return u},e._getFileInfo=function(e,t){var n,r,i=null;if(t)if(t.name)n=e+t.name,r=t.name,i=t;else{var o=t;if("/"===o.substr(0,1))return ye.h.Error("Wrong sceneFilename parameter"),null;n=e+o,r=o}else n=e,r=ye.h.GetFilename(e),e=ye.h.GetFolderPath(e);return{url:n,rootUrl:e,name:r,file:i}},e.GetPluginForExtension=function(t){return e._getPluginForExtension(t).plugin},e.IsPluginForExtensionAvailable=function(t){return!!e._registeredPlugins[t]},e.RegisterPlugin=function(t){if("string"==typeof t.extensions)e._registeredPlugins[t.extensions.toLowerCase()]={plugin:t,isBinary:!1};else{var n=t.extensions;Object.keys(n).forEach(function(r){e._registeredPlugins[r.toLowerCase()]={plugin:t,isBinary:n[r].isBinary}})}},e.ImportMesh=function(t,n,r,i,o,a,s,u){if(void 0===r&&(r=""),void 0===i&&(i=S.a.LastCreatedScene),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null),void 0===u&&(u=null),!i)return p.a.Error("No scene available to import mesh to"),null;var l=e._getFileInfo(n,r);if(!l)return null;var c={};i._addPendingData(c);var h=function(){i._removePendingData(c)},d=function(e,t){var n="Unable to import meshes from "+l.url+": "+e;s?s(i,n,t):p.a.Error(n),h()},f=a?function(e){try{a(e)}catch(e){d("Error in onProgress callback",e)}}:void 0,_=function(e,t,n,r){if(i.importedMeshesFiles.push(l.url),o)try{o(e,t,n,r)}catch(e){d("Error in onSuccess callback",e)}i._removePendingData(c)};return e._loadData(l,i,function(e,n,r){if(e.rewriteRootURL&&(l.rootUrl=e.rewriteRootURL(l.rootUrl,r)),e.importMesh){var o=e,a=new Array,s=new Array,u=new Array;if(!o.importMesh(t,i,n,l.rootUrl,a,s,u,d))return;i.loadingPluginName=e.name,_(a,s,u,[])}else e.importMeshAsync(t,i,n,l.rootUrl,f,l.name).then(function(t){i.loadingPluginName=e.name,_(t.meshes,t.particleSystems,t.skeletons,t.animationGroups)}).catch(function(e){d(e.message,e)})},f,d,h,u)},e.ImportMeshAsync=function(t,n,r,i,o,a){return void 0===r&&(r=""),void 0===i&&(i=S.a.LastCreatedScene),void 0===o&&(o=null),void 0===a&&(a=null),new Promise(function(s,u){e.ImportMesh(t,n,r,i,function(e,t,n,r){s({meshes:e,particleSystems:t,skeletons:n,animationGroups:r})},o,function(e,t,n){u(n||new Error(t))},a)})},e.Load=function(t,n,r,i,o,a,s){return void 0===n&&(n=""),void 0===r&&(r=S.a.LastCreatedEngine),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null),r?e.Append(t,n,new H.a(r),i,o,a,s):(ye.h.Error("No engine available"),null)},e.LoadAsync=function(t,n,r,i,o){return void 0===n&&(n=""),void 0===r&&(r=S.a.LastCreatedEngine),void 0===i&&(i=null),void 0===o&&(o=null),new Promise(function(a,s){e.Load(t,n,r,function(e){a(e)},i,function(e,t,n){s(n||new Error(t))},o)})},e.Append=function(t,n,r,i,o,a,s){if(void 0===n&&(n=""),void 0===r&&(r=S.a.LastCreatedScene),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null),!r)return p.a.Error("No scene available to append to"),null;var u=e._getFileInfo(t,n);if(!u)return null;e.ShowLoadingScreen&&r.getEngine().displayLoadingUI();var l={};r._addPendingData(l);var c=function(){r._removePendingData(l),r.getEngine().hideLoadingUI()},h=function(e,t){var n="Unable to load from "+u.url+(e?": "+e:"");a?a(r,n,t):p.a.Error(n),c()},d=o?function(e){try{o(e)}catch(e){h("Error in onProgress callback",e)}}:void 0,f=function(){if(i)try{i(r)}catch(e){h("Error in onSuccess callback",e)}r._removePendingData(l)};return e._loadData(u,r,function(t,n){if(t.load){if(!t.load(r,n,u.rootUrl,h))return;r.loadingPluginName=t.name,f()}else t.loadAsync(r,n,u.rootUrl,d,u.name).then(function(){r.loadingPluginName=t.name,f()}).catch(function(e){h(e.message,e)});e.ShowLoadingScreen&&r.executeWhenReady(function(){r.getEngine().hideLoadingUI()})},d,h,c,s)},e.AppendAsync=function(t,n,r,i,o){return void 0===n&&(n=""),void 0===r&&(r=S.a.LastCreatedScene),void 0===i&&(i=null),void 0===o&&(o=null),new Promise(function(a,s){e.Append(t,n,r,function(e){a(e)},i,function(e,t,n){s(n||new Error(t))},o)})},e.LoadAssetContainer=function(t,n,r,i,o,a,s){if(void 0===n&&(n=""),void 0===r&&(r=S.a.LastCreatedScene),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),void 0===s&&(s=null),!r)return p.a.Error("No scene available to load asset container to"),null;var u=e._getFileInfo(t,n);if(!u)return null;var l={};r._addPendingData(l);var c=function(){r._removePendingData(l)},h=function(e,t){var n="Unable to load assets from "+u.url+(e?": "+e:"");a?a(r,n,t):p.a.Error(n),c()},d=o?function(e){try{o(e)}catch(e){h("Error in onProgress callback",e)}}:void 0,f=function(e){if(i)try{i(e)}catch(e){h("Error in onSuccess callback",e)}r._removePendingData(l)};return e._loadData(u,r,function(t,n){if(t.loadAssetContainer){var i=t.loadAssetContainer(r,n,u.rootUrl,h);if(!i)return;r.loadingPluginName=t.name,f(i)}else t.loadAssetContainerAsync?t.loadAssetContainerAsync(r,n,u.rootUrl,d,u.name).then(function(e){r.loadingPluginName=t.name,f(e)}).catch(function(e){h(e.message,e)}):h("LoadAssetContainer is not supported by this plugin. Plugin did not provide a loadAssetContainer or loadAssetContainerAsync method.");e.ShowLoadingScreen&&r.executeWhenReady(function(){r.getEngine().hideLoadingUI()})},d,h,c,s)},e.LoadAssetContainerAsync=function(t,n,r,i,o){return void 0===n&&(n=""),void 0===r&&(r=S.a.LastCreatedScene),void 0===i&&(i=null),void 0===o&&(o=null),new Promise(function(a,s){e.LoadAssetContainer(t,n,r,function(e){a(e)},i,function(e,t,n){s(n||new Error(t))},o)})},e.NO_LOGGING=_.a.SCENELOADER_NO_LOGGING,e.MINIMAL_LOGGING=_.a.SCENELOADER_MINIMAL_LOGGING,e.SUMMARY_LOGGING=_.a.SCENELOADER_SUMMARY_LOGGING,e.DETAILED_LOGGING=_.a.SCENELOADER_DETAILED_LOGGING,e.OnPluginActivatedObservable=new i.c,e._registeredPlugins={},e}(),pr=function(e){function t(t){var n=e.call(this,t)||this;return n.controllerType=Ct.DAYDREAM,n}return l.d(t,e),t.prototype.initControllerMesh=function(e,n){var r=this;fr.ImportMesh("",t.MODEL_BASE_URL,t.MODEL_FILENAME,e,function(e){r._defaultModel=e[1],r.attachToMesh(r._defaultModel),n&&n(r._defaultModel)})},t.prototype._handleButtonChange=function(e,t,n){if(0===e){var r=this.onTriggerStateChangedObservable;r&&r.notifyObservers(t)}else p.a.Warn("Unrecognized Daydream button index: "+e)},t.MODEL_BASE_URL="https://controllers.babylonjs.com/generic/",t.MODEL_FILENAME="generic.babylon",t.GAMEPAD_ID_PREFIX="Daydream",t}(gn);It._ControllerFactories.push({canCreate:function(e){return 0===e.id.indexOf(pr.GAMEPAD_ID_PREFIX)},create:function(e){return new pr(e)}});var _r=function(e){function t(t){var n=e.call(this,t)||this;return n._buttonIndexToObservableNameMap=["onPadStateChangedObservable","onTriggerStateChangedObservable"],n.controllerType=Ct.GEAR_VR,n._calculatedPosition=new o.x("left"==n.hand?-.15:.15,-.5,.25),n._disableTrackPosition(n._calculatedPosition),n}return l.d(t,e),t.prototype.initControllerMesh=function(e,n){var r=this;fr.ImportMesh("",t.MODEL_BASE_URL,t.MODEL_FILENAME,e,function(t){var i=new fe.a("",e);t[1].parent=i,t[1].position.z=-.15,r._defaultModel=i,r.attachToMesh(r._defaultModel),n&&n(r._defaultModel)})},t.prototype._handleButtonChange=function(e,t,n){if(e<this._buttonIndexToObservableNameMap.length){var r=this[this._buttonIndexToObservableNameMap[e]];r&&r.notifyObservers(t)}},t.MODEL_BASE_URL="https://controllers.babylonjs.com/generic/",t.MODEL_FILENAME="generic.babylon",t.GAMEPAD_ID_PREFIX="Gear VR",t}(gn);It._ControllerFactories.push({canCreate:function(e){return 0===e.id.indexOf(_r.GAMEPAD_ID_PREFIX)||-1!==e.id.indexOf("Oculus Go")},create:function(e){return new _r(e)}});var mr=function(e){function t(t){return e.call(this,t)||this}return l.d(t,e),t.prototype.initControllerMesh=function(e,n){var r=this;fr.ImportMesh("",t.MODEL_BASE_URL,t.MODEL_FILENAME,e,function(e){r._defaultModel=e[1],r.attachToMesh(r._defaultModel),n&&n(r._defaultModel)})},t.prototype._handleButtonChange=function(e,t,n){console.log("Button id: "+e+"state: "),console.dir(t)},t.MODEL_BASE_URL="https://controllers.babylonjs.com/generic/",t.MODEL_FILENAME="generic.babylon",t}(gn);It._DefaultControllerFactory=function(e){return new mr(e)};var gr=function(e){function t(t){var n=e.call(this,t)||this;return n.onSecondaryTriggerStateChangedObservable=new i.c,n.onThumbRestChangedObservable=new i.c,n.controllerType=Ct.OCULUS,n}return l.d(t,e),t.prototype.initControllerMesh=function(e,n){var r=this;fr.ImportMesh("",t.MODEL_BASE_URL,"left"===this.hand?t.MODEL_LEFT_FILENAME:t.MODEL_RIGHT_FILENAME,e,function(e){r._defaultModel=e[1],r.attachToMesh(r._defaultModel),n&&n(r._defaultModel)})},Object.defineProperty(t.prototype,"onAButtonStateChangedObservable",{get:function(){if("right"===this.hand)return this.onMainButtonStateChangedObservable;throw new Error("No A button on left hand")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onBButtonStateChangedObservable",{get:function(){if("right"===this.hand)return this.onSecondaryButtonStateChangedObservable;throw new Error("No B button on left hand")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onXButtonStateChangedObservable",{get:function(){if("left"===this.hand)return this.onMainButtonStateChangedObservable;throw new Error("No X button on right hand")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onYButtonStateChangedObservable",{get:function(){if("left"===this.hand)return this.onSecondaryButtonStateChangedObservable;throw new Error("No Y button on right hand")},enumerable:!0,configurable:!0}),t.prototype._handleButtonChange=function(e,t,n){var r=t,i="right"===this.hand?-1:1;switch(e){case 0:return void this.onPadStateChangedObservable.notifyObservers(r);case 1:return this._defaultModel&&(this._defaultModel.getChildren()[3].rotation.x=.2*-r.value,this._defaultModel.getChildren()[3].position.y=.005*-r.value,this._defaultModel.getChildren()[3].position.z=.005*-r.value),void this.onTriggerStateChangedObservable.notifyObservers(r);case 2:return this._defaultModel&&(this._defaultModel.getChildren()[4].position.x=i*r.value*.0035),void this.onSecondaryTriggerStateChangedObservable.notifyObservers(r);case 3:return this._defaultModel&&(this._defaultModel.getChildren()[1].position.y=r.pressed?-.001:0),void this.onMainButtonStateChangedObservable.notifyObservers(r);case 4:return this._defaultModel&&(this._defaultModel.getChildren()[2].position.y=r.pressed?-.001:0),void this.onSecondaryButtonStateChangedObservable.notifyObservers(r);case 5:return void this.onThumbRestChangedObservable.notifyObservers(r)}},t.MODEL_BASE_URL="https://controllers.babylonjs.com/oculus/",t.MODEL_LEFT_FILENAME="left.babylon",t.MODEL_RIGHT_FILENAME="right.babylon",t}(gn);It._ControllerFactories.push({canCreate:function(e){return-1!==e.id.indexOf("Oculus Touch")},create:function(e){return new gr(e)}});var vr=function(e){function t(t){var n=e.call(this,t)||this;return n.controllerType=Ct.VIVE,n._invertLeftStickY=!0,n}return l.d(t,e),t.prototype.initControllerMesh=function(e,n){var r=this;fr.ImportMesh("",t.MODEL_BASE_URL,t.MODEL_FILENAME,e,function(e){r._defaultModel=e[1],r.attachToMesh(r._defaultModel),n&&n(r._defaultModel)})},Object.defineProperty(t.prototype,"onLeftButtonStateChangedObservable",{get:function(){return this.onMainButtonStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onRightButtonStateChangedObservable",{get:function(){return this.onMainButtonStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onMenuButtonStateChangedObservable",{get:function(){return this.onSecondaryButtonStateChangedObservable},enumerable:!0,configurable:!0}),t.prototype._handleButtonChange=function(e,t,n){var r=t;switch(e){case 0:return void this.onPadStateChangedObservable.notifyObservers(r);case 1:return this._defaultModel&&(this._defaultModel.getChildren()[6].rotation.x=.15*-r.value),void this.onTriggerStateChangedObservable.notifyObservers(r);case 2:return void this.onMainButtonStateChangedObservable.notifyObservers(r);case 3:return this._defaultModel&&(this._defaultModel.getChildren()[2].position.y=r.pressed?-.001:0),void this.onSecondaryButtonStateChangedObservable.notifyObservers(r)}},t.MODEL_BASE_URL="https://controllers.babylonjs.com/vive/",t.MODEL_FILENAME="wand.babylon",t}(gn);It._ControllerFactories.push({canCreate:function(e){return-1!==e.id.toLowerCase().indexOf("openvr")},create:function(e){return new vr(e)}});var yr=function(){this.buttonMeshes={},this.axisMeshes={}},br=function(e){function t(t){var n=e.call(this,t)||this;return n._mapping={buttons:["thumbstick","trigger","grip","menu","trackpad"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},buttonObservableNames:{trigger:"onTriggerStateChangedObservable",menu:"onSecondaryButtonStateChangedObservable",grip:"onMainButtonStateChangedObservable",thumbstick:"onPadStateChangedObservable",trackpad:"onTrackpadChangedObservable"},axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],pointingPoseMeshName:Ft.POINTING_POSE},n.onTrackpadChangedObservable=new i.c,n.onTrackpadValuesChangedObservable=new i.c,n.trackpad={x:0,y:0},n.controllerType=Ct.WINDOWS,n._loadedMeshInfo=null,n}return l.d(t,e),Object.defineProperty(t.prototype,"onTriggerButtonStateChangedObservable",{get:function(){return this.onTriggerStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onMenuButtonStateChangedObservable",{get:function(){return this.onSecondaryButtonStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onGripButtonStateChangedObservable",{get:function(){return this.onMainButtonStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onThumbstickButtonStateChangedObservable",{get:function(){return this.onPadStateChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTouchpadButtonStateChangedObservable",{get:function(){return this.onTrackpadChangedObservable},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"onTouchpadValuesChangedObservable",{get:function(){return this.onTrackpadValuesChangedObservable},enumerable:!0,configurable:!0}),t.prototype._updateTrackpad=function(){!this.browserGamepad.axes||this.browserGamepad.axes[2]==this.trackpad.x&&this.browserGamepad.axes[3]==this.trackpad.y||(this.trackpad.x=this.browserGamepad.axes[2],this.trackpad.y=this.browserGamepad.axes[3],this.onTrackpadValuesChangedObservable.notifyObservers(this.trackpad))},t.prototype.update=function(){if(e.prototype.update.call(this),this.browserGamepad.axes&&(this._updateTrackpad(),this._loadedMeshInfo))for(var t=0;t<this._mapping.axisMeshNames.length;t++)this._lerpAxisTransform(t,this.browserGamepad.axes[t])},t.prototype._handleButtonChange=function(e,t,n){var r=this._mapping.buttons[e];if(r){this._updateTrackpad();var i=this[this._mapping.buttonObservableNames[r]];i&&i.notifyObservers(t),this._lerpButtonTransform(r,t.value)}},t.prototype._lerpButtonTransform=function(e,t){if(this._loadedMeshInfo){var n=this._loadedMeshInfo.buttonMeshes[e];n.unpressed.rotationQuaternion&&n.pressed.rotationQuaternion&&n.value.rotationQuaternion&&(o.q.SlerpToRef(n.unpressed.rotationQuaternion,n.pressed.rotationQuaternion,t,n.value.rotationQuaternion),o.x.LerpToRef(n.unpressed.position,n.pressed.position,t,n.value.position))}},t.prototype._lerpAxisTransform=function(e,t){if(this._loadedMeshInfo){var n=this._loadedMeshInfo.axisMeshes[e];if(n&&n.min.rotationQuaternion&&n.max.rotationQuaternion&&n.value.rotationQuaternion){var r=.5*t+.5;o.q.SlerpToRef(n.min.rotationQuaternion,n.max.rotationQuaternion,r,n.value.rotationQuaternion),o.x.LerpToRef(n.min.position,n.max.position,r,n.value.position)}}},t.prototype.initControllerMesh=function(e,n,r){var i,o,a=this;if(void 0===r&&(r=!1),fr.IsPluginForExtensionAvailable(".glb")){var s="default";if(this.id&&!r){var u=this.id.match(t.GAMEPAD_ID_PATTERN);s=u&&u[0]||s}o="left"===this.hand?t.MODEL_LEFT_FILENAME:t.MODEL_RIGHT_FILENAME,i=t.MODEL_BASE_URL+s+"/"}else p.a.Warn("You need to reference GLTF loader to load Windows Motion Controllers model. Falling back to generic models"),i=mr.MODEL_BASE_URL,o=mr.MODEL_FILENAME;fr.ImportMesh("",i,o,e,function(t){a._loadedMeshInfo=a.processModel(e,t),a._loadedMeshInfo&&(a._defaultModel=a._loadedMeshInfo.rootNode,a.attachToMesh(a._defaultModel),n&&n(a._defaultModel))},null,function(e,t){p.a.Log(t),p.a.Warn("Failed to retrieve controller model from the remote server: "+i+o),r||a.initControllerMesh(e,n,!0)})},t.prototype.processModel=function(e,t){for(var n=null,r=new fe.a(this.id+" "+this.hand,e),i=null,o=0;o<t.length;o++){var a=t[o];if(!a.parent){a.isPickable=!1,i=a;break}}return i?(i.setParent(r),n=this.createMeshInfo(r)):p.a.Warn("Could not find root node in model file."),n},t.prototype.createMeshInfo=function(e){var t,n=new yr;for(n.rootNode=e,n.buttonMeshes={},n.axisMeshes={},t=0;t<this._mapping.buttons.length;t++){var r=this._mapping.buttonMeshNames[this._mapping.buttons[t]];if(r){var i=l(e,r);if(i){var o={index:t,value:c(i,"VALUE"),pressed:c(i,"PRESSED"),unpressed:c(i,"UNPRESSED")};o.value&&o.pressed&&o.unpressed?n.buttonMeshes[this._mapping.buttons[t]]=o:p.a.Warn("Missing button submesh under mesh with name: "+r+"(VALUE: "+!!o.value+", PRESSED: "+!!o.pressed+", UNPRESSED:"+!!o.unpressed+")")}else p.a.Warn("Missing button mesh with name: "+r)}else p.a.Log("Skipping unknown button at index: "+t+" with mapped name: "+this._mapping.buttons[t])}for(t=0;t<this._mapping.axisMeshNames.length;t++){var a=this._mapping.axisMeshNames[t];if(a){var s=l(e,a);if(s){var u={index:t,value:c(s,"VALUE"),min:c(s,"MIN"),max:c(s,"MAX")};u.value&&u.min&&u.max?n.axisMeshes[t]=u:p.a.Warn("Missing axis submesh under mesh with name: "+a+"(VALUE: "+!!u.value+", MIN: "+!!u.min+", MAX:"+!!u.max+")")}else p.a.Warn("Missing axis mesh with name: "+a)}else p.a.Log("Skipping unknown axis at index: "+t)}return n.pointingPoseNode=l(e,this._mapping.pointingPoseMeshName),n.pointingPoseNode?this._pointingPoseNode=n.pointingPoseNode:p.a.Warn("Missing pointing pose mesh with name: "+this._mapping.pointingPoseMeshName),n;function l(e,t){return e.getChildren(function(e){return e.name===t},!1)[0]}function c(e,t){return e.getChildren(function(e){return e.name==t},!0)[0]}},t.prototype.getForwardRay=function(t){if(void 0===t&&(t=100),!this._loadedMeshInfo||!this._loadedMeshInfo.pointingPoseNode)return e.prototype.getForwardRay.call(this,t);var n=this._loadedMeshInfo.pointingPoseNode.getWorldMatrix(),r=n.getTranslation(),i=new o.x(0,0,-1),a=o.x.TransformNormal(i,n),s=o.x.Normalize(a);return new Ot.a(r,s,t)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.onTrackpadChangedObservable.clear()},t.MODEL_BASE_URL="https://controllers.babylonjs.com/microsoft/",t.MODEL_LEFT_FILENAME="left.glb",t.MODEL_RIGHT_FILENAME="right.glb",t.GAMEPAD_ID_PREFIX="Spatial Controller (Spatial Interaction Source) ",t.GAMEPAD_ID_PATTERN=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,t}(gn);It._ControllerFactories.push({canCreate:function(e){return 0===e.id.indexOf(br.GAMEPAD_ID_PREFIX)},create:function(e){return new br(e)}});var Tr=n(58),Er=n(52),xr=n(48),Mr=n(41),Ar=function(e){function t(t,n,r){void 0===n&&(n=o.e.Gray()),void 0===r&&(r=Mr.a.DefaultUtilityLayer);var a=e.call(this,r)||this;a._pointerObserver=null,a.snapDistance=0,a.onSnapObservable=new i.c,a.uniformScaling=!1,a._coloredMaterial=new yn.a("",r.utilityLayerScene),a._coloredMaterial.diffuseColor=n,a._coloredMaterial.specularColor=n.subtract(new o.e(.1,.1,.1));var s=new yn.a("",r.utilityLayerScene);s.diffuseColor=n.add(new o.e(.3,.3,.3));var u=new Fe.a("",r.utilityLayerScene),l=Er.a.CreateBox("yPosMesh",{size:.4},r.utilityLayerScene),c=Rn.a.CreateCylinder("cylinder",{diameterTop:.005,height:.275,diameterBottom:.005,tessellation:96},r.utilityLayerScene);c.material=a._coloredMaterial,u.addChild(l),u.addChild(c),l.scaling.scaleInPlace(.1),l.material=a._coloredMaterial,l.rotation.x=Math.PI/2,l.position.z+=.3,c.position.z+=.1375,c.rotation.x=Math.PI/2,u.lookAt(a._rootMesh.position.add(t)),a._rootMesh.addChild(u),u.scaling.scaleInPlace(1/3),a.dragBehavior=new Le.a({dragAxis:t}),a.dragBehavior.moveAttached=!1,a._rootMesh.addBehavior(a.dragBehavior);var h=0,d=new o.x,f={snapDistance:0};a.dragBehavior.onDragObservable.add(function(e){if(a.attachedMesh){var n=e.dragDistance*(3*a.scaleRatio/a._rootMesh.scaling.length()),r=!1,i=0;a.uniformScaling?(a.attachedMesh.scaling.normalizeToRef(d),d.y<0&&d.scaleInPlace(-1)):d.copyFrom(t),0==a.snapDistance?d.scaleToRef(n,d):(h+=n,Math.abs(h)>a.snapDistance?(i=Math.floor(Math.abs(h)/a.snapDistance),h<0&&(i*=-1),h%=a.snapDistance,d.scaleToRef(a.snapDistance*i,d),r=!0):d.scaleInPlace(0)),a.attachedMesh.scaling.addInPlace(d),r&&(f.snapDistance=a.snapDistance*i,a.onSnapObservable.notifyObservers(f))}}),a._pointerObserver=r.utilityLayerScene.onPointerObservable.add(function(e){if(!a._customMeshSet){var t=e.pickInfo&&-1!=a._rootMesh.getChildMeshes().indexOf(e.pickInfo.pickedMesh)?s:a._coloredMaterial;a._rootMesh.getChildMeshes().forEach(function(e){e.material=t,e.color&&(e.color=t.diffuseColor)})}});var p=r._getSharedGizmoLight();return p.includedOnlyMeshes=p.includedOnlyMeshes.concat(a._rootMesh.getChildMeshes()),a}return l.d(t,e),t.prototype._attachedMeshChanged=function(e){this.dragBehavior&&(this.dragBehavior.enabled=!!e)},t.prototype.dispose=function(){this.onSnapObservable.clear(),this.gizmoLayer.utilityLayerScene.onPointerObservable.remove(this._pointerObserver),this.dragBehavior.detach(),e.prototype.dispose.call(this)},t.prototype.setCustomMesh=function(t,n){var r=this;void 0===n&&(n=!1),e.prototype.setCustomMesh.call(this,t),n&&(this._rootMesh.getChildMeshes().forEach(function(e){e.material=r._coloredMaterial,e.color&&(e.color=r._coloredMaterial.diffuseColor)}),this._customMeshSet=!1)},t}(xr.a),Sr=n(46),Cr=n(40),Pr=function(e){function t(t,n){void 0===t&&(t=o.e.Gray()),void 0===n&&(n=Mr.a.DefaultKeepDepthUtilityLayer);var r=e.call(this,n)||this;r._boundingDimensions=new o.x(1,1,1),r._renderObserver=null,r._pointerObserver=null,r._scaleDragSpeed=.2,r._tmpQuaternion=new o.q,r._tmpVector=new o.x(0,0,0),r._tmpRotationMatrix=new o.j,r.ignoreChildren=!1,r.includeChildPredicate=null,r.rotationSphereSize=.1,r.scaleBoxSize=.1,r.fixedDragMeshScreenSize=!1,r.fixedDragMeshScreenSizeDistanceFactor=10,r.onDragStartObservable=new i.c,r.onScaleBoxDragObservable=new i.c,r.onScaleBoxDragEndObservable=new i.c,r.onRotationSphereDragObservable=new i.c,r.onRotationSphereDragEndObservable=new i.c,r.scalePivot=null,r._existingMeshScale=new o.x,r._dragMesh=null,r.pointerDragBehavior=new Le.a,r._updateScale=!1,r._anchorMesh=new Fe.a("anchor",n.utilityLayerScene),r.coloredMaterial=new yn.a("",n.utilityLayerScene),r.coloredMaterial.disableLighting=!0,r.hoverColoredMaterial=new yn.a("",n.utilityLayerScene),r.hoverColoredMaterial.disableLighting=!0,r._lineBoundingBox=new Fe.a("",n.utilityLayerScene),r._lineBoundingBox.rotationQuaternion=new o.q;var a=[];a.push(Cr.a.CreateLines("lines",{points:[new o.x(0,0,0),new o.x(r._boundingDimensions.x,0,0)]},n.utilityLayerScene)),a.push(Cr.a.CreateLines("lines",{points:[new o.x(0,0,0),new o.x(0,r._boundingDimensions.y,0)]},n.utilityLayerScene)),a.push(Cr.a.CreateLines("lines",{points:[new o.x(0,0,0),new o.x(0,0,r._boundingDimensions.z)]},n.utilityLayerScene)),a.push(Cr.a.CreateLines("lines",{points:[new o.x(r._boundingDimensions.x,0,0),new o.x(r._boundingDimensions.x,r._boundingDimensions.y,0)]},n.utilityLayerScene)),a.push(Cr.a.CreateLines("lines",{points:[new o.x(r._boundingDimensions.x,0,0),new o.x(r._boundingDimensions.x,0,r._boundingDimensions.z)]},n.utilityLayerScene)),a.push(Cr.a.CreateLines("lines",{points:[new o.x(0,r._boundingDimensions.y,0),new o.x(r._boundingDimensions.x,r._boundingDimensions.y,0)]},n.utilityLayerScene)),a.push(Cr.a.CreateLines("lines",{points:[new o.x(0,r._boundingDimensions.y,0),new o.x(0,r._boundingDimensions.y,r._boundingDimensions.z)]},n.utilityLayerScene)),a.push(Cr.a.CreateLines("lines",{points:[new o.x(0,0,r._boundingDimensions.z),new o.x(r._boundingDimensions.x,0,r._boundingDimensions.z)]},n.utilityLayerScene)),a.push(Cr.a.CreateLines("lines",{points:[new o.x(0,0,r._boundingDimensions.z),new o.x(0,r._boundingDimensions.y,r._boundingDimensions.z)]},n.utilityLayerScene)),a.push(Cr.a.CreateLines("lines",{points:[new o.x(r._boundingDimensions.x,r._boundingDimensions.y,r._boundingDimensions.z),new o.x(0,r._boundingDimensions.y,r._boundingDimensions.z)]},n.utilityLayerScene)),a.push(Cr.a.CreateLines("lines",{points:[new o.x(r._boundingDimensions.x,r._boundingDimensions.y,r._boundingDimensions.z),new o.x(r._boundingDimensions.x,0,r._boundingDimensions.z)]},n.utilityLayerScene)),a.push(Cr.a.CreateLines("lines",{points:[new o.x(r._boundingDimensions.x,r._boundingDimensions.y,r._boundingDimensions.z),new o.x(r._boundingDimensions.x,r._boundingDimensions.y,0)]},n.utilityLayerScene)),a.forEach(function(e){e.color=t,e.position.addInPlace(new o.x(-r._boundingDimensions.x/2,-r._boundingDimensions.y/2,-r._boundingDimensions.z/2)),e.isPickable=!1,r._lineBoundingBox.addChild(e)}),r._rootMesh.addChild(r._lineBoundingBox),r.setColor(t),r._rotateSpheresParent=new Fe.a("",n.utilityLayerScene),r._rotateSpheresParent.rotationQuaternion=new o.q;for(var s=function(e){var t=Sr.a.CreateSphere("",{diameter:1},n.utilityLayerScene);t.rotationQuaternion=new o.q,t.material=u.coloredMaterial,(d=new Le.a({})).moveAttached=!1,d.updateDragPlane=!1,t.addBehavior(d);var i=new o.x(1,0,0),a=0;d.onDragStartObservable.add(function(){i.copyFrom(t.forward),a=0}),d.onDragObservable.add(function(t){if(r.onRotationSphereDragObservable.notifyObservers({}),r.attachedMesh){var n=r.attachedMesh.parent;if(n&&n.scaling&&n.scaling.isNonUniformWithinEpsilon(.001))return void p.a.Warn("BoundingBoxGizmo controls are not supported on child meshes with non-uniform parent scaling");Be.a._RemoveAndStorePivotPoint(r.attachedMesh);var s=i,u=t.dragPlaneNormal.scale(o.x.Dot(t.dragPlaneNormal,s)),l=s.subtract(u).normalizeToNew(),c=o.x.Dot(l,t.delta)<0?Math.abs(t.delta.length()):-Math.abs(t.delta.length());c=c/r._boundingDimensions.length()*r._anchorMesh.scaling.length(),r.attachedMesh.rotationQuaternion||(r.attachedMesh.rotationQuaternion=o.q.RotationYawPitchRoll(r.attachedMesh.rotation.y,r.attachedMesh.rotation.x,r.attachedMesh.rotation.z)),r._anchorMesh.rotationQuaternion||(r._anchorMesh.rotationQuaternion=o.q.RotationYawPitchRoll(r._anchorMesh.rotation.y,r._anchorMesh.rotation.x,r._anchorMesh.rotation.z)),a+=c,Math.abs(a)<=2*Math.PI&&(e>=8?o.q.RotationYawPitchRollToRef(0,0,c,r._tmpQuaternion):e>=4?o.q.RotationYawPitchRollToRef(c,0,0,r._tmpQuaternion):o.q.RotationYawPitchRollToRef(0,c,0,r._tmpQuaternion),r._anchorMesh.addChild(r.attachedMesh),r._anchorMesh.rotationQuaternion.multiplyToRef(r._tmpQuaternion,r._anchorMesh.rotationQuaternion),r._anchorMesh.removeChild(r.attachedMesh),r.attachedMesh.setParent(n)),r.updateBoundingBox(),Be.a._RestorePivotPoint(r.attachedMesh)}r._updateDummy()}),d.onDragStartObservable.add(function(){r.onDragStartObservable.notifyObservers({}),r._selectNode(t)}),d.onDragEndObservable.add(function(){r.onRotationSphereDragEndObservable.notifyObservers({}),r._selectNode(null),r._updateDummy()}),u._rotateSpheresParent.addChild(t)},u=this,l=0;l<12;l++)s(l);r._rootMesh.addChild(r._rotateSpheresParent),r._scaleBoxesParent=new Fe.a("",n.utilityLayerScene),r._scaleBoxesParent.rotationQuaternion=new o.q;for(var c=0;c<2;c++)for(var h=0;h<2;h++)for(var d,f=function(){var e=Er.a.CreateBox("",{size:1},n.utilityLayerScene);e.material=_.coloredMaterial;var t=new o.x(0==c?-1:1,0==h?-1:1,0==m?-1:1);(d=new Le.a({dragAxis:t})).moveAttached=!1,e.addBehavior(d),d.onDragObservable.add(function(t){if(r.onScaleBoxDragObservable.notifyObservers({}),r.attachedMesh){var n=r.attachedMesh.parent;if(n&&n.scaling&&n.scaling.isNonUniformWithinEpsilon(.001))return void p.a.Warn("BoundingBoxGizmo controls are not supported on child meshes with non-uniform parent scaling");Be.a._RemoveAndStorePivotPoint(r.attachedMesh);var i=t.dragDistance/r._boundingDimensions.length()*r._anchorMesh.scaling.length(),a=new o.x(i,i,i);a.scaleInPlace(r._scaleDragSpeed),r.updateBoundingBox(),r.scalePivot?(r.attachedMesh.getWorldMatrix().getRotationMatrixToRef(r._tmpRotationMatrix),r._boundingDimensions.scaleToRef(.5,r._tmpVector),o.x.TransformCoordinatesToRef(r._tmpVector,r._tmpRotationMatrix,r._tmpVector),r._anchorMesh.position.subtractInPlace(r._tmpVector),r._boundingDimensions.multiplyToRef(r.scalePivot,r._tmpVector),o.x.TransformCoordinatesToRef(r._tmpVector,r._tmpRotationMatrix,r._tmpVector),r._anchorMesh.position.addInPlace(r._tmpVector)):(e.absolutePosition.subtractToRef(r._anchorMesh.position,r._tmpVector),r._anchorMesh.position.subtractInPlace(r._tmpVector)),r._anchorMesh.addChild(r.attachedMesh),r._anchorMesh.scaling.addInPlace(a),(r._anchorMesh.scaling.x<0||r._anchorMesh.scaling.y<0||r._anchorMesh.scaling.z<0)&&r._anchorMesh.scaling.subtractInPlace(a),r._anchorMesh.removeChild(r.attachedMesh),r.attachedMesh.setParent(n),Be.a._RestorePivotPoint(r.attachedMesh)}r._updateDummy()}),d.onDragStartObservable.add(function(){r.onDragStartObservable.notifyObservers({}),r._selectNode(e)}),d.onDragEndObservable.add(function(){r.onScaleBoxDragEndObservable.notifyObservers({}),r._selectNode(null),r._updateDummy()}),_._scaleBoxesParent.addChild(e)},_=this,m=0;m<2;m++)f();r._rootMesh.addChild(r._scaleBoxesParent);var g=new Array;return r._pointerObserver=n.utilityLayerScene.onPointerObservable.add(function(e){g[e.event.pointerId]?e.pickInfo&&e.pickInfo.pickedMesh!=g[e.event.pointerId]&&(g[e.event.pointerId].material=r.coloredMaterial,delete g[e.event.pointerId]):r._rotateSpheresParent.getChildMeshes().concat(r._scaleBoxesParent.getChildMeshes()).forEach(function(t){e.pickInfo&&e.pickInfo.pickedMesh==t&&(g[e.event.pointerId]=t,t.material=r.hoverColoredMaterial)})}),r._renderObserver=r.gizmoLayer.originalScene.onBeforeRenderObservable.add(function(){r.attachedMesh&&!r._existingMeshScale.equals(r.attachedMesh.scaling)?r.updateBoundingBox():r.fixedDragMeshScreenSize&&(r._updateRotationSpheres(),r._updateScaleBoxes()),r._dragMesh&&r.attachedMesh&&r.pointerDragBehavior.dragging&&(r._lineBoundingBox.position.rotateByQuaternionToRef(r._rootMesh.rotationQuaternion,r._tmpVector),r.attachedMesh.setAbsolutePosition(r._dragMesh.position.add(r._tmpVector.scale(-1))))}),r.updateBoundingBox(),r}return l.d(t,e),t.prototype.setColor=function(e){this.coloredMaterial.emissiveColor=e,this.hoverColoredMaterial.emissiveColor=e.clone().add(new o.e(.3,.3,.3)),this._lineBoundingBox.getChildren().forEach(function(t){t.color&&(t.color=e)})},t.prototype._attachedMeshChanged=function(e){var t=this;if(e){Be.a._RemoveAndStorePivotPoint(e);var n=e.parent;this._anchorMesh.addChild(e),this._anchorMesh.removeChild(e),e.setParent(n),Be.a._RestorePivotPoint(e),this.updateBoundingBox(),e.getChildMeshes(!1).forEach(function(e){e.markAsDirty("scaling")}),this.gizmoLayer.utilityLayerScene.onAfterRenderObservable.addOnce(function(){t._updateDummy()})}},t.prototype._selectNode=function(e){this._rotateSpheresParent.getChildMeshes().concat(this._scaleBoxesParent.getChildMeshes()).forEach(function(t){t.isVisible=!e||t==e})},t.prototype.updateBoundingBox=function(){if(this.attachedMesh){Be.a._RemoveAndStorePivotPoint(this.attachedMesh);var e=this.attachedMesh.parent;this.attachedMesh.setParent(null);var t=null;this.attachedMesh.skeleton&&(t=this.attachedMesh.skeleton.overrideMesh,this.attachedMesh.skeleton.overrideMesh=null),this._update(),this.attachedMesh.rotationQuaternion||(this.attachedMesh.rotationQuaternion=o.q.RotationYawPitchRoll(this.attachedMesh.rotation.y,this.attachedMesh.rotation.x,this.attachedMesh.rotation.z)),this._anchorMesh.rotationQuaternion||(this._anchorMesh.rotationQuaternion=o.q.RotationYawPitchRoll(this._anchorMesh.rotation.y,this._anchorMesh.rotation.x,this._anchorMesh.rotation.z)),this._anchorMesh.rotationQuaternion.copyFrom(this.attachedMesh.rotationQuaternion),this._tmpQuaternion.copyFrom(this.attachedMesh.rotationQuaternion),this._tmpVector.copyFrom(this.attachedMesh.position),this.attachedMesh.rotationQuaternion.set(0,0,0,1),this.attachedMesh.position.set(0,0,0);var n=this.attachedMesh.getHierarchyBoundingVectors(!this.ignoreChildren,this.includeChildPredicate);n.max.subtractToRef(n.min,this._boundingDimensions),this._lineBoundingBox.scaling.copyFrom(this._boundingDimensions),this._lineBoundingBox.position.set((n.max.x+n.min.x)/2,(n.max.y+n.min.y)/2,(n.max.z+n.min.z)/2),this._rotateSpheresParent.position.copyFrom(this._lineBoundingBox.position),this._scaleBoxesParent.position.copyFrom(this._lineBoundingBox.position),this._lineBoundingBox.computeWorldMatrix(),this._anchorMesh.position.copyFrom(this._lineBoundingBox.absolutePosition),this.attachedMesh.rotationQuaternion.copyFrom(this._tmpQuaternion),this.attachedMesh.position.copyFrom(this._tmpVector),this.attachedMesh.setParent(e),this.attachedMesh.skeleton&&(this.attachedMesh.skeleton.overrideMesh=t)}this._updateRotationSpheres(),this._updateScaleBoxes(),this.attachedMesh&&(this._existingMeshScale.copyFrom(this.attachedMesh.scaling),Be.a._RestorePivotPoint(this.attachedMesh))},t.prototype._updateRotationSpheres=function(){for(var e=this._rotateSpheresParent.getChildMeshes(),t=0;t<3;t++)for(var n=0;n<2;n++)for(var r=0;r<2;r++){var i=4*t+2*n+r;if(0==t&&(e[i].position.set(this._boundingDimensions.x/2,this._boundingDimensions.y*n,this._boundingDimensions.z*r),e[i].position.addInPlace(new o.x(-this._boundingDimensions.x/2,-this._boundingDimensions.y/2,-this._boundingDimensions.z/2)),e[i].lookAt(o.x.Cross(e[i].position.normalizeToNew(),o.x.Right()).normalizeToNew().add(e[i].position))),1==t&&(e[i].position.set(this._boundingDimensions.x*n,this._boundingDimensions.y/2,this._boundingDimensions.z*r),e[i].position.addInPlace(new o.x(-this._boundingDimensions.x/2,-this._boundingDimensions.y/2,-this._boundingDimensions.z/2)),e[i].lookAt(o.x.Cross(e[i].position.normalizeToNew(),o.x.Up()).normalizeToNew().add(e[i].position))),2==t&&(e[i].position.set(this._boundingDimensions.x*n,this._boundingDimensions.y*r,this._boundingDimensions.z/2),e[i].position.addInPlace(new o.x(-this._boundingDimensions.x/2,-this._boundingDimensions.y/2,-this._boundingDimensions.z/2)),e[i].lookAt(o.x.Cross(e[i].position.normalizeToNew(),o.x.Forward()).normalizeToNew().add(e[i].position))),this.fixedDragMeshScreenSize&&this.gizmoLayer.utilityLayerScene.activeCamera){e[i].absolutePosition.subtractToRef(this.gizmoLayer.utilityLayerScene.activeCamera.position,this._tmpVector);var a=this.rotationSphereSize*this._tmpVector.length()/this.fixedDragMeshScreenSizeDistanceFactor;e[i].scaling.set(a,a,a)}else e[i].scaling.set(this.rotationSphereSize,this.rotationSphereSize,this.rotationSphereSize)}},t.prototype._updateScaleBoxes=function(){for(var e=this._scaleBoxesParent.getChildMeshes(),t=0;t<2;t++)for(var n=0;n<2;n++)for(var r=0;r<2;r++){var i=4*t+2*n+r;if(e[i])if(e[i].position.set(this._boundingDimensions.x*t,this._boundingDimensions.y*n,this._boundingDimensions.z*r),e[i].position.addInPlace(new o.x(-this._boundingDimensions.x/2,-this._boundingDimensions.y/2,-this._boundingDimensions.z/2)),this.fixedDragMeshScreenSize&&this.gizmoLayer.utilityLayerScene.activeCamera){e[i].absolutePosition.subtractToRef(this.gizmoLayer.utilityLayerScene.activeCamera.position,this._tmpVector);var a=this.scaleBoxSize*this._tmpVector.length()/this.fixedDragMeshScreenSizeDistanceFactor;e[i].scaling.set(a,a,a)}else e[i].scaling.set(this.scaleBoxSize,this.scaleBoxSize,this.scaleBoxSize)}},t.prototype.setEnabledRotationAxis=function(e){this._rotateSpheresParent.getChildMeshes().forEach(function(t,n){t.setEnabled(n<4?-1!=e.indexOf("x"):n<8?-1!=e.indexOf("y"):-1!=e.indexOf("z"))})},t.prototype.setEnabledScaling=function(e){this._scaleBoxesParent.getChildMeshes().forEach(function(t,n){t.setEnabled(e)})},t.prototype._updateDummy=function(){this._dragMesh&&(this._dragMesh.position.copyFrom(this._lineBoundingBox.getAbsolutePosition()),this._dragMesh.scaling.copyFrom(this._lineBoundingBox.scaling),this._dragMesh.rotationQuaternion.copyFrom(this._rootMesh.rotationQuaternion))},t.prototype.enableDragBehavior=function(){this._dragMesh=fe.a.CreateBox("dummy",1,this.gizmoLayer.utilityLayerScene),this._dragMesh.visibility=0,this._dragMesh.rotationQuaternion=new o.q,this.pointerDragBehavior.useObjectOrienationForDragging=!1,this._dragMesh.addBehavior(this.pointerDragBehavior)},t.prototype.dispose=function(){this.gizmoLayer.utilityLayerScene.onPointerObservable.remove(this._pointerObserver),this.gizmoLayer.originalScene.onBeforeRenderObservable.remove(this._renderObserver),this._lineBoundingBox.dispose(),this._rotateSpheresParent.dispose(),this._scaleBoxesParent.dispose(),this._dragMesh&&this._dragMesh.dispose(),e.prototype.dispose.call(this)},t.MakeNotPickableAndWrapInBoundingBox=function(e){var t=function(e){e.isPickable=!1,e.getChildMeshes().forEach(function(e){t(e)})};t(e),e.rotationQuaternion||(e.rotationQuaternion=o.q.RotationYawPitchRoll(e.rotation.y,e.rotation.x,e.rotation.z));var n=e.position.clone(),r=e.rotationQuaternion.clone();e.rotationQuaternion.set(0,0,0,1),e.position.set(0,0,0);var i=Er.a.CreateBox("box",{size:1},e.getScene()),a=e.getHierarchyBoundingVectors();return a.max.subtractToRef(a.min,i.scaling),0===i.scaling.y&&(i.scaling.y=o.h),0===i.scaling.x&&(i.scaling.x=o.h),0===i.scaling.z&&(i.scaling.z=o.h),i.position.set((a.max.x+a.min.x)/2,(a.max.y+a.min.y)/2,(a.max.z+a.min.z)/2),e.addChild(i),e.rotationQuaternion.copyFrom(r),e.position.copyFrom(n),e.removeChild(i),i.addChild(e),i.visibility=0,i},t.prototype.setCustomMesh=function(e){p.a.Error("Custom meshes are not supported on this gizmo")},t}(xr.a),Rr=function(e){function t(t,n,r,a){void 0===n&&(n=o.e.Gray()),void 0===r&&(r=Mr.a.DefaultUtilityLayer),void 0===a&&(a=32);var s=e.call(this,r)||this;s._pointerObserver=null,s.snapDistance=0,s.onSnapObservable=new i.c;var u=new yn.a("",r.utilityLayerScene);u.diffuseColor=n,u.specularColor=n.subtract(new o.e(.1,.1,.1));var l=new yn.a("",r.utilityLayerScene);l.diffuseColor=n.add(new o.e(.3,.3,.3));var c=new Fe.a("",r.utilityLayerScene),h=fe.a.CreateTorus("",.6,.03,a,r.utilityLayerScene);h.visibility=0;var d=fe.a.CreateTorus("",.6,.005,a,r.utilityLayerScene);d.material=u,d.rotation.x=Math.PI/2,h.rotation.x=Math.PI/2,c.addChild(d),c.addChild(h),c.lookAt(s._rootMesh.position.add(t)),s._rootMesh.addChild(c),c.scaling.scaleInPlace(1/3),s.dragBehavior=new Le.a({dragPlaneNormal:t}),s.dragBehavior.moveAttached=!1,s.dragBehavior.maxDragAngle=9*Math.PI/20,s.dragBehavior._useAlternatePickedPointAboveMaxDragAngle=!0,s._rootMesh.addBehavior(s.dragBehavior);var f=new o.x;s.dragBehavior.onDragStartObservable.add(function(e){s.attachedMesh&&f.copyFrom(e.dragPlanePoint)});var p=new o.j,_=new o.x,m=new o.x,g={snapDistance:0},v=0,y=new o.j,b=new o.x,T=new o.q;s.dragBehavior.onDragObservable.add(function(e){if(s.attachedMesh){s.attachedMesh.rotationQuaternion||(s.attachedMesh.rotationQuaternion=o.q.RotationYawPitchRoll(s.attachedMesh.rotation.y,s.attachedMesh.rotation.x,s.attachedMesh.rotation.z));var n=s.attachedMesh.parent;n&&s.attachedMesh.setParent(null);var i=e.dragPlanePoint.subtract(s.attachedMesh.absolutePosition).normalize(),a=f.subtract(s.attachedMesh.absolutePosition).normalize(),u=o.x.Cross(i,a),l=o.x.Dot(i,a),c=Math.atan2(u.length(),l);if(_.copyFrom(t),m.copyFrom(t),s.updateGizmoRotationToMatchAttachedMesh&&(s.attachedMesh.rotationQuaternion.toRotationMatrix(p),m=o.x.TransformCoordinates(_,p)),r.utilityLayerScene.activeCamera){var h=r.utilityLayerScene.activeCamera.position.subtract(s.attachedMesh.position);o.x.Dot(h,m)>0&&(_.scaleInPlace(-1),m.scaleInPlace(-1))}o.x.Dot(m,u)>0&&(c=-c);var d=!1;if(0!=s.snapDistance)if(v+=c,Math.abs(v)>s.snapDistance){var E=Math.floor(Math.abs(v)/s.snapDistance);v<0&&(E*=-1),v%=s.snapDistance,c=s.snapDistance*E,d=!0}else c=0;y.reset(),s.attachedMesh.parent&&(s.attachedMesh.parent.computeWorldMatrix().invertToRef(y),y.getRotationMatrixToRef(y),o.x.TransformCoordinatesToRef(_,y,_));var x=Math.sin(c/2);T.set(_.x*x,_.y*x,_.z*x,Math.cos(c/2)),y.determinant()>0&&(T.toEulerAnglesToRef(b),o.q.RotationYawPitchRollToRef(b.y,-b.x,-b.z,T)),s.updateGizmoRotationToMatchAttachedMesh?s.attachedMesh.rotationQuaternion.multiplyToRef(T,s.attachedMesh.rotationQuaternion):T.multiplyToRef(s.attachedMesh.rotationQuaternion,s.attachedMesh.rotationQuaternion),f.copyFrom(e.dragPlanePoint),d&&(g.snapDistance=c,s.onSnapObservable.notifyObservers(g)),n&&s.attachedMesh.setParent(n)}}),s._pointerObserver=r.utilityLayerScene.onPointerObservable.add(function(e){if(!s._customMeshSet){var t=e.pickInfo&&-1!=s._rootMesh.getChildMeshes().indexOf(e.pickInfo.pickedMesh)?l:u;s._rootMesh.getChildMeshes().forEach(function(e){e.material=t,e.color&&(e.color=t.diffuseColor)})}});var E=r._getSharedGizmoLight();return E.includedOnlyMeshes=E.includedOnlyMeshes.concat(s._rootMesh.getChildMeshes(!1)),s}return l.d(t,e),t.prototype._attachedMeshChanged=function(e){this.dragBehavior&&(this.dragBehavior.enabled=!!e)},t.prototype.dispose=function(){this.onSnapObservable.clear(),this.gizmoLayer.utilityLayerScene.onPointerObservable.remove(this._pointerObserver),this.dragBehavior.detach(),e.prototype.dispose.call(this)},t}(xr.a),Dr=function(e){function t(t,n){void 0===t&&(t=Mr.a.DefaultUtilityLayer),void 0===n&&(n=32);var r=e.call(this,t)||this;return r.onDragStartObservable=new i.c,r.onDragEndObservable=new i.c,r.xGizmo=new Rr(new o.x(1,0,0),o.e.Red().scale(.5),t,n),r.yGizmo=new Rr(new o.x(0,1,0),o.e.Green().scale(.5),t,n),r.zGizmo=new Rr(new o.x(0,0,1),o.e.Blue().scale(.5),t,n),[r.xGizmo,r.yGizmo,r.zGizmo].forEach(function(e){e.dragBehavior.onDragStartObservable.add(function(){r.onDragStartObservable.notifyObservers({})}),e.dragBehavior.onDragEndObservable.add(function(){r.onDragEndObservable.notifyObservers({})})}),r.attachedMesh=null,r}return l.d(t,e),Object.defineProperty(t.prototype,"attachedMesh",{get:function(){return this.xGizmo.attachedMesh},set:function(e){this.xGizmo&&(this.xGizmo.attachedMesh=e,this.yGizmo.attachedMesh=e,this.zGizmo.attachedMesh=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateGizmoRotationToMatchAttachedMesh",{get:function(){return this.xGizmo.updateGizmoRotationToMatchAttachedMesh},set:function(e){this.xGizmo&&(this.xGizmo.updateGizmoRotationToMatchAttachedMesh=e,this.yGizmo.updateGizmoRotationToMatchAttachedMesh=e,this.zGizmo.updateGizmoRotationToMatchAttachedMesh=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"snapDistance",{get:function(){return this.xGizmo.snapDistance},set:function(e){this.xGizmo&&(this.xGizmo.snapDistance=e,this.yGizmo.snapDistance=e,this.zGizmo.snapDistance=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleRatio",{get:function(){return this.xGizmo.scaleRatio},set:function(e){this.xGizmo&&(this.xGizmo.scaleRatio=e,this.yGizmo.scaleRatio=e,this.zGizmo.scaleRatio=e)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.xGizmo.dispose(),this.yGizmo.dispose(),this.zGizmo.dispose(),this.onDragStartObservable.clear(),this.onDragEndObservable.clear()},t.prototype.setCustomMesh=function(e){p.a.Error("Custom meshes are not supported on this gizmo, please set the custom meshes on the gizmos contained within this one (gizmo.xGizmo, gizmo.yGizmo, gizmo.zGizmo)")},t}(xr.a),Or=function(e){function t(t){void 0===t&&(t=Mr.a.DefaultUtilityLayer);var n=e.call(this,t)||this;return n.onDragStartObservable=new i.c,n.onDragEndObservable=new i.c,n.xGizmo=new Tr.a(new o.x(1,0,0),o.e.Red().scale(.5),t),n.yGizmo=new Tr.a(new o.x(0,1,0),o.e.Green().scale(.5),t),n.zGizmo=new Tr.a(new o.x(0,0,1),o.e.Blue().scale(.5),t),[n.xGizmo,n.yGizmo,n.zGizmo].forEach(function(e){e.dragBehavior.onDragStartObservable.add(function(){n.onDragStartObservable.notifyObservers({})}),e.dragBehavior.onDragEndObservable.add(function(){n.onDragEndObservable.notifyObservers({})})}),n.attachedMesh=null,n}return l.d(t,e),Object.defineProperty(t.prototype,"attachedMesh",{get:function(){return this.xGizmo.attachedMesh},set:function(e){this.xGizmo&&(this.xGizmo.attachedMesh=e,this.yGizmo.attachedMesh=e,this.zGizmo.attachedMesh=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateGizmoRotationToMatchAttachedMesh",{get:function(){return this.xGizmo.updateGizmoRotationToMatchAttachedMesh},set:function(e){this.xGizmo&&(this.xGizmo.updateGizmoRotationToMatchAttachedMesh=e,this.yGizmo.updateGizmoRotationToMatchAttachedMesh=e,this.zGizmo.updateGizmoRotationToMatchAttachedMesh=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"snapDistance",{get:function(){return this.xGizmo.snapDistance},set:function(e){this.xGizmo&&(this.xGizmo.snapDistance=e,this.yGizmo.snapDistance=e,this.zGizmo.snapDistance=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleRatio",{get:function(){return this.xGizmo.scaleRatio},set:function(e){this.xGizmo&&(this.xGizmo.scaleRatio=e,this.yGizmo.scaleRatio=e,this.zGizmo.scaleRatio=e)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.xGizmo.dispose(),this.yGizmo.dispose(),this.zGizmo.dispose(),this.onDragStartObservable.clear(),this.onDragEndObservable.clear()},t.prototype.setCustomMesh=function(e){p.a.Error("Custom meshes are not supported on this gizmo, please set the custom meshes on the gizmos contained within this one (gizmo.xGizmo, gizmo.yGizmo, gizmo.zGizmo)")},t}(xr.a);xn.a.CreatePolyhedron=function(e){var t=[];t[0]={vertex:[[0,0,1.732051],[1.632993,0,-.5773503],[-.8164966,1.414214,-.5773503],[-.8164966,-1.414214,-.5773503]],face:[[0,1,2],[0,2,3],[0,3,1],[1,3,2]]},t[1]={vertex:[[0,0,1.414214],[1.414214,0,0],[0,1.414214,0],[-1.414214,0,0],[0,-1.414214,0],[0,0,-1.414214]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,1],[1,4,5],[1,5,2],[2,5,3],[3,5,4]]},t[2]={vertex:[[0,0,1.070466],[.7136442,0,.7978784],[-.3568221,.618034,.7978784],[-.3568221,-.618034,.7978784],[.7978784,.618034,.3568221],[.7978784,-.618034,.3568221],[-.9341724,.381966,.3568221],[.1362939,1,.3568221],[.1362939,-1,.3568221],[-.9341724,-.381966,.3568221],[.9341724,.381966,-.3568221],[.9341724,-.381966,-.3568221],[-.7978784,.618034,-.3568221],[-.1362939,1,-.3568221],[-.1362939,-1,-.3568221],[-.7978784,-.618034,-.3568221],[.3568221,.618034,-.7978784],[.3568221,-.618034,-.7978784],[-.7136442,0,-.7978784],[0,0,-1.070466]],face:[[0,1,4,7,2],[0,2,6,9,3],[0,3,8,5,1],[1,5,11,10,4],[2,7,13,12,6],[3,9,15,14,8],[4,10,16,13,7],[5,8,14,17,11],[6,12,18,15,9],[10,11,17,19,16],[12,13,16,19,18],[14,15,18,19,17]]},t[3]={vertex:[[0,0,1.175571],[1.051462,0,.5257311],[.3249197,1,.5257311],[-.8506508,.618034,.5257311],[-.8506508,-.618034,.5257311],[.3249197,-1,.5257311],[.8506508,.618034,-.5257311],[.8506508,-.618034,-.5257311],[-.3249197,1,-.5257311],[-1.051462,0,-.5257311],[-.3249197,-1,-.5257311],[0,0,-1.175571]],face:[[0,1,2],[0,2,3],[0,3,4],[0,4,5],[0,5,1],[1,5,7],[1,7,6],[1,6,2],[2,6,8],[2,8,3],[3,8,9],[3,9,4],[4,9,10],[4,10,5],[5,10,7],[6,7,11],[6,11,8],[7,10,11],[8,11,9],[9,11,10]]},t[4]={vertex:[[0,0,1.070722],[.7148135,0,.7971752],[-.104682,.7071068,.7971752],[-.6841528,.2071068,.7971752],[-.104682,-.7071068,.7971752],[.6101315,.7071068,.5236279],[1.04156,.2071068,.1367736],[.6101315,-.7071068,.5236279],[-.3574067,1,.1367736],[-.7888348,-.5,.5236279],[-.9368776,.5,.1367736],[-.3574067,-1,.1367736],[.3574067,1,-.1367736],[.9368776,-.5,-.1367736],[.7888348,.5,-.5236279],[.3574067,-1,-.1367736],[-.6101315,.7071068,-.5236279],[-1.04156,-.2071068,-.1367736],[-.6101315,-.7071068,-.5236279],[.104682,.7071068,-.7971752],[.6841528,-.2071068,-.7971752],[.104682,-.7071068,-.7971752],[-.7148135,0,-.7971752],[0,0,-1.070722]],face:[[0,2,3],[1,6,5],[4,9,11],[7,15,13],[8,16,10],[12,14,19],[17,22,18],[20,21,23],[0,1,5,2],[0,3,9,4],[0,4,7,1],[1,7,13,6],[2,5,12,8],[2,8,10,3],[3,10,17,9],[4,11,15,7],[5,6,14,12],[6,13,20,14],[8,12,19,16],[9,17,18,11],[10,16,22,17],[11,18,21,15],[13,15,21,20],[14,20,23,19],[16,19,23,22],[18,22,23,21]]},t[5]={vertex:[[0,0,1.322876],[1.309307,0,.1889822],[-.9819805,.8660254,.1889822],[.1636634,-1.299038,.1889822],[.3273268,.8660254,-.9449112],[-.8183171,-.4330127,-.9449112]],face:[[0,3,1],[2,4,5],[0,1,4,2],[0,2,5,3],[1,3,5,4]]},t[6]={vertex:[[0,0,1.159953],[1.013464,0,.5642542],[-.3501431,.9510565,.5642542],[-.7715208,-.6571639,.5642542],[.6633206,.9510565,-.03144481],[.8682979,-.6571639,-.3996071],[-1.121664,.2938926,-.03144481],[-.2348831,-1.063314,-.3996071],[.5181548,.2938926,-.9953061],[-.5850262,-.112257,-.9953061]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,9,7],[5,7,9,8],[0,3,7,5,1],[2,4,8,9,6]]},t[7]={vertex:[[0,0,1.118034],[.8944272,0,.6708204],[-.2236068,.8660254,.6708204],[-.7826238,-.4330127,.6708204],[.6708204,.8660254,.2236068],[1.006231,-.4330127,-.2236068],[-1.006231,.4330127,.2236068],[-.6708204,-.8660254,-.2236068],[.7826238,.4330127,-.6708204],[.2236068,-.8660254,-.6708204],[-.8944272,0,-.6708204],[0,0,-1.118034]],face:[[0,1,4,2],[0,2,6,3],[1,5,8,4],[3,6,10,7],[5,9,11,8],[7,10,11,9],[0,3,7,9,5,1],[2,4,8,11,10,6]]},t[8]={vertex:[[-.729665,.670121,.319155],[-.655235,-.29213,-.754096],[-.093922,-.607123,.537818],[.702196,.595691,.485187],[.776626,-.36656,-.588064]],face:[[1,4,2],[0,1,2],[3,0,2],[4,3,2],[4,1,0,3]]},t[9]={vertex:[[-.868849,-.100041,.61257],[-.329458,.976099,.28078],[-.26629,-.013796,-.477654],[-.13392,-1.034115,.229829],[.738834,.707117,-.307018],[.859683,-.535264,-.338508]],face:[[3,0,2],[5,3,2],[4,5,2],[1,4,2],[0,1,2],[0,3,5,4,1]]},t[10]={vertex:[[-.610389,.243975,.531213],[-.187812,-.48795,-.664016],[-.187812,.9759,-.664016],[.187812,-.9759,.664016],[.798201,.243975,.132803]],face:[[1,3,0],[3,4,0],[3,1,4],[0,2,1],[0,4,2],[2,4,1]]},t[11]={vertex:[[-1.028778,.392027,-.048786],[-.640503,-.646161,.621837],[-.125162,-.395663,-.540059],[.004683,.888447,-.651988],[.125161,.395663,.540059],[.632925,-.791376,.433102],[1.031672,.157063,-.354165]],face:[[3,2,0],[2,1,0],[2,5,1],[0,4,3],[0,1,4],[4,1,5],[2,3,6],[3,4,6],[5,2,6],[4,5,6]]},t[12]={vertex:[[-.669867,.334933,-.529576],[-.669867,.334933,.529577],[-.4043,1.212901,0],[-.334933,-.669867,-.529576],[-.334933,-.669867,.529577],[.334933,.669867,-.529576],[.334933,.669867,.529577],[.4043,-1.212901,0],[.669867,-.334933,-.529576],[.669867,-.334933,.529577]],face:[[8,9,7],[6,5,2],[3,8,7],[5,0,2],[4,3,7],[0,1,2],[9,4,7],[1,6,2],[9,8,5,6],[8,3,0,5],[3,4,1,0],[4,9,6,1]]},t[13]={vertex:[[-.931836,.219976,-.264632],[-.636706,.318353,.692816],[-.613483,-.735083,-.264632],[-.326545,.979634,0],[-.318353,-.636706,.692816],[-.159176,.477529,-.856368],[.159176,-.477529,-.856368],[.318353,.636706,.692816],[.326545,-.979634,0],[.613482,.735082,-.264632],[.636706,-.318353,.692816],[.931835,-.219977,-.264632]],face:[[11,10,8],[7,9,3],[6,11,8],[9,5,3],[2,6,8],[5,0,3],[4,2,8],[0,1,3],[10,4,8],[1,7,3],[10,11,9,7],[11,6,5,9],[6,2,0,5],[2,4,1,0],[4,10,7,1]]},t[14]={vertex:[[-.93465,.300459,-.271185],[-.838689,-.260219,-.516017],[-.711319,.717591,.128359],[-.710334,-.156922,.080946],[-.599799,.556003,-.725148],[-.503838,-.004675,-.969981],[-.487004,.26021,.48049],[-.460089,-.750282,-.512622],[-.376468,.973135,-.325605],[-.331735,-.646985,.084342],[-.254001,.831847,.530001],[-.125239,-.494738,-.966586],[.029622,.027949,.730817],[.056536,-.982543,-.262295],[.08085,1.087391,.076037],[.125583,-.532729,.485984],[.262625,.599586,.780328],[.391387,-.726999,-.716259],[.513854,-.868287,.139347],[.597475,.85513,.326364],[.641224,.109523,.783723],[.737185,-.451155,.538891],[.848705,-.612742,-.314616],[.976075,.365067,.32976],[1.072036,-.19561,.084927]],face:[[15,18,21],[12,20,16],[6,10,2],[3,0,1],[9,7,13],[2,8,4,0],[0,4,5,1],[1,5,11,7],[7,11,17,13],[13,17,22,18],[18,22,24,21],[21,24,23,20],[20,23,19,16],[16,19,14,10],[10,14,8,2],[15,9,13,18],[12,15,21,20],[6,12,16,10],[3,6,2,0],[9,3,1,7],[9,15,12,6,3],[22,17,11,5,4,8,14,19,23,24]]};var n,r,i,a,s=e.size,u=e.sizeX||s||1,l=e.sizeY||s||1,c=e.sizeZ||s||1,h=e.custom||t[e.type&&(e.type<0||e.type>=t.length)?0:e.type||0],d=h.face.length,f=e.faceUV||new Array(d),p=e.faceColors,_=void 0===e.flat||e.flat,m=0===e.sideOrientation?0:e.sideOrientation||xn.a.DEFAULTSIDE,g=new Array,v=new Array,y=new Array,b=new Array,T=new Array,E=0,x=0,M=new Array,A=0,S=0;if(_)for(S=0;S<d;S++)p&&void 0===p[S]&&(p[S]=new o.f(1,1,1,1)),f&&void 0===f[S]&&(f[S]=new o.y(0,0,1,1));if(_)for(S=0;S<d;S++){var C=h.face[S].length;for(n=2*Math.PI/C,r=.5*Math.tan(n/2),i=.5,A=0;A<C;A++)g.push(h.vertex[h.face[S][A]][0]*u,h.vertex[h.face[S][A]][1]*l,h.vertex[h.face[S][A]][2]*c),M.push(E),E++,b.push(f[S].x+(f[S].z-f[S].x)*(.5+r),f[S].y+(f[S].w-f[S].y)*(i-.5)),a=r*Math.cos(n)-i*Math.sin(n),i=r*Math.sin(n)+i*Math.cos(n),r=a,p&&T.push(p[S].r,p[S].g,p[S].b,p[S].a);for(A=0;A<C-2;A++)v.push(M[0+x],M[A+2+x],M[A+1+x]);x+=C}else{for(A=0;A<h.vertex.length;A++)g.push(h.vertex[A][0]*u,h.vertex[A][1]*l,h.vertex[A][2]*c),b.push(0,0);for(S=0;S<d;S++)for(A=0;A<h.face[S].length-2;A++)v.push(h.face[S][0],h.face[S][A+2],h.face[S][A+1])}xn.a.ComputeNormals(g,v,y),xn.a._ComputeSides(m,g,v,y,b,e.frontUVs,e.backUVs);var P=new xn.a;return P.positions=g,P.indices=v,P.normals=y,P.uvs=b,p&&_&&(P.colors=T),P},fe.a.CreatePolyhedron=function(e,t,n){return wr.CreatePolyhedron(e,t,n)};var wr=function(){function e(){}return e.CreatePolyhedron=function(e,t,n){void 0===n&&(n=null);var r=new fe.a(e,n);return t.sideOrientation=fe.a._GetDefaultSideOrientation(t.sideOrientation),r._originalBuilderSideOrientation=t.sideOrientation,xn.a.CreatePolyhedron(t).applyToMesh(r,t.updatable),r},e}(),Lr=function(e){function t(t){void 0===t&&(t=Mr.a.DefaultUtilityLayer);var n=e.call(this,t)||this;n.onDragStartObservable=new i.c,n.onDragEndObservable=new i.c,n.xGizmo=new Ar(new o.x(1,0,0),o.e.Red().scale(.5),t),n.yGizmo=new Ar(new o.x(0,1,0),o.e.Green().scale(.5),t),n.zGizmo=new Ar(new o.x(0,0,1),o.e.Blue().scale(.5),t),n.uniformScaleGizmo=new Ar(new o.x(0,1,0),o.e.Yellow().scale(.5),t),n.uniformScaleGizmo.updateGizmoRotationToMatchAttachedMesh=!1,n.uniformScaleGizmo.uniformScaling=!0;var r=wr.CreatePolyhedron("",{type:1},n.uniformScaleGizmo.gizmoLayer.utilityLayerScene);r.scaling.scaleInPlace(.02),r.visibility=0;var a=wr.CreatePolyhedron("",{type:1},n.uniformScaleGizmo.gizmoLayer.utilityLayerScene);a.scaling.scaleInPlace(.007),r.addChild(a),n.uniformScaleGizmo.setCustomMesh(r,!0);var s=t._getSharedGizmoLight();return s.includedOnlyMeshes=s.includedOnlyMeshes.concat(a),[n.xGizmo,n.yGizmo,n.zGizmo,n.uniformScaleGizmo].forEach(function(e){e.dragBehavior.onDragStartObservable.add(function(){n.onDragStartObservable.notifyObservers({})}),e.dragBehavior.onDragEndObservable.add(function(){n.onDragEndObservable.notifyObservers({})})}),n.attachedMesh=null,n}return l.d(t,e),Object.defineProperty(t.prototype,"attachedMesh",{get:function(){return this.xGizmo.attachedMesh},set:function(e){this.xGizmo&&(this.xGizmo.attachedMesh=e,this.yGizmo.attachedMesh=e,this.zGizmo.attachedMesh=e,this.uniformScaleGizmo.attachedMesh=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateGizmoRotationToMatchAttachedMesh",{get:function(){return this.xGizmo.updateGizmoRotationToMatchAttachedMesh},set:function(e){e||p.a.Warn("Setting updateGizmoRotationToMatchAttachedMesh = false on scaling gizmo is not supported."),this.xGizmo&&(this.xGizmo.updateGizmoRotationToMatchAttachedMesh=e,this.yGizmo.updateGizmoRotationToMatchAttachedMesh=e,this.zGizmo.updateGizmoRotationToMatchAttachedMesh=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"snapDistance",{get:function(){return this.xGizmo.snapDistance},set:function(e){this.xGizmo&&(this.xGizmo.snapDistance=e,this.yGizmo.snapDistance=e,this.zGizmo.snapDistance=e,this.uniformScaleGizmo.snapDistance=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scaleRatio",{get:function(){return this.xGizmo.scaleRatio},set:function(e){this.xGizmo&&(this.xGizmo.scaleRatio=e,this.yGizmo.scaleRatio=e,this.zGizmo.scaleRatio=e,this.uniformScaleGizmo.scaleRatio=e)},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.xGizmo.dispose(),this.yGizmo.dispose(),this.zGizmo.dispose(),this.uniformScaleGizmo.dispose(),this.onDragStartObservable.clear(),this.onDragEndObservable.clear()},t}(xr.a),Ir=function(){function e(e){var t=this;this.scene=e,this.clearGizmoOnEmptyPointerEvent=!1,this.onAttachedToMeshObservable=new i.c,this._gizmosEnabled={positionGizmo:!1,rotationGizmo:!1,scaleGizmo:!1,boundingBoxGizmo:!1},this._pointerObserver=null,this._attachedMesh=null,this._boundingBoxColor=o.e.FromHexString("#0984e3"),this.boundingBoxDragBehavior=new ke,this.attachableMeshes=null,this.usePointerToAttachGizmos=!0,this._defaultKeepDepthUtilityLayer=new Mr.a(e),this._defaultKeepDepthUtilityLayer.utilityLayerScene.autoClearDepthAndStencil=!1,this._defaultUtilityLayer=Mr.a.DefaultUtilityLayer,this.gizmos={positionGizmo:null,rotationGizmo:null,scaleGizmo:null,boundingBoxGizmo:null},this._pointerObserver=e.onPointerObservable.add(function(e){if(t.usePointerToAttachGizmos&&e.type==Se.a.POINTERDOWN)if(e.pickInfo&&e.pickInfo.pickedMesh){var n=e.pickInfo.pickedMesh;if(null==t.attachableMeshes)for(;n&&null!=n.parent;)n=n.parent;else{var r=!1;t.attachableMeshes.forEach(function(e){n&&(n==e||n.isDescendantOf(e))&&(n=e,r=!0)}),r||(n=null)}n instanceof Fe.a?t._attachedMesh!=n&&t.attachToMesh(n):t.clearGizmoOnEmptyPointerEvent&&t.attachToMesh(null)}else t.clearGizmoOnEmptyPointerEvent&&t.attachToMesh(null)})}return e.prototype.attachToMesh=function(e){for(var t in this._attachedMesh&&this._attachedMesh.removeBehavior(this.boundingBoxDragBehavior),this._attachedMesh=e,this.gizmos){var n=this.gizmos[t];n&&this._gizmosEnabled[t]&&(n.attachedMesh=e)}this.boundingBoxGizmoEnabled&&this._attachedMesh&&this._attachedMesh.addBehavior(this.boundingBoxDragBehavior),this.onAttachedToMeshObservable.notifyObservers(e)},Object.defineProperty(e.prototype,"positionGizmoEnabled",{get:function(){return this._gizmosEnabled.positionGizmo},set:function(e){e?(this.gizmos.positionGizmo||(this.gizmos.positionGizmo=new Or(this._defaultUtilityLayer)),this.gizmos.positionGizmo.attachedMesh=this._attachedMesh):this.gizmos.positionGizmo&&(this.gizmos.positionGizmo.attachedMesh=null),this._gizmosEnabled.positionGizmo=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rotationGizmoEnabled",{get:function(){return this._gizmosEnabled.rotationGizmo},set:function(e){e?(this.gizmos.rotationGizmo||(this.gizmos.rotationGizmo=new Dr(this._defaultUtilityLayer)),this.gizmos.rotationGizmo.attachedMesh=this._attachedMesh):this.gizmos.rotationGizmo&&(this.gizmos.rotationGizmo.attachedMesh=null),this._gizmosEnabled.rotationGizmo=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleGizmoEnabled",{get:function(){return this._gizmosEnabled.scaleGizmo},set:function(e){e?(this.gizmos.scaleGizmo=this.gizmos.scaleGizmo||new Lr(this._defaultUtilityLayer),this.gizmos.scaleGizmo.attachedMesh=this._attachedMesh):this.gizmos.scaleGizmo&&(this.gizmos.scaleGizmo.attachedMesh=null),this._gizmosEnabled.scaleGizmo=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundingBoxGizmoEnabled",{get:function(){return this._gizmosEnabled.boundingBoxGizmo},set:function(e){e?(this.gizmos.boundingBoxGizmo=this.gizmos.boundingBoxGizmo||new Pr(this._boundingBoxColor,this._defaultKeepDepthUtilityLayer),this.gizmos.boundingBoxGizmo.attachedMesh=this._attachedMesh,this._attachedMesh&&(this._attachedMesh.removeBehavior(this.boundingBoxDragBehavior),this._attachedMesh.addBehavior(this.boundingBoxDragBehavior))):this.gizmos.boundingBoxGizmo&&(this._attachedMesh&&this._attachedMesh.removeBehavior(this.boundingBoxDragBehavior),this.gizmos.boundingBoxGizmo.attachedMesh=null),this._gizmosEnabled.boundingBoxGizmo=e},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){for(var e in this.scene.onPointerObservable.remove(this._pointerObserver),this.gizmos){var t=this.gizmos[e];t&&t.dispose()}this._defaultKeepDepthUtilityLayer.dispose(),this.boundingBoxDragBehavior.detach(),this.onAttachedToMeshObservable.clear()},e}(),Fr=n(38),Nr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._needProjectionMatrixCompute=!0,t}return l.d(t,e),t.prototype._setPosition=function(e){this._position=e},Object.defineProperty(t.prototype,"position",{get:function(){return this._position},set:function(e){this._setPosition(e)},enumerable:!0,configurable:!0}),t.prototype._setDirection=function(e){this._direction=e},Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){this._setDirection(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowMinZ",{get:function(){return this._shadowMinZ},set:function(e){this._shadowMinZ=e,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowMaxZ",{get:function(){return this._shadowMaxZ},set:function(e){this._shadowMaxZ=e,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),t.prototype.computeTransformedInformation=function(){return!(!this.parent||!this.parent.getWorldMatrix||(this.transformedPosition||(this.transformedPosition=o.x.Zero()),o.x.TransformCoordinatesToRef(this.position,this.parent.getWorldMatrix(),this.transformedPosition),this.direction&&(this.transformedDirection||(this.transformedDirection=o.x.Zero()),o.x.TransformNormalToRef(this.direction,this.parent.getWorldMatrix(),this.transformedDirection)),0))},t.prototype.getDepthScale=function(){return 50},t.prototype.getShadowDirection=function(e){return this.transformedDirection?this.transformedDirection:this.direction},t.prototype.getAbsolutePosition=function(){return this.transformedPosition?this.transformedPosition:this.position},t.prototype.setDirectionToTarget=function(e){return this.direction=o.x.Normalize(e.subtract(this.position)),this.direction},t.prototype.getRotation=function(){this.direction.normalize();var e=o.x.Cross(this.direction,o.c.Y),t=o.x.Cross(e,this.direction);return o.x.RotationFromAxis(e,t,this.direction)},t.prototype.needCube=function(){return!1},t.prototype.needProjectionMatrixCompute=function(){return this._needProjectionMatrixCompute},t.prototype.forceProjectionMatrixCompute=function(){this._needProjectionMatrixCompute=!0},t.prototype._initCache=function(){e.prototype._initCache.call(this),this._cache.position=o.x.Zero()},t.prototype._isSynchronized=function(){return!!this._cache.position.equals(this.position)},t.prototype.computeWorldMatrix=function(e){return!e&&this.isSynchronized()?(this._currentRenderId=this.getScene().getRenderId(),this._worldMatrix):(this._updateCache(),this._cache.position.copyFrom(this.position),this._worldMatrix||(this._worldMatrix=o.j.Identity()),o.j.TranslationToRef(this.position.x,this.position.y,this.position.z,this._worldMatrix),this.parent&&this.parent.getWorldMatrix&&(this._worldMatrix.multiplyToRef(this.parent.getWorldMatrix(),this._worldMatrix),this._markSyncedWithParent()),this._worldMatrixDeterminantIsDirty=!0,this._worldMatrix)},t.prototype.getDepthMinZ=function(e){return void 0!==this.shadowMinZ?this.shadowMinZ:e.minZ},t.prototype.getDepthMaxZ=function(e){return void 0!==this.shadowMaxZ?this.shadowMaxZ:e.maxZ},t.prototype.setShadowProjectionMatrix=function(e,t,n){return this.customProjectionMatrixBuilder?this.customProjectionMatrixBuilder(t,n,e):this._setDefaultShadowProjectionMatrix(e,t,n),this},l.c([Object(L.o)()],t.prototype,"position",null),l.c([Object(L.o)()],t.prototype,"direction",null),l.c([Object(L.c)()],t.prototype,"shadowMinZ",null),l.c([Object(L.c)()],t.prototype,"shadowMaxZ",null),t}(Fr.a);F.a.AddNodeConstructor("Light_Type_1",function(e,t){return function(){return new Br(e,o.x.Zero(),t)}});var Br=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i._shadowFrustumSize=0,i._shadowOrthoScale=.1,i.autoUpdateExtends=!0,i._orthoLeft=Number.MAX_VALUE,i._orthoRight=Number.MIN_VALUE,i._orthoTop=Number.MIN_VALUE,i._orthoBottom=Number.MAX_VALUE,i.position=n.scale(-1),i.direction=n,i}return l.d(t,e),Object.defineProperty(t.prototype,"shadowFrustumSize",{get:function(){return this._shadowFrustumSize},set:function(e){this._shadowFrustumSize=e,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowOrthoScale",{get:function(){return this._shadowOrthoScale},set:function(e){this._shadowOrthoScale=e,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"DirectionalLight"},t.prototype.getTypeID=function(){return Fr.a.LIGHTTYPEID_DIRECTIONALLIGHT},t.prototype._setDefaultShadowProjectionMatrix=function(e,t,n){this.shadowFrustumSize>0?this._setDefaultFixedFrustumShadowProjectionMatrix(e):this._setDefaultAutoExtendShadowProjectionMatrix(e,t,n)},t.prototype._setDefaultFixedFrustumShadowProjectionMatrix=function(e){var t=this.getScene().activeCamera;t&&o.j.OrthoLHToRef(this.shadowFrustumSize,this.shadowFrustumSize,void 0!==this.shadowMinZ?this.shadowMinZ:t.minZ,void 0!==this.shadowMaxZ?this.shadowMaxZ:t.maxZ,e)},t.prototype._setDefaultAutoExtendShadowProjectionMatrix=function(e,t,n){var r=this.getScene().activeCamera;if(r){if(this.autoUpdateExtends||this._orthoLeft===Number.MAX_VALUE){var i=o.x.Zero();this._orthoLeft=Number.MAX_VALUE,this._orthoRight=Number.MIN_VALUE,this._orthoTop=Number.MIN_VALUE,this._orthoBottom=Number.MAX_VALUE;for(var a=0;a<n.length;a++){var s=n[a];if(s)for(var u=s.getBoundingInfo().boundingBox,l=0;l<u.vectorsWorld.length;l++)o.x.TransformCoordinatesToRef(u.vectorsWorld[l],t,i),i.x<this._orthoLeft&&(this._orthoLeft=i.x),i.y<this._orthoBottom&&(this._orthoBottom=i.y),i.x>this._orthoRight&&(this._orthoRight=i.x),i.y>this._orthoTop&&(this._orthoTop=i.y)}}var c=this._orthoRight-this._orthoLeft,h=this._orthoTop-this._orthoBottom;o.j.OrthoOffCenterLHToRef(this._orthoLeft-c*this.shadowOrthoScale,this._orthoRight+c*this.shadowOrthoScale,this._orthoBottom-h*this.shadowOrthoScale,this._orthoTop+h*this.shadowOrthoScale,void 0!==this.shadowMinZ?this.shadowMinZ:r.minZ,void 0!==this.shadowMaxZ?this.shadowMaxZ:r.maxZ,e)}},t.prototype._buildUniformLayout=function(){this._uniformBuffer.addUniform("vLightData",4),this._uniformBuffer.addUniform("vLightDiffuse",4),this._uniformBuffer.addUniform("vLightSpecular",3),this._uniformBuffer.addUniform("shadowsInfo",3),this._uniformBuffer.addUniform("depthValues",2),this._uniformBuffer.create()},t.prototype.transferToEffect=function(e,t){return this.computeTransformedInformation()?(this._uniformBuffer.updateFloat4("vLightData",this.transformedDirection.x,this.transformedDirection.y,this.transformedDirection.z,1,t),this):(this._uniformBuffer.updateFloat4("vLightData",this.direction.x,this.direction.y,this.direction.z,1,t),this)},t.prototype.getDepthMinZ=function(e){return 1},t.prototype.getDepthMaxZ=function(e){return 1},t.prototype.prepareLightSpecificDefines=function(e,t){e["DIRLIGHT"+t]=!0},l.c([Object(L.c)()],t.prototype,"shadowFrustumSize",null),l.c([Object(L.c)()],t.prototype,"shadowOrthoScale",null),l.c([Object(L.c)()],t.prototype,"autoUpdateExtends",void 0),t}(Nr);fe.a.CreateHemisphere=function(e,t,n,r){return kr.CreateHemisphere(e,{segments:t,diameter:n},r)};var kr=function(){function e(){}return e.CreateHemisphere=function(e,t,n){t.diameter||(t.diameter=1),t.segments||(t.segments=16);var r=Sr.a.CreateSphere("",{slice:.5,diameter:t.diameter,segments:t.segments},n),i=fe.a.CreateDisc("",t.diameter/2,3*t.segments+(4-t.segments),n);i.rotation.x=-Math.PI/2,i.parent=r;var o=fe.a.MergeMeshes([i,r],!0);return o.name=e,o},e}();F.a.AddNodeConstructor("Light_Type_2",function(e,t){return function(){return new Ur(e,o.x.Zero(),o.x.Zero(),0,0,t)}});var Ur=function(e){function t(t,n,r,i,a,s){var u=e.call(this,t,s)||this;return u._innerAngle=0,u._projectionTextureMatrix=o.j.Zero(),u._projectionTextureLightNear=1e-6,u._projectionTextureLightFar=1e3,u._projectionTextureUpDirection=o.x.Up(),u._projectionTextureViewLightDirty=!0,u._projectionTextureProjectionLightDirty=!0,u._projectionTextureDirty=!0,u._projectionTextureViewTargetVector=o.x.Zero(),u._projectionTextureViewLightMatrix=o.j.Zero(),u._projectionTextureProjectionLightMatrix=o.j.Zero(),u._projectionTextureScalingMatrix=o.j.FromValues(.5,0,0,0,0,.5,0,0,0,0,.5,0,.5,.5,.5,1),u.position=n,u.direction=r,u.angle=i,u.exponent=a,u}return l.d(t,e),Object.defineProperty(t.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._cosHalfAngle=Math.cos(.5*e),this._projectionTextureProjectionLightDirty=!0,this.forceProjectionMatrixCompute(),this._computeAngleValues()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"innerAngle",{get:function(){return this._innerAngle},set:function(e){this._innerAngle=e,this._computeAngleValues()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shadowAngleScale",{get:function(){return this._shadowAngleScale},set:function(e){this._shadowAngleScale=e,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"projectionTextureMatrix",{get:function(){return this._projectionTextureMatrix},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"projectionTextureLightNear",{get:function(){return this._projectionTextureLightNear},set:function(e){this._projectionTextureLightNear=e,this._projectionTextureProjectionLightDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"projectionTextureLightFar",{get:function(){return this._projectionTextureLightFar},set:function(e){this._projectionTextureLightFar=e,this._projectionTextureProjectionLightDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"projectionTextureUpDirection",{get:function(){return this._projectionTextureUpDirection},set:function(e){this._projectionTextureUpDirection=e,this._projectionTextureProjectionLightDirty=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"projectionTexture",{get:function(){return this._projectionTexture},set:function(e){var t=this;if(this._projectionTexture!==e&&(this._projectionTexture=e,this._projectionTextureDirty=!0,this._projectionTexture&&!this._projectionTexture.isReady())){var n=this._projectionTexture;n.onLoadObservable&&n.onLoadObservable.addOnce(function(){t._markMeshesAsLightDirty()})}},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"SpotLight"},t.prototype.getTypeID=function(){return Fr.a.LIGHTTYPEID_SPOTLIGHT},t.prototype._setDirection=function(t){e.prototype._setDirection.call(this,t),this._projectionTextureViewLightDirty=!0},t.prototype._setPosition=function(t){e.prototype._setPosition.call(this,t),this._projectionTextureViewLightDirty=!0},t.prototype._setDefaultShadowProjectionMatrix=function(e,t,n){var r=this.getScene().activeCamera;r&&(this._shadowAngleScale=this._shadowAngleScale||1,o.j.PerspectiveFovLHToRef(this._shadowAngleScale*this._angle,1,this.getDepthMinZ(r),this.getDepthMaxZ(r),e))},t.prototype._computeProjectionTextureViewLightMatrix=function(){this._projectionTextureViewLightDirty=!1,this._projectionTextureDirty=!0,this.position.addToRef(this.direction,this._projectionTextureViewTargetVector),o.j.LookAtLHToRef(this.position,this._projectionTextureViewTargetVector,this._projectionTextureUpDirection,this._projectionTextureViewLightMatrix)},t.prototype._computeProjectionTextureProjectionLightMatrix=function(){this._projectionTextureProjectionLightDirty=!1,this._projectionTextureDirty=!0;var e=this.projectionTextureLightFar,t=this.projectionTextureLightNear,n=e/(e-t),r=-n*t,i=1/Math.tan(this._angle/2);o.j.FromValuesToRef(i/1,0,0,0,0,i,0,0,0,0,n,1,0,0,r,0,this._projectionTextureProjectionLightMatrix)},t.prototype._computeProjectionTextureMatrix=function(){this._projectionTextureDirty=!1,this._projectionTextureViewLightMatrix.multiplyToRef(this._projectionTextureProjectionLightMatrix,this._projectionTextureMatrix),this._projectionTextureMatrix.multiplyToRef(this._projectionTextureScalingMatrix,this._projectionTextureMatrix)},t.prototype._buildUniformLayout=function(){this._uniformBuffer.addUniform("vLightData",4),this._uniformBuffer.addUniform("vLightDiffuse",4),this._uniformBuffer.addUniform("vLightSpecular",3),this._uniformBuffer.addUniform("vLightDirection",3),this._uniformBuffer.addUniform("vLightFalloff",4),this._uniformBuffer.addUniform("shadowsInfo",3),this._uniformBuffer.addUniform("depthValues",2),this._uniformBuffer.create()},t.prototype._computeAngleValues=function(){this._lightAngleScale=1/Math.max(.001,Math.cos(.5*this._innerAngle)-this._cosHalfAngle),this._lightAngleOffset=-this._cosHalfAngle*this._lightAngleScale},t.prototype.transferToEffect=function(e,t){var n;return this.computeTransformedInformation()?(this._uniformBuffer.updateFloat4("vLightData",this.transformedPosition.x,this.transformedPosition.y,this.transformedPosition.z,this.exponent,t),n=o.x.Normalize(this.transformedDirection)):(this._uniformBuffer.updateFloat4("vLightData",this.position.x,this.position.y,this.position.z,this.exponent,t),n=o.x.Normalize(this.direction)),this._uniformBuffer.updateFloat4("vLightDirection",n.x,n.y,n.z,this._cosHalfAngle,t),this._uniformBuffer.updateFloat4("vLightFalloff",this.range,this._inverseSquaredRange,this._lightAngleScale,this._lightAngleOffset,t),this.projectionTexture&&this.projectionTexture.isReady()&&(this._projectionTextureViewLightDirty&&this._computeProjectionTextureViewLightMatrix(),this._projectionTextureProjectionLightDirty&&this._computeProjectionTextureProjectionLightMatrix(),this._projectionTextureDirty&&this._computeProjectionTextureMatrix(),e.setMatrix("textureProjectionMatrix"+t,this._projectionTextureMatrix),e.setTexture("projectionLightSampler"+t,this.projectionTexture)),this},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._projectionTexture&&this._projectionTexture.dispose()},t.prototype.prepareLightSpecificDefines=function(e,t){e["SPOTLIGHT"+t]=!0,e["PROJECTEDLIGHTTEXTURE"+t]=!(!this.projectionTexture||!this.projectionTexture.isReady())},l.c([Object(L.c)()],t.prototype,"angle",null),l.c([Object(L.c)()],t.prototype,"innerAngle",null),l.c([Object(L.c)()],t.prototype,"shadowAngleScale",null),l.c([Object(L.c)()],t.prototype,"exponent",void 0),l.c([Object(L.c)()],t.prototype,"projectionTextureLightNear",null),l.c([Object(L.c)()],t.prototype,"projectionTextureLightFar",null),l.c([Object(L.c)()],t.prototype,"projectionTextureUpDirection",null),l.c([Object(L.m)("projectedLightTexture")],t.prototype,"_projectionTexture",void 0),t}(Nr),Vr=function(e){function t(t){var n=e.call(this,t)||this;return n.cachedPosition=new o.x,n.cachedForward=new o.x(0,0,1),n._light=null,n.attachedMesh=new Fe.a("",n.gizmoLayer.utilityLayerScene),n._material=new yn.a("light",n.gizmoLayer.originalScene),n._material.diffuseColor=new o.e(.5,.5,.5),n._material.specularColor=new o.e(.1,.1,.1),n}return l.d(t,e),Object.defineProperty(t.prototype,"light",{get:function(){return this._light},set:function(e){var n=this;if(this._light=e,e){this._lightMesh&&this._lightMesh.dispose(),this._lightMesh=e instanceof _n.a?t._CreateHemisphericLightMesh(this.gizmoLayer.utilityLayerScene):e instanceof Br?t._CreateDirectionalLightMesh(this.gizmoLayer.utilityLayerScene):e instanceof Ur?t._CreateSpotLightMesh(this.gizmoLayer.utilityLayerScene):t._CreatePointLightMesh(this.gizmoLayer.utilityLayerScene),this._lightMesh.getChildMeshes(!1).forEach(function(e){e.material=n._material}),this._lightMesh.parent=this._rootMesh;var r=this.gizmoLayer._getSharedGizmoLight();r.includedOnlyMeshes=r.includedOnlyMeshes.concat(this._lightMesh.getChildMeshes(!1)),this._lightMesh.rotationQuaternion=new o.q,e.position&&this.attachedMesh.position.copyFrom(e.position),e.direction&&this.attachedMesh.setDirection(e.direction),this._update()}},enumerable:!0,configurable:!0}),t.prototype._update=function(){e.prototype._update.call(this),this._light&&(this._light.position&&(this.attachedMesh.position.equals(this.cachedPosition)?this.attachedMesh.position.copyFrom(this._light.position):(this._light.position.copyFrom(this.attachedMesh.position),this.cachedPosition.copyFrom(this.attachedMesh.position))),this._light.direction&&(o.x.DistanceSquared(this.attachedMesh.forward,this.cachedForward)>1e-4?(this._light.direction.copyFrom(this.attachedMesh.forward),this.cachedForward.copyFrom(this.attachedMesh.forward)):o.x.DistanceSquared(this.attachedMesh.forward,this._light.direction)>1e-4&&(this.attachedMesh.setDirection(this._light.direction),this.cachedForward.copyFrom(this._lightMesh.forward))),this._light.isEnabled()?this._material.diffuseColor.set(this._light.diffuse.r/3,this._light.diffuse.g/3,this._light.diffuse.b/3):this._material.diffuseColor.set(0,0,0))},t.prototype.dispose=function(){this._material.dispose(),e.prototype.dispose.call(this)},t._CreateHemisphericLightMesh=function(e){var n=new fe.a("hemisphereLight",e),r=kr.CreateHemisphere(n.name,{segments:10,diameter:1},e);return r.position.z=-.15,r.rotation.x=Math.PI/2,r.parent=n,this._createLightLines(3,e).parent=n,n.scaling.scaleInPlace(t._Scale),n.rotation.x=Math.PI/2,n},t._CreatePointLightMesh=function(e){var n=new fe.a("pointLight",e),r=Sr.a.CreateSphere(n.name,{segments:10,diameter:1},e);return r.rotation.x=Math.PI/2,r.parent=n,this._createLightLines(5,e).parent=n,n.scaling.scaleInPlace(t._Scale),n.rotation.x=Math.PI/2,n},t._CreateSpotLightMesh=function(e){var n=new fe.a("spotLight",e);Sr.a.CreateSphere(n.name,{segments:10,diameter:1},e).parent=n;var r=kr.CreateHemisphere(n.name,{segments:10,diameter:2},e);return r.parent=n,r.rotation.x=-Math.PI/2,this._createLightLines(2,e).parent=n,n.scaling.scaleInPlace(t._Scale),n.rotation.x=Math.PI/2,n},t._CreateDirectionalLightMesh=function(e){var n=new fe.a("directionalLight",e),r=new fe.a(n.name,e);r.parent=n,Sr.a.CreateSphere(n.name,{diameter:1.2,segments:10},e).parent=r;var i=fe.a.CreateCylinder(n.name,6,.3,.3,6,1,e);i.parent=r,(o=i.clone(n.name)).scaling.y=.5,o.position.x+=1.25,(a=i.clone(n.name)).scaling.y=.5,a.position.x+=-1.25;var o,a,s=fe.a.CreateCylinder(n.name,1,0,.6,6,1,e);return s.position.y+=3,s.parent=r,(o=s.clone(n.name)).position.y=1.5,o.position.x+=1.25,(a=s.clone(n.name)).position.y=1.5,a.position.x+=-1.25,r.scaling.scaleInPlace(t._Scale),r.rotation.z=Math.PI/2,r.rotation.y=Math.PI/2,n},t._Scale=.007,t._createLightLines=function(e,t){var n=new fe.a("root",t);n.rotation.x=Math.PI/2;var r=new fe.a("linePivot",t);r.parent=n;var i=fe.a.CreateCylinder("line",2,.2,.3,6,1,t);if(i.position.y=i.scaling.y/2+1.2,i.parent=r,e<2)return r;for(var o=0;o<4;o++)(a=r.clone("lineParentClone")).rotation.z=Math.PI/4,a.rotation.y=Math.PI/2+Math.PI/2*o,a.getChildMeshes()[0].scaling.y=.5,a.getChildMeshes()[0].scaling.x=a.getChildMeshes()[0].scaling.z=.8,a.getChildMeshes()[0].position.y=a.getChildMeshes()[0].scaling.y/2+1.2;if(e<3)return n;for(o=0;o<4;o++)(a=r.clone("linePivotClone")).rotation.z=Math.PI/2,a.rotation.y=Math.PI/2*o;if(e<4)return n;for(o=0;o<4;o++){var a;(a=r.clone("linePivotClone")).rotation.z=Math.PI+Math.PI/4,a.rotation.y=Math.PI/2+Math.PI/2*o,a.getChildMeshes()[0].scaling.y=.5,a.getChildMeshes()[0].scaling.x=a.getChildMeshes()[0].scaling.z=.8,a.getChildMeshes()[0].position.y=a.getChildMeshes()[0].scaling.y/2+1.2}return e<5?n:((a=r.clone("linePivotClone")).rotation.z=Math.PI,n)},t}(xr.a),Gr=n(44);jt.a.IncludesShadersStore.kernelBlurVaryingDeclaration="varying vec2 sampleCoord{X};",jt.a.IncludesShadersStore.kernelBlurFragment="#ifdef DOF\nfactor=sampleCoC(sampleCoord{X});\ncomputedWeight=KERNEL_WEIGHT{X}*factor;\nsumOfWeights+=computedWeight;\n#else\ncomputedWeight=KERNEL_WEIGHT{X};\n#endif\n#ifdef PACKEDFLOAT\nblend+=unpack(texture2D(textureSampler,sampleCoord{X}))*computedWeight;\n#else\nblend+=texture2D(textureSampler,sampleCoord{X})*computedWeight;\n#endif",jt.a.IncludesShadersStore.kernelBlurFragment2="#ifdef DOF\nfactor=sampleCoC(sampleCenter+delta*KERNEL_DEP_OFFSET{X});\ncomputedWeight=KERNEL_DEP_WEIGHT{X}*factor;\nsumOfWeights+=computedWeight;\n#else\ncomputedWeight=KERNEL_DEP_WEIGHT{X};\n#endif\n#ifdef PACKEDFLOAT\nblend+=unpack(texture2D(textureSampler,sampleCenter+delta*KERNEL_DEP_OFFSET{X}))*computedWeight;\n#else\nblend+=texture2D(textureSampler,sampleCenter+delta*KERNEL_DEP_OFFSET{X})*computedWeight;\n#endif",jt.a.ShadersStore.kernelBlurPixelShader="\nuniform sampler2D textureSampler;\nuniform vec2 delta;\n\nvarying vec2 sampleCenter;\n#ifdef DOF\nuniform sampler2D circleOfConfusionSampler;\nuniform vec2 cameraMinMaxZ;\nfloat sampleDistance(const in vec2 offset) {\nfloat depth=texture2D(circleOfConfusionSampler,offset).g;\nreturn cameraMinMaxZ.x+(cameraMinMaxZ.y-cameraMinMaxZ.x)*depth;\n}\nfloat sampleCoC(const in vec2 offset) {\nfloat coc=texture2D(circleOfConfusionSampler,offset).r;\nreturn coc;\n}\n#endif\n#include<kernelBlurVaryingDeclaration>[0..varyingCount]\n#ifdef PACKEDFLOAT\nvec4 pack(float depth)\n{\nconst vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);\nconst vec4 bit_mask=vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);\nvec4 res=fract(depth*bit_shift);\nres-=res.xxyz*bit_mask;\nreturn res;\n}\nfloat unpack(vec4 color)\n{\nconst vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);\nreturn dot(color,bit_shift);\n}\n#endif\nvoid main(void)\n{\nfloat computedWeight=0.0;\n#ifdef PACKEDFLOAT\nfloat blend=0.;\n#else\nvec4 blend=vec4(0.);\n#endif\n#ifdef DOF\nfloat sumOfWeights=CENTER_WEIGHT;\nfloat factor=0.0;\n\n#ifdef PACKEDFLOAT\nblend+=unpack(texture2D(textureSampler,sampleCenter))*CENTER_WEIGHT;\n#else\nblend+=texture2D(textureSampler,sampleCenter)*CENTER_WEIGHT;\n#endif\n#endif\n#include<kernelBlurFragment>[0..varyingCount]\n#include<kernelBlurFragment2>[0..depCount]\n#ifdef PACKEDFLOAT\ngl_FragColor=pack(blend);\n#else\ngl_FragColor=blend;\n#endif\n#ifdef DOF\ngl_FragColor/=sumOfWeights;\n#endif\n}",jt.a.IncludesShadersStore.kernelBlurVertex="sampleCoord{X}=sampleCenter+delta*KERNEL_OFFSET{X};",jt.a.ShadersStore.kernelBlurVertexShader="\nattribute vec2 position;\n\nuniform vec2 delta;\n\nvarying vec2 sampleCenter;\n#include<kernelBlurVaryingDeclaration>[0..varyingCount]\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nsampleCenter=(position*madd+madd);\n#include<kernelBlurVertex>[0..varyingCount]\ngl_Position=vec4(position,0.0,1.0);\n}";var jr=function(e){function t(t,n,r,i,o,a,s,u,l,c,h){void 0===a&&(a=Ge.a.BILINEAR_SAMPLINGMODE),void 0===l&&(l=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===c&&(c=""),void 0===h&&(h=!1);var d=e.call(this,t,"kernelBlur",["delta","direction","cameraMinMaxZ"],["circleOfConfusionSampler"],i,o,a,s,u,null,l,"kernelBlur",{varyingCount:0,depCount:0},!0)||this;return d.direction=n,d.blockCompilation=h,d._packedFloat=!1,d._staticDefines="",d._staticDefines=c,d.onApplyObservable.add(function(e){d._outputTexture?e.setFloat2("delta",1/d._outputTexture.width*d.direction.x,1/d._outputTexture.height*d.direction.y):e.setFloat2("delta",1/d.width*d.direction.x,1/d.height*d.direction.y)}),d.kernel=r,d}return l.d(t,e),Object.defineProperty(t.prototype,"kernel",{get:function(){return this._idealKernel},set:function(e){this._idealKernel!==e&&(e=Math.max(e,1),this._idealKernel=e,this._kernel=this._nearestBestKernel(e),this.blockCompilation||this._updateParameters())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"packedFloat",{get:function(){return this._packedFloat},set:function(e){this._packedFloat!==e&&(this._packedFloat=e,this.blockCompilation||this._updateParameters())},enumerable:!0,configurable:!0}),t.prototype.updateEffect=function(e,t,n,r,i,o){void 0===e&&(e=null),void 0===t&&(t=null),void 0===n&&(n=null),this._updateParameters(i,o)},t.prototype._updateParameters=function(t,n){for(var r=this._kernel,i=(r-1)/2,o=[],a=[],s=0,u=0;u<r;u++){var l=this._gaussianWeight(u/(r-1)*2-1);o[u]=u-i,a[u]=l,s+=l}for(u=0;u<a.length;u++)a[u]/=s;var c=[],h=[],d=[];for(u=0;u<=i;u+=2){var f=Math.min(u+1,Math.floor(i));if(u===f)d.push({o:o[u],w:a[u]});else{var p=a[u]+a[f]*(f===i?.5:1),_=o[u]+1/(1+a[u]/a[f]);0===_?(d.push({o:o[u],w:a[u]}),d.push({o:o[u+1],w:a[u+1]})):(d.push({o:_,w:p}),d.push({o:-_,w:p}))}}for(u=0;u<d.length;u++)h[u]=d[u].o,c[u]=d[u].w;o=h,a=c;var m=this.getEngine().getCaps().maxVaryingVectors,g=Math.max(m,0)-1,v=Math.min(o.length,g),y="";for(y+=this._staticDefines,-1!=this._staticDefines.indexOf("DOF")&&(y+="#define CENTER_WEIGHT "+this._glslFloat(a[v-1])+"\r\n",v--),u=0;u<v;u++)y+="#define KERNEL_OFFSET"+u+" "+this._glslFloat(o[u])+"\r\n",y+="#define KERNEL_WEIGHT"+u+" "+this._glslFloat(a[u])+"\r\n";var b=0;for(u=g;u<o.length;u++)y+="#define KERNEL_DEP_OFFSET"+b+" "+this._glslFloat(o[u])+"\r\n",y+="#define KERNEL_DEP_WEIGHT"+b+" "+this._glslFloat(a[u])+"\r\n",b++;this.packedFloat&&(y+="#define PACKEDFLOAT 1"),this.blockCompilation=!1,e.prototype.updateEffect.call(this,y,null,null,{varyingCount:v,depCount:b},t,n)},t.prototype._nearestBestKernel=function(e){for(var t=Math.round(e),n=0,r=[t,t-1,t+1,t-2,t+2];n<r.length;n++){var i=r[n];if(i%2!=0&&Math.floor(i/2)%2==0&&i>0)return Math.max(i,3)}return Math.max(t,3)},t.prototype._gaussianWeight=function(e){var t=-e*e/(1/3*2*(1/3));return 1/(Math.sqrt(2*Math.PI)*(1/3))*Math.exp(t)},t.prototype._glslFloat=function(e,t){return void 0===t&&(t=8),e.toFixed(t).replace(/0+$/,"")},t}(zt),zr=function(e){function t(t,n,r,i,a,s,u){void 0===a&&(a=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===s&&(s=Ge.a.BILINEAR_SAMPLINGMODE),void 0===u&&(u=!0);var l=e.call(this,t,n,r,i,!0,a,!1,s,u)||this;return l.scene=r,l.mirrorPlane=new o.n(0,1,0,1),l._transformMatrix=o.j.Zero(),l._mirrorMatrix=o.j.Zero(),l._adaptiveBlurKernel=0,l._blurKernelX=0,l._blurKernelY=0,l._blurRatio=1,l.ignoreCameraViewport=!0,l._updateGammaSpace(),l._imageProcessingConfigChangeObserver=r.imageProcessingConfiguration.onUpdateParameters.add(function(){}),l.onBeforeRenderObservable.add(function(){o.j.ReflectionToRef(l.mirrorPlane,l._mirrorMatrix),l._savedViewMatrix=r.getViewMatrix(),l._mirrorMatrix.multiplyToRef(l._savedViewMatrix,l._transformMatrix),r.setTransformMatrix(l._transformMatrix,r.getProjectionMatrix()),r.clipPlane=l.mirrorPlane,r.getEngine().cullBackFaces=!1,r._mirroredCameraPosition=o.x.TransformCoordinates(r.activeCamera.globalPosition,l._mirrorMatrix)}),l.onAfterRenderObservable.add(function(){r.setTransformMatrix(l._savedViewMatrix,r.getProjectionMatrix()),r.getEngine().cullBackFaces=!0,r._mirroredCameraPosition=null,r.clipPlane=null}),l}return l.d(t,e),Object.defineProperty(t.prototype,"blurRatio",{get:function(){return this._blurRatio},set:function(e){this._blurRatio!==e&&(this._blurRatio=e,this._preparePostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"adaptiveBlurKernel",{set:function(e){this._adaptiveBlurKernel=e,this._autoComputeBlurKernel()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurKernel",{set:function(e){this.blurKernelX=e,this.blurKernelY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurKernelX",{get:function(){return this._blurKernelX},set:function(e){this._blurKernelX!==e&&(this._blurKernelX=e,this._preparePostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurKernelY",{get:function(){return this._blurKernelY},set:function(e){this._blurKernelY!==e&&(this._blurKernelY=e,this._preparePostProcesses())},enumerable:!0,configurable:!0}),t.prototype._autoComputeBlurKernel=function(){var e=this.getScene().getEngine(),t=this.getRenderWidth()/e.getRenderWidth(),n=this.getRenderHeight()/e.getRenderHeight();this.blurKernelX=this._adaptiveBlurKernel*t,this.blurKernelY=this._adaptiveBlurKernel*n},t.prototype._onRatioRescale=function(){this._sizeRatio&&(this.resize(this._initialSizeParameter),this._adaptiveBlurKernel||this._preparePostProcesses()),this._adaptiveBlurKernel&&this._autoComputeBlurKernel()},t.prototype._updateGammaSpace=function(){this.gammaSpace=!this.scene.imageProcessingConfiguration.isEnabled||!this.scene.imageProcessingConfiguration.applyByPostProcess},t.prototype._preparePostProcesses=function(){if(this.clearPostProcesses(!0),this._blurKernelX&&this._blurKernelY){var e=this.getScene().getEngine(),t=e.getCaps().textureFloatRender?_.a.TEXTURETYPE_FLOAT:_.a.TEXTURETYPE_HALF_FLOAT;this._blurX=new jr("horizontal blur",new o.w(1,0),this._blurKernelX,this._blurRatio,null,Ge.a.BILINEAR_SAMPLINGMODE,e,!1,t),this._blurX.autoClear=!1,1===this._blurRatio&&this.samples<2&&this._texture?this._blurX.inputTexture=this._texture:this._blurX.alwaysForcePOT=!0,this._blurY=new jr("vertical blur",new o.w(0,1),this._blurKernelY,this._blurRatio,null,Ge.a.BILINEAR_SAMPLINGMODE,e,!1,t),this._blurY.autoClear=!1,this._blurY.alwaysForcePOT=1!==this._blurRatio,this.addPostProcess(this._blurX),this.addPostProcess(this._blurY)}else this._blurY&&(this.removePostProcess(this._blurY),this._blurY.dispose(),this._blurY=null),this._blurX&&(this.removePostProcess(this._blurX),this._blurX.dispose(),this._blurX=null)},t.prototype.clone=function(){var e=this.getScene();if(!e)return this;var n=this.getSize(),r=new t(this.name,n.width,e,this._renderTargetOptions.generateMipMaps,this._renderTargetOptions.type,this._renderTargetOptions.samplingMode,this._renderTargetOptions.generateDepthBuffer);return r.hasAlpha=this.hasAlpha,r.level=this.level,r.mirrorPlane=this.mirrorPlane.clone(),this.renderList&&(r.renderList=this.renderList.slice(0)),r},t.prototype.serialize=function(){if(!this.name)return null;var t=e.prototype.serialize.call(this);return t.mirrorPlane=this.mirrorPlane.asArray(),t},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.scene.imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingConfigChangeObserver)},t}(ln);Ge.a._CreateMirror=function(e,t,n,r){return new zr(e,t,n,r)},me.b.prototype._createDepthStencilCubeTexture=function(e,t){var n=new je.a(this,je.a.DATASOURCE_UNKNOWN);if(n.isCube=!0,1===this.webGLVersion)return p.a.Error("Depth cube texture is not supported by WebGL 1."),n;var r=l.a({bilinearFiltering:!1,comparisonFunction:0,generateStencil:!1},t),i=this._gl;this._bindTextureDirectly(i.TEXTURE_CUBE_MAP,n,!0),this._setupDepthStencilTexture(n,e,r.generateStencil,r.bilinearFiltering,r.comparisonFunction);for(var o=0;o<6;o++)r.generateStencil?i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,i.DEPTH24_STENCIL8,e,e,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+o,0,i.DEPTH_COMPONENT24,e,e,0,i.DEPTH_COMPONENT,i.UNSIGNED_INT,null);return this._bindTextureDirectly(i.TEXTURE_CUBE_MAP,null),n},me.b.prototype._partialLoadFile=function(e,t,n,r,i){void 0===i&&(i=null),this._loadFile(e,function(e){n[t]=e,n._internalCount++,6===n._internalCount&&r(n)},void 0,void 0,!0,function(e,t){i&&e&&i(e.status+" "+e.statusText,t)})},me.b.prototype._cascadeLoadFiles=function(e,t,n,r){void 0===r&&(r=null);var i=[];i._internalCount=0;for(var o=0;o<6;o++)this._partialLoadFile(n[o],o,i,t,r)},me.b.prototype._cascadeLoadImgs=function(e,t,n,r){void 0===r&&(r=null);var i=[];i._internalCount=0;for(var o=0;o<6;o++)this._partialLoadImg(n[o],o,i,e,t,r)},me.b.prototype._partialLoadImg=function(e,t,n,r,i,o){var a;void 0===o&&(o=null),a=ye.h.LoadImage(e,function(){n[t]=a,n._internalCount++,r&&r._removePendingData(a),6===n._internalCount&&i(n)},function(e,t){r&&r._removePendingData(a),o&&o(e,t)},r?r.offlineProvider:null),r&&r._addPendingData(a)},me.b.prototype.createCubeTexture=function(e,t,n,r,i,o,a,s,u,l,c,h,d){var f=this;void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),void 0===u&&(u=!1),void 0===l&&(l=0),void 0===c&&(c=0),void 0===h&&(h=null),void 0===d&&(d=[]);var _=this._gl,m=h||new je.a(this,je.a.DATASOURCE_CUBE);m.isCube=!0,m.url=e,m.generateMipMaps=!r,m._lodGenerationScale=l,m._lodGenerationOffset=c,this._doNotHandleContextLost||(m._extension=s,m._files=n);for(var g=e.lastIndexOf("."),v=s||(g>-1?e.substring(g).toLowerCase():""),y=null,b=0,T=me.b._TextureLoaders;b<T.length;b++){var E=T[b];if(-1===d.indexOf(E)&&E.canLoad(v,this._textureFormatInUse,h,!1,!1)){y=E;break}}if(y){e=y.transformUrl(e,this._textureFormatInUse);var x=function(e){f._bindTextureDirectly(_.TEXTURE_CUBE_MAP,m,!0),y.loadCubeData(e,m,u,i,o)};n&&6===n.length?y.supportCascades?this._cascadeLoadFiles(t,x,n,o):o?o("Textures type does not support cascades."):p.a.Warn("Texture loader does not support cascades."):this._loadFile(e,x,void 0,void 0,!0,function(e,s){if(y){var h=y.getFallbackTextureUrl(m.url,f._textureFormatInUse);if(p.a.Warn(y.constructor.name+" failed when trying to load "+m.url+", falling back to the next supported loader"),h)return d.push(y),void f.createCubeTexture(h,t,n,r,i,o,a,v,u,l,c,m,d)}o&&e&&o(e.status+" "+e.statusText,s)})}else{if(!n)throw new Error("Cannot load cubemap because files were not defined");this._cascadeLoadImgs(t,function(e){var t=f.needPOTTextures?ye.h.GetExponentOfTwo(e[0].width,f._caps.maxCubemapTextureSize):e[0].width,n=t;if(f._prepareWorkingCanvas(),f._workingCanvas&&f._workingContext){f._workingCanvas.width=t,f._workingCanvas.height=n;var o=[_.TEXTURE_CUBE_MAP_POSITIVE_X,_.TEXTURE_CUBE_MAP_POSITIVE_Y,_.TEXTURE_CUBE_MAP_POSITIVE_Z,_.TEXTURE_CUBE_MAP_NEGATIVE_X,_.TEXTURE_CUBE_MAP_NEGATIVE_Y,_.TEXTURE_CUBE_MAP_NEGATIVE_Z];f._bindTextureDirectly(_.TEXTURE_CUBE_MAP,m,!0),f._unpackFlipY(!1);for(var s=a?f._getInternalFormat(a):f._gl.RGBA,u=0;u<o.length;u++)e[u].width!==t||e[u].height!==n?(f._workingContext.drawImage(e[u],0,0,e[u].width,e[u].height,0,0,t,n),_.texImage2D(o[u],0,s,s,_.UNSIGNED_BYTE,f._workingCanvas)):_.texImage2D(o[u],0,s,s,_.UNSIGNED_BYTE,e[u]);r||_.generateMipmap(_.TEXTURE_CUBE_MAP),f._setCubeMapTextureParams(!r),m.width=t,m.height=n,m.isReady=!0,a&&(m.format=a),m.onLoadedObservable.notifyObservers(m),m.onLoadedObservable.clear(),i&&i()}},n,o)}return this._internalTexturesCache.push(m),m};var Yr=function(e){function t(t,n,r,i,a,s,u,l,c,h,d,f,p){void 0===r&&(r=null),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===s&&(s=null),void 0===u&&(u=null),void 0===l&&(l=_.a.TEXTUREFORMAT_RGBA),void 0===c&&(c=!1),void 0===h&&(h=null),void 0===d&&(d=!1),void 0===f&&(f=.8),void 0===p&&(p=0);var m=e.call(this,n)||this;if(m.boundingBoxPosition=o.x.Zero(),m._rotationY=0,m._prefiltered=!1,m.name=t,m.url=t,m._noMipmap=i,m.hasAlpha=!1,m._format=l,m.isCube=!0,m._textureMatrix=o.j.Identity(),m._createPolynomials=d,m.coordinatesMode=Ge.a.CUBIC_MODE,!t&&!a)return m;var g=t.lastIndexOf("."),v=h||(g>-1?t.substring(g).toLowerCase():""),y=".dds"===v,b=".env"===v;if(b?(m.gammaSpace=!1,m._prefiltered=!1):(m._prefiltered=c,c&&(m.gammaSpace=!1)),m._texture=m._getFromCache(t,i),!a&&(b||y||r||(r=["_px.jpg","_py.jpg","_pz.jpg","_nx.jpg","_ny.jpg","_nz.jpg"]),a=[],r))for(var T=0;T<r.length;T++)a.push(t+r[T]);return m._files=a,m._texture?s&&(m._texture.isReady?ye.h.SetImmediate(function(){return s()}):m._texture.onLoadedObservable.add(s)):n.useDelayedTextureLoading?m.delayLoadState=_.a.DELAYLOADSTATE_NOTLOADED:m._texture=c?n.getEngine().createPrefilteredCubeTexture(t,n,f,p,s,u,l,h,m._createPolynomials):n.getEngine().createCubeTexture(t,n,a,i,s,u,m._format,h,!1,f,p),m}return l.d(t,e),Object.defineProperty(t.prototype,"boundingBoxSize",{get:function(){return this._boundingBoxSize},set:function(e){if(!this._boundingBoxSize||!this._boundingBoxSize.equals(e)){this._boundingBoxSize=e;var t=this.getScene();t&&t.markAllMaterialsAsDirty(_.a.MATERIAL_TextureDirtyFlag)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY},set:function(e){this._rotationY=e,this.setReflectionTextureMatrix(o.j.RotationY(this._rotationY))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"noMipmap",{get:function(){return this._noMipmap},enumerable:!0,configurable:!0}),t.CreateFromImages=function(e,n,r){var i="";return e.forEach(function(e){return i+=e}),new t(i,n,null,r,e)},t.CreateFromPrefilteredData=function(e,n,r,i){return void 0===r&&(r=null),void 0===i&&(i=!0),new t(e,n,null,!1,null,null,null,void 0,!0,r,i)},Object.defineProperty(t.prototype,"isPrefiltered",{get:function(){return this._prefiltered},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"CubeTexture"},t.prototype.updateURL=function(e,t,n){this.url&&(this.releaseInternalTexture(),this.getScene().markAllMaterialsAsDirty(_.a.MATERIAL_TextureDirtyFlag)),this.url=e,this.delayLoadState=_.a.DELAYLOADSTATE_NOTLOADED,this._prefiltered=!1,n&&(this._delayedOnLoad=n),this.delayLoad(t)},t.prototype.delayLoad=function(e){if(this.delayLoadState===_.a.DELAYLOADSTATE_NOTLOADED){var t=this.getScene();t&&(this.delayLoadState=_.a.DELAYLOADSTATE_LOADED,this._texture=this._getFromCache(this.url,this._noMipmap),this._texture||(this._texture=this._prefiltered?t.getEngine().createPrefilteredCubeTexture(this.url,t,this.lodGenerationScale,this.lodGenerationOffset,this._delayedOnLoad,void 0,this._format,void 0,this._createPolynomials):t.getEngine().createCubeTexture(this.url,t,this._files,this._noMipmap,this._delayedOnLoad,null,this._format,e)))}},t.prototype.getReflectionTextureMatrix=function(){return this._textureMatrix},t.prototype.setReflectionTextureMatrix=function(e){var t=this;e.updateFlag!==this._textureMatrix.updateFlag&&(e.isIdentity()!==this._textureMatrix.isIdentity()&&this.getScene().markAllMaterialsAsDirty(_.a.MATERIAL_TextureDirtyFlag,function(e){return-1!==e.getActiveTextures().indexOf(t)}),this._textureMatrix=e)},t.Parse=function(e,n,r){var i=L.a.Parse(function(){var i=!1;return e.prefiltered&&(i=e.prefiltered),new t(r+e.name,n,e.extensions,!1,null,null,null,void 0,i)},e,n);if(e.boundingBoxPosition&&(i.boundingBoxPosition=o.x.FromArray(e.boundingBoxPosition)),e.boundingBoxSize&&(i.boundingBoxSize=o.x.FromArray(e.boundingBoxSize)),e.animations)for(var s=0;s<e.animations.length;s++){var u=e.animations[s],l=a.a.GetClass("BABYLON.Animation");l&&i.animations.push(l.Parse(u))}return i},t.prototype.clone=function(){var e=this,n=this.getScene(),r=0,i=L.a.Clone(function(){if(!n)return e;var i=new t(e.url,n,e._extensions,e._noMipmap,e._files);return r=i.uniqueId,i},this);return i.uniqueId=r,i},l.c([Object(L.c)("rotationY")],t.prototype,"rotationY",null),l.c([Object(L.j)("textureMatrix")],t.prototype,"_textureMatrix",void 0),t}(Gr.a);Ge.a._CubeTextureParser=Yr.Parse,a.a.RegisteredTypes["BABYLON.CubeTexture"]=Yr;var Hr=n(15),Wr=n(64),Xr=n(75),Kr=n(18);jt.a.IncludesShadersStore.backgroundFragmentDeclaration=" uniform vec4 vPrimaryColor;\n#ifdef USEHIGHLIGHTANDSHADOWCOLORS\nuniform vec4 vPrimaryColorShadow;\n#endif\nuniform float shadowLevel;\nuniform float alpha;\n#ifdef DIFFUSE\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\nuniform mat4 reflectionMatrix;\nuniform vec3 vReflectionMicrosurfaceInfos;\n#endif\n#if defined(REFLECTIONFRESNEL) || defined(OPACITYFRESNEL)\nuniform vec3 vBackgroundCenter;\n#endif\n#ifdef REFLECTIONFRESNEL\nuniform vec4 vReflectionControl;\n#endif\n#if defined(REFLECTIONMAP_SPHERICAL) || defined(REFLECTIONMAP_PROJECTION) || defined(REFRACTION)\nuniform mat4 view;\n#endif",jt.a.IncludesShadersStore.backgroundUboDeclaration="layout(std140,column_major) uniform;\nuniform Material\n{\nuniform vec4 vPrimaryColor;\nuniform vec4 vPrimaryColorShadow;\nuniform vec2 vDiffuseInfos;\nuniform vec2 vReflectionInfos;\nuniform mat4 diffuseMatrix;\nuniform mat4 reflectionMatrix;\nuniform vec3 vReflectionMicrosurfaceInfos;\nuniform float fFovMultiplier;\nuniform float pointSize;\nuniform float shadowLevel;\nuniform float alpha;\n#if defined(REFLECTIONFRESNEL) || defined(OPACITYFRESNEL)\nuniform vec3 vBackgroundCenter;\n#endif\n#ifdef REFLECTIONFRESNEL\nuniform vec4 vReflectionControl;\n#endif\n};\nuniform Scene {\nmat4 viewProjection;\n#ifdef MULTIVIEW\nmat4 viewProjectionR;\n#endif\nmat4 view;\n};",n(113),n(84),n(85),n(120),n(112),n(95),n(98),n(89),n(114),n(99),jt.a.ShadersStore.backgroundPixelShader="#ifdef TEXTURELODSUPPORT\n#extension GL_EXT_shader_texture_lod : enable\n#endif\nprecision highp float;\n#include<__decl__backgroundFragment>\n#define RECIPROCAL_PI2 0.15915494\n\nuniform vec3 vEyePosition;\n\nvarying vec3 vPositionW;\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef DIFFUSE\n#if DIFFUSEDIRECTUV == 1\n#define vDiffuseUV vMainUV1\n#elif DIFFUSEDIRECTUV == 2\n#define vDiffuseUV vMainUV2\n#else\nvarying vec2 vDiffuseUV;\n#endif\nuniform sampler2D diffuseSampler;\n#endif\n\n#ifdef REFLECTION\n#ifdef REFLECTIONMAP_3D\n#define sampleReflection(s,c) textureCube(s,c)\nuniform samplerCube reflectionSampler;\n#ifdef TEXTURELODSUPPORT\n#define sampleReflectionLod(s,c,l) textureCubeLodEXT(s,c,l)\n#else\nuniform samplerCube reflectionSamplerLow;\nuniform samplerCube reflectionSamplerHigh;\n#endif\n#else\n#define sampleReflection(s,c) texture2D(s,c)\nuniform sampler2D reflectionSampler;\n#ifdef TEXTURELODSUPPORT\n#define sampleReflectionLod(s,c,l) texture2DLodEXT(s,c,l)\n#else\nuniform samplerCube reflectionSamplerLow;\nuniform samplerCube reflectionSamplerHigh;\n#endif\n#endif\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#else\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#endif\n#include<reflectionFunction>\n#endif\n\n#ifndef FROMLINEARSPACE\n#define FROMLINEARSPACE;\n#endif\n\n#ifndef SHADOWONLY\n#define SHADOWONLY;\n#endif\n#include<imageProcessingDeclaration>\n\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<helperFunctions>\n#include<lightsFragmentFunctions>\n#include<shadowsFragmentFunctions>\n#include<imageProcessingFunctions>\n#include<clipPlaneFragmentDeclaration>\n\n#include<fogFragmentDeclaration>\n#ifdef REFLECTIONFRESNEL\n#define FRESNEL_MAXIMUM_ON_ROUGH 0.25\nvec3 fresnelSchlickEnvironmentGGX(float VdotN,vec3 reflectance0,vec3 reflectance90,float smoothness)\n{\n\nfloat weight=mix(FRESNEL_MAXIMUM_ON_ROUGH,1.0,smoothness);\nreturn reflectance0+weight*(reflectance90-reflectance0)*pow5(saturate(1.0-VdotN));\n}\n#endif\nvoid main(void) {\n#include<clipPlaneFragment>\nvec3 viewDirectionW=normalize(vEyePosition-vPositionW);\n\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=vec3(0.0,1.0,0.0);\n#endif\n\nfloat shadow=1.;\nfloat globalShadow=0.;\nfloat shadowLightCount=0.;\n#include<lightFragment>[0..maxSimultaneousLights]\n#ifdef SHADOWINUSE\nglobalShadow/=shadowLightCount;\n#else\nglobalShadow=1.0;\n#endif\n\nvec4 reflectionColor=vec4(1.,1.,1.,1.);\n#ifdef REFLECTION\nvec3 reflectionVector=computeReflectionCoords(vec4(vPositionW,1.0),normalW);\n#ifdef REFLECTIONMAP_OPPOSITEZ\nreflectionVector.z*=-1.0;\n#endif\n\n#ifdef REFLECTIONMAP_3D\nvec3 reflectionCoords=reflectionVector;\n#else\nvec2 reflectionCoords=reflectionVector.xy;\n#ifdef REFLECTIONMAP_PROJECTION\nreflectionCoords/=reflectionVector.z;\n#endif\nreflectionCoords.y=1.0-reflectionCoords.y;\n#endif\n#ifdef REFLECTIONBLUR\nfloat reflectionLOD=vReflectionInfos.y;\n#ifdef TEXTURELODSUPPORT\n\nreflectionLOD=reflectionLOD*log2(vReflectionMicrosurfaceInfos.x)*vReflectionMicrosurfaceInfos.y+vReflectionMicrosurfaceInfos.z;\nreflectionColor=sampleReflectionLod(reflectionSampler,reflectionCoords,reflectionLOD);\n#else\nfloat lodReflectionNormalized=saturate(reflectionLOD);\nfloat lodReflectionNormalizedDoubled=lodReflectionNormalized*2.0;\nvec4 reflectionSpecularMid=sampleReflection(reflectionSampler,reflectionCoords);\nif(lodReflectionNormalizedDoubled<1.0){\nreflectionColor=mix(\nsampleReflection(reflectionSamplerHigh,reflectionCoords),\nreflectionSpecularMid,\nlodReflectionNormalizedDoubled\n);\n} else {\nreflectionColor=mix(\nreflectionSpecularMid,\nsampleReflection(reflectionSamplerLow,reflectionCoords),\nlodReflectionNormalizedDoubled-1.0\n);\n}\n#endif\n#else\nvec4 reflectionSample=sampleReflection(reflectionSampler,reflectionCoords);\nreflectionColor=reflectionSample;\n#endif\n#ifdef RGBDREFLECTION\nreflectionColor.rgb=fromRGBD(reflectionColor);\n#endif\n#ifdef GAMMAREFLECTION\nreflectionColor.rgb=toLinearSpace(reflectionColor.rgb);\n#endif\n#ifdef REFLECTIONBGR\nreflectionColor.rgb=reflectionColor.bgr;\n#endif\n\nreflectionColor.rgb*=vReflectionInfos.x;\n#endif\n\nvec3 diffuseColor=vec3(1.,1.,1.);\nfloat finalAlpha=alpha;\n#ifdef DIFFUSE\nvec4 diffuseMap=texture2D(diffuseSampler,vDiffuseUV);\n#ifdef GAMMADIFFUSE\ndiffuseMap.rgb=toLinearSpace(diffuseMap.rgb);\n#endif\n\ndiffuseMap.rgb*=vDiffuseInfos.y;\n#ifdef DIFFUSEHASALPHA\nfinalAlpha*=diffuseMap.a;\n#endif\ndiffuseColor=diffuseMap.rgb;\n#endif\n\n#ifdef REFLECTIONFRESNEL\nvec3 colorBase=diffuseColor;\n#else\nvec3 colorBase=reflectionColor.rgb*diffuseColor;\n#endif\ncolorBase=max(colorBase,0.0);\n\n#ifdef USERGBCOLOR\nvec3 finalColor=colorBase;\n#else\n#ifdef USEHIGHLIGHTANDSHADOWCOLORS\nvec3 mainColor=mix(vPrimaryColorShadow.rgb,vPrimaryColor.rgb,colorBase);\n#else\nvec3 mainColor=vPrimaryColor.rgb;\n#endif\nvec3 finalColor=colorBase*mainColor;\n#endif\n\n#ifdef REFLECTIONFRESNEL\nvec3 reflectionAmount=vReflectionControl.xxx;\nvec3 reflectionReflectance0=vReflectionControl.yyy;\nvec3 reflectionReflectance90=vReflectionControl.zzz;\nfloat VdotN=dot(normalize(vEyePosition),normalW);\nvec3 planarReflectionFresnel=fresnelSchlickEnvironmentGGX(saturate(VdotN),reflectionReflectance0,reflectionReflectance90,1.0);\nreflectionAmount*=planarReflectionFresnel;\n#ifdef REFLECTIONFALLOFF\nfloat reflectionDistanceFalloff=1.0-saturate(length(vPositionW.xyz-vBackgroundCenter)*vReflectionControl.w);\nreflectionDistanceFalloff*=reflectionDistanceFalloff;\nreflectionAmount*=reflectionDistanceFalloff;\n#endif\nfinalColor=mix(finalColor,reflectionColor.rgb,saturate(reflectionAmount));\n#endif\n#ifdef OPACITYFRESNEL\nfloat viewAngleToFloor=dot(normalW,normalize(vEyePosition-vBackgroundCenter));\n\nconst float startAngle=0.1;\nfloat fadeFactor=saturate(viewAngleToFloor/startAngle);\nfinalAlpha*=fadeFactor*fadeFactor;\n#endif\n\n#ifdef SHADOWINUSE\nfinalColor=mix(finalColor*shadowLevel,finalColor,globalShadow);\n#endif\n\nvec4 color=vec4(finalColor,finalAlpha);\n#include<fogFragment>\n#ifdef IMAGEPROCESSINGPOSTPROCESS\n\n\ncolor.rgb=clamp(color.rgb,0.,30.0);\n#else\n\ncolor=applyImageProcessing(color);\n#endif\n#ifdef PREMULTIPLYALPHA\n\ncolor.rgb*=color.a;\n#endif\n#ifdef NOISE\ncolor.rgb+=dither(vPositionW.xy,0.5);\ncolor=max(color,0.0);\n#endif\ngl_FragColor=color;\n}\n",jt.a.IncludesShadersStore.backgroundVertexDeclaration="uniform mat4 view;\nuniform mat4 viewProjection;\nuniform float shadowLevel;\n#ifdef DIFFUSE\nuniform mat4 diffuseMatrix;\nuniform vec2 vDiffuseInfos;\n#endif\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\nuniform mat4 reflectionMatrix;\nuniform vec3 vReflectionMicrosurfaceInfos;\nuniform float fFovMultiplier;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif",n(67),n(68),n(96),n(100),n(69),n(70),n(90),n(116),n(117),jt.a.ShadersStore.backgroundVertexShader="precision highp float;\n#include<__decl__backgroundVertex>\n#include<helperFunctions>\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\n\nvarying vec3 vPositionW;\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0\nvarying vec2 vDiffuseUV;\n#endif\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\nvoid main(void) {\n#ifdef REFLECTIONMAP_SKYBOX\n#ifdef REFLECTIONMAP_SKYBOX_TRANSFORMED\nvPositionUVW=(reflectionMatrix*vec4(position,1.0)).xyz;\n#else\nvPositionUVW=position;\n#endif\n#endif\n#include<instancesVertex>\n#include<bonesVertex>\n#ifdef MULTIVIEW\nif (gl_ViewID_OVR == 0u) {\ngl_Position=viewProjection*finalWorld*vec4(position,1.0);\n} else {\ngl_Position=viewProjectionR*finalWorld*vec4(position,1.0);\n}\n#else\ngl_Position=viewProjection*finalWorld*vec4(position,1.0);\n#endif\nvec4 worldPos=finalWorld*vec4(position,1.0);\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nmat3 normalWorld=mat3(finalWorld);\n#ifdef NONUNIFORMSCALING\nnormalWorld=transposeMat3(inverseMat3(normalWorld));\n#endif\nvNormalW=normalize(normalWorld*normal);\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvDirectionW=normalize(vec3(finalWorld*vec4(position,0.0)));\n#ifdef EQUIRECTANGULAR_RELFECTION_FOV\nmat3 screenToWorld=inverseMat3(mat3(finalWorld*viewProjection));\nvec3 segment=mix(vDirectionW,screenToWorld*vec3(0.0,0.0,1.0),abs(fFovMultiplier-1.0));\nif (fFovMultiplier<=1.0) {\nvDirectionW=normalize(segment);\n} else {\nvDirectionW=normalize(vDirectionW+(vDirectionW-segment));\n}\n#endif\n#endif\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef MAINUV1\nvMainUV1=uv;\n#endif\n#ifdef MAINUV2\nvMainUV2=uv2;\n#endif\n#if defined(DIFFUSE) && DIFFUSEDIRECTUV == 0\nif (vDiffuseInfos.x == 0.)\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvDiffuseUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n}\n";var Qr=function(e){function t(){var t=e.call(this)||this;return t.DIFFUSE=!1,t.DIFFUSEDIRECTUV=0,t.GAMMADIFFUSE=!1,t.DIFFUSEHASALPHA=!1,t.OPACITYFRESNEL=!1,t.REFLECTIONBLUR=!1,t.REFLECTIONFRESNEL=!1,t.REFLECTIONFALLOFF=!1,t.TEXTURELODSUPPORT=!1,t.PREMULTIPLYALPHA=!1,t.USERGBCOLOR=!1,t.USEHIGHLIGHTANDSHADOWCOLORS=!1,t.NOISE=!1,t.REFLECTIONBGR=!1,t.IMAGEPROCESSING=!1,t.VIGNETTE=!1,t.VIGNETTEBLENDMODEMULTIPLY=!1,t.VIGNETTEBLENDMODEOPAQUE=!1,t.TONEMAPPING=!1,t.TONEMAPPING_ACES=!1,t.CONTRAST=!1,t.COLORCURVES=!1,t.COLORGRADING=!1,t.COLORGRADING3D=!1,t.SAMPLER3DGREENDEPTH=!1,t.SAMPLER3DBGRMAP=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.EXPOSURE=!1,t.MULTIVIEW=!1,t.REFLECTION=!1,t.REFLECTIONMAP_3D=!1,t.REFLECTIONMAP_SPHERICAL=!1,t.REFLECTIONMAP_PLANAR=!1,t.REFLECTIONMAP_CUBIC=!1,t.REFLECTIONMAP_PROJECTION=!1,t.REFLECTIONMAP_SKYBOX=!1,t.REFLECTIONMAP_SKYBOX_TRANSFORMED=!1,t.REFLECTIONMAP_EXPLICIT=!1,t.REFLECTIONMAP_EQUIRECTANGULAR=!1,t.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,t.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,t.INVERTCUBICMAP=!1,t.REFLECTIONMAP_OPPOSITEZ=!1,t.LODINREFLECTIONALPHA=!1,t.GAMMAREFLECTION=!1,t.RGBDREFLECTION=!1,t.EQUIRECTANGULAR_RELFECTION_FOV=!1,t.MAINUV1=!1,t.MAINUV2=!1,t.UV1=!1,t.UV2=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.POINTSIZE=!1,t.FOG=!1,t.NORMAL=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.INSTANCES=!1,t.SHADOWFLOAT=!1,t.rebuild(),t}return l.d(t,e),t}(Wr.a),qr=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.primaryColor=o.e.White(),r._primaryColorShadowLevel=0,r._primaryColorHighlightLevel=0,r.reflectionTexture=null,r.reflectionBlur=0,r.diffuseTexture=null,r._shadowLights=null,r.shadowLights=null,r.shadowLevel=0,r.sceneCenter=o.x.Zero(),r.opacityFresnel=!0,r.reflectionFresnel=!1,r.reflectionFalloffDistance=0,r.reflectionAmount=1,r.reflectionReflectance0=.05,r.reflectionReflectance90=.5,r.useRGBColor=!0,r.enableNoise=!1,r._fovMultiplier=1,r.useEquirectangularFOV=!1,r._maxSimultaneousLights=4,r.maxSimultaneousLights=4,r._imageProcessingObserver=null,r.switchToBGR=!1,r._renderTargets=new Gt.a(16),r._reflectionControls=o.y.Zero(),r._white=o.e.White(),r._primaryShadowColor=o.e.Black(),r._primaryHighlightColor=o.e.Black(),r._attachImageProcessingConfiguration(null),r.getRenderTargetTextures=function(){return r._renderTargets.reset(),r._diffuseTexture&&r._diffuseTexture.isRenderTarget&&r._renderTargets.push(r._diffuseTexture),r._reflectionTexture&&r._reflectionTexture.isRenderTarget&&r._renderTargets.push(r._reflectionTexture),r._renderTargets},r}return l.d(t,e),Object.defineProperty(t.prototype,"_perceptualColor",{get:function(){return this.__perceptualColor},set:function(e){this.__perceptualColor=e,this._computePrimaryColorFromPerceptualColor(),this._markAllSubMeshesAsLightsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primaryColorShadowLevel",{get:function(){return this._primaryColorShadowLevel},set:function(e){this._primaryColorShadowLevel=e,this._computePrimaryColors(),this._markAllSubMeshesAsLightsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primaryColorHighlightLevel",{get:function(){return this._primaryColorHighlightLevel},set:function(e){this._primaryColorHighlightLevel=e,this._computePrimaryColors(),this._markAllSubMeshesAsLightsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"reflectionStandardFresnelWeight",{set:function(e){var n=e;n<.5?(this.reflectionReflectance0=t.StandardReflectance0*(n*=2),this.reflectionReflectance90=t.StandardReflectance90*n):(this.reflectionReflectance0=t.StandardReflectance0+(1-t.StandardReflectance0)*(n=2*n-1),this.reflectionReflectance90=t.StandardReflectance90+(1-t.StandardReflectance90)*n)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fovMultiplier",{get:function(){return this._fovMultiplier},set:function(e){isNaN(e)&&(e=1),this._fovMultiplier=Math.max(0,Math.min(2,e))},enumerable:!0,configurable:!0}),t.prototype._attachImageProcessingConfiguration=function(e){var t=this;e!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=e||this.getScene().imageProcessingConfiguration,this._imageProcessingConfiguration&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add(function(){t._computePrimaryColorFromPerceptualColor(),t._markAllSubMeshesAsImageProcessingDirty()})))},Object.defineProperty(t.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(e){this._attachImageProcessingConfiguration(e),this._markAllSubMeshesAsTexturesDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraColorCurvesEnabled",{get:function(){return this.imageProcessingConfiguration.colorCurvesEnabled},set:function(e){this.imageProcessingConfiguration.colorCurvesEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraColorGradingEnabled",{get:function(){return this.imageProcessingConfiguration.colorGradingEnabled},set:function(e){this.imageProcessingConfiguration.colorGradingEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraToneMappingEnabled",{get:function(){return this._imageProcessingConfiguration.toneMappingEnabled},set:function(e){this._imageProcessingConfiguration.toneMappingEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraExposure",{get:function(){return this._imageProcessingConfiguration.exposure},set:function(e){this._imageProcessingConfiguration.exposure=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraContrast",{get:function(){return this._imageProcessingConfiguration.contrast},set:function(e){this._imageProcessingConfiguration.contrast=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraColorGradingTexture",{get:function(){return this._imageProcessingConfiguration.colorGradingTexture},set:function(e){this.imageProcessingConfiguration.colorGradingTexture=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraColorCurves",{get:function(){return this.imageProcessingConfiguration.colorCurves},set:function(e){this.imageProcessingConfiguration.colorCurves=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasRenderTargetTextures",{get:function(){return!(!this._diffuseTexture||!this._diffuseTexture.isRenderTarget)||!(!this._reflectionTexture||!this._reflectionTexture.isRenderTarget)},enumerable:!0,configurable:!0}),t.prototype.needAlphaTesting=function(){return!0},t.prototype.needAlphaBlending=function(){return this.alpha<0||null!=this._diffuseTexture&&this._diffuseTexture.hasAlpha},t.prototype.isReadyForSubMesh=function(e,t,n){var r=this;if(void 0===n&&(n=!1),t.effect&&this.isFrozen&&this._wasPreviouslyReady)return!0;t._materialDefines||(t._materialDefines=new Qr);var i=this.getScene(),o=t._materialDefines;if(!this.checkReadyOnEveryCall&&t.effect&&o._renderId===i.getRenderId())return!0;var a=i.getEngine();if(Hr.a.PrepareDefinesForLights(i,e,o,!1,this._maxSimultaneousLights),o._needNormals=!0,Hr.a.PrepareDefinesForMultiview(i,o),o._areTexturesDirty){if(o._needUVs=!1,i.texturesEnabled){if(i.getEngine().getCaps().textureLOD&&(o.TEXTURELODSUPPORT=!0),this._diffuseTexture&&Kr.a.DiffuseTextureEnabled){if(!this._diffuseTexture.isReadyOrNotBlocking())return!1;Hr.a.PrepareDefinesForMergedUV(this._diffuseTexture,o,"DIFFUSE"),o.DIFFUSEHASALPHA=this._diffuseTexture.hasAlpha,o.GAMMADIFFUSE=this._diffuseTexture.gammaSpace,o.OPACITYFRESNEL=this._opacityFresnel}else o.DIFFUSE=!1,o.DIFFUSEHASALPHA=!1,o.GAMMADIFFUSE=!1,o.OPACITYFRESNEL=!1;var s=this._reflectionTexture;if(s&&Kr.a.ReflectionTextureEnabled){if(!s.isReadyOrNotBlocking())return!1;switch(o.REFLECTION=!0,o.GAMMAREFLECTION=s.gammaSpace,o.RGBDREFLECTION=s.isRGBD,o.REFLECTIONBLUR=this._reflectionBlur>0,o.REFLECTIONMAP_OPPOSITEZ=this.getScene().useRightHandedSystem?!s.invertZ:s.invertZ,o.LODINREFLECTIONALPHA=s.lodLevelInAlpha,o.EQUIRECTANGULAR_RELFECTION_FOV=this.useEquirectangularFOV,o.REFLECTIONBGR=this.switchToBGR,s.coordinatesMode===Ge.a.INVCUBIC_MODE&&(o.INVERTCUBICMAP=!0),o.REFLECTIONMAP_3D=s.isCube,s.coordinatesMode){case Ge.a.EXPLICIT_MODE:o.REFLECTIONMAP_EXPLICIT=!0;break;case Ge.a.PLANAR_MODE:o.REFLECTIONMAP_PLANAR=!0;break;case Ge.a.PROJECTION_MODE:o.REFLECTIONMAP_PROJECTION=!0;break;case Ge.a.SKYBOX_MODE:o.REFLECTIONMAP_SKYBOX=!0,o.REFLECTIONMAP_SKYBOX_TRANSFORMED=!s.getReflectionTextureMatrix().isIdentity();break;case Ge.a.SPHERICAL_MODE:o.REFLECTIONMAP_SPHERICAL=!0;break;case Ge.a.EQUIRECTANGULAR_MODE:o.REFLECTIONMAP_EQUIRECTANGULAR=!0;break;case Ge.a.FIXED_EQUIRECTANGULAR_MODE:o.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!0;break;case Ge.a.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:o.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!0;break;case Ge.a.CUBIC_MODE:case Ge.a.INVCUBIC_MODE:default:o.REFLECTIONMAP_CUBIC=!0}this.reflectionFresnel?(o.REFLECTIONFRESNEL=!0,o.REFLECTIONFALLOFF=this.reflectionFalloffDistance>0,this._reflectionControls.x=this.reflectionAmount,this._reflectionControls.y=this.reflectionReflectance0,this._reflectionControls.z=this.reflectionReflectance90,this._reflectionControls.w=1/this.reflectionFalloffDistance):(o.REFLECTIONFRESNEL=!1,o.REFLECTIONFALLOFF=!1)}else o.REFLECTION=!1,o.REFLECTIONFRESNEL=!1,o.REFLECTIONFALLOFF=!1,o.REFLECTIONBLUR=!1,o.REFLECTIONMAP_3D=!1,o.REFLECTIONMAP_SPHERICAL=!1,o.REFLECTIONMAP_PLANAR=!1,o.REFLECTIONMAP_CUBIC=!1,o.REFLECTIONMAP_PROJECTION=!1,o.REFLECTIONMAP_SKYBOX=!1,o.REFLECTIONMAP_SKYBOX_TRANSFORMED=!1,o.REFLECTIONMAP_EXPLICIT=!1,o.REFLECTIONMAP_EQUIRECTANGULAR=!1,o.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,o.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,o.INVERTCUBICMAP=!1,o.REFLECTIONMAP_OPPOSITEZ=!1,o.LODINREFLECTIONALPHA=!1,o.GAMMAREFLECTION=!1,o.RGBDREFLECTION=!1}o.PREMULTIPLYALPHA=this.alphaMode===_.a.ALPHA_PREMULTIPLIED||this.alphaMode===_.a.ALPHA_PREMULTIPLIED_PORTERDUFF,o.USERGBCOLOR=this._useRGBColor,o.NOISE=this._enableNoise}if(o._areLightsDirty&&(o.USEHIGHLIGHTANDSHADOWCOLORS=!this._useRGBColor&&(0!==this._primaryColorShadowLevel||0!==this._primaryColorHighlightLevel)),o._areImageProcessingDirty&&this._imageProcessingConfiguration){if(!this._imageProcessingConfiguration.isReady())return!1;this._imageProcessingConfiguration.prepareDefines(o)}if(Hr.a.PrepareDefinesForMisc(e,i,!1,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e),o),Hr.a.PrepareDefinesForFrameBoundValues(i,a,o,n),Hr.a.PrepareDefinesForAttributes(e,o,!1,!0,!1)&&e&&(i.getEngine().getCaps().standardDerivatives||e.isVerticesDataPresent(Mn.b.NormalKind)||(e.createNormals(!0),p.a.Warn("BackgroundMaterial: Normals have been created for the mesh: "+e.name))),o.isDirty){o.markAsProcessed(),i.resetCachedMaterial();var u=new jt.c;o.FOG&&u.addFallback(0,"FOG"),o.POINTSIZE&&u.addFallback(1,"POINTSIZE"),o.MULTIVIEW&&u.addFallback(0,"MULTIVIEW"),Hr.a.HandleFallbacksForShadows(o,u,this._maxSimultaneousLights),o.NUM_BONE_INFLUENCERS>0&&u.addCPUSkinningFallback(0,e);var l=[Mn.b.PositionKind];o.NORMAL&&l.push(Mn.b.NormalKind),o.UV1&&l.push(Mn.b.UVKind),o.UV2&&l.push(Mn.b.UV2Kind),Hr.a.PrepareAttributesForBones(l,e,o,u),Hr.a.PrepareAttributesForInstances(l,o);var c=["world","view","viewProjection","vEyePosition","vLightsType","vFogInfos","vFogColor","pointSize","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","mBones","vPrimaryColor","vPrimaryColorShadow","vReflectionInfos","reflectionMatrix","vReflectionMicrosurfaceInfos","fFovMultiplier","shadowLevel","alpha","vBackgroundCenter","vReflectionControl","vDiffuseInfos","diffuseMatrix"],h=["diffuseSampler","reflectionSampler","reflectionSamplerLow","reflectionSamplerHigh"],d=["Material","Scene"];vn.a&&(vn.a.PrepareUniforms(c,o),vn.a.PrepareSamplers(h,o)),Hr.a.PrepareUniformsAndSamplersList({uniformsNames:c,uniformBuffersNames:d,samplers:h,defines:o,maxSimultaneousLights:this._maxSimultaneousLights});var f=o.toString();t.setEffect(i.getEngine().createEffect("background",{attributes:l,uniformsNames:c,uniformBuffersNames:d,samplers:h,defines:f,fallbacks:u,onCompiled:function(e){r.onCompiled&&r.onCompiled(e),r.bindSceneUniformBuffer(e,i.getSceneUniformBuffer())},onError:this.onError,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights}},a),o),this.buildUniformLayout()}return!(!t.effect||!t.effect.isReady()||(o._renderId=i.getRenderId(),this._wasPreviouslyReady=!0,0))},t.prototype._computePrimaryColorFromPerceptualColor=function(){this.__perceptualColor&&(this._primaryColor.copyFrom(this.__perceptualColor),this._primaryColor.toLinearSpaceToRef(this._primaryColor),this._imageProcessingConfiguration&&this._primaryColor.scaleToRef(1/this._imageProcessingConfiguration.exposure,this._primaryColor),this._computePrimaryColors())},t.prototype._computePrimaryColors=function(){0===this._primaryColorShadowLevel&&0===this._primaryColorHighlightLevel||(this._primaryColor.scaleToRef(this._primaryColorShadowLevel,this._primaryShadowColor),this._primaryColor.subtractToRef(this._primaryShadowColor,this._primaryShadowColor),this._white.subtractToRef(this._primaryColor,this._primaryHighlightColor),this._primaryHighlightColor.scaleToRef(this._primaryColorHighlightLevel,this._primaryHighlightColor),this._primaryColor.addToRef(this._primaryHighlightColor,this._primaryHighlightColor))},t.prototype.buildUniformLayout=function(){this._uniformBuffer.addUniform("vPrimaryColor",4),this._uniformBuffer.addUniform("vPrimaryColorShadow",4),this._uniformBuffer.addUniform("vDiffuseInfos",2),this._uniformBuffer.addUniform("vReflectionInfos",2),this._uniformBuffer.addUniform("diffuseMatrix",16),this._uniformBuffer.addUniform("reflectionMatrix",16),this._uniformBuffer.addUniform("vReflectionMicrosurfaceInfos",3),this._uniformBuffer.addUniform("fFovMultiplier",1),this._uniformBuffer.addUniform("pointSize",1),this._uniformBuffer.addUniform("shadowLevel",1),this._uniformBuffer.addUniform("alpha",1),this._uniformBuffer.addUniform("vBackgroundCenter",3),this._uniformBuffer.addUniform("vReflectionControl",4),this._uniformBuffer.create()},t.prototype.unbind=function(){this._diffuseTexture&&this._diffuseTexture.isRenderTarget&&this._uniformBuffer.setTexture("diffuseSampler",null),this._reflectionTexture&&this._reflectionTexture.isRenderTarget&&this._uniformBuffer.setTexture("reflectionSampler",null),e.prototype.unbind.call(this)},t.prototype.bindOnlyWorldMatrix=function(e){this._activeEffect.setMatrix("world",e)},t.prototype.bindForSubMesh=function(e,t,n){var r=this.getScene(),i=n._materialDefines;if(i){var o=n.effect;if(o){this._activeEffect=o,this.bindOnlyWorldMatrix(e),Hr.a.BindBonesParameters(t,this._activeEffect);var a=this._mustRebind(r,o,t.visibility);if(a){this._uniformBuffer.bindToEffect(o,"Material"),this.bindViewProjection(o);var s=this._reflectionTexture;this._uniformBuffer.useUbo&&this.isFrozen&&this._uniformBuffer.isSync||(r.texturesEnabled&&(this._diffuseTexture&&Kr.a.DiffuseTextureEnabled&&(this._uniformBuffer.updateFloat2("vDiffuseInfos",this._diffuseTexture.coordinatesIndex,this._diffuseTexture.level),Hr.a.BindTextureMatrix(this._diffuseTexture,this._uniformBuffer,"diffuse")),s&&Kr.a.ReflectionTextureEnabled&&(this._uniformBuffer.updateMatrix("reflectionMatrix",s.getReflectionTextureMatrix()),this._uniformBuffer.updateFloat2("vReflectionInfos",s.level,this._reflectionBlur),this._uniformBuffer.updateFloat3("vReflectionMicrosurfaceInfos",s.getSize().width,s.lodGenerationScale,s.lodGenerationOffset))),this.shadowLevel>0&&this._uniformBuffer.updateFloat("shadowLevel",this.shadowLevel),this._uniformBuffer.updateFloat("alpha",this.alpha),this.pointsCloud&&this._uniformBuffer.updateFloat("pointSize",this.pointSize),i.USEHIGHLIGHTANDSHADOWCOLORS?(this._uniformBuffer.updateColor4("vPrimaryColor",this._primaryHighlightColor,1),this._uniformBuffer.updateColor4("vPrimaryColorShadow",this._primaryShadowColor,1)):this._uniformBuffer.updateColor4("vPrimaryColor",this._primaryColor,1)),this._uniformBuffer.updateFloat("fFovMultiplier",this._fovMultiplier),r.texturesEnabled&&(this._diffuseTexture&&Kr.a.DiffuseTextureEnabled&&this._uniformBuffer.setTexture("diffuseSampler",this._diffuseTexture),s&&Kr.a.ReflectionTextureEnabled&&(i.REFLECTIONBLUR&&i.TEXTURELODSUPPORT?this._uniformBuffer.setTexture("reflectionSampler",s):i.REFLECTIONBLUR?(this._uniformBuffer.setTexture("reflectionSampler",s._lodTextureMid||s),this._uniformBuffer.setTexture("reflectionSamplerLow",s._lodTextureLow||s),this._uniformBuffer.setTexture("reflectionSamplerHigh",s._lodTextureHigh||s)):this._uniformBuffer.setTexture("reflectionSampler",s),i.REFLECTIONFRESNEL&&(this._uniformBuffer.updateFloat3("vBackgroundCenter",this.sceneCenter.x,this.sceneCenter.y,this.sceneCenter.z),this._uniformBuffer.updateFloat4("vReflectionControl",this._reflectionControls.x,this._reflectionControls.y,this._reflectionControls.z,this._reflectionControls.w)))),Hr.a.BindClipPlane(this._activeEffect,r),Hr.a.BindEyePosition(o,r)}!a&&this.isFrozen||(r.lightsEnabled&&Hr.a.BindLights(r,t,this._activeEffect,i,this._maxSimultaneousLights,!1),this.bindView(o),Hr.a.BindFogParameters(r,t,this._activeEffect,!0),this._imageProcessingConfiguration&&this._imageProcessingConfiguration.bind(this._activeEffect)),this._uniformBuffer.update(),this._afterBind(t,this._activeEffect)}}},t.prototype.dispose=function(t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),n&&(this.diffuseTexture&&this.diffuseTexture.dispose(),this.reflectionTexture&&this.reflectionTexture.dispose()),this._renderTargets.dispose(),this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),e.prototype.dispose.call(this,t)},t.prototype.clone=function(e){var n=this;return L.a.Clone(function(){return new t(e,n.getScene())},this)},t.prototype.serialize=function(){var e=L.a.Serialize(this);return e.customType="BABYLON.BackgroundMaterial",e},t.prototype.getClassName=function(){return"BackgroundMaterial"},t.Parse=function(e,n,r){return L.a.Parse(function(){return new t(e.name,n)},e,n,r)},t.StandardReflectance0=.05,t.StandardReflectance90=.5,l.c([Object(L.e)()],t.prototype,"_primaryColor",void 0),l.c([Object(L.b)("_markAllSubMeshesAsLightsDirty")],t.prototype,"primaryColor",void 0),l.c([Object(L.e)()],t.prototype,"__perceptualColor",void 0),l.c([Object(L.c)()],t.prototype,"_primaryColorShadowLevel",void 0),l.c([Object(L.c)()],t.prototype,"_primaryColorHighlightLevel",void 0),l.c([Object(L.b)("_markAllSubMeshesAsLightsDirty")],t.prototype,"primaryColorHighlightLevel",null),l.c([Object(L.m)()],t.prototype,"_reflectionTexture",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectionTexture",void 0),l.c([Object(L.c)()],t.prototype,"_reflectionBlur",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectionBlur",void 0),l.c([Object(L.m)()],t.prototype,"_diffuseTexture",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"diffuseTexture",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"shadowLights",void 0),l.c([Object(L.c)()],t.prototype,"_shadowLevel",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"shadowLevel",void 0),l.c([Object(L.o)()],t.prototype,"_sceneCenter",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"sceneCenter",void 0),l.c([Object(L.c)()],t.prototype,"_opacityFresnel",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"opacityFresnel",void 0),l.c([Object(L.c)()],t.prototype,"_reflectionFresnel",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectionFresnel",void 0),l.c([Object(L.c)()],t.prototype,"_reflectionFalloffDistance",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectionFalloffDistance",void 0),l.c([Object(L.c)()],t.prototype,"_reflectionAmount",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectionAmount",void 0),l.c([Object(L.c)()],t.prototype,"_reflectionReflectance0",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectionReflectance0",void 0),l.c([Object(L.c)()],t.prototype,"_reflectionReflectance90",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectionReflectance90",void 0),l.c([Object(L.c)()],t.prototype,"_useRGBColor",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useRGBColor",void 0),l.c([Object(L.c)()],t.prototype,"_enableNoise",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"enableNoise",void 0),l.c([Object(L.c)()],t.prototype,"_maxSimultaneousLights",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"maxSimultaneousLights",void 0),l.c([Object(L.i)()],t.prototype,"_imageProcessingConfiguration",void 0),t}(Xr.a);a.a.RegisteredTypes["BABYLON.BackgroundMaterial"]=qr;var Zr=n(80),Jr=function(){function e(t,n){var r=this;this._errorHandler=function(e,t){r.onErrorObservable.notifyObservers({message:e,exception:t})},this._options=l.a({},e._getDefaultOptions(),t),this._scene=n,this.onErrorObservable=new i.c,this._setupBackground(),this._setupImageProcessing()}return e._getDefaultOptions=function(){return{createGround:!0,groundSize:15,groundTexture:this._groundTextureCDNUrl,groundColor:new o.e(.2,.2,.3).toLinearSpace().scale(3),groundOpacity:.9,enableGroundShadow:!0,groundShadowLevel:.5,enableGroundMirror:!1,groundMirrorSizeRatio:.3,groundMirrorBlurKernel:64,groundMirrorAmount:1,groundMirrorFresnelWeight:1,groundMirrorFallOffDistance:0,groundMirrorTextureType:_.a.TEXTURETYPE_UNSIGNED_INT,groundYBias:1e-5,createSkybox:!0,skyboxSize:20,skyboxTexture:this._skyboxTextureCDNUrl,skyboxColor:new o.e(.2,.2,.3).toLinearSpace().scale(3),backgroundYRotation:0,sizeAuto:!0,rootPosition:o.x.Zero(),setupImageProcessing:!0,environmentTexture:this._environmentTextureCDNUrl,cameraExposure:.8,cameraContrast:1.2,toneMappingEnabled:!0}},Object.defineProperty(e.prototype,"rootMesh",{get:function(){return this._rootMesh},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skybox",{get:function(){return this._skybox},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skyboxTexture",{get:function(){return this._skyboxTexture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skyboxMaterial",{get:function(){return this._skyboxMaterial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ground",{get:function(){return this._ground},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groundTexture",{get:function(){return this._groundTexture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groundMirror",{get:function(){return this._groundMirror},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groundMirrorRenderList",{get:function(){return this._groundMirror?this._groundMirror.renderList:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groundMaterial",{get:function(){return this._groundMaterial},enumerable:!0,configurable:!0}),e.prototype.updateOptions=function(e){var t=l.a({},this._options,e);this._ground&&!t.createGround&&(this._ground.dispose(),this._ground=null),this._groundMaterial&&!t.createGround&&(this._groundMaterial.dispose(),this._groundMaterial=null),this._groundTexture&&this._options.groundTexture!=t.groundTexture&&(this._groundTexture.dispose(),this._groundTexture=null),this._skybox&&!t.createSkybox&&(this._skybox.dispose(),this._skybox=null),this._skyboxMaterial&&!t.createSkybox&&(this._skyboxMaterial.dispose(),this._skyboxMaterial=null),this._skyboxTexture&&this._options.skyboxTexture!=t.skyboxTexture&&(this._skyboxTexture.dispose(),this._skyboxTexture=null),this._groundMirror&&!t.enableGroundMirror&&(this._groundMirror.dispose(),this._groundMirror=null),this._scene.environmentTexture&&this._options.environmentTexture!=t.environmentTexture&&this._scene.environmentTexture.dispose(),this._options=t,this._setupBackground(),this._setupImageProcessing()},e.prototype.setMainColor=function(e){this.groundMaterial&&(this.groundMaterial.primaryColor=e),this.skyboxMaterial&&(this.skyboxMaterial.primaryColor=e),this.groundMirror&&(this.groundMirror.clearColor=new o.f(e.r,e.g,e.b,1))},e.prototype._setupImageProcessing=function(){this._options.setupImageProcessing&&(this._scene.imageProcessingConfiguration.contrast=this._options.cameraContrast,this._scene.imageProcessingConfiguration.exposure=this._options.cameraExposure,this._scene.imageProcessingConfiguration.toneMappingEnabled=this._options.toneMappingEnabled,this._setupEnvironmentTexture())},e.prototype._setupEnvironmentTexture=function(){if(!this._scene.environmentTexture)if(this._options.environmentTexture instanceof Gr.a)this._scene.environmentTexture=this._options.environmentTexture;else{var e=Yr.CreateFromPrefilteredData(this._options.environmentTexture,this._scene);this._scene.environmentTexture=e}},e.prototype._setupBackground=function(){this._rootMesh||(this._rootMesh=new fe.a("BackgroundHelper",this._scene)),this._rootMesh.rotation.y=this._options.backgroundYRotation;var e=this._getSceneSize();this._options.createGround&&(this._setupGround(e),this._setupGroundMaterial(),this._setupGroundDiffuseTexture(),this._options.enableGroundMirror&&this._setupGroundMirrorTexture(e),this._setupMirrorInGroundMaterial()),this._options.createSkybox&&(this._setupSkybox(e),this._setupSkyboxMaterial(),this._setupSkyboxReflectionTexture()),this._rootMesh.position.x=e.rootPosition.x,this._rootMesh.position.z=e.rootPosition.z,this._rootMesh.position.y=e.rootPosition.y},e.prototype._getSceneSize=function(){var e=this,t=this._options.groundSize,n=this._options.skyboxSize,r=this._options.rootPosition;if(!this._scene.meshes||1===this._scene.meshes.length)return{groundSize:t,skyboxSize:n,rootPosition:r};var i=this._scene.getWorldExtends(function(t){return t!==e._ground&&t!==e._rootMesh&&t!==e._skybox}),o=i.max.subtract(i.min);if(this._options.sizeAuto){this._scene.activeCamera instanceof Et&&this._scene.activeCamera.upperRadiusLimit&&(n=t=2*this._scene.activeCamera.upperRadiusLimit);var a=o.length();a>t&&(n=t=2*a),t*=1.1,n*=1.5,(r=i.min.add(o.scale(.5))).y=i.min.y-this._options.groundYBias}return{groundSize:t,skyboxSize:n,rootPosition:r}},e.prototype._setupGround=function(e){var t=this;this._ground&&!this._ground.isDisposed()||(this._ground=fe.a.CreatePlane("BackgroundPlane",e.groundSize,this._scene),this._ground.rotation.x=Math.PI/2,this._ground.parent=this._rootMesh,this._ground.onDisposeObservable.add(function(){t._ground=null})),this._ground.receiveShadows=this._options.enableGroundShadow},e.prototype._setupGroundMaterial=function(){this._groundMaterial||(this._groundMaterial=new qr("BackgroundPlaneMaterial",this._scene)),this._groundMaterial.alpha=this._options.groundOpacity,this._groundMaterial.alphaMode=_.a.ALPHA_PREMULTIPLIED_PORTERDUFF,this._groundMaterial.shadowLevel=this._options.groundShadowLevel,this._groundMaterial.primaryColor=this._options.groundColor,this._groundMaterial.useRGBColor=!1,this._groundMaterial.enableNoise=!0,this._ground&&(this._ground.material=this._groundMaterial)},e.prototype._setupGroundDiffuseTexture=function(){if(this._groundMaterial&&!this._groundTexture)if(this._options.groundTexture instanceof Gr.a)this._groundMaterial.diffuseTexture=this._options.groundTexture;else{var e=new Ge.a(this._options.groundTexture,this._scene,void 0,void 0,void 0,void 0,this._errorHandler);e.gammaSpace=!1,e.hasAlpha=!0,this._groundMaterial.diffuseTexture=e}},e.prototype._setupGroundMirrorTexture=function(e){var t=Ge.a.CLAMP_ADDRESSMODE;if(!this._groundMirror&&(this._groundMirror=new zr("BackgroundPlaneMirrorTexture",{ratio:this._options.groundMirrorSizeRatio},this._scene,!1,this._options.groundMirrorTextureType,Ge.a.BILINEAR_SAMPLINGMODE,!0),this._groundMirror.mirrorPlane=new o.n(0,-1,0,e.rootPosition.y),this._groundMirror.anisotropicFilteringLevel=1,this._groundMirror.wrapU=t,this._groundMirror.wrapV=t,this._groundMirror.gammaSpace=!1,this._groundMirror.renderList))for(var n=0;n<this._scene.meshes.length;n++){var r=this._scene.meshes[n];r!==this._ground&&r!==this._skybox&&r!==this._rootMesh&&this._groundMirror.renderList.push(r)}this._groundMirror.clearColor=new o.f(this._options.groundColor.r,this._options.groundColor.g,this._options.groundColor.b,1),this._groundMirror.adaptiveBlurKernel=this._options.groundMirrorBlurKernel},e.prototype._setupMirrorInGroundMaterial=function(){this._groundMaterial&&(this._groundMaterial.reflectionTexture=this._groundMirror,this._groundMaterial.reflectionFresnel=!0,this._groundMaterial.reflectionAmount=this._options.groundMirrorAmount,this._groundMaterial.reflectionStandardFresnelWeight=this._options.groundMirrorFresnelWeight,this._groundMaterial.reflectionFalloffDistance=this._options.groundMirrorFallOffDistance)},e.prototype._setupSkybox=function(e){var t=this;this._skybox&&!this._skybox.isDisposed()||(this._skybox=fe.a.CreateBox("BackgroundSkybox",e.skyboxSize,this._scene,void 0,fe.a.BACKSIDE),this._skybox.onDisposeObservable.add(function(){t._skybox=null})),this._skybox.parent=this._rootMesh},e.prototype._setupSkyboxMaterial=function(){this._skybox&&(this._skyboxMaterial||(this._skyboxMaterial=new qr("BackgroundSkyboxMaterial",this._scene)),this._skyboxMaterial.useRGBColor=!1,this._skyboxMaterial.primaryColor=this._options.skyboxColor,this._skyboxMaterial.enableNoise=!0,this._skybox.material=this._skyboxMaterial)},e.prototype._setupSkyboxReflectionTexture=function(){this._skyboxMaterial&&(this._skyboxTexture||(this._options.skyboxTexture instanceof Gr.a?this._skyboxMaterial.reflectionTexture=this._options.skyboxTexture:(this._skyboxTexture=new Yr(this._options.skyboxTexture,this._scene,void 0,void 0,void 0,void 0,this._errorHandler),this._skyboxTexture.coordinatesMode=Ge.a.SKYBOX_MODE,this._skyboxTexture.gammaSpace=!1,this._skyboxMaterial.reflectionTexture=this._skyboxTexture)))},e.prototype.dispose=function(){this._groundMaterial&&this._groundMaterial.dispose(!0,!0),this._skyboxMaterial&&this._skyboxMaterial.dispose(!0,!0),this._rootMesh.dispose(!1)},e._groundTextureCDNUrl="https://assets.babylonjs.com/environments/backgroundGround.png",e._skyboxTextureCDNUrl="https://assets.babylonjs.com/environments/backgroundSkybox.dds",e._environmentTextureCDNUrl="https://assets.babylonjs.com/environments/environmentSpecular.env",e}(),$r=n(42),ei=function(e){function t(t,n,r,a,s){void 0===s&&(s=null);var u=e.call(this,t,a)||this;u._useDirectMapping=!1,u.onLoadErrorObservable=new i.c,t=t||"photoDome",r.resolution=0|Math.abs(r.resolution)||32,r.size=Math.abs(r.size)||(a.activeCamera?.48*a.activeCamera.maxZ:1e3),u._useDirectMapping=void 0===r.useDirectMapping||r.useDirectMapping,void 0===r.faceForward&&(r.faceForward=!0),u._setReady(!1);var l=u._material=new qr(t+"_material",a);if(u._mesh=fe.a.CreateSphere(t+"_mesh",r.resolution,r.size,a,!1,fe.a.BACKSIDE),l.opacityFresnel=!1,l.useEquirectangularFOV=!0,l.fovMultiplier=1,u.photoTexture=new Ge.a(n,a,!0,!u._useDirectMapping,void 0,void 0,function(e,t){u.onLoadErrorObservable.notifyObservers(e||"Unknown error occured"),s&&s(e,t)}),u.photoTexture.onLoadObservable.addOnce(function(){u._setReady(!0)}),u._mesh.material=l,u._mesh.parent=u,r.faceForward&&a.activeCamera){var c=a.activeCamera,h=o.x.Forward(),d=o.x.TransformNormal(h,c.getViewMatrix());d.normalize(),u.rotation.y=Math.acos(o.x.Dot(h,d))}return u}return l.d(t,e),Object.defineProperty(t.prototype,"photoTexture",{get:function(){return this._photoTexture},set:function(e){this._photoTexture!==e&&(this._photoTexture=e,this._useDirectMapping?(this._photoTexture.wrapU=Ge.a.CLAMP_ADDRESSMODE,this._photoTexture.wrapV=Ge.a.CLAMP_ADDRESSMODE,this._material.diffuseTexture=this._photoTexture):(this._photoTexture.coordinatesMode=Ge.a.FIXED_EQUIRECTANGULAR_MIRRORED_MODE,this._photoTexture.wrapV=Ge.a.CLAMP_ADDRESSMODE,this._material.reflectionTexture=this._photoTexture))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fovMultiplier",{get:function(){return this._material.fovMultiplier},set:function(e){this._material.fovMultiplier=e},enumerable:!0,configurable:!0}),t.prototype.dispose=function(t,n){void 0===n&&(n=!1),this._photoTexture.dispose(),this._mesh.dispose(),this._material.dispose(),this.onLoadErrorObservable.clear(),e.prototype.dispose.call(this,t,n)},t}($r.a);jt.a.ShadersStore.rgbdDecodePixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n#include<helperFunctions>\nvoid main(void)\n{\ngl_FragColor=vec4(fromRGBD(texture2D(textureSampler,vUV)),1.0);\n}";var ti=function(){function e(){}return e._ExpandDefaultBRDFTexture=function(e){var t=e.getEngine(),n=t.getCaps(),r=!1;if(n.textureHalfFloatRender&&n.textureHalfFloatLinearFiltering?(r=!0,e.type=_.a.TEXTURETYPE_HALF_FLOAT):n.textureFloatRender&&n.textureFloatLinearFiltering&&(r=!0,e.type=_.a.TEXTURETYPE_FLOAT),r){e.isReady=!1;var i=new zt("rgbdDecode","rgbdDecode",null,null,1,null,_.a.TEXTURE_TRILINEAR_SAMPLINGMODE,t,!1,void 0,e.type,void 0,null,!1);e._isRGBD=!1,e.invertY=!1;var o=t.createRenderTargetTexture(e.width,{generateDepthBuffer:!1,generateMipMaps:!1,generateStencilBuffer:!1,samplingMode:_.a.TEXTURE_BILINEAR_SAMPLINGMODE,type:e.type,format:_.a.TEXTUREFORMAT_RGBA});i.getEffect().executeWhenCompiled(function(){i.onApply=function(t){t._bindTexture("textureSampler",e),t.setFloat2("scale",1,1)},t.scenes[0].postProcessManager.directRender([i],o,!0),t.restoreDefaultFramebuffer(),t._releaseTexture(e),t._releaseFramebufferObjects(o),i&&i.dispose(),o._swapAndDie(e),e.isReady=!0})}},e.GetEnvironmentBRDFTexture=function(e){var t=this;if(!e.environmentBRDFTexture){var n=e.useDelayedTextureLoading;e.useDelayedTextureLoading=!1;var r=Ge.a.CreateFromBase64String(this._environmentBRDFBase64Texture,"EnvironmentBRDFTexture",e,!0,!0,Ge.a.BILINEAR_SAMPLINGMODE);r._texture._isRGBD=!0,r.wrapU=Ge.a.CLAMP_ADDRESSMODE,r.wrapV=Ge.a.CLAMP_ADDRESSMODE,e.environmentBRDFTexture=r,e.useDelayedTextureLoading=n,r.onLoadObservable.addOnce(function(){t._ExpandDefaultBRDFTexture(r._texture)})}return e.environmentBRDFTexture},e._environmentBRDFBase64Texture="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAgAElEQVR4Xuy9Ccx261oW9q5v/r7/33ufgalSbWtiTJsmTZOmSdOkpVKsWhxAxIJFQaCKUkpFiiBFKjKPh3PO7hjb2LmNnYxtjbGtbY21rQGkgCgiIKPMM5x99ruatZ7puq/7up/nWd/3bzzABjb/9675Xeu5hnt41rv8s+evW9fz+ZT+W9N/63o6re3v+nlfvq2CbdZT2hbW7dukDbf/a/9uS3G7E69Ln9PifK50sHSMvD2ur3+XY/E2++dyPelDPoU7Jm9XTm2uab86vJ56gvSd80dzXflA+Zul74PHwGuGv/MXLv+kL4Lfp56r3DM8ef6utE10Xnu97fra7uWi2/etZ8BV/F3F+fdni/8Dn9O4KSvt/cxPMa+HY5Qx024OHF3cM7zHdcsy3uAeuu3wPve3S2OVthHH09v5e9BuCT0HHgPlHsjz+3uxNALYAJ9JgAigALyBmQGPQEcAxwRQgVhIogwcIoAG2HYsM1gR3IokEDD5biMBhMeSoLXkweCoAxsGcDoX3Xi3nkCFACnfiQaPARECgPaVAMZjEuAsNttAjIBZSY8HXHkuFctt4Npj2e8+B/ImFOnwEcg9SPEqcNdyDBSZemwipBkwmvMwocG9Gm6nCDUisHpb+iSRTp+2kQTQAJ9cACt8cwRN/Ss5IJBJ7a2qC0AHYK4gUkpuQE2uoTiJfMPw4epjeqdRXYE5Rhu0me7aGCwIKtfFD0sAmklCgWBmG3utbfCrfdtlBUpK6qUIpwCkkUYDIg4yp4QhAeW9GDBwLR6glgysC8PvZq6o2MJMT3jdhtKqI0WiMfeTCMhs54BqzwNPyLueclxzS/3+XQI0jtSSQrmly4ecv249Z+U/gQOoNj+HBKj+yhGEtn9/2C10qLaWLH5Tz6KykeI3FTb7wM0uRJMWlZtmQwgXFgAr23VwDGRjADoPOgMIQ1pigNdnCrbviaqvFMopuDpvHjB8/RXoeI8ydGp4RAM2x13NzQtr74BkQoFZlceBDQTugIlaixa7kbn5nl3wNgVNpxGKi2OvQxJmjOJ24riNB/sKX0VJPS/zjNfTTgAp9s95AIj9K9DPqPQc22+nS6C0eYAGZJMLyF+sPPwGVggXypcH8HggA5gwbCjHhy9v1Z7yDIY4Gie3nIMGrQHUUNVBVeq14rnyOeiBvWjVl8QgQoZ6NajErESk0n0wx4CLFLuXJ5gOE4J8gtV4cW2RlYbvrO5lVWMk10KU6lpwrHbBr8cHn8+EMdH5YPl2H4gANhCmPEABLTsBp/5k+Y1TwGReWlGTgqiy6WFrxXcEQQTilLw8mUP5AIh1pbJnTgUrOiYIVBZKMAXqW7GISigAyjbYgkWfyyqyTTI5ZckLokEehQNxAs8TYMHF8X3w+3kSrcc1qozPAsAUqbfLX8B5AKgyFGBidOcIiB8JAMdZWV4fGak/nU+Sd0BC266CANbTqdp+zPZHmX9Uf1Txju1HxS6DbeeAZtOtavtKAILAhw9B1aCNjhyJELDZrldlFwRB1YT2nJtUNnVTBPJ41Y+dAQwOE2eD6+EBWZ4FDDRUFmUn7ZiLzjkgGbgOTTTintG1y2QiuKh2ZSKrLoDDVt4RI90jc28CMunnC/AK27iBhEB+FHgme78rtk2w5b+vcguSAKLyH5YCfT6ghAgFeAh+H9PXBxcBPiKICjo4fnEE+ODLk1NJQ7M9PACXK2iqgTa1DTpPHo59FYGgNZuM9T1AoBphFMIPIhXPMzG1Q/jBVYceAobVqCElHYo+uzwBPKvGyXBuY1O9YjZBQzOP312TK4PAVjDw/Hn/p5CEJKI2puq15C/jXFz7kiZB2CPLckzzzIPjlMtbPuT89WtK/rUSoOkFMDV/KvflEp6pCnCtH614yRPU0AAScxjvlwGABFFGlgQ12MJD+QCt7HX88bEE2aRFFnhGOdBO5hWsLDOx/mzZT6meSgAa9cLrYnA6O0yqxSDpbG/uFRAXwDWPYUsG1s2Le91Yp8CJsK5VM6wYUJyMGLLqjESsCcykC80XsddknltlRSC/fL+GBFAdXXw97fDrafnnzl+fG4FyIrAAPggD9nsTNQIhsLfziwqAVX+r5IcqAQKMxZlYUBaSQVUog4jWgXJhCGKah1QlQIUDZlDSQCm804n1+6rfQOAqEALA0SCMcwdeqZyqONKIQBsAVoBWKlcvRKnq6YHSKmAa/LJKUZFBJMf3tEdeJvmGY05cIx1XkXIlH8re8/J0SeK6I3LMvQCSAHQYULL8OhfApT6X2BN2v4YSRxW/Hivf4ALcScuPAx9JxxIHwKY6AXiIfC5+mHBNj63rW2cAwyMiDiQnygJ3AQzEZ+6BG+iCGBQ4BqD1cTHlKFTJUA3kyi0RyHF8EAAVWOg+vBCSqLeMFFnct64jOXAcW6SM8wHbLcgEUNT/3BKA2BJsWnoFAahKgGv79V2Bs5WAWkbkHAAMirgnoA1ajN8REKHay/IesCzkDdrzfMR6/B5moHuLORMu1PtKipbG9wGldsSgQVSpqdkWECRtRcPyn1DQGTVvl+rPh7pYOA2tvKxE8DOBJJuq+4/i7rj0SKpN9zA9QpFQbV9EtBxbZ1uPUcYDuAlDAEn5z83i7yRgld91AXZiftMXkG9oAartCqQKQOgIhOKHMX8elsbWF8mgdRSnm0QfJry4SoCEhAwND9EMjFE+wCXXJlS/o7ZK9RXwDhNDl0jsgJ2r81cpz8a0MpfrkJNA53sQqWsHXI8mCXZdCDImRAHmuvljjiO+Z+0FUG5GCMLy6/YcAAB/B30igdOZ4/2dDRJBIKCNQyggxfheNfn4kh8qsSGKei6v5l7VDyQEcSBzWIEKgDeTtkubWQvKg5StfBsXI4DDd2ky2EBirkt3pw3BXbFnQdjGVqSoj9weBi3fB1QqHyaIe0FEZMmmnigfNqoYwDOge4zg1AovQhcCmflOgjgbX4jrCLavWzpCa8/EOQ5xXds2y687f0ObDchdgC4M2E4wqAQYYsiDcrcRDSjVRRiQlQds/5WzAE3mHSoJlJGfIoeW8jezBDON+R7/URIQE4IyJvcJQT5XSzqCLhHJtOFN9pBVh0iil5U+5BhUnM6qw3G2UOCo4w/hkNUGtDWIa3mOgVC8CsjhtVhSN/c7ALl0J0Aqs6BkUkASUWMFiapFKoLwRCgBBJCUf9wE1MCswoEKdOcSChlQf76y8PlOGkeAeYZCMkwg+SlJ4PfIQal9uQZULKW4sAxVi2N1rr2zMusyXx/cKtZXqtrtFJxQ5C4xKBWeARc7D6F2GlAQLu4j3zoRoEwXPqRTkKMBMJt9pWLWAZbX2mON8gDTyTl4Jgbc7lrFd8HxiPdH3N9tkSGAU24DtmU+7gYsTT8lHGjlPhPz13gZFV01BWUbpWr+tazYyMOoI8TkCKg4ISgUtRIQcDwk9xhQ0u4jIQHL6m0bqDn5xANopvZ/vMZfvpGoYbscRNWbLEITA55VGMhAkZMrsfYAqQa3JBsgBiKJUTKuOg9x3PBa8ZljsjCqZojlqPIy/CFCMg6pfEe6ZvNdA+JbPrSGAG0egO36C8p+KTtYe/ttGZBzBKz+uv5fzotMPQLz/r3YRbhqAYDOgdvnDDzJIPNb4BxK8kX5AnQghqk74cJAubXqB7aWBodSMnU8Qw8MdHPMdv/cwOUEnhvEvnLRxnusgD0n0AM5CgmCMp1T2epj9ffu8XuJQFLwEZH5Z9OIH11FJoACfnohSNDwo63/DBnkyyo5gTDbv329AtpokhAOKtq23shiD21ZxIUW9VBwHACYsdomk5+HEiiTGSQ4uCsggqYg/L547mJyMZ5mNqdKRc0Eq0HDAMNrZyJS5SfaXlpqvEfRwOXjRKrIcxoitWUSI8WcUth8TYY81LPoJQs75+2SSM9F0DUYcHfcRLvFgijzdyAC2DL/rQyIQEdXYGYE1jKgz/Tbkh/Z/5QsqH3jBpQqL4AM3Fmv3QOFEDgoe9l/tZ1RAuEsROLPKo6v0VpVoGx34bBDYBxUD14EMQwciGp+CgGggMeOgq45Lnd13MZR8gjAFfYNDBUcoYturN7MmtMwTolJOoN35Ca6oUS+1uVDz38tVQFKAhBagBvQC1gpHJDgB3vPiUAX00MG38TzXtGl1e/lDdJoM5l9vGH4EF03IA+UMkBRPY0TgAcrcgpISra7TOUDhKswpBN1zen9npIAVANdDjrOHQycROMOr0xy0KrjT4C5FwO3R6nU8RHJwgN5AKPgh8EN/iRKaIJDafeAvmf+uBNAUn07GagP/jLYIkIoNzB2BVb9i8x5R+DsugFj277adAYrzcjzFQIkCkhYssIpYKtOQUkedI4qUlXeoQFmPkloQhPhPIrtVVZQgpsHY5DQi4A1TRiVw/ygNMqnnErPDgsw9TLz7lwHbPhIofsE411geVYtgtDEhFUPXVZUY8o7jMQR62n556sDaM1AUSlw2ASkbH3JI1T1hwRhecBQMTAqraw+EYCNz2dife4baDfHJRyNks3affEAYGCyIk8lEVlRZdKunVcBVA1YNUiniIE7INmhUIwMmmVKcxFIFGGNMvDTYMZcSrnO7BbbRzxae+6ufViQUZR/wX2738WFVoIICgYKW8jvQd8Bt4Xx6Aggeh9AHPejamN23ycF7Qs/mouoFrmC264z+yEYOKPP5ABZ9y64VYJOOYfIFaBSSVeAmWKRA0DlEqpbH2XFePkjHqj9TH65v6gMKfw0lpHPpxS5objAaP5FmjOhQ5PEdnyRhFMEV3cdJe3w/uNZguVpk6AiIPMABGJ1X0ffyZDUCNwgavB9SviJbiMTQGkCyglA1QFI8bypBHAuAOcHRK6g2K1uHK8tvrTx0/kAn2TD47Ux7sOB+shrdn8yhqfKASufBbi2h2FPQX7WXdUPiCPt6hUujXs7aB9VGmTnMhrkADgmPaO+Qez72CafOfdQb6JO1Kl7xgpNhDIq5Y3W1+cXOJiZ9cuH7SEA9gCUeQC5538v2aVLUZWApt4JrOkhROqPDoG2LczZrQBwchCYeBjrk+pB0rFlrGEosLswrD/OFdT7AgqGg5oVy5NLRXZ+vAKoA5C6hBreI3YzNIja9Qg1AdVvY7oRRpQl1wAVDUk9hVXKq4gDvh9/g6LgziGMQExuxwBMuIUeifVast11dZJ9LCYu1IDxh8pf/l4+7PyNtQpgfxUoE0EH/GWAaTdQ1EWECFV1RO8ArwubeoISotjfgFGp8UDRe3G6BK4KKYq5xhgUH6wAJ6s6D6gQpBznsvLwgAqsOEK68YO3s5bMhD09AlACWQQi5VIM0COwiuWjmDx0FjzvgxW/13pcSnnm2dC9jZKl5WGIHhFNACqPkc7lCGCU/TcuwLmCMeiNQzDg7gPa234RHqBysJPAhxG6hbhfwKgpxfkxMAHCgmTUwJtOEiqVrC61/EFg7Ci3AppXF9Atdh+kuFUdFaCFojm3IgECEBeK60kKAHUoZhfuS4B7lAcwKh8kHHUmH0u9nhSqkjviFgRiXI1fXwmA3wWgG39aP0BR1aPqnwY9WGhX/89DsRsKiPZfyAHg4EOlaOAC8jDEAKZOuQJUdraYUtl9vkFZP6tmgyShUB0GD37PSLldTG8SgA0AQ3VXRAT3xrgIJiiy3CoB6UDEJNa+YIYoJeciRxERlrPMMCaCZKLKvxSQmu/vzhkkEtnBgeIj+PHK6nLcNpOkeYZ0rOXX1xCAXgZi2oCx3s+WPq8zbiBfmgE6lP/KhWGcXZfBvji4iBAkmA2ZEIvS8QuBpfthldqqIZUWYdA64OLgRIUS2fUjrgEJLSozuUQmgUu6jXAbqxSOLAJra++HJ1McpC9K8Q8fRyQ9DVgDZ6G+W+WKSgxarVWoJglCnHtEIJVTpkuB9hozAeQkYGc6sCkD7oABN5AHeHUDBVTlC5mWX6X+jRwQmCVcqOUpTtzV4zfrjsAyYQMCV8XonbLfbPa/PT/rYurDDkkBO8/INeQnzOpolZlUipXWKEE9IDQf2az/oQSgIRGtvt0KRUURfiMYpNWJtaGO5SyrblSVKcfu9SWMzl9DEQ3uci09lY2Sn4ZAQDzqZZdzd8qY+OQrwdKxdJiR7tXy68//X2sF3kCArwTLLiCe/PMY9S+jEx2BBYyr2e+DQOQITJ2/Dex54Jfz0r4DV8AAQXWwyq7sPHK6Tc6MrHy8Pg8DVhAR9w5bgyN1V+oULkOw4rXZ5bpa4O/ZSKGZeJ26qnzFvlGrKjk1N+sZZoqgAoLo5R4UuTNpmVKtPgcLVCWC/B2ciwDS3gmgtgLvBJB7Ajrgt/kBTPwBkKlvIJ0zWF8v6A1KBIaVgTYgfaNQ0C8gyMEMD6oy1DME+QPnGsiiIrnU8wDDj9aPzh+pUDsFERYMHv7eJjwZqa5UdgzbiEQiIA2TewFoRCIyJhrhToj8nMqO1rcHA+a9XKslGA9g+508AYr1GCLAd1/+BXAAGwjw58AR6M3ed6x/vhKb5KOcQQXQRE9A7ari+j8QyUR2P3QEMJhVlaGJQL6hLkywKoKgsU7AZs8ZXHbboHKgBgwmKqMBxZliBbyZBKDscAs64jjnkVlGWWG+T45EgOwiwmF9xiYmDUzqeETVVSVRhKgkDiCIgFh0olCQaxl0ZmwSGdbrKTgYrBfHLGQHBFC6AakBCJOBEPcnV065AEwEFqA/QvVVCIBKZ5xE/nLVHnNVARUbB7/L8nMeQrgDAQKfjGykYHQDHEAT+UIsvgUX93XlJgFqoxKiPDSTyFMJNbmfcikiuabAzddpwTtSvn4LrrpWbvIqAx+eLiwSSt9UwOZMRNLNPDNa71UaQatzJ6b7kUBfL1qRNwIer9q4knS1mQC2o9gZgbIfQCT+ynYtUUd5AdMViKQRdAIa1dfJQZkPeArw4cZgXBqWDYGd8VraYhjmLuGo1mUYmAdkE4M8gJAQq2ry/hTj2n3QlSAcGilFaqxUVS/zyuSB0FfPIYmMlLKj6JbwgHxgRgS3RHviCPaTBGG3rcajNolZUnDrAxvfnqQ6vsqptO2W33D+pjVNBW4EMAX+mpgTicCB+isAO1U3vf0+BHCKT0qPA8e4B8wH4OCJYvSIHBhcYP10M0+5IpX4U27DNiXVLfA8Nc4m5arPt8AyyI5z9yHeQ1CR2BmIwa9IyBCmrezX17mRarXsugaNTiBqUnMuw90fIiqZVwDiFm6nKLJ1AUF1xXzXvAfdt6b+9GzpXsq8C7uPzrGJAHJ8nysBhgjodeCqDFjdgAoFirJHGf2q4FAdEACtpcEg9m84toM/zgMwucBwCcOE3ja4DocenKehOQ8FAdD80FgBR+VAsz5oJXXVBGnpo9IgAaHIlEzqiZJm+cYAQgsee96oEUiXtqicWiV0UFkogIzICwEb5DdGuQv3Pei+heszmKOKST2MChGUWBA5VAIwrwI7l5Bgu6HnWoKzbcDQHASKb+P3fqJPdwQWRmTF7FQIuurPwLPHxRIK21NPGn3gcznGOQ8kNBp0DQ8+HuQEEqtMz3HUKzZOJjOQUsIjQBYOQg1Uc71MbF0CadfplLXadOuompaDc+BkKbkNXaf3eZlCVPIc7CzpHI0g8nUJVVbfsQ2T8n2UI6IxI1xCdOzlN9YQoDQDbe8FhERgbt1V4J9OBAbqb/IGBGIdJsCtL+xmQgUcMAeB784/ytzT8XF/UFRHMNW22wHGCSwNavH9m4fQvw6rADeZ9T+UAKyXpgajzrp3yWKkxhVHHhBIvDqRZgmQXZMBemCfdVYfBIJzAJnoXJs2EIUF6YjY7Pdmp9gNIeDaMgHAj4PWXoDtkEFFQM73L3YvhxGh5QeFB9uf8EPqn8MFta5lxicnBWFyUYAVb6AELSaTEECsmAQu88B761JbCoDY21a53rgKqy5tiMCzKYqr5hQAOcnYUtnfIAutEmxqkJprNM+lkV0BZEhITSYLzGCIE1BCQNP5Bq6Bk7+Pdwd4B5Q7EOsFuTwqRNheCZYcQHkbcHshSCnxuV4A/jFQfBlIeYBmYk405dfH+sZyF+UqD2yg9N7Kl+FGg79Ty4+B3x7MlKJTEonBgAPZgjpI/HUdxcgV4MAOSKVnXwXo+ZpN/MrJVACnsqHqWPCNAFeQ0wESa7dGOQEPKHUNVbfrIQJ1LeeVYZK4z4bQ8Vv5a023KfiO+R46sgzcZL09kBeI9l1+4/mbN/mHFuD9F0HbLwTz36jsuQ/AN/6gkkfvA9BqX8Dis/xC6UmJnYpPrEfTZh6A3Nc/JLTqbO8Q+EhubVwASdXxYZOX5vqGMwEVwPuuQCWfZJKQBvMoL1GPaxQX9pIJqpjMKvakSxGACpxJlFTUSTigC7heF88XkgOCiIiGn2fbFfco32eOiKYqAeIat0XLbzp/M5QBs33fQR8QAai8aQTC5aYKgKFBUThUf87Ccx8BgM6oNzkItPjFPTCrKhuP24ZhAgGfVLGr6KyIImRQg9JE0nCMxhNtkDThEoNoYj5AwyjqBAxCvG+gvjFRdNQuOpZQS6da/KzwWkid00ehqJ0SnwPtTBhQgEXuISYARYLBfYfvh3c0x4p57ey+QCYwnoAASuafp/4CKewAwex/+Zxv9nZgUb8vpbum7pFDyF8TcgNVI8sorevK47UEg8ozCgvatqzEVoWdsyiDC9RNq71NJFq34bPMdtAUxwN7KdVUdlTZ9oESm3MH/fXOxaCq9MDZBUd5fm2IF/AmTrAqaIBAoDeupJbP2pgyxz2YpHNkVMVCX3ev7DdFDkFZ77H78rMrrmEngPYyEHgNGAK9/G1e/rkdEsGnGoJoPbkESRZGhZV7sIBI4w4AjAPRxfvgNsR+mA02gEbwUJwW2XxUZSQQHhhORTtq37Xdw1jdKw8PJhfCCHWzRDGX3VfgmU3oKVDX6hESEDXq7gPckJIFKj7rxgXGdxmFtc8Qj6X2IfdBBBiSQyUtrdae/Cw5soBUA6Fe457PtfyL529JIUDOA4zj/5wfcFl+Uv8Cyv1fPyGIXUF9qJzsK/sX8kDgvmjg98Dds/ITNp8HHD4sV/Iz5ASDbdrOm6Nn4dMDdQR6c91RYxERhVbi6v1LvcNodK8jEMm0qLgnlQw643SM56rnLeQQqam7/nwyvhfhtcgkYQ+s+Iw1qfq8g3JGR4ljPVUCaD8NHrgAUv9qz8yEoPIQAPR1fRz/s5NA6yfXdeL9+sghVJBWf+QUCv8juGFwNUs1b/OtW4hLfiOVta7BJv6G+wK5WHgoK56PRqDqkZkFhQU9g3Zs7wfhwahsicXAA0k8b5c7RIJ0NqX0mpyNWpOzKeDvJSoRM7h9OW5EXjsB+IlA7QdCqyPA+B+TfEgARaWd+peBVKgUwoVyXKfwvvMvjUNyFEYto3xAuek+BEBr13IGloVtOFCecgA8zj47V4EwaPfD2Ds+hrBwOEhZyXqOYgz6QtRsOK26uHNWMIrvlwd0e35+WNZB28s/IDDEPZKKPKveKvSiONw5BnZ+AriRy9AvFBXkQLmK8TV4Z9AjjuXDawiQmoF8CHDOoZRN/tX+gEoMj1P/FB5YgnDhgWgSUvuZUEMQAzqBpwMfHoXLFtsEHrNzE1TKUsvqAgEK1NgMF1I4BttItbsJPpOMixVMkgJcL+totbXDRF/sBBQg8I4VUmA6a+cG+w0AlrkHcR+c46lSHt+n0T49wKLzZKW398ITgXcB62n58PNf33MAthcAMv9VcYNqAMf3rgowjv+bwgrVL4MDlLRsL/cbAL8OQgSb+duCMp4S3Oxtcw68Lw675j56au9jcmWjtV1HYnFgm+jbj52EGsyjBKBSsyISFnSPyhlIex+7D3zuSArOEWUAPzpJSC6l3aUeIPF+BC6g7k6iYVzH8XXLb84E0H4dWLgAsP9NnSnpp0KEieRf2P4ryn3KiiuAovo5q6wqA5k0pCsg++1i/4w6va+107gNDzzMitvtKHlH1rer3NyRWAZLHkyjBJ9TjKjSMJNxD5yLUUPlYtQAN66C7g8DePaYBrgBCB05WOAyAbfEnQd4RDwtQekJwycCJ4jDuBrafnspKBIA/zYAv/EnBH+YB4jVv5f1d4pq1L+M3sZ2lRhggCrga/UH1uxYcEM09T6O9oXH7MIEP3XVkQsA1g7J2BU4YglBP1JjbbuVMjoiyYRqwG2A7PMMChBMmH01zQ8lJJrYkdiyYgOJDgM8Idvv+QSlB7JSdj3zD7yuZMbmw/ehPMd2PysBpNh/awkusX6uBvCEIIj504AtMTyDfWYOACblbAKvHtuAAFwHVQKUDe8n7wLwhkk7aEWmiTvTIYBxGp4cTOynLLtLOlUpd4PCVhzsQEG3YYGn+9Hx+yE8HMA7A5hdzWOPo67XLVP19OmQge4VEddjkncezNS7wudQHYyQkORQbVglMC7VuoDlt+whQJkKfLZTgWuv/xYW4Cu8EPTb0Rns21dGQOdbMFEStIm8OKtvjm+ARUAVZTwXItD+VhGA2CoF21jLuwOKRTlMoHp6D2BmrgFl2lmhXJkRtscrMoAR12bXazvMdtcOSriyTqZ8hhQcUYgwpKfATHZRgo3vT7PiFjBehe36CJz6nQMqfKGxY8ihF5rkdRQelXujCHdbtvyW87fWRqBUDoQ3A7vaP0wSUrMAwzxAuTj8t5MczIBM/2SCQZCinQ5i+sO5ASQsJhS8HnYk+bNT3CrO5YECmeVR5MKUolz0EC1h0YCr46UMjo4rgO+hgBCGIK7WPUsKSk1F/wMMcme7a7QD95FaiUys3S3nIQzstT0pDDDXb7+fJwx1T+haypgSzkCRswW5vU/9dWsigNoHkJ1AfSFIN/lX7H++pAN5gJpbQIAXJar/ti/Ssv4wyFG5wFnIUh+WETlhxbF5RCiGBArIyAmoZBiHFHUbfJR9cjAPvVeSU/0DHdAjafE58D5GgxiJqausQGgqrjbLZB+AVso5dRfVisBFSKse2DVzzl4AACAASURBVHG+d6MEnXQYBuiW2I1iK0Ew5ABYKQ+Lehii/MnyW8EBtLn/KRdQau2+5l/WlWQOhwQ2XDBKzgB3YUG5VF8StOEBxFHkCOpgDpJ6VlExD5Fvu0wmwkDq5QmUWyDQtudJqk3TfavOItnhoAnsdQxs0Z+AjSZRqRAVbjAY0UVEg85+L0sdEZAs2RB5wqBHb5IuOyCPACh2//yJvvNjVT0kGHN85VK8Q5gjq57bSOsyAWwjPs8HKEm9Eg5so8kk+loizlcFOO4/lgdw6l3IAQEkljkrLVW8PMzYRbC9MrxqQMiKzQnC4hCs+sgYPSqtuapByaPoARIm9vi62T4LgLSchAKaB5QlHLG+5iLmgcv9ENahoJ62p1R4augyOknCI7F6pOrq/E28OkpPqv441+DJwpNqu2fLbzv/jTYZKHoHwP6EN4IojCqmBHPSrwzgEsO7z+WR6ux/U3FMILJCU4LOOAGt2D5WR863wI6Se2HWP6iHz+QHQhC5EKLdA1ZY7Rj89xvF/3PHVUQEy6AioJyAUbDJON8AonIsEYCZFdghiumuPrp/oduAc1EeIu1iw8WyLCI2v/1YzfWxjIzBhKi0tSGAWgoE1Vf2Pylu3/bXLH0lgDI4JjoDEUhVwRQ4SdXREncU+wiw02EC11CTdnST6/YKEDZDbodXGdWBiprvBI8bwMbWUFYReslGHqwB0PouwcfdTE5IHxYgvKaFaGqf4bJ8z4bbgfriMzEJRoyrxbOIvscbkx8YKD187/A7bCHA5gCO2H9j++nloHZdnAdwTUC9+QAVgOQEjM1v7GrUtpPg06oMLC3zAHo95ibMQOMchCGTHjkUYmvbGEUgxeyp6UhpjUaaQROAOMg7WPUZ9BNUC26/X8uPsmqp+yAciAG7B4iKm8NldC+G+QxwBvOqLr4D5mTYNXTufQG5cnfdEOAj9hAg9QHUMmD9bFXeuYFi+00F4EAeAKoAM6RQkpL1BiPAVL4AW5FZyWViDpR+Yj2/xBETYDiwHNnk5262EdeH3zO00ex08kB0eRFshJnpDyhOgJQECcMM9N51sLrOkoiK1UWi8gg4jboLp9ZTyylnYBwUEVxQTj0GWrzrjSgr/7hQIwoB0vLlI85/s00Gyom/NiMwzwswNf9W/quhANf/XYiQL9pYaVR0tPciJyCBPJcbSLiKLfzICYzW4/HNgxxVCgTAYtLQbsG4jV55sESgFb02HmV7bgc6JTLrSS1ZpgHIce6g6jAJ8BnlDsFJ8fiTEoSkzvI7B0QYq3AP0D4UHIUT2n3g3bGksRMAhgDoAvS7AEQzkLPwg/ZgtX1WwHT/tv9PBIFAzuvH4A6AT6HBKCfg1nPTkJswVAgPIZpvfJR1FwMndBRFUUXyDMHMoIjtfpBzEE7FDjD41MtDRLa23BKqWc8obTsdK5xV3dCxKEcULQuIs+cWIiDy9TyOGHx45kOAdqZuCPCR2QHYtwDTjEByAHPlP1b4WPGLylqlbtvXmwmq2pTZVwIsCJAELCF0bToBshET3PygycfyregzMGpNCpvPa9WlQyiVKAXZwAwBk8jMfvFQwrCQDhJ1B0QGxL1SY+Qc8jWq645UkJ1LlEnnigs7qX4Y0AOWIh+7vSK3uRDAHvuo0kf3YvnI87eBA8DXgQEJgKV3th/yAC1Gty/5aPsE6l5jefE+AFNa65TpyOa3LDUkCKW7gMfvYlNR31dKzfup5J9yDfXUbMkHbkGA0JCOs73aiaiBb1xCvV+s+0CkSCZAXmy1GZyj5GR8be4KTWkLcx+VQ5zDmAPxTOhhibq5EXP9ktRniGFG6Y8Qg72+7ejLbz9/m58LUMuA29uAfMlPZvupFdgTReshwISfU3eXzFOTe1T874EunYABq2jogUFfj+gAzgBosW7XVRS1M0DpE1C6nHiwzIQJrDASjILYlMpE5xsCNmp4AnAitJlyMCQsoBsRmAYnHnkMQnYysVvokcr4PHMu4MhxPNj5/hoCaLG/sv+cDMyXS9n/Rgz5JpdYvgwu+bkdS5MBHkttC+Ymyg2QYvrEnlBgAoTO5ItkWtj7H51DJdkEwVQ5E4m2TCyNu/z+zWx01nFSTrmdXpmKWpm9b2CFFAO6Q3YKJP2kHsIXzh02Hr1IZzCTwDsC6Mcovd3HEn/6tHwUOIBU5qMXgir7X4G8HSQnBct2FWylZbjTDgxlQB3Ti31Nwo2n6qJb8Ouq8whKfO0GCYeh9qm23qvKVOKwALdT17fEg/qjcwus2tH+JibsJRO5dZgSnu58QEbSQYD78XGpt7w8aNm9pPGHA13bZqV+0gkNrj9SanVd6vu/cUpPY8N8D036uwP4qPPfCsqA4oUgNXtvW4Fr8k4QQ+KDTBQYBxelFJbf7IMq1N22uANOqtGXl4lEdhHl0c2FCO1644TeODRo18/AwLgWB7LVNyYEPSA4e26uq7iMKF+BTiOy7k+y+qTYxoHEA1wp2ygHESYIu8DxRL8nDPND8TkD7QLU9U4Rw3LEMVi3FX3fnQBaGZDtP/1GQFX5pu7JNeiQwAI5f20OA5RzYLU1CT6I9SvzdyoBhoCorTdQ9XGIQMnMPGjS5YzDiTqMxACvgyNKJPYqCAjQUd4gg50n3dghawdRS6wqpY4HpwQjXB8Dpw/eHqg6KiiJyV6zVuzHO4oIdMr5jLdFlxMreuQ6zPJKJOtp+R3GAaSOQN//r5KBAejrHAFeT5+F/S9K1xKI+UsL1TbbFgBGlQDTSOStcwGu4feZikAH8F5ZAzdR4u4AEOraWC1kfgJLgNBTkXCvYN7Abs85r7zRfi/C6jfy4cGvVXnG8s9c1xGw9p3IWL29gwgch3mGkdLPEcbyO87fLhyABbyu+2+XyxOCbPkvxWfZ/le16+UEUMlVyY9cBAMQiUKBs4YiwgmYcmO+8dVhRCFCISgcJgAksX+6JxpUbTG4HLbdxjXgMB+dN1DtvJskrIgsHDnOgdCdI7gPeHcUYc0q9VyCsOcCYgDOHLvEBnPEgFsFzmuinDl2EvbYy0efv92XAXcwxMnAAuym1CUkwFJfIgi0xLpKgM6gAC8CehmtCBBSVswTqFhWEREO9GELbz43uo3qQPyA8fE7KRiTVs3Ee5JyuYEpG23bce0w44HmCW2kknZwl2epCO5Y2KBiYh8qtOsdXedTiOTFuwAdxmhio22X2JE1wvGuIDr2TgCuFbh2/gEJkNrLWYHG1mflr0osSAKteRjnA2CgYahl9J9QCSCCqjdJxd8E+C6wjzQCkT2PYvC+zS+E2bPr5BaEk+jF3gZ8naoFq3cIWraxg0qEGsCjXIHdp6fm1i4zqUWqOusCZo93hGimlR7ifeVElt95/tvZAbye1Vr9OCiEBJAI7CYATdyeyQAAzJWDxBOKNMpXpfCALD5P+EkPB50EaIpRXbtN3WoimVdvaAD4ELTC+hp7bNYLUKtrG9h1b/GDMCQ4t3MfnX6AFq8HjijJsZ48BOseA3qkOa16PSdCJJmvcfY4RwDs4/04BBgT0NGQoW2/E4CpAuyqHGT/tynDGaje/mPdv9lkkyfougEIHyIywAlBmYjaw+lVAgY9AZksfPbfDpbqRQSAo9h+FALIfgFM01EfvbTwISHo68d+CAXEkCx6lQkAyxGyGFn9XtmS3UYMlL7CKzDOqLZSVL1MWPLFZggeY9+Z7I4dI+29/EvVAWzgxrhf2P8cX2v7rxOAwzyAidPbMfybg0WugBN3w/gfwgl2EC4bD3kGpdiiStBczAzwMI8xEe/n62U1miOEQO2NwrVr6AHYW/o2uM2A7JBF7zv0VV+rJIO1d42KNOw5tTOZdQFHlH1MPLEjOS1t/BQSj1xVb/lOANUBqOTf5gagGzAp3a7rOWTAfxGkUAFQyj+qEDhiKI+gUx3gpCOBHFVa2fcSNijrrpQ68QKRipnGHAAvE4oE76hKcCRJCDZ96DQOlQbnrHLPjo+sepQLMUCs9/7pCu/A6ADmQ4exNdfPvwdI5SDG5xEhACQLe85g+Zjzd7QqQHUAnYYgWfrLj0V0AjbbvP0FLkFWCHzXYPry+SiDRKGN3wGYrEYMWpGJnwX8Uy3+FDCVA0Fwl7+HuYFAQaOQJo3UTqzuj+fUd7ZSAefqu4Dx9TzdRcw4DSb+Adi7gOzvq92HF57DDmA5nXYCaA4AgS+mA1eHYJXe/IhojadtHkD/GAiCFC23XV5vgEss+gSh3HbGCXB+IcjOK8ArN4Gs/dT1ZshHoUcGKg+WrkuZArdudWWlUlSggRgPdm/dZ7Z9MYQwQxqjfMVRZZ8KATJxvDBnAONk+z7LxxoHwAlAOx/A2X9WfBMWZO2umX3RMhx2A3oyqE4A1FxWDcqgrjb7gBMwHYNlSASdg9RjYBJnXcXWjUAu8abKjgKwsQPR4DFA7XUf1lCD7eX4uAYoHVeCR5oBYJ90WlChLLPdd4Y0bBCy33oRdytg6mX2Pka2fjaRWckmdBZz51s+9vyd5AC4AUi0BocdgPhCD8oTjHoEhpl/DAPIXRSTKpt4fDKvPSBRHTjiBMhZWBXsEAea6lDR2wMsOQl3/IgQzHX5we7IxoEdIPxIAGuw9q+FCSFORs5ZdAb905KDkeX2uQFzno6CI8WUOP1R8T6puiOg3AugHMfyu87f2c0BVNXfS4DzCcBi+f1rvrbLs0RhbXsf6N08Qh34Cjx4XPvQzDU6BwFOoAf4KBk4kdSbDhEq0R0H9egcfQWm+wUDzpNJxyG4ezRDCLGyx4Cm40oQziX1RiQyC1gFdgXI014enFPv2XPbJKA99k4AugrQeSNw+ZWgrhPIQDfKfqAbsJMwNO3FBPpWnYCBaAaeUn3RTVgGOTYvuWUCGIFi1oc6Wt/LPUwpfnM8DOoGpcE2gsx6dr3vTMYhA4PjxVl9/p7tWiwo1DXqMKEuHbTk4r2udp2UWpHuNKg7qq5CEH3c9bT8y+fvSg7gVH4XAC1/8HLQrhPI1p8sf3oUrPzCyqucgVHR3j75lu53oF2HOW/UHciE45pxvAXsWfOwioB2m65TWfM6kCYy/BKIw/2OuwlvzS2wuoSQv7MmJ22z6/GEkvcShzO5gHFYMFLjScU+oOwvxAHMlgE3AtgdwK7qBfD8MpBm/znj75qCMDnGrwwzai0ah0I1t2FBHTzRNGHOJ0jQvwAnAJY8Bi/1LYC9g+xEFiStzDJmh975vgIL4lIW3hHFEeWOlbYHMHvdcyRiieNpIURIENA/z85nTCqaxKaTe9NEcew88vxbGfDjzn9nXdfXoQsQSAAagJK17lQFVJJPqLl8O5DJvqsZhPnyzSD1cwNMVYCPWewzq65JwsFNxWoDgvZgrG9BHoPRgEEkBkcg1/uPY3dJLuh+ZhqERMUgAvc8ITQTPU4GWpWeCyHaPnb7QVKP7k2196S4fMxpa9+6XtKhg2rMvrySBX9/71qicGMnAOsAsAXYVgBUC3CLuVVnIAx/IAP3CrFu1x9CCDPr1hUkXEP4YVTfAs8RRd633SQMM1hl/Dq7BU1PxkYmQyT+4YYuokc6wSBRhFGXdXv6NTDGRBGTTQzgx+zDJHocsGsXrNbNzCt+7GAkiKeqAxFJ9Zbn6ycXExHQ8rt3B1DmARTAp/ZffEloiqMzwNjaiw7AekLeJytzywmg6or8QRAW2ONDzC+Sdq21FwnJ5gkSkellRsUphu9Zf3negf3WwA1A2SEGR0rFAUnCKHdT6fYkIYTXQgQqLG5MLo8JCxjAjyAIysKzo1CZ+lEu4VEO4JFz/1UOwTmAfOzl95y/ew8BUhIQGoHMxKDtkFQVoAqAcQIq2VcdACp1IZV8ea7VV6g8txCze5CEwQNcH7e4CHxYlZ6IHMw2eZ0CXSG6dJmsXrwEr0sfbRrYT1D5GUCOHUH8XTmujo41tv6xRXaADOfFjwlixgU4ktiGucsleGsu95stAwYTguqYA7IPHUAiAHQADejmrUDGAaj3A3AfP7kFGeejXe6QAWTo0xeh/Qag5/DAgpfCg8gJiAYhCUY1r8Ak/goBHggBqOtQEdQ0MZATcI6jEp0Gl3IoCKEeaKN99zM5gHLo5T/3VLdALYqhR4q9r+8o8Gh/vidOgctzmOzkm1J1fLaGfDwZ75turcAfnwmglQGTC6iWv1QGqvLie/62A9vP1tqryT+4T75NGLsPyoBVM9FRuBKeSBASaZjhxMcqzCnBbHMN0i1kQmrnsLbUOYHwtWBKRWlZ2FdQANyGzog4HgPePiHw9Vu1ndl3fE0BUb3QOH/gEiYz949S+x3IHNbosEyTXWfbrQrw8efvyUnA103M30ICSwiVGIAQWvJN5AlkC7BX/gqWiAxEac928E1UBSowvfXmbsCedW8kF6u4sbUHk3i2h2AybBhm4uPwgtWJPZFdfxzEw3DBNbXMnSO67qJuXcfB9viJhKEU3qh2kPQ7Tgo2jGCnosmi4wA+4fw9YQhQ+wJqQnCQCzCkUMy6qA5E3YFSyeHijVJSuZCy/nWvamnxOOVx4Y1R3YDAnmSNDYW4dWxXYeu8bWzZGX75GgYuYaTuQxC6DEVMPD3gKb8xVvH5c3VBX2Pip4UPXTAf6MCbAbez9t24vrk6RXJRuLNNYgpzAJ9w/t71lJOADfA0LbjE/y7bn3MBocqneF3P2ustB4CarP5M7I/QRNUj1Q9sf+gEoklCZM9kiZHUWZPH05W+VR20gipFPEIMx5yCDnscGUwm554aLjhQD6oRI3fRV/y8dqIUN0MS5p5VpxKruj9mxwH83vP3ZgeQQoAW/4uWYOMEMqtEbwdyuYF8U0yMj8oILFXDgLy+FxbMVAWiNl855RbPaZ1CfRCq34A7/Caz/u1h+fPGLsErXA1LkjSYVmh3joCQIqU+ThI+NHrDXAApJitqPwwQdhpCA7bw/tgH9q/PBFR8MnegyCapPeUGOu4kCg2WT8wEYJKAriRY1Do3Can4P4PCdvpZAO+fENxoz3v2fpjwIyu/37HkPurNU/0BJuPPoBFuwwCnM4GI7XTXvmulVKDzcw/I1bxgYB8H/ryVr8AkEPQBOyaWHtHUsTAZj7OSDj8P8gixawiIZPBK7xJkF8KPwwJ4LnSNyyeev0+GAKkJKMX87e8GYKwU+EpApPYtbq+KNZP1f0zsP1MqrByqwV5vm0ziKXIpw88CwcE0aj+WLbhIEMcBnzhWX8+U4otS2GOJ4UW6gIhARtb9kCMY1PGPOoK5F4qQqovkLgI+lU97TqStU6HB8knn7/NJwN0yY9//4M1ATtmz+hq1Dyz+TAmwC2YRJhR7hA6jTtxRIIqO0QBdgOQHEB0Pvo9KzDUo0oN5gkuQbkFYWQ3c46TSAxkfbRr0gdpFZOOPq92BudbBG30soD0QnQM4WDmIHUC79kQSFtBzZcAA6EAQ/P22sy6fdP7+9XTa4n+YDYghQAF3dgNzswHTl4gn/hQyUBN/qjewNh6dggTzZFVAhQczoQJGXEMFR0LxAxO+oZvsYQHUcxk4nOxgnTn+U6sGDpgi/ozU9oUtDxp1elZ9qNod2z0MASrpEhgPHLM91Y6quxBm7AAUqWxjYPnk8/evKf73SUAVAiRQ92YFauD73EAmAaPSqnEIVNhYWdq28KZL0EVNQX1rHVUDjJmOKglRLN5JHlpAWcvecxL9dX7t44DfdwlToUSQXIus/FNIYr7SMKHyT0gKqhg9VHdJEj37bis9NQwwLqdv/3cH8K+cf2BdswOwbwYSFYGw/790DuaLktYf8wc4wDtOga0/5wK4n0A1C0X9AWa5SACa1mW1HuJ9l/H3gGkDWoUM9vhzoD5u3Xvhi/ITI7II1x+w848G+uDlINFxu0nCAxOVlC1nh+AnDXnCGYcFOO0XQgVTATjoAOD57ASQFD2FAV718fXgOE9A2fx4WUsUZl505cB8+9jqT3xm2+w6BDOLy3f/qfxCmW9QQw3KBZgsv4rlrYK76wvj8w6ooYqhzb9ne76KEaD3sxOwFJBKiPFCcwFvVAhx4LjKfjvbf2B+gCYJAOuwGnHAAUw7CEsWy+/bHQC8DkyWAHkmIIQA5Aoa0OfzAL6lF4ZuryegJvvIUQRx/h50ZELBh52ikJZ84Ri6Hr3XN0CM3PbpuYf+ul5Y4GLwHikNuvz0sWJCiYDvyKKj0uqcDMDuNgccQFf1C8kPwehdmlTvQ5UDH+q5Y051HioHIJZRE9GeA/j9579rQ4BcAeg7Aazni94AbLwZhAP14ZQ+AtnYg8ookn0qNFDHiZKHUA7kWrtU7+h8WFY0bRo79bTMQGIcyBT01NsPEu8vZtSf9b/nUoTH6ChpA761uOxnekCsVzOR2IuIwR4frqXTazBFDsWxhSFCrNTOQeyBdxoPikCUa9DLIAQNqxHqusgBbATQQoBtZaoGtLf/2L/r6757zUCiLFicQVVXmdArrgHZlpN44rNRcCYLZd+jun9+KHxt9VEJ0AzJoJ8/iGCoHUqLAUOXguGFAe08OJ2Sc7uzGLz8PZxLCBU7JrhhiHHABWjSyOfuqLYEMJTp3PqDDoD3r9/5UMvvGOiqX2B3AJ9y/sHdAfifB8MfBcXpwZkkAOTqxaBx1r89cL2NTSTWrcNcAADMgTGoAIQVAyKLmbDgsd2BnGcQjiGO9ftgZtcynzOInYQ6Bja2PNUFOIBKx6GV9miooFV/cOzAiuO5p3II1QHokOKwA5CEY1U+Z912aSjOI/27npY/sBNASgKmdwPm7L/rAlRvBAp+LIR6AHqTgcaOIN8o19orYvZIuXuKHrUIy7BA6bW38i5s2HdToGWTzN+p7YUPUe1VHm60zoIkUF0oIb0hLiAP/n78r+lKuoEDJNENPzoW+pADECU4TRAFiHZMmLBgygEooLdjV8DLGYZp3+UPnH/INgLhLwQbMpidD7CRCCbV4B0BrjnIDng5j6Ao5UDd661UDUOmpIeDH+AyY/tFt54Dew0X5qx/ulXBNdVjxTbZAV5kg8FzmatTVQEFTk8GTEz5u3bOHdl5RTT7toNS4gyJtOPMhxn+OjPIDjmAGOD+haQ9EA+IImwDHjmAdj+WP3j+IWgEKra/JPbaewJNDJ+dgv35rwzmcFJQshz1xaIOlLYfwJEIk4or33FogXY+r3ONOwS8qtQRIGH50Dmo3EOfFLT25fsWEIsGsT3PU7fB109PkwHYTc5XcH2cfVUIQpVkPZwHiN1Pc1EFeOzcvGIbhyBbjS0YRyFDPeOjHYAHv52D0NZvfy2fev5hqgLYNwPX9wLugIO3BRd34EDdgF5sa6jspsSHlQXOAzCAEYg6FLCq9xSln1TnQ12BY+s/tvz+GG249gIBGADDmn/vHJ3wZHhcva+06cPZghPqPkhA9sIDQ0YvwOK/OAewnvhYUf4Ax0UNCzKZ7gRgGoGq7Uewi98KQOBXIENJ0PQHgBoai06qbxSYXhiSQwH3wg2p6jb558hgVum7jiGoLqjynzzfUYfQcw/FMj+OFHrE4VxJMP9ehw5WbRzQuk06KmeiQw/vKPx5oxCkqv5kv75VcOEIXD6h5wAemwPwpGfyB9V9ebLHJOB29uVfPf+IqQLYMiDW+LneL5KCWBmISoFH8gBBmNAHNKs9gsL+naKIYrE7tl/afQXIkbKP1h8lBTbP6vMBUiCFi47uQxW95f5tOuo7G07wL+DwN+om+ErJbmomoAIWkM6LcADbzTNk4y17uy+KyGgZ5QFm9y3favm0nQDKZCDMAcDfBbQy9uewAADlmntUeIBAGuUBuH5f8g4dIHeSe0mYRQjBpb0af+P5Rw5gBPbR+qNkwLAkUOaBwlBVYI63EWQCFt2u7ZAC5wcOuAq2s1WRBxUMFd8710L3aLSPstwjiz9yEOb7Bd2Jj7H6qPyFgHYH8K+df1TkAGhOAP5ISDf2D0IA5wx0SLDfnKDcZwYXtwebPEQv+RerfOsALAR2QOEflRCcU2sdzcPSOkh6bqC/rgv4YTw/mSeAee46XCiJt471f2ozEc21Vw7Egss7gmMAb2PRkQk9N2vN273g0GVs9ZWjwGXoIDIB2BxAifdLjd9WBvavxO8GkPmAuPwXNgkpyy9aev2LN9FZlPQZAdk5AU8GjYDIlaADwP6AunxEFu1c6i8cdHq9dwNHEn6szGbgB92CR1xAPR78WKUClwW+AFe2x37fY26iF++XkC/cRsy1j4iC3YghjwDghxwAjS8bOliSsMRgAd+u35LDVmpdPv38Y6IT0DcEpZ8N2y5fTAxSXYGz+YCw979Yc9X6q94F4MODBstCEPPADknmEWQQAXAW7EMXwAMF5xlMOoRpwB/OEwhFd2FDQAZB8xQm/ZSb6OcEWi/+GNiW2F8EwBmMGMIoQnn0snC+ATmAf30nAOwE5CnBQAZF6eGXg6re8otCgmSftfn562OugPfLjTKFueu/+/dIJNHWUQOSAWveKqoaCGDXoRs1F02Qgbm2eq2s+QhxpXad9UMF18dDBXQEFdp+TUXlORibK2PymXAhX+9khSAC8aiRSF4z9vhDHX5MFAiqosxEHvScXEhAY4mz9WX7/d/wtWFW+f05vDNY/tD5x3UOIMf6+AYg/LWgFAqU3wUAu29m/+WuwB4ZOMBj6BDlCvLNFcCMbTzo7UQ4gIFEGyyWsLQNVyDx4QYOQOkQRMzsyUSFHpPJQ2HXvQsYAD6o0fNeKsTZlw2nCw+s/zCxGTuL/c51ZuVZZ3EU4M2eI3mM8gt4TxrgrYNKxDBa5q0+EgqGCzsByBxAfUfAdjJ6EYgDvnhRiCgDGhWnacJ2HcfxPjlonQQO+uwIuiW+/FgmKwDWfSiAeYDPgfWY8ns4DNyCULH5sAM8wjCB1wFqdxrxhPXvZvdji74fWWT1LbDngNqO1aAXxdxo8SX4B2U7vD57Dhvz1+0ciVnws9Ph614+4/wTYQ7AvSLMvAtQ/UKwfVGInDrsGnrgVWFovdC3NQAAIABJREFUg6hL0PfLZyZUcwT2e1WCA8uYypLPVAD6Vt4CWYNsDuyHiaMb44/cCJCZs/1e9brkMcg1xI7HWloFUAUqY8uFks8ouNsmfBfBhAMopeNOjb88W7TzDHj8rvx2JhsWWELwQFfkBt8jX+fyh3cCiHIAXA4E218Ayu3BJiGYKwkl9pUvB6GfFVcEUSyPA3XQF2Be/MHA058r8Lp9AzNWHiEcgV4vlwAzCjhQfJmTIMfy1OMNEniWcqxVLZbbgJfeLYAgMccKCIZtdXzsvKY7yUgBXX2HA85BvjvAX8tY7fW1yVBB5i/QGbTvtHzm+SeDHIAvB6a4f9tZTw22IKIyYK8qwOsoL1CHPcT8ZnBQX0CDoH97kB+gDGrYQuQKZtR9ZptqsDMg+w5Dx/Xdfbox/gSRBDVz5SlcjD9dKfBHm5t41Ak5trF0sPvQqafLbcw5AKPeNKMR80W95Jw7Ro75K9DhuSL4IWDLc/7tuNbbrqflM88/lacD55eClqYfyAGU14DLEmB1AtvD3E4avCLsQCJwP46c/lvOYRU03B6z7oY8MHYcOAKjqvPq3gf0/HHYOjtyCRJhkRLr/ScThzzPYTLTzzC3CUALZksmcRjSTyKqY9Iy2X044QBA0fmXftC9qERduQ9R/oATk5Gtt8fx39WGCqD8IjxZ/o1KAPmHQcorwdyPg/jJQdIRmORf3BlomoGqsyBg8mzB3ChkFN6EFzYZaId1MLlIALylIL07aFfYW9cjGExwjhKKsK1U9FjJPQHpWFtup8qVYUJNeQK4rkBNmaBQwcw6SiLi4Ld/BwlBUX6ThITABqLjkptWaH9upcj7vodyBO1KpdUPypajbZGcls86/3ROAuZfB6r23v5SkP9BEJsErL8VOGgAqgMumApswM2JQEjuWZDmG6VyBKZzz27nCMLNAdDuwEN4e7TsSuygUI5AhgqPCAnmwD4Aarn+x+YIDs0JsAN7/9TtIhTb47sBDjQWuXCFzq3seQN9GzF+u7xO5hi0SuNxvdpbEk2qHtl6f13xtvYYyx/ZCcAmAfEnws1rwrD2X1/80V4Lli4jeGX4IAfgHIFqCFI9AwQ8m/2fcQR2GwtKtupe9RWIY/ud17iy2hPIQyokE1dAT1Phg3Apg8qDV3MinzC/EKh4cSQHKhVswRPJKMfUU+8gPAn6B0YWP3QPzl3pUKSRDth6SvwiUaQwCbfF4yZCWT77/DM5CUjvBDRvB6Y3BO1gFu8LKE0KNd6eJAOX9MuKCkk45Qw80LYlUeIvr4P+QYZFyTuYc3W2l0DPg1uqe6lw0ENjmnHXlRNKSsPlthMWfvpYj+w0LHaX70N0vSZJdtBNGMIJwZm2ksQgGmvapB/lPjRAu4oukneaECy4y9iQtv5Atr84gnYP0nmWzz7/rEgC4lTg9lqwBK4A+KU6UOP5BuI6wCNiMHkDNNg8PRiJQalzAnm6TlZ2pd5+mY3xWZmPOACtwkN3AKw9RQwO7L7DTp0Tj11BMdV9qFR0dE5rUc31TCYSnXUPKg1IJAhIBFJVahHuKOuMym7/bqQy8zNgY4dAyu5afi0Z9cMC3Na6ALyO5XMqAagkYPCWYJfph7IgkkSvG5BLejJ+F6XEzNYyZCCGN+8fhPjp8QrPoFYkhARm7bM6b8kke0CidjLxAE0FtrgSoZy9aH9vrn9uymUcDBsqICfKkpHzYeurANlddpAsyhN0cf6BygEnASX4yZ53HQT1Szirb5KYMF5cCGCJYfmj558TSUCcAGTfEdjyA9uBsB+gNf3YDsB8rB4ZhLE9tgDTkHY9ATzk2YE8zhFYCzsCPDsGBE9SSQW2OFygHEbef257OPfwvJ2E5aGkYL6yg2FDBZxI5ikVD5cF5zXhBWb4RagUtw9b58MkIc8RTCjy+/pj21BFhxyt38EqvM4VJDzwdS6fe/75gABK/I6/FORzAUgI6aJ7cb8nA6OKwgVYpR+FBwrkmRj2757+9hrdW0YgFDkB8x0qSMsxbVCBD79RFjuLNFEFlyovIY81BHtg4feA0PsGPoe24pFDUcSiJ+F4YvQxe70fopQ2dgV0vPDlIH2gN/LJZwzKergduwEFbusQkEhtWFDuk8wJkAuw14Ak0v5e/s1MAOmXgV8HAGNIQD8V7nIBfmbg3hDEyT2cvWfAXrZFsDRQ+r5+VnelzGUw8+C0/QAGvEafLQANcZgsOJ+bv0McBhglJ+Da6+qEFc6S41E7wBwmK01qLT3L6XkHcN7J8p4lu3zPBhWOUby/X8WwD2CsvvgWIAQgg1Y5ExdGoAp3SoazLoEVvYUG7Y7uy4KE4fJ55/dQFYCAL2cF0u8F1sQf/VIQlg1Vpr/zHgADOH6TMCq5nAw0o/QMlAjwipR6roBcSjVdcHwA7TTQcxlLw1t9FwDwNNgBho8oL9qfCnucK1AgMkQZWfhJV6DyDHWZKMfh9YS5AVVFKGosGqgUuPk8cQhgHcG+HVQ+GgG0MYpuwRLGelr+2Pm1DgFsyhxVARDsOgm4X4J7PwDYbfGKcGvRm9I3WMH+BVxhPkCoPyQK5bkUYE3YoMEWA7kX+3uQmOOYcCJyEiLEAPCqMEKGQMPQgex8x3koZWb7Hln+npXf1z3KFYAaDhwJ2/UplXe/GkzqS6Q1EwIY+y5fL6YtfSKAGPwYBu8GaSOA02nrAsS5ALYMmMKD7UthXmA7kX9V+P7Vq7IzMYAyY9mwlu7QtvO2AvjkBDxJsFLj8VmpESp4rp66otNottXuMSIMALBLYtlrUkqYQDEmB0MTQ7AL9Z7qUCQj3214UvmBfuhgyUHnF+oA707o8bZfHdsAlSoAPTfAAIxJJIOYqhQRgA0pgFCxwkfhA4N/I9Pl88/vDQhgAy+WAfnVYNgKjIk/9U4AahvmrsBKAOkNQumGlb+L0+iBOQM7mi1YuwMGJOLUvxBGENdXaz0CuSIX+2Meo1DAQKtj6ZXi8zTcQls4UIwiT4cMlniwb36k8Hy+rmsQquavNx3BWny/rLs+zBd4wrAq7hXXEYprUEIrj47BEtvI0itSSGFB++7FFShiWP6t8+umClB/GKTG/uwGUPlFGbBafpoIlPMB9SIGGX8LCN8PgOvd37IJiN2FJRSvtZG6M3zaoItBnNdU28xn64cCKvnmgQ5LgtKdIgef+e9dCwzOQV1fuRU7MIk8REnOkYhImvF3Qgtf9ne2vpMY9MqOVlsRir0nHmR9cmAiYRKT4B2QCcf56BAsYayn5Y+fz+t6em9S+1wFSMqP9f+SGMQXgkQdgfyeQHgpSK8TUCUJUbkVYbjYXABL7seKDkpvVD0CuwIwDtd8PIjduoClwV/6t9tVeXrCAKYpL1/D8fyAV+5jIYZRWFk1sN9FAXYfpJ3wQbsF4QA6hNGz8AiS9nf+ZoI8LIhRzUfOIYjXZduwdQwF1Og0PFn4fRoppnXLF+wEsM0DwNmAhQAoDDDvCtgOZasB+8FLrsDZ/M7U4GL53ew/tOyYW2jLGxCUDUcVF4ruQgPlCgSwndXMxxY9AOgKujB2MXYnrOjE4+4cE/kBp9aySuFjbkdqjwX8cD9l73W+QJGDXoZAtSodvSwUwWaBR/vn8dFAinbcEomy5Ug6PUfAxFMIAJ0PhhD1XECMy584r+f19PpiCWDrB8i1f3QD9V0BOCdgXA2oIIjmC8gkIDiJMEkYATYCfk/RRwQShAxVqSKiQK2GbUSc3XUJZOsjMkk2O6Ya4QlEA9BEGDBVafCk8fhSYb6mQSsyAkoBFsFhXx2OVn9k+2PyaCDT4YICJ8fxM9so4kiS3sY4g1/ts/yJ19fXT8v5YrP/rRFoAzV3APZyAWKSULX04tXh3B/QqQI4BZ0OBY6qP4OG3EfpAOzG8R0S6BIFhyTYCcjHZCLCh97bFvYbgBePUghFEgfUv5la9+0fWyoUPQ+spp4slUvIy4JJP9rqd5wBKPu+FZUklVprcCty0ATkVP0FzABsxLCeli987/ra6eJ8lQgArH8lgEIG21fmkIBfEhpXA8y8ARUedHIAxuYfJAAkEA+dNGw1bPLyUKnbnjYMgTMGDT9en7lXQJEROIlBqOHASvG0AzgBuZQVI5DNgj1MBO5ohqNMEoWO/W0o4B2AdzPKKhtnEHbrHXMJeL06Zrehw35doiQYqb1yCvacNgfACcDdMHzha+vPL5frjSWA11uNf/8VoOwGaguw7QfYL4SnCZMDaD39oiRYYFh+cciAUij5QRJAE+7BiiTAysvntkqtgRw5CR9CYHZfHgtn8k2GAEWZOKCx35vuyCDmd0RgkpvC5vecwcSsQEVQBkCdY5S7zKDh79CAkvc4UBnAc9i/PaDLeas7gFePK2CzYwitPhAoKroiHU94jRiWL3pt/dnl8nQXhwD4I6FRI5BtFEpfGpN+/ZJgfeBYJaAMPyp5IhxWb0EUJsmHgx72hay/BiEeNzqGWh6QhQkFPFlU4HZU296LfJ4hQcC5ujkChF/eZ6IvQIJ2IgE5VvV23RbcmnhGCT/1k2EIUvu3tuq9mD0RcGzxWbUdQWR3VAiPyUa5l0YAREC1XGhdEB57+aL3rD+zXJ5uT6fzhc4BQDtwdgL7acqvA2GzEMf26heEqtqXGDvIERgXIBKCQYnQEQUafFHi4+2tcto8gIGryQXwXmW/pi5IV96F8HbsFo7kCDyN7UcLymoRmcQxvz2+2W744lJBLtOhAA5ivD+WCKpiypZfJBN/jFllTyDXoLKAtoBk8HtwewehtsHviODXboHDFhsWLF/88+tP7QSwbHkATP6h9S+xP1t/3SKcvmjPAdCUYdoeByWCpS0fEAKAXhOCdwt+aCJkG4A81AnshZjIVkugCWDyddTPZkCX60fnQS7Eba8gnY9zcCZiUTml+jbufzpZRKDEI3PcHOUetDuIQeqBHpBNVW0kGPs3hhwFtF27P905yHG+/WxzD7xuPS1f/HPrT1xcnu5OF+t1IoDcD2BifwQ6hgSqHEgtwjXDD+8CiKoAveWDvMBxoEckAEBy4UEhBVboTAIuOeeBWgaVpY12XOMO4HgxQWEIwJG/3kt1/yngmr3B8cTuQJOMeuOvpYZ2N6zNJ5WddBgMMFRlQxwZuHPlQFTS46GBU+fJZh/lGiJX0F/uwb8nAb/kZ9cf23IAmwvoE4B/S1DL7HtnoJN+yu4zMRTQ0HITz5M6C3LoEcJwXQBkVvEGZrweUuLqCFROQOj9QOnrAB6UFflaG+iZJIJwYxgyRGD3pIODX7kGSShh6c6SwiG1f3Q5MFb2puLevvMbeXu5A23f50MCD352Bo20EkGmzxsB/OjFxel2J4AtD+DKfyUHoNqDtxsTOYIcBuwAoFmBJjwo4ImqA327PwRzQBxuP6P2EVjztXbtPWiMSPjxeROJ2EDHAqK5g1ZXLyTJZMPuJQC3y9Lba2AV5rDHWOlQlSeJ4EBFoecODBEEnYU6BEBw4/2aVPmOVUfAd+0+dZYiQNG9lOXaFSBZ2EQkfm889k4AX/oz6w8vmQBOy3rVCKCUAqEBKOoK7LUI5zcDmRZhsPoWEEwUTVkr0TwhFHDgo0SeU00gDwaf0O5UtAv6Bpx7cOdWpNPKkh5OjRjseZ8SBoz31ZOHYrC70GLY9gsEOjULUDuCbihB8+XZlVg1Va8wo9CkhBKgrAxcrf6oysJBwPFKWFPBDO28fWLga7XOYPnSn15/cFP/zQWcLk43iQD43QA5CVjfCcDNQUnl9y/NVYEM9qZNrPTqF4S1/U/H8I7giAuIgdzIxuhqlySyEstYnQBqEn6ODmzBslOaNPCgrsQ+gVmC8S4jDgX62+rjJlLyispgw+9jtyYioJh55jgFNBwmoN2uahoc36qnBWkP5Eftvtn+ES8Aad+JY31yBpCw3B3Al/3U+gN7DuDidLP9l9qCg1eEj+YFmJ8Vy+BAd1CHuQgJXFlvZP0tcXRJYAbEodozMDKwpxS87wgYzKGrCEuZjarkvmKCUWTn6/7d6oFXW3NekSj0oB7E8J1ZgAg4RRwS2CbcKe8I9C4D933q30wafLxCjk7VSfFnwoa++jdyZutfPi9f9pPr919cphzAaTldLxfrXg7slQTxp8NMIpAcQB0ctR8AlB1mDbZBpPIAbR8P8njdvm2YxS/k1FRfba90mo/J17Q/tEH1oIGtnZ8DAEM7gwlHFVKmz8H4GNNWZUAZtjrr/cu+KqnYA7sHbL5q0QYcJfZiJfeA9jP67BU0d9AUM4rZjy7HqscMGaht6n12Mwu9wiuCQcCzU0HiWb78J9fvLTmAZSOAy9NNIgDIAVA7cCOH7dBifgCrPr/+y7T8stJbd5AufqYikI/zQkEPRAFq6kGftwMw9bdhcBUiAAgFYHZK3w0DWO91so+JDn1FJaZwXgOqjCcNXMLvLVCKvV0xfke9DbgIasiJyGOcAHyEK4C23nLNM4AfhQcR+PvLNTGE5JCvffnyn1i/u1QBdgdwuecB9jAgqgi0Xwr2MwRdVYAbgvacQCYODAnQgqOTMNoVxP8VLOP8gFJfBdZk08gh1GuEYU3bKEcwk0C0DiQmCL6urnMwLshvKYFe7nenXdhCpUG2B3YNan+kLuCDSUMRkfDgZxcSxfdG8YO23h6IkQwUAI8RAFYjJtSfkoNa/dsxl6/48fW7qgNIeYDrrRqQXgQqZge6dmDbJFQV2839L+CkDsGa1Rd2viQUiQQ8CBCoPjdgQOlKc2jD899By7DR6Qm1t8BHZYPrFSVFVuR964HSGyhRHC38Bfy8Sd5zInwwAK/PLS8NHIJNINp7wKpsSILCnmMgt1Bnu+/UGsiOVXZs/9t32vNrcF/aeY9m+/0x05i3x9HHtyRhyYYJZD0tX/Fj63dsnYA1CXhxut5CgfV0XhoBbOFA6f/nBKHN/PccgF+XnIAdoD4k8KraTwByydADSIDeZekD9Q/JgYHQcQ9dEgJdFrG/vVcAmWEfA+q9CgVYjW34gNDVnYR6e00a9lx2+jGtOxASDElioj9gnPW3ScyR5WcF7ib2yOEUQomIZLScySxtjySyEcCPrt+OBJAcwO4CLuPJQQX0pUkoA7mqPvyEmKv50zpZ2hN5AQoRFMjtEM8kMcgJ7A9I2HjlGjwRAZEQAB1QJXEQKKmPIDofxuXKLfBRrWPiUEABl8gA4mxUaT43A1Bu24nZrW73iMCC0MT9gz4DBAWC07kCqB5YIHmV98dB2w6Ae0L7ryKOEcBH6r+tX77yR9ZvUw7gtBFB/akwGw7YFuCcKwCHYJt+GuDrgBBVAQ9oVnml+p0qwKLzARGwJdg6Sj1PHKiB1hXUc1KC0V9LftQy3yBIJHh7kTqu3TsPmW7VwRKItfgxcWgngL7iEYDvJgA7JCGsOpPPY5xAIVpU2VG8zw5BOQoP9IBgSN0j0ihOYDv38lU/vP7NrQRYQoDiAPaegNN5SS/+VAQArcG7jQdlr7G7bRNuIUB2DC7Dz4Duf5YuwIAkIIEXAmxQf3Yn3RxCDGZWzP0M7lpjQtmHhXM8HYIIE36iemBy883f1KM7MDKgvR9ojsF/c84P6LcEz4Mcz6Cs8zQBdBqGGKgj8CtgoxMp1xmRgl3uE4T6WG27RAA/tH7r3glY+wC2XoDTzZYH2MKARgDtRaGt9MevC6eqgJnm65OADcAIVJ0TaEMuIAUJOjrWKGO/r49Ljggu1i6/zqu9qga0HDps3ykBWhXXbzCSx4S2WksqilBilW+uxd4B5QTwWu36jvJT9cESQR/w6nyodhFAUYWTs5u3+W5fUOERATxV/XvEgOTKcX/5nAjgB9dvKY1Aex9AqQSUZOCu5vZ9gb72314ZZhuDIgeAICt/RySgbD4s25XHbtMGQl4+yOonYPpjaAUmYIsuQ+MNOuuNNlMYwNbcaG6Y14jcgW9OYo33kIQzdisEVun5E8fcRmnhO7cBq4mFj+M/434xgBuBWSVEUPDfqKSsqk8jAEzI+Wtm8mIgxxa/3QuzjygRLl/9d9dvIgewlwJrMnDrCajNPr5F2PYE0OvDTD2fHYACPMb5A1fgQC1IgBS9Den8Vz2GIJkDiUHW+hILCg9gGlPZrlt1h6vtkoinivr4O4lH3otTgz4zr4DerhipB49djytr+Lw/gsCebx7wvJ+ezIPgsX+jy5hxAkgkcWzOxPFC7b8oD6rz2dxEuu7lq39g/caeA7AzBEvWv8T8+bPp/MOkH/QI5Gx/+uJcCVCOIG3XBlNT83oMnD+ACm4GvlB2E1fT+l7VYBRCiOahmHSMT/BvQAxdS6TyrU4sCQnupAV/HoqdsMNqq/EiVMLlY+lQgtUeaSByAibTb0qDGYD1mUZOQIcPiljwGmb/ZkC/MPs/VfufcRI2R1Cub/ma71+/YZsMdLF1AEIIAMnA6z0ZmOcHsBtIIBVvDS6Ah4RgetAZcK4SoBW/kgCouSKAemwHUjhusG7fN1D8fbhLwtiuwocYVsUBao8gD2uGmTDaD4A4kjHEGDgE+dITdUYGMak2Ac9ruicMBh1q9pAcnpD5b6roXcIs0Mueve1n1D2NuQLco/a/PScbFlgHpdZte+L1LV/zfevX7WXAy5T44xzATgSnkgzcEoHcIQgNQjgvIFcGsCRokn6mHbjlAbziCxdQv4TNBcgGoO06egnCHjCDEKJCsRv/91qJUaPVnH/WcAA/5Qo0+AWQBVDtvspZcGDwxAai2iXHNCHUWTgSr9YM5PZZKTvaYiTqNyT+ly3Ex0KEXpIPv0sBtfoeaR06BHuvl6/53vWvKgJAB5A6A/07Asx8AaP4AGjpAJoLYMBXh5Dr+MY1uKYhC275rgA4ToORbhJCYGM1wKh6zykU5R0RA4UKXqM9QfS2kU5BTFe27iSdw0Pc1hCsMxq4AXFEa8j9Of1PhU2QAxFJFDYwIPDIrIT9UMCCZr8L+f72yKOAj8GKLiLaRrkIdc0N3EguviSIJIFOaHnH96z/TyOA9Xq5WNJ8gFwFyAnBm6012AJeJATxfQDmBSGo8JT1VwRByTmboYd8gVTofq5gH4JEChVcPcUfWXhJNKTkzol0YG3CDuUICPYyd2GPrz7xFfjXk0U+wZIH+gc8JlIGg50BydAfK769B6iYNmfwhPgfMucI3OhvBdzHEUD7bmzlX5T670nAd3z3+leGDmB/Uch6KRuCavyPCcLtEoPPoOLcB+A/l+NQmS50Bx7cJiyIAC6qAZYUCgjihKKCaB3QM65hMBeh6LKBozyu0vSivN4D9BTeazFexYQbCFqIFUEoAvkFIYAXUPNnRY8qDJFFb9vbZF4E9McTgM81LO/4O+tf3gjgYgP5xem6/Lsrf8oJ7HMDttxAi//FT4nnVuCk1qU6gPmBAmKO98v2ZZBah9BsPdp9BCLkCCJHEGX9DYB61YBRJUHAP0w4kuYOld67CO8bED6aioptxbVqL+cIZPXABx1zZUN/RqvaBUqWsHoWHyktdAA5b8IWeqToCLTob7w2/nvGDURxflTjj8iiHx5wBaB9Xr72u9a/BHMBahKQcwDpdWHr/ivCtTtwSv079r+ShVJ6ArkDNxCFiXftfrbWzknDomh+eRqC/RJhA5OuBoSuYNYRhDkFHTrIpeatu/aKPIytz2AvYeBLOQZj9aE4GIYDlC/QDkBbfHQmFXTTLwZhkrGqOAP6WTKICSBOBvaBHIcFinw4dFDbLF/7nev/ERFAcQAJ/LsL2H9FuE8ATdHrdOL6Ik9Ue5hEVIFW1JxcgJnYw+ssUFsSUQCYKgIG5NNuwB+3W0IEEFv4CVcB/fZ+DkBEJ6iW9h2EZQ9FDHHyr+3FYRAThgItghPV2cLOlqL4jKz4BvDGMSF454CtVP8poMd9+27A229FEB6ko7BgTCaVCMgJbedavvY71r9YQoCS8MNOwLpsOV3ltwa3ZCA6gPIGIQwBTIKPAa/ATstMYq2/rsJDkkUBBoOOqwgE7h4pyKaf4zkCA+uZ6gFPPKo9DAdcgcz9Z1BCmbEXDlhwT+QDqOKAgz8kAPEz6A0gDHhPAArYjyGAXlPPvBvQ6q2s/iH7P3iDcHIUMUks7/zb6/8qHUCO/wsBZAeQJgjV14VlN4C9AbXjrzQHgSMAckg3DtU8/b0vM3Zf5AyicEAtFwm+qvwZcNsZ0uOxVj4tP/tZAuEx81AOLX4jCFbXvr7TWvHrQWp/TwnGxCcq6VQm5ghABRK6QuDDBFgyOZvwRRHASPWjRF4vwddzAyrWRzJCoOo3/4zsv3UKJZTogX93AO/89vUvcBLQxP9pXsDWJHS1hwIXJ/sbgibbjwlAagl28T4qegGeDgssYCnGd2U9jOfFtqIMiMdvQIri/8i6Ry5DQPNoDuBQ30A6nwUvfDowr4CP4Qmhnam3LVIEvxgUr9UnBHX5Ds8aE4IlJs7Aa3eglXKGDBjgngwAoFK1VYgwsvfz66Nk4/LOv7X++cv2SrCWBPQOYCOAXA1YL+qPiJpWYCYA/FwUNi1riouKH+QAyBUY5zCt+lEVQZcOK2xB7SX0Z+r/IekMdN+p87xPaA6j5wPweD4rcIQAmHRGVQFDCrWxxzsUJgX7uZ8DiMhFHQNDkkYqHpRdMoDmoC4BQAjWFHqWALzSWycROwHlOJZ3fdv65zAEqGVAJID29+4AlvzSUFvrL2Cn9wcWglD2v4JHhQmZMIJwwE7hRetOScKOQ9hed+Iy/a6/P1D8EPht+/2vrtprl+EhOw/8/SHTLxVZmOtgQZ2T4Rg6AFHK9Ha/DD90KKzS3lFEBKBdANpkPp+10EwOCHrlDup1POItwUwuWo2Vxe+TQnM1CvRzRLG862+s/9PFVeoDSLX/9Xq5XMq8gNIDsPcD1HkC28tCytuC9vi/5QLs5KCi9hTrLz4hmIYFLBfk0GJ0BrlS97hvoIGylxT0wN+zARLQUbigCEYAMDzmNig6IUcx+wecQuQHpglgMmesYnE4AAAgAElEQVQwRwAWpPiJATln+z3oFbBRCc3flIfo2XpW03FuwAKSHUI7lwJuDPCx+isSgT6Ad33r+mcvLtfbi8tley1YIoDcDmyagbBJCN4WJMHP/QGo/jv4CzCa8pvmoR38CuQR8CfzAlRVaFBMwCbthnx7v1rQlH4EViCEx+QBwpIiqmrfLRwigHqNVqnLGXgpHntEAArQPZCzYs8RgnAE1a1YYHRVHyoY2xE1McTxeEwWihReBAHMHmM9Le/66+uf2QlgdwBpHkBxAzQfwDiAbTvzpqDa/beBYOsU3L52Dgd25aT8gKsAJJC1TkIgCRcGFMvfs/u0jux+ze2HDUY2NxCSwyAUMJTgQD9DGBluA8KYCRv0NgBjOsdcCIBQbOSjYnzW+xmV77kCre7t7Uc+ro9A384ykx/oOYPY7iuC6C/zrmAW2GW7cQixvPtb1v9+I4AN/DUMKOEAtgOXv9u04ev6Q6JV4fPPiYEDSGW9Bn6XACz7ZiA6AqgABUB3l5VBaEnCFvM64cHmPXq5garCojyo7Lo4loa9WDrhEmaAbxWbCUWrOypu8Rc6BzAmAKXe9vg4UNvVNoBb6vAzCDmXYOkHjzMCOKp1/Hds52fUXrXz+mVj8NpzWdAXp2IJyRPI8u5vXv/b/Y1AFycggBwG2EpAmhvQXhySkoEK/MYNMPjt5/1xZ4Iw4HdhgOoPiJzAWYCYty0Oo1j/mBQqNAfE0LaLlD1W/P45WFnb59m/+t2KaNijc4228etHLkCFDHWZKZURAcg2Yq3u7CBeDAG0GFo3CcXKrkAbAbmQ5B5zmIYe9Aap5Bttw26Ft13e/U3rn94IIKt/TQRe5ETgHgbYqcHmpSEpGQjKf4gQGvh9ApDyAFL1rc1vtr6fK0hrAYwm4QiEYGJuDgIYzDZP4M5hOvjw3D0IHwgRuEMwtPP6fAreKl8QuwDb/BMpPPoF+wvD3klYsKrmInYOXjWZAJSqI9D83/ExMQRRuQGlvscJwKv2TGhQCCFyFuV6l3d/4/m/urhachVgvb7Y8gDpZ8JdMrCSAYQI6dXhSAD5rUGm7JfAjDMFfViACg3g7zqBArPYCZSuQgvIsj26AASbdQMWhna7FC6U/43MPS2H3oKxgk+SwBNyBFEQoMIL3tYTAmcOyu8aiuVZ2SKyQACV+xSRAm87H/+3bzRyB0pNLaGo0MCqtyaA4yDv2/92TruddwrLu//a+b+4vFzqK8G2dwPCJKCwMajOF9hfGVbKgBH4ySGYnEAC4YnyBPsD5+2IDLTiN/W3sbxX/BbF23Ws9WnwAYW4xB/rvQBt3sevmQF4sM1EjsCCK1J/XK6A2tbzWukIRKvyk8IBRxRzdh89Ayu0KttFYNYlPkscTDhepZsXQbseATRW7nYmbf1VeKJDiG3p8u5vWP+z1AmY1Z8SgIUQQP3NlOE0UzD/glAmgqT0ojdAJAQl+I3dz25gL9OBM6jHauCs+Yi6La2LlrvEH1KAJ450VBECZCdg6KDjEDTRKJCiYxl7Bt5CKbmGvN1zJiyI3yCk5wNwoKCIQS+z3kOpdSM7TRDxPvM2PyIDDgdmE30vngAi9dcksLz69et/kjoBKwHUMqAMBUpOoBDFnhRMYUCz+Qr8eRlXBEKVL2AvNXr7uSUfM8irwjYHgI1DKgSwjT3gHNzEINybQgCO7QHwqk6gGnv0dthFOOMSZtQ9Jo/Y7mdYiW4/BFyz6DGJNJDoPe36ppga2Lx+liDG5IDqXc7tY2qr6PF2nlxG8bklBQ/c0frR8dGBLK9+3fqnLi72RqAtAdj6AEwFgPIB0BW4v0249ARI5Qcy6ILflwtLCNDgV7Ypys7uAJenEMLsWxXaVxQcQdTGICQUkSDM3YGxmjO8IzDn7WY6DTnh1/k8Un8J3ADsFnIN6HgOdg0YMtjt/NGOKP/j1R4beR4f/7Nys+L3qwOWYhCQNpR4DPjt9/Nhgj3m8upfXf+jWgW4PN1cqARg7hDMJGHbgrfGocvTzbqcL6z157jfuoINnL2koAO/yBskgJPi5/DBx/cFYAxo+kwVAWv3AeZBV6ElkkJICSx+XQZRt1fgMeqf9pkFf5l+yv4g2t9qrT9PHO8r5ecZf33lx7VouyNC6G2DYENA279bgg5B/kYRQE/de3mBBvRRjiDRTdl+efX/Xf9kKwO2MABDgpoUzGpvXhxSl209AQjyQgCvu0agdeklBZsTqIDhBKEBOQBYKv7WE2BB3iJ4sP3UbahDBp45iOqOHoBBaz+360HIaaCH4UFUVoTlEsBB4lCDXWUBFODt3pEjeIwbUMfywO2FAx7ACuwxAeikGlp+Bu0oHPAJwrm43RJAnNhr1xNvU0hgefX/Pv/7rQzY2oA30LuKABBA7RosyzYXANWA6gYMeBMZaOXHHEGGqKsMCHKAZCAnCS3wMRzIeiwSi2zlW55AATzODRjtF1UDooTAxIeewaQbWbmN+j+xUqCgzWTB23ir75U/dgneXzQV7wGdnUSc2GO3gMlBlSj0gG3XocD8YglgjhyKrvsQokMCy+m0vPpXzv9ucQCp+SfF+xd7nO9j/50URA4gdQjmHxItRLBQebACWiQEAewJdDm+r63C6XMDuX2PgLH8wgnU/VwlwBNDcx42AMAJSirmN2ptyn7aEcR5Axs6FID3t1dv91HUoJf17b7dB5XckE2d11+2ZzDrygD6DFb3Y5b/qBMYuQMGn46v58OBPph7Ci/tP/20GB7d5hUUCaRly6v/1/pvp8lAbS4AzAnYSWBvDirZ/0wAygGcLtar2hMgwc8JQV0ZSMoN/+XPFvwFpna7ppmFMJraNwIpwLahAfcVcB6B5xM4fa7EYwHM+1njr6x/FPfTGYOE4XTsPwoXur8cxKTAtNDWe4AzUBthxJY/VngmCaXidhvrDlCxEcz9+r93GLEbsADUYG5nbvE8hx8xkAvgyx7+GLhv+3t59S+v764OAN4JUBN+OSnYEoDrdf07kcHNcpneFbAnA43659LgDmAEf/D3pu8j8LNTyFl46w4A4KY8yKSRt4O+A4799ecGcBvPxyFBrN4zVQL9HoIoQHixBBA5hjjut/DGnAFSQVluXYIKDRjQ6Dp6YG+hgz1qAUc7zljpfQIwcAPwS0KKELxFt0e2yt1b58kgdhAa/NvS5dW/tL5zJ4C9AuDtfwoF0iSgPFW4/r0t253ARgCZDPYwIKu/dAMYBiDY8z7NqlsXwGEBbseVgLatbx6KQoFY7YMQARKLHtzHk4MGzBPtxZ2aAmX/Izfhge2Jw1t4a+61ytuwQIGeKUJVArzizwLfA5v1P123Vc1GSAxS5xDAelv73/a0JNOz/kgT7ZryxZlf8sVl/m/lIGLgl+++vPp/nr/m4nKbC9A6AQvoMRSA2H8H+77NBnpIAu4/MX5RqgE504+hADoB9/cGmrmQAMnAhAW7gyjqjPkCIAKT+LPgdklEU7yzvQOeMND2H3QCtaphgwMP0RjMeMbHOAALWntmdTwLa64MzIIeodqoJUr6WRhbEjnmBBqxWfi1n+zWBNEHOFt7ZfURphFJoAtQ21uXYH1Gs/498LdAYXn1f1+/quYA9nkA2eLnRqCNGPZXhOV6P/67EwEQQCGENDloy/hDEtAAXocACdi2X4BDAvyM4Hfb1ap7dhKUGEQAa/XHDsQcKphZhFHyEMID0y6MPkH/qnEvTNBGfFbd57bTxMFQL+rJVxSBXqm9Bz7uPU4Etq17wPdOIB95J1xW3raMrXtU/x8BXhOAsu4NkBy7z9j6mW20e9hCgL+4fgX3Aeygh0qAj/8TKezgL6HB1f5Ogevl6nS7TxHegZz/k+DH/oDXIfZvLsCqO24D6l6bgXxSUIcCZd8gPDBqTIlEMwcAzxeDviozzQDU8ftkPiDs/JsDuiYTVvG2lXYA3jNwVsAm9LzCe0VXZOHjdwZ2epOUpQ0mEQ9qH8PPxPkRGaDJ96FFpNL9GP9p6s8OQH3eCOB/W78M3gewzwPY7X1xAqD8Tf2zSygOIOUA9jzCXg68OF+mGLW4gALq2BE0sCdiMOBfXjefffxfgNryBiU5Z1wCTCay7oEVHtXdA72XKDRuIoOeHQaercGMHMJEo4+aV2DBfYwQeqGDygbw9r2wQCm8pRBUdeEQzAxDezSV7POE0LH9zg+o/MAR+++3xSVo0zHUYJWeVXZLFHPALyS1vPt/OX/xNh24qT5MCqLEX4n767/FATQiSI7gct3fF2hDAAX+5gJs/A+A38mghQUq/o9CgbIcY3u/bYGjrxD4/YrSi9wBdBIyQXjAxzmC5iXsX4oongL2tK8nCG34tTtoBKCThR706axuOU0fVvD2YcEoDChA8HYfQedDAQvex9l/RQCjZRa4x9X/GPAL2Szv/gvrF17CZKCdCPYuwNwMlBN+JdY3/17lHEAmghoSXJ5ubQiA4PdEwLH/Dvha+wfwQwXBgZtcA69vVty6iwb7AgZcj9N+W+iwLx20DmuXgKCL7T6v0Uofqfsx1edwIHIBfrmmCmPY3VuJmCjsMWLgM2mosEARgl5mCWAmFLB+Ymz3lVtggPJ5ewQQ7VtgjDmE3jJPEsu7//z6Ba0PwKp/6QYsOYC9VHjZ4n8AfM0HXGy5gDo5KLmApOAF1P7vZNcT0JEMjPLzNnVbtP8cKoC6S4LAPAABHCYZVUC6RGIDNNt8b/sR1n0HoEOEo44g2p4hbz/3CQDWyhmDDOhy7Dngo6NgW2913PoIb/e96nOGAD/j/seXj8jBry/2u8HWJwF76xrEHw/86gDe9efOn3+5vRIsx/yl9FfLgpdpTgDY/jRHAGx//Xy1L98JYLk4XzUXsCkmJgWbC2jgx9i/kIFalgEP1QKv9pwLaKpucwJo/znhV8godgE8qWhEAjo0YKBiLkCBWCn8jOrPbFMsOpCC+4XeiDBmw4CYDKyu+2DBx/rKCaiEIFPEnOr3E34I0ZYz8O7A0ouO/4+ovz4DHreAu/2riCKtXd71P58/73J/KWhpBU4u4GLv7kvJvp0M9lLgen1xlbL/hgQgFNjfMLy7gJwHgERgIgGbHEygKUAvJJHj/qra1h342L4pf10nOgY1UQgSEFOKo3wAgr6XHLTvEMJwowAKAWqP5EOAx5IAgpeOUe26tvYJjt498Na9vIC1+O2IHviPt/x4VKX63i2oJRFBIPgUAWi1j+J5u1wBm4GrfEEM7j4ppLXLu/7H9XN3AoAeAGgKSuqPLiCDvZIAgj/b/0ICpgpgQoEE9Jb4KwDOy43dj8BPicE9LodtYeKQJwx0BFllIUSwoFbOoCizTQaOHIGfhmxpwQLdhwwWfk/IATzyBaIzeQCv7wz04jKU4S8kY6nCAlkpvLf8SCHHQK9AjlBt59JW3G57xBH40KCdAVXdVwdY83ukYH3B8q4/u35OygFk5S9lwKL+l+ACWP0t+Hf7X3IAez/A8voFkkBK7rVQAO1/IQN0CW1ZcgnFLVhAc3/AHAlURYeXitjwgKsCCPbob9VbYG38TG4gQYRTgQz4SQKYnA7M2j6bC7Db+TDAq35s7RVoLbTVpxj8WtubXe9XAGwiz+v9yAEw9C0oj6u/phsL/TngY8CxvPPPnD+LQ4BL6PzbYv+LDejl31zm2x3A1ZLmEOTYH/7dw4DTcr5sgH8v5AFsTqARQ7b+Bey1/s/gz58hRHCkALMJnfWn2YWzwPdhAJOEzRdYGOO2ESnY5TpsUCFDXpbbnCPwegMfL5klABsa9JN9EfRV7O+tfE/TZ+J+b8+tlvdtf0QArMYM7Nj+27i/D28mD+8H2AOMPpcjLu/8H9bPvLg43V5yCACx/5b533MBu+LveYDkGK6WDegpJ1Dsf/p3dwKnPQ/w3toQ1KoBrTKArqApfKkeKOUvio9xP6u+cAHO4rcwAGcSHksS6lAgyhcoQvBaD8oeTC8uDkHBdzv3G0sAKhBQNIAQLleqrL2lhb7510D3ZNEDu03t4ZY6VEAnEG0dq72y62P119bfUsa82isyqATwtf/d+hnJAUAIsMX8HALkEmAigaT6xQHsFYGrbP+3f1siME0PXt4LpUAsCxIRbMqf4/9CFsb2jxxBjfuBHKifQCcCmQwKLLHEGKn9yAX08wSVANyPhRxPBJY9tiFbaOSxZKD3Q3g2+uGl4zxArPk+M9CjBIasNvX9UMCnCvswR+AhlL0XiAAbxfCj2N4Tx0jn9Xr8Bss7/pvzp5cQ4HJ/H8B6vYUALfGHmX/4+2qFECD9vdn+Av6Lq9P2YyO3G/j3+H2P/fPfORfQQN5yAwh8QwI1iVjCBPVvBjK0Dtc8Qg4JIgJQLqDvBmy8H6t+QAD0UlGGu53uOxf/c9YAHcJRIogIwGp9OsOYAHRtYOQHGhBHGt9zBlbB8XoTPBqsLJx1jM+WPqIDPnaDooLxGPqWTB4HfHWM5R1/ev20y4v2PgAs+212fyeDZv139b/cY/715rKEADvwKwnc5XBgCwPu1uX1BR3AeSOBnAisAOfPuXFoW28dAeUIcq5AJwuRIFDJRckwIAd8g5DKE+j16B7y37MvHDVvOEajPyIATx8cHjQIquRhZOv1UcbVAEsJI6BHQUDbr6fhDOkZiD8e9Ec0nwMDa+x7cb2H6tMMf6EjTxzLO/7r9VMvLtb9xR4p+ZdBn2v+W24gx/07Eeyfd/ufbX+J/3MIkEOBXf2Xq9Pd6SJVAgrw939LCXBXavhcS4MW+Coc8O4A8wUJ/E3to8qAXm7dgA0HEPS4XbXy+SfNMNvf4IlAbb0AZl/q0beq3q//67pAWzrnAlitPQkcI4Aj8Lehgf7kLbungFnTr91BPwRQsJ6L9DmbgHCc8wAvTvnLkZav+S/Pn9KqACkPsCl8TvLt4C8uYF9ecwA5BChEUJJ/16e7vay4hQA7AZwvE/ghD3BKFQEJfugXSCAuPQMF4HkZTBJqYA+qBSo34FRfkYFqFS75AiCGmdeO8ctF5LsF0jEb5BD+fRdg10Ylwm2YMaDVZ47ibTBxlADQwHPIwFDVbmDGAfSIIYb0nO3XoD9a2Ovp+kjhR+tH1BDtv3z1f77+vpYETC6gZP0vU8a/qn4lgBQS7HH/5fXe9ZeTgEuy/1en7d9CAFc1D1DUvuQFQP1LjgDzAiZHsIO45BIQ6Br0NvZ/ihtoJGDCAAd6jPXt31bhdTlwPgcQ6XwM+jgc6JOBNfJlW7XUqjwDPgK9zR54kI/MfboiG20rQLfjMJBx6yhXYHW6F/Nj1kDF20xD3gFoGL9R4N/OtnzVf3r+pEQAGfw1CZjBX23/9nmL/5dN3W8urlIOoGT/M/B35c9/329/ny7Peykwlfu2f4vlb9b/XAmhdQgmABfXkPoGPDnYnEADPcwlyOofE0LJDwzCAflGIeEGahMPWvxRJSBS+p4DsG5hZP81CYz9wBwJHCEAFRJo9e4X/Y7bfF8AHIGeCcLCegR4Xh+TQl+/31gC+I/Pv/fyMjf0bBOCNsXfSGDr+tvBX4Cfkn+76m9JQEEAF9e76hcSuN+cwOYOdiDvIE8EUMGdKwPJwvtcQMsbtLZhGxY0oCP4PRH08gN2XZuR2EqDXDmwLb24XQHlUx1Ag7PP7D/dATSFHnsDHQwwLfiynrbyVtNHdl85gEjxLVlYrWUHoFRc5/yZIHpuYBzRR0DuAfyp4I9Ip+YAvvJPrR+/JQG3EuBWAUhJv9P1BvIN/JUIdvXPyn+9EcZ6c7H925J/dxdX6+3+K0OJCHYHsFyttwncRf0TGaDCa1fQHEAUFiRwJHLAvxNAo3wAVwG4q3AEfKwolL8R+E35dSIQAwLc1iq6LQPyOv95PgAoxrln/1UiEN3CDAGMlT4igHnlV87BG+1jBBCB3roB9gIMVAXcX2gCmCGP5Sv+w/PHpclAadbfRgAb6Av4S9y/EwISwN4HcLq9vC5xfwZ/jv8vrncCuC8EUElAOQF0AJAsbG6hgJxDBFxeQI/235JAI4lMHKYleFwe1B2DnCjULsDG+FFI4ElgnNzz2YMetHFdL9VX0oVRTcBSgHIADYjNcVjAItARpEr5C+AiMB8BOULZO4ftGjlXUPIMRTd7ZMDbNmdwhBTamfrhQbR2Bvx7DuDL/+T5d+0hwNLAv2f+r5abqwb668vrZP1r7H992j43B7Bl/wH8ORG4EcBdCQHQCdi/W7cguoGm/MkxDBOEUDFQpcPUkMT9AQr4Nh+gm4RY9TG5x87gMZOEElRnQgCv/rxEx/rj6j9TBNKBdQRWzeesvncA5ZjewjNQLeCRWHhfD2ZPALHVH5OBBvws2EdAHa1XBHBkn+XL/oP1Yy63PoBN+bcQIMf/l9c5BNj+zUSwkcCeF7hOwK8EUMDf/t3Vf3MBy+V6l+L/13L8j7mAMkGo5AZagjAGfysncpkwrhog6DFv0EsANmIYKX+rDkRuICKApvhRvd8TwNPtf3MBbOWbVuttojDAK7tWfQVw3DKpr1LzPgE0SPvtFAGoMAGVWqXvijOYA/yLIIAjQPYZiDnnsHzpv3f+6MuLZZ8MtIcAxf5fn26utr8LAVyXrP96k4ng9iK5gBT7b+C/Xva4v9j/i+vTQ3UAmQBqInB5rWb5k9UvxIAJwaL8UDHA0iF2DKL6Q2ehs/01b9CSf3YbjPHjsKCpc8sZ+OQgAzyO+Y8RgCWB+fg/0nxebj83mjhKAB7wiVgKiNjs4/aWCGLrrxW/ncPb9t46G9vHoB/F/KP1Mxb/MQRwdJ/lS/6d9aNKErCAf7f+1zkEqARQlD8TwfVa4/8M+rvLFPdvBPCQHcBOAOdTAftrOQFYwL65ggL45gJ8GNBCAKwWmJDAgF41D2G2nxOEHBaozyr5p2y/Ajluh8ZeZfs56u/BexT/a+tfQOj13tt6Ze0biO0RME7n+N5+5vxAi7uTA4hCALVOEQC7CAYyGnuv6J4g4m0iIP+iIYAvevf5I65yGXC3/0X5r9brqwz+q5sU/yfrvzmAlvzblf/qtIF/+3e3/fm/jQQeLjIBbCTAoUAjBgR/yf7bngEuFba+gig3gD0CbPuf0jGYiMCHBQXYZT2/G8Am/ljxkQqa/VY5AFxb8gR+WbzEqz3rPdr/eQLwYUDLIKh1s2rP2x0DPOcKUOERpBb0niBOp6U6l55LmCWEN8oB8LWNAoHli951/q0XS+rxb4m/BP6dAKoD2EgAwL+TQLL/l2j9r9f7y+vlYXcBWwhweb47Lyn+T3mAkgsoroCVH/MBLQTA3gFdHeBEoSaA8mahca8AOgZfGozmBDRN7vUCMDkUILPa6wwAg3scAign0JbZTIB3AQ3IqPhWxVm5vUvA7Xt/s/Wfs/gYViiQz4JdbZeOt/8iaP2faLsIgLM5gegcIyDPEIo6xvKFX7v+5hQCbHMA1uvN/l9t9j+DP7mAFPdf7nmA0+3lzVb6yyHA9a7+95vSZ+BvDmAH/+X16dnp6nzbgJ8IIOUBGhFwdcDmBHjeAPcQ2H4BmwhMSi+TgyIXUPoHxlODZ8KBkQOwcbzX+pG9n1H/PvBbwo2Dgaa62u57RVexPapv/DeTwQwBRKFAs/ps41vmwW8zcgW/WAjgaPy/fa/lC776/JtSG/CW9MvgL/Z/cwGb/U9uYLf/V1vdP6t/tv07AewkkP7bgP9wcXN6dnF9erZcvn6TwF7Ab11AcwboBF6rk4dUglA3EcVlQqv2SAqqOjCr/Dr5Z5t/Wj4AI38Ldjb/nAPo2/tY/b3Vt0eyII9UfkwAfJwEMEUIzWm0mNoSg1d7tuYe2O1YDcgN7iqeP7rs7wUBHAXz0e2LG1j++Feuv2F3AJdb0q9Z/+QCNsCfbi5vltuNAPbYf6v97wnATfmXDfBIAA+XN7v6P9vU//Lm9Hy9eO9VUv1GApYQwA3UUMGGBVwh0L0Ctp247wSwAuDnDbQXkPas/wwBoMpzDmDkAFDhEeYW2J4A5lS/ALQHcAtka/85qacdwMjqK7W36t4HfLkmb81HRMFWvUcK7+sE8Fjw7w7g87/s/GEbAWwlv80BXN8k+7//d7PlAHbVT+Df/0vWPxHAupf+LnPcv4F/A/6m/pkAXlqX1y4S4N9TXYAjhL37D/MEcV7gMRWC+XbhXva/vIY8mB0oJgFZE68IwJKASgRqhW8gt+t7qu9j+z7AOd73YYEigQKsFl4UR6Cs/hjsvdg+AnkvBxDnAqyT8ATRcgCjDP9svN8D7hFQH9mW8wDLH/uS84duIcBOADvw1+vrDP5EAgn81QEU9b9Z7i+v1ruLm9P91fWSlX99uLxeduXP/72UgF/An/7d3cCu9vY/mxtIpNAmENFEIpxUVLsEsVyIvz3gW4b5NeN2tmBMBOplIT4hiIafy4I2GIh0vtj1eQKYAb8CcTPhSAjNIbBKN9XluB4BaR0Bxt3Wntt9RiGAjd/fJIB2P2aThI4APvcLX/+Qq8uL2633//pmcwA5D7D/u+4EgODfcgCXN9n236TYf4v5i/pf3qzPLm+WlzYCuLhen51PP5+Bnohg3YFv3UDLDxQnwF2D+DlZfTOrsJJBATo2DuH8gWL92farvoCS6OMfIFEOwHb6aa2PC389sM8RgFJ3tuz9zz4HgGRh1RvJoSm+B7aP72fcwBzIE1mp+F8ve1zcj6HF4x1ApNBHlyuQP0X99xDgj37B+Z/ZZgJuan+9xf03hQh24G9hADiA9XYD/9Vm+wv4N9t/c3q4SjF/Uv/b00YALy2Xr9/toN8AvxQnYN2ATw5ymbCBn+cP6O7BXi4gKbt6bwB3A7b2Xp8HKOt0yQ/7ARG+jyWAfkxvXwLOCh+BfmTnrcqzSs8TQM/2Ixn0/44s/S93Angq+HcC+OzPf/2fvry8uN0SgDebA7jNZLA5gE39b5r9v0rKf3dVwb/eX93sln8jgedXxfrfnl66uj29clpeuzovmwNA8AchgUsS2vkDLUegmoZ8+3CL++EVUykAAAroSURBVDkUwLIgZ/zbJKAxAWjVj+DPZT6l7PGyWOHbPrG954SftfqYsUfgq2y+dQUjy+/t/Tzoe0m8Iwm+IyQRJQY5CXg0B3BU6WeBPbtdLzxYPuvzzv/U5gA2639zs+z/7mHAzbolBHcCKMm/jQCutth/j/vX7d+HTADPrm63uH99fnW7vHx1e9r+eyXZ//KfJ4HdGVTg49++aUj1CpQ3BtlwoCi8bwyypBCVAIvi4zyAErdj/d/W+THhZ0OAluizfqAY//ZvWm8V3y+zQI8dgFZ5TQYc51vwzzkAb917BKCAGW3PDuCXAgG8LyQAdwfwhz/n9X/y+uridkv+3dxuJHC6ubrdqwHbsj0EuLpZNtW/u7peGwHs4F835X92dbs8v9pU/2ZX/pev7k6vXFy/nuN/JADrBhIBaBJoCcG4cxAJoLx5WLYM0wtD5roA2fpz7K8IwCb4uJVHE0ADvFfz7RxK/Ru4LUGwQnMI4IFdYmmO171LaLF128cvs1UAuz5ah8vV30cJAMH1S9kBsGN5TCJw+Yw/cv4ntiagHfy3y04A1zc78HfwX+/gT7H/dVb/6xL3327gT9b/6nZ96fpueWVT/qvb01tOl++5bur/cxnojQwa+I/mBLhV2L9dKH5vQNQEZBN+HOPrz9zO44t43MiLYFXlO2XnRxY/EUSk9t6y2+x+ZPObVe+B3TuDPiG8SQAWokdDgzckCfjpn/n6P745gOub8/XtXQoBbm4365/UPxHAHvfvsf/VzXp/fbs829Q/Kf/6/Pou2f7ru9MrV3ent17drq+cTxvoy38YCvx8Sgru/xVHgJWBLWmI5cFSDrTJQPdCkVwJ4NmC/sUgUcZ/3vIfaemJQK+s/XiZBWzbPlJ2julVjK/jcgR++ZsBrAhg1va/kSHALwYH8CJCgBeSA/i0P3T+x7YGoNu7083t7XJzfbvF/nseYI//r28T+K9vlx38V7fLw/Vu+9dn13fLS9cp4ffy9d36yvX98tbru9PblqvX7hL4fzaDfPt7A74lAp8cTETguwYxIahLghgCqAQgZvltzV/N+ceY36f1UNl1lb/E9Sd6y7+N8dneKzvvFR7t/yzwtaIzyBXAjzqAxxDAiAx+KYYA7zME8Ac/7fV/9Ob24vbm9ny9EcDN3XK7hQBIAJv1v7o93V/fnh6ub9eH6xTzP7++O710fXd6+ebu9Jbr7b/709uu79e3J+AXAkguYN0/RwRAvQKibbg1BJWOQZwp2HthCJf+et1+JRTAWL7pfQ/sNr7nuD599m5AJfSsbbcqbxXcO4A5oCt1j9T8TQIoYc2L7QN4nyGAT/nU8z+yxf27A7jL1YDbXflvr2+T/b/ewL9Z/7vl2fXt6dn13en5zQ7+9eWbu2UD/ltv7k9vu3k4vd9y9Z77jQDWnQTKfxgKIBFgGJAbhUTbsJowZDsES6mPXxdWynyo8tFbfjDJx8k8m85TyTyM1ft/FzKYA3oP5M0dPA34PYv/JgH8EieAT/797/21m/Lf3adE4O3mAG53F7Db/5vbZVP+++u79eHmdrHgv1/ecvNweuvt/entG/hv7s9vP59+5tT+804guQAmgVYitKVBnEWIU4jt68PGrw23qt+SegXY0b/JynNZT8X1aOf93x70bZsE3gjoPZC/SQD9rr+ogagk0zj0+IXsA3ifcQCf+MnnX3N3d0oEcJcSgDe7+q+3O/jvNuu/3t/cnZ7d3C278t/cry/fFvA/rG+/fVje/+756YNOFz97fT79NBHARgg2HIhDgdw1OJwjYF8eqgmgB3rM67eIXgO9WHf+19p6SwocpyfrjqBn8EZgfpMAPMij0l4P0DPrflkSwO/5hPf+6vv75ADu7vdqwM3N3cXdzd2m/uvdzd3ycLOp/93p+e39ksD/sLzl9uH0trtnp7ffPjt9wN2z0wdd3b7n5fPpp06JAJgEOBTQYUBT/1IaxAlBJfmH7xDEST6+xIdKz5F8qfKrd/O0WL84gAJg/JeXqdq8An16tdSbBKB7BHp9ALPAf7MKMN8RsHzc7z7/g/cPp5v73QGsexLw9m7J4D/d394vz27u1me3D8tLt/fry3cPy1vunu3gf7+75+sH3L+0/Irbh9c/4Hz6yVMigB4JRKXBEv+rSUL0GnE38Qd7+5Xql7l6GMe3Rt+WnPMKX1Q9+jft6y08gtv//SYBqJzDTKb/KAEcJYJflg7gYz72vb/y4dmm/psLWG5v7k63t3enu9u7Dfynh9v707O7DfwPp5fvHk5vuX++vu3++fL+98/XD3x4efngh5dPv+p8+vFTIgAmAZUP4N6AKP7HdwTYdwNibb/9BFjSdGXum9pbkFulb3G4BbwHuQJ4H/SFJLZ/33cJYFQJeKP6AGbLgL8YCEDF9rPLODcx0vEX0gfw0b/z/MHPn59ubvcQYFP/9fb2frm/vV/v7+5Pz+6fLS/dPZxevn92esv9S6e3Pzw/vf/Dy6e/79nLp7//+VtO/9B68RNXiQCYBEoYsP0bhQB2fkD78RCeAdisPv/mXwx6m7zzoG5ttiU2t/82m95UHoFs/36TAHRD0Wxr8C8VBzAL9veZJOBH/vb3ftBGAPfPLm/v7k63dw+nu7v70/3tw/pw/3B6fv/s9PLDS8tbH146vf3ZS+sHPH/L8sHPX1l/1ctvW37N6fLHb86nHz2dTz8mCGALBdABYGMQTxDCl4Xa2X42wccqz026kcK3hhwEeQTs2eUYy79JAG8SQNSbP0sKf08cwG/7iPMHJAew3jw8XNzd3Z/v7p8tD/fPTs8fXjq9/Oyl5a3PXz693/NX1g986a3Lr3zlbadf/cr7nf7h08WPXJ9PP3w6n34ECOAnIAwoyUDVC8CTgLi5BxW/NOew1iewl/9KLI9Kj0BWoJ4F+psOIIH7zRDAViQUYGfB/j7jAD78w197+7Pny83Ds+X2/tly9/Cw3j97aXn+7KXl5ecvn976/JX1/V552/IrXnnb+g+89f2XX/u2D/z/2zuXnYSBMAqf0YhAW1pKuQVUVDRqCG5MUBN0oRt3bnwMX8c38EmMD+DGxBgX3qKocUc0mk5NkQk/ZWw1bozMgnBpWJ5zvv8yrbfM0QLHIzieiAH4FED7ACL9xS4APQlI7wxM7+4jOvm9pKejObng+1H9K9ErA/jeslDYOrAygH9oADs7PK3piCU1b1wzWEI3mKYZnmFazDZt5KwMypkcqtki6pbzuuTiFhz34HgIGIBIf5r8YtxHEz+I+PLmXb/YP0VOXwK/xW/0e9Rn2XUZzkcRgioBoqlA9QB69ESben+GALa231O67sV0YyRupJA00yMpy2a27aDg5FHJl7xaucKaca1V4LiEi5uuAfgEQPGf1vy0xqcNPXnCy0QcJvZgyn8n9RUBKAKQbQaGj/56kqVPBgqKVzZujBL7nzGAZrOtpczYuGmxhGUzw8myTK6IUmkSi5Uqa05Mt7c4TsFxAY4ruLjr4r8vfj/1hfBF2gu8F3W8OIwzmOJRqR5mDIoABpeJxHz9N++qBKCiHwIDaKy+JWx7LO5kPb1QhDM1g9mFGttYWfP2OY7BcQKOc3Bcd7Df7XT9/VpfHPWlgo8WeVD0UUkvS3tFAIPjyN+Inv5XGcCQGUC9/hwrlQ1tbn602FjH5u7eywHHIVwcgeOsi/v+jN9v6vn1O+AG6vEwUf/kWjDVFQGEpzwdPSoD6J9UfIX2wWWiYS8BPgCAPOYxoDrtqQAAAABJRU5ErkJggg==",e}(),ni=function(){function e(t){this._isEnabled=!1,this.isEnabled=!1,this.intensity=1,this.roughness=0,this._indiceOfRefraction=e._DefaultIndiceOfRefraction,this.indiceOfRefraction=e._DefaultIndiceOfRefraction,this._texture=null,this.texture=null,this._bumpTexture=null,this.bumpTexture=null,this._isTintEnabled=!1,this.isTintEnabled=!1,this.tintColor=o.e.White(),this.tintColorAtDistance=1,this.tintThickness=1,this._tintTexture=null,this.tintTexture=null,this._internalMarkAllSubMeshesAsTexturesDirty=t}return e.prototype._markAllSubMeshesAsTexturesDirty=function(){this._internalMarkAllSubMeshesAsTexturesDirty()},e.prototype.isReadyForSubMesh=function(e,t,n,r){if(e._areTexturesDirty&&t.texturesEnabled){if(this._texture&&Kr.a.ClearCoatTextureEnabled&&!this._texture.isReadyOrNotBlocking())return!1;if(n.getCaps().standardDerivatives&&this._bumpTexture&&Kr.a.ClearCoatBumpTextureEnabled&&!r&&!this._bumpTexture.isReady())return!1;if(this._isTintEnabled&&this._tintTexture&&Kr.a.ClearCoatTintTextureEnabled&&!this._tintTexture.isReadyOrNotBlocking())return!1}return!0},e.prototype.prepareDefines=function(t,n){this._isEnabled?(t.CLEARCOAT=!0,t._areTexturesDirty&&n.texturesEnabled&&(this._texture&&Kr.a.ClearCoatTextureEnabled?Hr.a.PrepareDefinesForMergedUV(this._texture,t,"CLEARCOAT_TEXTURE"):t.CLEARCOAT_TEXTURE=!1,this._bumpTexture&&Kr.a.ClearCoatBumpTextureEnabled?Hr.a.PrepareDefinesForMergedUV(this._bumpTexture,t,"CLEARCOAT_BUMP"):t.CLEARCOAT_BUMP=!1,t.CLEARCOAT_DEFAULTIOR=this._indiceOfRefraction===e._DefaultIndiceOfRefraction,this._isTintEnabled?(t.CLEARCOAT_TINT=!0,this._tintTexture&&Kr.a.ClearCoatTintTextureEnabled?Hr.a.PrepareDefinesForMergedUV(this._tintTexture,t,"CLEARCOAT_TINT_TEXTURE"):t.CLEARCOAT_TINT_TEXTURE=!1):(t.CLEARCOAT_TINT=!1,t.CLEARCOAT_TINT_TEXTURE=!1))):(t.CLEARCOAT=!1,t.CLEARCOAT_TEXTURE=!1,t.CLEARCOAT_BUMP=!1,t.CLEARCOAT_TINT=!1,t.CLEARCOAT_TINT_TEXTURE=!1)},e.prototype.bindForSubMesh=function(e,t,n,r,i,o,a){if(!e.useUbo||!i||!e.isSync){this._texture&&Kr.a.ClearCoatTextureEnabled&&(e.updateFloat2("vClearCoatInfos",this._texture.coordinatesIndex,this._texture.level),Hr.a.BindTextureMatrix(this._texture,e,"clearCoat")),this._bumpTexture&&n.getCaps().standardDerivatives&&Kr.a.ClearCoatTextureEnabled&&!r&&(e.updateFloat2("vClearCoatBumpInfos",this._bumpTexture.coordinatesIndex,this._bumpTexture.level),Hr.a.BindTextureMatrix(this._bumpTexture,e,"clearCoatBump"),t._mirroredCameraPosition?e.updateFloat2("vClearCoatTangentSpaceParams",o?1:-1,a?1:-1):e.updateFloat2("vClearCoatTangentSpaceParams",o?-1:1,a?-1:1)),this._tintTexture&&Kr.a.ClearCoatTintTextureEnabled&&(e.updateFloat2("vClearCoatTintInfos",this._tintTexture.coordinatesIndex,this._tintTexture.level),Hr.a.BindTextureMatrix(this._tintTexture,e,"clearCoatTint")),e.updateFloat2("vClearCoatParams",this.intensity,this.roughness);var s=1-this._indiceOfRefraction,u=1+this._indiceOfRefraction,l=Math.pow(-s/u,2);e.updateFloat4("vClearCoatRefractionParams",l,1/this._indiceOfRefraction,s,u),this._isTintEnabled&&(e.updateFloat4("vClearCoatTintParams",this.tintColor.r,this.tintColor.g,this.tintColor.b,Math.max(1e-5,this.tintThickness)),e.updateFloat("clearCoatColorAtDistance",Math.max(1e-5,this.tintColorAtDistance)))}t.texturesEnabled&&(this._texture&&Kr.a.ClearCoatTextureEnabled&&e.setTexture("clearCoatSampler",this._texture),this._bumpTexture&&n.getCaps().standardDerivatives&&Kr.a.ClearCoatBumpTextureEnabled&&!r&&e.setTexture("clearCoatBumpSampler",this._bumpTexture),this._isTintEnabled&&this._tintTexture&&Kr.a.ClearCoatTintTextureEnabled&&e.setTexture("clearCoatTintSampler",this._tintTexture))},e.prototype.hasTexture=function(e){return this._texture===e||this._bumpTexture===e||this._tintTexture===e},e.prototype.getActiveTextures=function(e){this._texture&&e.push(this._texture),this._bumpTexture&&e.push(this._bumpTexture),this._tintTexture&&e.push(this._tintTexture)},e.prototype.getAnimatables=function(e){this._texture&&this._texture.animations&&this._texture.animations.length>0&&e.push(this._texture),this._bumpTexture&&this._bumpTexture.animations&&this._bumpTexture.animations.length>0&&e.push(this._bumpTexture),this._tintTexture&&this._tintTexture.animations&&this._tintTexture.animations.length>0&&e.push(this._tintTexture)},e.prototype.dispose=function(e){e&&(this._texture&&this._texture.dispose(),this._bumpTexture&&this._bumpTexture.dispose(),this._tintTexture&&this._tintTexture.dispose())},e.prototype.getClassName=function(){return"PBRClearCoatConfiguration"},e.AddFallbacks=function(e,t,n){return e.CLEARCOAT_BUMP&&t.addFallback(n++,"CLEARCOAT_BUMP"),e.CLEARCOAT_TINT&&t.addFallback(n++,"CLEARCOAT_TINT"),e.CLEARCOAT&&t.addFallback(n++,"CLEARCOAT"),n},e.AddUniforms=function(e){e.push("vClearCoatTangentSpaceParams","vClearCoatParams","vClearCoatRefractionParams","vClearCoatTintParams","clearCoatColorAtDistance","clearCoatMatrix","clearCoatBumpMatrix","clearCoatTintMatrix","vClearCoatInfos","vClearCoatBumpInfos","vClearCoatTintInfos")},e.AddSamplers=function(e){e.push("clearCoatSampler","clearCoatBumpSampler","clearCoatTintSampler")},e.PrepareUniformBuffer=function(e){e.addUniform("vClearCoatParams",2),e.addUniform("vClearCoatRefractionParams",4),e.addUniform("vClearCoatInfos",2),e.addUniform("clearCoatMatrix",16),e.addUniform("vClearCoatBumpInfos",2),e.addUniform("vClearCoatTangentSpaceParams",2),e.addUniform("clearCoatBumpMatrix",16),e.addUniform("vClearCoatTintParams",4),e.addUniform("clearCoatColorAtDistance",1),e.addUniform("vClearCoatTintInfos",2),e.addUniform("clearCoatTintMatrix",16)},e.prototype.copyTo=function(e){L.a.Clone(function(){return e},this)},e.prototype.serialize=function(){return L.a.Serialize(this)},e.prototype.parse=function(e){var t=this;L.a.Parse(function(){return t},e,null)},e._DefaultIndiceOfRefraction=1.5,l.c([Object(L.c)()],e.prototype,"_isEnabled",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"isEnabled",void 0),l.c([Object(L.c)()],e.prototype,"intensity",void 0),l.c([Object(L.c)()],e.prototype,"roughness",void 0),l.c([Object(L.c)()],e.prototype,"_indiceOfRefraction",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"indiceOfRefraction",void 0),l.c([Object(L.m)()],e.prototype,"_texture",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"texture",void 0),l.c([Object(L.m)()],e.prototype,"_bumpTexture",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"bumpTexture",void 0),l.c([Object(L.c)()],e.prototype,"_isTintEnabled",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"isTintEnabled",void 0),l.c([Object(L.e)()],e.prototype,"tintColor",void 0),l.c([Object(L.c)()],e.prototype,"tintColorAtDistance",void 0),l.c([Object(L.c)()],e.prototype,"tintThickness",void 0),l.c([Object(L.m)()],e.prototype,"_tintTexture",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"tintTexture",void 0),e}(),ri=function(){function e(e){this._isEnabled=!1,this.isEnabled=!1,this.intensity=1,this.direction=new o.w(1,0),this._texture=null,this.texture=null,this._internalMarkAllSubMeshesAsTexturesDirty=e}return e.prototype._markAllSubMeshesAsTexturesDirty=function(){this._internalMarkAllSubMeshesAsTexturesDirty()},e.prototype.isReadyForSubMesh=function(e,t){return!(e._areTexturesDirty&&t.texturesEnabled&&this._texture&&Kr.a.AnisotropicTextureEnabled&&!this._texture.isReadyOrNotBlocking())},e.prototype.prepareDefines=function(e,t,n){this._isEnabled?(e.ANISOTROPIC=this._isEnabled,this._isEnabled&&!t.isVerticesDataPresent(Mn.b.TangentKind)&&(e._needUVs=!0,e.MAINUV1=!0),e._areTexturesDirty&&n.texturesEnabled&&(this._texture&&Kr.a.AnisotropicTextureEnabled?Hr.a.PrepareDefinesForMergedUV(this._texture,e,"ANISOTROPIC_TEXTURE"):e.ANISOTROPIC_TEXTURE=!1)):(e.ANISOTROPIC=!1,e.ANISOTROPIC_TEXTURE=!1)},e.prototype.bindForSubMesh=function(e,t,n){e.useUbo&&n&&e.isSync||(this._texture&&Kr.a.AnisotropicTextureEnabled&&(e.updateFloat2("vAnisotropyInfos",this._texture.coordinatesIndex,this._texture.level),Hr.a.BindTextureMatrix(this._texture,e,"anisotropy")),e.updateFloat3("vAnisotropy",this.direction.x,this.direction.y,this.intensity)),t.texturesEnabled&&this._texture&&Kr.a.AnisotropicTextureEnabled&&e.setTexture("anisotropySampler",this._texture)},e.prototype.hasTexture=function(e){return this._texture===e},e.prototype.getActiveTextures=function(e){this._texture&&e.push(this._texture)},e.prototype.getAnimatables=function(e){this._texture&&this._texture.animations&&this._texture.animations.length>0&&e.push(this._texture)},e.prototype.dispose=function(e){e&&this._texture&&this._texture.dispose()},e.prototype.getClassName=function(){return"PBRAnisotropicConfiguration"},e.AddFallbacks=function(e,t,n){return e.ANISOTROPIC&&t.addFallback(n++,"ANISOTROPIC"),n},e.AddUniforms=function(e){e.push("vAnisotropy","vAnisotropyInfos","anisotropyMatrix")},e.PrepareUniformBuffer=function(e){e.addUniform("vAnisotropy",3),e.addUniform("vAnisotropyInfos",2),e.addUniform("anisotropyMatrix",16)},e.AddSamplers=function(e){e.push("anisotropySampler")},e.prototype.copyTo=function(e){L.a.Clone(function(){return e},this)},e.prototype.serialize=function(){return L.a.Serialize(this)},e.prototype.parse=function(e){var t=this;L.a.Parse(function(){return t},e,null)},l.c([Object(L.c)()],e.prototype,"_isEnabled",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"isEnabled",void 0),l.c([Object(L.c)()],e.prototype,"intensity",void 0),l.c([Object(L.n)()],e.prototype,"direction",void 0),l.c([Object(L.m)()],e.prototype,"_texture",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"texture",void 0),e}(),ii=function(){function e(t){this._useEnergyConservation=e.DEFAULT_USE_ENERGY_CONSERVATION,this.useEnergyConservation=e.DEFAULT_USE_ENERGY_CONSERVATION,this._useSmithVisibilityHeightCorrelated=e.DEFAULT_USE_SMITH_VISIBILITY_HEIGHT_CORRELATED,this.useSmithVisibilityHeightCorrelated=e.DEFAULT_USE_SMITH_VISIBILITY_HEIGHT_CORRELATED,this._useSphericalHarmonics=e.DEFAULT_USE_SPHERICAL_HARMONICS,this.useSphericalHarmonics=e.DEFAULT_USE_SPHERICAL_HARMONICS,this._internalMarkAllSubMeshesAsMiscDirty=t}return e.prototype._markAllSubMeshesAsMiscDirty=function(){this._internalMarkAllSubMeshesAsMiscDirty()},e.prototype.prepareDefines=function(e){e.BRDF_V_HEIGHT_CORRELATED=this._useSmithVisibilityHeightCorrelated,e.MS_BRDF_ENERGY_CONSERVATION=this._useEnergyConservation&&this._useSmithVisibilityHeightCorrelated,e.SPHERICAL_HARMONICS=this._useSphericalHarmonics},e.prototype.getClassName=function(){return"PBRBRDFConfiguration"},e.prototype.copyTo=function(e){L.a.Clone(function(){return e},this)},e.prototype.serialize=function(){return L.a.Serialize(this)},e.prototype.parse=function(e){var t=this;L.a.Parse(function(){return t},e,null)},e.DEFAULT_USE_ENERGY_CONSERVATION=!0,e.DEFAULT_USE_SMITH_VISIBILITY_HEIGHT_CORRELATED=!0,e.DEFAULT_USE_SPHERICAL_HARMONICS=!0,l.c([Object(L.c)()],e.prototype,"_useEnergyConservation",void 0),l.c([Object(L.b)("_markAllSubMeshesAsMiscDirty")],e.prototype,"useEnergyConservation",void 0),l.c([Object(L.c)()],e.prototype,"_useSmithVisibilityHeightCorrelated",void 0),l.c([Object(L.b)("_markAllSubMeshesAsMiscDirty")],e.prototype,"useSmithVisibilityHeightCorrelated",void 0),l.c([Object(L.c)()],e.prototype,"_useSphericalHarmonics",void 0),l.c([Object(L.b)("_markAllSubMeshesAsMiscDirty")],e.prototype,"useSphericalHarmonics",void 0),e}(),oi=function(){function e(e){this._isEnabled=!1,this.isEnabled=!1,this._linkSheenWithAlbedo=!1,this.linkSheenWithAlbedo=!1,this.intensity=1,this.color=o.e.White(),this._texture=null,this.texture=null,this._internalMarkAllSubMeshesAsTexturesDirty=e}return e.prototype._markAllSubMeshesAsTexturesDirty=function(){this._internalMarkAllSubMeshesAsTexturesDirty()},e.prototype.isReadyForSubMesh=function(e,t){return!(e._areTexturesDirty&&t.texturesEnabled&&this._texture&&Kr.a.SheenTextureEnabled&&!this._texture.isReadyOrNotBlocking())},e.prototype.prepareDefines=function(e,t){this._isEnabled?(e.SHEEN=this._isEnabled,e.SHEEN_LINKWITHALBEDO=this._linkSheenWithAlbedo,e._areTexturesDirty&&t.texturesEnabled&&(this._texture&&Kr.a.SheenTextureEnabled?Hr.a.PrepareDefinesForMergedUV(this._texture,e,"SHEEN_TEXTURE"):e.SHEEN_TEXTURE=!1)):(e.SHEEN=!1,e.SHEEN_TEXTURE=!1,e.SHEEN_LINKWITHALBEDO=!1)},e.prototype.bindForSubMesh=function(e,t,n){e.useUbo&&n&&e.isSync||(this._texture&&Kr.a.SheenTextureEnabled&&(e.updateFloat2("vSheenInfos",this._texture.coordinatesIndex,this._texture.level),Hr.a.BindTextureMatrix(this._texture,e,"sheen")),e.updateFloat4("vSheenColor",this.color.r,this.color.g,this.color.b,this.intensity)),t.texturesEnabled&&this._texture&&Kr.a.SheenTextureEnabled&&e.setTexture("sheenSampler",this._texture)},e.prototype.hasTexture=function(e){return this._texture===e},e.prototype.getActiveTextures=function(e){this._texture&&e.push(this._texture)},e.prototype.getAnimatables=function(e){this._texture&&this._texture.animations&&this._texture.animations.length>0&&e.push(this._texture)},e.prototype.dispose=function(e){e&&this._texture&&this._texture.dispose()},e.prototype.getClassName=function(){return"PBRSheenConfiguration"},e.AddFallbacks=function(e,t,n){return e.SHEEN&&t.addFallback(n++,"SHEEN"),n},e.AddUniforms=function(e){e.push("vSheenColor","vSheenInfos","sheenMatrix")},e.PrepareUniformBuffer=function(e){e.addUniform("vSheenColor",4),e.addUniform("vSheenInfos",2),e.addUniform("sheenMatrix",16)},e.AddSamplers=function(e){e.push("sheenSampler")},e.prototype.copyTo=function(e){L.a.Clone(function(){return e},this)},e.prototype.serialize=function(){return L.a.Serialize(this)},e.prototype.parse=function(e){var t=this;L.a.Parse(function(){return t},e,null)},l.c([Object(L.c)()],e.prototype,"_isEnabled",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"isEnabled",void 0),l.c([Object(L.c)()],e.prototype,"_linkSheenWithAlbedo",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"linkSheenWithAlbedo",void 0),l.c([Object(L.c)()],e.prototype,"intensity",void 0),l.c([Object(L.e)()],e.prototype,"color",void 0),l.c([Object(L.m)()],e.prototype,"_texture",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"texture",void 0),e}(),ai=function(){function e(e){this._isRefractionEnabled=!1,this.isRefractionEnabled=!1,this._isTranslucencyEnabled=!1,this.isTranslucencyEnabled=!1,this._isScatteringEnabled=!1,this.refractionIntensity=1,this.translucencyIntensity=1,this.scatteringIntensity=1,this._thicknessTexture=null,this.thicknessTexture=null,this._refractionTexture=null,this.refractionTexture=null,this._indexOfRefraction=1,this.indexOfRefraction=1,this._invertRefractionY=!1,this.invertRefractionY=!1,this._linkRefractionWithTransparency=!1,this.linkRefractionWithTransparency=!1,this.minimumThickness=0,this.maximumThickness=1,this.tintColor=o.e.White(),this.tintColorAtDistance=1,this.diffusionDistance=o.e.White(),this._useMaskFromThicknessTexture=!1,this.useMaskFromThicknessTexture=!1,this._internalMarkAllSubMeshesAsTexturesDirty=e}return e.prototype._markAllSubMeshesAsTexturesDirty=function(){this._internalMarkAllSubMeshesAsTexturesDirty()},e.prototype.isReadyForSubMesh=function(e,t){if(e._areTexturesDirty&&t.texturesEnabled){if(this._thicknessTexture&&Kr.a.ThicknessTextureEnabled&&!this._thicknessTexture.isReadyOrNotBlocking())return!1;var n=this._getRefractionTexture(t);if(n&&Kr.a.RefractionTextureEnabled&&!n.isReadyOrNotBlocking())return!1}return!0},e.prototype.prepareDefines=function(e,t){if(e._areTexturesDirty&&(e.SUBSURFACE=!1,e.SS_TRANSLUCENCY=this._isTranslucencyEnabled,e.SS_SCATERRING=this._isScatteringEnabled,e.SS_THICKNESSANDMASK_TEXTURE=!1,e.SS_MASK_FROM_THICKNESS_TEXTURE=!1,e.SS_REFRACTION=!1,e.SS_REFRACTIONMAP_3D=!1,e.SS_GAMMAREFRACTION=!1,e.SS_RGBDREFRACTION=!1,e.SS_REFRACTIONMAP_OPPOSITEZ=!1,e.SS_LODINREFRACTIONALPHA=!1,e.SS_LINKREFRACTIONTOTRANSPARENCY=!1,(this._isRefractionEnabled||this._isTranslucencyEnabled||this._isScatteringEnabled)&&(e.SUBSURFACE=!0,e._areTexturesDirty&&t.texturesEnabled&&this._thicknessTexture&&Kr.a.ThicknessTextureEnabled&&Hr.a.PrepareDefinesForMergedUV(this._thicknessTexture,e,"SS_THICKNESSANDMASK_TEXTURE"),e.SS_MASK_FROM_THICKNESS_TEXTURE=this._useMaskFromThicknessTexture),this._isRefractionEnabled&&t.texturesEnabled)){var n=this._getRefractionTexture(t);n&&Kr.a.RefractionTextureEnabled&&(e.SS_REFRACTION=!0,e.SS_REFRACTIONMAP_3D=n.isCube,e.SS_GAMMAREFRACTION=n.gammaSpace,e.SS_RGBDREFRACTION=n.isRGBD,e.SS_REFRACTIONMAP_OPPOSITEZ=n.invertZ,e.SS_LODINREFRACTIONALPHA=n.lodLevelInAlpha,e.SS_LINKREFRACTIONTOTRANSPARENCY=this._linkRefractionWithTransparency)}},e.prototype.bindForSubMesh=function(e,t,n,r,i){var o=this._getRefractionTexture(t);if(!e.useUbo||!r||!e.isSync){if(this._thicknessTexture&&Kr.a.ThicknessTextureEnabled&&(e.updateFloat2("vThicknessInfos",this._thicknessTexture.coordinatesIndex,this._thicknessTexture.level),Hr.a.BindTextureMatrix(this._thicknessTexture,e,"thickness")),e.updateFloat2("vThicknessParam",this.minimumThickness,this.maximumThickness-this.minimumThickness),o&&Kr.a.RefractionTextureEnabled){e.updateMatrix("refractionMatrix",o.getReflectionTextureMatrix());var a=1;o.isCube||o.depth&&(a=o.depth),e.updateFloat4("vRefractionInfos",o.level,1/this._indexOfRefraction,a,this._invertRefractionY?-1:1),e.updateFloat3("vRefractionMicrosurfaceInfos",o.getSize().width,o.lodGenerationScale,o.lodGenerationOffset)}e.updateColor3("vDiffusionDistance",this.diffusionDistance),e.updateFloat4("vTintColor",this.tintColor.r,this.tintColor.g,this.tintColor.b,this.tintColorAtDistance),e.updateFloat3("vSubSurfaceIntensity",this.refractionIntensity,this.translucencyIntensity,this.scatteringIntensity)}t.texturesEnabled&&(this._thicknessTexture&&Kr.a.ThicknessTextureEnabled&&e.setTexture("thicknessSampler",this._thicknessTexture),o&&Kr.a.RefractionTextureEnabled&&(i?e.setTexture("refractionSampler",o):(e.setTexture("refractionSampler",o._lodTextureMid||o),e.setTexture("refractionSamplerLow",o._lodTextureLow||o),e.setTexture("refractionSamplerHigh",o._lodTextureHigh||o))))},e.prototype.unbind=function(e){return!(!this._refractionTexture||!this._refractionTexture.isRenderTarget||(e.setTexture("refractionSampler",null),0))},e.prototype._getRefractionTexture=function(e){return this._refractionTexture?this._refractionTexture:this._isRefractionEnabled?e.environmentTexture:null},Object.defineProperty(e.prototype,"disableAlphaBlending",{get:function(){return this.isRefractionEnabled&&this._linkRefractionWithTransparency},enumerable:!0,configurable:!0}),e.prototype.fillRenderTargetTextures=function(e){Kr.a.RefractionTextureEnabled&&this._refractionTexture&&this._refractionTexture.isRenderTarget&&e.push(this._refractionTexture)},e.prototype.hasTexture=function(e){return this._thicknessTexture===e||this._refractionTexture===e},e.prototype.hasRenderTargetTextures=function(){return!!(Kr.a.RefractionTextureEnabled&&this._refractionTexture&&this._refractionTexture.isRenderTarget)},e.prototype.getActiveTextures=function(e){this._thicknessTexture&&e.push(this._thicknessTexture),this._refractionTexture&&e.push(this._refractionTexture)},e.prototype.getAnimatables=function(e){this._thicknessTexture&&this._thicknessTexture.animations&&this._thicknessTexture.animations.length>0&&e.push(this._thicknessTexture),this._refractionTexture&&this._refractionTexture.animations&&this._refractionTexture.animations.length>0&&e.push(this._refractionTexture)},e.prototype.dispose=function(e){e&&(this._thicknessTexture&&this._thicknessTexture.dispose(),this._refractionTexture&&this._refractionTexture.dispose())},e.prototype.getClassName=function(){return"PBRSubSurfaceConfiguration"},e.AddFallbacks=function(e,t,n){return e.SS_SCATERRING&&t.addFallback(n++,"SS_SCATERRING"),e.SS_TRANSLUCENCY&&t.addFallback(n++,"SS_TRANSLUCENCY"),n},e.AddUniforms=function(e){e.push("vDiffusionDistance","vTintColor","vSubSurfaceIntensity","vRefractionMicrosurfaceInfos","vRefractionInfos","vThicknessInfos","vThicknessParam","refractionMatrix","thicknessMatrix")},e.AddSamplers=function(e){e.push("thicknessSampler","refractionSampler","refractionSamplerLow","refractionSamplerHigh")},e.PrepareUniformBuffer=function(e){e.addUniform("vRefractionMicrosurfaceInfos",3),e.addUniform("vRefractionInfos",4),e.addUniform("refractionMatrix",16),e.addUniform("vThicknessInfos",2),e.addUniform("thicknessMatrix",16),e.addUniform("vThicknessParam",2),e.addUniform("vDiffusionDistance",3),e.addUniform("vTintColor",4),e.addUniform("vSubSurfaceIntensity",3)},e.prototype.copyTo=function(e){L.a.Clone(function(){return e},this)},e.prototype.serialize=function(){return L.a.Serialize(this)},e.prototype.parse=function(e){var t=this;L.a.Parse(function(){return t},e,null)},l.c([Object(L.c)()],e.prototype,"_isRefractionEnabled",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"isRefractionEnabled",void 0),l.c([Object(L.c)()],e.prototype,"_isTranslucencyEnabled",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"isTranslucencyEnabled",void 0),l.c([Object(L.c)()],e.prototype,"_isScatteringEnabled",void 0),l.c([Object(L.c)()],e.prototype,"refractionIntensity",void 0),l.c([Object(L.c)()],e.prototype,"translucencyIntensity",void 0),l.c([Object(L.c)()],e.prototype,"scatteringIntensity",void 0),l.c([Object(L.m)()],e.prototype,"_thicknessTexture",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"thicknessTexture",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"refractionTexture",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"indexOfRefraction",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"invertRefractionY",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"linkRefractionWithTransparency",void 0),l.c([Object(L.c)()],e.prototype,"minimumThickness",void 0),l.c([Object(L.c)()],e.prototype,"maximumThickness",void 0),l.c([Object(L.e)()],e.prototype,"tintColor",void 0),l.c([Object(L.c)()],e.prototype,"tintColorAtDistance",void 0),l.c([Object(L.e)()],e.prototype,"diffusionDistance",void 0),l.c([Object(L.c)()],e.prototype,"_useMaskFromThicknessTexture",void 0),l.c([Object(L.b)("_markAllSubMeshesAsTexturesDirty")],e.prototype,"useMaskFromThicknessTexture",void 0),e}();jt.a.IncludesShadersStore.pbrFragmentDeclaration="uniform vec3 vReflectionColor;\nuniform vec4 vAlbedoColor;\n\nuniform vec4 vLightingIntensity;\nuniform vec4 vReflectivityColor;\nuniform vec3 vEmissiveColor;\nuniform float visibility;\n\n#ifdef ALBEDO\nuniform vec2 vAlbedoInfos;\n#endif\n#ifdef AMBIENT\nuniform vec4 vAmbientInfos;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform vec2 vTangentSpaceParams;\n#endif\n#ifdef OPACITY\nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\n#endif\n#ifdef REFLECTIVITY\nuniform vec3 vReflectivityInfos;\n#endif\n#ifdef MICROSURFACEMAP\nuniform vec2 vMicroSurfaceSamplerInfos;\n#endif\n\n#if defined(REFLECTIONMAP_SPHERICAL) || defined(REFLECTIONMAP_PROJECTION) || defined(SS_REFRACTION)\nuniform mat4 view;\n#endif\n\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\nuniform mat4 reflectionMatrix;\nuniform vec3 vReflectionMicrosurfaceInfos;\n#if defined(USE_LOCAL_REFLECTIONMAP_CUBIC) && defined(REFLECTIONMAP_CUBIC)\nuniform vec3 vReflectionPosition;\nuniform vec3 vReflectionSize;\n#endif\n#endif\n\n#ifdef CLEARCOAT\nuniform vec2 vClearCoatParams;\nuniform vec4 vClearCoatRefractionParams;\n#ifdef CLEARCOAT_TEXTURE\nuniform vec2 vClearCoatInfos;\nuniform mat4 clearCoatMatrix;\n#endif\n#ifdef CLEARCOAT_BUMP\nuniform vec2 vClearCoatBumpInfos;\nuniform vec2 vClearCoatTangentSpaceParams;\nuniform mat4 clearCoatBumpMatrix;\n#endif\n#ifdef CLEARCOAT_TINT\nuniform vec4 vClearCoatTintParams;\nuniform float clearCoatColorAtDistance;\n#ifdef CLEARCOAT_TINT_TEXTURE\nuniform vec2 vClearCoatTintInfos;\nuniform mat4 clearCoatTintMatrix;\n#endif\n#endif\n#endif\n\n#ifdef ANISOTROPIC\nuniform vec3 vAnisotropy;\n#ifdef ANISOTROPIC_TEXTURE\nuniform vec2 vAnisotropyInfos;\nuniform mat4 anisotropyMatrix;\n#endif\n#endif\n\n#ifdef SHEEN\nuniform vec4 vSheenColor;\n#ifdef SHEEN_TEXTURE\nuniform vec2 vSheenInfos;\nuniform mat4 sheenMatrix;\n#endif\n#endif\n\n#ifdef SUBSURFACE\n#ifdef SS_REFRACTION\nuniform vec3 vRefractionMicrosurfaceInfos;\nuniform vec4 vRefractionInfos;\nuniform mat4 refractionMatrix;\n#endif\n#ifdef SS_THICKNESSANDMASK_TEXTURE\nuniform vec2 vThicknessInfos;\nuniform mat4 thicknessMatrix;;\n#endif\nuniform vec2 vThicknessParam;\nuniform vec3 vDiffusionDistance;\nuniform vec4 vTintColor;\nuniform vec3 vSubSurfaceIntensity;\n#endif",jt.a.IncludesShadersStore.pbrUboDeclaration="layout(std140,column_major) uniform;\nuniform Material\n{\nuniform vec2 vAlbedoInfos;\nuniform vec4 vAmbientInfos;\nuniform vec2 vOpacityInfos;\nuniform vec2 vEmissiveInfos;\nuniform vec2 vLightmapInfos;\nuniform vec3 vReflectivityInfos;\nuniform vec2 vMicroSurfaceSamplerInfos;\nuniform vec2 vReflectionInfos;\nuniform vec3 vReflectionPosition;\nuniform vec3 vReflectionSize;\nuniform vec3 vBumpInfos;\nuniform mat4 albedoMatrix;\nuniform mat4 ambientMatrix;\nuniform mat4 opacityMatrix;\nuniform mat4 emissiveMatrix;\nuniform mat4 lightmapMatrix;\nuniform mat4 reflectivityMatrix;\nuniform mat4 microSurfaceSamplerMatrix;\nuniform mat4 bumpMatrix;\nuniform vec2 vTangentSpaceParams;\nuniform mat4 reflectionMatrix;\nuniform vec3 vReflectionColor;\nuniform vec4 vAlbedoColor;\nuniform vec4 vLightingIntensity;\nuniform vec3 vReflectionMicrosurfaceInfos;\nuniform float pointSize;\nuniform vec4 vReflectivityColor;\nuniform vec3 vEmissiveColor;\nuniform float visibility;\nuniform vec2 vClearCoatParams;\nuniform vec4 vClearCoatRefractionParams;\nuniform vec2 vClearCoatInfos;\nuniform mat4 clearCoatMatrix;\nuniform vec2 vClearCoatBumpInfos;\nuniform vec2 vClearCoatTangentSpaceParams;\nuniform mat4 clearCoatBumpMatrix;\nuniform vec4 vClearCoatTintParams;\nuniform float clearCoatColorAtDistance;\nuniform vec2 vClearCoatTintInfos;\nuniform mat4 clearCoatTintMatrix;\nuniform vec3 vAnisotropy;\nuniform vec2 vAnisotropyInfos;\nuniform mat4 anisotropyMatrix;\nuniform vec4 vSheenColor;\nuniform vec2 vSheenInfos;\nuniform mat4 sheenMatrix;\nuniform vec3 vRefractionMicrosurfaceInfos;\nuniform vec4 vRefractionInfos;\nuniform mat4 refractionMatrix;\nuniform vec2 vThicknessInfos;\nuniform mat4 thicknessMatrix;\nuniform vec2 vThicknessParam;\nuniform vec3 vDiffusionDistance;\nuniform vec4 vTintColor;\nuniform vec3 vSubSurfaceIntensity;\n};\nuniform Scene {\nmat4 viewProjection;\n#ifdef MULTIVIEW\nmat4 viewProjectionR;\n#endif\nmat4 view;\n};",jt.a.IncludesShadersStore.pbrFragmentExtraDeclaration="uniform vec4 vEyePosition;\nuniform vec3 vAmbientColor;\nuniform vec4 vCameraInfos;\n\nvarying vec3 vPositionW;\n#if DEBUGMODE>0\nuniform vec2 vDebugMode;\nvarying vec4 vClipSpacePosition;\n#endif\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#if defined(USESPHERICALFROMREFLECTIONMAP) && defined(USESPHERICALINVERTEX)\nvarying vec3 vEnvironmentIrradiance;\n#endif\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif",jt.a.IncludesShadersStore.pbrFragmentSamplersDeclaration="#ifdef ALBEDO\n#if ALBEDODIRECTUV == 1\n#define vAlbedoUV vMainUV1\n#elif ALBEDODIRECTUV == 2\n#define vAlbedoUV vMainUV2\n#else\nvarying vec2 vAlbedoUV;\n#endif\nuniform sampler2D albedoSampler;\n#endif\n#ifdef AMBIENT\n#if AMBIENTDIRECTUV == 1\n#define vAmbientUV vMainUV1\n#elif AMBIENTDIRECTUV == 2\n#define vAmbientUV vMainUV2\n#else\nvarying vec2 vAmbientUV;\n#endif\nuniform sampler2D ambientSampler;\n#endif\n#ifdef OPACITY\n#if OPACITYDIRECTUV == 1\n#define vOpacityUV vMainUV1\n#elif OPACITYDIRECTUV == 2\n#define vOpacityUV vMainUV2\n#else\nvarying vec2 vOpacityUV;\n#endif\nuniform sampler2D opacitySampler;\n#endif\n#ifdef EMISSIVE\n#if EMISSIVEDIRECTUV == 1\n#define vEmissiveUV vMainUV1\n#elif EMISSIVEDIRECTUV == 2\n#define vEmissiveUV vMainUV2\n#else\nvarying vec2 vEmissiveUV;\n#endif\nuniform sampler2D emissiveSampler;\n#endif\n#ifdef LIGHTMAP\n#if LIGHTMAPDIRECTUV == 1\n#define vLightmapUV vMainUV1\n#elif LIGHTMAPDIRECTUV == 2\n#define vLightmapUV vMainUV2\n#else\nvarying vec2 vLightmapUV;\n#endif\nuniform sampler2D lightmapSampler;\n#endif\n#ifdef REFLECTIVITY\n#if REFLECTIVITYDIRECTUV == 1\n#define vReflectivityUV vMainUV1\n#elif REFLECTIVITYDIRECTUV == 2\n#define vReflectivityUV vMainUV2\n#else\nvarying vec2 vReflectivityUV;\n#endif\nuniform sampler2D reflectivitySampler;\n#endif\n#ifdef MICROSURFACEMAP\n#if MICROSURFACEMAPDIRECTUV == 1\n#define vMicroSurfaceSamplerUV vMainUV1\n#elif MICROSURFACEMAPDIRECTUV == 2\n#define vMicroSurfaceSamplerUV vMainUV2\n#else\nvarying vec2 vMicroSurfaceSamplerUV;\n#endif\nuniform sampler2D microSurfaceSampler;\n#endif\n#ifdef CLEARCOAT\n#ifdef CLEARCOAT_TEXTURE\n#if CLEARCOAT_TEXTUREDIRECTUV == 1\n#define vClearCoatUV vMainUV1\n#elif CLEARCOAT_TEXTUREDIRECTUV == 2\n#define vClearCoatUV vMainUV2\n#else\nvarying vec2 vClearCoatUV;\n#endif\nuniform sampler2D clearCoatSampler;\n#endif\n#ifdef CLEARCOAT_BUMP\n#if CLEARCOAT_BUMPDIRECTUV == 1\n#define vClearCoatBumpUV vMainUV1\n#elif CLEARCOAT_BUMPDIRECTUV == 2\n#define vClearCoatBumpUV vMainUV2\n#else\nvarying vec2 vClearCoatBumpUV;\n#endif\nuniform sampler2D clearCoatBumpSampler;\n#endif\n#ifdef CLEARCOAT_TINT_TEXTURE\n#if CLEARCOAT_TINT_TEXTUREDIRECTUV == 1\n#define vClearCoatTintUV vMainUV1\n#elif CLEARCOAT_TINT_TEXTUREDIRECTUV == 2\n#define vClearCoatTintUV vMainUV2\n#else\nvarying vec2 vClearCoatTintUV;\n#endif\nuniform sampler2D clearCoatTintSampler;\n#endif\n#endif\n#ifdef SHEEN\n#ifdef SHEEN_TEXTURE\n#if SHEEN_TEXTUREDIRECTUV == 1\n#define vSheenUV vMainUV1\n#elif SHEEN_TEXTUREDIRECTUV == 2\n#define vSheenUV vMainUV2\n#else\nvarying vec2 vSheenUV;\n#endif\nuniform sampler2D sheenSampler;\n#endif\n#endif\n#ifdef ANISOTROPIC\n#ifdef ANISOTROPIC_TEXTURE\n#if ANISOTROPIC_TEXTUREDIRECTUV == 1\n#define vAnisotropyUV vMainUV1\n#elif ANISOTROPIC_TEXTUREDIRECTUV == 2\n#define vAnisotropyUV vMainUV2\n#else\nvarying vec2 vAnisotropyUV;\n#endif\nuniform sampler2D anisotropySampler;\n#endif\n#endif\n\n#ifdef REFLECTION\n#ifdef REFLECTIONMAP_3D\n#define sampleReflection(s,c) textureCube(s,c)\nuniform samplerCube reflectionSampler;\n#ifdef LODBASEDMICROSFURACE\n#define sampleReflectionLod(s,c,l) textureCubeLodEXT(s,c,l)\n#else\nuniform samplerCube reflectionSamplerLow;\nuniform samplerCube reflectionSamplerHigh;\n#endif\n#else\n#define sampleReflection(s,c) texture2D(s,c)\nuniform sampler2D reflectionSampler;\n#ifdef LODBASEDMICROSFURACE\n#define sampleReflectionLod(s,c,l) texture2DLodEXT(s,c,l)\n#else\nuniform samplerCube reflectionSamplerLow;\nuniform samplerCube reflectionSamplerHigh;\n#endif\n#endif\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#else\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#endif\n#endif\n#ifdef ENVIRONMENTBRDF\nuniform sampler2D environmentBrdfSampler;\n#endif\n\n#ifdef SUBSURFACE\n#ifdef SS_REFRACTION\n#ifdef SS_REFRACTIONMAP_3D\n#define sampleRefraction(s,c) textureCube(s,c)\nuniform samplerCube refractionSampler;\n#ifdef LODBASEDMICROSFURACE\n#define sampleRefractionLod(s,c,l) textureCubeLodEXT(s,c,l)\n#else\nuniform samplerCube refractionSamplerLow;\nuniform samplerCube refractionSamplerHigh;\n#endif\n#else\n#define sampleRefraction(s,c) texture2D(s,c)\nuniform sampler2D refractionSampler;\n#ifdef LODBASEDMICROSFURACE\n#define sampleRefractionLod(s,c,l) texture2DLodEXT(s,c,l)\n#else\nuniform samplerCube refractionSamplerLow;\nuniform samplerCube refractionSamplerHigh;\n#endif\n#endif\n#endif\n#ifdef SS_THICKNESSANDMASK_TEXTURE\n#if SS_THICKNESSANDMASK_TEXTUREDIRECTUV == 1\n#define vThicknessUV vMainUV1\n#elif SS_THICKNESSANDMASK_TEXTUREDIRECTUV == 2\n#define vThicknessUV vMainUV2\n#else\nvarying vec2 vThicknessUV;\n#endif\nuniform sampler2D thicknessSampler;\n#endif\n#endif",n(88),jt.a.IncludesShadersStore.pbrHelperFunctions="\n#define RECIPROCAL_PI2 0.15915494\n#define RECIPROCAL_PI 0.31830988618\n\n#define MINIMUMVARIANCE 0.0005\nfloat convertRoughnessToAverageSlope(float roughness)\n{\n\nreturn square(roughness)+MINIMUMVARIANCE;\n}\nfloat fresnelGrazingReflectance(float reflectance0) {\n\n\nfloat reflectance90=saturate(reflectance0*25.0);\nreturn reflectance90;\n}\nvec2 getAARoughnessFactors(vec3 normalVector) {\n#ifdef SPECULARAA\nvec3 nDfdx=dFdx(normalVector.xyz);\nvec3 nDfdy=dFdy(normalVector.xyz);\nfloat slopeSquare=max(dot(nDfdx,nDfdx),dot(nDfdy,nDfdy));\n\nfloat geometricRoughnessFactor=pow(saturate(slopeSquare),0.333);\n\nfloat geometricAlphaGFactor=sqrt(slopeSquare);\n\ngeometricAlphaGFactor*=0.75;\nreturn vec2(geometricRoughnessFactor,geometricAlphaGFactor);\n#else\nreturn vec2(0.);\n#endif\n}\n#ifdef ANISOTROPIC\n\n\nvec2 getAnisotropicRoughness(float alphaG,float anisotropy) {\nfloat alphaT=max(alphaG*(1.0+anisotropy),MINIMUMVARIANCE);\nfloat alphaB=max(alphaG*(1.0-anisotropy),MINIMUMVARIANCE);\nreturn vec2(alphaT,alphaB);\n}\n\n\nvec3 getAnisotropicBentNormals(const vec3 T,const vec3 B,const vec3 N,const vec3 V,float anisotropy) {\nvec3 anisotropicFrameDirection=anisotropy>=0.0 ? B : T;\nvec3 anisotropicFrameTangent=cross(normalize(anisotropicFrameDirection),V);\nvec3 anisotropicFrameNormal=cross(anisotropicFrameTangent,anisotropicFrameDirection);\nvec3 anisotropicNormal=normalize(mix(N,anisotropicFrameNormal,abs(anisotropy)));\nreturn anisotropicNormal;\n\n}\n#endif\n#if defined(CLEARCOAT) || defined(SS_REFRACTION)\n\n\n\nvec3 cocaLambert(vec3 alpha,float distance) {\nreturn exp(-alpha*distance);\n}\n\nvec3 cocaLambert(float NdotVRefract,float NdotLRefract,vec3 alpha,float thickness) {\nreturn cocaLambert(alpha,(thickness*((NdotLRefract+NdotVRefract)/(NdotLRefract*NdotVRefract))));\n}\n\nvec3 computeColorAtDistanceInMedia(vec3 color,float distance) {\nreturn -log(color)/distance;\n}\nvec3 computeClearCoatAbsorption(float NdotVRefract,float NdotLRefract,vec3 clearCoatColor,float clearCoatThickness,float clearCoatIntensity) {\nvec3 clearCoatAbsorption=mix(vec3(1.0),\ncocaLambert(NdotVRefract,NdotLRefract,clearCoatColor,clearCoatThickness),\nclearCoatIntensity);\nreturn clearCoatAbsorption;\n}\n#endif\n\n\n\n\n#ifdef MICROSURFACEAUTOMATIC\nfloat computeDefaultMicroSurface(float microSurface,vec3 reflectivityColor)\n{\nconst float kReflectivityNoAlphaWorkflow_SmoothnessMax=0.95;\nfloat reflectivityLuminance=getLuminance(reflectivityColor);\nfloat reflectivityLuma=sqrt(reflectivityLuminance);\nmicroSurface=reflectivityLuma*kReflectivityNoAlphaWorkflow_SmoothnessMax;\nreturn microSurface;\n}\n#endif",jt.a.IncludesShadersStore.harmonicsFunctions="#ifdef USESPHERICALFROMREFLECTIONMAP\n#ifdef SPHERICAL_HARMONICS\nuniform vec3 vSphericalL00;\nuniform vec3 vSphericalL1_1;\nuniform vec3 vSphericalL10;\nuniform vec3 vSphericalL11;\nuniform vec3 vSphericalL2_2;\nuniform vec3 vSphericalL2_1;\nuniform vec3 vSphericalL20;\nuniform vec3 vSphericalL21;\nuniform vec3 vSphericalL22;\n\n\n\n\n\n\n\nvec3 computeEnvironmentIrradiance(vec3 normal) {\nreturn vSphericalL00\n+vSphericalL1_1*(normal.y)\n+vSphericalL10*(normal.z)\n+vSphericalL11*(normal.x)\n+vSphericalL2_2*(normal.y*normal.x)\n+vSphericalL2_1*(normal.y*normal.z)\n+vSphericalL20*((3.0*normal.z*normal.z)-1.0)\n+vSphericalL21*(normal.z*normal.x)\n+vSphericalL22*(normal.x*normal.x-(normal.y*normal.y));\n}\n#else\nuniform vec3 vSphericalX;\nuniform vec3 vSphericalY;\nuniform vec3 vSphericalZ;\nuniform vec3 vSphericalXX_ZZ;\nuniform vec3 vSphericalYY_ZZ;\nuniform vec3 vSphericalZZ;\nuniform vec3 vSphericalXY;\nuniform vec3 vSphericalYZ;\nuniform vec3 vSphericalZX;\n\nvec3 computeEnvironmentIrradiance(vec3 normal) {\n\n\n\n\n\n\n\n\n\nfloat Nx=normal.x;\nfloat Ny=normal.y;\nfloat Nz=normal.z;\nvec3 C1=vSphericalZZ.rgb;\nvec3 Cx=vSphericalX.rgb;\nvec3 Cy=vSphericalY.rgb;\nvec3 Cz=vSphericalZ.rgb;\nvec3 Cxx_zz=vSphericalXX_ZZ.rgb;\nvec3 Cyy_zz=vSphericalYY_ZZ.rgb;\nvec3 Cxy=vSphericalXY.rgb;\nvec3 Cyz=vSphericalYZ.rgb;\nvec3 Czx=vSphericalZX.rgb;\nvec3 a1=Cyy_zz*Ny+Cy;\nvec3 a2=Cyz*Nz+a1;\nvec3 b1=Czx*Nz+Cx;\nvec3 b2=Cxy*Ny+b1;\nvec3 b3=Cxx_zz*Nx+b2;\nvec3 t1=Cz*Nz+C1;\nvec3 t2=a2*Ny+t1;\nvec3 t3=b3*Nx+t2;\nreturn t3;\n}\n#endif\n#endif",jt.a.IncludesShadersStore.pbrDirectLightingSetupFunctions="\nstruct preLightingInfo\n{\n\nvec3 lightOffset;\nfloat lightDistanceSquared;\nfloat lightDistance;\n\nfloat attenuation;\n\nvec3 L;\nvec3 H;\nfloat NdotV;\nfloat NdotLUnclamped;\nfloat NdotL;\nfloat VdotH;\nfloat roughness;\n};\npreLightingInfo computePointAndSpotPreLightingInfo(vec4 lightData,vec3 V,vec3 N) {\npreLightingInfo result;\n\nresult.lightOffset=lightData.xyz-vPositionW;\nresult.lightDistanceSquared=dot(result.lightOffset,result.lightOffset);\n\nresult.lightDistance=sqrt(result.lightDistanceSquared);\n\nresult.L=normalize(result.lightOffset);\nresult.H=normalize(V+result.L);\nresult.VdotH=saturate(dot(V,result.H));\nresult.NdotLUnclamped=dot(N,result.L);\nresult.NdotL=saturateEps(result.NdotLUnclamped);\nreturn result;\n}\npreLightingInfo computeDirectionalPreLightingInfo(vec4 lightData,vec3 V,vec3 N) {\npreLightingInfo result;\n\nresult.lightDistance=length(-lightData.xyz);\n\nresult.L=normalize(-lightData.xyz);\nresult.H=normalize(V+result.L);\nresult.VdotH=saturate(dot(V,result.H));\nresult.NdotLUnclamped=dot(N,result.L);\nresult.NdotL=saturateEps(result.NdotLUnclamped);\nreturn result;\n}\npreLightingInfo computeHemisphericPreLightingInfo(vec4 lightData,vec3 V,vec3 N) {\npreLightingInfo result;\n\n\nresult.NdotL=dot(N,lightData.xyz)*0.5+0.5;\nresult.NdotL=saturateEps(result.NdotL);\nresult.NdotLUnclamped=result.NdotL;\n#ifdef SPECULARTERM\nresult.L=normalize(lightData.xyz);\nresult.H=normalize(V+result.L);\nresult.VdotH=saturate(dot(V,result.H));\n#endif\nreturn result;\n}",jt.a.IncludesShadersStore.pbrDirectLightingFalloffFunctions="float computeDistanceLightFalloff_Standard(vec3 lightOffset,float range)\n{\nreturn max(0.,1.0-length(lightOffset)/range);\n}\nfloat computeDistanceLightFalloff_Physical(float lightDistanceSquared)\n{\nreturn 1.0/maxEps(lightDistanceSquared);\n}\nfloat computeDistanceLightFalloff_GLTF(float lightDistanceSquared,float inverseSquaredRange)\n{\nfloat lightDistanceFalloff=1.0/maxEps(lightDistanceSquared);\nfloat factor=lightDistanceSquared*inverseSquaredRange;\nfloat attenuation=saturate(1.0-factor*factor);\nattenuation*=attenuation;\n\nlightDistanceFalloff*=attenuation;\nreturn lightDistanceFalloff;\n}\nfloat computeDistanceLightFalloff(vec3 lightOffset,float lightDistanceSquared,float range,float inverseSquaredRange)\n{\n#ifdef USEPHYSICALLIGHTFALLOFF\nreturn computeDistanceLightFalloff_Physical(lightDistanceSquared);\n#elif defined(USEGLTFLIGHTFALLOFF)\nreturn computeDistanceLightFalloff_GLTF(lightDistanceSquared,inverseSquaredRange);\n#else\nreturn computeDistanceLightFalloff_Standard(lightOffset,range);\n#endif\n}\nfloat computeDirectionalLightFalloff_Standard(vec3 lightDirection,vec3 directionToLightCenterW,float cosHalfAngle,float exponent)\n{\nfloat falloff=0.0;\nfloat cosAngle=maxEps(dot(-lightDirection,directionToLightCenterW));\nif (cosAngle>=cosHalfAngle)\n{\nfalloff=max(0.,pow(cosAngle,exponent));\n}\nreturn falloff;\n}\nfloat computeDirectionalLightFalloff_Physical(vec3 lightDirection,vec3 directionToLightCenterW,float cosHalfAngle)\n{\nconst float kMinusLog2ConeAngleIntensityRatio=6.64385618977;\n\n\n\n\n\nfloat concentrationKappa=kMinusLog2ConeAngleIntensityRatio/(1.0-cosHalfAngle);\n\n\nvec4 lightDirectionSpreadSG=vec4(-lightDirection*concentrationKappa,-concentrationKappa);\nfloat falloff=exp2(dot(vec4(directionToLightCenterW,1.0),lightDirectionSpreadSG));\nreturn falloff;\n}\nfloat computeDirectionalLightFalloff_GLTF(vec3 lightDirection,vec3 directionToLightCenterW,float lightAngleScale,float lightAngleOffset)\n{\n\n\n\nfloat cd=dot(-lightDirection,directionToLightCenterW);\nfloat falloff=saturate(cd*lightAngleScale+lightAngleOffset);\n\nfalloff*=falloff;\nreturn falloff;\n}\nfloat computeDirectionalLightFalloff(vec3 lightDirection,vec3 directionToLightCenterW,float cosHalfAngle,float exponent,float lightAngleScale,float lightAngleOffset)\n{\n#ifdef USEPHYSICALLIGHTFALLOFF\nreturn computeDirectionalLightFalloff_Physical(lightDirection,directionToLightCenterW,cosHalfAngle);\n#elif defined(USEGLTFLIGHTFALLOFF)\nreturn computeDirectionalLightFalloff_GLTF(lightDirection,directionToLightCenterW,lightAngleScale,lightAngleOffset);\n#else\nreturn computeDirectionalLightFalloff_Standard(lightDirection,directionToLightCenterW,cosHalfAngle,exponent);\n#endif\n}",jt.a.IncludesShadersStore.pbrBRDFFunctions="\n#define FRESNEL_MAXIMUM_ON_ROUGH 0.25\n\n\n\n\n#ifdef MS_BRDF_ENERGY_CONSERVATION\n\n\nvec3 getEnergyConservationFactor(const vec3 specularEnvironmentR0,const vec3 environmentBrdf) {\nreturn 1.0+specularEnvironmentR0*(1.0/environmentBrdf.y-1.0);\n}\n#endif\n#ifdef ENVIRONMENTBRDF\nvec3 getBRDFLookup(float NdotV,float perceptualRoughness,sampler2D brdfSampler) {\n\nvec2 UV=vec2(NdotV,perceptualRoughness);\n\nvec4 brdfLookup=texture2D(brdfSampler,UV);\n#ifdef ENVIRONMENTBRDF_RGBD\nbrdfLookup.rgb=fromRGBD(brdfLookup.rgba);\n#endif\nreturn brdfLookup.rgb;\n}\nvec3 getReflectanceFromBRDFLookup(const vec3 specularEnvironmentR0,const vec3 environmentBrdf) {\n#ifdef BRDF_V_HEIGHT_CORRELATED\nvec3 reflectance=mix(environmentBrdf.xxx,environmentBrdf.yyy,specularEnvironmentR0);\n#else\nvec3 reflectance=specularEnvironmentR0*environmentBrdf.x+environmentBrdf.y;\n#endif\nreturn reflectance;\n}\n#endif\n#if !defined(ENVIRONMENTBRDF) || defined(REFLECTIONMAP_SKYBOX) || defined(ALPHAFRESNEL)\nvec3 getReflectanceFromAnalyticalBRDFLookup_Jones(float VdotN,vec3 reflectance0,vec3 reflectance90,float smoothness)\n{\n\nfloat weight=mix(FRESNEL_MAXIMUM_ON_ROUGH,1.0,smoothness);\nreturn reflectance0+weight*(reflectance90-reflectance0)*pow5(saturate(1.0-VdotN));\n}\n#endif\n#if defined(SHEEN) && defined(REFLECTION)\n\nvec3 getSheenReflectanceFromBRDFLookup(const vec3 reflectance0,const vec3 environmentBrdf) {\nvec3 sheenEnvironmentReflectance=reflectance0*environmentBrdf.b;\nreturn sheenEnvironmentReflectance;\n}\n#endif\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvec3 fresnelSchlickGGX(float VdotH,vec3 reflectance0,vec3 reflectance90)\n{\nreturn reflectance0+(reflectance90-reflectance0)*pow5(1.0-VdotH);\n}\nfloat fresnelSchlickGGX(float VdotH,float reflectance0,float reflectance90)\n{\nreturn reflectance0+(reflectance90-reflectance0)*pow5(1.0-VdotH);\n}\n#ifdef CLEARCOAT\n\n\n\n\n\nvec3 getR0RemappedForClearCoat(vec3 f0) {\n#ifdef CLEARCOAT_DEFAULTIOR\n#ifdef MOBILE\nreturn saturate(f0*(f0*0.526868+0.529324)-0.0482256);\n#else\nreturn saturate(f0*(f0*(0.941892-0.263008*f0)+0.346479)-0.0285998);\n#endif\n#else\nvec3 s=sqrt(f0);\nvec3 t=(vClearCoatRefractionParams.z+vClearCoatRefractionParams.w*s)/(vClearCoatRefractionParams.w+vClearCoatRefractionParams.z*s);\nreturn t*t;\n#endif\n}\n#endif\n\n\n\n\n\n\nfloat normalDistributionFunction_TrowbridgeReitzGGX(float NdotH,float alphaG)\n{\n\n\n\nfloat a2=square(alphaG);\nfloat d=NdotH*NdotH*(a2-1.0)+1.0;\nreturn a2/(PI*d*d);\n}\n#ifdef SHEEN\n\nfloat normalDistributionFunction_CharlieSheen(float NdotH,float alphaG)\n{\nfloat invR=1./alphaG;\nfloat cos2h=NdotH*NdotH;\nfloat sin2h=1.-cos2h;\nreturn (2.+invR)*pow(sin2h,invR*.5)/(2.*PI);\n}\n#endif\n#ifdef ANISOTROPIC\n\n\nfloat normalDistributionFunction_BurleyGGX_Anisotropic(float NdotH,float TdotH,float BdotH,const vec2 alphaTB) {\nfloat a2=alphaTB.x*alphaTB.y;\nvec3 v=vec3(alphaTB.y*TdotH,alphaTB.x*BdotH,a2*NdotH);\nfloat v2=dot(v,v);\nfloat w2=a2/v2;\nreturn a2*w2*w2*RECIPROCAL_PI;\n}\n#endif\n\n\n\n\n#ifdef BRDF_V_HEIGHT_CORRELATED\n\n\n\nfloat smithVisibility_GGXCorrelated(float NdotL,float NdotV,float alphaG) {\n#ifdef MOBILE\n\nfloat GGXV=NdotL*(NdotV*(1.0-alphaG)+alphaG);\nfloat GGXL=NdotV*(NdotL*(1.0-alphaG)+alphaG);\nreturn 0.5/(GGXV+GGXL);\n#else\nfloat a2=alphaG*alphaG;\nfloat GGXV=NdotL*sqrt(NdotV*(NdotV-a2*NdotV)+a2);\nfloat GGXL=NdotV*sqrt(NdotL*(NdotL-a2*NdotL)+a2);\nreturn 0.5/(GGXV+GGXL);\n#endif\n}\n#else\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfloat smithVisibilityG1_TrowbridgeReitzGGXFast(float dot,float alphaG)\n{\n#ifdef MOBILE\n\nreturn 1.0/(dot+alphaG+(1.0-alphaG)*dot ));\n#else\nfloat alphaSquared=alphaG*alphaG;\nreturn 1.0/(dot+sqrt(alphaSquared+(1.0-alphaSquared)*dot*dot));\n#endif\n}\nfloat smithVisibility_TrowbridgeReitzGGXFast(float NdotL,float NdotV,float alphaG)\n{\nfloat visibility=smithVisibilityG1_TrowbridgeReitzGGXFast(NdotL,alphaG)*smithVisibilityG1_TrowbridgeReitzGGXFast(NdotV,alphaG);\n\nreturn visibility;\n}\n#endif\n#ifdef ANISOTROPIC\n\n\nfloat smithVisibility_GGXCorrelated_Anisotropic(float NdotL,float NdotV,float TdotV,float BdotV,float TdotL,float BdotL,const vec2 alphaTB) {\nfloat lambdaV=NdotL*length(vec3(alphaTB.x*TdotV,alphaTB.y*BdotV,NdotV));\nfloat lambdaL=NdotV*length(vec3(alphaTB.x*TdotL,alphaTB.y*BdotL,NdotL));\nfloat v=0.5/(lambdaV+lambdaL);\nreturn v;\n}\n#endif\n#ifdef CLEARCOAT\nfloat visibility_Kelemen(float VdotH) {\n\n\n\nreturn 0.25/(VdotH*VdotH);\n}\n#endif\n#ifdef SHEEN\n\n\n\nfloat visibility_Ashikhmin(float NdotL,float NdotV)\n{\nreturn 1./(4.*(NdotL+NdotV-NdotL*NdotV));\n}\n#endif\n\n\n\n\n\n\n\nfloat diffuseBRDF_Burley(float NdotL,float NdotV,float VdotH,float roughness) {\n\n\nfloat diffuseFresnelNV=pow5(saturateEps(1.0-NdotL));\nfloat diffuseFresnelNL=pow5(saturateEps(1.0-NdotV));\nfloat diffuseFresnel90=0.5+2.0*VdotH*VdotH*roughness;\nfloat fresnel =\n(1.0+(diffuseFresnel90-1.0)*diffuseFresnelNL) *\n(1.0+(diffuseFresnel90-1.0)*diffuseFresnelNV);\nreturn fresnel/PI;\n}\n#ifdef SS_TRANSLUCENCY\n\n\nvec3 transmittanceBRDF_Burley(const vec3 tintColor,const vec3 diffusionDistance,float thickness) {\nvec3 S=1./maxEps(diffusionDistance);\nvec3 temp=exp((-0.333333333*thickness)*S);\nreturn tintColor.rgb*0.25*(temp*temp*temp+3.0*temp);\n}\n\n\nfloat computeWrappedDiffuseNdotL(float NdotL,float w) {\nfloat t=1.0+w;\nfloat invt2=1.0/square(t);\nreturn saturate((NdotL+w)*invt2);\n}\n#endif\n",jt.a.IncludesShadersStore.pbrDirectLightingFunctions="#define CLEARCOATREFLECTANCE90 1.0\n\nstruct lightingInfo\n{\nvec3 diffuse;\n#ifdef SPECULARTERM\nvec3 specular;\n#endif\n#ifdef CLEARCOAT\n\n\nvec4 clearCoat;\n#endif\n#ifdef SHEEN\nvec3 sheen;\n#endif\n};\n\nfloat adjustRoughnessFromLightProperties(float roughness,float lightRadius,float lightDistance) {\n#if defined(USEPHYSICALLIGHTFALLOFF) || defined(USEGLTFLIGHTFALLOFF)\n\nfloat lightRoughness=lightRadius/lightDistance;\n\nfloat totalRoughness=saturate(lightRoughness+roughness);\nreturn totalRoughness;\n#else\nreturn roughness;\n#endif\n}\nvec3 computeHemisphericDiffuseLighting(preLightingInfo info,vec3 lightColor,vec3 groundColor) {\nreturn mix(groundColor,lightColor,info.NdotL);\n}\nvec3 computeDiffuseLighting(preLightingInfo info,vec3 lightColor) {\nfloat diffuseTerm=diffuseBRDF_Burley(info.NdotL,info.NdotV,info.VdotH,info.roughness);\nreturn diffuseTerm*info.attenuation*info.NdotL*lightColor;\n}\nvec3 computeProjectionTextureDiffuseLighting(sampler2D projectionLightSampler,mat4 textureProjectionMatrix){\nvec4 strq=textureProjectionMatrix*vec4(vPositionW,1.0);\nstrq/=strq.w;\nvec3 textureColor=texture2D(projectionLightSampler,strq.xy).rgb;\nreturn toLinearSpace(textureColor);\n}\n#ifdef SS_TRANSLUCENCY\nvec3 computeDiffuseAndTransmittedLighting(preLightingInfo info,vec3 lightColor,vec3 transmittance) {\nfloat NdotL=absEps(info.NdotLUnclamped);\n\nfloat wrapNdotL=computeWrappedDiffuseNdotL(NdotL,0.02);\n\nfloat trAdapt=step(0.,info.NdotLUnclamped);\nvec3 transmittanceNdotL=mix(transmittance*wrapNdotL,vec3(wrapNdotL),trAdapt);\nfloat diffuseTerm=diffuseBRDF_Burley(NdotL,info.NdotV,info.VdotH,info.roughness);\nreturn diffuseTerm*transmittanceNdotL*info.attenuation*lightColor;\n}\n#endif\n#ifdef SPECULARTERM\nvec3 computeSpecularLighting(preLightingInfo info,vec3 N,vec3 reflectance0,vec3 reflectance90,float geometricRoughnessFactor,vec3 lightColor) {\nfloat NdotH=saturateEps(dot(N,info.H));\nfloat roughness=max(info.roughness,geometricRoughnessFactor);\nfloat alphaG=convertRoughnessToAverageSlope(roughness);\nvec3 fresnel=fresnelSchlickGGX(info.VdotH,reflectance0,reflectance90);\nfloat distribution=normalDistributionFunction_TrowbridgeReitzGGX(NdotH,alphaG);\n#ifdef BRDF_V_HEIGHT_CORRELATED\nfloat visibility=smithVisibility_GGXCorrelated(info.NdotL,info.NdotV,alphaG);\n#else\nfloat visibility=smithVisibility_TrowbridgeReitzGGXFast(info.NdotL,info.NdotV,alphaG);\n#endif\nvec3 specTerm=fresnel*distribution*visibility;\nreturn specTerm*info.attenuation*info.NdotL*lightColor;\n}\n#endif\n#ifdef ANISOTROPIC\nvec3 computeAnisotropicSpecularLighting(preLightingInfo info,vec3 V,vec3 N,vec3 T,vec3 B,float anisotropy,vec3 reflectance0,vec3 reflectance90,float geometricRoughnessFactor,vec3 lightColor) {\nfloat NdotH=saturateEps(dot(N,info.H));\nfloat TdotH=dot(T,info.H);\nfloat BdotH=dot(B,info.H);\nfloat TdotV=dot(T,V);\nfloat BdotV=dot(B,V);\nfloat TdotL=dot(T,info.L);\nfloat BdotL=dot(B,info.L);\nfloat alphaG=convertRoughnessToAverageSlope(info.roughness);\nvec2 alphaTB=getAnisotropicRoughness(alphaG,anisotropy);\nalphaTB=max(alphaTB,square(geometricRoughnessFactor));\nvec3 fresnel=fresnelSchlickGGX(info.VdotH,reflectance0,reflectance90);\nfloat distribution=normalDistributionFunction_BurleyGGX_Anisotropic(NdotH,TdotH,BdotH,alphaTB);\nfloat visibility=smithVisibility_GGXCorrelated_Anisotropic(info.NdotL,info.NdotV,TdotV,BdotV,TdotL,BdotL,alphaTB);\nvec3 specTerm=fresnel*distribution*visibility;\nreturn specTerm*info.attenuation*info.NdotL*lightColor;\n}\n#endif\n#ifdef CLEARCOAT\nvec4 computeClearCoatLighting(preLightingInfo info,vec3 Ncc,float geometricRoughnessFactor,float clearCoatIntensity,vec3 lightColor) {\nfloat NccdotL=saturateEps(dot(Ncc,info.L));\nfloat NccdotH=saturateEps(dot(Ncc,info.H));\nfloat clearCoatRoughness=max(info.roughness,geometricRoughnessFactor);\nfloat alphaG=convertRoughnessToAverageSlope(clearCoatRoughness);\nfloat fresnel=fresnelSchlickGGX(info.VdotH,vClearCoatRefractionParams.x,CLEARCOATREFLECTANCE90);\nfresnel*=clearCoatIntensity;\nfloat distribution=normalDistributionFunction_TrowbridgeReitzGGX(NccdotH,alphaG);\nfloat visibility=visibility_Kelemen(info.VdotH);\nfloat clearCoatTerm=fresnel*distribution*visibility;\nreturn vec4(\nclearCoatTerm*info.attenuation*NccdotL*lightColor,\n1.0-fresnel\n);\n}\nvec3 computeClearCoatLightingAbsorption(float NdotVRefract,vec3 L,vec3 Ncc,vec3 clearCoatColor,float clearCoatThickness,float clearCoatIntensity) {\nvec3 LRefract=-refract(L,Ncc,vClearCoatRefractionParams.y);\nfloat NdotLRefract=saturateEps(dot(Ncc,LRefract));\nvec3 absorption=computeClearCoatAbsorption(NdotVRefract,NdotLRefract,clearCoatColor,clearCoatThickness,clearCoatIntensity);\nreturn absorption;\n}\n#endif\n#ifdef SHEEN\nvec3 computeSheenLighting(preLightingInfo info,vec3 N,vec3 reflectance0,vec3 reflectance90,float geometricRoughnessFactor,vec3 lightColor) {\nfloat NdotH=saturateEps(dot(N,info.H));\nfloat roughness=max(info.roughness,geometricRoughnessFactor);\nfloat alphaG=convertRoughnessToAverageSlope(roughness);\n\n\nvec3 fresnel=reflectance0;\nfloat distribution=normalDistributionFunction_CharlieSheen(NdotH,alphaG);\nfloat visibility=visibility_Ashikhmin(info.NdotL,info.NdotV);\nvec3 sheenTerm=fresnel*distribution*visibility;\nreturn sheenTerm*info.attenuation*info.NdotL*lightColor;\n}\n#endif\n",jt.a.IncludesShadersStore.pbrIBLFunctions="#if defined(REFLECTION) || defined(SS_REFRACTION)\nfloat getLodFromAlphaG(float cubeMapDimensionPixels,float microsurfaceAverageSlope) {\nfloat microsurfaceAverageSlopeTexels=microsurfaceAverageSlope*cubeMapDimensionPixels;\nfloat lod=log2(microsurfaceAverageSlopeTexels);\nreturn lod;\n}\n#endif\n#if defined(ENVIRONMENTBRDF) && defined(RADIANCEOCCLUSION)\nfloat environmentRadianceOcclusion(float ambientOcclusion,float NdotVUnclamped) {\n\n\nfloat temp=NdotVUnclamped+ambientOcclusion;\nreturn saturate(square(temp)-1.0+ambientOcclusion);\n}\n#endif\n#if defined(ENVIRONMENTBRDF) && defined(HORIZONOCCLUSION)\nfloat environmentHorizonOcclusion(vec3 view,vec3 normal) {\n\nvec3 reflection=reflect(view,normal);\nfloat temp=saturate(1.0+1.1*dot(reflection,normal));\nreturn square(temp);\n}\n#endif\n\n\n\n\n#if defined(LODINREFLECTIONALPHA) || defined(SS_LODINREFRACTIONALPHA)\n\n\n#define UNPACK_LOD(x) (1.0-x)*255.0\nfloat getLodFromAlphaG(float cubeMapDimensionPixels,float alphaG,float NdotV) {\nfloat microsurfaceAverageSlope=alphaG;\n\n\n\n\n\n\nmicrosurfaceAverageSlope*=sqrt(abs(NdotV));\nreturn getLodFromAlphaG(cubeMapDimensionPixels,microsurfaceAverageSlope);\n}\n#endif",n(121),n(122),n(123),n(115),jt.a.IncludesShadersStore.pbrDebug="#if DEBUGMODE>0\nif (vClipSpacePosition.x/vClipSpacePosition.w<vDebugMode.x) {\nreturn;\n}\n\n#if DEBUGMODE == 1\ngl_FragColor.rgb=vPositionW.rgb;\n#define DEBUGMODE_NORMALIZE\n#elif DEBUGMODE == 2 && defined(NORMAL)\ngl_FragColor.rgb=vNormalW.rgb;\n#define DEBUGMODE_NORMALIZE\n#elif DEBUGMODE == 3 && (defined(BUMP) || defined(PARALLAX) || defined(ANISOTROPIC))\n\ngl_FragColor.rgb=TBN[0];\n#define DEBUGMODE_NORMALIZE\n#elif DEBUGMODE == 4 && (defined(BUMP) || defined(PARALLAX) || defined(ANISOTROPIC))\n\ngl_FragColor.rgb=TBN[1];\n#define DEBUGMODE_NORMALIZE\n#elif DEBUGMODE == 5\n\ngl_FragColor.rgb=normalW;\n#define DEBUGMODE_NORMALIZE\n#elif DEBUGMODE == 6 && defined(MAINUV1)\ngl_FragColor.rgb=vec3(vMainUV1,0.0);\n#elif DEBUGMODE == 7 && defined(MAINUV2)\ngl_FragColor.rgb=vec3(vMainUV2,0.0);\n#elif DEBUGMODE == 8 && defined(CLEARCOAT) && defined(CLEARCOAT_BUMP)\n\ngl_FragColor.rgb=TBNClearCoat[0];\n#define DEBUGMODE_NORMALIZE\n#elif DEBUGMODE == 9 && defined(CLEARCOAT) && defined(CLEARCOAT_BUMP)\n\ngl_FragColor.rgb=TBNClearCoat[1];\n#define DEBUGMODE_NORMALIZE\n#elif DEBUGMODE == 10 && defined(CLEARCOAT)\n\ngl_FragColor.rgb=clearCoatNormalW;\n#define DEBUGMODE_NORMALIZE\n#elif DEBUGMODE == 11 && defined(ANISOTROPIC)\ngl_FragColor.rgb=anisotropicNormal;\n#define DEBUGMODE_NORMALIZE\n#elif DEBUGMODE == 12 && defined(ANISOTROPIC)\ngl_FragColor.rgb=anisotropicTangent;\n#define DEBUGMODE_NORMALIZE\n#elif DEBUGMODE == 13 && defined(ANISOTROPIC)\ngl_FragColor.rgb=anisotropicBitangent;\n#define DEBUGMODE_NORMALIZE\n\n#elif DEBUGMODE == 20 && defined(ALBEDO)\ngl_FragColor.rgb=albedoTexture.rgb;\n#elif DEBUGMODE == 21 && defined(AMBIENT)\ngl_FragColor.rgb=ambientOcclusionColorMap.rgb;\n#elif DEBUGMODE == 22 && defined(OPACITY)\ngl_FragColor.rgb=opacityMap.rgb;\n#elif DEBUGMODE == 23 && defined(EMISSIVE)\ngl_FragColor.rgb=emissiveColorTex.rgb;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 24 && defined(LIGHTMAP)\ngl_FragColor.rgb=lightmapColor.rgb;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 25 && defined(REFLECTIVITY) && defined(METALLICWORKFLOW)\ngl_FragColor.rgb=surfaceMetallicColorMap.rgb;\n#elif DEBUGMODE == 26 && defined(REFLECTIVITY) && !defined(METALLICWORKFLOW)\ngl_FragColor.rgb=surfaceReflectivityColorMap.rgb;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 27 && defined(CLEARCOAT) && defined(CLEARCOAT_TEXTURE)\ngl_FragColor.rgb=vec3(clearCoatMapData.rg,0.0);\n#elif DEBUGMODE == 28 && defined(CLEARCOAT) && defined(CLEARCOAT_TINT) && defined(CLEARCOAT_TINT_TEXTURE)\ngl_FragColor.rgb=clearCoatTintMapData.rgb;\n#elif DEBUGMODE == 29 && defined(SHEEN) && defined(SHEEN_TEXTURE)\ngl_FragColor.rgb=sheenMapData.rgb;\n#elif DEBUGMODE == 30 && defined(ANISOTROPIC) && defined(ANISOTROPIC_TEXTURE)\ngl_FragColor.rgb=anisotropyMapData.rgb;\n#elif DEBUGMODE == 31 && defined(SUBSURFACE) && defined(SS_THICKNESSANDMASK_TEXTURE)\ngl_FragColor.rgb=thicknessMap.rgb;\n\n#elif DEBUGMODE == 40 && defined(SS_REFRACTION)\n\ngl_FragColor.rgb=environmentRefraction.rgb;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 41 && defined(REFLECTION)\ngl_FragColor.rgb=environmentRadiance.rgb;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 42 && defined(CLEARCOAT) && defined(REFLECTION)\ngl_FragColor.rgb=environmentClearCoatRadiance;\n#define DEBUGMODE_GAMMA\n\n#elif DEBUGMODE == 50\ngl_FragColor.rgb=diffuseBase.rgb;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 51 && defined(SPECULARTERM)\ngl_FragColor.rgb=specularBase.rgb;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 52 && defined(CLEARCOAT)\ngl_FragColor.rgb=clearCoatBase.rgb;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 53 && defined(SHEEN)\ngl_FragColor.rgb=sheenBase.rgb;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 54 && defined(REFLECTION)\ngl_FragColor.rgb=environmentIrradiance.rgb;\n#define DEBUGMODE_GAMMA\n\n#elif DEBUGMODE == 60\ngl_FragColor.rgb=surfaceAlbedo.rgb;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 61\ngl_FragColor.rgb=specularEnvironmentR0;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 62\ngl_FragColor.rgb=vec3(roughness);\n#elif DEBUGMODE == 63\ngl_FragColor.rgb=vec3(alphaG);\n#elif DEBUGMODE == 64\ngl_FragColor.rgb=vec3(NdotV);\n#elif DEBUGMODE == 65 && defined(CLEARCOAT) && defined(CLEARCOAT_TINT)\ngl_FragColor.rgb=clearCoatColor.rgb;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 66 && defined(CLEARCOAT)\ngl_FragColor.rgb=vec3(clearCoatRoughness);\n#elif DEBUGMODE == 67 && defined(CLEARCOAT)\ngl_FragColor.rgb=vec3(clearCoatNdotV);\n#elif DEBUGMODE == 68 && defined(SUBSURFACE) && defined(SS_TRANSLUCENCY)\ngl_FragColor.rgb=transmittance;\n#elif DEBUGMODE == 69 && defined(SUBSURFACE) && defined(SS_REFRACTION)\ngl_FragColor.rgb=refractionTransmittance;\n\n#elif DEBUGMODE == 70 && defined(RADIANCEOCCLUSION)\ngl_FragColor.rgb=vec3(seo);\n#elif DEBUGMODE == 71 && defined(HORIZONOCCLUSION)\ngl_FragColor.rgb=vec3(eho);\n#elif DEBUGMODE == 72 && defined(MS_BRDF_ENERGY_CONSERVATION)\ngl_FragColor.rgb=vec3(energyConservationFactor);\n#elif DEBUGMODE == 73 && defined(ENVIRONMENTBRDF) && !defined(REFLECTIONMAP_SKYBOX)\ngl_FragColor.rgb=specularEnvironmentReflectance;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 74 && defined(CLEARCOAT) && defined(ENVIRONMENTBRDF) && !defined(REFLECTIONMAP_SKYBOX)\ngl_FragColor.rgb=clearCoatEnvironmentReflectance;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 75 && defined(SHEEN) && defined(REFLECTION)\ngl_FragColor.rgb=sheenEnvironmentReflectance;\n#define DEBUGMODE_GAMMA\n#elif DEBUGMODE == 76 && defined(ALPHABLEND)\ngl_FragColor.rgb=vec3(luminanceOverAlpha);\n#elif DEBUGMODE == 77\ngl_FragColor.rgb=vec3(alpha);\n#endif\ngl_FragColor.rgb*=vDebugMode.y;\n#ifdef DEBUGMODE_NORMALIZE\ngl_FragColor.rgb=normalize(gl_FragColor.rgb)*0.5+0.5;\n#endif\n#ifdef DEBUGMODE_GAMMA\ngl_FragColor.rgb=toGammaSpace(gl_FragColor.rgb);\n#endif\ngl_FragColor.a=1.0;\n#endif",jt.a.ShadersStore.pbrPixelShader="#if defined(BUMP) || !defined(NORMAL) || defined(FORCENORMALFORWARD) || defined(SPECULARAA) || defined(CLEARCOAT_BUMP) || defined(ANISOTROPIC)\n#extension GL_OES_standard_derivatives : enable\n#endif\n#ifdef LODBASEDMICROSFURACE\n#extension GL_EXT_shader_texture_lod : enable\n#endif\n#define CUSTOM_FRAGMENT_BEGIN\n#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\nprecision highp float;\n\n#ifndef FROMLINEARSPACE\n#define FROMLINEARSPACE;\n#endif\n\n#include<__decl__pbrFragment>\n#include<pbrFragmentExtraDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<pbrFragmentSamplersDeclaration>\n#include<imageProcessingDeclaration>\n#include<clipPlaneFragmentDeclaration>\n#include<logDepthDeclaration>\n#include<fogFragmentDeclaration>\n\n#include<helperFunctions>\n#include<pbrHelperFunctions>\n#include<imageProcessingFunctions>\n#include<shadowsFragmentFunctions>\n#include<harmonicsFunctions>\n#include<pbrDirectLightingSetupFunctions>\n#include<pbrDirectLightingFalloffFunctions>\n#include<pbrBRDFFunctions>\n#include<pbrDirectLightingFunctions>\n#include<pbrIBLFunctions>\n#include<bumpFragmentFunctions>\n#ifdef REFLECTION\n#include<reflectionFunction>\n#endif\n#define CUSTOM_FRAGMENT_DEFINITIONS\n\nvoid main(void) {\n#define CUSTOM_FRAGMENT_MAIN_BEGIN\n#include<clipPlaneFragment>\n\nvec3 viewDirectionW=normalize(vEyePosition.xyz-vPositionW);\n#ifdef NORMAL\nvec3 normalW=normalize(vNormalW);\n#else\nvec3 normalW=normalize(cross(dFdx(vPositionW),dFdy(vPositionW)))*vEyePosition.w;\n#endif\n#ifdef CLEARCOAT\n\nvec3 clearCoatNormalW=normalW;\n#endif\n#include<bumpFragment>\n#if defined(FORCENORMALFORWARD) && defined(NORMAL)\nvec3 faceNormal=normalize(cross(dFdx(vPositionW),dFdy(vPositionW)))*vEyePosition.w;\n#if defined(TWOSIDEDLIGHTING)\nfaceNormal=gl_FrontFacing ? faceNormal : -faceNormal;\n#endif\nnormalW*=sign(dot(normalW,faceNormal));\n#endif\n#if defined(TWOSIDEDLIGHTING) && defined(NORMAL)\nnormalW=gl_FrontFacing ? normalW : -normalW;\n#endif\n\n\nvec3 surfaceAlbedo=vAlbedoColor.rgb;\n\nfloat alpha=vAlbedoColor.a;\n#ifdef ALBEDO\nvec4 albedoTexture=texture2D(albedoSampler,vAlbedoUV+uvOffset);\n#if defined(ALPHAFROMALBEDO) || defined(ALPHATEST)\nalpha*=albedoTexture.a;\n#endif\nsurfaceAlbedo*=toLinearSpace(albedoTexture.rgb);\nsurfaceAlbedo*=vAlbedoInfos.y;\n#endif\n#ifdef VERTEXCOLOR\nsurfaceAlbedo*=vColor.rgb;\n#endif\n#define CUSTOM_FRAGMENT_UPDATE_ALBEDO\n\n#ifdef OPACITY\nvec4 opacityMap=texture2D(opacitySampler,vOpacityUV+uvOffset);\n#ifdef OPACITYRGB\nalpha=getLuminance(opacityMap.rgb);\n#else\nalpha*=opacityMap.a;\n#endif\nalpha*=vOpacityInfos.y;\n#endif\n#ifdef VERTEXALPHA\nalpha*=vColor.a;\n#endif\n#if !defined(SS_LINKREFRACTIONTOTRANSPARENCY) && !defined(ALPHAFRESNEL)\n#ifdef ALPHATEST\nif (alpha<ALPHATESTVALUE)\ndiscard;\n#ifndef ALPHABLEND\n\nalpha=1.0;\n#endif\n#endif\n#endif\n#define CUSTOM_FRAGMENT_UPDATE_ALPHA\n#include<depthPrePass>\n#define CUSTOM_FRAGMENT_BEFORE_LIGHTS\n\nvec3 ambientOcclusionColor=vec3(1.,1.,1.);\n#ifdef AMBIENT\nvec3 ambientOcclusionColorMap=texture2D(ambientSampler,vAmbientUV+uvOffset).rgb*vAmbientInfos.y;\n#ifdef AMBIENTINGRAYSCALE\nambientOcclusionColorMap=vec3(ambientOcclusionColorMap.r,ambientOcclusionColorMap.r,ambientOcclusionColorMap.r);\n#endif\nambientOcclusionColor=mix(ambientOcclusionColor,ambientOcclusionColorMap,vAmbientInfos.z);\n#endif\n#ifdef UNLIT\nvec3 diffuseBase=vec3(1.,1.,1.);\n#else\n\nfloat microSurface=vReflectivityColor.a;\nvec3 surfaceReflectivityColor=vReflectivityColor.rgb;\n#ifdef METALLICWORKFLOW\nvec2 metallicRoughness=surfaceReflectivityColor.rg;\n#ifdef REFLECTIVITY\nvec4 surfaceMetallicColorMap=texture2D(reflectivitySampler,vReflectivityUV+uvOffset);\n#ifdef AOSTOREINMETALMAPRED\nvec3 aoStoreInMetalMap=vec3(surfaceMetallicColorMap.r,surfaceMetallicColorMap.r,surfaceMetallicColorMap.r);\nambientOcclusionColor=mix(ambientOcclusionColor,aoStoreInMetalMap,vReflectivityInfos.z);\n#endif\n#ifdef METALLNESSSTOREINMETALMAPBLUE\nmetallicRoughness.r*=surfaceMetallicColorMap.b;\n#else\nmetallicRoughness.r*=surfaceMetallicColorMap.r;\n#endif\n#ifdef ROUGHNESSSTOREINMETALMAPALPHA\nmetallicRoughness.g*=surfaceMetallicColorMap.a;\n#else\n#ifdef ROUGHNESSSTOREINMETALMAPGREEN\nmetallicRoughness.g*=surfaceMetallicColorMap.g;\n#endif\n#endif\n#endif\n#ifdef MICROSURFACEMAP\nvec4 microSurfaceTexel=texture2D(microSurfaceSampler,vMicroSurfaceSamplerUV+uvOffset)*vMicroSurfaceSamplerInfos.y;\nmetallicRoughness.g*=microSurfaceTexel.r;\n#endif\n#define CUSTOM_FRAGMENT_UPDATE_METALLICROUGHNESS\n\nmicroSurface=1.0-metallicRoughness.g;\n\nvec3 baseColor=surfaceAlbedo;\n#ifdef REFLECTANCE\n\n\n\n\n\nsurfaceAlbedo=baseColor.rgb*(1.0-metallicRoughness.r);\n\nsurfaceReflectivityColor=mix(0.16*reflectance*reflectance,baseColor,metallicRoughness.r);\n#else\n\n\n\nconst vec3 DefaultSpecularReflectanceDielectric=vec3(0.04,0.04,0.04);\n\nsurfaceAlbedo=mix(baseColor.rgb*(1.0-DefaultSpecularReflectanceDielectric.r),vec3(0.,0.,0.),metallicRoughness.r);\n\nsurfaceReflectivityColor=mix(DefaultSpecularReflectanceDielectric,baseColor,metallicRoughness.r);\n#endif\n#else\n#ifdef REFLECTIVITY\nvec4 surfaceReflectivityColorMap=texture2D(reflectivitySampler,vReflectivityUV+uvOffset);\nsurfaceReflectivityColor*=toLinearSpace(surfaceReflectivityColorMap.rgb);\nsurfaceReflectivityColor*=vReflectivityInfos.y;\n#ifdef MICROSURFACEFROMREFLECTIVITYMAP\nmicroSurface*=surfaceReflectivityColorMap.a;\nmicroSurface*=vReflectivityInfos.z;\n#else\n#ifdef MICROSURFACEAUTOMATIC\nmicroSurface*=computeDefaultMicroSurface(microSurface,surfaceReflectivityColor);\n#endif\n#ifdef MICROSURFACEMAP\nvec4 microSurfaceTexel=texture2D(microSurfaceSampler,vMicroSurfaceSamplerUV+uvOffset)*vMicroSurfaceSamplerInfos.y;\nmicroSurface*=microSurfaceTexel.r;\n#endif\n#define CUSTOM_FRAGMENT_UPDATE_MICROSURFACE\n#endif\n#endif\n#endif\n\nmicroSurface=saturate(microSurface);\n\nfloat roughness=1.-microSurface;\n\n#ifdef ALPHAFRESNEL\n#if defined(ALPHATEST) || defined(ALPHABLEND)\n\n\n\nfloat opacityPerceptual=alpha;\n#ifdef LINEARALPHAFRESNEL\nfloat opacity0=opacityPerceptual;\n#else\nfloat opacity0=opacityPerceptual*opacityPerceptual;\n#endif\nfloat opacity90=fresnelGrazingReflectance(opacity0);\nvec3 normalForward=faceforward(normalW,-viewDirectionW,normalW);\n\nalpha=getReflectanceFromAnalyticalBRDFLookup_Jones(saturate(dot(viewDirectionW,normalForward)),vec3(opacity0),vec3(opacity90),sqrt(microSurface)).x;\n#ifdef ALPHATEST\nif (alpha<ALPHATESTVALUE)\ndiscard;\n#ifndef ALPHABLEND\n\nalpha=1.0;\n#endif\n#endif\n#endif\n#endif\n\nfloat NdotVUnclamped=dot(normalW,viewDirectionW);\n\nfloat NdotV=absEps(NdotVUnclamped);\nfloat alphaG=convertRoughnessToAverageSlope(roughness);\nvec2 AARoughnessFactors=getAARoughnessFactors(normalW.xyz);\n#ifdef SPECULARAA\n\nalphaG+=AARoughnessFactors.y;\n#endif\n#ifdef ANISOTROPIC\nfloat anisotropy=vAnisotropy.b;\nvec3 anisotropyDirection=vec3(vAnisotropy.xy,0.);\n#ifdef ANISOTROPIC_TEXTURE\nvec3 anisotropyMapData=texture2D(anisotropySampler,vAnisotropyUV+uvOffset).rgb*vAnisotropyInfos.y;\nanisotropy*=anisotropyMapData.b;\nanisotropyDirection.rg*=anisotropyMapData.rg*2.0-1.0;\n#endif\nmat3 anisoTBN=mat3(normalize(TBN[0]),normalize(TBN[1]),normalize(TBN[2]));\nvec3 anisotropicTangent=normalize(anisoTBN*anisotropyDirection);\nvec3 anisotropicBitangent=normalize(cross(anisoTBN[2],anisotropicTangent));\nvec3 anisotropicNormal=getAnisotropicBentNormals(anisotropicTangent,anisotropicBitangent,normalW,viewDirectionW,anisotropy);\n#endif\n\n#ifdef SS_REFRACTION\nvec4 environmentRefraction=vec4(0.,0.,0.,0.);\n#ifdef ANISOTROPIC\nvec3 refractionVector=refract(-viewDirectionW,anisotropicNormal,vRefractionInfos.y);\n#else\nvec3 refractionVector=refract(-viewDirectionW,normalW,vRefractionInfos.y);\n#endif\n#ifdef SS_REFRACTIONMAP_OPPOSITEZ\nrefractionVector.z*=-1.0;\n#endif\n\n#ifdef SS_REFRACTIONMAP_3D\nrefractionVector.y=refractionVector.y*vRefractionInfos.w;\nvec3 refractionCoords=refractionVector;\nrefractionCoords=vec3(refractionMatrix*vec4(refractionCoords,0));\n#else\nvec3 vRefractionUVW=vec3(refractionMatrix*(view*vec4(vPositionW+refractionVector*vRefractionInfos.z,1.0)));\nvec2 refractionCoords=vRefractionUVW.xy/vRefractionUVW.z;\nrefractionCoords.y=1.0-refractionCoords.y;\n#endif\n#ifdef SS_LODINREFRACTIONALPHA\nfloat refractionLOD=getLodFromAlphaG(vRefractionMicrosurfaceInfos.x,alphaG,NdotVUnclamped);\n#else\nfloat refractionLOD=getLodFromAlphaG(vRefractionMicrosurfaceInfos.x,alphaG);\n#endif\n#ifdef LODBASEDMICROSFURACE\n\nrefractionLOD=refractionLOD*vRefractionMicrosurfaceInfos.y+vRefractionMicrosurfaceInfos.z;\n#ifdef SS_LODINREFRACTIONALPHA\n\n\n\n\n\n\n\n\n\nfloat automaticRefractionLOD=UNPACK_LOD(sampleRefraction(refractionSampler,refractionCoords).a);\nfloat requestedRefractionLOD=max(automaticRefractionLOD,refractionLOD);\n#else\nfloat requestedRefractionLOD=refractionLOD;\n#endif\nenvironmentRefraction=sampleRefractionLod(refractionSampler,refractionCoords,requestedRefractionLOD);\n#else\nfloat lodRefractionNormalized=saturate(refractionLOD/log2(vRefractionMicrosurfaceInfos.x));\nfloat lodRefractionNormalizedDoubled=lodRefractionNormalized*2.0;\nvec4 environmentRefractionMid=sampleRefraction(refractionSampler,refractionCoords);\nif(lodRefractionNormalizedDoubled<1.0){\nenvironmentRefraction=mix(\nsampleRefraction(refractionSamplerHigh,refractionCoords),\nenvironmentRefractionMid,\nlodRefractionNormalizedDoubled\n);\n}else{\nenvironmentRefraction=mix(\nenvironmentRefractionMid,\nsampleRefraction(refractionSamplerLow,refractionCoords),\nlodRefractionNormalizedDoubled-1.0\n);\n}\n#endif\n#ifdef SS_RGBDREFRACTION\nenvironmentRefraction.rgb=fromRGBD(environmentRefraction);\n#endif\n#ifdef SS_GAMMAREFRACTION\nenvironmentRefraction.rgb=toLinearSpace(environmentRefraction.rgb);\n#endif\n\nenvironmentRefraction.rgb*=vRefractionInfos.x;\n#endif\n\n#ifdef REFLECTION\nvec4 environmentRadiance=vec4(0.,0.,0.,0.);\nvec3 environmentIrradiance=vec3(0.,0.,0.);\n#ifdef ANISOTROPIC\nvec3 reflectionVector=computeReflectionCoords(vec4(vPositionW,1.0),anisotropicNormal);\n#else\nvec3 reflectionVector=computeReflectionCoords(vec4(vPositionW,1.0),normalW);\n#endif\n#ifdef REFLECTIONMAP_OPPOSITEZ\nreflectionVector.z*=-1.0;\n#endif\n\n#ifdef REFLECTIONMAP_3D\nvec3 reflectionCoords=reflectionVector;\n#else\nvec2 reflectionCoords=reflectionVector.xy;\n#ifdef REFLECTIONMAP_PROJECTION\nreflectionCoords/=reflectionVector.z;\n#endif\nreflectionCoords.y=1.0-reflectionCoords.y;\n#endif\n#if defined(LODINREFLECTIONALPHA) && !defined(REFLECTIONMAP_SKYBOX)\nfloat reflectionLOD=getLodFromAlphaG(vReflectionMicrosurfaceInfos.x,alphaG,NdotVUnclamped);\n#else\nfloat reflectionLOD=getLodFromAlphaG(vReflectionMicrosurfaceInfos.x,alphaG);\n#endif\n#ifdef LODBASEDMICROSFURACE\n\nreflectionLOD=reflectionLOD*vReflectionMicrosurfaceInfos.y+vReflectionMicrosurfaceInfos.z;\n#ifdef LODINREFLECTIONALPHA\n\n\n\n\n\n\n\n\n\nfloat automaticReflectionLOD=UNPACK_LOD(sampleReflection(reflectionSampler,reflectionCoords).a);\nfloat requestedReflectionLOD=max(automaticReflectionLOD,reflectionLOD);\n#else\nfloat requestedReflectionLOD=reflectionLOD;\n#endif\nenvironmentRadiance=sampleReflectionLod(reflectionSampler,reflectionCoords,requestedReflectionLOD);\n#else\nfloat lodReflectionNormalized=saturate(reflectionLOD/log2(vReflectionMicrosurfaceInfos.x));\nfloat lodReflectionNormalizedDoubled=lodReflectionNormalized*2.0;\nvec4 environmentSpecularMid=sampleReflection(reflectionSampler,reflectionCoords);\nif(lodReflectionNormalizedDoubled<1.0){\nenvironmentRadiance=mix(\nsampleReflection(reflectionSamplerHigh,reflectionCoords),\nenvironmentSpecularMid,\nlodReflectionNormalizedDoubled\n);\n}else{\nenvironmentRadiance=mix(\nenvironmentSpecularMid,\nsampleReflection(reflectionSamplerLow,reflectionCoords),\nlodReflectionNormalizedDoubled-1.0\n);\n}\n#endif\n#ifdef RGBDREFLECTION\nenvironmentRadiance.rgb=fromRGBD(environmentRadiance);\n#endif\n#ifdef GAMMAREFLECTION\nenvironmentRadiance.rgb=toLinearSpace(environmentRadiance.rgb);\n#endif\n\n#ifdef USESPHERICALFROMREFLECTIONMAP\n#if defined(NORMAL) && defined(USESPHERICALINVERTEX)\nenvironmentIrradiance=vEnvironmentIrradiance;\n#else\n#ifdef ANISOTROPIC\nvec3 irradianceVector=vec3(reflectionMatrix*vec4(anisotropicNormal,0)).xyz;\n#else\nvec3 irradianceVector=vec3(reflectionMatrix*vec4(normalW,0)).xyz;\n#endif\n#ifdef REFLECTIONMAP_OPPOSITEZ\nirradianceVector.z*=-1.0;\n#endif\nenvironmentIrradiance=computeEnvironmentIrradiance(irradianceVector);\n#endif\n#endif\n\nenvironmentRadiance.rgb*=vReflectionInfos.x;\nenvironmentRadiance.rgb*=vReflectionColor.rgb;\nenvironmentIrradiance*=vReflectionColor.rgb;\n#endif\n\nfloat reflectance=max(max(surfaceReflectivityColor.r,surfaceReflectivityColor.g),surfaceReflectivityColor.b);\nfloat reflectance90=fresnelGrazingReflectance(reflectance);\nvec3 specularEnvironmentR0=surfaceReflectivityColor.rgb;\nvec3 specularEnvironmentR90=vec3(1.0,1.0,1.0)*reflectance90;\n\n#ifdef SHEEN\nfloat sheenIntensity=vSheenColor.a;\n#ifdef SHEEN_TEXTURE\nvec4 sheenMapData=texture2D(sheenSampler,vSheenUV+uvOffset)*vSheenInfos.y;\nsheenIntensity*=sheenMapData.a;\n#endif\n#ifdef SHEEN_LINKWITHALBEDO\nfloat sheenFactor=pow5(1.0-sheenIntensity);\nvec3 sheenColor=baseColor.rgb*(1.0-sheenFactor);\nfloat sheenRoughness=sheenIntensity;\n\nsurfaceAlbedo.rgb*=sheenFactor;\n#else\nvec3 sheenColor=vSheenColor.rgb;\n#ifdef SHEEN_TEXTURE\nsheenColor.rgb*=toLinearSpace(sheenMapData.rgb);\n#endif\nfloat sheenRoughness=roughness;\n\nsheenIntensity*=(1.-reflectance);\n\nsheenColor*=sheenIntensity;\n#endif\n\n#if defined(REFLECTION)\nfloat sheenAlphaG=convertRoughnessToAverageSlope(sheenRoughness);\n#ifdef SPECULARAA\n\nsheenAlphaG+=AARoughnessFactors.y;\n#endif\nvec4 environmentSheenRadiance=vec4(0.,0.,0.,0.);\n\n#if defined(LODINREFLECTIONALPHA) && !defined(REFLECTIONMAP_SKYBOX)\nfloat sheenReflectionLOD=getLodFromAlphaG(vReflectionMicrosurfaceInfos.x,sheenAlphaG,NdotVUnclamped);\n#else\nfloat sheenReflectionLOD=getLodFromAlphaG(vReflectionMicrosurfaceInfos.x,sheenAlphaG);\n#endif\n#ifdef LODBASEDMICROSFURACE\n\nsheenReflectionLOD=sheenReflectionLOD*vReflectionMicrosurfaceInfos.y+vReflectionMicrosurfaceInfos.z;\nenvironmentSheenRadiance=sampleReflectionLod(reflectionSampler,reflectionCoords,sheenReflectionLOD);\n#else\nfloat lodSheenReflectionNormalized=saturate(sheenReflectionLOD/log2(vReflectionMicrosurfaceInfos.x));\nfloat lodSheenReflectionNormalizedDoubled=lodSheenReflectionNormalized*2.0;\nvec4 environmentSheenMid=sampleReflection(reflectionSampler,reflectionCoords);\nif(lodSheenReflectionNormalizedDoubled<1.0){\nenvironmentSheenRadiance=mix(\nsampleReflection(reflectionSamplerHigh,reflectionCoords),\nenvironmentSheenMid,\nlodSheenReflectionNormalizedDoubled\n);\n}else{\nenvironmentSheenRadiance=mix(\nenvironmentSheenMid,\nsampleReflection(reflectionSamplerLow,reflectionCoords),\nlodSheenReflectionNormalizedDoubled-1.0\n);\n}\n#endif\n#ifdef RGBDREFLECTION\nenvironmentSheenRadiance.rgb=fromRGBD(environmentSheenRadiance);\n#endif\n#ifdef GAMMAREFLECTION\nenvironmentSheenRadiance.rgb=toLinearSpace(environmentSheenRadiance.rgb);\n#endif\n\nenvironmentSheenRadiance.rgb*=vReflectionInfos.x;\nenvironmentSheenRadiance.rgb*=vReflectionColor.rgb;\n#endif\n#endif\n\n#ifdef CLEARCOAT\n\nfloat clearCoatIntensity=vClearCoatParams.x;\nfloat clearCoatRoughness=vClearCoatParams.y;\n#ifdef CLEARCOAT_TEXTURE\nvec2 clearCoatMapData=texture2D(clearCoatSampler,vClearCoatUV+uvOffset).rg*vClearCoatInfos.y;\nclearCoatIntensity*=clearCoatMapData.x;\nclearCoatRoughness*=clearCoatMapData.y;\n#endif\n#ifdef CLEARCOAT_TINT\nvec3 clearCoatColor=vClearCoatTintParams.rgb;\nfloat clearCoatThickness=vClearCoatTintParams.a;\n#ifdef CLEARCOAT_TINT_TEXTURE\nvec4 clearCoatTintMapData=texture2D(clearCoatTintSampler,vClearCoatTintUV+uvOffset);\nclearCoatColor*=toLinearSpace(clearCoatTintMapData.rgb);\nclearCoatThickness*=clearCoatTintMapData.a;\n#endif\nclearCoatColor=computeColorAtDistanceInMedia(clearCoatColor,clearCoatColorAtDistance);\n#endif\n\n\n\n\nvec3 specularEnvironmentR0Updated=getR0RemappedForClearCoat(specularEnvironmentR0);\nspecularEnvironmentR0=mix(specularEnvironmentR0,specularEnvironmentR0Updated,clearCoatIntensity);\n#ifdef CLEARCOAT_BUMP\n#ifdef NORMALXYSCALE\nfloat clearCoatNormalScale=1.0;\n#else\nfloat clearCoatNormalScale=vClearCoatBumpInfos.y;\n#endif\n#if defined(TANGENT) && defined(NORMAL)\nmat3 TBNClearCoat=vTBN;\n#else\nmat3 TBNClearCoat=cotangent_frame(clearCoatNormalW*clearCoatNormalScale,vPositionW,vClearCoatBumpUV,vClearCoatTangentSpaceParams);\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\nclearCoatNormalW=normalize(texture2D(clearCoatBumpSampler,vClearCoatBumpUV+uvOffset).xyz*2.0-1.0);\nclearCoatNormalW=normalize(mat3(normalMatrix)*clearCoatNormalW);\n#else\nclearCoatNormalW=perturbNormal(TBN,vClearCoatBumpUV+uvOffset,clearCoatBumpSampler,vClearCoatBumpInfos.y);\n#endif\n#endif\n#if defined(FORCENORMALFORWARD) && defined(NORMAL)\nclearCoatNormalW*=sign(dot(clearCoatNormalW,faceNormal));\n#endif\n#if defined(TWOSIDEDLIGHTING) && defined(NORMAL)\nclearCoatNormalW=gl_FrontFacing ? clearCoatNormalW : -clearCoatNormalW;\n#endif\n\nvec2 clearCoatAARoughnessFactors=getAARoughnessFactors(clearCoatNormalW.xyz);\n\nfloat clearCoatNdotVUnclamped=dot(clearCoatNormalW,viewDirectionW);\n\nfloat clearCoatNdotV=absEps(clearCoatNdotVUnclamped);\n\n#if defined(REFLECTION)\nfloat clearCoatAlphaG=convertRoughnessToAverageSlope(clearCoatRoughness);\n#ifdef SPECULARAA\n\nclearCoatAlphaG+=clearCoatAARoughnessFactors.y;\n#endif\nvec4 environmentClearCoatRadiance=vec4(0.,0.,0.,0.);\nvec3 clearCoatReflectionVector=computeReflectionCoords(vec4(vPositionW,1.0),clearCoatNormalW);\n#ifdef REFLECTIONMAP_OPPOSITEZ\nclearCoatReflectionVector.z*=-1.0;\n#endif\n\n#ifdef REFLECTIONMAP_3D\nvec3 clearCoatReflectionCoords=clearCoatReflectionVector;\n#else\nvec2 clearCoatReflectionCoords=clearCoatReflectionVector.xy;\n#ifdef REFLECTIONMAP_PROJECTION\nclearCoatReflectionCoords/=clearCoatReflectionVector.z;\n#endif\nclearCoatReflectionCoords.y=1.0-clearCoatReflectionCoords.y;\n#endif\n#if defined(LODINREFLECTIONALPHA) && !defined(REFLECTIONMAP_SKYBOX)\nfloat clearCoatReflectionLOD=getLodFromAlphaG(vReflectionMicrosurfaceInfos.x,clearCoatAlphaG,clearCoatNdotVUnclamped);\n#else\nfloat clearCoatReflectionLOD=getLodFromAlphaG(vReflectionMicrosurfaceInfos.x,clearCoatAlphaG);\n#endif\n#ifdef LODBASEDMICROSFURACE\n\nclearCoatReflectionLOD=clearCoatReflectionLOD*vReflectionMicrosurfaceInfos.y+vReflectionMicrosurfaceInfos.z;\nfloat requestedClearCoatReflectionLOD=clearCoatReflectionLOD;\nenvironmentClearCoatRadiance=sampleReflectionLod(reflectionSampler,clearCoatReflectionCoords,requestedClearCoatReflectionLOD);\n#else\nfloat lodClearCoatReflectionNormalized=saturate(clearCoatReflectionLOD/log2(vReflectionMicrosurfaceInfos.x));\nfloat lodClearCoatReflectionNormalizedDoubled=lodClearCoatReflectionNormalized*2.0;\nvec4 environmentClearCoatMid=sampleReflection(reflectionSampler,reflectionCoords);\nif(lodClearCoatReflectionNormalizedDoubled<1.0){\nenvironmentClearCoatRadiance=mix(\nsampleReflection(reflectionSamplerHigh,clearCoatReflectionCoords),\nenvironmentClearCoatMid,\nlodClearCoatReflectionNormalizedDoubled\n);\n}else{\nenvironmentClearCoatRadiance=mix(\nenvironmentClearCoatMid,\nsampleReflection(reflectionSamplerLow,clearCoatReflectionCoords),\nlodClearCoatReflectionNormalizedDoubled-1.0\n);\n}\n#endif\n#ifdef RGBDREFLECTION\nenvironmentClearCoatRadiance.rgb=fromRGBD(environmentClearCoatRadiance);\n#endif\n#ifdef GAMMAREFLECTION\nenvironmentClearCoatRadiance.rgb=toLinearSpace(environmentClearCoatRadiance.rgb);\n#endif\n#ifdef CLEARCOAT_TINT\n\nvec3 clearCoatVRefract=-refract(vPositionW,clearCoatNormalW,vClearCoatRefractionParams.y);\n\nfloat clearCoatNdotVRefract=absEps(dot(clearCoatNormalW,clearCoatVRefract));\nvec3 absorption=vec3(0.);\n#endif\n\nenvironmentClearCoatRadiance.rgb*=vReflectionInfos.x;\nenvironmentClearCoatRadiance.rgb*=vReflectionColor.rgb;\n#endif\n#endif\n\n#if defined(ENVIRONMENTBRDF)\n\nvec3 environmentBrdf=getBRDFLookup(NdotV,roughness,environmentBrdfSampler);\n#ifdef MS_BRDF_ENERGY_CONSERVATION\nvec3 energyConservationFactor=getEnergyConservationFactor(specularEnvironmentR0,environmentBrdf);\n#endif\n#endif\n\n#ifdef SUBSURFACE\n#ifdef SS_REFRACTION\nfloat refractionIntensity=vSubSurfaceIntensity.x;\n#ifdef SS_LINKREFRACTIONTOTRANSPARENCY\nrefractionIntensity*=(1.0-alpha);\n\nalpha=1.0;\n#endif\n#endif\n#ifdef SS_TRANSLUCENCY\nfloat translucencyIntensity=vSubSurfaceIntensity.y;\n#endif\n#ifdef SS_SCATTERING\nfloat scatteringIntensity=vSubSurfaceIntensity.z;\n#endif\n#ifdef SS_THICKNESSANDMASK_TEXTURE\nvec4 thicknessMap=texture2D(thicknessSampler,vThicknessUV+uvOffset);\nfloat thickness=thicknessMap.r*vThicknessParam.y+vThicknessParam.x;\n#ifdef SS_MASK_FROM_THICKNESS_TEXTURE\n#ifdef SS_REFRACTION\nrefractionIntensity*=thicknessMap.g;\n#endif\n#ifdef SS_TRANSLUCENCY\ntranslucencyIntensity*=thicknessMap.b;\n#endif\n#ifdef SS_SCATTERING\nscatteringIntensity*=thicknessMap.a;\n#endif\n#endif\n#else\nfloat thickness=vThicknessParam.y;\n#endif\n#ifdef SS_TRANSLUCENCY\nthickness=maxEps(thickness);\nvec3 transmittance=transmittanceBRDF_Burley(vTintColor.rgb,vDiffusionDistance,thickness);\ntransmittance*=translucencyIntensity;\n#endif\n#endif\n\n\nvec3 diffuseBase=vec3(0.,0.,0.);\n#ifdef SPECULARTERM\nvec3 specularBase=vec3(0.,0.,0.);\n#endif\n#ifdef CLEARCOAT\nvec3 clearCoatBase=vec3(0.,0.,0.);\n#endif\n#ifdef SHEEN\nvec3 sheenBase=vec3(0.,0.,0.);\n#endif\n#ifdef LIGHTMAP\nvec3 lightmapColor=texture2D(lightmapSampler,vLightmapUV+uvOffset).rgb;\n#ifdef GAMMALIGHTMAP\nlightmapColor=toLinearSpace(lightmapColor);\n#endif\nlightmapColor*=vLightmapInfos.y;\n#endif\n\npreLightingInfo preInfo;\nlightingInfo info;\nfloat shadow=1.;\n#include<lightFragment>[0..maxSimultaneousLights]\n\n#if defined(ENVIRONMENTBRDF) && !defined(REFLECTIONMAP_SKYBOX)\nvec3 specularEnvironmentReflectance=getReflectanceFromBRDFLookup(specularEnvironmentR0,environmentBrdf);\n#ifdef RADIANCEOCCLUSION\n#ifdef AMBIENTINGRAYSCALE\nfloat ambientMonochrome=ambientOcclusionColor.r;\n#else\nfloat ambientMonochrome=getLuminance(ambientOcclusionColor);\n#endif\nfloat seo=environmentRadianceOcclusion(ambientMonochrome,NdotVUnclamped);\nspecularEnvironmentReflectance*=seo;\n#endif\n#ifdef HORIZONOCCLUSION\n#ifdef BUMP\n#ifdef REFLECTIONMAP_3D\nfloat eho=environmentHorizonOcclusion(-viewDirectionW,normalW);\nspecularEnvironmentReflectance*=eho;\n#endif\n#endif\n#endif\n#else\n\nvec3 specularEnvironmentReflectance=getReflectanceFromAnalyticalBRDFLookup_Jones(NdotV,specularEnvironmentR0,specularEnvironmentR90,sqrt(microSurface));\n#endif\n\n#if defined(SHEEN) && defined(REFLECTION)\nvec3 sheenEnvironmentReflectance=getSheenReflectanceFromBRDFLookup(sheenColor,environmentBrdf);\n#ifdef RADIANCEOCCLUSION\nsheenEnvironmentReflectance*=seo;\n#endif\n#ifdef HORIZONOCCLUSION\n#ifdef BUMP\n#ifdef REFLECTIONMAP_3D\nsheenEnvironmentReflectance*=eho;\n#endif\n#endif\n#endif\n#endif\n\n#ifdef CLEARCOAT\n#if defined(ENVIRONMENTBRDF) && !defined(REFLECTIONMAP_SKYBOX)\n\nvec3 environmentClearCoatBrdf=getBRDFLookup(clearCoatNdotV,clearCoatRoughness,environmentBrdfSampler);\nvec3 clearCoatEnvironmentReflectance=getReflectanceFromBRDFLookup(vec3(vClearCoatRefractionParams.x),environmentClearCoatBrdf);\n#ifdef RADIANCEOCCLUSION\nfloat clearCoatSeo=environmentRadianceOcclusion(ambientMonochrome,clearCoatNdotVUnclamped);\nclearCoatEnvironmentReflectance*=clearCoatSeo;\n#endif\n#ifdef HORIZONOCCLUSION\n#ifdef BUMP\n#ifdef REFLECTIONMAP_3D\nfloat clearCoatEho=environmentHorizonOcclusion(-viewDirectionW,clearCoatNormalW);\nclearCoatEnvironmentReflectance*=clearCoatEho;\n#endif\n#endif\n#endif\n#else\n\nvec3 clearCoatEnvironmentReflectance=getReflectanceFromAnalyticalBRDFLookup_Jones(clearCoatNdotV,vec3(1.),vec3(1.),sqrt(1.-clearCoatRoughness));\n#endif\nclearCoatEnvironmentReflectance*=clearCoatIntensity;\n#ifdef CLEARCOAT_TINT\n\nabsorption=computeClearCoatAbsorption(clearCoatNdotVRefract,clearCoatNdotVRefract,clearCoatColor,clearCoatThickness,clearCoatIntensity);\n#ifdef REFLECTION\nenvironmentIrradiance*=absorption;\n#endif\n#ifdef SHEEN\nsheenEnvironmentReflectance*=absorption;\n#endif\nspecularEnvironmentReflectance*=absorption;\n#endif\n\nfloat fresnelIBLClearCoat=fresnelSchlickGGX(clearCoatNdotV,vClearCoatRefractionParams.x,CLEARCOATREFLECTANCE90);\nfresnelIBLClearCoat*=clearCoatIntensity;\nfloat conservationFactor=(1.-fresnelIBLClearCoat);\n#ifdef REFLECTION\nenvironmentIrradiance*=conservationFactor;\n#endif\n#ifdef SHEEN\nsheenEnvironmentReflectance*=(conservationFactor*conservationFactor);\n#endif\nspecularEnvironmentReflectance*=(conservationFactor*conservationFactor);\n#endif\n\n#ifdef SS_REFRACTION\nvec3 refractionTransmittance=vec3(refractionIntensity);\n#ifdef SS_THICKNESSANDMASK_TEXTURE\nvec3 volumeAlbedo=computeColorAtDistanceInMedia(vTintColor.rgb,vTintColor.w);\n\n\n\n\n\nrefractionTransmittance*=cocaLambert(volumeAlbedo,thickness);\n#elif defined(SS_LINKREFRACTIONTOTRANSPARENCY)\n\nfloat maxChannel=max(max(surfaceAlbedo.r,surfaceAlbedo.g),surfaceAlbedo.b);\nvec3 volumeAlbedo=saturate(maxChannel*surfaceAlbedo);\n\nenvironmentRefraction.rgb*=volumeAlbedo;\n#else\n\nvec3 volumeAlbedo=computeColorAtDistanceInMedia(vTintColor.rgb,vTintColor.w);\nrefractionTransmittance*=cocaLambert(volumeAlbedo,vThicknessParam.y);\n#endif\n\nsurfaceAlbedo*=(1.-refractionIntensity);\n\nenvironmentIrradiance*=(1.-refractionIntensity);\n\nvec3 bounceSpecularEnvironmentReflectance=(2.0*specularEnvironmentReflectance)/(1.0+specularEnvironmentReflectance);\nspecularEnvironmentReflectance=mix(bounceSpecularEnvironmentReflectance,specularEnvironmentReflectance,refractionIntensity);\n\nrefractionTransmittance*=1.0-specularEnvironmentReflectance;\n#endif\n\n#if defined(REFLECTION) && defined(USESPHERICALFROMREFLECTIONMAP) && defined(SS_TRANSLUCENCY)\n#if defined(USESPHERICALINVERTEX)\nvec3 irradianceVector=vec3(reflectionMatrix*vec4(normalW,0)).xyz;\n#ifdef REFLECTIONMAP_OPPOSITEZ\nirradianceVector.z*=-1.0;\n#endif\n#endif\nvec3 refractionIrradiance=computeEnvironmentIrradiance(-irradianceVector);\nrefractionIrradiance*=transmittance;\n#endif\n\n\n\n#ifndef METALLICWORKFLOW\nsurfaceAlbedo.rgb=(1.-reflectance)*surfaceAlbedo.rgb;\n#endif\n\n#ifdef REFLECTION\nvec3 finalIrradiance=environmentIrradiance;\n#if defined(USESPHERICALFROMREFLECTIONMAP) && defined(SS_TRANSLUCENCY)\nfinalIrradiance+=refractionIrradiance;\n#endif\nfinalIrradiance*=surfaceAlbedo.rgb;\n#endif\n\n#ifdef SPECULARTERM\nvec3 finalSpecular=specularBase;\nfinalSpecular=max(finalSpecular,0.0);\n\nvec3 finalSpecularScaled=finalSpecular*vLightingIntensity.x*vLightingIntensity.w;\n#if defined(ENVIRONMENTBRDF) && defined(MS_BRDF_ENERGY_CONSERVATION)\nfinalSpecularScaled*=energyConservationFactor;\n#endif\n#endif\n\n#ifdef REFLECTION\nvec3 finalRadiance=environmentRadiance.rgb;\nfinalRadiance*=specularEnvironmentReflectance;\n\nvec3 finalRadianceScaled=finalRadiance*vLightingIntensity.z;\n#if defined(ENVIRONMENTBRDF) && defined(MS_BRDF_ENERGY_CONSERVATION)\nfinalRadianceScaled*=energyConservationFactor;\n#endif\n#endif\n\n#ifdef SS_REFRACTION\nvec3 finalRefraction=environmentRefraction.rgb;\nfinalRefraction*=refractionTransmittance;\n#endif\n\n#ifdef CLEARCOAT\nvec3 finalClearCoat=clearCoatBase;\nfinalClearCoat=max(finalClearCoat,0.0);\n\nvec3 finalClearCoatScaled=finalClearCoat*vLightingIntensity.x*vLightingIntensity.w;\n#if defined(ENVIRONMENTBRDF) && defined(MS_BRDF_ENERGY_CONSERVATION)\nfinalClearCoatScaled*=energyConservationFactor;\n#endif\n\n#ifdef REFLECTION\nvec3 finalClearCoatRadiance=environmentClearCoatRadiance.rgb;\nfinalClearCoatRadiance*=clearCoatEnvironmentReflectance;\n\nvec3 finalClearCoatRadianceScaled=finalClearCoatRadiance*vLightingIntensity.z;\n#endif\n#ifdef SS_REFRACTION\nfinalRefraction*=(conservationFactor*conservationFactor);\n#ifdef CLEARCOAT_TINT\nfinalRefraction*=absorption;\n#endif\n#endif\n#endif\n\n#ifdef SHEEN\nvec3 finalSheen=sheenBase*sheenColor;\nfinalSheen=max(finalSheen,0.0);\nvec3 finalSheenScaled=finalSheen*vLightingIntensity.x*vLightingIntensity.w;\n\n\n\n\n\n#ifdef REFLECTION\nvec3 finalSheenRadiance=environmentSheenRadiance.rgb;\nfinalSheenRadiance*=sheenEnvironmentReflectance;\n\nvec3 finalSheenRadianceScaled=finalSheenRadiance*vLightingIntensity.z;\n#endif\n#endif\n\n#ifdef ALPHABLEND\nfloat luminanceOverAlpha=0.0;\n#if defined(REFLECTION) && defined(RADIANCEOVERALPHA)\nluminanceOverAlpha+=getLuminance(finalRadianceScaled);\n#if defined(CLEARCOAT)\nluminanceOverAlpha+=getLuminance(finalClearCoatRadianceScaled);\n#endif\n#endif\n#if defined(SPECULARTERM) && defined(SPECULAROVERALPHA)\nluminanceOverAlpha+=getLuminance(finalSpecularScaled);\n#endif\n#if defined(CLEARCOAT) && defined(CLEARCOATOVERALPHA)\nluminanceOverAlpha+=getLuminance(finalClearCoatScaled);\n#endif\n#if defined(RADIANCEOVERALPHA) || defined(SPECULAROVERALPHA)\nalpha=saturate(alpha+luminanceOverAlpha*luminanceOverAlpha);\n#endif\n#endif\n#endif\n\n\nvec3 finalDiffuse=diffuseBase;\nfinalDiffuse*=surfaceAlbedo.rgb;\nfinalDiffuse=max(finalDiffuse,0.0);\n\nvec3 finalAmbient=vAmbientColor;\nfinalAmbient*=surfaceAlbedo.rgb;\n\nvec3 finalEmissive=vEmissiveColor;\n#ifdef EMISSIVE\nvec3 emissiveColorTex=texture2D(emissiveSampler,vEmissiveUV+uvOffset).rgb;\nfinalEmissive*=toLinearSpace(emissiveColorTex.rgb);\nfinalEmissive*=vEmissiveInfos.y;\n#endif\n\n#ifdef AMBIENT\nvec3 ambientOcclusionForDirectDiffuse=mix(vec3(1.),ambientOcclusionColor,vAmbientInfos.w);\n#else\nvec3 ambientOcclusionForDirectDiffuse=ambientOcclusionColor;\n#endif\n\n\n\nvec4 finalColor=vec4(\nfinalAmbient*ambientOcclusionColor +\nfinalDiffuse*ambientOcclusionForDirectDiffuse*vLightingIntensity.x +\n#ifndef UNLIT\n#ifdef REFLECTION\nfinalIrradiance*ambientOcclusionColor*vLightingIntensity.z +\n#endif\n#ifdef SPECULARTERM\n\n\nfinalSpecularScaled +\n#endif\n#ifdef CLEARCOAT\n\n\nfinalClearCoatScaled +\n#endif\n#ifdef SHEEN\n\n\nfinalSheenScaled +\n#endif\n#ifdef REFLECTION\n\n\nfinalRadianceScaled +\n#ifdef CLEARCOAT\n\n\nfinalClearCoatRadianceScaled +\n#endif\n#ifdef SHEEN\n\n\nfinalSheenRadianceScaled +\n#endif\n#endif\n#ifdef SS_REFRACTION\nfinalRefraction*vLightingIntensity.z +\n#endif\n#endif\nfinalEmissive*vLightingIntensity.y,\nalpha);\n\n#ifdef LIGHTMAP\n#ifndef LIGHTMAPEXCLUDED\n#ifdef USELIGHTMAPASSHADOWMAP\nfinalColor.rgb*=lightmapColor;\n#else\nfinalColor.rgb+=lightmapColor;\n#endif\n#endif\n#endif\n#define CUSTOM_FRAGMENT_BEFORE_FOG\n\nfinalColor=max(finalColor,0.0);\n#include<logDepthFragment>\n#include<fogFragment>(color,finalColor)\n#ifdef IMAGEPROCESSINGPOSTPROCESS\n\n\nfinalColor.rgb=clamp(finalColor.rgb,0.,30.0);\n#else\n\nfinalColor=applyImageProcessing(finalColor);\n#endif\nfinalColor.a*=visibility;\n#ifdef PREMULTIPLYALPHA\n\nfinalColor.rgb*=finalColor.a;\n#endif\n#define CUSTOM_FRAGMENT_BEFORE_FRAGCOLOR\ngl_FragColor=finalColor;\n#include<pbrDebug>\n}\n",jt.a.IncludesShadersStore.pbrVertexDeclaration="uniform mat4 view;\nuniform mat4 viewProjection;\n#ifdef ALBEDO\nuniform mat4 albedoMatrix;\nuniform vec2 vAlbedoInfos;\n#endif\n#ifdef AMBIENT\nuniform mat4 ambientMatrix;\nuniform vec4 vAmbientInfos;\n#endif\n#ifdef OPACITY\nuniform mat4 opacityMatrix;\nuniform vec2 vOpacityInfos;\n#endif\n#ifdef EMISSIVE\nuniform vec2 vEmissiveInfos;\nuniform mat4 emissiveMatrix;\n#endif\n#ifdef LIGHTMAP\nuniform vec2 vLightmapInfos;\nuniform mat4 lightmapMatrix;\n#endif\n#ifdef REFLECTIVITY\nuniform vec3 vReflectivityInfos;\nuniform mat4 reflectivityMatrix;\n#endif\n#ifdef MICROSURFACEMAP\nuniform vec2 vMicroSurfaceSamplerInfos;\nuniform mat4 microSurfaceSamplerMatrix;\n#endif\n#ifdef BUMP\nuniform vec3 vBumpInfos;\nuniform mat4 bumpMatrix;\n#endif\n#ifdef POINTSIZE\nuniform float pointSize;\n#endif\n\n#ifdef REFLECTION\nuniform vec2 vReflectionInfos;\nuniform mat4 reflectionMatrix;\n#endif\n\n#ifdef CLEARCOAT\n#ifdef CLEARCOAT_TEXTURE\nuniform vec2 vClearCoatInfos;\nuniform mat4 clearCoatMatrix;\n#endif\n#ifdef CLEARCOAT_BUMP\nuniform vec2 vClearCoatBumpInfos;\nuniform mat4 clearCoatBumpMatrix;\n#endif\n#ifdef CLEARCOAT_TINT_TEXTURE\nuniform vec2 vClearCoatTintInfos;\nuniform mat4 clearCoatTintMatrix;\n#endif\n#endif\n\n#ifdef ANISOTROPIC\n#ifdef ANISOTROPIC_TEXTURE\nuniform vec2 vAnisotropyInfos;\nuniform mat4 anisotropyMatrix;\n#endif\n#endif\n\n#ifdef SHEEN\n#ifdef SHEEN_TEXTURE\nuniform vec2 vSheenInfos;\nuniform mat4 sheenMatrix;\n#endif\n#endif\n\n#ifdef SUBSURFACE\n#ifdef SS_REFRACTION\nuniform vec4 vRefractionInfos;\nuniform mat4 refractionMatrix;\n#endif\n#ifdef SS_THICKNESSANDMASK_TEXTURE\nuniform vec2 vThicknessInfos;\nuniform mat4 thicknessMatrix;;\n#endif\n#endif\n",n(124),n(101),n(102),n(103),n(125),n(118),jt.a.ShadersStore.pbrVertexShader="precision highp float;\n#include<__decl__pbrVertex>\n#define CUSTOM_VERTEX_BEGIN\n\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\n#endif\n#ifdef TANGENT\nattribute vec4 tangent;\n#endif\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef MAINUV1\nvarying vec2 vMainUV1;\n#endif\n#ifdef MAINUV2\nvarying vec2 vMainUV2;\n#endif\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<helperFunctions>\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\n#if defined(ALBEDO) && ALBEDODIRECTUV == 0\nvarying vec2 vAlbedoUV;\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0\nvarying vec2 vAmbientUV;\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0\nvarying vec2 vOpacityUV;\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0\nvarying vec2 vEmissiveUV;\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0\nvarying vec2 vLightmapUV;\n#endif\n#if defined(REFLECTIVITY) && REFLECTIVITYDIRECTUV == 0\nvarying vec2 vReflectivityUV;\n#endif\n#if defined(MICROSURFACEMAP) && MICROSURFACEMAPDIRECTUV == 0\nvarying vec2 vMicroSurfaceSamplerUV;\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0\nvarying vec2 vBumpUV;\n#endif\n#ifdef CLEARCOAT\n#if defined(CLEARCOAT_TEXTURE) && CLEARCOAT_TEXTUREDIRECTUV == 0\nvarying vec2 vClearCoatUV;\n#endif\n#if defined(CLEARCOAT_BUMP) && CLEARCOAT_BUMPDIRECTUV == 0\nvarying vec2 vClearCoatBumpUV;\n#endif\n#if defined(CLEARCOAT_TINT_TEXTURE) && CLEARCOAT_TINT_TEXTUREDIRECTUV == 0\nvarying vec2 vClearCoatTintUV;\n#endif\n#endif\n#ifdef SHEEN\n#if defined(SHEEN_TEXTURE) && SHEEN_TEXTUREDIRECTUV == 0\nvarying vec2 vSheenUV;\n#endif\n#endif\n#ifdef ANISOTROPIC\n#if defined(ANISOTROPIC_TEXTURE) && ANISOTROPIC_TEXTUREDIRECTUV == 0\nvarying vec2 vAnisotropyUV;\n#endif\n#endif\n#ifdef SUBSURFACE\n#if defined(SS_THICKNESSANDMASK_TEXTURE) && SS_THICKNESSANDMASK_TEXTUREDIRECTUV == 0\nvarying vec2 vThicknessUV;\n#endif\n#endif\n\nvarying vec3 vPositionW;\n#if DEBUGMODE>0\nvarying vec4 vClipSpacePosition;\n#endif\n#ifdef NORMAL\nvarying vec3 vNormalW;\n#if defined(USESPHERICALFROMREFLECTIONMAP) && defined(USESPHERICALINVERTEX)\nvarying vec3 vEnvironmentIrradiance;\n#include<harmonicsFunctions>\n#endif\n#endif\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\n#include<bumpVertexDeclaration>\n#include<clipPlaneVertexDeclaration>\n#include<fogVertexDeclaration>\n#include<__decl__lightFragment>[0..maxSimultaneousLights]\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\nvarying vec3 vPositionUVW;\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvarying vec3 vDirectionW;\n#endif\n#include<logDepthDeclaration>\n#define CUSTOM_VERTEX_DEFINITIONS\nvoid main(void) {\n#define CUSTOM_VERTEX_MAIN_BEGIN\nvec3 positionUpdated=position;\n#ifdef NORMAL\nvec3 normalUpdated=normal;\n#endif\n#ifdef TANGENT\nvec4 tangentUpdated=tangent;\n#endif\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n#ifdef REFLECTIONMAP_SKYBOX\n#ifdef REFLECTIONMAP_SKYBOX_TRANSFORMED\nvPositionUVW=(reflectionMatrix*vec4(positionUpdated,1.0)).xyz;\n#else\nvPositionUVW=positionUpdated;\n#endif\n#endif\n#define CUSTOM_VERTEX_UPDATE_POSITION\n#define CUSTOM_VERTEX_UPDATE_NORMAL\n#include<instancesVertex>\n#include<bonesVertex>\n#ifdef MULTIVIEW\nif (gl_ViewID_OVR == 0u) {\ngl_Position=viewProjection*finalWorld*vec4(positionUpdated,1.0);\n} else {\ngl_Position=viewProjectionR*finalWorld*vec4(positionUpdated,1.0);\n}\n#else\ngl_Position=viewProjection*finalWorld*vec4(positionUpdated,1.0);\n#endif\n#if DEBUGMODE>0\nvClipSpacePosition=gl_Position;\n#endif\nvec4 worldPos=finalWorld*vec4(positionUpdated,1.0);\nvPositionW=vec3(worldPos);\n#ifdef NORMAL\nmat3 normalWorld=mat3(finalWorld);\n#ifdef NONUNIFORMSCALING\nnormalWorld=transposeMat3(inverseMat3(normalWorld));\n#endif\nvNormalW=normalize(normalWorld*normalUpdated);\n#if defined(USESPHERICALFROMREFLECTIONMAP) && defined(USESPHERICALINVERTEX)\nvec3 reflectionVector=vec3(reflectionMatrix*vec4(vNormalW,0)).xyz;\n#ifdef REFLECTIONMAP_OPPOSITEZ\nreflectionVector.z*=-1.0;\n#endif\nvEnvironmentIrradiance=computeEnvironmentIrradiance(reflectionVector);\n#endif\n#endif\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvDirectionW=normalize(vec3(finalWorld*vec4(positionUpdated,0.0)));\n#endif\n\n#ifndef UV1\nvec2 uv=vec2(0.,0.);\n#endif\n#ifndef UV2\nvec2 uv2=vec2(0.,0.);\n#endif\n#ifdef MAINUV1\nvMainUV1=uv;\n#endif\n#ifdef MAINUV2\nvMainUV2=uv2;\n#endif\n#if defined(ALBEDO) && ALBEDODIRECTUV == 0\nif (vAlbedoInfos.x == 0.)\n{\nvAlbedoUV=vec2(albedoMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvAlbedoUV=vec2(albedoMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(AMBIENT) && AMBIENTDIRECTUV == 0\nif (vAmbientInfos.x == 0.)\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvAmbientUV=vec2(ambientMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(OPACITY) && OPACITYDIRECTUV == 0\nif (vOpacityInfos.x == 0.)\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvOpacityUV=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(EMISSIVE) && EMISSIVEDIRECTUV == 0\nif (vEmissiveInfos.x == 0.)\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvEmissiveUV=vec2(emissiveMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(LIGHTMAP) && LIGHTMAPDIRECTUV == 0\nif (vLightmapInfos.x == 0.)\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvLightmapUV=vec2(lightmapMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(REFLECTIVITY) && REFLECTIVITYDIRECTUV == 0\nif (vReflectivityInfos.x == 0.)\n{\nvReflectivityUV=vec2(reflectivityMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvReflectivityUV=vec2(reflectivityMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(MICROSURFACEMAP) && MICROSURFACEMAPDIRECTUV == 0\nif (vMicroSurfaceSamplerInfos.x == 0.)\n{\nvMicroSurfaceSamplerUV=vec2(microSurfaceSamplerMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvMicroSurfaceSamplerUV=vec2(microSurfaceSamplerMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(BUMP) && BUMPDIRECTUV == 0\nif (vBumpInfos.x == 0.)\n{\nvBumpUV=vec2(bumpMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvBumpUV=vec2(bumpMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#ifdef CLEARCOAT\n#if defined(CLEARCOAT_TEXTURE) && CLEARCOAT_TEXTUREDIRECTUV == 0\nif (vClearCoatInfos.x == 0.)\n{\nvClearCoatUV=vec2(clearCoatMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvClearCoatUV=vec2(clearCoatMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(CLEARCOAT_BUMP) && CLEARCOAT_BUMPDIRECTUV == 0\nif (vClearCoatBumpInfos.x == 0.)\n{\nvClearCoatBumpUV=vec2(clearCoatBumpMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvClearCoatBumpUV=vec2(clearCoatBumpMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#if defined(CLEARCOAT_TINT_TEXTURE) && CLEARCOAT_TINT_TEXTUREDIRECTUV == 0\nif (vClearCoatTintInfos.x == 0.)\n{\nvClearCoatTintUV=vec2(clearCoatTintMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvClearCoatTintUV=vec2(clearCoatTintMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#endif\n#ifdef SHEEN\n#if defined(SHEEN_TEXTURE) && SHEEN_TEXTUREDIRECTUV == 0\nif (vSheenInfos.x == 0.)\n{\nvSheenUV=vec2(sheenMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvSheenUV=vec2(sheenMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#endif\n#ifdef ANISOTROPIC\n#if defined(ANISOTROPIC_TEXTURE) && ANISOTROPIC_TEXTUREDIRECTUV == 0\nif (vAnisotropyInfos.x == 0.)\n{\nvAnisotropyUV=vec2(anisotropyMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvAnisotropyUV=vec2(anisotropyMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#endif\n#ifdef SUBSURFACE\n#if defined(SS_THICKNESSANDMASK_TEXTURE) && SS_THICKNESSANDMASK_TEXTUREDIRECTUV == 0\nif (vThicknessInfos.x == 0.)\n{\nvThicknessUV=vec2(thicknessMatrix*vec4(uv,1.0,0.0));\n}\nelse\n{\nvThicknessUV=vec2(thicknessMatrix*vec4(uv2,1.0,0.0));\n}\n#endif\n#endif\n\n#include<bumpVertex>\n\n#include<clipPlaneVertex>\n\n#include<fogVertex>\n\n#include<shadowsVertex>[0..maxSimultaneousLights]\n\n#ifdef VERTEXCOLOR\nvColor=color;\n#endif\n\n#ifdef POINTSIZE\ngl_PointSize=pointSize;\n#endif\n\n#include<logDepthVertex>\n#define CUSTOM_VERTEX_MAIN_END\n}";var si=function(e){function t(){var t=e.call(this)||this;return t.PBR=!0,t.MAINUV1=!1,t.MAINUV2=!1,t.UV1=!1,t.UV2=!1,t.ALBEDO=!1,t.ALBEDODIRECTUV=0,t.VERTEXCOLOR=!1,t.AMBIENT=!1,t.AMBIENTDIRECTUV=0,t.AMBIENTINGRAYSCALE=!1,t.OPACITY=!1,t.VERTEXALPHA=!1,t.OPACITYDIRECTUV=0,t.OPACITYRGB=!1,t.ALPHATEST=!1,t.DEPTHPREPASS=!1,t.ALPHABLEND=!1,t.ALPHAFROMALBEDO=!1,t.ALPHATESTVALUE="0.5",t.SPECULAROVERALPHA=!1,t.RADIANCEOVERALPHA=!1,t.ALPHAFRESNEL=!1,t.LINEARALPHAFRESNEL=!1,t.PREMULTIPLYALPHA=!1,t.EMISSIVE=!1,t.EMISSIVEDIRECTUV=0,t.REFLECTIVITY=!1,t.REFLECTIVITYDIRECTUV=0,t.SPECULARTERM=!1,t.MICROSURFACEFROMREFLECTIVITYMAP=!1,t.MICROSURFACEAUTOMATIC=!1,t.LODBASEDMICROSFURACE=!1,t.MICROSURFACEMAP=!1,t.MICROSURFACEMAPDIRECTUV=0,t.METALLICWORKFLOW=!1,t.ROUGHNESSSTOREINMETALMAPALPHA=!1,t.ROUGHNESSSTOREINMETALMAPGREEN=!1,t.METALLNESSSTOREINMETALMAPBLUE=!1,t.AOSTOREINMETALMAPRED=!1,t.ENVIRONMENTBRDF=!1,t.ENVIRONMENTBRDF_RGBD=!1,t.NORMAL=!1,t.TANGENT=!1,t.BUMP=!1,t.BUMPDIRECTUV=0,t.OBJECTSPACE_NORMALMAP=!1,t.PARALLAX=!1,t.PARALLAXOCCLUSION=!1,t.NORMALXYSCALE=!0,t.LIGHTMAP=!1,t.LIGHTMAPDIRECTUV=0,t.USELIGHTMAPASSHADOWMAP=!1,t.GAMMALIGHTMAP=!1,t.REFLECTION=!1,t.REFLECTIONMAP_3D=!1,t.REFLECTIONMAP_SPHERICAL=!1,t.REFLECTIONMAP_PLANAR=!1,t.REFLECTIONMAP_CUBIC=!1,t.USE_LOCAL_REFLECTIONMAP_CUBIC=!1,t.REFLECTIONMAP_PROJECTION=!1,t.REFLECTIONMAP_SKYBOX=!1,t.REFLECTIONMAP_SKYBOX_TRANSFORMED=!1,t.REFLECTIONMAP_EXPLICIT=!1,t.REFLECTIONMAP_EQUIRECTANGULAR=!1,t.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,t.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,t.INVERTCUBICMAP=!1,t.USESPHERICALFROMREFLECTIONMAP=!1,t.SPHERICAL_HARMONICS=!1,t.USESPHERICALINVERTEX=!1,t.REFLECTIONMAP_OPPOSITEZ=!1,t.LODINREFLECTIONALPHA=!1,t.GAMMAREFLECTION=!1,t.RGBDREFLECTION=!1,t.RADIANCEOCCLUSION=!1,t.HORIZONOCCLUSION=!1,t.INSTANCES=!1,t.NUM_BONE_INFLUENCERS=0,t.BonesPerMesh=0,t.BONETEXTURE=!1,t.NONUNIFORMSCALING=!1,t.MORPHTARGETS=!1,t.MORPHTARGETS_NORMAL=!1,t.MORPHTARGETS_TANGENT=!1,t.NUM_MORPH_INFLUENCERS=0,t.IMAGEPROCESSING=!1,t.VIGNETTE=!1,t.VIGNETTEBLENDMODEMULTIPLY=!1,t.VIGNETTEBLENDMODEOPAQUE=!1,t.TONEMAPPING=!1,t.TONEMAPPING_ACES=!1,t.CONTRAST=!1,t.COLORCURVES=!1,t.COLORGRADING=!1,t.COLORGRADING3D=!1,t.SAMPLER3DGREENDEPTH=!1,t.SAMPLER3DBGRMAP=!1,t.IMAGEPROCESSINGPOSTPROCESS=!1,t.EXPOSURE=!1,t.MULTIVIEW=!1,t.USEPHYSICALLIGHTFALLOFF=!1,t.USEGLTFLIGHTFALLOFF=!1,t.TWOSIDEDLIGHTING=!1,t.SHADOWFLOAT=!1,t.CLIPPLANE=!1,t.CLIPPLANE2=!1,t.CLIPPLANE3=!1,t.CLIPPLANE4=!1,t.POINTSIZE=!1,t.FOG=!1,t.LOGARITHMICDEPTH=!1,t.FORCENORMALFORWARD=!1,t.SPECULARAA=!1,t.CLEARCOAT=!1,t.CLEARCOAT_DEFAULTIOR=!1,t.CLEARCOAT_TEXTURE=!1,t.CLEARCOAT_TEXTUREDIRECTUV=0,t.CLEARCOAT_BUMP=!1,t.CLEARCOAT_BUMPDIRECTUV=0,t.CLEARCOAT_TINT=!1,t.CLEARCOAT_TINT_TEXTURE=!1,t.CLEARCOAT_TINT_TEXTUREDIRECTUV=0,t.ANISOTROPIC=!1,t.ANISOTROPIC_TEXTURE=!1,t.ANISOTROPIC_TEXTUREDIRECTUV=0,t.BRDF_V_HEIGHT_CORRELATED=!1,t.MS_BRDF_ENERGY_CONSERVATION=!1,t.SHEEN=!1,t.SHEEN_TEXTURE=!1,t.SHEEN_TEXTUREDIRECTUV=0,t.SHEEN_LINKWITHALBEDO=!1,t.SUBSURFACE=!1,t.SS_REFRACTION=!1,t.SS_TRANSLUCENCY=!1,t.SS_SCATERRING=!1,t.SS_THICKNESSANDMASK_TEXTURE=!1,t.SS_THICKNESSANDMASK_TEXTUREDIRECTUV=0,t.SS_REFRACTIONMAP_3D=!1,t.SS_REFRACTIONMAP_OPPOSITEZ=!1,t.SS_LODINREFRACTIONALPHA=!1,t.SS_GAMMAREFRACTION=!1,t.SS_RGBDREFRACTION=!1,t.SS_LINKREFRACTIONTOTRANSPARENCY=!1,t.SS_MASK_FROM_THICKNESS_TEXTURE=!1,t.UNLIT=!1,t.DEBUGMODE=0,t.rebuild(),t}return l.d(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.ALPHATESTVALUE="0.5",this.PBR=!0},t}(Wr.a),ui=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i._directIntensity=1,i._emissiveIntensity=1,i._environmentIntensity=1,i._specularIntensity=1,i._lightingInfos=new o.y(i._directIntensity,i._emissiveIntensity,i._environmentIntensity,i._specularIntensity),i._disableBumpMap=!1,i._albedoTexture=null,i._ambientTexture=null,i._ambientTextureStrength=1,i._ambientTextureImpactOnAnalyticalLights=t.DEFAULT_AO_ON_ANALYTICAL_LIGHTS,i._opacityTexture=null,i._reflectionTexture=null,i._emissiveTexture=null,i._reflectivityTexture=null,i._metallicTexture=null,i._metallic=null,i._roughness=null,i._microSurfaceTexture=null,i._bumpTexture=null,i._lightmapTexture=null,i._ambientColor=new o.e(0,0,0),i._albedoColor=new o.e(1,1,1),i._reflectivityColor=new o.e(1,1,1),i._reflectionColor=new o.e(1,1,1),i._emissiveColor=new o.e(0,0,0),i._microSurface=.9,i._useLightmapAsShadowmap=!1,i._useHorizonOcclusion=!0,i._useRadianceOcclusion=!0,i._useAlphaFromAlbedoTexture=!1,i._useSpecularOverAlpha=!0,i._useMicroSurfaceFromReflectivityMapAlpha=!1,i._useRoughnessFromMetallicTextureAlpha=!0,i._useRoughnessFromMetallicTextureGreen=!1,i._useMetallnessFromMetallicTextureBlue=!1,i._useAmbientOcclusionFromMetallicTextureRed=!1,i._useAmbientInGrayScale=!1,i._useAutoMicroSurfaceFromReflectivityMap=!1,i._lightFalloff=t.LIGHTFALLOFF_PHYSICAL,i._useRadianceOverAlpha=!0,i._useObjectSpaceNormalMap=!1,i._useParallax=!1,i._useParallaxOcclusion=!1,i._parallaxScaleBias=.05,i._disableLighting=!1,i._maxSimultaneousLights=4,i._invertNormalMapX=!1,i._invertNormalMapY=!1,i._twoSidedLighting=!1,i._alphaCutOff=.4,i._forceAlphaTest=!1,i._useAlphaFresnel=!1,i._useLinearAlphaFresnel=!1,i._transparencyMode=null,i._environmentBRDFTexture=null,i._forceIrradianceInFragment=!1,i._forceNormalForward=!1,i._enableSpecularAntiAliasing=!1,i._imageProcessingObserver=null,i._renderTargets=new Gt.a(16),i._globalAmbientColor=new o.e(0,0,0),i._useLogarithmicDepth=!1,i._unlit=!1,i._debugMode=0,i.debugMode=0,i.debugLimit=-1,i.debugFactor=1,i.clearCoat=new ni(i._markAllSubMeshesAsTexturesDirty.bind(i)),i.anisotropy=new ri(i._markAllSubMeshesAsTexturesDirty.bind(i)),i.brdf=new ii(i._markAllSubMeshesAsMiscDirty.bind(i)),i.sheen=new oi(i._markAllSubMeshesAsTexturesDirty.bind(i)),i.subSurface=new ai(i._markAllSubMeshesAsTexturesDirty.bind(i)),i._attachImageProcessingConfiguration(null),i.getRenderTargetTextures=function(){return i._renderTargets.reset(),Kr.a.ReflectionTextureEnabled&&i._reflectionTexture&&i._reflectionTexture.isRenderTarget&&i._renderTargets.push(i._reflectionTexture),i.subSurface.fillRenderTargetTextures(i._renderTargets),i._renderTargets},i._environmentBRDFTexture=ti.GetEnvironmentBRDFTexture(r),i}return l.d(t,e),t.prototype._attachImageProcessingConfiguration=function(e){var t=this;e!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),this._imageProcessingConfiguration=e||this.getScene().imageProcessingConfiguration,this._imageProcessingConfiguration&&(this._imageProcessingObserver=this._imageProcessingConfiguration.onUpdateParameters.add(function(){t._markAllSubMeshesAsImageProcessingDirty()})))},Object.defineProperty(t.prototype,"hasRenderTargetTextures",{get:function(){return!!(Kr.a.ReflectionTextureEnabled&&this._reflectionTexture&&this._reflectionTexture.isRenderTarget)||this.subSurface.hasRenderTargetTextures()},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"PBRBaseMaterial"},Object.defineProperty(t.prototype,"useLogarithmicDepth",{get:function(){return this._useLogarithmicDepth},set:function(e){this._useLogarithmicDepth=e&&this.getScene().getEngine().getCaps().fragmentDepthSupported},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transparencyMode",{get:function(){return this._transparencyMode},set:function(e){this._transparencyMode!==e&&(this._transparencyMode=e,this._forceAlphaTest=e===t.PBRMATERIAL_ALPHATESTANDBLEND,this._markAllSubMeshesAsTexturesAndMiscDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_disableAlphaBlending",{get:function(){return this.subSurface.disableAlphaBlending||this._transparencyMode===t.PBRMATERIAL_OPAQUE||this._transparencyMode===t.PBRMATERIAL_ALPHATEST},enumerable:!0,configurable:!0}),t.prototype.needAlphaBlending=function(){return!this._disableAlphaBlending&&(this.alpha<1||null!=this._opacityTexture||this._shouldUseAlphaFromAlbedoTexture())},t.prototype.needAlphaBlendingForMesh=function(t){return!(this._disableAlphaBlending&&t.visibility>=1)&&e.prototype.needAlphaBlendingForMesh.call(this,t)},t.prototype.needAlphaTesting=function(){return!!this._forceAlphaTest||!this.subSurface.disableAlphaBlending&&null!=this._albedoTexture&&this._albedoTexture.hasAlpha&&(null==this._transparencyMode||this._transparencyMode===t.PBRMATERIAL_ALPHATEST)},t.prototype._shouldUseAlphaFromAlbedoTexture=function(){return null!=this._albedoTexture&&this._albedoTexture.hasAlpha&&this._useAlphaFromAlbedoTexture&&this._transparencyMode!==t.PBRMATERIAL_OPAQUE},t.prototype.getAlphaTestTexture=function(){return this._albedoTexture},t.prototype.isReadyForSubMesh=function(e,t,n){if(t.effect&&this.isFrozen&&this._wasPreviouslyReady)return!0;t._materialDefines||(t._materialDefines=new si);var r=t._materialDefines;if(!this.checkReadyOnEveryCall&&t.effect&&r._renderId===this.getScene().getRenderId())return!0;var i=this.getScene(),o=i.getEngine();if(r._areTexturesDirty&&i.texturesEnabled){if(this._albedoTexture&&Kr.a.DiffuseTextureEnabled&&!this._albedoTexture.isReadyOrNotBlocking())return!1;if(this._ambientTexture&&Kr.a.AmbientTextureEnabled&&!this._ambientTexture.isReadyOrNotBlocking())return!1;if(this._opacityTexture&&Kr.a.OpacityTextureEnabled&&!this._opacityTexture.isReadyOrNotBlocking())return!1;var a=this._getReflectionTexture();if(a&&Kr.a.ReflectionTextureEnabled&&!a.isReadyOrNotBlocking())return!1;if(this._lightmapTexture&&Kr.a.LightmapTextureEnabled&&!this._lightmapTexture.isReadyOrNotBlocking())return!1;if(this._emissiveTexture&&Kr.a.EmissiveTextureEnabled&&!this._emissiveTexture.isReadyOrNotBlocking())return!1;if(Kr.a.SpecularTextureEnabled){if(this._metallicTexture){if(!this._metallicTexture.isReadyOrNotBlocking())return!1}else if(this._reflectivityTexture&&!this._reflectivityTexture.isReadyOrNotBlocking())return!1;if(this._microSurfaceTexture&&!this._microSurfaceTexture.isReadyOrNotBlocking())return!1}if(o.getCaps().standardDerivatives&&this._bumpTexture&&Kr.a.BumpTextureEnabled&&!this._disableBumpMap&&!this._bumpTexture.isReady())return!1;if(this._environmentBRDFTexture&&Kr.a.ReflectionTextureEnabled&&!this._environmentBRDFTexture.isReady())return!1}if(!(this.subSurface.isReadyForSubMesh(r,i)&&this.clearCoat.isReadyForSubMesh(r,i,o,this._disableBumpMap)&&this.sheen.isReadyForSubMesh(r,i)&&this.anisotropy.isReadyForSubMesh(r,i)))return!1;if(r._areImageProcessingDirty&&this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.isReady())return!1;o.getCaps().standardDerivatives||e.isVerticesDataPresent(Mn.b.NormalKind)||(e.createNormals(!0),p.a.Warn("PBRMaterial: Normals have been created for the mesh: "+e.name));var s=t.effect,u=this._prepareEffect(e,r,this.onCompiled,this.onError,n);return u&&(this.allowShaderHotSwapping&&s&&!u.isReady()?(u=s,r.markAsUnprocessed()):(i.resetCachedMaterial(),t.setEffect(u,r),this.buildUniformLayout())),!(!t.effect||!t.effect.isReady()||(r._renderId=i.getRenderId(),this._wasPreviouslyReady=!0,0))},t.prototype.isMetallicWorkflow=function(){return!(null==this._metallic&&null==this._roughness&&!this._metallicTexture)},t.prototype._prepareEffect=function(e,t,n,r,i,o){if(void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=null),this._prepareDefines(e,t,i,o),!t.isDirty)return null;t.markAsProcessed();var a=this.getScene().getEngine(),s=new jt.c,u=0;t.USESPHERICALINVERTEX&&s.addFallback(u++,"USESPHERICALINVERTEX"),t.FOG&&s.addFallback(u,"FOG"),t.SPECULARAA&&s.addFallback(u,"SPECULARAA"),t.POINTSIZE&&s.addFallback(u,"POINTSIZE"),t.LOGARITHMICDEPTH&&s.addFallback(u,"LOGARITHMICDEPTH"),t.PARALLAX&&s.addFallback(u,"PARALLAX"),t.PARALLAXOCCLUSION&&s.addFallback(u++,"PARALLAXOCCLUSION"),u=ri.AddFallbacks(t,s,u),u=ri.AddFallbacks(t,s,u),u=ai.AddFallbacks(t,s,u),u=oi.AddFallbacks(t,s,u),t.ENVIRONMENTBRDF&&s.addFallback(u++,"ENVIRONMENTBRDF"),t.TANGENT&&s.addFallback(u++,"TANGENT"),t.BUMP&&s.addFallback(u++,"BUMP"),u=Hr.a.HandleFallbacksForShadows(t,s,this._maxSimultaneousLights,u++),t.SPECULARTERM&&s.addFallback(u++,"SPECULARTERM"),t.USESPHERICALFROMREFLECTIONMAP&&s.addFallback(u++,"USESPHERICALFROMREFLECTIONMAP"),t.LIGHTMAP&&s.addFallback(u++,"LIGHTMAP"),t.NORMAL&&s.addFallback(u++,"NORMAL"),t.AMBIENT&&s.addFallback(u++,"AMBIENT"),t.EMISSIVE&&s.addFallback(u++,"EMISSIVE"),t.VERTEXCOLOR&&s.addFallback(u++,"VERTEXCOLOR"),t.NUM_BONE_INFLUENCERS>0&&s.addCPUSkinningFallback(u++,e),t.MORPHTARGETS&&s.addFallback(u++,"MORPHTARGETS"),t.MULTIVIEW&&s.addFallback(0,"MULTIVIEW");var l=[Mn.b.PositionKind];t.NORMAL&&l.push(Mn.b.NormalKind),t.TANGENT&&l.push(Mn.b.TangentKind),t.UV1&&l.push(Mn.b.UVKind),t.UV2&&l.push(Mn.b.UV2Kind),t.VERTEXCOLOR&&l.push(Mn.b.ColorKind),Hr.a.PrepareAttributesForBones(l,e,t,s),Hr.a.PrepareAttributesForInstances(l,t),Hr.a.PrepareAttributesForMorphTargets(l,e,t);var c="pbr",h=["world","view","viewProjection","vEyePosition","vLightsType","vAmbientColor","vAlbedoColor","vReflectivityColor","vEmissiveColor","visibility","vReflectionColor","vFogInfos","vFogColor","pointSize","vAlbedoInfos","vAmbientInfos","vOpacityInfos","vReflectionInfos","vReflectionPosition","vReflectionSize","vEmissiveInfos","vReflectivityInfos","vMicroSurfaceSamplerInfos","vBumpInfos","vLightmapInfos","mBones","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","albedoMatrix","ambientMatrix","opacityMatrix","reflectionMatrix","emissiveMatrix","reflectivityMatrix","normalMatrix","microSurfaceSamplerMatrix","bumpMatrix","lightmapMatrix","vLightingIntensity","logarithmicDepthConstant","vSphericalX","vSphericalY","vSphericalZ","vSphericalXX_ZZ","vSphericalYY_ZZ","vSphericalZZ","vSphericalXY","vSphericalYZ","vSphericalZX","vSphericalL00","vSphericalL1_1","vSphericalL10","vSphericalL11","vSphericalL2_2","vSphericalL2_1","vSphericalL20","vSphericalL21","vSphericalL22","vReflectionMicrosurfaceInfos","vTangentSpaceParams","boneTextureWidth","vDebugMode"],d=["albedoSampler","reflectivitySampler","ambientSampler","emissiveSampler","bumpSampler","lightmapSampler","opacitySampler","reflectionSampler","reflectionSamplerLow","reflectionSamplerHigh","microSurfaceSampler","environmentBrdfSampler","boneSampler"],f=["Material","Scene"];ai.AddUniforms(h),ai.AddSamplers(d),ni.AddUniforms(h),ni.AddSamplers(d),ri.AddUniforms(h),ri.AddSamplers(d),oi.AddUniforms(h),oi.AddSamplers(d),vn.a&&(vn.a.PrepareUniforms(h,t),vn.a.PrepareSamplers(d,t)),Hr.a.PrepareUniformsAndSamplersList({uniformsNames:h,uniformBuffersNames:f,samplers:d,defines:t,maxSimultaneousLights:this._maxSimultaneousLights}),this.customShaderNameResolve&&(c=this.customShaderNameResolve(c,h,f,d,t));var p=t.toString();return a.createEffect(c,{attributes:l,uniformsNames:h,uniformBuffersNames:f,samplers:d,defines:p,fallbacks:s,onCompiled:n,onError:r,indexParameters:{maxSimultaneousLights:this._maxSimultaneousLights,maxSimultaneousMorphTargets:t.NUM_MORPH_INFLUENCERS}},a)},t.prototype._prepareDefines=function(e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null);var o=this.getScene(),a=o.getEngine();if(Hr.a.PrepareDefinesForLights(o,e,n,!0,this._maxSimultaneousLights,this._disableLighting),n._needNormals=!0,Hr.a.PrepareDefinesForMultiview(o,n),n.METALLICWORKFLOW=this.isMetallicWorkflow(),n._areTexturesDirty){if(n._needUVs=!1,o.texturesEnabled){o.getEngine().getCaps().textureLOD&&(n.LODBASEDMICROSFURACE=!0),this._albedoTexture&&Kr.a.DiffuseTextureEnabled?Hr.a.PrepareDefinesForMergedUV(this._albedoTexture,n,"ALBEDO"):n.ALBEDO=!1,this._ambientTexture&&Kr.a.AmbientTextureEnabled?(Hr.a.PrepareDefinesForMergedUV(this._ambientTexture,n,"AMBIENT"),n.AMBIENTINGRAYSCALE=this._useAmbientInGrayScale):n.AMBIENT=!1,this._opacityTexture&&Kr.a.OpacityTextureEnabled?(Hr.a.PrepareDefinesForMergedUV(this._opacityTexture,n,"OPACITY"),n.OPACITYRGB=this._opacityTexture.getAlphaFromRGB):n.OPACITY=!1;var s=this._getReflectionTexture();if(s&&Kr.a.ReflectionTextureEnabled){switch(n.REFLECTION=!0,n.GAMMAREFLECTION=s.gammaSpace,n.RGBDREFLECTION=s.isRGBD,n.REFLECTIONMAP_OPPOSITEZ=this.getScene().useRightHandedSystem?!s.invertZ:s.invertZ,n.LODINREFLECTIONALPHA=s.lodLevelInAlpha,s.coordinatesMode===Ge.a.INVCUBIC_MODE&&(n.INVERTCUBICMAP=!0),n.REFLECTIONMAP_3D=s.isCube,n.REFLECTIONMAP_CUBIC=!1,n.REFLECTIONMAP_EXPLICIT=!1,n.REFLECTIONMAP_PLANAR=!1,n.REFLECTIONMAP_PROJECTION=!1,n.REFLECTIONMAP_SKYBOX=!1,n.REFLECTIONMAP_SPHERICAL=!1,n.REFLECTIONMAP_EQUIRECTANGULAR=!1,n.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,n.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,n.REFLECTIONMAP_SKYBOX_TRANSFORMED=!1,s.coordinatesMode){case Ge.a.EXPLICIT_MODE:n.REFLECTIONMAP_EXPLICIT=!0;break;case Ge.a.PLANAR_MODE:n.REFLECTIONMAP_PLANAR=!0;break;case Ge.a.PROJECTION_MODE:n.REFLECTIONMAP_PROJECTION=!0;break;case Ge.a.SKYBOX_MODE:n.REFLECTIONMAP_SKYBOX=!0;break;case Ge.a.SPHERICAL_MODE:n.REFLECTIONMAP_SPHERICAL=!0;break;case Ge.a.EQUIRECTANGULAR_MODE:n.REFLECTIONMAP_EQUIRECTANGULAR=!0;break;case Ge.a.FIXED_EQUIRECTANGULAR_MODE:n.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!0;break;case Ge.a.FIXED_EQUIRECTANGULAR_MIRRORED_MODE:n.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!0;break;case Ge.a.CUBIC_MODE:case Ge.a.INVCUBIC_MODE:default:n.REFLECTIONMAP_CUBIC=!0,n.USE_LOCAL_REFLECTIONMAP_CUBIC=!!s.boundingBoxSize}s.coordinatesMode!==Ge.a.SKYBOX_MODE?s.sphericalPolynomial&&(n.USESPHERICALFROMREFLECTIONMAP=!0,n.USESPHERICALINVERTEX=!(this._forceIrradianceInFragment||o.getEngine().getCaps().maxVaryingVectors<=8)):n.REFLECTIONMAP_SKYBOX_TRANSFORMED=!s.getReflectionTextureMatrix().isIdentity()}else n.REFLECTION=!1,n.REFLECTIONMAP_3D=!1,n.REFLECTIONMAP_SPHERICAL=!1,n.REFLECTIONMAP_PLANAR=!1,n.REFLECTIONMAP_CUBIC=!1,n.USE_LOCAL_REFLECTIONMAP_CUBIC=!1,n.REFLECTIONMAP_PROJECTION=!1,n.REFLECTIONMAP_SKYBOX=!1,n.REFLECTIONMAP_SKYBOX_TRANSFORMED=!1,n.REFLECTIONMAP_EXPLICIT=!1,n.REFLECTIONMAP_EQUIRECTANGULAR=!1,n.REFLECTIONMAP_EQUIRECTANGULAR_FIXED=!1,n.REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED=!1,n.INVERTCUBICMAP=!1,n.USESPHERICALFROMREFLECTIONMAP=!1,n.USESPHERICALINVERTEX=!1,n.REFLECTIONMAP_OPPOSITEZ=!1,n.LODINREFLECTIONALPHA=!1,n.GAMMAREFLECTION=!1,n.RGBDREFLECTION=!1;this._lightmapTexture&&Kr.a.LightmapTextureEnabled?(Hr.a.PrepareDefinesForMergedUV(this._lightmapTexture,n,"LIGHTMAP"),n.USELIGHTMAPASSHADOWMAP=this._useLightmapAsShadowmap,n.GAMMALIGHTMAP=this._lightmapTexture.gammaSpace):n.LIGHTMAP=!1,this._emissiveTexture&&Kr.a.EmissiveTextureEnabled?Hr.a.PrepareDefinesForMergedUV(this._emissiveTexture,n,"EMISSIVE"):n.EMISSIVE=!1,Kr.a.SpecularTextureEnabled?(this._metallicTexture?(Hr.a.PrepareDefinesForMergedUV(this._metallicTexture,n,"REFLECTIVITY"),n.ROUGHNESSSTOREINMETALMAPALPHA=this._useRoughnessFromMetallicTextureAlpha,n.ROUGHNESSSTOREINMETALMAPGREEN=!this._useRoughnessFromMetallicTextureAlpha&&this._useRoughnessFromMetallicTextureGreen,n.METALLNESSSTOREINMETALMAPBLUE=this._useMetallnessFromMetallicTextureBlue,n.AOSTOREINMETALMAPRED=this._useAmbientOcclusionFromMetallicTextureRed):this._reflectivityTexture?(Hr.a.PrepareDefinesForMergedUV(this._reflectivityTexture,n,"REFLECTIVITY"),n.MICROSURFACEFROMREFLECTIVITYMAP=this._useMicroSurfaceFromReflectivityMapAlpha,n.MICROSURFACEAUTOMATIC=this._useAutoMicroSurfaceFromReflectivityMap):n.REFLECTIVITY=!1,this._microSurfaceTexture?Hr.a.PrepareDefinesForMergedUV(this._microSurfaceTexture,n,"MICROSURFACEMAP"):n.MICROSURFACEMAP=!1):(n.REFLECTIVITY=!1,n.MICROSURFACEMAP=!1),o.getEngine().getCaps().standardDerivatives&&this._bumpTexture&&Kr.a.BumpTextureEnabled&&!this._disableBumpMap?(Hr.a.PrepareDefinesForMergedUV(this._bumpTexture,n,"BUMP"),this._useParallax&&this._albedoTexture&&Kr.a.DiffuseTextureEnabled?(n.PARALLAX=!0,n.PARALLAXOCCLUSION=!!this._useParallaxOcclusion):n.PARALLAX=!1,n.OBJECTSPACE_NORMALMAP=this._useObjectSpaceNormalMap):n.BUMP=!1,this._environmentBRDFTexture&&Kr.a.ReflectionTextureEnabled?(n.ENVIRONMENTBRDF=!0,n.ENVIRONMENTBRDF_RGBD=this._environmentBRDFTexture.isRGBD):(n.ENVIRONMENTBRDF=!1,n.ENVIRONMENTBRDF_RGBD=!1),n.ALPHAFROMALBEDO=!!this._shouldUseAlphaFromAlbedoTexture()}n.SPECULAROVERALPHA=this._useSpecularOverAlpha,this._lightFalloff===t.LIGHTFALLOFF_STANDARD?(n.USEPHYSICALLIGHTFALLOFF=!1,n.USEGLTFLIGHTFALLOFF=!1):this._lightFalloff===t.LIGHTFALLOFF_GLTF?(n.USEPHYSICALLIGHTFALLOFF=!1,n.USEGLTFLIGHTFALLOFF=!0):(n.USEPHYSICALLIGHTFALLOFF=!0,n.USEGLTFLIGHTFALLOFF=!1),n.RADIANCEOVERALPHA=this._useRadianceOverAlpha,n.TWOSIDEDLIGHTING=!(this.backFaceCulling||!this._twoSidedLighting),n.ALPHATESTVALUE=this._alphaCutOff+(this._alphaCutOff%1==0?".":""),n.PREMULTIPLYALPHA=this.alphaMode===_.a.ALPHA_PREMULTIPLIED||this.alphaMode===_.a.ALPHA_PREMULTIPLIED_PORTERDUFF,n.ALPHABLEND=this.needAlphaBlendingForMesh(e),n.ALPHAFRESNEL=this._useAlphaFresnel||this._useLinearAlphaFresnel,n.LINEARALPHAFRESNEL=this._useLinearAlphaFresnel,n.SPECULARAA=o.getEngine().getCaps().standardDerivatives&&this._enableSpecularAntiAliasing}n._areImageProcessingDirty&&this._imageProcessingConfiguration&&this._imageProcessingConfiguration.prepareDefines(n),n.FORCENORMALFORWARD=this._forceNormalForward,n.RADIANCEOCCLUSION=this._useRadianceOcclusion,n.HORIZONOCCLUSION=this._useHorizonOcclusion,n._areMiscDirty&&(Hr.a.PrepareDefinesForMisc(e,o,this._useLogarithmicDepth,this.pointsCloud,this.fogEnabled,this._shouldTurnAlphaTestOn(e)||this._forceAlphaTest,n),n.UNLIT=this._unlit||(this.pointsCloud||this.wireframe)&&!e.isVerticesDataPresent(Mn.b.NormalKind),n.DEBUGMODE=this._debugMode),this.subSurface.prepareDefines(n,o),this.clearCoat.prepareDefines(n,o),this.anisotropy.prepareDefines(n,e,o),this.brdf.prepareDefines(n),this.sheen.prepareDefines(n,o),Hr.a.PrepareDefinesForFrameBoundValues(o,a,n,!!r,i),Hr.a.PrepareDefinesForAttributes(e,n,!0,!0,!0,this._transparencyMode!==t.PBRMATERIAL_OPAQUE)},t.prototype.forceCompilation=function(e,t,n){var r=this,i=l.a({clipPlane:!1},n),o=new si,a=this._prepareEffect(e,o,void 0,void 0,void 0,i.clipPlane);a.isReady()?t&&t(this):a.onCompileObservable.add(function(){t&&t(r)})},t.prototype.buildUniformLayout=function(){var e=this._uniformBuffer;e.addUniform("vAlbedoInfos",2),e.addUniform("vAmbientInfos",4),e.addUniform("vOpacityInfos",2),e.addUniform("vEmissiveInfos",2),e.addUniform("vLightmapInfos",2),e.addUniform("vReflectivityInfos",3),e.addUniform("vMicroSurfaceSamplerInfos",2),e.addUniform("vReflectionInfos",2),e.addUniform("vReflectionPosition",3),e.addUniform("vReflectionSize",3),e.addUniform("vBumpInfos",3),e.addUniform("albedoMatrix",16),e.addUniform("ambientMatrix",16),e.addUniform("opacityMatrix",16),e.addUniform("emissiveMatrix",16),e.addUniform("lightmapMatrix",16),e.addUniform("reflectivityMatrix",16),e.addUniform("microSurfaceSamplerMatrix",16),e.addUniform("bumpMatrix",16),e.addUniform("vTangentSpaceParams",2),e.addUniform("reflectionMatrix",16),e.addUniform("vReflectionColor",3),e.addUniform("vAlbedoColor",4),e.addUniform("vLightingIntensity",4),e.addUniform("vReflectionMicrosurfaceInfos",3),e.addUniform("pointSize",1),e.addUniform("vReflectivityColor",4),e.addUniform("vEmissiveColor",3),e.addUniform("visibility",1),ni.PrepareUniformBuffer(e),ri.PrepareUniformBuffer(e),oi.PrepareUniformBuffer(e),ai.PrepareUniformBuffer(e),e.create()},t.prototype.unbind=function(){if(this._activeEffect){var t=!1;this._reflectionTexture&&this._reflectionTexture.isRenderTarget&&(this._activeEffect.setTexture("reflection2DSampler",null),t=!0),this.subSurface.unbind(this._activeEffect)&&(t=!0),t&&this._markAllSubMeshesAsTexturesDirty()}e.prototype.unbind.call(this)},t.prototype.bindForSubMesh=function(e,n,r){var i=this.getScene(),a=r._materialDefines;if(a){var s=r.effect;if(s){this._activeEffect=s,a.INSTANCES||this.bindOnlyWorldMatrix(e),a.OBJECTSPACE_NORMALMAP&&(e.toNormalMatrix(this._normalMatrix),this.bindOnlyNormalMatrix(this._normalMatrix));var u=this._mustRebind(i,s,n.visibility);Hr.a.BindBonesParameters(n,this._activeEffect);var l=null,c=this._uniformBuffer;if(u){var h=i.getEngine();if(c.bindToEffect(s,"Material"),this.bindViewProjection(s),l=this._getReflectionTexture(),!c.useUbo||!this.isFrozen||!c.isSync){if(i.texturesEnabled){if(this._albedoTexture&&Kr.a.DiffuseTextureEnabled&&(c.updateFloat2("vAlbedoInfos",this._albedoTexture.coordinatesIndex,this._albedoTexture.level),Hr.a.BindTextureMatrix(this._albedoTexture,c,"albedo")),this._ambientTexture&&Kr.a.AmbientTextureEnabled&&(c.updateFloat4("vAmbientInfos",this._ambientTexture.coordinatesIndex,this._ambientTexture.level,this._ambientTextureStrength,this._ambientTextureImpactOnAnalyticalLights),Hr.a.BindTextureMatrix(this._ambientTexture,c,"ambient")),this._opacityTexture&&Kr.a.OpacityTextureEnabled&&(c.updateFloat2("vOpacityInfos",this._opacityTexture.coordinatesIndex,this._opacityTexture.level),Hr.a.BindTextureMatrix(this._opacityTexture,c,"opacity")),l&&Kr.a.ReflectionTextureEnabled){if(c.updateMatrix("reflectionMatrix",l.getReflectionTextureMatrix()),c.updateFloat2("vReflectionInfos",l.level,0),l.boundingBoxSize){var d=l;c.updateVector3("vReflectionPosition",d.boundingBoxPosition),c.updateVector3("vReflectionSize",d.boundingBoxSize)}var f=l.sphericalPolynomial;if(a.USESPHERICALFROMREFLECTIONMAP&&f)if(a.SPHERICAL_HARMONICS){var p=f.preScaledHarmonics;this._activeEffect.setVector3("vSphericalL00",p.l00),this._activeEffect.setVector3("vSphericalL1_1",p.l1_1),this._activeEffect.setVector3("vSphericalL10",p.l10),this._activeEffect.setVector3("vSphericalL11",p.l11),this._activeEffect.setVector3("vSphericalL2_2",p.l2_2),this._activeEffect.setVector3("vSphericalL2_1",p.l2_1),this._activeEffect.setVector3("vSphericalL20",p.l20),this._activeEffect.setVector3("vSphericalL21",p.l21),this._activeEffect.setVector3("vSphericalL22",p.l22)}else this._activeEffect.setFloat3("vSphericalX",f.x.x,f.x.y,f.x.z),this._activeEffect.setFloat3("vSphericalY",f.y.x,f.y.y,f.y.z),this._activeEffect.setFloat3("vSphericalZ",f.z.x,f.z.y,f.z.z),this._activeEffect.setFloat3("vSphericalXX_ZZ",f.xx.x-f.zz.x,f.xx.y-f.zz.y,f.xx.z-f.zz.z),this._activeEffect.setFloat3("vSphericalYY_ZZ",f.yy.x-f.zz.x,f.yy.y-f.zz.y,f.yy.z-f.zz.z),this._activeEffect.setFloat3("vSphericalZZ",f.zz.x,f.zz.y,f.zz.z),this._activeEffect.setFloat3("vSphericalXY",f.xy.x,f.xy.y,f.xy.z),this._activeEffect.setFloat3("vSphericalYZ",f.yz.x,f.yz.y,f.yz.z),this._activeEffect.setFloat3("vSphericalZX",f.zx.x,f.zx.y,f.zx.z);c.updateFloat3("vReflectionMicrosurfaceInfos",l.getSize().width,l.lodGenerationScale,l.lodGenerationOffset)}this._emissiveTexture&&Kr.a.EmissiveTextureEnabled&&(c.updateFloat2("vEmissiveInfos",this._emissiveTexture.coordinatesIndex,this._emissiveTexture.level),Hr.a.BindTextureMatrix(this._emissiveTexture,c,"emissive")),this._lightmapTexture&&Kr.a.LightmapTextureEnabled&&(c.updateFloat2("vLightmapInfos",this._lightmapTexture.coordinatesIndex,this._lightmapTexture.level),Hr.a.BindTextureMatrix(this._lightmapTexture,c,"lightmap")),Kr.a.SpecularTextureEnabled&&(this._metallicTexture?(c.updateFloat3("vReflectivityInfos",this._metallicTexture.coordinatesIndex,this._metallicTexture.level,this._ambientTextureStrength),Hr.a.BindTextureMatrix(this._metallicTexture,c,"reflectivity")):this._reflectivityTexture&&(c.updateFloat3("vReflectivityInfos",this._reflectivityTexture.coordinatesIndex,this._reflectivityTexture.level,1),Hr.a.BindTextureMatrix(this._reflectivityTexture,c,"reflectivity")),this._microSurfaceTexture&&(c.updateFloat2("vMicroSurfaceSamplerInfos",this._microSurfaceTexture.coordinatesIndex,this._microSurfaceTexture.level),Hr.a.BindTextureMatrix(this._microSurfaceTexture,c,"microSurfaceSampler"))),this._bumpTexture&&h.getCaps().standardDerivatives&&Kr.a.BumpTextureEnabled&&!this._disableBumpMap&&(c.updateFloat3("vBumpInfos",this._bumpTexture.coordinatesIndex,this._bumpTexture.level,this._parallaxScaleBias),Hr.a.BindTextureMatrix(this._bumpTexture,c,"bump"),i._mirroredCameraPosition?c.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?1:-1,this._invertNormalMapY?1:-1):c.updateFloat2("vTangentSpaceParams",this._invertNormalMapX?-1:1,this._invertNormalMapY?-1:1))}this.pointsCloud&&c.updateFloat("pointSize",this.pointSize),a.METALLICWORKFLOW?(o.t.Color3[0].r=null==this._metallic?1:this._metallic,o.t.Color3[0].g=null==this._roughness?1:this._roughness,c.updateColor4("vReflectivityColor",o.t.Color3[0],0)):c.updateColor4("vReflectivityColor",this._reflectivityColor,this._microSurface),c.updateColor3("vEmissiveColor",Kr.a.EmissiveTextureEnabled?this._emissiveColor:o.e.BlackReadOnly),c.updateColor3("vReflectionColor",this._reflectionColor),c.updateColor4("vAlbedoColor",this._albedoColor,this.alpha),c.updateFloat("visibility",n.visibility),this._lightingInfos.x=this._directIntensity,this._lightingInfos.y=this._emissiveIntensity,this._lightingInfos.z=this._environmentIntensity,this._lightingInfos.w=this._specularIntensity,c.updateVector4("vLightingIntensity",this._lightingInfos)}i.texturesEnabled&&(this._albedoTexture&&Kr.a.DiffuseTextureEnabled&&c.setTexture("albedoSampler",this._albedoTexture),this._ambientTexture&&Kr.a.AmbientTextureEnabled&&c.setTexture("ambientSampler",this._ambientTexture),this._opacityTexture&&Kr.a.OpacityTextureEnabled&&c.setTexture("opacitySampler",this._opacityTexture),l&&Kr.a.ReflectionTextureEnabled&&(a.LODBASEDMICROSFURACE?c.setTexture("reflectionSampler",l):(c.setTexture("reflectionSampler",l._lodTextureMid||l),c.setTexture("reflectionSamplerLow",l._lodTextureLow||l),c.setTexture("reflectionSamplerHigh",l._lodTextureHigh||l))),a.ENVIRONMENTBRDF&&c.setTexture("environmentBrdfSampler",this._environmentBRDFTexture),this._emissiveTexture&&Kr.a.EmissiveTextureEnabled&&c.setTexture("emissiveSampler",this._emissiveTexture),this._lightmapTexture&&Kr.a.LightmapTextureEnabled&&c.setTexture("lightmapSampler",this._lightmapTexture),Kr.a.SpecularTextureEnabled&&(this._metallicTexture?c.setTexture("reflectivitySampler",this._metallicTexture):this._reflectivityTexture&&c.setTexture("reflectivitySampler",this._reflectivityTexture),this._microSurfaceTexture&&c.setTexture("microSurfaceSampler",this._microSurfaceTexture)),this._bumpTexture&&h.getCaps().standardDerivatives&&Kr.a.BumpTextureEnabled&&!this._disableBumpMap&&c.setTexture("bumpSampler",this._bumpTexture)),this.subSurface.bindForSubMesh(c,i,h,this.isFrozen,a.LODBASEDMICROSFURACE),this.clearCoat.bindForSubMesh(c,i,h,this._disableBumpMap,this.isFrozen,this._invertNormalMapX,this._invertNormalMapY),this.anisotropy.bindForSubMesh(c,i,this.isFrozen),this.sheen.bindForSubMesh(c,i,this.isFrozen),Hr.a.BindClipPlane(this._activeEffect,i),i.ambientColor.multiplyToRef(this._ambientColor,this._globalAmbientColor);var _=i._forcedViewPosition?i._forcedViewPosition:i._mirroredCameraPosition?i._mirroredCameraPosition:i.activeCamera.globalPosition;s.setFloat4("vEyePosition",_.x,_.y,_.z,i.useRightHandedSystem===(null!=i._mirroredCameraPosition)?-1:1),s.setColor3("vAmbientColor",this._globalAmbientColor),s.setFloat2("vDebugMode",this.debugLimit,this.debugFactor)}!u&&this.isFrozen||(i.lightsEnabled&&!this._disableLighting&&Hr.a.BindLights(i,n,this._activeEffect,a,this._maxSimultaneousLights,this._lightFalloff!==t.LIGHTFALLOFF_STANDARD),(i.fogEnabled&&n.applyFog&&i.fogMode!==H.a.FOGMODE_NONE||l)&&this.bindView(s),Hr.a.BindFogParameters(i,n,this._activeEffect,!0),a.NUM_MORPH_INFLUENCERS&&Hr.a.BindMorphTargetParameters(n,this._activeEffect),this._imageProcessingConfiguration.bind(this._activeEffect),Hr.a.BindLogDepth(a,this._activeEffect,i)),c.update(),this._afterBind(n,this._activeEffect)}}},t.prototype.getAnimatables=function(){var e=[];return this._albedoTexture&&this._albedoTexture.animations&&this._albedoTexture.animations.length>0&&e.push(this._albedoTexture),this._ambientTexture&&this._ambientTexture.animations&&this._ambientTexture.animations.length>0&&e.push(this._ambientTexture),this._opacityTexture&&this._opacityTexture.animations&&this._opacityTexture.animations.length>0&&e.push(this._opacityTexture),this._reflectionTexture&&this._reflectionTexture.animations&&this._reflectionTexture.animations.length>0&&e.push(this._reflectionTexture),this._emissiveTexture&&this._emissiveTexture.animations&&this._emissiveTexture.animations.length>0&&e.push(this._emissiveTexture),this._metallicTexture&&this._metallicTexture.animations&&this._metallicTexture.animations.length>0?e.push(this._metallicTexture):this._reflectivityTexture&&this._reflectivityTexture.animations&&this._reflectivityTexture.animations.length>0&&e.push(this._reflectivityTexture),this._bumpTexture&&this._bumpTexture.animations&&this._bumpTexture.animations.length>0&&e.push(this._bumpTexture),this._lightmapTexture&&this._lightmapTexture.animations&&this._lightmapTexture.animations.length>0&&e.push(this._lightmapTexture),this.subSurface.getAnimatables(e),this.clearCoat.getAnimatables(e),this.sheen.getAnimatables(e),this.anisotropy.getAnimatables(e),e},t.prototype._getReflectionTexture=function(){return this._reflectionTexture?this._reflectionTexture:this.getScene().environmentTexture},t.prototype.getActiveTextures=function(){var t=e.prototype.getActiveTextures.call(this);return this._albedoTexture&&t.push(this._albedoTexture),this._ambientTexture&&t.push(this._ambientTexture),this._opacityTexture&&t.push(this._opacityTexture),this._reflectionTexture&&t.push(this._reflectionTexture),this._emissiveTexture&&t.push(this._emissiveTexture),this._reflectivityTexture&&t.push(this._reflectivityTexture),this._metallicTexture&&t.push(this._metallicTexture),this._microSurfaceTexture&&t.push(this._microSurfaceTexture),this._bumpTexture&&t.push(this._bumpTexture),this._lightmapTexture&&t.push(this._lightmapTexture),this.subSurface.getActiveTextures(t),this.clearCoat.getActiveTextures(t),this.sheen.getActiveTextures(t),this.anisotropy.getActiveTextures(t),t},t.prototype.hasTexture=function(t){return!!e.prototype.hasTexture.call(this,t)||this._albedoTexture===t||this._ambientTexture===t||this._opacityTexture===t||this._reflectionTexture===t||this._reflectivityTexture===t||this._metallicTexture===t||this._microSurfaceTexture===t||this._bumpTexture===t||this._lightmapTexture===t||this.subSurface.hasTexture(t)||this.clearCoat.hasTexture(t)||this.sheen.hasTexture(t)||this.anisotropy.hasTexture(t)},t.prototype.dispose=function(t,n){n&&(this._albedoTexture&&this._albedoTexture.dispose(),this._ambientTexture&&this._ambientTexture.dispose(),this._opacityTexture&&this._opacityTexture.dispose(),this._reflectionTexture&&this._reflectionTexture.dispose(),this._environmentBRDFTexture&&this.getScene().environmentBRDFTexture!==this._environmentBRDFTexture&&this._environmentBRDFTexture.dispose(),this._emissiveTexture&&this._emissiveTexture.dispose(),this._metallicTexture&&this._metallicTexture.dispose(),this._reflectivityTexture&&this._reflectivityTexture.dispose(),this._bumpTexture&&this._bumpTexture.dispose(),this._lightmapTexture&&this._lightmapTexture.dispose()),this.subSurface.dispose(n),this.clearCoat.dispose(n),this.sheen.dispose(n),this.anisotropy.dispose(n),this._renderTargets.dispose(),this._imageProcessingConfiguration&&this._imageProcessingObserver&&this._imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingObserver),e.prototype.dispose.call(this,t,n)},t.PBRMATERIAL_OPAQUE=0,t.PBRMATERIAL_ALPHATEST=1,t.PBRMATERIAL_ALPHABLEND=2,t.PBRMATERIAL_ALPHATESTANDBLEND=3,t.DEFAULT_AO_ON_ANALYTICAL_LIGHTS=0,t.LIGHTFALLOFF_PHYSICAL=0,t.LIGHTFALLOFF_GLTF=1,t.LIGHTFALLOFF_STANDARD=2,l.c([Object(L.i)()],t.prototype,"_imageProcessingConfiguration",void 0),l.c([Object(L.b)("_markAllSubMeshesAsMiscDirty")],t.prototype,"debugMode",void 0),l.c([Object(L.c)()],t.prototype,"useLogarithmicDepth",null),l.c([Object(L.c)()],t.prototype,"transparencyMode",null),t}(Xr.a),li=function(e){function t(n,r){var i=e.call(this,n,r)||this;return i.directIntensity=1,i.emissiveIntensity=1,i.environmentIntensity=1,i.specularIntensity=1,i.disableBumpMap=!1,i.ambientTextureStrength=1,i.ambientTextureImpactOnAnalyticalLights=t.DEFAULT_AO_ON_ANALYTICAL_LIGHTS,i.ambientColor=new o.e(0,0,0),i.albedoColor=new o.e(1,1,1),i.reflectivityColor=new o.e(1,1,1),i.reflectionColor=new o.e(1,1,1),i.emissiveColor=new o.e(0,0,0),i.microSurface=1,i.useLightmapAsShadowmap=!1,i.useAlphaFromAlbedoTexture=!1,i.forceAlphaTest=!1,i.alphaCutOff=.4,i.useSpecularOverAlpha=!0,i.useMicroSurfaceFromReflectivityMapAlpha=!1,i.useRoughnessFromMetallicTextureAlpha=!0,i.useRoughnessFromMetallicTextureGreen=!1,i.useMetallnessFromMetallicTextureBlue=!1,i.useAmbientOcclusionFromMetallicTextureRed=!1,i.useAmbientInGrayScale=!1,i.useAutoMicroSurfaceFromReflectivityMap=!1,i.useRadianceOverAlpha=!0,i.useObjectSpaceNormalMap=!1,i.useParallax=!1,i.useParallaxOcclusion=!1,i.parallaxScaleBias=.05,i.disableLighting=!1,i.forceIrradianceInFragment=!1,i.maxSimultaneousLights=4,i.invertNormalMapX=!1,i.invertNormalMapY=!1,i.twoSidedLighting=!1,i.useAlphaFresnel=!1,i.useLinearAlphaFresnel=!1,i.environmentBRDFTexture=null,i.forceNormalForward=!1,i.enableSpecularAntiAliasing=!1,i.useHorizonOcclusion=!0,i.useRadianceOcclusion=!0,i.unlit=!1,i._environmentBRDFTexture=ti.GetEnvironmentBRDFTexture(r),i}return l.d(t,e),Object.defineProperty(t.prototype,"refractionTexture",{get:function(){return this.subSurface.refractionTexture},set:function(e){this.subSurface.refractionTexture=e,e?this.subSurface.isRefractionEnabled=!0:this.subSurface.linkRefractionWithTransparency||(this.subSurface.isRefractionEnabled=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"indexOfRefraction",{get:function(){return 1/this.subSurface.indexOfRefraction},set:function(e){this.subSurface.indexOfRefraction=1/e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invertRefractionY",{get:function(){return this.subSurface.invertRefractionY},set:function(e){this.subSurface.invertRefractionY=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"linkRefractionWithTransparency",{get:function(){return this.subSurface.linkRefractionWithTransparency},set:function(e){this.subSurface.linkRefractionWithTransparency=e,e&&(this.subSurface.isRefractionEnabled=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"usePhysicalLightFalloff",{get:function(){return this._lightFalloff===ui.LIGHTFALLOFF_PHYSICAL},set:function(e){e!==this.usePhysicalLightFalloff&&(this._markAllSubMeshesAsTexturesDirty(),this._lightFalloff=e?ui.LIGHTFALLOFF_PHYSICAL:ui.LIGHTFALLOFF_STANDARD)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useGLTFLightFalloff",{get:function(){return this._lightFalloff===ui.LIGHTFALLOFF_GLTF},set:function(e){e!==this.useGLTFLightFalloff&&(this._markAllSubMeshesAsTexturesDirty(),this._lightFalloff=e?ui.LIGHTFALLOFF_GLTF:ui.LIGHTFALLOFF_STANDARD)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(e){this._attachImageProcessingConfiguration(e),this._markAllSubMeshesAsTexturesDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraColorCurvesEnabled",{get:function(){return this.imageProcessingConfiguration.colorCurvesEnabled},set:function(e){this.imageProcessingConfiguration.colorCurvesEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraColorGradingEnabled",{get:function(){return this.imageProcessingConfiguration.colorGradingEnabled},set:function(e){this.imageProcessingConfiguration.colorGradingEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraToneMappingEnabled",{get:function(){return this._imageProcessingConfiguration.toneMappingEnabled},set:function(e){this._imageProcessingConfiguration.toneMappingEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraExposure",{get:function(){return this._imageProcessingConfiguration.exposure},set:function(e){this._imageProcessingConfiguration.exposure=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraContrast",{get:function(){return this._imageProcessingConfiguration.contrast},set:function(e){this._imageProcessingConfiguration.contrast=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraColorGradingTexture",{get:function(){return this._imageProcessingConfiguration.colorGradingTexture},set:function(e){this._imageProcessingConfiguration.colorGradingTexture=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cameraColorCurves",{get:function(){return this._imageProcessingConfiguration.colorCurves},set:function(e){this._imageProcessingConfiguration.colorCurves=e},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"PBRMaterial"},t.prototype.clone=function(e){var n=this,r=L.a.Clone(function(){return new t(e,n.getScene())},this);return r.id=e,r.name=e,this.clearCoat.copyTo(r.clearCoat),this.anisotropy.copyTo(r.anisotropy),this.brdf.copyTo(r.brdf),this.sheen.copyTo(r.sheen),r},t.prototype.serialize=function(){var e=L.a.Serialize(this);return e.customType="BABYLON.PBRMaterial",e.clearCoat=this.clearCoat.serialize(),e.anisotropy=this.anisotropy.serialize(),e.brdf=this.brdf.serialize(),e.sheen=this.sheen.serialize(),e},t.Parse=function(e,n,r){var i=L.a.Parse(function(){return new t(e.name,n)},e,n,r);return e.clearCoat&&i.clearCoat.parse(e.clearCoat),e.anisotropy&&i.anisotropy.parse(e.anisotropy),e.brdf&&i.brdf.parse(e.brdf),e.sheen&&i.sheen.parse(e.brdf),i},t.PBRMATERIAL_OPAQUE=ui.PBRMATERIAL_OPAQUE,t.PBRMATERIAL_ALPHATEST=ui.PBRMATERIAL_ALPHATEST,t.PBRMATERIAL_ALPHABLEND=ui.PBRMATERIAL_ALPHABLEND,t.PBRMATERIAL_ALPHATESTANDBLEND=ui.PBRMATERIAL_ALPHATESTANDBLEND,t.DEFAULT_AO_ON_ANALYTICAL_LIGHTS=ui.DEFAULT_AO_ON_ANALYTICAL_LIGHTS,l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"directIntensity",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"emissiveIntensity",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"environmentIntensity",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"specularIntensity",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"disableBumpMap",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"albedoTexture",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"ambientTexture",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"ambientTextureStrength",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"ambientTextureImpactOnAnalyticalLights",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesAndMiscDirty")],t.prototype,"opacityTexture",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectionTexture",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"emissiveTexture",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectivityTexture",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"metallicTexture",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"metallic",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"roughness",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"microSurfaceTexture",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"bumpTexture",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty",null)],t.prototype,"lightmapTexture",void 0),l.c([Object(L.e)("ambient"),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"ambientColor",void 0),l.c([Object(L.e)("albedo"),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"albedoColor",void 0),l.c([Object(L.e)("reflectivity"),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectivityColor",void 0),l.c([Object(L.e)("reflection"),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"reflectionColor",void 0),l.c([Object(L.e)("emissive"),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"emissiveColor",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"microSurface",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useLightmapAsShadowmap",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesAndMiscDirty")],t.prototype,"useAlphaFromAlbedoTexture",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesAndMiscDirty")],t.prototype,"forceAlphaTest",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesAndMiscDirty")],t.prototype,"alphaCutOff",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useSpecularOverAlpha",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useMicroSurfaceFromReflectivityMapAlpha",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useRoughnessFromMetallicTextureAlpha",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useRoughnessFromMetallicTextureGreen",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useMetallnessFromMetallicTextureBlue",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useAmbientOcclusionFromMetallicTextureRed",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useAmbientInGrayScale",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useAutoMicroSurfaceFromReflectivityMap",void 0),l.c([Object(L.c)()],t.prototype,"usePhysicalLightFalloff",null),l.c([Object(L.c)()],t.prototype,"useGLTFLightFalloff",null),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useRadianceOverAlpha",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useObjectSpaceNormalMap",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useParallax",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useParallaxOcclusion",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"parallaxScaleBias",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"forceIrradianceInFragment",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"invertNormalMapX",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"invertNormalMapY",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"twoSidedLighting",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useAlphaFresnel",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useLinearAlphaFresnel",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"environmentBRDFTexture",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"forceNormalForward",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"enableSpecularAntiAliasing",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useHorizonOcclusion",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useRadianceOcclusion",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsMiscDirty")],t.prototype,"unlit",void 0),t}(ui);a.a.RegisteredTypes["BABYLON.PBRMaterial"]=li;var ci=n(62),hi=n(71);function di(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}var fi=di("DXT1"),pi=di("DXT3"),_i=di("DXT5"),mi=di("DX10"),gi=function(){function e(){}return e.GetDDSInfo=function(e){var t=new Int32Array(e,0,31),n=new Int32Array(e,0,35),r=1;131072&t[2]&&(r=Math.max(1,t[7]));var i=t[21],o=i===mi?n[32]:0,a=_.a.TEXTURETYPE_UNSIGNED_INT;switch(i){case 113:a=_.a.TEXTURETYPE_HALF_FLOAT;break;case 116:a=_.a.TEXTURETYPE_FLOAT;break;case mi:if(10===o){a=_.a.TEXTURETYPE_HALF_FLOAT;break}}return{width:t[4],height:t[3],mipmapCount:r,isFourCC:4==(4&t[20]),isRGB:64==(64&t[20]),isLuminance:131072==(131072&t[20]),isCube:512==(512&t[28]),isCompressed:i===fi||i===pi||i===_i,dxgiFormat:o,textureType:a}},e._ToHalfFloat=function(t){e._FloatView||(e._FloatView=new Float32Array(1),e._Int32View=new Int32Array(e._FloatView.buffer)),e._FloatView[0]=t;var n=e._Int32View[0],r=n>>16&32768,i=n>>12&2047,o=n>>23&255;return o<103?r:o>142?(r|=31744,r|=(255==o?0:1)&&8388607&n):o<113?r|=((i|=2048)>>114-o)+(i>>113-o&1):(r|=o-112<<10|i>>1,r+=1&i)},e._FromHalfFloat=function(e){var t=(32768&e)>>15,n=(31744&e)>>10,r=1023&e;return 0===n?(t?-1:1)*Math.pow(2,-14)*(r/Math.pow(2,10)):31==n?r?NaN:1/0*(t?-1:1):(t?-1:1)*Math.pow(2,n-15)*(1+r/Math.pow(2,10))},e._GetHalfFloatAsFloatRGBAArrayBuffer=function(t,n,r,i,o,a){for(var s=new Float32Array(i),u=new Uint16Array(o,r),l=0,c=0;c<n;c++)for(var h=0;h<t;h++){var d=4*(h+c*t);s[l]=e._FromHalfFloat(u[d]),s[l+1]=e._FromHalfFloat(u[d+1]),s[l+2]=e._FromHalfFloat(u[d+2]),s[l+3]=e.StoreLODInAlphaChannel?a:e._FromHalfFloat(u[d+3]),l+=4}return s},e._GetHalfFloatRGBAArrayBuffer=function(t,n,r,i,o,a){if(e.StoreLODInAlphaChannel){for(var s=new Uint16Array(i),u=new Uint16Array(o,r),l=0,c=0;c<n;c++)for(var h=0;h<t;h++){var d=4*(h+c*t);s[l]=u[d],s[l+1]=u[d+1],s[l+2]=u[d+2],s[l+3]=e._ToHalfFloat(a),l+=4}return s}return new Uint16Array(o,r,i)},e._GetFloatRGBAArrayBuffer=function(t,n,r,i,o,a){if(e.StoreLODInAlphaChannel){for(var s=new Float32Array(i),u=new Float32Array(o,r),l=0,c=0;c<n;c++)for(var h=0;h<t;h++){var d=4*(h+c*t);s[l]=u[d],s[l+1]=u[d+1],s[l+2]=u[d+2],s[l+3]=a,l+=4}return s}return new Float32Array(o,r,i)},e._GetFloatAsUIntRGBAArrayBuffer=function(t,n,r,i,o,a){for(var s=new Uint8Array(i),u=new Float32Array(o,r),l=0,c=0;c<n;c++)for(var h=0;h<t;h++){var d=4*(h+c*t);s[l]=255*w.a.Clamp(u[d]),s[l+1]=255*w.a.Clamp(u[d+1]),s[l+2]=255*w.a.Clamp(u[d+2]),s[l+3]=e.StoreLODInAlphaChannel?a:255*w.a.Clamp(u[d+3]),l+=4}return s},e._GetHalfFloatAsUIntRGBAArrayBuffer=function(t,n,r,i,o,a){for(var s=new Uint8Array(i),u=new Uint16Array(o,r),l=0,c=0;c<n;c++)for(var h=0;h<t;h++){var d=4*(h+c*t);s[l]=255*w.a.Clamp(e._FromHalfFloat(u[d])),s[l+1]=255*w.a.Clamp(e._FromHalfFloat(u[d+1])),s[l+2]=255*w.a.Clamp(e._FromHalfFloat(u[d+2])),s[l+3]=e.StoreLODInAlphaChannel?a:255*w.a.Clamp(e._FromHalfFloat(u[d+3])),l+=4}return s},e._GetRGBAArrayBuffer=function(e,t,n,r,i,o,a,s,u){for(var l=new Uint8Array(r),c=new Uint8Array(i,n),h=0,d=0;d<t;d++)for(var f=0;f<e;f++){var p=4*(f+d*e);l[h]=c[p+o],l[h+1]=c[p+a],l[h+2]=c[p+s],l[h+3]=c[p+u],h+=4}return l},e._ExtractLongWordOrder=function(t){return 0===t||255===t||-16777216===t?0:1+e._ExtractLongWordOrder(t>>8)},e._GetRGBArrayBuffer=function(e,t,n,r,i,o,a,s){for(var u=new Uint8Array(r),l=new Uint8Array(i,n),c=0,h=0;h<t;h++)for(var d=0;d<e;d++){var f=3*(d+h*e);u[c]=l[f+o],u[c+1]=l[f+a],u[c+2]=l[f+s],c+=3}return u},e._GetLuminanceArrayBuffer=function(e,t,n,r,i){for(var o=new Uint8Array(r),a=new Uint8Array(i,n),s=0,u=0;u<t;u++)for(var l=0;l<e;l++)o[s]=a[l+u*e],s++;return o},e.UploadDDSLevels=function(t,n,r,i,o,a,s,u){void 0===s&&(s=-1);var l=null;i.sphericalPolynomial&&(l=new Array);var c,h,d,f,m,g,v,y=t.getCaps().s3tc,b=new Int32Array(r,0,31),T=0,E=0,x=1;if(542327876===b[0])if(i.isFourCC||i.isRGB||i.isLuminance)if(!i.isCompressed||y){var M=b[22];f=b[1]+4;var A,S=!1;if(i.isFourCC)switch(c=b[21]){case fi:x=8,E=y.COMPRESSED_RGBA_S3TC_DXT1_EXT;break;case pi:x=16,E=y.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case _i:x=16,E=y.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;case 113:case 116:S=!0;break;case mi:f+=20;var C=!1;switch(i.dxgiFormat){case 10:S=!0,C=!0;break;case 88:i.isRGB=!0,i.isFourCC=!1,M=32,C=!0}if(C)break;default:return void console.error("Unsupported FourCC code:",(A=c,String.fromCharCode(255&A,A>>8&255,A>>16&255,A>>24&255)))}var P=e._ExtractLongWordOrder(b[23]),R=e._ExtractLongWordOrder(b[24]),D=e._ExtractLongWordOrder(b[25]),O=e._ExtractLongWordOrder(b[26]);S&&(E=t._getRGBABufferInternalSizedFormat(i.textureType)),g=1,131072&b[2]&&!1!==o&&(g=Math.max(1,b[7]));for(var w=u||0;w<a;w++){for(h=b[4],d=b[3],v=0;v<g;++v){if(-1===s||s===v){var L=-1===s?v:0;if(!i.isCompressed&&i.isFourCC){n.format=_.a.TEXTUREFORMAT_RGBA,T=h*d*4;var I=null;t._badOS||t._badDesktopOS||!t.getCaps().textureHalfFloat&&!t.getCaps().textureFloat?(128===M?(I=e._GetFloatAsUIntRGBAArrayBuffer(h,d,f,T,r,L),l&&0==L&&l.push(e._GetFloatRGBAArrayBuffer(h,d,f,T,r,L))):64===M&&(I=e._GetHalfFloatAsUIntRGBAArrayBuffer(h,d,f,T,r,L),l&&0==L&&l.push(e._GetHalfFloatAsFloatRGBAArrayBuffer(h,d,f,T,r,L))),n.type=_.a.TEXTURETYPE_UNSIGNED_INT):128===M?(n.type=_.a.TEXTURETYPE_FLOAT,I=e._GetFloatRGBAArrayBuffer(h,d,f,T,r,L),l&&0==L&&l.push(I)):64!==M||t.getCaps().textureHalfFloat?(n.type=_.a.TEXTURETYPE_HALF_FLOAT,I=e._GetHalfFloatRGBAArrayBuffer(h,d,f,T,r,L),l&&0==L&&l.push(e._GetHalfFloatAsFloatRGBAArrayBuffer(h,d,f,T,r,L))):(n.type=_.a.TEXTURETYPE_FLOAT,I=e._GetHalfFloatAsFloatRGBAArrayBuffer(h,d,f,T,r,L),l&&0==L&&l.push(I)),I&&t._uploadDataToTextureDirectly(n,I,w,L)}else if(i.isRGB)n.type=_.a.TEXTURETYPE_UNSIGNED_INT,24===M?(n.format=_.a.TEXTUREFORMAT_RGB,m=e._GetRGBArrayBuffer(h,d,f,T=h*d*3,r,P,R,D),t._uploadDataToTextureDirectly(n,m,w,L)):(n.format=_.a.TEXTUREFORMAT_RGBA,m=e._GetRGBAArrayBuffer(h,d,f,T=h*d*4,r,P,R,D,O),t._uploadDataToTextureDirectly(n,m,w,L));else if(i.isLuminance){var F=t._getUnpackAlignement(),N=h;T=Math.floor((h+F-1)/F)*F*(d-1)+N,m=e._GetLuminanceArrayBuffer(h,d,f,T,r),n.format=_.a.TEXTUREFORMAT_LUMINANCE,n.type=_.a.TEXTURETYPE_UNSIGNED_INT,t._uploadDataToTextureDirectly(n,m,w,L)}else T=Math.max(4,h)/4*Math.max(4,d)/4*x,m=new Uint8Array(r,f,T),n.type=_.a.TEXTURETYPE_UNSIGNED_INT,t._uploadCompressedDataToTextureDirectly(n,E,h,d,m,w,L)}f+=M?h*d*(M/8):T,h*=.5,d*=.5,h=Math.max(1,h),d=Math.max(1,d)}if(void 0!==u)break}i.sphericalPolynomial=l&&l.length>0?hi.a.ConvertCubeMapToSphericalPolynomial({size:b[4],right:l[0],left:l[1],up:l[2],down:l[3],front:l[4],back:l[5],format:_.a.TEXTUREFORMAT_RGBA,type:_.a.TEXTURETYPE_FLOAT,gammaSpace:!1}):void 0}else p.a.Error("Compressed textures are not supported on this platform.");else p.a.Error("Unsupported format, must contain a FourCC, RGB or LUMINANCE code");else p.a.Error("Invalid magic number in DDS header")},e.StoreLODInAlphaChannel=!1,e}();me.b.prototype.createPrefilteredCubeTexture=function(e,t,n,r,i,o,a,s,u){var l=this;return void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),void 0===u&&(u=!0),this.createCubeTexture(e,t,null,!1,function(e){if(e){var o=e.texture;if(u?e.info.sphericalPolynomial&&(o._sphericalPolynomial=e.info.sphericalPolynomial):o._sphericalPolynomial=new ci.b,o._dataSource=je.a.DATASOURCE_CUBEPREFILTERED,l.getCaps().textureLOD)i&&i(o);else{var a=l._gl,s=e.width;if(s){for(var c=[],h=0;h<3;h++){var d=1-h/2,f=r,_=w.a.Log2(s)*n+r,m=Math.round(Math.min(Math.max(f+(_-f)*d,0),_)),g=new je.a(l,je.a.DATASOURCE_TEMP);if(g.type=o.type,g.format=o.format,g.width=Math.pow(2,Math.max(w.a.Log2(s)-m,0)),g.height=g.width,g.isCube=!0,l._bindTextureDirectly(a.TEXTURE_CUBE_MAP,g,!0),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),e.isDDS){var v=e.info,y=e.data;l._unpackFlipY(v.isCompressed),gi.UploadDDSLevels(l,g,y,v,!0,6,m)}else p.a.Warn("DDS is the only prefiltered cube map supported so far.");l._bindTextureDirectly(a.TEXTURE_CUBE_MAP,null);var b=new Gr.a(t);b.isCube=!0,b._texture=g,g.isReady=!0,c.push(b)}o._lodTextureHigh=c[2],o._lodTextureMid=c[1],o._lodTextureLow=c[0],i&&i(o)}}}else i&&i(null)},o,a,s,u,n,r)};var vi=function(){function e(){this.supportCascades=!0}return e.prototype.canLoad=function(e,t,n,r,i){return 0===e.indexOf(".dds")},e.prototype.transformUrl=function(e,t){return e},e.prototype.getFallbackTextureUrl=function(e,t){return null},e.prototype.loadCubeData=function(e,t,n,r,i){var o,a=t.getEngine(),s=!1;if(Array.isArray(e))for(var u=0;u<e.length;u++){var l=e[u];o=gi.GetDDSInfo(l),t.width=o.width,t.height=o.height,s=(o.isRGB||o.isLuminance||o.mipmapCount>1)&&t.generateMipMaps,a._unpackFlipY(o.isCompressed),gi.UploadDDSLevels(a,t,l,o,s,6,-1,u),o.isFourCC||1!==o.mipmapCount||a.generateMipMapsForCubemap(t)}else{var c=e;o=gi.GetDDSInfo(c),t.width=o.width,t.height=o.height,n&&(o.sphericalPolynomial=new ci.b),s=(o.isRGB||o.isLuminance||o.mipmapCount>1)&&t.generateMipMaps,a._unpackFlipY(o.isCompressed),gi.UploadDDSLevels(a,t,c,o,s,6),o.isFourCC||1!==o.mipmapCount||a.generateMipMapsForCubemap(t)}a._setCubeMapTextureParams(s),t.isReady=!0,r&&r({isDDS:!0,width:t.width,info:o,data:e,texture:t})},e.prototype.loadData=function(e,t,n){var r=gi.GetDDSInfo(e),i=(r.isRGB||r.isLuminance||r.mipmapCount>1)&&t.generateMipMaps&&r.width>>r.mipmapCount-1==1;n(r.width,r.height,i,r.isFourCC,function(){gi.UploadDDSLevels(t.getEngine(),t,e,r,i,1)})},e}();me.b._TextureLoaders.push(new vi),jt.a.ShadersStore.rgbdEncodePixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n#include<helperFunctions>\nvoid main(void)\n{\ngl_FragColor=toRGBD(texture2D(textureSampler,vUV).rgb);\n}";var yi=function(){function e(){}return e.GetEnvInfo=function(t){for(var n=new DataView(t),r=0,i=0;i<e._MagicBytes.length;i++)if(n.getUint8(r++)!==e._MagicBytes[i])return p.a.Error("Not a babylon environment map"),null;for(var o="",a=0;a=n.getUint8(r++);)o+=String.fromCharCode(a);var s=JSON.parse(o);return s.specular&&(s.specular.specularDataPosition=r,s.specular.lodGenerationScale=s.specular.lodGenerationScale||.8),s},e.CreateEnvTextureAsync=function(t){var n=this,r=t.getInternalTexture();if(!r)return Promise.reject("The cube texture is invalid.");if(!t._prefiltered)return Promise.reject("The cube texture is invalid (not prefiltered).");var i=r.getEngine();if(i&&i.premultipliedAlpha)return Promise.reject("Env texture can only be created when the engine is created with the premultipliedAlpha option set to false.");if(t.textureType===_.a.TEXTURETYPE_UNSIGNED_INT)return Promise.reject("The cube texture should allow HDR (Full Float or Half Float).");var o=i.getRenderingCanvas();if(!o)return Promise.reject("Env texture can only be created when the engine is associated to a canvas.");var a=_.a.TEXTURETYPE_FLOAT;if(!i.getCaps().textureFloatRender&&(a=_.a.TEXTURETYPE_HALF_FLOAT,!i.getCaps().textureHalfFloatRender))return Promise.reject("Env texture can only be created when the browser supports half float or full float rendering.");var s=r.width,u=new H.a(i),l={},c=[],h=w.a.Log2(r.width);h=Math.round(h);for(var d=function(e){for(var n=Math.pow(2,h-e),r=function(r){var s=t.readPixels(r,e),h=i.createRawTexture(s,n,n,_.a.TEXTUREFORMAT_RGBA,!1,!1,_.a.TEXTURE_NEAREST_SAMPLINGMODE,null,a),d=new Promise(function(t,a){var s=new zt("rgbdEncode","rgbdEncode",null,null,1,null,_.a.TEXTURE_NEAREST_SAMPLINGMODE,i,!1,void 0,_.a.TEXTURETYPE_UNSIGNED_INT,void 0,null,!1);s.getEffect().executeWhenCompiled(function(){s.onApply=function(e){e._bindTexture("textureSampler",h)};var a=i.getRenderWidth(),c=i.getRenderHeight();i.setSize(n,n),u.postProcessManager.directRender([s],null),ye.h.ToBlob(o,function(n){var i=new FileReader;i.onload=function(n){l[6*e+r]=n.target.result,t()},i.readAsArrayBuffer(n)}),i.setSize(a,c)})});c.push(d)},s=0;s<6;s++)r(s)},f=0;f<=h;f++)d(f);return Promise.all(c).then(function(){u.dispose();for(var r={version:1,width:s,irradiance:n._CreateEnvTextureIrradiance(t),specular:{mipmaps:[],lodGenerationScale:t.lodGenerationScale}},i=0,o=0;o<=h;o++)for(var a=0;a<6;a++){var c=l[6*o+a].byteLength;r.specular.mipmaps.push({length:c,position:i}),i+=c}for(var d=JSON.stringify(r),f=new ArrayBuffer(d.length+1),p=new Uint8Array(f),_=(o=0,d.length);o<_;o++)p[o]=d.charCodeAt(o);p[d.length]=0;var m=new ArrayBuffer(e._MagicBytes.length+i+f.byteLength),g=new Uint8Array(m),v=new DataView(m),y=0;for(o=0;o<e._MagicBytes.length;o++)v.setUint8(y++,e._MagicBytes[o]);for(g.set(new Uint8Array(f),y),y+=f.byteLength,o=0;o<=h;o++)for(a=0;a<6;a++){var b=l[6*o+a];g.set(new Uint8Array(b),y),y+=b.byteLength}return m})},e._CreateEnvTextureIrradiance=function(e){var t=e.sphericalPolynomial;return null==t?null:{x:[t.x.x,t.x.y,t.x.z],y:[t.y.x,t.y.y,t.y.z],z:[t.z.x,t.z.y,t.z.z],xx:[t.xx.x,t.xx.y,t.xx.z],yy:[t.yy.x,t.yy.y,t.yy.z],zz:[t.zz.x,t.zz.y,t.zz.z],yz:[t.yz.x,t.yz.y,t.yz.z],zx:[t.zx.x,t.zx.y,t.zx.z],xy:[t.xy.x,t.xy.y,t.xy.z]}},e.UploadEnvLevelsAsync=function(t,n,r){if(1!==r.version)throw new Error('Unsupported babylon environment map version "'+r.version+'"');var i=r.specular;if(!i)return Promise.resolve();var o=w.a.Log2(r.width);if(o=Math.round(o)+1,i.mipmaps.length!==6*o)throw new Error('Unsupported specular mipmaps number "'+i.mipmaps.length+'"');t._lodGenerationScale=i.lodGenerationScale;for(var a=new Array(o),s=0;s<o;s++){a[s]=new Array(6);for(var u=0;u<6;u++){var l=i.mipmaps[6*s+u];a[s][u]=new Uint8Array(n,i.specularDataPosition+l.position,l.length)}}return e.UploadLevelsAsync(t,a)},e.UploadLevelsAsync=function(e,t){if(!ye.h.IsExponentOfTwo(e.width))throw new Error("Texture size must be a power of two");var n=Math.round(w.a.Log2(e.width))+1,r=e.getEngine(),i=!1,o=!1,a=null,s=null,u=null,l=r.getCaps();if(e.format=_.a.TEXTUREFORMAT_RGBA,e.type=_.a.TEXTURETYPE_UNSIGNED_INT,e.generateMipMaps=!0,r.updateTextureSamplingMode(_.a.TEXTURE_TRILINEAR_SAMPLINGMODE,e),l.textureLOD?r.webGLVersion<2?i=!1:l.textureHalfFloatRender&&l.textureHalfFloatLinearFiltering?(i=!0,e.type=_.a.TEXTURETYPE_HALF_FLOAT):l.textureFloatRender&&l.textureFloatLinearFiltering&&(i=!0,e.type=_.a.TEXTURETYPE_FLOAT):(i=!1,o=!0,u={}),i)a=new zt("rgbdDecode","rgbdDecode",null,null,1,null,_.a.TEXTURE_TRILINEAR_SAMPLINGMODE,r,!1,void 0,e.type,void 0,null,!1),e._isRGBD=!1,e.invertY=!1,s=r.createRenderTargetCubeTexture(e.width,{generateDepthBuffer:!1,generateMipMaps:!0,generateStencilBuffer:!1,samplingMode:_.a.TEXTURE_TRILINEAR_SAMPLINGMODE,type:e.type,format:_.a.TEXTUREFORMAT_RGBA});else if(e._isRGBD=!0,e.invertY=!0,o)for(var c=e._lodGenerationScale,h=e._lodGenerationOffset,d=0;d<3;d++){var f=(n-1)*c+h,p=Math.round(Math.min(Math.max(h+(f-h)*(1-d/2),0),f)),m=new je.a(r,je.a.DATASOURCE_TEMP);m.isCube=!0,m.invertY=!0,m.generateMipMaps=!1,r.updateTextureSamplingMode(_.a.TEXTURE_LINEAR_LINEAR,m);var g=new Gr.a(null);switch(g.isCube=!0,g._texture=m,u[p]=g,d){case 0:e._lodTextureLow=g;break;case 1:e._lodTextureMid=g;break;case 2:e._lodTextureHigh=g}}var v=[],y=function(n){for(var l=function(l){var c=new Blob([t[n][l]],{type:"image/png"}),h=URL.createObjectURL(c),d=new Image;d.src=h;var f=new Promise(function(t,c){d.onload=function(){if(i){var f=r.createTexture(null,!0,!0,null,_.a.TEXTURE_NEAREST_SAMPLINGMODE,null,function(e){c(e)},d);a.getEffect().executeWhenCompiled(function(){a.onApply=function(e){e._bindTexture("textureSampler",f),e.setFloat2("scale",1,1)},r.scenes[0].postProcessManager.directRender([a],s,!0,l,n),r.restoreDefaultFramebuffer(),f.dispose(),window.URL.revokeObjectURL(h),t()})}else{if(r._uploadImageToTexture(e,d,l,n),o){var p=u[n];p&&r._uploadImageToTexture(p._texture,d,l,0)}t()}},d.onerror=function(e){c(e)}});v.push(f)},c=0;c<6;c++)l(c)};for(d=0;d<t.length;d++)y(d);if(t.length<n){var b=void 0,T=Math.pow(2,n-1-t.length),E=T*T*4;switch(e.type){case _.a.TEXTURETYPE_UNSIGNED_INT:b=new Uint8Array(E);break;case _.a.TEXTURETYPE_HALF_FLOAT:b=new Uint16Array(E);break;case _.a.TEXTURETYPE_FLOAT:b=new Float32Array(E)}for(d=t.length;d<n;d++)for(var x=0;x<6;x++)r._uploadArrayBufferViewToTexture(e,b,x,d)}return Promise.all(v).then(function(){s&&(r._releaseFramebufferObjects(s),s._swapAndDie(e)),a&&a.dispose(),o&&(e._lodTextureHigh&&e._lodTextureHigh._texture&&(e._lodTextureHigh._texture.isReady=!0),e._lodTextureMid&&e._lodTextureMid._texture&&(e._lodTextureMid._texture.isReady=!0),e._lodTextureLow&&e._lodTextureLow._texture&&(e._lodTextureLow._texture.isReady=!0))})},e.UploadEnvSpherical=function(e,t){1!==t.version&&p.a.Warn('Unsupported babylon environment map version "'+t.version+'"');var n=t.irradiance;if(n){var r=new ci.b;o.x.FromArrayToRef(n.x,0,r.x),o.x.FromArrayToRef(n.y,0,r.y),o.x.FromArrayToRef(n.z,0,r.z),o.x.FromArrayToRef(n.xx,0,r.xx),o.x.FromArrayToRef(n.yy,0,r.yy),o.x.FromArrayToRef(n.zz,0,r.zz),o.x.FromArrayToRef(n.yz,0,r.yz),o.x.FromArrayToRef(n.zx,0,r.zx),o.x.FromArrayToRef(n.xy,0,r.xy),e._sphericalPolynomial=r}},e._UpdateRGBDAsync=function(t,n,r,i,o){return t._dataSource=je.a.DATASOURCE_CUBERAW_RGBD,t._bufferViewArrayArray=n,t._lodGenerationScale=i,t._lodGenerationOffset=o,t._sphericalPolynomial=r,e.UploadLevelsAsync(t,n).then(function(){t.isReady=!0})},e._MagicBytes=[134,22,135,150,246,214,150,54],e}();je.a._UpdateRGBDAsync=yi._UpdateRGBDAsync;var bi=function(){function e(){this.supportCascades=!1}return e.prototype.canLoad=function(e,t,n,r,i){return 0===e.indexOf(".env")},e.prototype.transformUrl=function(e,t){return e},e.prototype.getFallbackTextureUrl=function(e,t){return null},e.prototype.loadCubeData=function(e,t,n,r,i){if(!Array.isArray(e)){var o=yi.GetEnvInfo(e=e);o?(t.width=o.width,t.height=o.width,yi.UploadEnvSpherical(t,o),yi.UploadEnvLevelsAsync(t,e,o).then(function(){t.isReady=!0,r&&r()})):i&&i("Can not parse the environment file",null)}},e.prototype.loadData=function(e,t,n){throw".env not supported in 2d."},e}();me.b._TextureLoaders.push(new bi);var Ti=function(){function e(t,n,r,i){this.arrayBuffer=t,this.isInvalid=!1;var o=new Uint8Array(this.arrayBuffer,0,12);if(171!==o[0]||75!==o[1]||84!==o[2]||88!==o[3]||32!==o[4]||49!==o[5]||49!==o[6]||187!==o[7]||13!==o[8]||10!==o[9]||26!==o[10]||10!==o[11])return this.isInvalid=!0,void p.a.Error("texture missing KTX identifier");var a=Uint32Array.BYTES_PER_ELEMENT,s=new DataView(this.arrayBuffer,12,13*a),u=67305985===s.getUint32(0,!0);this.glType=s.getUint32(1*a,u),this.glTypeSize=s.getUint32(2*a,u),this.glFormat=s.getUint32(3*a,u),this.glInternalFormat=s.getUint32(4*a,u),this.glBaseInternalFormat=s.getUint32(5*a,u),this.pixelWidth=s.getUint32(6*a,u),this.pixelHeight=s.getUint32(7*a,u),this.pixelDepth=s.getUint32(8*a,u),this.numberOfArrayElements=s.getUint32(9*a,u),this.numberOfFaces=s.getUint32(10*a,u),this.numberOfMipmapLevels=s.getUint32(11*a,u),this.bytesOfKeyValueData=s.getUint32(12*a,u),0===this.glType?(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0!==this.pixelHeight&&0===this.pixelDepth?0===this.numberOfArrayElements?this.numberOfFaces===n?this.loadType=e.COMPRESSED_2D:p.a.Error("number of faces expected"+n+", but found "+this.numberOfFaces):p.a.Error("texture arrays not currently supported"):p.a.Error("only 2D textures currently supported")):p.a.Error("only compressed formats currently supported")}return e.prototype.uploadLevels=function(t,n){switch(this.loadType){case e.COMPRESSED_2D:this._upload2DCompressedLevels(t,n)}},e.prototype._upload2DCompressedLevels=function(t,n){for(var r=e.HEADER_LEN+this.bytesOfKeyValueData,i=this.pixelWidth,o=this.pixelHeight,a=n?this.numberOfMipmapLevels:1,s=0;s<a;s++){var u=new Int32Array(this.arrayBuffer,r,1)[0];r+=4;for(var l=0;l<this.numberOfFaces;l++){var c=new Uint8Array(this.arrayBuffer,r,u);t.getEngine()._uploadCompressedDataToTextureDirectly(t,this.glInternalFormat,i,o,c,l,s),r+=u,r+=3-(u+3)%4}i=Math.max(1,.5*i),o=Math.max(1,.5*o)}},e.HEADER_LEN=64,e.COMPRESSED_2D=0,e.COMPRESSED_3D=1,e.TEX_2D=2,e.TEX_3D=3,e}(),Ei=function(){function e(){this.supportCascades=!1}return e.prototype.canLoad=function(e,t,n,r,i){return!(!t||r||n||i)},e.prototype.transformUrl=function(e,t){var n=e.lastIndexOf(".");return-1!=n&&"ktx"==e.substring(n+1)?e:(n>-1?e.substring(0,n):e)+t},e.prototype.getFallbackTextureUrl=function(e,t){var n=new RegExp(t+"$");return e.replace(n,"")},e.prototype.loadCubeData=function(e,t,n,r,i){if(!Array.isArray(e)){t._invertVScale=!t.invertY;var o=t.getEngine(),a=new Ti(e,6),s=a.numberOfMipmapLevels>1&&t.generateMipMaps;o._unpackFlipY(!0),a.uploadLevels(t,t.generateMipMaps),t.width=a.pixelWidth,t.height=a.pixelHeight,o._setCubeMapTextureParams(s),t.isReady=!0}},e.prototype.loadData=function(e,t,n){t._invertVScale=!t.invertY;var r=new Ti(e,1);n(r.pixelWidth,r.pixelHeight,!1,!0,function(){r.uploadLevels(t,t.generateMipMaps)},r.isInvalid)},e}();me.b._TextureLoaders.unshift(new Ei),H.a.prototype.createDefaultLight=function(e){if(void 0===e&&(e=!1),e&&this.lights)for(var t=0;t<this.lights.length;t++)this.lights[t].dispose();0===this.lights.length&&new _n.a("default light",o.x.Up(),this)},H.a.prototype.createDefaultCamera=function(e,t,n){if(void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),t&&this.activeCamera&&(this.activeCamera.dispose(),this.activeCamera=null),!this.activeCamera){var r,i=this.getWorldExtends(),a=i.max.subtract(i.min),s=i.min.add(a.scale(.5)),u=1.5*a.length();if(isFinite(u)||(u=1,s.copyFromFloats(0,0,0)),e){var l=new Et("default camera",-Math.PI/2,Math.PI/2,u,s,this);l.lowerRadiusLimit=.01*u,l.wheelPrecision=100/u,r=l}else{var c=new bt("default camera",new o.x(s.x,s.y,-u),this);c.setTarget(s),r=c}r.minZ=.01*u,r.maxZ=1e3*u,r.speed=.2*u,this.activeCamera=r;var h=this.getEngine().getRenderingCanvas();n&&h&&r.attachControl(h)}},H.a.prototype.createDefaultCameraOrLight=function(e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1),this.createDefaultLight(t),this.createDefaultCamera(e,t,n)},H.a.prototype.createDefaultSkybox=function(e,t,n,r,i){if(void 0===t&&(t=!1),void 0===n&&(n=1e3),void 0===r&&(r=0),void 0===i&&(i=!0),!e)return p.a.Warn("Can not create default skybox without environment texture."),null;i&&e&&(this.environmentTexture=e);var o=fe.a.CreateBox("hdrSkyBox",n,this);if(t){var a=new li("skyBox",this);a.backFaceCulling=!1,a.reflectionTexture=e.clone(),a.reflectionTexture&&(a.reflectionTexture.coordinatesMode=Ge.a.SKYBOX_MODE),a.microSurface=1-r,a.disableLighting=!0,a.twoSidedLighting=!0,o.infiniteDistance=!0,o.material=a}else{var s=new yn.a("skyBox",this);s.backFaceCulling=!1,s.reflectionTexture=e.clone(),s.reflectionTexture&&(s.reflectionTexture.coordinatesMode=Ge.a.SKYBOX_MODE),s.disableLighting=!0,o.infiniteDistance=!0,o.material=s}return o.isPickable=!1,o},H.a.prototype.createDefaultEnvironment=function(e){return Jr?new Jr(e,this):null},H.a.prototype.createDefaultVRExperience=function(e){return void 0===e&&(e={}),new In(this,e)},H.a.prototype.createDefaultXRExperienceAsync=function(){var e=this;return kn.CreateAsync(this).then(function(t){var n=new Yn(t);return Gn.CreateAsync(e,t,{outputCanvasContext:n.canvasContext}).then(function(e){return new zn(t),t})})};var xi=function(e){function t(t,n,r,i,o,a,s){void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===a&&(a=Ge.a.TRILINEAR_SAMPLINGMODE),void 0===s&&(s={autoPlay:!0,loop:!0,autoUpdateTexture:!0});var u=e.call(this,null,r,!i,o)||this;u._onUserActionRequestedObservable=null,u._stillImageCaptured=!1,u._displayingPosterTexture=!1,u._createInternalTexture=function(){if(null!=u._texture){if(!u._displayingPosterTexture)return;u._texture.dispose(),u._displayingPosterTexture=!1}if(!u._engine.needPOTTextures||ye.h.IsExponentOfTwo(u.video.videoWidth)&&ye.h.IsExponentOfTwo(u.video.videoHeight)?(u.wrapU=Ge.a.WRAP_ADDRESSMODE,u.wrapV=Ge.a.WRAP_ADDRESSMODE):(u.wrapU=Ge.a.CLAMP_ADDRESSMODE,u.wrapV=Ge.a.CLAMP_ADDRESSMODE,u._generateMipMaps=!1),u._texture=u._engine.createDynamicTexture(u.video.videoWidth,u.video.videoHeight,u._generateMipMaps,u.samplingMode),u.video.autoplay||u._settings.poster)u._texture.isReady=!0,u._updateInternalTexture(),u.onLoadObservable.hasObservers()&&u.onLoadObservable.notifyObservers(u);else{var e=u.video.onplaying,t=!1,n=u.video.muted;u.video.muted=!0,u.video.onplaying=function(){u.video.muted=n,u.video.onplaying=e,u._texture.isReady=!0,u._updateInternalTexture(),t||u.video.pause(),u.onLoadObservable.hasObservers()&&u.onLoadObservable.notifyObservers(u)};var r=u.video.play();r?r.then(function(){}).catch(function(){t=!0,u._onUserActionRequestedObservable&&u._onUserActionRequestedObservable.hasObservers()&&u._onUserActionRequestedObservable.notifyObservers(u)}):(u.video.onplaying=e,u._texture.isReady=!0,u._updateInternalTexture(),u.onLoadObservable.hasObservers()&&u.onLoadObservable.notifyObservers(u))}},u.reset=function(){null!=u._texture&&(u._displayingPosterTexture||(u._texture.dispose(),u._texture=null))},u._updateInternalTexture=function(){null!=u._texture&&u._texture.isReady&&(u.video.readyState<u.video.HAVE_CURRENT_DATA||u._displayingPosterTexture||u._engine.updateVideoTexture(u._texture,u.video,u._invertY))},u._engine=u.getScene().getEngine(),u._generateMipMaps=i,u._initialSamplingMode=a,u.autoUpdateTexture=s.autoUpdateTexture,u.name=t||u._getName(n),u.video=u._getVideo(n),u._settings=s,s.poster&&(u.video.poster=s.poster),void 0!==s.autoPlay&&(u.video.autoplay=s.autoPlay),void 0!==s.loop&&(u.video.loop=s.loop),u.video.setAttribute("playsinline",""),u.video.addEventListener("paused",u._updateInternalTexture),u.video.addEventListener("seeked",u._updateInternalTexture),u.video.addEventListener("emptied",u.reset),u._createInternalTextureOnEvent=s.poster&&!s.autoPlay?"play":"canplay",u.video.addEventListener(u._createInternalTextureOnEvent,u._createInternalTexture);var l=u.video.readyState>=u.video.HAVE_CURRENT_DATA;return!s.poster||s.autoPlay&&l?l&&u._createInternalTexture():(u._texture=u._engine.createTexture(s.poster,!1,!0,r),u._displayingPosterTexture=!0),u}return l.d(t,e),Object.defineProperty(t.prototype,"onUserActionRequestedObservable",{get:function(){return this._onUserActionRequestedObservable||(this._onUserActionRequestedObservable=new i.c),this._onUserActionRequestedObservable},enumerable:!0,configurable:!0}),t.prototype._getName=function(e){return e instanceof HTMLVideoElement?e.currentSrc:"object"==typeof e?e.toString():e},t.prototype._getVideo=function(e){if(e instanceof HTMLVideoElement)return ye.h.SetCorsBehavior(e.currentSrc,e),e;var t=document.createElement("video");return"string"==typeof e?(ye.h.SetCorsBehavior(e,t),t.src=e):(ye.h.SetCorsBehavior(e[0],t),e.forEach(function(e){var n=document.createElement("source");n.src=e,t.appendChild(n)})),t},t.prototype._rebuild=function(){this.update()},t.prototype.update=function(){this.autoUpdateTexture&&this.updateTexture(!0)},t.prototype.updateTexture=function(e){e&&(this.video.paused&&this._stillImageCaptured||(this._stillImageCaptured=!0,this._updateInternalTexture()))},t.prototype.updateURL=function(e){this.video.src=e},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._onUserActionRequestedObservable&&(this._onUserActionRequestedObservable.clear(),this._onUserActionRequestedObservable=null),this.video.removeEventListener(this._createInternalTextureOnEvent,this._createInternalTexture),this.video.removeEventListener("paused",this._updateInternalTexture),this.video.removeEventListener("seeked",this._updateInternalTexture),this.video.removeEventListener("emptied",this.reset),this.video.pause()},t.CreateFromStreamAsync=function(e,n){var r=document.createElement("video");return r.setAttribute("autoplay",""),r.setAttribute("muted","true"),r.setAttribute("playsinline",""),r.muted=!0,void 0!==r.mozSrcObject?r.mozSrcObject=n:"object"==typeof r.srcObject?r.srcObject=n:(window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.src=window.URL&&window.URL.createObjectURL(n)),new Promise(function(n){var i=function(){n(new t("video",r,e,!0,!0)),r.removeEventListener("playing",i)};r.addEventListener("playing",i),r.play()})},t.CreateFromWebCamAsync=function(e,t,n){var r,i=this;return void 0===n&&(n=!1),t&&t.deviceId&&(r={exact:t.deviceId}),navigator.mediaDevices?navigator.mediaDevices.getUserMedia({video:t,audio:n}).then(function(t){return i.CreateFromStreamAsync(e,t)}):(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia&&navigator.getUserMedia({video:{deviceId:r,width:{min:t&&t.minWidth||256,max:t&&t.maxWidth||640},height:{min:t&&t.minHeight||256,max:t&&t.maxHeight||480}},audio:n},function(t){return i.CreateFromStreamAsync(e,t)},function(e){p.a.Error(e.name)}),Promise.reject("No support for userMedia on this device"))},t.CreateFromWebCam=function(e,t,n,r){void 0===r&&(r=!1),this.CreateFromWebCamAsync(e,n,r).then(function(e){t&&t(e)}).catch(function(e){p.a.Error(e.name)})},t}(Ge.a),Mi=function(e){function t(n,r,i,a){var s=e.call(this,n,a)||this;s._useDirectMapping=!1,s._videoMode=t.MODE_MONOSCOPIC,s._onBeforeCameraRenderObserver=null,a=s.getScene(),n=n||"videoDome",i.resolution=0|Math.abs(i.resolution)||32,i.clickToPlay=Boolean(i.clickToPlay),i.autoPlay=void 0===i.autoPlay||Boolean(i.autoPlay),i.loop=void 0===i.loop||Boolean(i.loop),i.size=Math.abs(i.size)||(a.activeCamera?.48*a.activeCamera.maxZ:1e3),s._useDirectMapping=void 0===i.useDirectMapping||i.useDirectMapping,void 0===i.faceForward&&(i.faceForward=!0),s._setReady(!1);var u={loop:i.loop,autoPlay:i.autoPlay,autoUpdateTexture:!0,poster:i.poster},l=s._material=new qr(n+"_material",a),c=s._videoTexture=new xi(n+"_texture",r,a,!1,s._useDirectMapping,Ge.a.TRILINEAR_SAMPLINGMODE,u);if(s._mesh=fe.a.CreateSphere(n+"_mesh",i.resolution,i.size,a,!1,fe.a.BACKSIDE),c.onLoadObservable.addOnce(function(){s._setReady(!0)}),l.useEquirectangularFOV=!0,l.fovMultiplier=1,l.opacityFresnel=!1,s._useDirectMapping?(c.wrapU=Ge.a.CLAMP_ADDRESSMODE,c.wrapV=Ge.a.CLAMP_ADDRESSMODE,l.diffuseTexture=c):(c.coordinatesMode=Ge.a.FIXED_EQUIRECTANGULAR_MIRRORED_MODE,c.wrapV=Ge.a.CLAMP_ADDRESSMODE,l.reflectionTexture=c),s._mesh.material=l,s._mesh.parent=s,i.clickToPlay&&(a.onPointerUp=function(){s._videoTexture.video.play()}),i.faceForward&&a.activeCamera){var h=a.activeCamera,d=o.x.Forward(),f=o.x.TransformNormal(d,h.getViewMatrix());f.normalize(),s.rotation.y=Math.acos(o.x.Dot(d,f))}return s}return l.d(t,e),Object.defineProperty(t.prototype,"videoTexture",{get:function(){return this._videoTexture},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fovMultiplier",{get:function(){return this._material.fovMultiplier},set:function(e){this._material.fovMultiplier=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoMode",{get:function(){return this._videoMode},set:function(e){this._videoMode!==e&&this._changeVideoMode(e)},enumerable:!0,configurable:!0}),t.prototype._changeVideoMode=function(e){var n=this;switch(this._scene.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver),this._videoMode=e,this._videoTexture.uScale=1,this._videoTexture.vScale=1,this._videoTexture.uOffset=0,this._videoTexture.vOffset=0,e){case t.MODE_SIDEBYSIDE:this._videoTexture.uScale=.5,this._onBeforeCameraRenderObserver=this._scene.onBeforeCameraRenderObservable.add(function(e){n._videoTexture.uOffset=e.isRightCamera?.5:0});break;case t.MODE_TOPBOTTOM:this._videoTexture.vScale=.5,this._onBeforeCameraRenderObserver=this._scene.onBeforeCameraRenderObservable.add(function(e){n._videoTexture.vOffset=e.isRightCamera?.5:0})}},t.prototype.dispose=function(t,n){void 0===n&&(n=!1),this._videoTexture.dispose(),this._mesh.dispose(),this._material.dispose(),this._scene.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver),e.prototype.dispose.call(this,t,n)},t.MODE_MONOSCOPIC=0,t.MODE_TOPBOTTOM=1,t.MODE_SIDEBYSIDE=2,t}($r.a),Ai=function(){function e(e){this.engine=e,this._captureGPUFrameTime=!1,this._gpuFrameTime=new ye.f,this._captureShaderCompilationTime=!1,this._shaderCompilationTime=new ye.f,this._onBeginFrameObserver=null,this._onEndFrameObserver=null,this._onBeforeShaderCompilationObserver=null,this._onAfterShaderCompilationObserver=null}return Object.defineProperty(e.prototype,"gpuFrameTimeCounter",{get:function(){return this._gpuFrameTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureGPUFrameTime",{get:function(){return this._captureGPUFrameTime},set:function(e){var t=this;e!==this._captureGPUFrameTime&&(this._captureGPUFrameTime=e,e?(this._onBeginFrameObserver=this.engine.onBeginFrameObservable.add(function(){t._gpuFrameTimeToken||(t._gpuFrameTimeToken=t.engine.startTimeQuery())}),this._onEndFrameObserver=this.engine.onEndFrameObservable.add(function(){if(t._gpuFrameTimeToken){var e=t.engine.endTimeQuery(t._gpuFrameTimeToken);e>-1&&(t._gpuFrameTimeToken=null,t._gpuFrameTime.fetchNewFrame(),t._gpuFrameTime.addCount(e,!0))}})):(this.engine.onBeginFrameObservable.remove(this._onBeginFrameObserver),this._onBeginFrameObserver=null,this.engine.onEndFrameObservable.remove(this._onEndFrameObserver),this._onEndFrameObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shaderCompilationTimeCounter",{get:function(){return this._shaderCompilationTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureShaderCompilationTime",{get:function(){return this._captureShaderCompilationTime},set:function(e){var t=this;e!==this._captureShaderCompilationTime&&(this._captureShaderCompilationTime=e,e?(this._onBeforeShaderCompilationObserver=this.engine.onBeforeShaderCompilationObservable.add(function(){t._shaderCompilationTime.fetchNewFrame(),t._shaderCompilationTime.beginMonitoring()}),this._onAfterShaderCompilationObserver=this.engine.onAfterShaderCompilationObservable.add(function(){t._shaderCompilationTime.endMonitoring()})):(this.engine.onBeforeShaderCompilationObservable.remove(this._onBeforeShaderCompilationObserver),this._onBeforeShaderCompilationObserver=null,this.engine.onAfterShaderCompilationObservable.remove(this._onAfterShaderCompilationObserver),this._onAfterShaderCompilationObserver=null))},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.engine.onBeginFrameObservable.remove(this._onBeginFrameObserver),this._onBeginFrameObserver=null,this.engine.onEndFrameObservable.remove(this._onEndFrameObserver),this._onEndFrameObserver=null,this.engine.onBeforeShaderCompilationObservable.remove(this._onBeforeShaderCompilationObserver),this._onBeforeShaderCompilationObserver=null,this.engine.onAfterShaderCompilationObservable.remove(this._onAfterShaderCompilationObserver),this._onAfterShaderCompilationObserver=null,this.engine=null},e}(),Si=function(){function e(e){var t=this;this.scene=e,this._captureActiveMeshesEvaluationTime=!1,this._activeMeshesEvaluationTime=new ye.f,this._captureRenderTargetsRenderTime=!1,this._renderTargetsRenderTime=new ye.f,this._captureFrameTime=!1,this._frameTime=new ye.f,this._captureRenderTime=!1,this._renderTime=new ye.f,this._captureInterFrameTime=!1,this._interFrameTime=new ye.f,this._captureParticlesRenderTime=!1,this._particlesRenderTime=new ye.f,this._captureSpritesRenderTime=!1,this._spritesRenderTime=new ye.f,this._capturePhysicsTime=!1,this._physicsTime=new ye.f,this._captureAnimationsTime=!1,this._animationsTime=new ye.f,this._captureCameraRenderTime=!1,this._cameraRenderTime=new ye.f,this._onBeforeActiveMeshesEvaluationObserver=null,this._onAfterActiveMeshesEvaluationObserver=null,this._onBeforeRenderTargetsRenderObserver=null,this._onAfterRenderTargetsRenderObserver=null,this._onAfterRenderObserver=null,this._onBeforeDrawPhaseObserver=null,this._onAfterDrawPhaseObserver=null,this._onBeforeAnimationsObserver=null,this._onBeforeParticlesRenderingObserver=null,this._onAfterParticlesRenderingObserver=null,this._onBeforeSpritesRenderingObserver=null,this._onAfterSpritesRenderingObserver=null,this._onBeforePhysicsObserver=null,this._onAfterPhysicsObserver=null,this._onAfterAnimationsObserver=null,this._onBeforeCameraRenderObserver=null,this._onAfterCameraRenderObserver=null,this._onBeforeAnimationsObserver=e.onBeforeAnimationsObservable.add(function(){t._captureActiveMeshesEvaluationTime&&t._activeMeshesEvaluationTime.fetchNewFrame(),t._captureRenderTargetsRenderTime&&t._renderTargetsRenderTime.fetchNewFrame(),t._captureFrameTime&&(ye.h.StartPerformanceCounter("Scene rendering"),t._frameTime.beginMonitoring()),t._captureInterFrameTime&&t._interFrameTime.endMonitoring(),t._captureParticlesRenderTime&&t._particlesRenderTime.fetchNewFrame(),t._captureSpritesRenderTime&&t._spritesRenderTime.fetchNewFrame(),t._captureAnimationsTime&&t._animationsTime.beginMonitoring(),t.scene.getEngine()._drawCalls.fetchNewFrame()}),this._onAfterRenderObserver=e.onAfterRenderObservable.add(function(){t._captureFrameTime&&(ye.h.EndPerformanceCounter("Scene rendering"),t._frameTime.endMonitoring()),t._captureRenderTime&&t._renderTime.endMonitoring(!1),t._captureInterFrameTime&&t._interFrameTime.beginMonitoring()})}return Object.defineProperty(e.prototype,"activeMeshesEvaluationTimeCounter",{get:function(){return this._activeMeshesEvaluationTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureActiveMeshesEvaluationTime",{get:function(){return this._captureActiveMeshesEvaluationTime},set:function(e){var t=this;e!==this._captureActiveMeshesEvaluationTime&&(this._captureActiveMeshesEvaluationTime=e,e?(this._onBeforeActiveMeshesEvaluationObserver=this.scene.onBeforeActiveMeshesEvaluationObservable.add(function(){ye.h.StartPerformanceCounter("Active meshes evaluation"),t._activeMeshesEvaluationTime.beginMonitoring()}),this._onAfterActiveMeshesEvaluationObserver=this.scene.onAfterActiveMeshesEvaluationObservable.add(function(){ye.h.EndPerformanceCounter("Active meshes evaluation"),t._activeMeshesEvaluationTime.endMonitoring()})):(this.scene.onBeforeActiveMeshesEvaluationObservable.remove(this._onBeforeActiveMeshesEvaluationObserver),this._onBeforeActiveMeshesEvaluationObserver=null,this.scene.onAfterActiveMeshesEvaluationObservable.remove(this._onAfterActiveMeshesEvaluationObserver),this._onAfterActiveMeshesEvaluationObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderTargetsRenderTimeCounter",{get:function(){return this._renderTargetsRenderTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureRenderTargetsRenderTime",{get:function(){return this._captureRenderTargetsRenderTime},set:function(e){var t=this;e!==this._captureRenderTargetsRenderTime&&(this._captureRenderTargetsRenderTime=e,e?(this._onBeforeRenderTargetsRenderObserver=this.scene.onBeforeRenderTargetsRenderObservable.add(function(){ye.h.StartPerformanceCounter("Render targets rendering"),t._renderTargetsRenderTime.beginMonitoring()}),this._onAfterRenderTargetsRenderObserver=this.scene.onAfterRenderTargetsRenderObservable.add(function(){ye.h.EndPerformanceCounter("Render targets rendering"),t._renderTargetsRenderTime.endMonitoring(!1)})):(this.scene.onBeforeRenderTargetsRenderObservable.remove(this._onBeforeRenderTargetsRenderObserver),this._onBeforeRenderTargetsRenderObserver=null,this.scene.onAfterRenderTargetsRenderObservable.remove(this._onAfterRenderTargetsRenderObserver),this._onAfterRenderTargetsRenderObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"particlesRenderTimeCounter",{get:function(){return this._particlesRenderTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureParticlesRenderTime",{get:function(){return this._captureParticlesRenderTime},set:function(e){var t=this;e!==this._captureParticlesRenderTime&&(this._captureParticlesRenderTime=e,e?(this._onBeforeParticlesRenderingObserver=this.scene.onBeforeParticlesRenderingObservable.add(function(){ye.h.StartPerformanceCounter("Particles"),t._particlesRenderTime.beginMonitoring()}),this._onAfterParticlesRenderingObserver=this.scene.onAfterParticlesRenderingObservable.add(function(){ye.h.EndPerformanceCounter("Particles"),t._particlesRenderTime.endMonitoring(!1)})):(this.scene.onBeforeParticlesRenderingObservable.remove(this._onBeforeParticlesRenderingObserver),this._onBeforeParticlesRenderingObserver=null,this.scene.onAfterParticlesRenderingObservable.remove(this._onAfterParticlesRenderingObserver),this._onAfterParticlesRenderingObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spritesRenderTimeCounter",{get:function(){return this._spritesRenderTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureSpritesRenderTime",{get:function(){return this._captureSpritesRenderTime},set:function(e){var t=this;e!==this._captureSpritesRenderTime&&(this._captureSpritesRenderTime=e,this.scene.spriteManagers&&(e?(this._onBeforeSpritesRenderingObserver=this.scene.onBeforeSpritesRenderingObservable.add(function(){ye.h.StartPerformanceCounter("Sprites"),t._spritesRenderTime.beginMonitoring()}),this._onAfterSpritesRenderingObserver=this.scene.onAfterSpritesRenderingObservable.add(function(){ye.h.EndPerformanceCounter("Sprites"),t._spritesRenderTime.endMonitoring(!1)})):(this.scene.onBeforeSpritesRenderingObservable.remove(this._onBeforeSpritesRenderingObserver),this._onBeforeSpritesRenderingObserver=null,this.scene.onAfterSpritesRenderingObservable.remove(this._onAfterSpritesRenderingObserver),this._onAfterSpritesRenderingObserver=null)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"physicsTimeCounter",{get:function(){return this._physicsTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"capturePhysicsTime",{get:function(){return this._capturePhysicsTime},set:function(e){var t=this;e!==this._capturePhysicsTime&&this.scene.onBeforePhysicsObservable&&(this._capturePhysicsTime=e,e?(this._onBeforePhysicsObserver=this.scene.onBeforePhysicsObservable.add(function(){ye.h.StartPerformanceCounter("Physics"),t._physicsTime.beginMonitoring()}),this._onAfterPhysicsObserver=this.scene.onAfterPhysicsObservable.add(function(){ye.h.EndPerformanceCounter("Physics"),t._physicsTime.endMonitoring()})):(this.scene.onBeforePhysicsObservable.remove(this._onBeforePhysicsObserver),this._onBeforePhysicsObserver=null,this.scene.onAfterPhysicsObservable.remove(this._onAfterPhysicsObserver),this._onAfterPhysicsObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationsTimeCounter",{get:function(){return this._animationsTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureAnimationsTime",{get:function(){return this._captureAnimationsTime},set:function(e){var t=this;e!==this._captureAnimationsTime&&(this._captureAnimationsTime=e,e?this._onAfterAnimationsObserver=this.scene.onAfterAnimationsObservable.add(function(){t._animationsTime.endMonitoring()}):(this.scene.onAfterAnimationsObservable.remove(this._onAfterAnimationsObserver),this._onAfterAnimationsObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"frameTimeCounter",{get:function(){return this._frameTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureFrameTime",{get:function(){return this._captureFrameTime},set:function(e){this._captureFrameTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interFrameTimeCounter",{get:function(){return this._interFrameTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureInterFrameTime",{get:function(){return this._captureInterFrameTime},set:function(e){this._captureInterFrameTime=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderTimeCounter",{get:function(){return this._renderTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureRenderTime",{get:function(){return this._captureRenderTime},set:function(e){var t=this;e!==this._captureRenderTime&&(this._captureRenderTime=e,e?(this._onBeforeDrawPhaseObserver=this.scene.onBeforeDrawPhaseObservable.add(function(){t._renderTime.beginMonitoring(),ye.h.StartPerformanceCounter("Main render")}),this._onAfterDrawPhaseObserver=this.scene.onAfterDrawPhaseObservable.add(function(){t._renderTime.endMonitoring(!1),ye.h.EndPerformanceCounter("Main render")})):(this.scene.onBeforeDrawPhaseObservable.remove(this._onBeforeDrawPhaseObserver),this._onBeforeDrawPhaseObserver=null,this.scene.onAfterDrawPhaseObservable.remove(this._onAfterDrawPhaseObserver),this._onAfterDrawPhaseObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cameraRenderTimeCounter",{get:function(){return this._cameraRenderTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"captureCameraRenderTime",{get:function(){return this._captureCameraRenderTime},set:function(e){var t=this;e!==this._captureCameraRenderTime&&(this._captureCameraRenderTime=e,e?(this._onBeforeCameraRenderObserver=this.scene.onBeforeCameraRenderObservable.add(function(e){t._cameraRenderTime.beginMonitoring(),ye.h.StartPerformanceCounter("Rendering camera "+e.name)}),this._onAfterCameraRenderObserver=this.scene.onAfterCameraRenderObservable.add(function(e){t._cameraRenderTime.endMonitoring(!1),ye.h.EndPerformanceCounter("Rendering camera "+e.name)})):(this.scene.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver),this._onBeforeCameraRenderObserver=null,this.scene.onAfterCameraRenderObservable.remove(this._onAfterCameraRenderObserver),this._onAfterCameraRenderObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drawCallsCounter",{get:function(){return this.scene.getEngine()._drawCalls},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.scene.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=null,this.scene.onBeforeActiveMeshesEvaluationObservable.remove(this._onBeforeActiveMeshesEvaluationObserver),this._onBeforeActiveMeshesEvaluationObserver=null,this.scene.onAfterActiveMeshesEvaluationObservable.remove(this._onAfterActiveMeshesEvaluationObserver),this._onAfterActiveMeshesEvaluationObserver=null,this.scene.onBeforeRenderTargetsRenderObservable.remove(this._onBeforeRenderTargetsRenderObserver),this._onBeforeRenderTargetsRenderObserver=null,this.scene.onAfterRenderTargetsRenderObservable.remove(this._onAfterRenderTargetsRenderObserver),this._onAfterRenderTargetsRenderObserver=null,this.scene.onBeforeAnimationsObservable.remove(this._onBeforeAnimationsObserver),this._onBeforeAnimationsObserver=null,this.scene.onBeforeParticlesRenderingObservable.remove(this._onBeforeParticlesRenderingObserver),this._onBeforeParticlesRenderingObserver=null,this.scene.onAfterParticlesRenderingObservable.remove(this._onAfterParticlesRenderingObserver),this._onAfterParticlesRenderingObserver=null,this._onBeforeSpritesRenderingObserver&&(this.scene.onBeforeSpritesRenderingObservable.remove(this._onBeforeSpritesRenderingObserver),this._onBeforeSpritesRenderingObserver=null),this._onAfterSpritesRenderingObserver&&(this.scene.onAfterSpritesRenderingObservable.remove(this._onAfterSpritesRenderingObserver),this._onAfterSpritesRenderingObserver=null),this.scene.onBeforeDrawPhaseObservable.remove(this._onBeforeDrawPhaseObserver),this._onBeforeDrawPhaseObserver=null,this.scene.onAfterDrawPhaseObservable.remove(this._onAfterDrawPhaseObserver),this._onAfterDrawPhaseObserver=null,this._onBeforePhysicsObserver&&(this.scene.onBeforePhysicsObservable.remove(this._onBeforePhysicsObserver),this._onBeforePhysicsObserver=null),this._onAfterPhysicsObserver&&(this.scene.onAfterPhysicsObservable.remove(this._onAfterPhysicsObserver),this._onAfterPhysicsObserver=null),this.scene.onAfterAnimationsObservable.remove(this._onAfterAnimationsObserver),this._onAfterAnimationsObserver=null,this.scene.onBeforeCameraRenderObservable.remove(this._onBeforeCameraRenderObserver),this._onBeforeCameraRenderObserver=null,this.scene.onAfterCameraRenderObservable.remove(this._onAfterCameraRenderObserver),this._onAfterCameraRenderObserver=null,this.scene=null},e}(),Ci=n(20);jt.a.ShadersStore.glowMapGenerationPixelShader="#ifdef DIFFUSE\nvarying vec2 vUVDiffuse;\nuniform sampler2D diffuseSampler;\n#endif\n#ifdef OPACITY\nvarying vec2 vUVOpacity;\nuniform sampler2D opacitySampler;\nuniform float opacityIntensity;\n#endif\n#ifdef EMISSIVE\nvarying vec2 vUVEmissive;\nuniform sampler2D emissiveSampler;\n#endif\n#ifdef VERTEXALPHA\nvarying vec4 vColor;\n#endif\nuniform vec4 glowColor;\nvoid main(void)\n{\nvec4 finalColor=glowColor;\n\n#ifdef DIFFUSE\nvec4 albedoTexture=texture2D(diffuseSampler,vUVDiffuse);\nfinalColor.a*=albedoTexture.a;\n#endif\n#ifdef OPACITY\nvec4 opacityMap=texture2D(opacitySampler,vUVOpacity);\n#ifdef OPACITYRGB\nfinalColor.a*=getLuminance(opacityMap.rgb);\n#else\nfinalColor.a*=opacityMap.a;\n#endif\nfinalColor.a*=opacityIntensity;\n#endif\n#ifdef VERTEXALPHA\nfinalColor.a*=vColor.a;\n#endif\n#ifdef ALPHATEST\nif (finalColor.a<ALPHATESTVALUE)\ndiscard;\n#endif\n#ifdef EMISSIVE\ngl_FragColor=texture2D(emissiveSampler,vUVEmissive)*finalColor;\n#else\ngl_FragColor=finalColor;\n#endif\n}",jt.a.ShadersStore.glowMapGenerationVertexShader="\nattribute vec3 position;\n#include<bonesDeclaration>\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n\n#include<instancesDeclaration>\nuniform mat4 viewProjection;\nvarying vec4 vPosition;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#ifdef DIFFUSE\nvarying vec2 vUVDiffuse;\nuniform mat4 diffuseMatrix;\n#endif\n#ifdef OPACITY\nvarying vec2 vUVOpacity;\nuniform mat4 opacityMatrix;\n#endif\n#ifdef EMISSIVE\nvarying vec2 vUVEmissive;\nuniform mat4 emissiveMatrix;\n#endif\n#ifdef VERTEXALPHA\nattribute vec4 color;\nvarying vec4 vColor;\n#endif\nvoid main(void)\n{\nvec3 positionUpdated=position;\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n#include<instancesVertex>\n#include<bonesVertex>\n#ifdef CUBEMAP\nvPosition=finalWorld*vec4(positionUpdated,1.0);\ngl_Position=viewProjection*finalWorld*vec4(position,1.0);\n#else\nvPosition=viewProjection*finalWorld*vec4(positionUpdated,1.0);\ngl_Position=vPosition;\n#endif\n#ifdef DIFFUSE\n#ifdef DIFFUSEUV1\nvUVDiffuse=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef DIFFUSEUV2\nvUVDiffuse=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n#ifdef OPACITY\n#ifdef OPACITYUV1\nvUVOpacity=vec2(opacityMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef OPACITYUV2\nvUVOpacity=vec2(opacityMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n#ifdef EMISSIVE\n#ifdef EMISSIVEUV1\nvUVEmissive=vec2(emissiveMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef EMISSIVEUV2\nvUVEmissive=vec2(emissiveMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n#ifdef VERTEXALPHA\nvColor=color;\n#endif\n}";var Pi=function(){function e(t,n){this._vertexBuffers={},this._maxSize=0,this._mainTextureDesiredSize={width:0,height:0},this._shouldRender=!0,this._postProcesses=[],this._textures=[],this._emissiveTextureAndColor={texture:null,color:new o.f},this.neutralColor=new o.f,this.isEnabled=!0,this.onDisposeObservable=new i.c,this.onBeforeRenderMainTextureObservable=new i.c,this.onBeforeComposeObservable=new i.c,this.onAfterComposeObservable=new i.c,this.onSizeChangedObservable=new i.c,this.name=t,this._scene=n||S.a.LastCreatedScene,e._SceneComponentInitialization(this._scene),this._engine=this._scene.getEngine(),this._maxSize=this._engine.getCaps().maxTextureSize,this._scene.effectLayers.push(this),this._generateIndexBuffer(),this._generateVertexBuffer()}return Object.defineProperty(e.prototype,"camera",{get:function(){return this._effectLayerOptions.camera},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderingGroupId",{get:function(){return this._effectLayerOptions.renderingGroupId},enumerable:!0,configurable:!0}),e.prototype._init=function(e){this._effectLayerOptions=l.a({mainTextureRatio:.5,alphaBlendingMode:_.a.ALPHA_COMBINE,camera:null,renderingGroupId:-1},e),this._setMainTextureSize(),this._createMainTexture(),this._createTextureAndPostProcesses(),this._mergeEffect=this._createMergeEffect()},e.prototype._generateIndexBuffer=function(){var e=[];e.push(0),e.push(1),e.push(2),e.push(0),e.push(2),e.push(3),this._indexBuffer=this._engine.createIndexBuffer(e)},e.prototype._generateVertexBuffer=function(){var e=[];e.push(1,1),e.push(-1,1),e.push(-1,-1),e.push(1,-1);var t=new Mn.b(this._engine,e,Mn.b.PositionKind,!1,!1,2);this._vertexBuffers[Mn.b.PositionKind]=t},e.prototype._setMainTextureSize=function(){this._effectLayerOptions.mainTextureFixedSize?(this._mainTextureDesiredSize.width=this._effectLayerOptions.mainTextureFixedSize,this._mainTextureDesiredSize.height=this._effectLayerOptions.mainTextureFixedSize):(this._mainTextureDesiredSize.width=this._engine.getRenderWidth()*this._effectLayerOptions.mainTextureRatio,this._mainTextureDesiredSize.height=this._engine.getRenderHeight()*this._effectLayerOptions.mainTextureRatio,this._mainTextureDesiredSize.width=this._engine.needPOTTextures?ye.h.GetExponentOfTwo(this._mainTextureDesiredSize.width,this._maxSize):this._mainTextureDesiredSize.width,this._mainTextureDesiredSize.height=this._engine.needPOTTextures?ye.h.GetExponentOfTwo(this._mainTextureDesiredSize.height,this._maxSize):this._mainTextureDesiredSize.height),this._mainTextureDesiredSize.width=Math.floor(this._mainTextureDesiredSize.width),this._mainTextureDesiredSize.height=Math.floor(this._mainTextureDesiredSize.height)},e.prototype._createMainTexture=function(){var e=this;this._mainTexture=new ln("HighlightLayerMainRTT",{width:this._mainTextureDesiredSize.width,height:this._mainTextureDesiredSize.height},this._scene,!1,!0,_.a.TEXTURETYPE_UNSIGNED_INT),this._mainTexture.activeCamera=this._effectLayerOptions.camera,this._mainTexture.wrapU=Ge.a.CLAMP_ADDRESSMODE,this._mainTexture.wrapV=Ge.a.CLAMP_ADDRESSMODE,this._mainTexture.anisotropicFilteringLevel=1,this._mainTexture.updateSamplingMode(Ge.a.BILINEAR_SAMPLINGMODE),this._mainTexture.renderParticles=!1,this._mainTexture.renderList=null,this._mainTexture.ignoreCameraViewport=!0,this._mainTexture.customRenderFunction=function(t,n,r,i){var o;e.onBeforeRenderMainTextureObservable.notifyObservers(e);var a=e._scene.getEngine();if(i.length){for(a.setColorWrite(!1),o=0;o<i.length;o++)e._renderSubMesh(i.data[o]);a.setColorWrite(!0)}for(o=0;o<t.length;o++)e._renderSubMesh(t.data[o]);for(o=0;o<n.length;o++)e._renderSubMesh(n.data[o]);var s=a.getAlphaMode();for(o=0;o<r.length;o++)e._renderSubMesh(r.data[o],!0);a.setAlphaMode(s)},this._mainTexture.onClearObservable.add(function(t){t.clear(e.neutralColor,!0,!0,!0)})},e.prototype._addCustomEffectDefines=function(e){},e.prototype._isReady=function(e,t,n){var r=e.getMaterial();if(!r)return!1;if(!r.isReadyForSubMesh(e.getMesh(),e,t))return!1;var i=[],o=[Mn.b.PositionKind],a=e.getMesh(),s=!1,u=!1;if(r){var l=r.needAlphaTesting(),c=r.getAlphaTestTexture();c&&(l||c&&c.hasAlpha&&(r.useAlphaFromDiffuseTexture||r._useAlphaFromAlbedoTexture))&&(i.push("#define DIFFUSE"),a.isVerticesDataPresent(Mn.b.UV2Kind)&&1===c.coordinatesIndex?(i.push("#define DIFFUSEUV2"),u=!0):a.isVerticesDataPresent(Mn.b.UVKind)&&(i.push("#define DIFFUSEUV1"),s=!0),l&&(i.push("#define ALPHATEST"),i.push("#define ALPHATESTVALUE 0.4")));var h=r.opacityTexture;h&&(i.push("#define OPACITY"),a.isVerticesDataPresent(Mn.b.UV2Kind)&&1===h.coordinatesIndex?(i.push("#define OPACITYUV2"),u=!0):a.isVerticesDataPresent(Mn.b.UVKind)&&(i.push("#define OPACITYUV1"),s=!0))}n&&(i.push("#define EMISSIVE"),a.isVerticesDataPresent(Mn.b.UV2Kind)&&1===n.coordinatesIndex?(i.push("#define EMISSIVEUV2"),u=!0):a.isVerticesDataPresent(Mn.b.UVKind)&&(i.push("#define EMISSIVEUV1"),s=!0)),a.isVerticesDataPresent(Mn.b.ColorKind)&&a.hasVertexAlpha&&(o.push(Mn.b.ColorKind),i.push("#define VERTEXALPHA")),s&&(o.push(Mn.b.UVKind),i.push("#define UV1")),u&&(o.push(Mn.b.UV2Kind),i.push("#define UV2")),a.useBones&&a.computeBonesUsingShaders?(o.push(Mn.b.MatricesIndicesKind),o.push(Mn.b.MatricesWeightsKind),a.numBoneInfluencers>4&&(o.push(Mn.b.MatricesIndicesExtraKind),o.push(Mn.b.MatricesWeightsExtraKind)),i.push("#define NUM_BONE_INFLUENCERS "+a.numBoneInfluencers),i.push("#define BonesPerMesh "+(a.skeleton?a.skeleton.bones.length+1:0))):i.push("#define NUM_BONE_INFLUENCERS 0");var d=a.morphTargetManager,f=0;d&&d.numInfluencers>0&&(i.push("#define MORPHTARGETS"),i.push("#define NUM_MORPH_INFLUENCERS "+(f=d.numInfluencers)),Hr.a.PrepareAttributesForMorphTargets(o,a,{NUM_MORPH_INFLUENCERS:f})),t&&(i.push("#define INSTANCES"),o.push("world0"),o.push("world1"),o.push("world2"),o.push("world3")),this._addCustomEffectDefines(i);var p=i.join("\n");return this._cachedDefines!==p&&(this._cachedDefines=p,this._effectLayerMapGenerationEffect=this._scene.getEngine().createEffect("glowMapGeneration",o,["world","mBones","viewProjection","glowColor","morphTargetInfluences","diffuseMatrix","emissiveMatrix","opacityMatrix","opacityIntensity"],["diffuseSampler","emissiveSampler","opacitySampler"],p,void 0,void 0,void 0,{maxSimultaneousMorphTargets:f})),this._effectLayerMapGenerationEffect.isReady()},e.prototype.render=function(){var e=this._mergeEffect;if(e.isReady()){for(var t=0;t<this._postProcesses.length;t++)if(!this._postProcesses[t].isReady())return;var n=this._scene.getEngine();this.onBeforeComposeObservable.notifyObservers(this),n.enableEffect(e),n.setState(!1),n.bindBuffers(this._vertexBuffers,this._indexBuffer,e);var r=n.getAlphaMode();n.setAlphaMode(this._effectLayerOptions.alphaBlendingMode),this._internalRender(e),n.setAlphaMode(r),this.onAfterComposeObservable.notifyObservers(this);var i=this._mainTexture.getSize();this._setMainTextureSize(),i.width===this._mainTextureDesiredSize.width&&i.height===this._mainTextureDesiredSize.height||(this.onSizeChangedObservable.notifyObservers(this),this._disposeTextureAndPostProcesses(),this._createMainTexture(),this._createTextureAndPostProcesses())}},e.prototype.hasMesh=function(e){return-1===this.renderingGroupId||e.renderingGroupId===this.renderingGroupId},e.prototype.shouldRender=function(){return this.isEnabled&&this._shouldRender},e.prototype._shouldRenderMesh=function(e){return!0},e.prototype._canRenderMesh=function(e,t){return!t.needAlphaBlendingForMesh(e)},e.prototype._shouldRenderEmissiveTextureForMesh=function(){return!0},e.prototype._renderSubMesh=function(e,t){var n=this;if(void 0===t&&(t=!1),this.shouldRender()){var r=e.getMaterial(),i=e.getRenderingMesh(),o=this._scene,a=o.getEngine();if(i._internalAbstractMeshDataInfo._isActiveIntermediate=!1,r&&this._canRenderMesh(i,r)){a.setState(r.backFaceCulling);var s=i._getInstancesRenderList(e._id);if(!s.mustReturn&&this._shouldRenderMesh(i)){var u=s.hardwareInstancedRendering[e._id];if(this._setEmissiveTextureAndColor(i,e,r),this._isReady(e,u,this._emissiveTextureAndColor.texture)){a.enableEffect(this._effectLayerMapGenerationEffect),i._bind(e,this._effectLayerMapGenerationEffect,Ci.a.TriangleFillMode),this._effectLayerMapGenerationEffect.setMatrix("viewProjection",o.getTransformMatrix()),this._effectLayerMapGenerationEffect.setFloat4("glowColor",this._emissiveTextureAndColor.color.r,this._emissiveTextureAndColor.color.g,this._emissiveTextureAndColor.color.b,this._emissiveTextureAndColor.color.a);var l=r.needAlphaTesting(),c=r.getAlphaTestTexture();c&&(l||c&&c.hasAlpha&&(r.useAlphaFromDiffuseTexture||r._useAlphaFromAlbedoTexture))&&(this._effectLayerMapGenerationEffect.setTexture("diffuseSampler",c),(h=c.getTextureMatrix())&&this._effectLayerMapGenerationEffect.setMatrix("diffuseMatrix",h));var h,d=r.opacityTexture;d&&(this._effectLayerMapGenerationEffect.setTexture("opacitySampler",d),this._effectLayerMapGenerationEffect.setFloat("opacityIntensity",d.level),(h=d.getTextureMatrix())&&this._effectLayerMapGenerationEffect.setMatrix("opacityMatrix",h)),this._emissiveTextureAndColor.texture&&(this._effectLayerMapGenerationEffect.setTexture("emissiveSampler",this._emissiveTextureAndColor.texture),this._effectLayerMapGenerationEffect.setMatrix("emissiveMatrix",this._emissiveTextureAndColor.texture.getTextureMatrix())),i.useBones&&i.computeBonesUsingShaders&&i.skeleton&&this._effectLayerMapGenerationEffect.setMatrices("mBones",i.skeleton.getTransformMatrices(i)),Hr.a.BindMorphTargetParameters(i,this._effectLayerMapGenerationEffect),t&&a.setAlphaMode(r.alphaMode),i._processRendering(e,this._effectLayerMapGenerationEffect,Ci.a.TriangleFillMode,s,u,function(e,t){return n._effectLayerMapGenerationEffect.setMatrix("world",t)})}else this._mainTexture.resetRefreshCounter()}}}},e.prototype._rebuild=function(){var e=this._vertexBuffers[Mn.b.PositionKind];e&&e._rebuild(),this._generateIndexBuffer()},e.prototype._disposeTextureAndPostProcesses=function(){this._mainTexture.dispose();for(var e=0;e<this._postProcesses.length;e++)this._postProcesses[e]&&this._postProcesses[e].dispose();for(this._postProcesses=[],e=0;e<this._textures.length;e++)this._textures[e]&&this._textures[e].dispose();this._textures=[]},e.prototype.dispose=function(){var e=this._vertexBuffers[Mn.b.PositionKind];e&&(e.dispose(),this._vertexBuffers[Mn.b.PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null),this._disposeTextureAndPostProcesses();var t=this._scene.effectLayers.indexOf(this,0);t>-1&&this._scene.effectLayers.splice(t,1),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onBeforeRenderMainTextureObservable.clear(),this.onBeforeComposeObservable.clear(),this.onAfterComposeObservable.clear(),this.onSizeChangedObservable.clear()},e.prototype.getClassName=function(){return"EffectLayer"},e.Parse=function(e,t,n){return ye.h.Instantiate(e.customType).Parse(e,t,n)},e._SceneComponentInitialization=function(e){throw be.a.WarnImport("EffectLayerSceneComponent")},l.c([Object(L.c)()],e.prototype,"name",void 0),l.c([Object(L.f)()],e.prototype,"neutralColor",void 0),l.c([Object(L.c)()],e.prototype,"isEnabled",void 0),l.c([Object(L.d)()],e.prototype,"camera",null),l.c([Object(L.c)()],e.prototype,"renderingGroupId",null),e}();r.a.AddParser(xe.a.NAME_EFFECTLAYER,function(e,t,n,r){if(e.effectLayers){n.effectLayers||(n.effectLayers=new Array);for(var i=0;i<e.effectLayers.length;i++){var o=Pi.Parse(e.effectLayers[i],t,r);n.effectLayers.push(o)}}}),r.a.prototype.removeEffectLayer=function(e){var t=this.effectLayers.indexOf(e);return-1!==t&&this.effectLayers.splice(t,1),t},r.a.prototype.addEffectLayer=function(e){this.effectLayers.push(e)};var Ri=function(){function e(e){this.name=xe.a.NAME_EFFECTLAYER,this._renderEffects=!1,this._needStencil=!1,this._previousStencilState=!1,this.scene=e,this._engine=e.getEngine(),e.effectLayers=new Array}return e.prototype.register=function(){this.scene._isReadyForMeshStage.registerStep(xe.a.STEP_ISREADYFORMESH_EFFECTLAYER,this,this._isReadyForMesh),this.scene._cameraDrawRenderTargetStage.registerStep(xe.a.STEP_CAMERADRAWRENDERTARGET_EFFECTLAYER,this,this._renderMainTexture),this.scene._beforeCameraDrawStage.registerStep(xe.a.STEP_BEFORECAMERADRAW_EFFECTLAYER,this,this._setStencil),this.scene._afterRenderingGroupDrawStage.registerStep(xe.a.STEP_AFTERRENDERINGGROUPDRAW_EFFECTLAYER_DRAW,this,this._drawRenderingGroup),this.scene._afterCameraDrawStage.registerStep(xe.a.STEP_AFTERCAMERADRAW_EFFECTLAYER,this,this._setStencilBack),this.scene._afterCameraDrawStage.registerStep(xe.a.STEP_AFTERCAMERADRAW_EFFECTLAYER_DRAW,this,this._drawCamera)},e.prototype.rebuild=function(){for(var e=0,t=this.scene.effectLayers;e<t.length;e++)t[e]._rebuild()},e.prototype.serialize=function(e){e.effectLayers=[];for(var t=0,n=this.scene.effectLayers;t<n.length;t++){var r=n[t];r.serialize&&e.effectLayers.push(r.serialize())}},e.prototype.addFromContainer=function(e){var t=this;e.effectLayers&&e.effectLayers.forEach(function(e){t.scene.addEffectLayer(e)})},e.prototype.removeFromContainer=function(e,t){var n=this;e.effectLayers&&e.effectLayers.forEach(function(e){n.scene.removeEffectLayer(e),t&&e.dispose()})},e.prototype.dispose=function(){for(var e=this.scene.effectLayers;e.length;)e[0].dispose()},e.prototype._isReadyForMesh=function(e,t){for(var n=0,r=this.scene.effectLayers;n<r.length;n++){var i=r[n];if(i.hasMesh(e))for(var o=0,a=e.subMeshes;o<a.length;o++)if(!i.isReady(a[o],t))return!1}return!0},e.prototype._renderMainTexture=function(e){this._renderEffects=!1,this._needStencil=!1;var t=!1,n=this.scene.effectLayers;if(n&&n.length>0){this._previousStencilState=this._engine.getStencilBuffer();for(var r=0,i=n;r<i.length;r++){var o=i[r];if(o.shouldRender()&&(!o.camera||o.camera.cameraRigMode===Ne.a.RIG_MODE_NONE&&e===o.camera||o.camera.cameraRigMode!==Ne.a.RIG_MODE_NONE&&o.camera._rigCameras.indexOf(e)>-1)){this._renderEffects=!0,this._needStencil=this._needStencil||o.needStencil();var a=o._mainTexture;a._shouldRender()&&(this.scene.incrementRenderId(),a.render(!1,!1),t=!0)}}this.scene.incrementRenderId()}return t},e.prototype._setStencil=function(){this._needStencil&&this._engine.setStencilBuffer(!0)},e.prototype._setStencilBack=function(){this._needStencil&&this._engine.setStencilBuffer(this._previousStencilState)},e.prototype._draw=function(e){if(this._renderEffects){this._engine.setDepthBuffer(!1);for(var t=this.scene.effectLayers,n=0;n<t.length;n++){var r=t[n];r.renderingGroupId===e&&r.shouldRender()&&r.render()}this._engine.setDepthBuffer(!0)}},e.prototype._drawCamera=function(){this._renderEffects&&this._draw(-1)},e.prototype._drawRenderingGroup=function(e){!this.scene._isInIntermediateRendering()&&this._renderEffects&&this._draw(e)},e}();Pi._SceneComponentInitialization=function(e){var t=e._getComponent(xe.a.NAME_EFFECTLAYER);t||(t=new Ri(e),e._addComponent(t))},jt.a.ShadersStore.glowMapMergePixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n#ifdef EMISSIVE\nuniform sampler2D textureSampler2;\n#endif\n\nuniform float offset;\nvoid main(void) {\nvec4 baseColor=texture2D(textureSampler,vUV);\n#ifdef EMISSIVE\nbaseColor+=texture2D(textureSampler2,vUV);\nbaseColor*=offset;\n#else\nbaseColor.a=abs(offset-baseColor.a);\n#ifdef STROKE\nfloat alpha=smoothstep(.0,.1,baseColor.a);\nbaseColor.a=alpha;\nbaseColor.rgb=baseColor.rgb*alpha;\n#endif\n#endif\ngl_FragColor=baseColor;\n}",jt.a.ShadersStore.glowMapMergeVertexShader="\nattribute vec2 position;\n\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nvUV=position*madd+madd;\ngl_Position=vec4(position,0.0,1.0);\n}",r.a.prototype.getGlowLayerByName=function(e){for(var t=0;t<this.effectLayers.length;t++)if(this.effectLayers[t].name===e&&this.effectLayers[t].getEffectName()===Di.EffectName)return this.effectLayers[t];return null};var Di=function(e){function t(n,r,i){var a=e.call(this,n,r)||this;return a._intensity=1,a._includedOnlyMeshes=[],a._excludedMeshes=[],a.neutralColor=new o.f(0,0,0,1),a._options=l.a({mainTextureRatio:t.DefaultTextureRatio,blurKernelSize:32,mainTextureFixedSize:void 0,camera:null,mainTextureSamples:1,renderingGroupId:-1},i),a._init({alphaBlendingMode:_.a.ALPHA_ADD,camera:a._options.camera,mainTextureFixedSize:a._options.mainTextureFixedSize,mainTextureRatio:a._options.mainTextureRatio,renderingGroupId:a._options.renderingGroupId}),a}return l.d(t,e),Object.defineProperty(t.prototype,"blurKernelSize",{get:function(){return this._horizontalBlurPostprocess1.kernel},set:function(e){this._horizontalBlurPostprocess1.kernel=e,this._verticalBlurPostprocess1.kernel=e,this._horizontalBlurPostprocess2.kernel=e,this._verticalBlurPostprocess2.kernel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"intensity",{get:function(){return this._intensity},set:function(e){this._intensity=e},enumerable:!0,configurable:!0}),t.prototype.getEffectName=function(){return t.EffectName},t.prototype._createMergeEffect=function(){return this._engine.createEffect("glowMapMerge",[Mn.b.PositionKind],["offset"],["textureSampler","textureSampler2"],"#define EMISSIVE \n")},t.prototype._createTextureAndPostProcesses=function(){var e,t=this,n=this._mainTextureDesiredSize.width,r=this._mainTextureDesiredSize.height;n=this._engine.needPOTTextures?ye.h.GetExponentOfTwo(n,this._maxSize):n,r=this._engine.needPOTTextures?ye.h.GetExponentOfTwo(r,this._maxSize):r,e=this._engine.getCaps().textureHalfFloatRender?_.a.TEXTURETYPE_HALF_FLOAT:_.a.TEXTURETYPE_UNSIGNED_INT,this._blurTexture1=new ln("GlowLayerBlurRTT",{width:n,height:r},this._scene,!1,!0,e),this._blurTexture1.wrapU=Ge.a.CLAMP_ADDRESSMODE,this._blurTexture1.wrapV=Ge.a.CLAMP_ADDRESSMODE,this._blurTexture1.updateSamplingMode(Ge.a.BILINEAR_SAMPLINGMODE),this._blurTexture1.renderParticles=!1,this._blurTexture1.ignoreCameraViewport=!0;var i=Math.floor(n/2),a=Math.floor(r/2);this._blurTexture2=new ln("GlowLayerBlurRTT2",{width:i,height:a},this._scene,!1,!0,e),this._blurTexture2.wrapU=Ge.a.CLAMP_ADDRESSMODE,this._blurTexture2.wrapV=Ge.a.CLAMP_ADDRESSMODE,this._blurTexture2.updateSamplingMode(Ge.a.BILINEAR_SAMPLINGMODE),this._blurTexture2.renderParticles=!1,this._blurTexture2.ignoreCameraViewport=!0,this._textures=[this._blurTexture1,this._blurTexture2],this._horizontalBlurPostprocess1=new jr("GlowLayerHBP1",new o.w(1,0),this._options.blurKernelSize/2,{width:n,height:r},null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,e),this._horizontalBlurPostprocess1.width=n,this._horizontalBlurPostprocess1.height=r,this._horizontalBlurPostprocess1.onApplyObservable.add(function(e){e.setTexture("textureSampler",t._mainTexture)}),this._verticalBlurPostprocess1=new jr("GlowLayerVBP1",new o.w(0,1),this._options.blurKernelSize/2,{width:n,height:r},null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,e),this._horizontalBlurPostprocess2=new jr("GlowLayerHBP2",new o.w(1,0),this._options.blurKernelSize/2,{width:i,height:a},null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,e),this._horizontalBlurPostprocess2.width=i,this._horizontalBlurPostprocess2.height=a,this._horizontalBlurPostprocess2.onApplyObservable.add(function(e){e.setTexture("textureSampler",t._blurTexture1)}),this._verticalBlurPostprocess2=new jr("GlowLayerVBP2",new o.w(0,1),this._options.blurKernelSize/2,{width:i,height:a},null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,e),this._postProcesses=[this._horizontalBlurPostprocess1,this._verticalBlurPostprocess1,this._horizontalBlurPostprocess2,this._verticalBlurPostprocess2],this._postProcesses1=[this._horizontalBlurPostprocess1,this._verticalBlurPostprocess1],this._postProcesses2=[this._horizontalBlurPostprocess2,this._verticalBlurPostprocess2],this._mainTexture.samples=this._options.mainTextureSamples,this._mainTexture.onAfterUnbindObservable.add(function(){var e=t._blurTexture1.getInternalTexture();e&&(t._scene.postProcessManager.directRender(t._postProcesses1,e,!0),(e=t._blurTexture2.getInternalTexture())&&t._scene.postProcessManager.directRender(t._postProcesses2,e,!0))}),this._postProcesses.map(function(e){e.autoClear=!1})},t.prototype.isReady=function(t,n){var r=t.getMaterial(),i=t.getRenderingMesh();return!(!r||!i)&&e.prototype._isReady.call(this,t,n,r.emissiveTexture)},t.prototype.needStencil=function(){return!1},t.prototype._canRenderMesh=function(e,t){return!0},t.prototype._internalRender=function(e){e.setTexture("textureSampler",this._blurTexture1),e.setTexture("textureSampler2",this._blurTexture2),e.setFloat("offset",this._intensity);var t=this._engine,n=t.getStencilBuffer();t.setStencilBuffer(!1),t.drawElementsType(Ci.a.TriangleFillMode,0,6),t.setStencilBuffer(n)},t.prototype._setEmissiveTextureAndColor=function(e,t,n){var r=1;this.customEmissiveTextureSelector?this._emissiveTextureAndColor.texture=this.customEmissiveTextureSelector(e,t,n):n?(this._emissiveTextureAndColor.texture=n.emissiveTexture,this._emissiveTextureAndColor.texture&&(r=this._emissiveTextureAndColor.texture.level)):this._emissiveTextureAndColor.texture=null,this.customEmissiveColorSelector?this.customEmissiveColorSelector(e,t,n,this._emissiveTextureAndColor.color):n.emissiveColor?this._emissiveTextureAndColor.color.set(n.emissiveColor.r*r,n.emissiveColor.g*r,n.emissiveColor.b*r,n.alpha):this._emissiveTextureAndColor.color.set(this.neutralColor.r,this.neutralColor.g,this.neutralColor.b,this.neutralColor.a)},t.prototype._shouldRenderMesh=function(e){return this.hasMesh(e)},t.prototype._addCustomEffectDefines=function(e){e.push("#define GLOW")},t.prototype.addExcludedMesh=function(e){-1===this._excludedMeshes.indexOf(e.uniqueId)&&this._excludedMeshes.push(e.uniqueId)},t.prototype.removeExcludedMesh=function(e){var t=this._excludedMeshes.indexOf(e.uniqueId);-1!==t&&this._excludedMeshes.splice(t,1)},t.prototype.addIncludedOnlyMesh=function(e){-1===this._includedOnlyMeshes.indexOf(e.uniqueId)&&this._includedOnlyMeshes.push(e.uniqueId)},t.prototype.removeIncludedOnlyMesh=function(e){var t=this._includedOnlyMeshes.indexOf(e.uniqueId);-1!==t&&this._includedOnlyMeshes.splice(t,1)},t.prototype.hasMesh=function(t){return!!e.prototype.hasMesh.call(this,t)&&(this._includedOnlyMeshes.length?-1!==this._includedOnlyMeshes.indexOf(t.uniqueId):!this._excludedMeshes.length||-1===this._excludedMeshes.indexOf(t.uniqueId))},t.prototype._disposeMesh=function(e){this.removeIncludedOnlyMesh(e),this.removeExcludedMesh(e)},t.prototype.getClassName=function(){return"GlowLayer"},t.prototype.serialize=function(){var e,t=L.a.Serialize(this);if(t.customType="BABYLON.GlowLayer",t.includedMeshes=[],this._includedOnlyMeshes.length)for(e=0;e<this._includedOnlyMeshes.length;e++)(n=this._scene.getMeshByUniqueID(this._includedOnlyMeshes[e]))&&t.includedMeshes.push(n.id);if(t.excludedMeshes=[],this._excludedMeshes.length)for(e=0;e<this._excludedMeshes.length;e++){var n;(n=this._scene.getMeshByUniqueID(this._excludedMeshes[e]))&&t.excludedMeshes.push(n.id)}return t},t.Parse=function(e,n,r){var i,o=L.a.Parse(function(){return new t(e.name,n,e.options)},e,n,r);for(i=0;i<e.excludedMeshes.length;i++)(a=n.getMeshByID(e.excludedMeshes[i]))&&o.addExcludedMesh(a);for(i=0;i<e.includedMeshes.length;i++){var a;(a=n.getMeshByID(e.includedMeshes[i]))&&o.addIncludedOnlyMesh(a)}return o},t.EffectName="GlowLayer",t.DefaultBlurKernelSize=32,t.DefaultTextureRatio=.5,l.c([Object(L.c)()],t.prototype,"blurKernelSize",null),l.c([Object(L.c)()],t.prototype,"intensity",null),l.c([Object(L.c)("options")],t.prototype,"_options",void 0),t}(Pi);a.a.RegisteredTypes["BABYLON.GlowLayer"]=Di,jt.a.ShadersStore.glowBlurPostProcessPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform vec2 screenSize;\nuniform vec2 direction;\nuniform float blurWidth;\n\nfloat getLuminance(vec3 color)\n{\nreturn dot(color,vec3(0.2126,0.7152,0.0722));\n}\nvoid main(void)\n{\nfloat weights[7];\nweights[0]=0.05;\nweights[1]=0.1;\nweights[2]=0.2;\nweights[3]=0.3;\nweights[4]=0.2;\nweights[5]=0.1;\nweights[6]=0.05;\nvec2 texelSize=vec2(1.0/screenSize.x,1.0/screenSize.y);\nvec2 texelStep=texelSize*direction*blurWidth;\nvec2 start=vUV-3.0*texelStep;\nvec4 baseColor=vec4(0.,0.,0.,0.);\nvec2 texelOffset=vec2(0.,0.);\nfor (int i=0; i<7; i++)\n{\n\nvec4 texel=texture2D(textureSampler,start+texelOffset);\nbaseColor.a+=texel.a*weights[i];\n\nfloat luminance=getLuminance(baseColor.rgb);\nfloat luminanceTexel=getLuminance(texel.rgb);\nfloat choice=step(luminanceTexel,luminance);\nbaseColor.rgb=choice*baseColor.rgb+(1.0-choice)*texel.rgb;\ntexelOffset+=texelStep;\n}\ngl_FragColor=baseColor;\n}",r.a.prototype.getHighlightLayerByName=function(e){for(var t=0;t<this.effectLayers.length;t++)if(this.effectLayers[t].name===e&&this.effectLayers[t].getEffectName()===wi.EffectName)return this.effectLayers[t];return null};var Oi=function(e){function t(t,n,r,i,o,a,s,u){void 0===a&&(a=Ge.a.BILINEAR_SAMPLINGMODE);var l=e.call(this,t,"glowBlurPostProcess",["screenSize","direction","blurWidth"],null,i,o,a,s,u)||this;return l.direction=n,l.kernel=r,l.onApplyObservable.add(function(e){e.setFloat2("screenSize",l.width,l.height),e.setVector2("direction",l.direction),e.setFloat("blurWidth",l.kernel)}),l}return l.d(t,e),t}(zt),wi=function(e){function t(n,r,o){var a=e.call(this,n,r)||this;return a.name=n,a.innerGlow=!0,a.outerGlow=!0,a.onBeforeBlurObservable=new i.c,a.onAfterBlurObservable=new i.c,a._instanceGlowingMeshStencilReference=t.GlowingMeshStencilReference++,a._meshes={},a._excludedMeshes={},a.neutralColor=t.NeutralColor,a._engine.isStencilEnable||p.a.Warn("Rendering the Highlight Layer requires the stencil to be active on the canvas. var engine = new Engine(canvas, antialias, { stencil: true }"),a._options=l.a({mainTextureRatio:.5,blurTextureSizeRatio:.5,blurHorizontalSize:1,blurVerticalSize:1,alphaBlendingMode:_.a.ALPHA_COMBINE,camera:null,renderingGroupId:-1},o),a._init({alphaBlendingMode:a._options.alphaBlendingMode,camera:a._options.camera,mainTextureFixedSize:a._options.mainTextureFixedSize,mainTextureRatio:a._options.mainTextureRatio,renderingGroupId:a._options.renderingGroupId}),a._shouldRender=!1,a}return l.d(t,e),Object.defineProperty(t.prototype,"blurHorizontalSize",{get:function(){return this._horizontalBlurPostprocess.kernel},set:function(e){this._horizontalBlurPostprocess.kernel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurVerticalSize",{get:function(){return this._verticalBlurPostprocess.kernel},set:function(e){this._verticalBlurPostprocess.kernel=e},enumerable:!0,configurable:!0}),t.prototype.getEffectName=function(){return t.EffectName},t.prototype._createMergeEffect=function(){return this._engine.createEffect("glowMapMerge",[Mn.b.PositionKind],["offset"],["textureSampler"],this._options.isStroke?"#define STROKE \n":void 0)},t.prototype._createTextureAndPostProcesses=function(){var e,t=this,n=this._mainTextureDesiredSize.width*this._options.blurTextureSizeRatio,r=this._mainTextureDesiredSize.height*this._options.blurTextureSizeRatio;n=this._engine.needPOTTextures?ye.h.GetExponentOfTwo(n,this._maxSize):n,r=this._engine.needPOTTextures?ye.h.GetExponentOfTwo(r,this._maxSize):r,e=this._engine.getCaps().textureHalfFloatRender?_.a.TEXTURETYPE_HALF_FLOAT:_.a.TEXTURETYPE_UNSIGNED_INT,this._blurTexture=new ln("HighlightLayerBlurRTT",{width:n,height:r},this._scene,!1,!0,e),this._blurTexture.wrapU=Ge.a.CLAMP_ADDRESSMODE,this._blurTexture.wrapV=Ge.a.CLAMP_ADDRESSMODE,this._blurTexture.anisotropicFilteringLevel=16,this._blurTexture.updateSamplingMode(Ge.a.TRILINEAR_SAMPLINGMODE),this._blurTexture.renderParticles=!1,this._blurTexture.ignoreCameraViewport=!0,this._textures=[this._blurTexture],this._options.alphaBlendingMode===_.a.ALPHA_COMBINE?(this._downSamplePostprocess=new Yt("HighlightLayerPPP",this._options.blurTextureSizeRatio,null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine()),this._downSamplePostprocess.onApplyObservable.add(function(e){e.setTexture("textureSampler",t._mainTexture)}),this._horizontalBlurPostprocess=new Oi("HighlightLayerHBP",new o.w(1,0),this._options.blurHorizontalSize,1,null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine()),this._horizontalBlurPostprocess.onApplyObservable.add(function(e){e.setFloat2("screenSize",n,r)}),this._verticalBlurPostprocess=new Oi("HighlightLayerVBP",new o.w(0,1),this._options.blurVerticalSize,1,null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine()),this._verticalBlurPostprocess.onApplyObservable.add(function(e){e.setFloat2("screenSize",n,r)}),this._postProcesses=[this._downSamplePostprocess,this._horizontalBlurPostprocess,this._verticalBlurPostprocess]):(this._horizontalBlurPostprocess=new jr("HighlightLayerHBP",new o.w(1,0),this._options.blurHorizontalSize/2,{width:n,height:r},null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,e),this._horizontalBlurPostprocess.width=n,this._horizontalBlurPostprocess.height=r,this._horizontalBlurPostprocess.onApplyObservable.add(function(e){e.setTexture("textureSampler",t._mainTexture)}),this._verticalBlurPostprocess=new jr("HighlightLayerVBP",new o.w(0,1),this._options.blurVerticalSize/2,{width:n,height:r},null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,e),this._postProcesses=[this._horizontalBlurPostprocess,this._verticalBlurPostprocess]),this._mainTexture.onAfterUnbindObservable.add(function(){t.onBeforeBlurObservable.notifyObservers(t);var e=t._blurTexture.getInternalTexture();e&&t._scene.postProcessManager.directRender(t._postProcesses,e,!0),t.onAfterBlurObservable.notifyObservers(t)}),this._postProcesses.map(function(e){e.autoClear=!1})},t.prototype.needStencil=function(){return!0},t.prototype.isReady=function(t,n){var r=t.getMaterial(),i=t.getRenderingMesh();if(!r||!i||!this._meshes)return!1;var o=null,a=this._meshes[i.uniqueId];return a&&a.glowEmissiveOnly&&r&&(o=r.emissiveTexture),e.prototype._isReady.call(this,t,n,o)},t.prototype._internalRender=function(e){e.setTexture("textureSampler",this._blurTexture);var t=this._engine;t.cacheStencilState(),t.setStencilOperationPass(_.a.REPLACE),t.setStencilOperationFail(_.a.KEEP),t.setStencilOperationDepthFail(_.a.KEEP),t.setStencilMask(0),t.setStencilBuffer(!0),t.setStencilFunctionReference(this._instanceGlowingMeshStencilReference),this.outerGlow&&(e.setFloat("offset",0),t.setStencilFunction(_.a.NOTEQUAL),t.drawElementsType(Ci.a.TriangleFillMode,0,6)),this.innerGlow&&(e.setFloat("offset",1),t.setStencilFunction(_.a.EQUAL),t.drawElementsType(Ci.a.TriangleFillMode,0,6)),t.restoreStencilState()},t.prototype.shouldRender=function(){return!!e.prototype.shouldRender.call(this)&&!!this._meshes},t.prototype._shouldRenderMesh=function(t){return!(this._excludedMeshes&&this._excludedMeshes[t.uniqueId]||!e.prototype.hasMesh.call(this,t))},t.prototype._setEmissiveTextureAndColor=function(e,t,n){var r=this._meshes[e.uniqueId];r?this._emissiveTextureAndColor.color.set(r.color.r,r.color.g,r.color.b,1):this._emissiveTextureAndColor.color.set(this.neutralColor.r,this.neutralColor.g,this.neutralColor.b,this.neutralColor.a),r&&r.glowEmissiveOnly&&n?(this._emissiveTextureAndColor.texture=n.emissiveTexture,this._emissiveTextureAndColor.color.set(1,1,1,1)):this._emissiveTextureAndColor.texture=null},t.prototype.addExcludedMesh=function(e){this._excludedMeshes&&(this._excludedMeshes[e.uniqueId]||(this._excludedMeshes[e.uniqueId]={mesh:e,beforeBind:e.onBeforeBindObservable.add(function(e){e.getEngine().setStencilBuffer(!1)}),afterRender:e.onAfterRenderObservable.add(function(e){e.getEngine().setStencilBuffer(!0)})}))},t.prototype.removeExcludedMesh=function(e){if(this._excludedMeshes){var t=this._excludedMeshes[e.uniqueId];t&&(t.beforeBind&&e.onBeforeBindObservable.remove(t.beforeBind),t.afterRender&&e.onAfterRenderObservable.remove(t.afterRender)),this._excludedMeshes[e.uniqueId]=null}},t.prototype.hasMesh=function(t){return!!this._meshes&&!!e.prototype.hasMesh.call(this,t)&&null!=this._meshes[t.uniqueId]},t.prototype.addMesh=function(e,t,n){var r=this;if(void 0===n&&(n=!1),this._meshes){var i=this._meshes[e.uniqueId];i?i.color=t:(this._meshes[e.uniqueId]={mesh:e,color:t,observerHighlight:e.onBeforeBindObservable.add(function(e){r._excludedMeshes&&r._excludedMeshes[e.uniqueId]?r._defaultStencilReference(e):e.getScene().getEngine().setStencilFunctionReference(r._instanceGlowingMeshStencilReference)}),observerDefault:e.onAfterRenderObservable.add(this._defaultStencilReference),glowEmissiveOnly:n},e.onDisposeObservable.add(function(){r._disposeMesh(e)})),this._shouldRender=!0}},t.prototype.removeMesh=function(e){if(this._meshes){var t=this._meshes[e.uniqueId];for(var n in t&&(t.observerHighlight&&e.onBeforeBindObservable.remove(t.observerHighlight),t.observerDefault&&e.onAfterRenderObservable.remove(t.observerDefault),delete this._meshes[e.uniqueId]),this._shouldRender=!1,this._meshes)if(this._meshes[n]){this._shouldRender=!0;break}}},t.prototype._defaultStencilReference=function(e){e.getScene().getEngine().setStencilFunctionReference(t.NormalMeshStencilReference)},t.prototype._disposeMesh=function(e){this.removeMesh(e),this.removeExcludedMesh(e)},t.prototype.dispose=function(){if(this._meshes){for(var t in this._meshes)(n=this._meshes[t])&&n.mesh&&(n.observerHighlight&&n.mesh.onBeforeBindObservable.remove(n.observerHighlight),n.observerDefault&&n.mesh.onAfterRenderObservable.remove(n.observerDefault));this._meshes=null}if(this._excludedMeshes){for(var t in this._excludedMeshes){var n;(n=this._excludedMeshes[t])&&(n.beforeBind&&n.mesh.onBeforeBindObservable.remove(n.beforeBind),n.afterRender&&n.mesh.onAfterRenderObservable.remove(n.afterRender))}this._excludedMeshes=null}e.prototype.dispose.call(this)},t.prototype.getClassName=function(){return"HighlightLayer"},t.prototype.serialize=function(){var e=L.a.Serialize(this);if(e.customType="BABYLON.HighlightLayer",e.meshes=[],this._meshes)for(var t in this._meshes){var n=this._meshes[t];n&&e.meshes.push({glowEmissiveOnly:n.glowEmissiveOnly,color:n.color.asArray(),meshId:n.mesh.id})}if(e.excludedMeshes=[],this._excludedMeshes)for(var r in this._excludedMeshes){var i=this._excludedMeshes[r];i&&e.excludedMeshes.push(i.mesh.id)}return e},t.Parse=function(e,n,r){var i,a=L.a.Parse(function(){return new t(e.name,n,e.options)},e,n,r);for(i=0;i<e.excludedMeshes.length;i++)(s=n.getMeshByID(e.excludedMeshes[i]))&&a.addExcludedMesh(s);for(i=0;i<e.meshes.length;i++){var s,u=e.meshes[i];(s=n.getMeshByID(u.meshId))&&a.addMesh(s,o.e.FromArray(u.color),u.glowEmissiveOnly)}return a},t.EffectName="HighlightLayer",t.NeutralColor=new o.f(0,0,0,0),t.GlowingMeshStencilReference=2,t.NormalMeshStencilReference=1,l.c([Object(L.c)()],t.prototype,"innerGlow",void 0),l.c([Object(L.c)()],t.prototype,"outerGlow",void 0),l.c([Object(L.c)()],t.prototype,"blurHorizontalSize",null),l.c([Object(L.c)()],t.prototype,"blurVerticalSize",null),l.c([Object(L.c)("options")],t.prototype,"_options",void 0),t}(Pi);a.a.RegisteredTypes["BABYLON.HighlightLayer"]=wi;var Li=function(){function e(e){this.name=xe.a.NAME_LAYER,this.scene=e,this._engine=e.getEngine(),e.layers=new Array}return e.prototype.register=function(){this.scene._beforeCameraDrawStage.registerStep(xe.a.STEP_BEFORECAMERADRAW_LAYER,this,this._drawCameraBackground),this.scene._afterCameraDrawStage.registerStep(xe.a.STEP_AFTERCAMERADRAW_LAYER,this,this._drawCameraForeground),this.scene._beforeRenderTargetDrawStage.registerStep(xe.a.STEP_BEFORERENDERTARGETDRAW_LAYER,this,this._drawRenderTargetBackground),this.scene._afterRenderTargetDrawStage.registerStep(xe.a.STEP_AFTERRENDERTARGETDRAW_LAYER,this,this._drawRenderTargetForeground)},e.prototype.rebuild=function(){for(var e=0,t=this.scene.layers;e<t.length;e++)t[e]._rebuild()},e.prototype.dispose=function(){for(var e=this.scene.layers;e.length;)e[0].dispose()},e.prototype._draw=function(e){var t=this.scene.layers;if(t.length){this._engine.setDepthBuffer(!1);for(var n=0,r=t;n<r.length;n++){var i=r[n];e(i)&&i.render()}this._engine.setDepthBuffer(!0)}},e.prototype._drawCameraPredicate=function(e,t,n){return!e.renderOnlyInRenderTargetTextures&&e.isBackground===t&&0!=(e.layerMask&n)},e.prototype._drawCameraBackground=function(e){var t=this;this._draw(function(n){return t._drawCameraPredicate(n,!0,e.layerMask)})},e.prototype._drawCameraForeground=function(e){var t=this;this._draw(function(n){return t._drawCameraPredicate(n,!1,e.layerMask)})},e.prototype._drawRenderTargetPredicate=function(e,t,n,r){return e.renderTargetTextures.length>0&&e.isBackground===t&&e.renderTargetTextures.indexOf(r)>-1&&0!=(e.layerMask&n)},e.prototype._drawRenderTargetBackground=function(e){var t=this;this._draw(function(n){return t._drawRenderTargetPredicate(n,!0,t.scene.activeCamera.layerMask,e)})},e.prototype._drawRenderTargetForeground=function(e){var t=this;this._draw(function(n){return t._drawRenderTargetPredicate(n,!1,t.scene.activeCamera.layerMask,e)})},e}();jt.a.ShadersStore.layerPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform vec4 color;\nvoid main(void) {\nvec4 baseColor=texture2D(textureSampler,vUV);\n#ifdef ALPHATEST\nif (baseColor.a<0.4)\ndiscard;\n#endif\ngl_FragColor=baseColor*color;\n}",jt.a.ShadersStore.layerVertexShader="\nattribute vec2 position;\n\nuniform vec2 scale;\nuniform vec2 offset;\nuniform mat4 textureMatrix;\n\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nvec2 shiftedPosition=position*scale+offset;\nvUV=vec2(textureMatrix*vec4(shiftedPosition*madd+madd,1.0,0.0));\ngl_Position=vec4(shiftedPosition,0.0,1.0);\n}";var Ii=function(){function e(e,t,n,r,a){this.name=e,this.scale=new o.w(1,1),this.offset=new o.w(0,0),this.alphaBlendingMode=_.a.ALPHA_COMBINE,this.layerMask=268435455,this.renderTargetTextures=[],this.renderOnlyInRenderTargetTextures=!1,this._vertexBuffers={},this.onDisposeObservable=new i.c,this.onBeforeRenderObservable=new i.c,this.onAfterRenderObservable=new i.c,this.texture=t?new Ge.a(t,n,!0):null,this.isBackground=void 0===r||r,this.color=void 0===a?new o.f(1,1,1,1):a,this._scene=n||S.a.LastCreatedScene;var s=this._scene._getComponent(xe.a.NAME_LAYER);s||(s=new Li(this._scene),this._scene._addComponent(s)),this._scene.layers.push(this);var u=this._scene.getEngine(),l=[];l.push(1,1),l.push(-1,1),l.push(-1,-1),l.push(1,-1);var c=new Mn.b(u,l,Mn.b.PositionKind,!1,!1,2);this._vertexBuffers[Mn.b.PositionKind]=c,this._createIndexBuffer(),this._effect=u.createEffect("layer",[Mn.b.PositionKind],["textureMatrix","color","scale","offset"],["textureSampler"],""),this._alphaTestEffect=u.createEffect("layer",[Mn.b.PositionKind],["textureMatrix","color","scale","offset"],["textureSampler"],"#define ALPHATEST")}return Object.defineProperty(e.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onBeforeRender",{set:function(e){this._onBeforeRenderObserver&&this.onBeforeRenderObservable.remove(this._onBeforeRenderObserver),this._onBeforeRenderObserver=this.onBeforeRenderObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onAfterRender",{set:function(e){this._onAfterRenderObserver&&this.onAfterRenderObservable.remove(this._onAfterRenderObserver),this._onAfterRenderObserver=this.onAfterRenderObservable.add(e)},enumerable:!0,configurable:!0}),e.prototype._createIndexBuffer=function(){var e=this._scene.getEngine(),t=[];t.push(0),t.push(1),t.push(2),t.push(0),t.push(2),t.push(3),this._indexBuffer=e.createIndexBuffer(t)},e.prototype._rebuild=function(){var e=this._vertexBuffers[Mn.b.PositionKind];e&&e._rebuild(),this._createIndexBuffer()},e.prototype.render=function(){var e=this.alphaTest?this._alphaTestEffect:this._effect;if(e.isReady()&&this.texture&&this.texture.isReady()){var t=this._scene.getEngine();this.onBeforeRenderObservable.notifyObservers(this),t.enableEffect(e),t.setState(!1),e.setTexture("textureSampler",this.texture),e.setMatrix("textureMatrix",this.texture.getTextureMatrix()),e.setFloat4("color",this.color.r,this.color.g,this.color.b,this.color.a),e.setVector2("offset",this.offset),e.setVector2("scale",this.scale),t.bindBuffers(this._vertexBuffers,this._indexBuffer,e),this.alphaTest?t.drawElementsType(Ci.a.TriangleFillMode,0,6):(t.setAlphaMode(this.alphaBlendingMode),t.drawElementsType(Ci.a.TriangleFillMode,0,6),t.setAlphaMode(_.a.ALPHA_DISABLE)),this.onAfterRenderObservable.notifyObservers(this)}},e.prototype.dispose=function(){var e=this._vertexBuffers[Mn.b.PositionKind];e&&(e.dispose(),this._vertexBuffers[Mn.b.PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null),this.texture&&(this.texture.dispose(),this.texture=null),this.renderTargetTextures=[];var t=this._scene.layers.indexOf(this);this._scene.layers.splice(t,1),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.onAfterRenderObservable.clear(),this.onBeforeRenderObservable.clear()},e}(),Fi=function(){function e(e,t,n,r,i){this.size=e,this.position=t,this.alphaMode=_.a.ALPHA_ONEONE,this.color=n||new o.e(1,1,1),this.texture=r?new Ge.a(r,i.getScene(),!0):null,this._system=i,i.lensFlares.push(this)}return e.AddFlare=function(t,n,r,i,o){return new e(t,n,r,i,o)},e.prototype.dispose=function(){this.texture&&this.texture.dispose();var e=this._system.lensFlares.indexOf(this);this._system.lensFlares.splice(e,1)},e}();jt.a.ShadersStore.lensFlarePixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform vec4 color;\nvoid main(void) {\nvec4 baseColor=texture2D(textureSampler,vUV);\ngl_FragColor=baseColor*color;\n}",jt.a.ShadersStore.lensFlareVertexShader="\nattribute vec2 position;\n\nuniform mat4 viewportMatrix;\n\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nvUV=position*madd+madd;\ngl_Position=viewportMatrix*vec4(position,0.0,1.0);\n}";var Ni=function(){function e(t,n,r){this.name=t,this.lensFlares=new Array,this.borderLimit=300,this.viewportBorder=0,this.layerMask=268435455,this._vertexBuffers={},this._isEnabled=!0,this._scene=r||S.a.LastCreatedScene,e._SceneComponentInitialization(this._scene),this._emitter=n,this.id=t,r.lensFlareSystems.push(this),this.meshesSelectionPredicate=function(e){return r.activeCamera&&e.material&&e.isVisible&&e.isEnabled()&&e.isBlocker&&0!=(e.layerMask&r.activeCamera.layerMask)};var i=r.getEngine(),o=[];o.push(1,1),o.push(-1,1),o.push(-1,-1),o.push(1,-1),this._vertexBuffers[Mn.b.PositionKind]=new Mn.b(i,o,Mn.b.PositionKind,!1,!1,2);var a=[];a.push(0),a.push(1),a.push(2),a.push(0),a.push(2),a.push(3),this._indexBuffer=i.createIndexBuffer(a),this._effect=i.createEffect("lensFlare",[Mn.b.PositionKind],["color","viewportMatrix"],["textureSampler"],"")}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(e){this._isEnabled=e},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},e.prototype.getEmitter=function(){return this._emitter},e.prototype.setEmitter=function(e){this._emitter=e},e.prototype.getEmitterPosition=function(){return this._emitter.getAbsolutePosition?this._emitter.getAbsolutePosition():this._emitter.position},e.prototype.computeEffectivePosition=function(e){var t=this.getEmitterPosition();return t=o.x.Project(t,o.j.Identity(),this._scene.getTransformMatrix(),e),this._positionX=t.x,this._positionY=t.y,t=o.x.TransformCoordinates(this.getEmitterPosition(),this._scene.getViewMatrix()),this.viewportBorder>0&&(e.x-=this.viewportBorder,e.y-=this.viewportBorder,e.width+=2*this.viewportBorder,e.height+=2*this.viewportBorder,t.x+=this.viewportBorder,t.y+=this.viewportBorder,this._positionX+=this.viewportBorder,this._positionY+=this.viewportBorder),t.z>0&&!0},e.prototype._isVisible=function(){if(!this._isEnabled||!this._scene.activeCamera)return!1;var e=this.getEmitterPosition().subtract(this._scene.activeCamera.globalPosition),t=e.length();e.normalize();var n=new Ot.a(this._scene.activeCamera.globalPosition,e),r=this._scene.pickWithRay(n,this.meshesSelectionPredicate,!0);return!r||!r.hit||r.distance>t},e.prototype.render=function(){if(!this._effect.isReady()||!this._scene.activeCamera)return!1;var e,t,n=this._scene.getEngine(),r=this._scene.activeCamera.viewport.toGlobal(n.getRenderWidth(!0),n.getRenderHeight(!0));if(!this.computeEffectivePosition(r))return!1;if(!this._isVisible())return!1;var i=(e=this._positionX<this.borderLimit+r.x?this.borderLimit+r.x-this._positionX:this._positionX>r.x+r.width-this.borderLimit?this._positionX-r.x-r.width+this.borderLimit:0)>(t=this._positionY<this.borderLimit+r.y?this.borderLimit+r.y-this._positionY:this._positionY>r.y+r.height-this.borderLimit?this._positionY-r.y-r.height+this.borderLimit:0)?e:t;(i-=this.viewportBorder)>this.borderLimit&&(i=this.borderLimit);var a=1-w.a.Clamp(i/this.borderLimit,0,1);if(a<0)return!1;a>1&&(a=1),this.viewportBorder>0&&(r.x+=this.viewportBorder,r.y+=this.viewportBorder,r.width-=2*this.viewportBorder,r.height-=2*this.viewportBorder,this._positionX-=this.viewportBorder,this._positionY-=this.viewportBorder);var s=r.x+r.width/2,u=r.y+r.height/2,l=s-this._positionX,c=u-this._positionY;n.enableEffect(this._effect),n.setState(!1),n.setDepthBuffer(!1),n.bindBuffers(this._vertexBuffers,this._indexBuffer,this._effect);for(var h=0;h<this.lensFlares.length;h++){var d=this.lensFlares[h];n.setAlphaMode(d.alphaMode);var f=s-l*d.position,p=u-c*d.position,m=d.size,g=d.size*n.getAspectRatio(this._scene.activeCamera,!0),v=o.j.FromValues(m/2,0,0,0,0,g/2,0,0,0,0,1,0,f/(r.width+2*r.x)*2-1,1-p/(r.height+2*r.y)*2,0,1);this._effect.setMatrix("viewportMatrix",v),this._effect.setTexture("textureSampler",d.texture),this._effect.setFloat4("color",d.color.r*a,d.color.g*a,d.color.b*a,1),n.drawElementsType(Ci.a.TriangleFillMode,0,6)}return n.setDepthBuffer(!0),n.setAlphaMode(_.a.ALPHA_DISABLE),!0},e.prototype.dispose=function(){var e=this._vertexBuffers[Mn.b.PositionKind];for(e&&(e.dispose(),this._vertexBuffers[Mn.b.PositionKind]=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null);this.lensFlares.length;)this.lensFlares[0].dispose();var t=this._scene.lensFlareSystems.indexOf(this);this._scene.lensFlareSystems.splice(t,1)},e.Parse=function(t,n,r){var i=n.getLastEntryByID(t.emitterId),a=t.name||"lensFlareSystem#"+t.emitterId,s=new e(a,i,n);s.id=t.id||a,s.borderLimit=t.borderLimit;for(var u=0;u<t.flares.length;u++){var l=t.flares[u];Fi.AddFlare(l.size,l.position,o.e.FromArray(l.color),l.textureName?r+l.textureName:"",s)}return s},e.prototype.serialize=function(){var e={};e.id=this.id,e.name=this.name,e.emitterId=this.getEmitter().id,e.borderLimit=this.borderLimit,e.flares=[];for(var t=0;t<this.lensFlares.length;t++){var n=this.lensFlares[t];e.flares.push({size:n.size,position:n.position,color:n.color.asArray(),textureName:ye.h.GetFilename(n.texture?n.texture.name:"")})}return e},e._SceneComponentInitialization=function(e){throw be.a.WarnImport("LensFlareSystemSceneComponent")},e}();r.a.AddParser(xe.a.NAME_LENSFLARESYSTEM,function(e,t,n,r){if(null!=e.lensFlareSystems){n.lensFlareSystems||(n.lensFlareSystems=new Array);for(var i=0,o=e.lensFlareSystems.length;i<o;i++){var a=Ni.Parse(e.lensFlareSystems[i],t,r);n.lensFlareSystems.push(a)}}}),r.a.prototype.getLensFlareSystemByName=function(e){for(var t=0;t<this.lensFlareSystems.length;t++)if(this.lensFlareSystems[t].name===e)return this.lensFlareSystems[t];return null},r.a.prototype.getLensFlareSystemByID=function(e){for(var t=0;t<this.lensFlareSystems.length;t++)if(this.lensFlareSystems[t].id===e)return this.lensFlareSystems[t];return null},r.a.prototype.removeLensFlareSystem=function(e){var t=this.lensFlareSystems.indexOf(e);return-1!==t&&this.lensFlareSystems.splice(t,1),t},r.a.prototype.addLensFlareSystem=function(e){this.lensFlareSystems.push(e)};var Bi=function(){function e(e){this.name=xe.a.NAME_LENSFLARESYSTEM,this.scene=e,e.lensFlareSystems=new Array}return e.prototype.register=function(){this.scene._afterCameraDrawStage.registerStep(xe.a.STEP_AFTERCAMERADRAW_LENSFLARESYSTEM,this,this._draw)},e.prototype.rebuild=function(){},e.prototype.addFromContainer=function(e){var t=this;e.lensFlareSystems&&e.lensFlareSystems.forEach(function(e){t.scene.addLensFlareSystem(e)})},e.prototype.removeFromContainer=function(e,t){var n=this;e.lensFlareSystems&&e.lensFlareSystems.forEach(function(e){n.scene.removeLensFlareSystem(e),t&&e.dispose()})},e.prototype.serialize=function(e){e.lensFlareSystems=[];for(var t=0,n=this.scene.lensFlareSystems;t<n.length;t++)e.lensFlareSystems.push(n[t].serialize())},e.prototype.dispose=function(){for(var e=this.scene.lensFlareSystems;e.length;)e[0].dispose()},e.prototype._draw=function(e){if(this.scene.lensFlaresEnabled){var t=this.scene.lensFlareSystems;ye.h.StartPerformanceCounter("Lens flares",t.length>0);for(var n=0,r=t;n<r.length;n++){var i=r[n];0!=(e.layerMask&i.layerMask)&&i.render()}ye.h.EndPerformanceCounter("Lens flares",t.length>0)}},e}();Ni._SceneComponentInitialization=function(e){var t=e._getComponent(xe.a.NAME_LENSFLARESYSTEM);t||(t=new Bi(e),e._addComponent(t))},jt.a.ShadersStore.shadowMapPixelShader="#ifndef FLOAT\nvec4 pack(float depth)\n{\nconst vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);\nconst vec4 bit_mask=vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);\nvec4 res=fract(depth*bit_shift);\nres-=res.xxyz*bit_mask;\nreturn res;\n}\n#endif\nvarying float vDepthMetric;\n#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform sampler2D diffuseSampler;\n#endif\nuniform vec3 biasAndScale;\nuniform vec2 depthValues;\nvoid main(void)\n{\n#ifdef ALPHATEST\nif (texture2D(diffuseSampler,vUV).a<0.4)\ndiscard;\n#endif\nfloat depth=vDepthMetric;\n#ifdef ESM\ndepth=clamp(exp(-min(87.,biasAndScale.z*depth)),0.,1.);\n#endif\n#ifdef FLOAT\ngl_FragColor=vec4(depth,1.0,1.0,1.0);\n#else\ngl_FragColor=pack(depth);\n#endif\n}",jt.a.ShadersStore.shadowMapVertexShader="\nattribute vec3 position;\n#ifdef NORMAL\nattribute vec3 normal;\nuniform vec3 lightData;\n#endif\n#include<bonesDeclaration>\n#include<morphTargetsVertexGlobalDeclaration>\n#include<morphTargetsVertexDeclaration>[0..maxSimultaneousMorphTargets]\n\n#include<instancesDeclaration>\n#include<helperFunctions>\nuniform mat4 viewProjection;\nuniform vec3 biasAndScale;\nuniform vec2 depthValues;\nvarying float vDepthMetric;\n#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform mat4 diffuseMatrix;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#endif\nvoid main(void)\n{\nvec3 positionUpdated=position;\n#include<morphTargetsVertex>[0..maxSimultaneousMorphTargets]\n#include<instancesVertex>\n#include<bonesVertex>\nvec4 worldPos=finalWorld*vec4(positionUpdated,1.0);\n\n#ifdef NORMAL\nmat3 normalWorld=mat3(finalWorld);\n#ifdef NONUNIFORMSCALING\nnormalWorld=transposeMat3(inverseMat3(normalWorld));\n#endif\nvec3 worldNor=normalize(normalWorld*normal);\n#ifdef DIRECTIONINLIGHTDATA\nvec3 worldLightDir=normalize(-lightData.xyz);\n#else\nvec3 directionToLight=lightData.xyz-worldPos.xyz;\nvec3 worldLightDir=normalize(directionToLight);\n#endif\nfloat ndl=dot(worldNor,worldLightDir);\nfloat sinNL=sqrt(1.0-ndl*ndl);\nfloat normalBias=biasAndScale.y*sinNL;\nworldPos.xyz-=worldNor*normalBias;\n#endif\n\ngl_Position=viewProjection*worldPos;\n#ifdef DEPTHTEXTURE\n\ngl_Position.z+=biasAndScale.x*gl_Position.w;\n#endif\n\nvDepthMetric=((gl_Position.z+depthValues.x)/(depthValues.y))+biasAndScale.x;\n#ifdef ALPHATEST\n#ifdef UV1\nvUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef UV2\nvUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n}",jt.a.ShadersStore.depthBoxBlurPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform vec2 screenSize;\nvoid main(void)\n{\nvec4 colorDepth=vec4(0.0);\nfor (int x=-OFFSET; x<=OFFSET; x++)\nfor (int y=-OFFSET; y<=OFFSET; y++)\ncolorDepth+=texture2D(textureSampler,vUV+vec2(x,y)/screenSize);\ngl_FragColor=(colorDepth/float((OFFSET*2+1)*(OFFSET*2+1)));\n}";var ki=function(){function e(t,n,r){this.onBeforeShadowMapRenderObservable=new i.c,this.onBeforeShadowMapRenderMeshObservable=new i.c,this._bias=5e-5,this._normalBias=0,this._blurBoxOffset=1,this._blurScale=2,this._blurKernel=1,this._useKernelBlur=!1,this._filter=e.FILTER_NONE,this._filteringQuality=e.QUALITY_HIGH,this._contactHardeningLightSizeUVRatio=.1,this._darkness=0,this._transparencyShadow=!1,this.frustumEdgeFalloff=0,this.forceBackFacesOnly=!1,this._lightDirection=o.x.Zero(),this._viewMatrix=o.j.Zero(),this._projectionMatrix=o.j.Zero(),this._transformMatrix=o.j.Zero(),this._cachedPosition=new o.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._cachedDirection=new o.x(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this._currentFaceIndex=0,this._currentFaceIndexCache=0,this._defaultTextureMatrix=o.j.Identity(),this._mapSize=t,this._light=n,this._scene=n.getScene(),n._shadowGenerator=this,e._SceneComponentInitialization(this._scene);var a=this._scene.getEngine().getCaps();this._textureType=r?a.textureFloatRender&&a.textureFloatLinearFiltering?_.a.TEXTURETYPE_FLOAT:a.textureHalfFloatRender&&a.textureHalfFloatLinearFiltering?_.a.TEXTURETYPE_HALF_FLOAT:_.a.TEXTURETYPE_UNSIGNED_INT:a.textureHalfFloatRender&&a.textureHalfFloatLinearFiltering?_.a.TEXTURETYPE_HALF_FLOAT:a.textureFloatRender&&a.textureFloatLinearFiltering?_.a.TEXTURETYPE_FLOAT:_.a.TEXTURETYPE_UNSIGNED_INT,this._initializeGenerator(),this._applyFilterValues()}return Object.defineProperty(e.prototype,"bias",{get:function(){return this._bias},set:function(e){this._bias=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"normalBias",{get:function(){return this._normalBias},set:function(e){this._normalBias=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurBoxOffset",{get:function(){return this._blurBoxOffset},set:function(e){this._blurBoxOffset!==e&&(this._blurBoxOffset=e,this._disposeBlurPostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurScale",{get:function(){return this._blurScale},set:function(e){this._blurScale!==e&&(this._blurScale=e,this._disposeBlurPostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blurKernel",{get:function(){return this._blurKernel},set:function(e){this._blurKernel!==e&&(this._blurKernel=e,this._disposeBlurPostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useKernelBlur",{get:function(){return this._useKernelBlur},set:function(e){this._useKernelBlur!==e&&(this._useKernelBlur=e,this._disposeBlurPostProcesses())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthScale",{get:function(){return void 0!==this._depthScale?this._depthScale:this._light.getDepthScale()},set:function(e){this._depthScale=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){return this._filter},set:function(t){if(this._light.needCube()){if(t===e.FILTER_BLUREXPONENTIALSHADOWMAP)return void(this.useExponentialShadowMap=!0);if(t===e.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP)return void(this.useCloseExponentialShadowMap=!0);if(t===e.FILTER_PCF||t===e.FILTER_PCSS)return void(this.usePoissonSampling=!0)}t!==e.FILTER_PCF&&t!==e.FILTER_PCSS||1!==this._scene.getEngine().webGLVersion?this._filter!==t&&(this._filter=t,this._disposeBlurPostProcesses(),this._applyFilterValues(),this._light._markMeshesAsLightDirty()):this.usePoissonSampling=!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usePoissonSampling",{get:function(){return this.filter===e.FILTER_POISSONSAMPLING},set:function(t){(t||this.filter===e.FILTER_POISSONSAMPLING)&&(this.filter=t?e.FILTER_POISSONSAMPLING:e.FILTER_NONE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useExponentialShadowMap",{get:function(){return this.filter===e.FILTER_EXPONENTIALSHADOWMAP},set:function(t){(t||this.filter===e.FILTER_EXPONENTIALSHADOWMAP)&&(this.filter=t?e.FILTER_EXPONENTIALSHADOWMAP:e.FILTER_NONE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBlurExponentialShadowMap",{get:function(){return this.filter===e.FILTER_BLUREXPONENTIALSHADOWMAP},set:function(t){(t||this.filter===e.FILTER_BLUREXPONENTIALSHADOWMAP)&&(this.filter=t?e.FILTER_BLUREXPONENTIALSHADOWMAP:e.FILTER_NONE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useCloseExponentialShadowMap",{get:function(){return this.filter===e.FILTER_CLOSEEXPONENTIALSHADOWMAP},set:function(t){(t||this.filter===e.FILTER_CLOSEEXPONENTIALSHADOWMAP)&&(this.filter=t?e.FILTER_CLOSEEXPONENTIALSHADOWMAP:e.FILTER_NONE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useBlurCloseExponentialShadowMap",{get:function(){return this.filter===e.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP},set:function(t){(t||this.filter===e.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP)&&(this.filter=t?e.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP:e.FILTER_NONE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usePercentageCloserFiltering",{get:function(){return this.filter===e.FILTER_PCF},set:function(t){(t||this.filter===e.FILTER_PCF)&&(this.filter=t?e.FILTER_PCF:e.FILTER_NONE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filteringQuality",{get:function(){return this._filteringQuality},set:function(e){this._filteringQuality=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useContactHardeningShadow",{get:function(){return this.filter===e.FILTER_PCSS},set:function(t){(t||this.filter===e.FILTER_PCSS)&&(this.filter=t?e.FILTER_PCSS:e.FILTER_NONE)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contactHardeningLightSizeUVRatio",{get:function(){return this._contactHardeningLightSizeUVRatio},set:function(e){this._contactHardeningLightSizeUVRatio=e},enumerable:!0,configurable:!0}),e.prototype.getDarkness=function(){return this._darkness},e.prototype.setDarkness=function(e){return this._darkness=e>=1?1:e<=0?0:e,this},e.prototype.setTransparencyShadow=function(e){return this._transparencyShadow=e,this},e.prototype.getShadowMap=function(){return this._shadowMap},e.prototype.getShadowMapForRendering=function(){return this._shadowMap2?this._shadowMap2:this._shadowMap},e.prototype.addShadowCaster=function(e,t){var n;return void 0===t&&(t=!0),this._shadowMap?(this._shadowMap.renderList||(this._shadowMap.renderList=[]),this._shadowMap.renderList.push(e),t&&(n=this._shadowMap.renderList).push.apply(n,e.getChildMeshes()),this):this},e.prototype.removeShadowCaster=function(e,t){if(void 0===t&&(t=!0),!this._shadowMap||!this._shadowMap.renderList)return this;var n=this._shadowMap.renderList.indexOf(e);if(-1!==n&&this._shadowMap.renderList.splice(n,1),t)for(var r=0,i=e.getChildren();r<i.length;r++)this.removeShadowCaster(i[r]);return this},e.prototype.getLight=function(){return this._light},e.prototype._initializeGenerator=function(){this._light._markMeshesAsLightDirty(),this._initializeShadowMap()},e.prototype._initializeShadowMap=function(){var t=this,n=this._scene.getEngine();n.webGLVersion>1?(this._shadowMap=new ln(this._light.name+"_shadowMap",this._mapSize,this._scene,!1,!0,this._textureType,this._light.needCube(),void 0,!1,!1),this._shadowMap.createDepthStencilTexture(_.a.LESS,!0)):this._shadowMap=new ln(this._light.name+"_shadowMap",this._mapSize,this._scene,!1,!0,this._textureType,this._light.needCube()),this._shadowMap.wrapU=Ge.a.CLAMP_ADDRESSMODE,this._shadowMap.wrapV=Ge.a.CLAMP_ADDRESSMODE,this._shadowMap.anisotropicFilteringLevel=1,this._shadowMap.updateSamplingMode(Ge.a.BILINEAR_SAMPLINGMODE),this._shadowMap.renderParticles=!1,this._shadowMap.ignoreCameraViewport=!0,this._shadowMap.onBeforeRenderObservable.add(function(r){t._currentFaceIndex=r,t._filter===e.FILTER_PCF&&n.setColorWrite(!1)}),this._shadowMap.customRenderFunction=this._renderForShadowMap.bind(this),this._shadowMap.onAfterUnbindObservable.add(function(){if(t._filter===e.FILTER_PCF&&n.setColorWrite(!0),t.useBlurExponentialShadowMap||t.useBlurCloseExponentialShadowMap){var r=t.getShadowMapForRendering();r&&t._scene.postProcessManager.directRender(t._blurPostProcesses,r.getInternalTexture(),!0)}});var r=new o.f(0,0,0,0),i=new o.f(1,1,1,1);this._shadowMap.onClearObservable.add(function(n){t._filter===e.FILTER_PCF?n.clear(i,!1,!0,!1):n.clear(t.useExponentialShadowMap||t.useBlurExponentialShadowMap?r:i,!0,!0,!1)})},e.prototype._initializeBlurRTTAndPostProcesses=function(){var e=this,t=this._scene.getEngine(),n=this._mapSize/this.blurScale;this.useKernelBlur&&1===this.blurScale||(this._shadowMap2=new ln(this._light.name+"_shadowMap2",n,this._scene,!1,!0,this._textureType),this._shadowMap2.wrapU=Ge.a.CLAMP_ADDRESSMODE,this._shadowMap2.wrapV=Ge.a.CLAMP_ADDRESSMODE,this._shadowMap2.updateSamplingMode(Ge.a.BILINEAR_SAMPLINGMODE)),this.useKernelBlur?(this._kernelBlurXPostprocess=new jr(this._light.name+"KernelBlurX",new o.w(1,0),this.blurKernel,1,null,Ge.a.BILINEAR_SAMPLINGMODE,t,!1,this._textureType),this._kernelBlurXPostprocess.width=n,this._kernelBlurXPostprocess.height=n,this._kernelBlurXPostprocess.onApplyObservable.add(function(t){t.setTexture("textureSampler",e._shadowMap)}),this._kernelBlurYPostprocess=new jr(this._light.name+"KernelBlurY",new o.w(0,1),this.blurKernel,1,null,Ge.a.BILINEAR_SAMPLINGMODE,t,!1,this._textureType),this._kernelBlurXPostprocess.autoClear=!1,this._kernelBlurYPostprocess.autoClear=!1,this._textureType===_.a.TEXTURETYPE_UNSIGNED_INT&&(this._kernelBlurXPostprocess.packedFloat=!0,this._kernelBlurYPostprocess.packedFloat=!0),this._blurPostProcesses=[this._kernelBlurXPostprocess,this._kernelBlurYPostprocess]):(this._boxBlurPostprocess=new zt(this._light.name+"DepthBoxBlur","depthBoxBlur",["screenSize","boxOffset"],[],1,null,Ge.a.BILINEAR_SAMPLINGMODE,t,!1,"#define OFFSET "+this._blurBoxOffset,this._textureType),this._boxBlurPostprocess.onApplyObservable.add(function(t){t.setFloat2("screenSize",n,n),t.setTexture("textureSampler",e._shadowMap)}),this._boxBlurPostprocess.autoClear=!1,this._blurPostProcesses=[this._boxBlurPostprocess])},e.prototype._renderForShadowMap=function(e,t,n,r){var i,o=this._scene.getEngine();if(r.length){for(o.setColorWrite(!1),i=0;i<r.length;i++)this._renderSubMeshForShadowMap(r.data[i]);o.setColorWrite(!0)}for(i=0;i<e.length;i++)this._renderSubMeshForShadowMap(e.data[i]);for(i=0;i<t.length;i++)this._renderSubMeshForShadowMap(t.data[i]);if(this._transparencyShadow)for(i=0;i<n.length;i++)this._renderSubMeshForShadowMap(n.data[i])},e.prototype._renderSubMeshForShadowMap=function(e){var t=this,n=e.getRenderingMesh(),r=this._scene,i=r.getEngine(),o=e.getMaterial();if(n._internalAbstractMeshDataInfo._isActiveIntermediate=!1,o&&0!==e.verticesCount){i.setState(o.backFaceCulling);var a=n._getInstancesRenderList(e._id);if(!a.mustReturn){var s=i.getCaps().instancedArrays&&null!=a.visibleInstances[e._id];if(this.isReady(e,s)){if(i.enableEffect(this._effect),n._bind(e,this._effect,Ci.a.TriangleFillMode),this._effect.setFloat3("biasAndScale",this.bias,this.normalBias,this.depthScale),this._effect.setMatrix("viewProjection",this.getTransformMatrix()),this.getLight().getTypeID()===Fr.a.LIGHTTYPEID_DIRECTIONALLIGHT?this._effect.setVector3("lightData",this._cachedDirection):this._effect.setVector3("lightData",this._cachedPosition),r.activeCamera&&this._effect.setFloat2("depthValues",this.getLight().getDepthMinZ(r.activeCamera),this.getLight().getDepthMinZ(r.activeCamera)+this.getLight().getDepthMaxZ(r.activeCamera)),o&&o.needAlphaTesting()){var u=o.getAlphaTestTexture();u&&(this._effect.setTexture("diffuseSampler",u),this._effect.setMatrix("diffuseMatrix",u.getTextureMatrix()||this._defaultTextureMatrix))}if(n.useBones&&n.computeBonesUsingShaders&&n.skeleton){var l=n.skeleton;if(l.isUsingTextureForMatrices){var c=l.getTransformMatrixTexture();if(!c)return;this._effect.setTexture("boneSampler",c),this._effect.setFloat("boneTextureWidth",4*(l.bones.length+1))}else this._effect.setMatrices("mBones",l.getTransformMatrices(n))}Hr.a.BindMorphTargetParameters(n,this._effect),this.forceBackFacesOnly&&i.setState(!0,0,!1,!0),this.onBeforeShadowMapRenderMeshObservable.notifyObservers(n),this.onBeforeShadowMapRenderObservable.notifyObservers(this._effect),n._processRendering(e,this._effect,Ci.a.TriangleFillMode,a,s,function(e,n){return t._effect.setMatrix("world",n)}),this.forceBackFacesOnly&&i.setState(!0,0,!1,!1)}else this._shadowMap&&this._shadowMap.resetRefreshCounter()}}},e.prototype._applyFilterValues=function(){this._shadowMap&&this._shadowMap.updateSamplingMode(this.filter===e.FILTER_NONE||this.filter===e.FILTER_PCSS?Ge.a.NEAREST_SAMPLINGMODE:Ge.a.BILINEAR_SAMPLINGMODE)},e.prototype.forceCompilation=function(e,t){var n=this,r=l.a({useInstances:!1},t),i=this.getShadowMap();if(i){var o=i.renderList;if(o){for(var a=new Array,s=0,u=o;s<u.length;s++)a.push.apply(a,u[s].subMeshes);if(0!==a.length){var c=0,h=function(){if(n._scene&&n._scene.getEngine()){for(;n.isReady(a[c],r.useInstances);)if(++c>=a.length)return void(e&&e(n));setTimeout(h,16)}};h()}else e&&e(this)}else e&&e(this)}else e&&e(this)},e.prototype.forceCompilationAsync=function(e){var t=this;return new Promise(function(n){t.forceCompilation(function(){n()},e)})},e.prototype.isReady=function(e,t){var n=[];this._textureType!==_.a.TEXTURETYPE_UNSIGNED_INT&&n.push("#define FLOAT"),this.useExponentialShadowMap||this.useBlurExponentialShadowMap?n.push("#define ESM"):(this.usePercentageCloserFiltering||this.useContactHardeningShadow)&&n.push("#define DEPTHTEXTURE");var r=[Mn.b.PositionKind],i=e.getMesh(),o=e.getMaterial();if(this.normalBias&&i.isVerticesDataPresent(Mn.b.NormalKind)&&(r.push(Mn.b.NormalKind),n.push("#define NORMAL"),i.nonUniformScaling&&n.push("#define NONUNIFORMSCALING"),this.getLight().getTypeID()===Fr.a.LIGHTTYPEID_DIRECTIONALLIGHT&&n.push("#define DIRECTIONINLIGHTDATA")),o&&o.needAlphaTesting()){var a=o.getAlphaTestTexture();a&&(n.push("#define ALPHATEST"),i.isVerticesDataPresent(Mn.b.UVKind)&&(r.push(Mn.b.UVKind),n.push("#define UV1")),i.isVerticesDataPresent(Mn.b.UV2Kind)&&1===a.coordinatesIndex&&(r.push(Mn.b.UV2Kind),n.push("#define UV2")))}if(i.useBones&&i.computeBonesUsingShaders&&i.skeleton){r.push(Mn.b.MatricesIndicesKind),r.push(Mn.b.MatricesWeightsKind),i.numBoneInfluencers>4&&(r.push(Mn.b.MatricesIndicesExtraKind),r.push(Mn.b.MatricesWeightsExtraKind));var s=i.skeleton;n.push("#define NUM_BONE_INFLUENCERS "+i.numBoneInfluencers),n.push(s.isUsingTextureForMatrices?"#define BONETEXTURE":"#define BonesPerMesh "+(s.bones.length+1))}else n.push("#define NUM_BONE_INFLUENCERS 0");var u=i.morphTargetManager,l=0;if(u&&u.numInfluencers>0&&(n.push("#define MORPHTARGETS"),n.push("#define NUM_MORPH_INFLUENCERS "+(l=u.numInfluencers)),Hr.a.PrepareAttributesForMorphTargets(r,i,{NUM_MORPH_INFLUENCERS:l})),t&&(n.push("#define INSTANCES"),r.push("world0"),r.push("world1"),r.push("world2"),r.push("world3")),this.customShaderOptions&&this.customShaderOptions.defines)for(var c=0,h=this.customShaderOptions.defines;c<h.length;c++){var d=h[c];-1===n.indexOf(d)&&n.push(d)}var f=n.join("\n");if(this._cachedDefines!==f){this._cachedDefines=f;var p="shadowMap",m=["world","mBones","viewProjection","diffuseMatrix","lightData","depthValues","biasAndScale","morphTargetInfluences","boneTextureWidth"],g=["diffuseSampler","boneSampler"];if(this.customShaderOptions){if(p=this.customShaderOptions.shaderName,this.customShaderOptions.attributes)for(var v=0,y=this.customShaderOptions.attributes;v<y.length;v++){var b=y[v];-1===r.indexOf(b)&&r.push(b)}if(this.customShaderOptions.uniforms)for(var T=0,E=this.customShaderOptions.uniforms;T<E.length;T++){var x=E[T];-1===m.indexOf(x)&&m.push(x)}if(this.customShaderOptions.samplers)for(var M=0,A=this.customShaderOptions.samplers;M<A.length;M++){var S=A[M];-1===g.indexOf(S)&&g.push(S)}}this._effect=this._scene.getEngine().createEffect(p,r,m,g,f,void 0,void 0,void 0,{maxSimultaneousMorphTargets:l})}return!(!this._effect.isReady()||((this.useBlurExponentialShadowMap||this.useBlurCloseExponentialShadowMap)&&(this._blurPostProcesses&&this._blurPostProcesses.length||this._initializeBlurRTTAndPostProcesses()),this._kernelBlurXPostprocess&&!this._kernelBlurXPostprocess.isReady()||this._kernelBlurYPostprocess&&!this._kernelBlurYPostprocess.isReady()||this._boxBlurPostprocess&&!this._boxBlurPostprocess.isReady()))},e.prototype.prepareDefines=function(t,n){var r=this._light;this._scene.shadowsEnabled&&r.shadowEnabled&&(t["SHADOW"+n]=!0,this.useContactHardeningShadow&&(t["SHADOWPCSS"+n]=!0,this._filteringQuality===e.QUALITY_LOW?t["SHADOWLOWQUALITY"+n]=!0:this._filteringQuality===e.QUALITY_MEDIUM&&(t["SHADOWMEDIUMQUALITY"+n]=!0)),this.usePercentageCloserFiltering?(t["SHADOWPCF"+n]=!0,this._filteringQuality===e.QUALITY_LOW?t["SHADOWLOWQUALITY"+n]=!0:this._filteringQuality===e.QUALITY_MEDIUM&&(t["SHADOWMEDIUMQUALITY"+n]=!0)):this.usePoissonSampling?t["SHADOWPOISSON"+n]=!0:this.useExponentialShadowMap||this.useBlurExponentialShadowMap?t["SHADOWESM"+n]=!0:(this.useCloseExponentialShadowMap||this.useBlurCloseExponentialShadowMap)&&(t["SHADOWCLOSEESM"+n]=!0),r.needCube()&&(t["SHADOWCUBE"+n]=!0))},e.prototype.bindShadowLight=function(t,n){var r=this._light,i=this._scene;if(i.shadowsEnabled&&r.shadowEnabled){var o=i.activeCamera;if(o){var a=this.getShadowMap();a&&(r.needCube()||n.setMatrix("lightMatrix"+t,this.getTransformMatrix()),this._filter===e.FILTER_PCF?(n.setDepthStencilTexture("shadowSampler"+t,this.getShadowMapForRendering()),r._uniformBuffer.updateFloat4("shadowsInfo",this.getDarkness(),a.getSize().width,1/a.getSize().width,this.frustumEdgeFalloff,t)):this._filter===e.FILTER_PCSS?(n.setDepthStencilTexture("shadowSampler"+t,this.getShadowMapForRendering()),n.setTexture("depthSampler"+t,this.getShadowMapForRendering()),r._uniformBuffer.updateFloat4("shadowsInfo",this.getDarkness(),1/a.getSize().width,this._contactHardeningLightSizeUVRatio*a.getSize().width,this.frustumEdgeFalloff,t)):(n.setTexture("shadowSampler"+t,this.getShadowMapForRendering()),r._uniformBuffer.updateFloat4("shadowsInfo",this.getDarkness(),this.blurScale/a.getSize().width,this.depthScale,this.frustumEdgeFalloff,t)),r._uniformBuffer.updateFloat2("depthValues",this.getLight().getDepthMinZ(o),this.getLight().getDepthMinZ(o)+this.getLight().getDepthMaxZ(o),t))}}},e.prototype.getTransformMatrix=function(){var e=this._scene;if(this._currentRenderID===e.getRenderId()&&this._currentFaceIndexCache===this._currentFaceIndex)return this._transformMatrix;this._currentRenderID=e.getRenderId(),this._currentFaceIndexCache=this._currentFaceIndex;var t=this._light.position;if(this._light.computeTransformedInformation()&&(t=this._light.transformedPosition),o.x.NormalizeToRef(this._light.getShadowDirection(this._currentFaceIndex),this._lightDirection),1===Math.abs(o.x.Dot(this._lightDirection,o.x.Up()))&&(this._lightDirection.z=1e-13),this._light.needProjectionMatrixCompute()||!this._cachedPosition||!this._cachedDirection||!t.equals(this._cachedPosition)||!this._lightDirection.equals(this._cachedDirection)){this._cachedPosition.copyFrom(t),this._cachedDirection.copyFrom(this._lightDirection),o.j.LookAtLHToRef(t,t.add(this._lightDirection),o.x.Up(),this._viewMatrix);var n=this.getShadowMap();if(n){var r=n.renderList;r&&this._light.setShadowProjectionMatrix(this._projectionMatrix,this._viewMatrix,r)}this._viewMatrix.multiplyToRef(this._projectionMatrix,this._transformMatrix)}return this._transformMatrix},e.prototype.recreateShadowMap=function(){var e=this._shadowMap;if(e){var t=e.renderList;this._disposeRTTandPostProcesses(),this._initializeGenerator(),this.filter=this.filter,this._applyFilterValues(),this._shadowMap.renderList=t}},e.prototype._disposeBlurPostProcesses=function(){this._shadowMap2&&(this._shadowMap2.dispose(),this._shadowMap2=null),this._boxBlurPostprocess&&(this._boxBlurPostprocess.dispose(),this._boxBlurPostprocess=null),this._kernelBlurXPostprocess&&(this._kernelBlurXPostprocess.dispose(),this._kernelBlurXPostprocess=null),this._kernelBlurYPostprocess&&(this._kernelBlurYPostprocess.dispose(),this._kernelBlurYPostprocess=null),this._blurPostProcesses=[]},e.prototype._disposeRTTandPostProcesses=function(){this._shadowMap&&(this._shadowMap.dispose(),this._shadowMap=null),this._disposeBlurPostProcesses()},e.prototype.dispose=function(){this._disposeRTTandPostProcesses(),this._light&&(this._light._shadowGenerator=null,this._light._markMeshesAsLightDirty())},e.prototype.serialize=function(){var e={},t=this.getShadowMap();if(!t)return e;if(e.lightId=this._light.id,e.mapSize=t.getRenderSize(),e.useExponentialShadowMap=this.useExponentialShadowMap,e.useBlurExponentialShadowMap=this.useBlurExponentialShadowMap,e.useCloseExponentialShadowMap=this.useBlurExponentialShadowMap,e.useBlurCloseExponentialShadowMap=this.useBlurExponentialShadowMap,e.usePoissonSampling=this.usePoissonSampling,e.forceBackFacesOnly=this.forceBackFacesOnly,e.depthScale=this.depthScale,e.darkness=this.getDarkness(),e.blurBoxOffset=this.blurBoxOffset,e.blurKernel=this.blurKernel,e.blurScale=this.blurScale,e.useKernelBlur=this.useKernelBlur,e.transparencyShadow=this._transparencyShadow,e.frustumEdgeFalloff=this.frustumEdgeFalloff,e.bias=this.bias,e.normalBias=this.normalBias,e.usePercentageCloserFiltering=this.usePercentageCloserFiltering,e.useContactHardeningShadow=this.useContactHardeningShadow,e.filteringQuality=this.filteringQuality,e.contactHardeningLightSizeUVRatio=this.contactHardeningLightSizeUVRatio,e.renderList=[],t.renderList)for(var n=0;n<t.renderList.length;n++)e.renderList.push(t.renderList[n].id);return e},e.Parse=function(t,n){for(var r=n.getLightByID(t.lightId),i=new e(t.mapSize,r),o=i.getShadowMap(),a=0;a<t.renderList.length;a++)n.getMeshesByID(t.renderList[a]).forEach(function(e){o&&(o.renderList||(o.renderList=[]),o.renderList.push(e))});return t.usePoissonSampling?i.usePoissonSampling=!0:t.useExponentialShadowMap?i.useExponentialShadowMap=!0:t.useBlurExponentialShadowMap?i.useBlurExponentialShadowMap=!0:t.useCloseExponentialShadowMap?i.useCloseExponentialShadowMap=!0:t.useBlurCloseExponentialShadowMap?i.useBlurCloseExponentialShadowMap=!0:t.usePercentageCloserFiltering?i.usePercentageCloserFiltering=!0:t.useContactHardeningShadow&&(i.useContactHardeningShadow=!0),t.filteringQuality&&(i.filteringQuality=t.filteringQuality),t.contactHardeningLightSizeUVRatio?i.contactHardeningLightSizeUVRatio=t.contactHardeningLightSizeUVRatio:t.useVarianceShadowMap?i.useExponentialShadowMap=!0:t.useBlurVarianceShadowMap&&(i.useBlurExponentialShadowMap=!0),t.depthScale&&(i.depthScale=t.depthScale),t.blurScale&&(i.blurScale=t.blurScale),t.blurBoxOffset&&(i.blurBoxOffset=t.blurBoxOffset),t.useKernelBlur&&(i.useKernelBlur=t.useKernelBlur),t.blurKernel&&(i.blurKernel=t.blurKernel),void 0!==t.bias&&(i.bias=t.bias),void 0!==t.normalBias&&(i.normalBias=t.normalBias),void 0!==t.frustumEdgeFalloff&&(i.frustumEdgeFalloff=t.frustumEdgeFalloff),t.darkness&&i.setDarkness(t.darkness),t.transparencyShadow&&i.setTransparencyShadow(!0),i.forceBackFacesOnly=t.forceBackFacesOnly,i},e.FILTER_NONE=0,e.FILTER_EXPONENTIALSHADOWMAP=1,e.FILTER_POISSONSAMPLING=2,e.FILTER_BLUREXPONENTIALSHADOWMAP=3,e.FILTER_CLOSEEXPONENTIALSHADOWMAP=4,e.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP=5,e.FILTER_PCF=6,e.FILTER_PCSS=7,e.QUALITY_HIGH=0,e.QUALITY_MEDIUM=1,e.QUALITY_LOW=2,e._SceneComponentInitialization=function(e){throw be.a.WarnImport("ShadowGeneratorSceneComponent")},e}();r.a.AddParser(xe.a.NAME_SHADOWGENERATOR,function(e,t){if(null!=e.shadowGenerators)for(var n=0,r=e.shadowGenerators.length;n<r;n++)ki.Parse(e.shadowGenerators[n],t)});var Ui=function(){function e(e){this.name=xe.a.NAME_SHADOWGENERATOR,this.scene=e}return e.prototype.register=function(){this.scene._gatherRenderTargetsStage.registerStep(xe.a.STEP_GATHERRENDERTARGETS_SHADOWGENERATOR,this,this._gatherRenderTargets)},e.prototype.rebuild=function(){},e.prototype.serialize=function(e){e.shadowGenerators=[];for(var t=0,n=this.scene.lights;t<n.length;t++){var r=n[t].getShadowGenerator();r&&e.shadowGenerators.push(r.serialize())}},e.prototype.addFromContainer=function(e){},e.prototype.removeFromContainer=function(e,t){},e.prototype.dispose=function(){},e.prototype._gatherRenderTargets=function(e){var t=this.scene;if(this.scene.shadowsEnabled)for(var n=0;n<t.lights.length;n++){var r=t.lights[n],i=r.getShadowGenerator();if(r.isEnabled()&&r.shadowEnabled&&i){var o=i.getShadowMap();-1!==t.textures.indexOf(o)&&e.push(o)}}},e}();ki._SceneComponentInitialization=function(e){var t=e._getComponent(xe.a.NAME_SHADOWGENERATOR);t||(t=new Ui(e),e._addComponent(t))},F.a.AddNodeConstructor("Light_Type_0",function(e,t){return function(){return new Vi(e,o.x.Zero(),t)}});var Vi=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return i._shadowAngle=Math.PI/2,i.position=n,i}return l.d(t,e),Object.defineProperty(t.prototype,"shadowAngle",{get:function(){return this._shadowAngle},set:function(e){this._shadowAngle=e,this.forceProjectionMatrixCompute()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(e){var t=this.needCube();this._direction=e,this.needCube()!==t&&this._shadowGenerator&&this._shadowGenerator.recreateShadowMap()},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"PointLight"},t.prototype.getTypeID=function(){return Fr.a.LIGHTTYPEID_POINTLIGHT},t.prototype.needCube=function(){return!this.direction},t.prototype.getShadowDirection=function(t){if(this.direction)return e.prototype.getShadowDirection.call(this,t);switch(t){case 0:return new o.x(1,0,0);case 1:return new o.x(-1,0,0);case 2:return new o.x(0,-1,0);case 3:return new o.x(0,1,0);case 4:return new o.x(0,0,1);case 5:return new o.x(0,0,-1)}return o.x.Zero()},t.prototype._setDefaultShadowProjectionMatrix=function(e,t,n){var r=this.getScene().activeCamera;r&&o.j.PerspectiveFovLHToRef(this.shadowAngle,1,this.getDepthMinZ(r),this.getDepthMaxZ(r),e)},t.prototype._buildUniformLayout=function(){this._uniformBuffer.addUniform("vLightData",4),this._uniformBuffer.addUniform("vLightDiffuse",4),this._uniformBuffer.addUniform("vLightSpecular",3),this._uniformBuffer.addUniform("vLightFalloff",4),this._uniformBuffer.addUniform("shadowsInfo",3),this._uniformBuffer.addUniform("depthValues",2),this._uniformBuffer.create()},t.prototype.transferToEffect=function(e,t){return this.computeTransformedInformation()?this._uniformBuffer.updateFloat4("vLightData",this.transformedPosition.x,this.transformedPosition.y,this.transformedPosition.z,0,t):this._uniformBuffer.updateFloat4("vLightData",this.position.x,this.position.y,this.position.z,0,t),this._uniformBuffer.updateFloat4("vLightFalloff",this.range,this._inverseSquaredRange,0,0,t),this},t.prototype.prepareLightSpecificDefines=function(e,t){e["POINTLIGHT"+t]=!0},l.c([Object(L.c)()],t.prototype,"shadowAngle",null),t}(Nr),Gi=function(){function e(e,t,n){var r=this;void 0===t&&(t=""),void 0===n&&(n="black"),this._renderingCanvas=e,this._loadingText=t,this._loadingDivBackgroundColor=n,this._resizeLoadingUI=function(){var e=r._renderingCanvas.getBoundingClientRect(),t=window.getComputedStyle(r._renderingCanvas).position;r._loadingDiv&&(r._loadingDiv.style.position="fixed"===t?"fixed":"absolute",r._loadingDiv.style.left=e.left+"px",r._loadingDiv.style.top=e.top+"px",r._loadingDiv.style.width=e.width+"px",r._loadingDiv.style.height=e.height+"px")}}return e.prototype.displayLoadingUI=function(){if(!this._loadingDiv){this._loadingDiv=document.createElement("div"),this._loadingDiv.id="babylonjsLoadingDiv",this._loadingDiv.style.opacity="0",this._loadingDiv.style.transition="opacity 1.5s ease",this._loadingDiv.style.pointerEvents="none",this._loadingTextDiv=document.createElement("div"),this._loadingTextDiv.style.position="absolute",this._loadingTextDiv.style.left="0",this._loadingTextDiv.style.top="50%",this._loadingTextDiv.style.marginTop="80px",this._loadingTextDiv.style.width="100%",this._loadingTextDiv.style.height="20px",this._loadingTextDiv.style.fontFamily="Arial",this._loadingTextDiv.style.fontSize="14px",this._loadingTextDiv.style.color="white",this._loadingTextDiv.style.textAlign="center",this._loadingTextDiv.innerHTML="Loading",this._loadingDiv.appendChild(this._loadingTextDiv),this._loadingTextDiv.innerHTML=this._loadingText;var t=document.createElement("style");t.type="text/css",t.innerHTML="@-webkit-keyframes spin1 {                    0% { -webkit-transform: rotate(0deg);}\n                    100% { -webkit-transform: rotate(360deg);}\n                }                @keyframes spin1 {                    0% { transform: rotate(0deg);}\n                    100% { transform: rotate(360deg);}\n                }",document.getElementsByTagName("head")[0].appendChild(t);var n=new Image;n.src=e.DefaultLogoUrl?e.DefaultLogoUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxODAuMTcgMjA4LjA0Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2ZmZjt9LmNscy0ye2ZpbGw6I2UwNjg0Yjt9LmNscy0ze2ZpbGw6I2JiNDY0Yjt9LmNscy00e2ZpbGw6I2UwZGVkODt9LmNscy01e2ZpbGw6I2Q1ZDJjYTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPkJhYnlsb25Mb2dvPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iUGFnZV9FbGVtZW50cyIgZGF0YS1uYW1lPSJQYWdlIEVsZW1lbnRzIj48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik05MC4wOSwwLDAsNTJWMTU2bDkwLjA5LDUyLDkwLjA4LTUyVjUyWiIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMiIgcG9pbnRzPSIxODAuMTcgNTIuMDEgMTUxLjk3IDM1LjczIDEyNC44NSA1MS4zOSAxNTMuMDUgNjcuNjcgMTgwLjE3IDUyLjAxIi8+PHBvbHlnb24gY2xhc3M9ImNscy0yIiBwb2ludHM9IjI3LjEyIDY3LjY3IDExNy4yMSAxNS42NiA5MC4wOCAwIDAgNTIuMDEgMjcuMTIgNjcuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTIiIHBvaW50cz0iNjEuODkgMTIwLjMgOTAuMDggMTM2LjU4IDExOC4yOCAxMjAuMyA5MC4wOCAxMDQuMDIgNjEuODkgMTIwLjMiLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iMTUzLjA1IDY3LjY3IDE1My4wNSAxNDAuMzcgOTAuMDggMTc2LjcyIDI3LjEyIDE0MC4zNyAyNy4xMiA2Ny42NyAwIDUyLjAxIDAgMTU2LjAzIDkwLjA4IDIwOC4wNCAxODAuMTcgMTU2LjAzIDE4MC4xNyA1Mi4wMSAxNTMuMDUgNjcuNjciLz48cG9seWdvbiBjbGFzcz0iY2xzLTMiIHBvaW50cz0iOTAuMDggNzEuNDYgNjEuODkgODcuNzQgNjEuODkgMTIwLjMgOTAuMDggMTA0LjAyIDExOC4yOCAxMjAuMyAxMTguMjggODcuNzQgOTAuMDggNzEuNDYiLz48cG9seWdvbiBjbGFzcz0iY2xzLTQiIHBvaW50cz0iMTUzLjA1IDY3LjY3IDExOC4yOCA4Ny43NCAxMTguMjggMTIwLjMgOTAuMDggMTM2LjU4IDkwLjA4IDE3Ni43MiAxNTMuMDUgMTQwLjM3IDE1My4wNSA2Ny42NyIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtNSIgcG9pbnRzPSIyNy4xMiA2Ny42NyA2MS44OSA4Ny43NCA2MS44OSAxMjAuMyA5MC4wOCAxMzYuNTggOTAuMDggMTc2LjcyIDI3LjEyIDE0MC4zNyAyNy4xMiA2Ny42NyIvPjwvZz48L2c+PC9zdmc+",n.style.position="absolute",n.style.left="50%",n.style.top="50%",n.style.width="10vw",n.style.height="10vw",n.style.marginLeft="-5vw",n.style.marginTop="-5vw";var r=new Image;r.src=e.DefaultSpinnerUrl?e.DefaultSpinnerUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzOTIgMzkyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2UwNjg0Yjt9LmNscy0ye2ZpbGw6bm9uZTt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlNwaW5uZXJJY29uPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iU3Bpbm5lciI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNNDAuMjEsMTI2LjQzYzMuNy03LjMxLDcuNjctMTQuNDQsMTItMjEuMzJsMy4zNi01LjEsMy41Mi01YzEuMjMtMS42MywyLjQxLTMuMjksMy42NS00LjkxczIuNTMtMy4yMSwzLjgyLTQuNzlBMTg1LjIsMTg1LjIsMCwwLDEsODMuNCw2Ny40M2EyMDgsMjA4LDAsMCwxLDE5LTE1LjY2YzMuMzUtMi40MSw2Ljc0LTQuNzgsMTAuMjUtN3M3LjExLTQuMjgsMTAuNzUtNi4zMmM3LjI5LTQsMTQuNzMtOCwyMi41My0xMS40OSwzLjktMS43Miw3Ljg4LTMuMywxMi00LjY0YTEwNC4yMiwxMDQuMjIsMCwwLDEsMTIuNDQtMy4yMyw2Mi40NCw2Mi40NCwwLDAsMSwxMi43OC0xLjM5QTI1LjkyLDI1LjkyLDAsMCwxLDE5NiwyMS40NGE2LjU1LDYuNTUsMCwwLDEsMi4wNSw5LDYuNjYsNi42NiwwLDAsMS0xLjY0LDEuNzhsLS40MS4yOWEyMi4wNywyMi4wNywwLDAsMS01Ljc4LDMsMzAuNDIsMzAuNDIsMCwwLDEtNS42NywxLjYyLDM3LjgyLDM3LjgyLDAsMCwxLTUuNjkuNzFjLTEsMC0xLjkuMTgtMi44NS4yNmwtMi44NS4yNHEtNS43Mi41MS0xMS40OCwxLjFjLTMuODQuNC03LjcxLjgyLTExLjU4LDEuNGExMTIuMzQsMTEyLjM0LDAsMCwwLTIyLjk0LDUuNjFjLTMuNzIsMS4zNS03LjM0LDMtMTAuOTQsNC42NHMtNy4xNCwzLjUxLTEwLjYsNS41MUExNTEuNiwxNTEuNiwwLDAsMCw2OC41Niw4N0M2Ny4yMyw4OC40OCw2Niw5MCw2NC42NCw5MS41NnMtMi41MSwzLjE1LTMuNzUsNC43M2wtMy41NCw0LjljLTEuMTMsMS42Ni0yLjIzLDMuMzUtMy4zMyw1YTEyNywxMjcsMCwwLDAtMTAuOTMsMjEuNDksMS41OCwxLjU4LDAsMSwxLTMtMS4xNVM0MC4xOSwxMjYuNDcsNDAuMjEsMTI2LjQzWiIvPjxyZWN0IGNsYXNzPSJjbHMtMiIgd2lkdGg9IjM5MiIgaGVpZ2h0PSIzOTIiLz48L2c+PC9nPjwvc3ZnPg==",r.style.position="absolute",r.style.left="50%",r.style.top="50%",r.style.width="18vw",r.style.height="18vw",r.style.marginLeft="-9vw",r.style.marginTop="-9vw",r.style.animation="spin1 0.75s infinite linear",r.style.webkitAnimation="spin1 0.75s infinite linear",r.style.transformOrigin="50% 50%",r.style.webkitTransformOrigin="50% 50%",this._loadingDiv.appendChild(n),this._loadingDiv.appendChild(r),this._resizeLoadingUI(),window.addEventListener("resize",this._resizeLoadingUI),this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor,document.body.appendChild(this._loadingDiv),this._loadingDiv.style.opacity="1"}},e.prototype.hideLoadingUI=function(){var e=this;this._loadingDiv&&(this._loadingDiv.style.opacity="0",this._loadingDiv.addEventListener("transitionend",function(){e._loadingDiv&&(e._loadingDiv.parentElement&&e._loadingDiv.parentElement.removeChild(e._loadingDiv),window.removeEventListener("resize",e._resizeLoadingUI),e._loadingDiv=null)}))},Object.defineProperty(e.prototype,"loadingUIText",{get:function(){return this._loadingText},set:function(e){this._loadingText=e,this._loadingTextDiv&&(this._loadingTextDiv.innerHTML=this._loadingText)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loadingUIBackgroundColor",{get:function(){return this._loadingDivBackgroundColor},set:function(e){this._loadingDivBackgroundColor=e,this._loadingDiv&&(this._loadingDiv.style.backgroundColor=this._loadingDivBackgroundColor)},enumerable:!0,configurable:!0}),e.DefaultLogoUrl="",e.DefaultSpinnerUrl="",e}();me.b.DefaultLoadingScreenFactory=function(e){return new Gi(e)};var ji=n(57),zi=n(66),Yi=function(){function e(){}return e.ConvertPanoramaToCubemap=function(e,t,n,r){if(!e)throw"ConvertPanoramaToCubemap: input cannot be null";if(e.length!=t*n*3)throw"ConvertPanoramaToCubemap: input size is wrong";return{front:this.CreateCubemapTexture(r,this.FACE_FRONT,e,t,n),back:this.CreateCubemapTexture(r,this.FACE_BACK,e,t,n),left:this.CreateCubemapTexture(r,this.FACE_LEFT,e,t,n),right:this.CreateCubemapTexture(r,this.FACE_RIGHT,e,t,n),up:this.CreateCubemapTexture(r,this.FACE_UP,e,t,n),down:this.CreateCubemapTexture(r,this.FACE_DOWN,e,t,n),size:r,type:_.a.TEXTURETYPE_FLOAT,format:_.a.TEXTUREFORMAT_RGB,gammaSpace:!1}},e.CreateCubemapTexture=function(e,t,n,r,i){for(var o=new ArrayBuffer(e*e*4*3),a=new Float32Array(o),s=t[1].subtract(t[0]).scale(1/e),u=t[3].subtract(t[2]).scale(1/e),l=1/e,c=0,h=0;h<e;h++){for(var d=t[0],f=t[2],p=0;p<e;p++){var _=f.subtract(d).scale(c).add(d);_.normalize();var m=this.CalcProjectionSpherical(_,n,r,i);a[h*e*3+3*p+0]=m.r,a[h*e*3+3*p+1]=m.g,a[h*e*3+3*p+2]=m.b,d=d.add(s),f=f.add(u)}c+=l}return a},e.CalcProjectionSpherical=function(e,t,n,r){for(var i=Math.atan2(e.z,e.x),o=Math.acos(e.y);i<-Math.PI;)i+=2*Math.PI;for(;i>Math.PI;)i-=2*Math.PI;var a=i/Math.PI,s=o/Math.PI;a=.5*a+.5;var u=Math.round(a*n);u<0?u=0:u>=n&&(u=n-1);var l=Math.round(s*r);l<0?l=0:l>=r&&(l=r-1);var c=r-l-1;return{r:t[c*n*3+3*u+0],g:t[c*n*3+3*u+1],b:t[c*n*3+3*u+2]}},e.FACE_FRONT=[new o.x(-1,-1,-1),new o.x(1,-1,-1),new o.x(-1,1,-1),new o.x(1,1,-1)],e.FACE_BACK=[new o.x(1,-1,1),new o.x(-1,-1,1),new o.x(1,1,1),new o.x(-1,1,1)],e.FACE_RIGHT=[new o.x(1,-1,-1),new o.x(1,-1,1),new o.x(1,1,-1),new o.x(1,1,1)],e.FACE_LEFT=[new o.x(-1,-1,1),new o.x(-1,-1,-1),new o.x(-1,1,1),new o.x(-1,1,-1)],e.FACE_DOWN=[new o.x(-1,1,-1),new o.x(1,1,-1),new o.x(-1,1,1),new o.x(1,1,1)],e.FACE_UP=[new o.x(-1,-1,1),new o.x(1,-1,1),new o.x(-1,-1,-1),new o.x(1,-1,-1)],e}(),Hi=function(){function e(){}return e.Ldexp=function(e,t){return t>1023?e*Math.pow(2,1023)*Math.pow(2,t-1023):t<-1074?e*Math.pow(2,-1074)*Math.pow(2,t+1074):e*Math.pow(2,t)},e.Rgbe2float=function(e,t,n,r,i,o){i>0?(i=this.Ldexp(1,i-136),e[o+0]=t*i,e[o+1]=n*i,e[o+2]=r*i):(e[o+0]=0,e[o+1]=0,e[o+2]=0)},e.readStringLine=function(e,t){for(var n="",r="",i=t;i<e.length-t&&"\n"!=(r=String.fromCharCode(e[i]));i++)n+=r;return n},e.RGBE_ReadHeader=function(e){var t,n,r=this.readStringLine(e,0);if("#"!=r[0]||"?"!=r[1])throw"Bad HDR Format.";var i=!1,o=!1,a=0;do{"FORMAT=32-bit_rle_rgbe"==(r=this.readStringLine(e,a+=r.length+1))?o=!0:0==r.length&&(i=!0)}while(!i);if(!o)throw"HDR Bad header format, unsupported FORMAT";r=this.readStringLine(e,a+=r.length+1);var s=/^\-Y (.*) \+X (.*)$/g.exec(r);if(!s||s.length<3)throw"HDR Bad header format, no size";if(n=parseInt(s[2]),t=parseInt(s[1]),n<8||n>32767)throw"HDR Bad header format, unsupported size";return{height:t,width:n,dataPosition:a+=r.length+1}},e.GetCubeMapTextureData=function(e,t){var n=new Uint8Array(e),r=this.RGBE_ReadHeader(n),i=this.RGBE_ReadPixels_RLE(n,r);return Yi.ConvertPanoramaToCubemap(i,r.width,r.height,t)},e.RGBE_ReadPixels=function(e,t){return this.RGBE_ReadPixels_RLE(e,t)},e.RGBE_ReadPixels_RLE=function(e,t){for(var n,r,i,o,a,s=t.height,u=t.width,l=t.dataPosition,c=0,h=0,d=0,f=new ArrayBuffer(4*u),p=new Uint8Array(f),_=new ArrayBuffer(t.width*t.height*4*3),m=new Float32Array(_);s>0;){if(n=e[l++],r=e[l++],i=e[l++],o=e[l++],2!=n||2!=r||128&i)throw"HDR Bad header format, not RLE";if((i<<8|o)!=u)throw"HDR Bad header format, wrong scan line width";for(c=0,d=0;d<4;d++)for(h=(d+1)*u;c<h;)if(n=e[l++],r=e[l++],n>128){if(0==(a=n-128)||a>h-c)throw"HDR Bad Format, bad scanline data (run)";for(;a-- >0;)p[c++]=r}else{if(0==(a=n)||a>h-c)throw"HDR Bad Format, bad scanline data (non-run)";if(p[c++]=r,--a>0)for(var g=0;g<a;g++)p[c++]=e[l++]}for(d=0;d<u;d++)this.Rgbe2float(m,n=p[d],r=p[d+u],i=p[d+2*u],o=p[d+3*u],(t.height-s)*u*3+3*d);s--}return m},e}(),Wi=function(e){function t(t,n,r,i,a,s,u,l,c){void 0===i&&(i=!1),void 0===a&&(a=!0),void 0===s&&(s=!1),void 0===u&&(u=!1),void 0===l&&(l=null),void 0===c&&(c=null);var h=e.call(this,n)||this;return h._generateHarmonics=!0,h._onLoad=null,h._onError=null,h.coordinatesMode=Ge.a.CUBIC_MODE,h._isBlocking=!0,h._rotationY=0,h.boundingBoxPosition=o.x.Zero(),t?(h.name=t,h.url=t,h.hasAlpha=!1,h.isCube=!0,h._textureMatrix=o.j.Identity(),h._onLoad=l,h._onError=c,h.gammaSpace=s,h._noMipmap=i,h._size=r,h._texture=h._getFromCache(t,h._noMipmap),h._texture?l&&(h._texture.isReady?ye.h.SetImmediate(function(){return l()}):h._texture.onLoadedObservable.add(l)):n.useDelayedTextureLoading?h.delayLoadState=me.b.DELAYLOADSTATE_NOTLOADED:h.loadTexture(),h):h}return l.d(t,e),Object.defineProperty(t.prototype,"isBlocking",{get:function(){return this._isBlocking},set:function(e){this._isBlocking=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY},set:function(e){this._rotationY=e,this.setReflectionTextureMatrix(o.j.RotationY(this._rotationY))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundingBoxSize",{get:function(){return this._boundingBoxSize},set:function(e){if(!this._boundingBoxSize||!this._boundingBoxSize.equals(e)){this._boundingBoxSize=e;var t=this.getScene();t&&t.markAllMaterialsAsDirty(_.a.MATERIAL_TextureDirtyFlag)}},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"HDRCubeTexture"},t.prototype.loadTexture=function(){var e=this,n=this.getScene();n&&(this._texture=n.getEngine().createRawCubeTextureFromUrl(this.url,n,this._size,me.b.TEXTUREFORMAT_RGB,n.getEngine().getCaps().textureFloat?me.b.TEXTURETYPE_FLOAT:me.b.TEXTURETYPE_UNSIGNED_INT,this._noMipmap,function(n){e.lodGenerationOffset=0,e.lodGenerationScale=.8;var r=e.getScene();if(!r)return null;var i=Hi.GetCubeMapTextureData(n,e._size);if(e._generateHarmonics){var a=hi.a.ConvertCubeMapToSphericalPolynomial(i);e.sphericalPolynomial=a}for(var s=[],u=null,l=0;l<6;l++){if(!r.getEngine().getCaps().textureFloat){var c=new ArrayBuffer(e._size*e._size*3);u=new Uint8Array(c)}var h=i[t._facesMapping[l]];if(e.gammaSpace||u)for(var d=0;d<e._size*e._size;d++)if(e.gammaSpace&&(h[3*d+0]=Math.pow(h[3*d+0],o.u),h[3*d+1]=Math.pow(h[3*d+1],o.u),h[3*d+2]=Math.pow(h[3*d+2],o.u)),u){var f=Math.max(255*h[3*d+0],0),p=Math.max(255*h[3*d+1],0),_=Math.max(255*h[3*d+2],0),m=Math.max(Math.max(f,p),_);if(m>255){var g=255/m;f*=g,p*=g,_*=g}u[3*d+0]=f,u[3*d+1]=p,u[3*d+2]=_}s.push(u||h)}return s},null,this._onLoad,this._onError))},t.prototype.clone=function(){var e=this.getScene();if(!e)return this;var n=new t(this.url,e,this._size,this._noMipmap,this._generateHarmonics,this.gammaSpace);return n.level=this.level,n.wrapU=this.wrapU,n.wrapV=this.wrapV,n.coordinatesIndex=this.coordinatesIndex,n.coordinatesMode=this.coordinatesMode,n},t.prototype.delayLoad=function(){this.delayLoadState===me.b.DELAYLOADSTATE_NOTLOADED&&(this.delayLoadState=me.b.DELAYLOADSTATE_LOADED,this._texture=this._getFromCache(this.url,this._noMipmap),this._texture||this.loadTexture())},t.prototype.getReflectionTextureMatrix=function(){return this._textureMatrix},t.prototype.setReflectionTextureMatrix=function(e){var t=this;this._textureMatrix=e,e.updateFlag!==this._textureMatrix.updateFlag&&e.isIdentity()!==this._textureMatrix.isIdentity()&&this.getScene().markAllMaterialsAsDirty(_.a.MATERIAL_TextureDirtyFlag,function(e){return-1!==e.getActiveTextures().indexOf(t)})},t.Parse=function(e,n,r){var i=null;return e.name&&!e.isRenderTarget&&((i=new t(r+e.name,n,e.size,e.noMipmap,e.generateHarmonics,e.useInGammaSpace)).name=e.name,i.hasAlpha=e.hasAlpha,i.level=e.level,i.coordinatesMode=e.coordinatesMode,i.isBlocking=e.isBlocking),i&&(e.boundingBoxPosition&&(i.boundingBoxPosition=o.x.FromArray(e.boundingBoxPosition)),e.boundingBoxSize&&(i.boundingBoxSize=o.x.FromArray(e.boundingBoxSize)),e.rotationY&&(i.rotationY=e.rotationY)),i},t.prototype.serialize=function(){if(!this.name)return null;var e={};return e.name=this.name,e.hasAlpha=this.hasAlpha,e.isCube=!0,e.level=this.level,e.size=this._size,e.coordinatesMode=this.coordinatesMode,e.useInGammaSpace=this.gammaSpace,e.generateHarmonics=this._generateHarmonics,e.customType="BABYLON.HDRCubeTexture",e.noMipmap=this._noMipmap,e.isBlocking=this._isBlocking,e.rotationY=this._rotationY,e},t._facesMapping=["right","left","up","down","front","back"],t}(Gr.a);a.a.RegisteredTypes["BABYLON.HDRCubeTexture"]=Wi;var Xi=function(){function e(e,t,n){void 0===t&&(t=0),void 0===n&&(n=null),this.name=e,this.animations=new Array,this._positions=null,this._normals=null,this._tangents=null,this.onInfluenceChanged=new i.c,this._onDataLayoutChanged=new i.c,this._animationPropertiesOverride=null,this._scene=n||S.a.LastCreatedScene,this.influence=t}return Object.defineProperty(e.prototype,"influence",{get:function(){return this._influence},set:function(e){if(this._influence!==e){var t=this._influence;this._influence=e,this.onInfluenceChanged.hasObservers&&this.onInfluenceChanged.notifyObservers(0===t||0===e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"animationPropertiesOverride",{get:function(){return!this._animationPropertiesOverride&&this._scene?this._scene.animationPropertiesOverride:this._animationPropertiesOverride},set:function(e){this._animationPropertiesOverride=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasPositions",{get:function(){return!!this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasNormals",{get:function(){return!!this._normals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasTangents",{get:function(){return!!this._tangents},enumerable:!0,configurable:!0}),e.prototype.setPositions=function(e){var t=this.hasPositions;this._positions=e,t!==this.hasPositions&&this._onDataLayoutChanged.notifyObservers(void 0)},e.prototype.getPositions=function(){return this._positions},e.prototype.setNormals=function(e){var t=this.hasNormals;this._normals=e,t!==this.hasNormals&&this._onDataLayoutChanged.notifyObservers(void 0)},e.prototype.getNormals=function(){return this._normals},e.prototype.setTangents=function(e){var t=this.hasTangents;this._tangents=e,t!==this.hasTangents&&this._onDataLayoutChanged.notifyObservers(void 0)},e.prototype.getTangents=function(){return this._tangents},e.prototype.serialize=function(){var e={};return e.name=this.name,e.influence=this.influence,e.positions=Array.prototype.slice.call(this.getPositions()),null!=this.id&&(e.id=this.id),this.hasNormals&&(e.normals=Array.prototype.slice.call(this.getNormals())),this.hasTangents&&(e.tangents=Array.prototype.slice.call(this.getTangents())),L.a.AppendSerializedAnimations(this,e),e},e.prototype.getClassName=function(){return"MorphTarget"},e.Parse=function(t){var n=new e(t.name,t.influence);if(n.setPositions(t.positions),null!=t.id&&(n.id=t.id),t.normals&&n.setNormals(t.normals),t.tangents&&n.setTangents(t.tangents),t.animations)for(var r=0;r<t.animations.length;r++){var i=t.animations[r],o=a.a.GetClass("BABYLON.Animation");o&&n.animations.push(o.Parse(i))}return n},e.FromMesh=function(t,n,r){n||(n=t.name);var i=new e(n,r,t.getScene());return i.setPositions(t.getVerticesData(Mn.b.PositionKind)),t.isVerticesDataPresent(Mn.b.NormalKind)&&i.setNormals(t.getVerticesData(Mn.b.NormalKind)),t.isVerticesDataPresent(Mn.b.TangentKind)&&i.setTangents(t.getVerticesData(Mn.b.TangentKind)),i},l.c([Object(L.c)()],e.prototype,"id",void 0),e}(),Ki=function(){function e(e){void 0===e&&(e=null),this._targets=new Array,this._targetInfluenceChangedObservers=new Array,this._targetDataLayoutChangedObservers=new Array,this._activeTargets=new Gt.a(16),this._supportsNormals=!1,this._supportsTangents=!1,this._vertexCount=0,this._uniqueId=0,this._tempInfluences=new Array,e||(e=S.a.LastCreatedScene),this._scene=e,this._scene&&(this._scene.morphTargetManagers.push(this),this._uniqueId=this._scene.getUniqueId())}return Object.defineProperty(e.prototype,"uniqueId",{get:function(){return this._uniqueId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertexCount",{get:function(){return this._vertexCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportsNormals",{get:function(){return this._supportsNormals},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"supportsTangents",{get:function(){return this._supportsTangents},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numTargets",{get:function(){return this._targets.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numInfluencers",{get:function(){return this._activeTargets.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"influences",{get:function(){return this._influences},enumerable:!0,configurable:!0}),e.prototype.getActiveTarget=function(e){return this._activeTargets.data[e]},e.prototype.getTarget=function(e){return this._targets[e]},e.prototype.addTarget=function(e){var t=this;this._targets.push(e),this._targetInfluenceChangedObservers.push(e.onInfluenceChanged.add(function(e){t._syncActiveTargets(e)})),this._targetDataLayoutChangedObservers.push(e._onDataLayoutChanged.add(function(){t._syncActiveTargets(!0)})),this._syncActiveTargets(!0)},e.prototype.removeTarget=function(e){var t=this._targets.indexOf(e);t>=0&&(this._targets.splice(t,1),e.onInfluenceChanged.remove(this._targetInfluenceChangedObservers.splice(t,1)[0]),e._onDataLayoutChanged.remove(this._targetDataLayoutChangedObservers.splice(t,1)[0]),this._syncActiveTargets(!0))},e.prototype.serialize=function(){var e={};e.id=this.uniqueId,e.targets=[];for(var t=0,n=this._targets;t<n.length;t++)e.targets.push(n[t].serialize());return e},e.prototype._syncActiveTargets=function(e){var t=0;this._activeTargets.reset(),this._supportsNormals=!0,this._supportsTangents=!0,this._vertexCount=0;for(var n=0,r=this._targets;n<r.length;n++){var i=r[n];if(0!==i.influence){this._activeTargets.push(i),this._tempInfluences[t++]=i.influence,this._supportsNormals=this._supportsNormals&&i.hasNormals,this._supportsTangents=this._supportsTangents&&i.hasTangents;var o=i.getPositions();if(o){var a=o.length/3;if(0===this._vertexCount)this._vertexCount=a;else if(this._vertexCount!==a)return void p.a.Error("Incompatible target. Targets must all have the same vertices count.")}}}this._influences&&this._influences.length===t||(this._influences=new Float32Array(t));for(var s=0;s<t;s++)this._influences[s]=this._tempInfluences[s];e&&this.synchronize()},e.prototype.synchronize=function(){if(this._scene)for(var e=0,t=this._scene.meshes;e<t.length;e++){var n=t[e];n.morphTargetManager===this&&n._syncGeometryWithMorphTargetManager()}},e.Parse=function(t,n){var r=new e(n);r._uniqueId=t.id;for(var i=0,o=t.targets;i<o.length;i++)r.addTarget(Xi.Parse(o[i]));return r},e}(),Qi=n(27),qi=n(37),Zi=function(){function e(t,n){if(void 0===n&&(n=e.DefaultPluginFactory()),this._physicsPlugin=n,this._impostors=[],this._joints=[],!this._physicsPlugin.isSupported())throw new Error("Physics Engine "+this._physicsPlugin.name+" cannot be found. Please make sure it is included.");t=t||new o.x(0,-9.807,0),this.setGravity(t),this.setTimeStep()}return e.DefaultPluginFactory=function(){throw be.a.WarnImport("CannonJSPlugin")},e.prototype.setGravity=function(e){this.gravity=e,this._physicsPlugin.setGravity(this.gravity)},e.prototype.setTimeStep=function(e){void 0===e&&(e=1/60),this._physicsPlugin.setTimeStep(e)},e.prototype.getTimeStep=function(){return this._physicsPlugin.getTimeStep()},e.prototype.dispose=function(){this._impostors.forEach(function(e){e.dispose()}),this._physicsPlugin.dispose()},e.prototype.getPhysicsPluginName=function(){return this._physicsPlugin.name},e.prototype.addImpostor=function(e){e.uniqueId=this._impostors.push(e),e.parent||this._physicsPlugin.generatePhysicsBody(e)},e.prototype.removeImpostor=function(e){var t=this._impostors.indexOf(e);t>-1&&this._impostors.splice(t,1).length&&this.getPhysicsPlugin().removePhysicsBody(e)},e.prototype.addJoint=function(e,t,n){var r={mainImpostor:e,connectedImpostor:t,joint:n};n.physicsPlugin=this._physicsPlugin,this._joints.push(r),this._physicsPlugin.generateJoint(r)},e.prototype.removeJoint=function(e,t,n){var r=this._joints.filter(function(r){return r.connectedImpostor===t&&r.joint===n&&r.mainImpostor===e});r.length&&this._physicsPlugin.removeJoint(r[0])},e.prototype._step=function(e){var t=this;this._impostors.forEach(function(e){e.isBodyInitRequired()&&t._physicsPlugin.generatePhysicsBody(e)}),e>.1?e=.1:e<=0&&(e=1/60),this._physicsPlugin.executeStep(e,this._impostors)},e.prototype.getPhysicsPlugin=function(){return this._physicsPlugin},e.prototype.getImpostors=function(){return this._impostors},e.prototype.getImpostorForPhysicsObject=function(e){for(var t=0;t<this._impostors.length;++t)if(this._impostors[t].object===e)return this._impostors[t];return null},e.prototype.getImpostorWithPhysicsBody=function(e){for(var t=0;t<this._impostors.length;++t)if(this._impostors[t].physicsBody===e)return this._impostors[t];return null},e.prototype.raycast=function(e,t){return this._physicsPlugin.raycast(e,t)},e.Epsilon=.001,e}(),Ji=function(){function e(){this._hasHit=!1,this._hitDistance=0,this._hitNormalWorld=o.x.Zero(),this._hitPointWorld=o.x.Zero(),this._rayFromWorld=o.x.Zero(),this._rayToWorld=o.x.Zero()}return Object.defineProperty(e.prototype,"hasHit",{get:function(){return this._hasHit},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitDistance",{get:function(){return this._hitDistance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitNormalWorld",{get:function(){return this._hitNormalWorld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hitPointWorld",{get:function(){return this._hitPointWorld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rayFromWorld",{get:function(){return this._rayFromWorld},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rayToWorld",{get:function(){return this._rayToWorld},enumerable:!0,configurable:!0}),e.prototype.setHitData=function(e,t){this._hasHit=!0,this._hitNormalWorld=new o.x(e.x,e.y,e.z),this._hitPointWorld=new o.x(t.x,t.y,t.z)},e.prototype.setHitDistance=function(e){this._hitDistance=e},e.prototype.calculateHitDistance=function(){this._hitDistance=o.x.Distance(this._rayFromWorld,this._hitPointWorld)},e.prototype.reset=function(e,t){void 0===e&&(e=o.x.Zero()),void 0===t&&(t=o.x.Zero()),this._rayFromWorld=e,this._rayToWorld=t,this._hasHit=!1,this._hitDistance=0,this._hitNormalWorld=o.x.Zero(),this._hitPointWorld=o.x.Zero()},e}(),$i=function(){function e(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=10),void 0===n&&(n=CANNON),this._useDeltaForWorldStep=e,this.name="CannonJSPlugin",this._physicsMaterials=new Array,this._fixedTimeStep=1/60,this._removeAfterStep=new Array,this._minus90X=new o.q(-.7071067811865475,0,0,.7071067811865475),this._plus90X=new o.q(.7071067811865475,0,0,.7071067811865475),this._tmpPosition=o.x.Zero(),this._tmpDeltaPosition=o.x.Zero(),this._tmpUnityRotation=new o.q,this.BJSCANNON=n,this.isSupported()?(this._extendNamespace(),this.world=new this.BJSCANNON.World,this.world.broadphase=new this.BJSCANNON.NaiveBroadphase,this.world.solver.iterations=t,this._cannonRaycastResult=new this.BJSCANNON.RaycastResult,this._raycastResult=new Ji):p.a.Error("CannonJS is not available. Please make sure you included the js file.")}return e.prototype.setGravity=function(e){this.world.gravity.copy(e)},e.prototype.setTimeStep=function(e){this._fixedTimeStep=e},e.prototype.getTimeStep=function(){return this._fixedTimeStep},e.prototype.executeStep=function(e){var t=this;this.world.step(this._fixedTimeStep,this._useDeltaForWorldStep?e:0,3),this._removeAfterStep.length>0&&(this._removeAfterStep.forEach(function(e){t.world.remove(e.physicsBody)}),this._removeAfterStep=[])},e.prototype.applyImpulse=function(e,t,n){var r=new this.BJSCANNON.Vec3(n.x,n.y,n.z),i=new this.BJSCANNON.Vec3(t.x,t.y,t.z);e.physicsBody.applyImpulse(i,r)},e.prototype.applyForce=function(e,t,n){var r=new this.BJSCANNON.Vec3(n.x,n.y,n.z),i=new this.BJSCANNON.Vec3(t.x,t.y,t.z);e.physicsBody.applyForce(i,r)},e.prototype.generatePhysicsBody=function(e){if(e.parent)e.physicsBody&&(this.removePhysicsBody(e),e.forceUpdate());else{if(e.isBodyInitRequired()){var t=this._createShape(e),n=e.physicsBody;n&&this.removePhysicsBody(e);var r=this._addMaterial("mat-"+e.uniqueId,e.getParam("friction"),e.getParam("restitution")),i={mass:e.getParam("mass"),material:r},o=e.getParam("nativeOptions");for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a]);e.physicsBody=new this.BJSCANNON.Body(i),e.physicsBody.addEventListener("collide",e.onCollide),this.world.addEventListener("preStep",e.beforeStep),this.world.addEventListener("postStep",e.afterStep),e.physicsBody.addShape(t),this.world.add(e.physicsBody),n&&["force","torque","velocity","angularVelocity"].forEach(function(t){e.physicsBody[t].copy(n[t])}),this._processChildMeshes(e)}this._updatePhysicsBodyTransformation(e)}},e.prototype._processChildMeshes=function(e){var t=this,n=e.object.getChildMeshes?e.object.getChildMeshes(!0):[],r=e.object.rotationQuaternion;if(n.length){var i=function(n,a){if(r&&a.rotationQuaternion){var s=a.getPhysicsImpostor();if(s&&s.parent!==e){var u=a.getAbsolutePosition().subtract(e.object.getAbsolutePosition()),l=a.rotationQuaternion.multiply(o.q.Inverse(r));s.physicsBody&&(t.removePhysicsBody(s),s.physicsBody=null),s.parent=e,s.resetUpdateFlags(),e.physicsBody.addShape(t._createShape(s),new t.BJSCANNON.Vec3(u.x,u.y,u.z),new t.BJSCANNON.Quaternion(l.x,l.y,l.z,l.w)),e.physicsBody.mass+=s.getParam("mass")}r.multiplyInPlace(a.rotationQuaternion),a.getChildMeshes(!0).filter(function(e){return!!e.physicsImpostor}).forEach(i.bind(t,a.getAbsolutePosition()))}};n.filter(function(e){return!!e.physicsImpostor}).forEach(i.bind(this,e.object.getAbsolutePosition()))}},e.prototype.removePhysicsBody=function(e){e.physicsBody.removeEventListener("collide",e.onCollide),this.world.removeEventListener("preStep",e.beforeStep),this.world.removeEventListener("postStep",e.afterStep),this._removeAfterStep.push(e)},e.prototype.generateJoint=function(e){var t=e.mainImpostor.physicsBody,n=e.connectedImpostor.physicsBody;if(t&&n){var r,i=e.joint.jointData,o={pivotA:i.mainPivot?(new this.BJSCANNON.Vec3).copy(i.mainPivot):null,pivotB:i.connectedPivot?(new this.BJSCANNON.Vec3).copy(i.connectedPivot):null,axisA:i.mainAxis?(new this.BJSCANNON.Vec3).copy(i.mainAxis):null,axisB:i.connectedAxis?(new this.BJSCANNON.Vec3).copy(i.connectedAxis):null,maxForce:i.nativeParams.maxForce,collideConnected:!!i.collision};switch(e.joint.type){case qi.e.HingeJoint:case qi.e.Hinge2Joint:r=new this.BJSCANNON.HingeConstraint(t,n,o);break;case qi.e.DistanceJoint:r=new this.BJSCANNON.DistanceConstraint(t,n,i.maxDistance||2);break;case qi.e.SpringJoint:r=new this.BJSCANNON.Spring(t,n,{restLength:i.length,stiffness:i.stiffness,damping:i.damping,localAnchorA:o.pivotA,localAnchorB:o.pivotB});break;case qi.e.LockJoint:r=new this.BJSCANNON.LockConstraint(t,n,o);break;case qi.e.PointToPointJoint:case qi.e.BallAndSocketJoint:default:r=new this.BJSCANNON.PointToPointConstraint(t,o.pivotA,n,o.pivotB,o.maxForce)}r.collideConnected=!!i.collision,e.joint.physicsJoint=r,e.joint.type!==qi.e.SpringJoint?this.world.addConstraint(r):(e.joint.jointData.forceApplicationCallback=e.joint.jointData.forceApplicationCallback||function(){r.applyForce()},e.mainImpostor.registerAfterPhysicsStep(e.joint.jointData.forceApplicationCallback))}},e.prototype.removeJoint=function(e){e.joint.type!==qi.e.SpringJoint?this.world.removeConstraint(e.joint.physicsJoint):e.mainImpostor.unregisterAfterPhysicsStep(e.joint.jointData.forceApplicationCallback)},e.prototype._addMaterial=function(e,t,n){var r,i;for(r=0;r<this._physicsMaterials.length;r++)if((i=this._physicsMaterials[r]).friction===t&&i.restitution===n)return i;var o=new this.BJSCANNON.Material(e);return o.friction=t,o.restitution=n,this._physicsMaterials.push(o),o},e.prototype._checkWithEpsilon=function(e){return e<Zi.Epsilon?Zi.Epsilon:e},e.prototype._createShape=function(e){var t,n=e.object,r=e.getObjectExtendSize();switch(e.type){case Qi.a.SphereImpostor:var i=r.y,a=r.z;t=new this.BJSCANNON.Sphere(Math.max(this._checkWithEpsilon(r.x),this._checkWithEpsilon(i),this._checkWithEpsilon(a))/2);break;case Qi.a.CylinderImpostor:var s=e.getParam("nativeOptions");s||(s={});var u=void 0!==s.radiusTop?s.radiusTop:this._checkWithEpsilon(r.x)/2,l=void 0!==s.radiusBottom?s.radiusBottom:this._checkWithEpsilon(r.x)/2,c=void 0!==s.height?s.height:this._checkWithEpsilon(r.y);t=new this.BJSCANNON.Cylinder(u,l,c,void 0!==s.numSegments?s.numSegments:16);var h=new this.BJSCANNON.Quaternion;h.setFromAxisAngle(new this.BJSCANNON.Vec3(1,0,0),-Math.PI/2);var d=new this.BJSCANNON.Vec3(0,0,0);t.transformAllPoints(d,h);break;case Qi.a.BoxImpostor:var f=r.scale(.5);t=new this.BJSCANNON.Box(new this.BJSCANNON.Vec3(this._checkWithEpsilon(f.x),this._checkWithEpsilon(f.y),this._checkWithEpsilon(f.z)));break;case Qi.a.PlaneImpostor:p.a.Warn("Attention, PlaneImposter might not behave as you expect. Consider using BoxImposter instead"),t=new this.BJSCANNON.Plane;break;case Qi.a.MeshImpostor:var _=n.getVerticesData?n.getVerticesData(Mn.b.PositionKind):[],m=n.getIndices?n.getIndices():[];if(!_)return;var g=n.position.clone(),v=n.rotation&&n.rotation.clone(),y=n.rotationQuaternion&&n.rotationQuaternion.clone();n.position.copyFromFloats(0,0,0),n.rotation&&n.rotation.copyFromFloats(0,0,0),n.rotationQuaternion&&n.rotationQuaternion.copyFrom(e.getParentsRotation()),n.rotationQuaternion&&n.parent&&n.rotationQuaternion.conjugateInPlace();var b,T=n.computeWorldMatrix(!0),E=new Array;for(b=0;b<_.length;b+=3)o.x.TransformCoordinates(o.x.FromArray(_,b),T).toArray(E,b);p.a.Warn("MeshImpostor only collides against spheres."),t=new this.BJSCANNON.Trimesh(E,m),n.position.copyFrom(g),v&&n.rotation&&n.rotation.copyFrom(v),y&&n.rotationQuaternion&&n.rotationQuaternion.copyFrom(y);break;case Qi.a.HeightmapImpostor:var x=n.position.clone(),M=n.rotation&&n.rotation.clone(),A=n.rotationQuaternion&&n.rotationQuaternion.clone();n.position.copyFromFloats(0,0,0),n.rotation&&n.rotation.copyFromFloats(0,0,0),n.rotationQuaternion&&n.rotationQuaternion.copyFrom(e.getParentsRotation()),n.rotationQuaternion&&n.parent&&n.rotationQuaternion.conjugateInPlace(),n.rotationQuaternion&&n.rotationQuaternion.multiplyInPlace(this._minus90X),t=this._createHeightmap(n),n.position.copyFrom(x),M&&n.rotation&&n.rotation.copyFrom(M),A&&n.rotationQuaternion&&n.rotationQuaternion.copyFrom(A),n.computeWorldMatrix(!0);break;case Qi.a.ParticleImpostor:t=new this.BJSCANNON.Particle;break;case Qi.a.NoImpostor:t=new this.BJSCANNON.Box(new this.BJSCANNON.Vec3(0,0,0))}return t},e.prototype._createHeightmap=function(e,t){var n,r=e.getVerticesData(Mn.b.PositionKind),i=e.computeWorldMatrix(!0),a=new Array;for(n=0;n<r.length;n+=3)o.x.TransformCoordinates(o.x.FromArray(r,n),i).toArray(a,n);r=a;for(var s=new Array,u=t||~~(Math.sqrt(r.length/3)-1),l=e.getBoundingInfo(),c=Math.min(l.boundingBox.extendSizeWorld.x,l.boundingBox.extendSizeWorld.y),h=l.boundingBox.extendSizeWorld.z,d=2*c/u,f=0;f<r.length;f+=3){var p=Math.round(r[f+0]/d+u/2),_=Math.round(-1*(r[f+1]/d-u/2)),m=-r[f+2]+h;s[p]||(s[p]=[]),s[p][_]||(s[p][_]=m),s[p][_]=Math.max(m,s[p][_])}for(p=0;p<=u;++p){if(!s[p]){for(var g=1;!s[(p+g)%u];)g++;s[p]=s[(p+g)%u].slice()}for(_=0;_<=u;++_)if(!s[p][_]){var v;for(g=1;void 0===v;)v=s[p][(_+g++)%u];s[p][_]=v}}var y=new this.BJSCANNON.Heightfield(s,{elementSize:d});return y.minY=h,y},e.prototype._updatePhysicsBodyTransformation=function(e){var t=e.object;if(t.computeWorldMatrix&&t.computeWorldMatrix(!0),t.getBoundingInfo()){var n=e.getObjectCenter();this._tmpDeltaPosition.copyFrom(t.getAbsolutePivotPoint().subtract(n)),this._tmpDeltaPosition.divideInPlace(e.object.scaling),this._tmpPosition.copyFrom(n);var r=t.rotationQuaternion;if(r){if(e.type!==Qi.a.PlaneImpostor&&e.type!==Qi.a.HeightmapImpostor||(r=r.multiply(this._minus90X),e.setDeltaRotation(this._plus90X)),e.type===Qi.a.HeightmapImpostor){var i=t,a=i.getBoundingInfo(),s=i.rotationQuaternion;i.rotationQuaternion=this._tmpUnityRotation,i.computeWorldMatrix(!0);var u=n.clone(),l=i.getPivotMatrix();l=l?l.clone():o.j.Identity();var c=o.j.Translation(a.boundingBox.extendSizeWorld.x,0,-a.boundingBox.extendSizeWorld.z);i.setPreTransformMatrix(c),i.computeWorldMatrix(!0);var h=a.boundingBox.centerWorld.subtract(n).subtract(i.position).negate();this._tmpPosition.copyFromFloats(h.x,h.y-a.boundingBox.extendSizeWorld.y,h.z),this._tmpDeltaPosition.copyFrom(a.boundingBox.centerWorld.subtract(u)),this._tmpDeltaPosition.y+=a.boundingBox.extendSizeWorld.y,i.rotationQuaternion=s,i.setPreTransformMatrix(l),i.computeWorldMatrix(!0)}else e.type===Qi.a.MeshImpostor&&this._tmpDeltaPosition.copyFromFloats(0,0,0);e.setDeltaPosition(this._tmpDeltaPosition),e.physicsBody.position.copy(this._tmpPosition),e.physicsBody.quaternion.copy(r)}}},e.prototype.setTransformationFromPhysicsBody=function(e){e.object.position.copyFrom(e.physicsBody.position),e.object.rotationQuaternion&&e.object.rotationQuaternion.copyFrom(e.physicsBody.quaternion)},e.prototype.setPhysicsBodyTransformation=function(e,t,n){e.physicsBody.position.copy(t),e.physicsBody.quaternion.copy(n)},e.prototype.isSupported=function(){return void 0!==this.BJSCANNON},e.prototype.setLinearVelocity=function(e,t){e.physicsBody.velocity.copy(t)},e.prototype.setAngularVelocity=function(e,t){e.physicsBody.angularVelocity.copy(t)},e.prototype.getLinearVelocity=function(e){var t=e.physicsBody.velocity;return t?new o.x(t.x,t.y,t.z):null},e.prototype.getAngularVelocity=function(e){var t=e.physicsBody.angularVelocity;return t?new o.x(t.x,t.y,t.z):null},e.prototype.setBodyMass=function(e,t){e.physicsBody.mass=t,e.physicsBody.updateMassProperties()},e.prototype.getBodyMass=function(e){return e.physicsBody.mass},e.prototype.getBodyFriction=function(e){return e.physicsBody.material.friction},e.prototype.setBodyFriction=function(e,t){e.physicsBody.material.friction=t},e.prototype.getBodyRestitution=function(e){return e.physicsBody.material.restitution},e.prototype.setBodyRestitution=function(e,t){e.physicsBody.material.restitution=t},e.prototype.sleepBody=function(e){e.physicsBody.sleep()},e.prototype.wakeUpBody=function(e){e.physicsBody.wakeUp()},e.prototype.updateDistanceJoint=function(e,t){e.physicsJoint.distance=t},e.prototype.setMotor=function(e,t,n,r){r||(e.physicsJoint.enableMotor(),e.physicsJoint.setMotorSpeed(t),n&&this.setLimit(e,n))},e.prototype.setLimit=function(e,t,n){e.physicsJoint.motorEquation.maxForce=t,e.physicsJoint.motorEquation.minForce=void 0===n?-t:n},e.prototype.syncMeshWithImpostor=function(e,t){var n=t.physicsBody;e.position.x=n.position.x,e.position.y=n.position.y,e.position.z=n.position.z,e.rotationQuaternion&&(e.rotationQuaternion.x=n.quaternion.x,e.rotationQuaternion.y=n.quaternion.y,e.rotationQuaternion.z=n.quaternion.z,e.rotationQuaternion.w=n.quaternion.w)},e.prototype.getRadius=function(e){return e.physicsBody.shapes[0].boundingSphereRadius},e.prototype.getBoxSizeToRef=function(e,t){var n=e.physicsBody.shapes[0];t.x=2*n.halfExtents.x,t.y=2*n.halfExtents.y,t.z=2*n.halfExtents.z},e.prototype.dispose=function(){},e.prototype._extendNamespace=function(){var e=new this.BJSCANNON.Vec3,t=this.BJSCANNON;this.BJSCANNON.World.prototype.step=function(n,r,i){if(i=i||10,0===(r=r||0))this.internalStep(n),this.time+=n;else{var o=Math.floor((this.time+r)/n)-Math.floor(this.time/n);o=Math.min(o,i)||1;for(var a=performance.now(),s=0;s!==o&&(this.internalStep(n),!(performance.now()-a>1e3*n));s++);this.time+=r;for(var u=this.time%n/n,l=e,c=this.bodies,h=0;h!==c.length;h++){var d=c[h];d.type!==t.Body.STATIC&&d.sleepState!==t.Body.SLEEPING?(d.position.vsub(d.previousPosition,l),l.scale(u,l),d.position.vadd(l,d.interpolatedPosition)):(d.interpolatedPosition.copy(d.position),d.interpolatedQuaternion.copy(d.quaternion))}}}},e.prototype.raycast=function(e,t){return this._cannonRaycastResult.reset(),this.world.raycastClosest(e,t,{},this._cannonRaycastResult),this._raycastResult.reset(e,t),this._cannonRaycastResult.hasHit&&(this._raycastResult.setHitData({x:this._cannonRaycastResult.hitNormalWorld.x,y:this._cannonRaycastResult.hitNormalWorld.y,z:this._cannonRaycastResult.hitNormalWorld.z},{x:this._cannonRaycastResult.hitPointWorld.x,y:this._cannonRaycastResult.hitPointWorld.y,z:this._cannonRaycastResult.hitPointWorld.z}),this._raycastResult.setHitDistance(this._cannonRaycastResult.distance)),this._raycastResult},e}();Zi.DefaultPluginFactory=function(){return new $i};var eo=function(){function e(e,t){void 0===t&&(t=OIMO),this.name="OimoJSPlugin",this._tmpImpostorsArray=[],this._tmpPositionVector=o.x.Zero(),this.BJSOIMO=t,this.world=new this.BJSOIMO.World({iterations:e}),this.world.clear(),this._raycastResult=new Ji}return e.prototype.setGravity=function(e){this.world.gravity.copy(e)},e.prototype.setTimeStep=function(e){this.world.timeStep=e},e.prototype.getTimeStep=function(){return this.world.timeStep},e.prototype.executeStep=function(e,t){var n=this;t.forEach(function(e){e.beforeStep()}),this.world.step(),t.forEach(function(e){e.afterStep(),n._tmpImpostorsArray[e.uniqueId]=e});for(var r=this.world.contacts;null!==r;)if(!r.touching||r.body1.sleeping||r.body2.sleeping){var i=this._tmpImpostorsArray[+r.body1.name],o=this._tmpImpostorsArray[+r.body2.name];i&&o?(i.onCollide({body:o.physicsBody}),o.onCollide({body:i.physicsBody}),r=r.next):r=r.next}else r=r.next},e.prototype.applyImpulse=function(e,t,n){var r=e.physicsBody.mass;e.physicsBody.applyImpulse(n.scale(this.world.invScale),t.scale(this.world.invScale*r))},e.prototype.applyForce=function(e,t,n){p.a.Warn("Oimo doesn't support applying force. Using impule instead."),this.applyImpulse(e,t,n)},e.prototype.generatePhysicsBody=function(e){var t=this;if(e.parent)e.physicsBody&&(this.removePhysicsBody(e),e.forceUpdate());else{if(e.isBodyInitRequired()){var n={name:e.uniqueId,config:[e.getParam("mass")||1,e.getParam("friction"),e.getParam("restitution")],size:[],type:[],pos:[],posShape:[],rot:[],rotShape:[],move:0!==e.getParam("mass"),density:e.getParam("mass"),friction:e.getParam("friction"),restitution:e.getParam("restitution"),world:this.world},r=[e];(s=e.object).getChildMeshes&&s.getChildMeshes().forEach(function(e){e.physicsImpostor&&r.push(e.physicsImpostor)});var i=function(e){return Math.max(e,Zi.Epsilon)},a=new o.q;r.forEach(function(r){if(r.object.rotationQuaternion){var o=r.object.rotationQuaternion;a=o.clone();var s=o.toEulerAngles(),u=r.getObjectExtendSize();if(r===e){var l=e.getObjectCenter();e.object.getAbsolutePivotPoint().subtractToRef(l,t._tmpPositionVector),t._tmpPositionVector.divideInPlace(e.object.scaling),n.pos.push(l.x),n.pos.push(l.y),n.pos.push(l.z),n.posShape.push(0,0,0),n.rotShape.push(0,0,0)}else{var c=r.object.getAbsolutePosition().subtract(e.object.getAbsolutePosition());n.posShape.push(c.x),n.posShape.push(c.y),n.posShape.push(c.z),n.pos.push(0,0,0),n.rotShape.push(57.29577951308232*s.x),n.rotShape.push(57.29577951308232*s.y),n.rotShape.push(57.29577951308232*s.z)}switch(r.type){case Qi.a.ParticleImpostor:p.a.Warn("No Particle support in OIMO.js. using SphereImpostor instead");case Qi.a.SphereImpostor:var h=u.y,d=u.z,f=Math.max(i(u.x),i(h),i(d))/2;n.type.push("sphere"),n.size.push(f),n.size.push(f),n.size.push(f);break;case Qi.a.CylinderImpostor:var _=i(u.x)/2,m=i(u.y);n.type.push("cylinder"),n.size.push(_),n.size.push(m),n.size.push(m);break;case Qi.a.PlaneImpostor:case Qi.a.BoxImpostor:default:_=i(u.x),m=i(u.y);var g=i(u.z);n.type.push("box"),n.size.push(_),n.size.push(m),n.size.push(g)}r.object.rotationQuaternion=o}}),e.physicsBody=this.world.add(n),e.physicsBody.resetQuaternion(a),e.physicsBody.updatePosition(0)}else this._tmpPositionVector.copyFromFloats(0,0,0);var s;e.setDeltaPosition(this._tmpPositionVector)}},e.prototype.removePhysicsBody=function(e){this.world.removeRigidBody(e.physicsBody)},e.prototype.generateJoint=function(e){var t=e.mainImpostor.physicsBody,n=e.connectedImpostor.physicsBody;if(t&&n){var r,i=e.joint.jointData,o=i.nativeParams||{},a={body1:t,body2:n,axe1:o.axe1||(i.mainAxis?i.mainAxis.asArray():null),axe2:o.axe2||(i.connectedAxis?i.connectedAxis.asArray():null),pos1:o.pos1||(i.mainPivot?i.mainPivot.asArray():null),pos2:o.pos2||(i.connectedPivot?i.connectedPivot.asArray():null),min:o.min,max:o.max,collision:o.collision||i.collision,spring:o.spring,world:this.world};switch(e.joint.type){case qi.e.BallAndSocketJoint:r="jointBall";break;case qi.e.SpringJoint:p.a.Warn("OIMO.js doesn't support Spring Constraint. Simulating using DistanceJoint instead"),a.min=i.length||a.min,a.max=Math.max(a.min,a.max);case qi.e.DistanceJoint:r="jointDistance",a.max=i.maxDistance;break;case qi.e.PrismaticJoint:r="jointPrisme";break;case qi.e.SliderJoint:r="jointSlide";break;case qi.e.WheelJoint:r="jointWheel";break;case qi.e.HingeJoint:default:r="jointHinge"}a.type=r,e.joint.physicsJoint=this.world.add(a)}},e.prototype.removeJoint=function(e){try{this.world.removeJoint(e.joint.physicsJoint)}catch(e){p.a.Warn(e)}},e.prototype.isSupported=function(){return void 0!==this.BJSOIMO},e.prototype.setTransformationFromPhysicsBody=function(e){e.physicsBody.sleeping||(e.object.position.copyFrom(e.physicsBody.getPosition()),e.object.rotationQuaternion&&e.object.rotationQuaternion.copyFrom(e.physicsBody.getQuaternion()))},e.prototype.setPhysicsBodyTransformation=function(e,t,n){var r=e.physicsBody;r.position.copy(t),r.orientation.copy(n),r.syncShapes(),r.awake()},e.prototype.setLinearVelocity=function(e,t){e.physicsBody.linearVelocity.copy(t)},e.prototype.setAngularVelocity=function(e,t){e.physicsBody.angularVelocity.copy(t)},e.prototype.getLinearVelocity=function(e){var t=e.physicsBody.linearVelocity;return t?new o.x(t.x,t.y,t.z):null},e.prototype.getAngularVelocity=function(e){var t=e.physicsBody.angularVelocity;return t?new o.x(t.x,t.y,t.z):null},e.prototype.setBodyMass=function(e,t){var n=0===t;e.physicsBody.shapes.density=n?1:t,e.physicsBody.setupMass(n?2:1)},e.prototype.getBodyMass=function(e){return e.physicsBody.shapes.density},e.prototype.getBodyFriction=function(e){return e.physicsBody.shapes.friction},e.prototype.setBodyFriction=function(e,t){e.physicsBody.shapes.friction=t},e.prototype.getBodyRestitution=function(e){return e.physicsBody.shapes.restitution},e.prototype.setBodyRestitution=function(e,t){e.physicsBody.shapes.restitution=t},e.prototype.sleepBody=function(e){e.physicsBody.sleep()},e.prototype.wakeUpBody=function(e){e.physicsBody.awake()},e.prototype.updateDistanceJoint=function(e,t,n){e.physicsJoint.limitMotor.upperLimit=t,void 0!==n&&(e.physicsJoint.limitMotor.lowerLimit=n)},e.prototype.setMotor=function(e,t,n,r){void 0!==n?p.a.Warn("OimoJS plugin currently has unexpected behavior when using setMotor with force parameter"):n=1e6;var i=r?e.physicsJoint.rotationalLimitMotor2:e.physicsJoint.rotationalLimitMotor1||e.physicsJoint.rotationalLimitMotor||e.physicsJoint.limitMotor;i&&i.setMotor(t*=-1,n)},e.prototype.setLimit=function(e,t,n,r){var i=r?e.physicsJoint.rotationalLimitMotor2:e.physicsJoint.rotationalLimitMotor1||e.physicsJoint.rotationalLimitMotor||e.physicsJoint.limitMotor;i&&i.setLimit(t,void 0===n?-t:n)},e.prototype.syncMeshWithImpostor=function(e,t){var n=t.physicsBody;e.position.x=n.position.x,e.position.y=n.position.y,e.position.z=n.position.z,e.rotationQuaternion&&(e.rotationQuaternion.x=n.orientation.x,e.rotationQuaternion.y=n.orientation.y,e.rotationQuaternion.z=n.orientation.z,e.rotationQuaternion.w=n.orientation.s)},e.prototype.getRadius=function(e){return e.physicsBody.shapes.radius},e.prototype.getBoxSizeToRef=function(e,t){var n=e.physicsBody.shapes;t.x=2*n.halfWidth,t.y=2*n.halfHeight,t.z=2*n.halfDepth},e.prototype.dispose=function(){this.world.clear()},e.prototype.raycast=function(e,t){return p.a.Warn("raycast is not currently supported by the Oimo physics plugin"),this._raycastResult.reset(e,t),this._raycastResult},e}();xn.a.CreateRibbon=function(e){var t=e.pathArray,n=e.closeArray||!1,r=e.closePath||!1,i=e.invertUV||!1,o=Math.floor(t[0].length/2),a=e.offset||o;a=a>o?o:Math.floor(a);var s,u,l,c,h=0===e.sideOrientation?0:e.sideOrientation||xn.a.DEFAULTSIDE,d=e.uvs,f=e.colors,p=[],_=[],m=[],g=[],v=[],y=[],b=[],T=[],E=[],x=[];if(t.length<2){var M=[],A=[];for(l=0;l<t[0].length-a;l++)M.push(t[0][l]),A.push(t[0][l+a]);t=[M,A]}var S,C,P,R,D,O=0,w=r?1:0;for(s=t[0].length,u=0;u<t.length;u++){for(b[u]=0,v[u]=[0],s=s<(C=(S=t[u]).length)?s:C,c=0;c<C;)p.push(S[c].x,S[c].y,S[c].z),c>0&&(P=S[c].subtract(S[c-1]).length()+b[u],v[u].push(P),b[u]=P),c++;r&&(c--,p.push(S[0].x,S[0].y,S[0].z),P=S[c].subtract(S[0]).length()+b[u],v[u].push(P),b[u]=P),E[u]=C+w,x[u]=O,O+=C+w}var L,I,F=null,N=null;for(l=0;l<s+w;l++){for(T[l]=0,y[l]=[0],u=0;u<t.length-1;u++)R=t[u],D=t[u+1],l===s?(F=R[0],N=D[0]):(F=R[l],N=D[l]),P=N.subtract(F).length()+T[l],y[l].push(P),T[l]=P;n&&N&&F&&(R=t[u],D=t[0],l===s&&(N=D[0]),P=N.subtract(F).length()+T[l],T[l]=P)}if(d)for(u=0;u<d.length;u++)g.push(d[u].x,d[u].y);else for(u=0;u<t.length;u++)for(l=0;l<s+w;l++)L=0!=b[u]?v[u][l]/b[u]:0,I=0!=T[l]?y[l][u]/T[l]:0,i?g.push(I,L):g.push(L,I);for(var B=0,k=E[u=0]-1,U=E[u+1]-1,V=k<U?k:U,G=x[1]-x[0],j=n?E.length:E.length-1;B<=V&&u<j;)_.push(B,B+G,B+1),_.push(B+G+1,B+1,B+G),(B+=1)===V&&(++u==E.length-1?(G=x[0]-x[u],k=E[u]-1,U=E[0]-1):(G=x[u+1]-x[u],k=E[u]-1,U=E[u+1]-1),B=x[u],V=k<U?k+B:U+B);if(xn.a.ComputeNormals(p,_,m),r){var z=0,Y=0;for(u=0;u<t.length;u++)m[z=3*x[u]]=.5*(m[z]+m[Y=u+1<t.length?3*(x[u+1]-1):m.length-3]),m[z+1]=.5*(m[z+1]+m[Y+1]),m[z+2]=.5*(m[z+2]+m[Y+2]),m[Y]=m[z],m[Y+1]=m[z+1],m[Y+2]=m[z+2]}xn.a._ComputeSides(h,p,_,m,g,e.frontUVs,e.backUVs);var H=null;if(f){H=new Float32Array(4*f.length);for(var W=0;W<f.length;W++)H[4*W]=f[W].r,H[4*W+1]=f[W].g,H[4*W+2]=f[W].b,H[4*W+3]=f[W].a}var X=new xn.a,K=new Float32Array(p),Q=new Float32Array(m),q=new Float32Array(g);return X.indices=_,X.positions=K,X.normals=Q,X.uvs=q,H&&X.set(H,Mn.b.ColorKind),r&&(X._idx=x),X},fe.a.CreateRibbon=function(e,t,n,r,i,o,a,s,u){return void 0===n&&(n=!1),void 0===a&&(a=!1),to.CreateRibbon(e,{pathArray:t,closeArray:n,closePath:r,offset:i,updatable:a,sideOrientation:s,instance:u},o)};var to=function(){function e(){}return e.CreateRibbon=function(e,t,n){void 0===n&&(n=null);var r=t.pathArray,i=t.closeArray,a=t.closePath,s=fe.a._GetDefaultSideOrientation(t.sideOrientation),u=t.instance,l=t.updatable;if(u){var c=o.t.Vector3[0].setAll(Number.MAX_VALUE),h=o.t.Vector3[1].setAll(-Number.MAX_VALUE),d=u.getVerticesData(Mn.b.PositionKind);if(function(e){for(var t=r[0].length,n=u,i=0,o=n._originalBuilderSideOrientation===fe.a.DOUBLESIDE?2:1,a=1;a<=o;++a)for(var s=0;s<r.length;++s){var l=r[s],d=l.length;t=t<d?t:d;for(var f=0;f<t;++f){var p=l[f];e[i]=p.x,e[i+1]=p.y,e[i+2]=p.z,c.minimizeInPlaceFromFloats(p.x,p.y,p.z),h.maximizeInPlaceFromFloats(p.x,p.y,p.z),i+=3}n._creationDataStorage&&n._creationDataStorage.closePath&&(e[i]=(p=l[0]).x,e[i+1]=p.y,e[i+2]=p.z,i+=3)}}(d),u._boundingInfo?u._boundingInfo.reConstruct(c,h,u._worldMatrix):u._boundingInfo=new Jn.a(c,h,u._worldMatrix),u.updateVerticesData(Mn.b.PositionKind,d,!1,!1),t.colors){for(var f=u.getVerticesData(Mn.b.ColorKind),p=0,_=0;p<t.colors.length;p++,_+=4){var m=t.colors[p];f[_]=m.r,f[_+1]=m.g,f[_+2]=m.b,f[_+3]=m.a}u.updateVerticesData(Mn.b.ColorKind,f,!1,!1)}if(t.uvs){for(var g=u.getVerticesData(Mn.b.UVKind),v=0;v<t.uvs.length;v++)g[2*v]=t.uvs[v].x,g[2*v+1]=t.uvs[v].y;u.updateVerticesData(Mn.b.UVKind,g,!1,!1)}if(!u.areNormalsFrozen||u.isFacetDataEnabled){var y=u.getIndices(),b=u.getVerticesData(Mn.b.NormalKind),T=u.isFacetDataEnabled?u.getFacetDataParameters():null;if(xn.a.ComputeNormals(d,y,b,T),u._creationDataStorage&&u._creationDataStorage.closePath)for(var E=0,x=0,M=0;M<r.length;M++)b[E=3*u._creationDataStorage.idx[M]]=.5*(b[E]+b[x=M+1<r.length?3*(u._creationDataStorage.idx[M+1]-1):b.length-3]),b[E+1]=.5*(b[E+1]+b[x+1]),b[E+2]=.5*(b[E+2]+b[x+2]),b[x]=b[E],b[x+1]=b[E+1],b[x+2]=b[E+2];u.areNormalsFrozen||u.updateVerticesData(Mn.b.NormalKind,b,!1,!1)}return u}var A=new fe.a(e,n);A._originalBuilderSideOrientation=s,A._creationDataStorage=new fe.b;var S=xn.a.CreateRibbon(t);return a&&(A._creationDataStorage.idx=S._idx),A._creationDataStorage.closePath=a,A._creationDataStorage.closeArray=i,S.applyToMesh(A,l),A},e}();fe.a.ExtrudeShape=function(e,t,n,r,i,o,a,s,u,l){return void 0===a&&(a=null),no.ExtrudeShape(e,{shape:t,path:n,scale:r,rotation:i,cap:0===o?0:o||fe.a.NO_CAP,sideOrientation:u,instance:l,updatable:s},a)},fe.a.ExtrudeShapeCustom=function(e,t,n,r,i,o,a,s,u,l,c,h){return no.ExtrudeShapeCustom(e,{shape:t,path:n,scaleFunction:r,rotationFunction:i,ribbonCloseArray:o,ribbonClosePath:a,cap:0===s?0:s||fe.a.NO_CAP,sideOrientation:c,instance:h,updatable:l},u)};var no=function(){function e(){}return e.ExtrudeShape=function(t,n,r){void 0===r&&(r=null);var i=n.path,o=n.shape,a=n.scale||1,s=n.rotation||0,u=0===n.cap?0:n.cap||fe.a.NO_CAP,l=n.updatable,c=fe.a._GetDefaultSideOrientation(n.sideOrientation);return e._ExtrudeShapeGeneric(t,o,i,a,s,null,null,!1,!1,u,!1,r,!!l,c,n.instance||null,n.invertUV||!1,n.frontUVs||null,n.backUVs||null)},e.ExtrudeShapeCustom=function(t,n,r){void 0===r&&(r=null);var i=n.path,o=n.shape,a=n.scaleFunction||function(){return 1},s=n.rotationFunction||function(){return 0},u=n.ribbonCloseArray||!1,l=n.ribbonClosePath||!1,c=0===n.cap?0:n.cap||fe.a.NO_CAP,h=n.updatable,d=fe.a._GetDefaultSideOrientation(n.sideOrientation);return e._ExtrudeShapeGeneric(t,o,i,null,null,a,s,u,l,c,!0,r,!!h,d,n.instance||null,n.invertUV||!1,n.frontUVs||null,n.backUVs||null)},e._ExtrudeShapeGeneric=function(e,t,n,r,i,a,s,u,l,c,h,d,f,p,_,m,g,v){var y,b,T=function(e,t,n,r,i,a,s,u,l,c){for(var h=n.getTangents(),d=n.getNormals(),f=n.getBinormals(),p=n.getDistances(),_=0,m=c&&u?u:function(){return null!==a?a:0},g=c&&s?s:function(){return null!==i?i:1},v=l===fe.a.NO_CAP||l===fe.a.CAP_END?0:2,y=o.t.Matrix[0],b=0;b<t.length;b++){for(var T=new Array,E=m(b,p[b]),x=g(b,p[b]),M=0;M<e.length;M++){o.j.RotationAxisToRef(h[b],_,y);var A=h[b].scale(e[M].z).add(d[b].scale(e[M].x)).add(f[b].scale(e[M].y)),S=T[M]?T[M]:o.x.Zero();o.x.TransformCoordinatesToRef(A,y,S),S.scaleInPlace(x).addInPlace(t[b]),T[M]=S}r[v]=T,_+=E,v++}var C=function(e){var t,n=Array(),r=o.x.Zero();for(t=0;t<e.length;t++)r.addInPlace(e[t]);for(r.scaleInPlace(1/e.length),t=0;t<e.length;t++)n.push(r);return n};switch(l){case fe.a.NO_CAP:break;case fe.a.CAP_START:r[0]=C(r[2]),r[1]=r[2];break;case fe.a.CAP_END:r[v]=r[v-1],r[v+1]=C(r[v-1]);break;case fe.a.CAP_ALL:r[0]=C(r[2]),r[1]=r[2],r[v]=r[v-1],r[v+1]=C(r[v-1])}return r};if(_){var E=_._creationDataStorage;return y=E.path3D.update(n),b=T(t,n,E.path3D,E.pathArray,r,i,a,s,E.cap,h),fe.a.CreateRibbon("",b,!1,!1,0,d||void 0,!1,0,_)}b=T(t,n,y=new o.m(n),new Array,r,i,a,s,c=c<0||c>3?0:c,h);var x=to.CreateRibbon(e,{pathArray:b,closeArray:u,closePath:l,updatable:f,sideOrientation:p,invertUV:m,frontUVs:g||void 0,backUVs:v||void 0},d);return x._creationDataStorage.pathArray=b,x._creationDataStorage.path3D=y,x._creationDataStorage.cap=c,x},e}(),ro=function(){function e(e,t){var n=this;void 0===e&&(e=!0),void 0===t&&(t=Ammo),this._useDeltaForWorldStep=e,this.bjsAMMO={},this.name="AmmoJSPlugin",this._timeStep=1/60,this._fixedTimeStep=1/60,this._maxSteps=5,this._tmpQuaternion=new o.q,this._tmpContactCallbackResult=!1,this._tmpVector=new o.x,this._tmpMatrix=new o.j,"function"==typeof t?t(this.bjsAMMO):this.bjsAMMO=t,this.isSupported()?(this._collisionConfiguration=new this.bjsAMMO.btSoftBodyRigidBodyCollisionConfiguration,this._dispatcher=new this.bjsAMMO.btCollisionDispatcher(this._collisionConfiguration),this._overlappingPairCache=new this.bjsAMMO.btDbvtBroadphase,this._solver=new this.bjsAMMO.btSequentialImpulseConstraintSolver,this._softBodySolver=new this.bjsAMMO.btDefaultSoftBodySolver,this.world=new this.bjsAMMO.btSoftRigidDynamicsWorld(this._dispatcher,this._overlappingPairCache,this._solver,this._collisionConfiguration,this._softBodySolver),this._tmpAmmoConcreteContactResultCallback=new this.bjsAMMO.ConcreteContactResultCallback,this._tmpAmmoConcreteContactResultCallback.addSingleResult=function(){n._tmpContactCallbackResult=!0},this._raycastResult=new Ji,this._tmpAmmoTransform=new this.bjsAMMO.btTransform,this._tmpAmmoTransform.setIdentity(),this._tmpAmmoQuaternion=new this.bjsAMMO.btQuaternion(0,0,0,1),this._tmpAmmoVectorA=new this.bjsAMMO.btVector3(0,0,0),this._tmpAmmoVectorB=new this.bjsAMMO.btVector3(0,0,0),this._tmpAmmoVectorC=new this.bjsAMMO.btVector3(0,0,0),this._tmpAmmoVectorD=new this.bjsAMMO.btVector3(0,0,0)):p.a.Error("AmmoJS is not available. Please make sure you included the js file.")}return e.prototype.setGravity=function(e){this._tmpAmmoVectorA.setValue(e.x,e.y,e.z),this.world.setGravity(this._tmpAmmoVectorA),this.world.getWorldInfo().set_m_gravity(this._tmpAmmoVectorA)},e.prototype.setTimeStep=function(e){this._timeStep=e},e.prototype.setFixedTimeStep=function(e){this._fixedTimeStep=e},e.prototype.setMaxSteps=function(e){this._maxSteps=e},e.prototype.getTimeStep=function(){return this._timeStep},e.prototype._isImpostorInContact=function(e){return this._tmpContactCallbackResult=!1,this.world.contactTest(e.physicsBody,this._tmpAmmoConcreteContactResultCallback),this._tmpContactCallbackResult},e.prototype._isImpostorPairInContact=function(e,t){return this._tmpContactCallbackResult=!1,this.world.contactPairTest(e.physicsBody,t.physicsBody,this._tmpAmmoConcreteContactResultCallback),this._tmpContactCallbackResult},e.prototype._stepSimulation=function(e,t,n){if(void 0===e&&(e=1/60),void 0===t&&(t=10),void 0===n&&(n=1/60),0==t)this.world.stepSimulation(e,0);else for(;t>0&&e>0;)e-n<n?(this.world.stepSimulation(e,0),e=0):(e-=n,this.world.stepSimulation(n,0)),t--},e.prototype.executeStep=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i.soft||i.beforeStep()}this._stepSimulation(this._useDeltaForWorldStep?e:this._timeStep,this._maxSteps,this._fixedTimeStep);for(var o=0,a=t;o<a.length;o++){var s=a[o];if(s.soft?this._afterSoftStep(s):s.afterStep(),s._onPhysicsCollideCallbacks.length>0&&this._isImpostorInContact(s))for(var u=0,l=s._onPhysicsCollideCallbacks;u<l.length;u++)for(var c=0,h=l[u].otherImpostors;c<h.length;c++){var d=h[c];(s.physicsBody.isActive()||d.physicsBody.isActive())&&this._isImpostorPairInContact(s,d)&&(s.onCollide({body:d.physicsBody}),d.onCollide({body:s.physicsBody}))}}},e.prototype._afterSoftStep=function(e){e.type===Qi.a.RopeImpostor?this._ropeStep(e):this._softbodyOrClothStep(e)},e.prototype._ropeStep=function(e){for(var t,n,r,i,a=e.physicsBody.get_m_nodes(),s=a.size(),u=new Array,l=0;l<s;l++)n=(t=a.at(l).get_m_x()).x(),r=t.y(),i=t.z(),u.push(new o.x(n,r,i));var c=e.object,h=e.getParam("shape");e.object=e._isFromLine?Cr.a.CreateLines("lines",{points:u,instance:c}):no.ExtrudeShape("ext",{shape:h,path:u,instance:c})},e.prototype._softbodyOrClothStep=function(e){var t=e.type===Qi.a.ClothImpostor?1:-1,n=e.object,r=n.getVerticesData(Mn.b.PositionKind);r||(r=[]);var i=n.getVerticesData(Mn.b.NormalKind);i||(i=[]);for(var o,a,s,u,l,c,h,d,f=r.length/3,p=e.physicsBody.get_m_nodes(),_=0;_<f;_++){var m;s=(a=(o=p.at(_)).get_m_x()).x(),u=a.y(),l=a.z()*t,c=(m=o.get_m_n()).x(),h=m.y(),d=m.z()*t,r[3*_]=s,r[3*_+1]=u,r[3*_+2]=l,i[3*_]=c,i[3*_+1]=h,i[3*_+2]=d}var g=new xn.a;g.positions=r,g.normals=i,g.uvs=n.getVerticesData(Mn.b.UVKind),g.colors=n.getVerticesData(Mn.b.ColorKind),n&&n.getIndices&&(g.indices=n.getIndices()),g.applyToMesh(n)},e.prototype.applyImpulse=function(e,t,n){if(e.soft)p.a.Warn("Cannot be applied to a soft body");else{e.physicsBody.activate();var r=this._tmpAmmoVectorA,i=this._tmpAmmoVectorB;e.object&&e.object.getWorldMatrix&&(e.object.getWorldMatrix().invertToRef(this._tmpMatrix),o.x.TransformCoordinatesToRef(n,this._tmpMatrix,this._tmpVector),n=this._tmpVector),r.setValue(n.x,n.y,n.z),i.setValue(t.x,t.y,t.z),e.physicsBody.applyImpulse(i,r)}},e.prototype.applyForce=function(e,t,n){if(e.soft)p.a.Warn("Cannot be applied to a soft body");else{e.physicsBody.activate();var r=this._tmpAmmoVectorA,i=this._tmpAmmoVectorB;e.object&&e.object.getWorldMatrix&&(e.object.getWorldMatrix().invertToRef(this._tmpMatrix),o.x.TransformCoordinatesToRef(n,this._tmpMatrix,this._tmpVector),n=this._tmpVector),r.setValue(n.x,n.y,n.z),i.setValue(t.x,t.y,t.z),e.physicsBody.applyForce(i,r)}},e.prototype.generatePhysicsBody=function(t){if(t._pluginData.toDispose=[],t.parent)t.physicsBody&&(this.removePhysicsBody(t),t.forceUpdate());else if(t.isBodyInitRequired()){var n=this._createShape(t),r=t.getParam("mass");if(t._pluginData.mass=r,t.soft)n.get_m_cfg().set_collisions(17),n.get_m_cfg().set_kDP(t.getParam("damping")),Ammo.castObject(n,Ammo.btCollisionObject).getCollisionShape().setMargin(t.getParam("margin")),n.setActivationState(e.DISABLE_DEACTIVATION_FLAG),this.world.addSoftBody(n,1,-1),t.physicsBody=n,t._pluginData.toDispose.push(n),this.setBodyPressure(t,0),t.type===Qi.a.SoftbodyImpostor&&this.setBodyPressure(t,t.getParam("pressure")),this.setBodyStiffness(t,t.getParam("stiffness")),this.setBodyVelocityIterations(t,t.getParam("velocityIterations")),this.setBodyPositionIterations(t,t.getParam("positionIterations"));else{var i=new Ammo.btVector3(0,0,0),o=new Ammo.btTransform;o.setIdentity(),0!==r&&n.calculateLocalInertia(r,i),this._tmpAmmoVectorA.setValue(t.object.position.x,t.object.position.y,t.object.position.z),this._tmpAmmoQuaternion.setValue(t.object.rotationQuaternion.x,t.object.rotationQuaternion.y,t.object.rotationQuaternion.z,t.object.rotationQuaternion.w),o.setOrigin(this._tmpAmmoVectorA),o.setRotation(this._tmpAmmoQuaternion);var a=new Ammo.btDefaultMotionState(o),s=new Ammo.btRigidBodyConstructionInfo(r,a,n,i),u=new Ammo.btRigidBody(s);0===r&&(u.setCollisionFlags(u.getCollisionFlags()|e.KINEMATIC_FLAG),u.setActivationState(e.DISABLE_DEACTIVATION_FLAG)),t.type!=Qi.a.NoImpostor||n.getChildShape||u.setCollisionFlags(u.getCollisionFlags()|e.DISABLE_COLLISION_FLAG),this.world.addRigidBody(u),t.physicsBody=u,t._pluginData.toDispose=t._pluginData.toDispose.concat([u,s,a,o,i,n])}this.setBodyRestitution(t,t.getParam("restitution")),this.setBodyFriction(t,t.getParam("friction"))}},e.prototype.removePhysicsBody=function(e){var t=this;this.world&&(this.world.removeRigidBody(e.physicsBody),e._pluginData&&e._pluginData.toDispose.forEach(function(e){t.bjsAMMO.destroy(e)}))},e.prototype.generateJoint=function(e){var t=e.mainImpostor.physicsBody,n=e.connectedImpostor.physicsBody;if(t&&n){var r,i=e.joint.jointData;switch(i.mainPivot||(i.mainPivot=new o.x(0,0,0)),i.connectedPivot||(i.connectedPivot=new o.x(0,0,0)),e.joint.type){case qi.e.DistanceJoint:var a=i.maxDistance;a&&(i.mainPivot=new o.x(0,-a/2,0),i.connectedPivot=new o.x(0,a/2,0)),r=new Ammo.btPoint2PointConstraint(t,n,new Ammo.btVector3(i.mainPivot.x,i.mainPivot.y,i.mainPivot.z),new Ammo.btVector3(i.connectedPivot.x,i.connectedPivot.y,i.connectedPivot.z));break;case qi.e.HingeJoint:i.mainAxis||(i.mainAxis=new o.x(0,0,0)),i.connectedAxis||(i.connectedAxis=new o.x(0,0,0));var s=new Ammo.btVector3(i.mainAxis.x,i.mainAxis.y,i.mainAxis.z),u=new Ammo.btVector3(i.connectedAxis.x,i.connectedAxis.y,i.connectedAxis.z);r=new Ammo.btHingeConstraint(t,n,new Ammo.btVector3(i.mainPivot.x,i.mainPivot.y,i.mainPivot.z),new Ammo.btVector3(i.connectedPivot.x,i.connectedPivot.y,i.connectedPivot.z),s,u);break;case qi.e.BallAndSocketJoint:r=new Ammo.btPoint2PointConstraint(t,n,new Ammo.btVector3(i.mainPivot.x,i.mainPivot.y,i.mainPivot.z),new Ammo.btVector3(i.connectedPivot.x,i.connectedPivot.y,i.connectedPivot.z));break;default:p.a.Warn("JointType not currently supported by the Ammo plugin, falling back to PhysicsJoint.BallAndSocketJoint"),r=new Ammo.btPoint2PointConstraint(t,n,new Ammo.btVector3(i.mainPivot.x,i.mainPivot.y,i.mainPivot.z),new Ammo.btVector3(i.connectedPivot.x,i.connectedPivot.y,i.connectedPivot.z))}this.world.addConstraint(r,!e.joint.jointData.collision),e.joint.physicsJoint=r}},e.prototype.removeJoint=function(e){this.world&&this.world.removeConstraint(e.joint.physicsJoint)},e.prototype._addMeshVerts=function(e,t,n){var r=this,i=0;if(n&&n.getIndices&&n.getWorldMatrix&&n.getChildMeshes){var a=n.getIndices();a||(a=[]);var s=n.getVerticesData(Mn.b.PositionKind);s||(s=[]),n.computeWorldMatrix(!1);for(var u=a.length/3,l=0;l<u;l++){for(var c=[],h=0;h<3;h++){var d,f=new o.x(s[3*a[3*l+h]+0],s[3*a[3*l+h]+1],s[3*a[3*l+h]+2]);o.j.ScalingToRef(n.scaling.x,n.scaling.y,n.scaling.z,this._tmpMatrix),f=o.x.TransformCoordinates(f,this._tmpMatrix),(d=0==h?this._tmpAmmoVectorA:1==h?this._tmpAmmoVectorB:this._tmpAmmoVectorC).setValue(f.x,f.y,f.z),c.push(d)}e.addTriangle(c[0],c[1],c[2]),i++}n.getChildMeshes().forEach(function(n){i+=r._addMeshVerts(e,t,n)})}return i},e.prototype._softVertexData=function(e){var t=e.object;if(t&&t.getIndices&&t.getWorldMatrix&&t.getChildMeshes){var n=t.getIndices();n||(n=[]);var r=t.getVerticesData(Mn.b.PositionKind);r||(r=[]);var i=t.getVerticesData(Mn.b.NormalKind);i||(i=[]),t.computeWorldMatrix(!1);for(var a=[],s=[],u=0;u<r.length;u+=3){var l=new o.x(r[u],r[u+1],r[u+2]),c=new o.x(i[u],i[u+1],i[u+2]);l=o.x.TransformCoordinates(l,t.getWorldMatrix()),c=o.x.TransformNormal(c,t.getWorldMatrix()),a.push(l.x,l.y,l.z),s.push(c.x,c.y,c.z)}var h=new xn.a;return h.positions=a,h.normals=s,h.uvs=t.getVerticesData(Mn.b.UVKind),h.colors=t.getVerticesData(Mn.b.ColorKind),t&&t.getIndices&&(h.indices=t.getIndices()),h.applyToMesh(t),t.position=o.x.Zero(),t.rotationQuaternion=null,t.rotation=o.x.Zero(),t.computeWorldMatrix(!0),h}return xn.a.ExtractFromMesh(t)},e.prototype._createSoftbody=function(e){var t=e.object;if(t&&t.getIndices){var n=t.getIndices();n||(n=[]);var r=this._softVertexData(e),i=r.positions,a=r.normals;if(null===i||null===a)return new Ammo.btCompoundShape;for(var s=[],u=[],l=0;l<i.length;l+=3){var c=new o.x(i[l],i[l+1],i[l+2]),h=new o.x(a[l],a[l+1],a[l+2]);s.push(c.x,c.y,-c.z),u.push(h.x,h.y,-h.z)}var d=(new Ammo.btSoftBodyHelpers).CreateFromTriMesh(this.world.getWorldInfo(),s,t.getIndices(),n.length/3,!0),f=i.length/3,p=d.get_m_nodes();for(l=0;l<f;l++){var _;(_=p.at(l).get_m_n()).setX(u[3*l]),_.setY(u[3*l+1]),_.setZ(u[3*l+2])}return d}},e.prototype._createCloth=function(e){var t=e.object;if(t&&t.getIndices){var n=t.getIndices();n||(n=[]);var r=this._softVertexData(e),i=r.positions;if(null===i||null===r.normals)return new Ammo.btCompoundShape;var o=i.length,a=Math.sqrt(o/3);e.segments=a;var s=a-1;return this._tmpAmmoVectorA.setValue(i[0],i[1],i[2]),this._tmpAmmoVectorB.setValue(i[3*s],i[3*s+1],i[3*s+2]),this._tmpAmmoVectorD.setValue(i[o-3],i[o-2],i[o-1]),this._tmpAmmoVectorC.setValue(i[o-3-3*s],i[o-2-3*s],i[o-1-3*s]),(new Ammo.btSoftBodyHelpers).CreatePatch(this.world.getWorldInfo(),this._tmpAmmoVectorA,this._tmpAmmoVectorB,this._tmpAmmoVectorC,this._tmpAmmoVectorD,a,a,e.getParam("fixedPoints"),!0)}},e.prototype._createRope=function(e){var t,n,r=this._softVertexData(e),i=r.positions,o=r.normals;if(null===i||null===o)return new Ammo.btCompoundShape;if(r.applyToMesh(e.object,!0),e._isFromLine=!0,0===o.map(function(e){return e*e}).reduce(function(e,t){return e+t}))n=(t=i.length)/3-1,this._tmpAmmoVectorA.setValue(i[0],i[1],i[2]),this._tmpAmmoVectorB.setValue(i[t-3],i[t-2],i[t-1]);else{e._isFromLine=!1;var a=e.getParam("path");if(null===e.getParam("shape"))return p.a.Warn("No shape available for extruded mesh"),new Ammo.btCompoundShape;if(i.length%(3*a.length)!=0)return p.a.Warn("Path does not match extrusion"),new Ammo.btCompoundShape;n=(t=a.length)-1,this._tmpAmmoVectorA.setValue(a[0].x,a[0].y,a[0].z),this._tmpAmmoVectorB.setValue(a[t-1].x,a[t-1].y,a[t-1].z)}e.segments=n;var s=e.getParam("fixedPoints");s=s>3?3:s;var u=(new Ammo.btSoftBodyHelpers).CreateRope(this.world.getWorldInfo(),this._tmpAmmoVectorA,this._tmpAmmoVectorB,n-1,s);return u.get_m_cfg().set_collisions(17),u},e.prototype._addHullVerts=function(e,t,n){var r=this,i=0;if(n&&n.getIndices&&n.getWorldMatrix&&n.getChildMeshes){var a=n.getIndices();a||(a=[]);var s=n.getVerticesData(Mn.b.PositionKind);s||(s=[]),n.computeWorldMatrix(!1);for(var u=a.length/3,l=0;l<u;l++){for(var c=[],h=0;h<3;h++){var d,f=new o.x(s[3*a[3*l+h]+0],s[3*a[3*l+h]+1],s[3*a[3*l+h]+2]);o.j.ScalingToRef(n.scaling.x,n.scaling.y,n.scaling.z,this._tmpMatrix),f=o.x.TransformCoordinates(f,this._tmpMatrix),(d=0==h?this._tmpAmmoVectorA:1==h?this._tmpAmmoVectorB:this._tmpAmmoVectorC).setValue(f.x,f.y,f.z),c.push(d)}e.addPoint(c[0],!0),e.addPoint(c[1],!0),e.addPoint(c[2],!0),i++}n.getChildMeshes().forEach(function(n){i+=r._addHullVerts(e,t,n)})}return i},e.prototype._createShape=function(e,t){var n=this;void 0===t&&(t=!1);var r,i=e.object,a=e.getObjectExtendSize();if(!t){var s=e.object.getChildMeshes?e.object.getChildMeshes(!0):[];r=new Ammo.btCompoundShape;var u=0;if(s.forEach(function(e){var t=e.getPhysicsImpostor();if(t){if(t.type==Qi.a.MeshImpostor)throw"A child MeshImpostor is not supported. Only primitive impostors are supported as children (eg. box or sphere)";var i=n._createShape(t),a=e.parent.getWorldMatrix().clone(),s=new o.x;a.decompose(s),n._tmpAmmoTransform.getOrigin().setValue(e.position.x*s.x,e.position.y*s.y,e.position.z*s.z),n._tmpAmmoQuaternion.setValue(e.rotationQuaternion.x,e.rotationQuaternion.y,e.rotationQuaternion.z,e.rotationQuaternion.w),n._tmpAmmoTransform.setRotation(n._tmpAmmoQuaternion),r.addChildShape(n._tmpAmmoTransform,i),t.dispose(),u++}}),u>0){if(e.type!=Qi.a.NoImpostor){var l=this._createShape(e,!0);l&&(this._tmpAmmoTransform.getOrigin().setValue(0,0,0),this._tmpAmmoQuaternion.setValue(0,0,0,1),this._tmpAmmoTransform.setRotation(this._tmpAmmoQuaternion),r.addChildShape(this._tmpAmmoTransform,l))}return r}Ammo.destroy(r),r=null}switch(e.type){case Qi.a.SphereImpostor:r=new Ammo.btSphereShape(a.x/2);break;case Qi.a.CylinderImpostor:this._tmpAmmoVectorA.setValue(a.x/2,a.y/2,a.z/2),r=new Ammo.btCylinderShape(this._tmpAmmoVectorA);break;case Qi.a.PlaneImpostor:case Qi.a.BoxImpostor:this._tmpAmmoVectorA.setValue(a.x/2,a.y/2,a.z/2),r=new Ammo.btBoxShape(this._tmpAmmoVectorA);break;case Qi.a.MeshImpostor:if(0==e.getParam("mass")){var c=new Ammo.btTriangleMesh;e._pluginData.toDispose.push(c);var h=this._addMeshVerts(c,i,i);r=0==h?new Ammo.btCompoundShape:new Ammo.btBvhTriangleMeshShape(c);break}case Qi.a.ConvexHullImpostor:var d=new Ammo.btConvexHullShape;0==(h=this._addHullVerts(d,i,i))?(e._pluginData.toDispose.push(d),r=new Ammo.btCompoundShape):r=d;break;case Qi.a.NoImpostor:r=new Ammo.btSphereShape(a.x/2);break;case Qi.a.SoftbodyImpostor:r=this._createSoftbody(e);break;case Qi.a.ClothImpostor:r=this._createCloth(e);break;case Qi.a.RopeImpostor:r=this._createRope(e);break;default:p.a.Warn("The impostor type is not currently supported by the ammo plugin.")}return r},e.prototype.setTransformationFromPhysicsBody=function(e){e.physicsBody.getMotionState().getWorldTransform(this._tmpAmmoTransform),e.object.position.set(this._tmpAmmoTransform.getOrigin().x(),this._tmpAmmoTransform.getOrigin().y(),this._tmpAmmoTransform.getOrigin().z()),e.object.rotationQuaternion?e.object.rotationQuaternion.set(this._tmpAmmoTransform.getRotation().x(),this._tmpAmmoTransform.getRotation().y(),this._tmpAmmoTransform.getRotation().z(),this._tmpAmmoTransform.getRotation().w()):e.object.rotation&&(this._tmpQuaternion.set(this._tmpAmmoTransform.getRotation().x(),this._tmpAmmoTransform.getRotation().y(),this._tmpAmmoTransform.getRotation().z(),this._tmpAmmoTransform.getRotation().w()),this._tmpQuaternion.toEulerAnglesToRef(e.object.rotation))},e.prototype.setPhysicsBodyTransformation=function(e,t,n){var r=e.physicsBody.getWorldTransform();if(r.getOrigin().x()!=t.x||r.getOrigin().y()!=t.y||r.getOrigin().z()!=t.z||r.getRotation().x()!=n.x||r.getRotation().y()!=n.y||r.getRotation().z()!=n.z||r.getRotation().w()!=n.w)if(this._tmpAmmoVectorA.setValue(t.x,t.y,t.z),r.setOrigin(this._tmpAmmoVectorA),this._tmpAmmoQuaternion.setValue(n.x,n.y,n.z,n.w),r.setRotation(this._tmpAmmoQuaternion),e.physicsBody.setWorldTransform(r),0==e.mass){var i=e.physicsBody.getMotionState();i&&i.setWorldTransform(r)}else e.physicsBody.activate()},e.prototype.isSupported=function(){return void 0!==this.bjsAMMO},e.prototype.setLinearVelocity=function(e,t){this._tmpAmmoVectorA.setValue(t.x,t.y,t.z),e.soft?e.physicsBody.linearVelocity(this._tmpAmmoVectorA):e.physicsBody.setLinearVelocity(this._tmpAmmoVectorA)},e.prototype.setAngularVelocity=function(e,t){this._tmpAmmoVectorA.setValue(t.x,t.y,t.z),e.soft?e.physicsBody.angularVelocity(this._tmpAmmoVectorA):e.physicsBody.setAngularVelocity(this._tmpAmmoVectorA)},e.prototype.getLinearVelocity=function(e){if(e.soft)var t=e.physicsBody.linearVelocity();else t=e.physicsBody.getLinearVelocity();if(!t)return null;var n=new o.x(t.x(),t.y(),t.z());return Ammo.destroy(t),n},e.prototype.getAngularVelocity=function(e){if(e.soft)var t=e.physicsBody.angularVelocity();else t=e.physicsBody.getAngularVelocity();if(!t)return null;var n=new o.x(t.x(),t.y(),t.z());return Ammo.destroy(t),n},e.prototype.setBodyMass=function(e,t){e.soft?e.physicsBody.setTotalMass(t,!1):e.physicsBody.setMassProps(t),e._pluginData.mass=t},e.prototype.getBodyMass=function(e){return e._pluginData.mass||0},e.prototype.getBodyFriction=function(e){return e._pluginData.friction||0},e.prototype.setBodyFriction=function(e,t){e.soft?e.physicsBody.get_m_cfg().set_kDF(t):e.physicsBody.setFriction(t),e._pluginData.friction=t},e.prototype.getBodyRestitution=function(e){return e._pluginData.restitution||0},e.prototype.setBodyRestitution=function(e,t){e.physicsBody.setRestitution(t),e._pluginData.restitution=t},e.prototype.getBodyPressure=function(e){return e.soft?e._pluginData.pressure||0:(p.a.Warn("Pressure is not a property of a rigid body"),0)},e.prototype.setBodyPressure=function(e,t){e.soft?e.type===Qi.a.SoftbodyImpostor?(e.physicsBody.get_m_cfg().set_kPR(t),e._pluginData.pressure=t):(e.physicsBody.get_m_cfg().set_kPR(0),e._pluginData.pressure=0):p.a.Warn("Pressure can only be applied to a softbody")},e.prototype.getBodyStiffness=function(e){return e.soft?e._pluginData.stiffness||0:(p.a.Warn("Stiffness is not a property of a rigid body"),0)},e.prototype.setBodyStiffness=function(e,t){e.soft?(t=(t=t<0?0:t)>1?1:t,e.physicsBody.get_m_materials().at(0).set_m_kLST(t),e._pluginData.stiffness=t):p.a.Warn("Stiffness cannot be applied to a rigid body")},e.prototype.getBodyVelocityIterations=function(e){return e.soft?e._pluginData.velocityIterations||0:(p.a.Warn("Velocity iterations is not a property of a rigid body"),0)},e.prototype.setBodyVelocityIterations=function(e,t){e.soft?(t=t<0?0:t,e.physicsBody.get_m_cfg().set_viterations(t),e._pluginData.velocityIterations=t):p.a.Warn("Velocity iterations cannot be applied to a rigid body")},e.prototype.getBodyPositionIterations=function(e){return e.soft?e._pluginData.positionIterations||0:(p.a.Warn("Position iterations is not a property of a rigid body"),0)},e.prototype.setBodyPositionIterations=function(e,t){e.soft?(t=t<0?0:t,e.physicsBody.get_m_cfg().set_piterations(t),e._pluginData.positionIterations=t):p.a.Warn("Position iterations cannot be applied to a rigid body")},e.prototype.appendAnchor=function(e,t,n,r,i,o){void 0===i&&(i=1),void 0===o&&(o=!1);var a=e.segments,s=Math.round((a-1)*n)+a*(a-1-Math.round((a-1)*r));e.physicsBody.appendAnchor(s,t.physicsBody,o,i)},e.prototype.appendHook=function(e,t,n,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);var o=Math.round(e.segments*n);e.physicsBody.appendAnchor(o,t.physicsBody,i,r)},e.prototype.sleepBody=function(e){p.a.Warn("sleepBody is not currently supported by the Ammo physics plugin")},e.prototype.wakeUpBody=function(e){e.physicsBody.activate()},e.prototype.updateDistanceJoint=function(e,t,n){p.a.Warn("updateDistanceJoint is not currently supported by the Ammo physics plugin")},e.prototype.setMotor=function(e,t,n,r){e.physicsJoint.enableAngularMotor(!0,t,n)},e.prototype.setLimit=function(e,t,n){p.a.Warn("setLimit is not currently supported by the Ammo physics plugin")},e.prototype.syncMeshWithImpostor=function(e,t){t.physicsBody.getMotionState().getWorldTransform(this._tmpAmmoTransform),e.position.x=this._tmpAmmoTransform.getOrigin().x(),e.position.y=this._tmpAmmoTransform.getOrigin().y(),e.position.z=this._tmpAmmoTransform.getOrigin().z(),e.rotationQuaternion&&(e.rotationQuaternion.x=this._tmpAmmoTransform.getRotation().x(),e.rotationQuaternion.y=this._tmpAmmoTransform.getRotation().y(),e.rotationQuaternion.z=this._tmpAmmoTransform.getRotation().z(),e.rotationQuaternion.w=this._tmpAmmoTransform.getRotation().w())},e.prototype.getRadius=function(e){return e.getObjectExtendSize().x/2},e.prototype.getBoxSizeToRef=function(e,t){var n=e.getObjectExtendSize();t.x=n.x,t.y=n.y,t.z=n.z},e.prototype.dispose=function(){Ammo.destroy(this.world),Ammo.destroy(this._solver),Ammo.destroy(this._overlappingPairCache),Ammo.destroy(this._dispatcher),Ammo.destroy(this._collisionConfiguration),Ammo.destroy(this._tmpAmmoVectorA),Ammo.destroy(this._tmpAmmoVectorB),Ammo.destroy(this._tmpAmmoVectorC),Ammo.destroy(this._tmpAmmoTransform),Ammo.destroy(this._tmpAmmoQuaternion),Ammo.destroy(this._tmpAmmoConcreteContactResultCallback),this.world=null},e.prototype.raycast=function(e,t){this._tmpAmmoVectorRCA=new this.bjsAMMO.btVector3(e.x,e.y,e.z),this._tmpAmmoVectorRCB=new this.bjsAMMO.btVector3(t.x,t.y,t.z);var n=new this.bjsAMMO.ClosestRayResultCallback(this._tmpAmmoVectorRCA,this._tmpAmmoVectorRCB);return this.world.rayTest(this._tmpAmmoVectorRCA,this._tmpAmmoVectorRCB,n),this._raycastResult.reset(e,t),n.hasHit()&&(this._raycastResult.setHitData({x:n.get_m_hitNormalWorld().x(),y:n.get_m_hitNormalWorld().y(),z:n.get_m_hitNormalWorld().z()},{x:n.get_m_hitPointWorld().x(),y:n.get_m_hitPointWorld().y(),z:n.get_m_hitPointWorld().z()}),this._raycastResult.calculateHitDistance()),Ammo.destroy(n),Ammo.destroy(this._tmpAmmoVectorRCA),Ammo.destroy(this._tmpAmmoVectorRCB),this._raycastResult},e.DISABLE_COLLISION_FLAG=4,e.KINEMATIC_FLAG=2,e.DISABLE_DEACTIVATION_FLAG=4,e}();r.a.prototype.removeReflectionProbe=function(e){if(!this.reflectionProbes)return-1;var t=this.reflectionProbes.indexOf(e);return-1!==t&&this.reflectionProbes.splice(t,1),t},r.a.prototype.addReflectionProbe=function(e){this.reflectionProbes||(this.reflectionProbes=[]),this.reflectionProbes.push(e)};var io=function(){function e(e,t,n,r,i){var a=this;void 0===r&&(r=!0),void 0===i&&(i=!1),this.name=e,this._viewMatrix=o.j.Identity(),this._target=o.x.Zero(),this._add=o.x.Zero(),this._invertYAxis=!1,this.position=o.x.Zero(),this._scene=n,this._scene.reflectionProbes||(this._scene.reflectionProbes=new Array),this._scene.reflectionProbes.push(this),this._renderTargetTexture=new ln(e,t,n,r,!0,i?_.a.TEXTURETYPE_FLOAT:_.a.TEXTURETYPE_UNSIGNED_INT,!0),this._renderTargetTexture.onBeforeRenderObservable.add(function(e){switch(e){case 0:a._add.copyFromFloats(1,0,0);break;case 1:a._add.copyFromFloats(-1,0,0);break;case 2:a._add.copyFromFloats(0,a._invertYAxis?1:-1,0);break;case 3:a._add.copyFromFloats(0,a._invertYAxis?-1:1,0);break;case 4:a._add.copyFromFloats(0,0,1);break;case 5:a._add.copyFromFloats(0,0,-1)}a._attachedMesh&&a.position.copyFrom(a._attachedMesh.getAbsolutePosition()),a.position.addToRef(a._add,a._target),o.j.LookAtLHToRef(a.position,a._target,o.x.Up(),a._viewMatrix),n.activeCamera&&(a._projectionMatrix=o.j.PerspectiveFovLH(Math.PI/2,1,n.activeCamera.minZ,n.activeCamera.maxZ),n.setTransformMatrix(a._viewMatrix,a._projectionMatrix)),n._forcedViewPosition=a.position}),this._renderTargetTexture.onAfterUnbindObservable.add(function(){n._forcedViewPosition=null,n.updateTransformMatrix(!0)})}return Object.defineProperty(e.prototype,"samples",{get:function(){return this._renderTargetTexture.samples},set:function(e){this._renderTargetTexture.samples=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"refreshRate",{get:function(){return this._renderTargetTexture.refreshRate},set:function(e){this._renderTargetTexture.refreshRate=e},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},Object.defineProperty(e.prototype,"cubeTexture",{get:function(){return this._renderTargetTexture},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderList",{get:function(){return this._renderTargetTexture.renderList},enumerable:!0,configurable:!0}),e.prototype.attachToMesh=function(e){this._attachedMesh=e},e.prototype.setRenderingAutoClearDepthStencil=function(e,t){this._renderTargetTexture.setRenderingAutoClearDepthStencil(e,t)},e.prototype.dispose=function(){var e=this._scene.reflectionProbes.indexOf(this);-1!==e&&this._scene.reflectionProbes.splice(e,1),this._renderTargetTexture&&(this._renderTargetTexture.dispose(),this._renderTargetTexture=null)},e.prototype.toString=function(e){var t="Name: "+this.name;return e&&(t+=", position: "+this.position.toString(),this._attachedMesh&&(t+=", attached mesh: "+this._attachedMesh.name)),t},e.prototype.getClassName=function(){return"ReflectionProbe"},e.prototype.serialize=function(){var e=L.a.Serialize(this,this._renderTargetTexture.serialize());return e.isReflectionProbe=!0,e},e.Parse=function(t,n,r){var i=null;if(n.reflectionProbes)for(var o=0;o<n.reflectionProbes.length;o++){var a=n.reflectionProbes[o];if(a.name===t.name){i=a;break}}return(i=L.a.Parse(function(){return i||new e(t.name,t.renderTargetSize,n,t._generateMipMaps)},t,n,r)).cubeTexture._waitingRenderList=t.renderList,t._attachedMesh&&i.attachToMesh(n.getMeshByID(t._attachedMesh)),i},l.c([Object(L.k)()],e.prototype,"_attachedMesh",void 0),l.c([Object(L.o)()],e.prototype,"position",void 0),e}(),oo=function(e,t,n,r){for(var i=0,o=t.materials.length;i<o;i++){var a=t.materials[i];if(a.id===e)return Ci.a.Parse(a,n,r)}return null},ao=function(e,t,n){for(var r in t)if(e.name===t[r])return n.push(e.id),!0;return!(!e.parentId||-1===n.indexOf(e.parentId)||(n.push(e.id),0))},so=function(e,t){return e+" of "+(t?t.file+" from "+t.name+" version: "+t.version+", exporter version: "+t.exporter_version:"unknown")},uo=function(e,t){var n=t;if(t._waitingData.lods){if(t._waitingData.lods.ids&&t._waitingData.lods.ids.length>0){var r=t._waitingData.lods.ids,i=n.isEnabled(!1);if(t._waitingData.lods.distances){var o=t._waitingData.lods.distances;if(o.length>=r.length){var a=o.length>r.length?o[o.length-1]:0;n.setEnabled(!1);for(var s=0;s<r.length;s++){var u=e.getMeshByID(r[s]);null!=u&&n.addLODLevel(o[s],u)}a>0&&n.addLODLevel(a,null),!0===i&&n.setEnabled(!0)}else ye.h.Warn("Invalid level of detail distances for "+t.name)}}t._waitingData.lods=null}},lo=function(e,t,n,i,o){void 0===o&&(o=!1);var s=new _e(e),u="importScene has failed JSON parse";try{var l=JSON.parse(t);u="";var c,h,d=fr.loggingLevel===fr.DETAILED_LOGGING;if(null!=l.environmentTexture){var f=void 0===l.isPBR||l.isPBR;if(l.environmentTextureType&&"BABYLON.HDRCubeTexture"===l.environmentTextureType){var _=l.environmentTextureSize?l.environmentTextureSize:128,m=new Wi((l.environmentTexture.match(/https?:\/\//g)?"":n)+l.environmentTexture,e,_,!0,!f);l.environmentTextureRotationY&&(m.rotationY=l.environmentTextureRotationY),e.environmentTexture=m}else if(ye.h.EndsWith(l.environmentTexture,".env")){var g=new Yr((l.environmentTexture.match(/https?:\/\//g)?"":n)+l.environmentTexture,e);l.environmentTextureRotationY&&(g.rotationY=l.environmentTextureRotationY),e.environmentTexture=g}else{var v=Yr.CreateFromPrefilteredData((l.environmentTexture.match(/https?:\/\//g)?"":n)+l.environmentTexture,e);l.environmentTextureRotationY&&(v.rotationY=l.environmentTextureRotationY),e.environmentTexture=v}!0===l.createDefaultSkybox&&e.createDefaultSkybox(e.environmentTexture,f,null!=e.activeCamera?(e.activeCamera.maxZ-e.activeCamera.minZ)/2:1e3,l.skyboxBlurLevel||0),s.environmentTexture=e.environmentTexture}if(null!=l.lights)for(c=0,h=l.lights.length;c<h;c++){var y=Fr.a.Parse(l.lights[c],e);y&&(s.lights.push(y),u+=0===c?"\n\tLights:":"",u+="\n\t\t"+y.toString(d))}if(null!=l.reflectionProbes)for(c=0,h=l.reflectionProbes.length;c<h;c++){var b=io.Parse(l.reflectionProbes[c],e,n);b&&(s.reflectionProbes.push(b),u+=0===c?"\n\tReflection Probes:":"",u+="\n\t\t"+b.toString(d))}if(null!=l.animations)for(c=0,h=l.animations.length;c<h;c++){var T=l.animations[c],E=a.a.GetClass("BABYLON.Animation");if(E){var x=E.Parse(T);e.animations.push(x),s.animations.push(x),u+=0===c?"\n\tAnimations:":"",u+="\n\t\t"+x.toString(d)}}if(null!=l.materials)for(c=0,h=l.materials.length;c<h;c++){var M=Ci.a.Parse(l.materials[c],e,n);M&&(s.materials.push(M),u+=0===c?"\n\tMaterials:":"",u+="\n\t\t"+M.toString(d),M.getActiveTextures().forEach(function(e){-1==s.textures.indexOf(e)&&s.textures.push(e)}))}if(null!=l.multiMaterials)for(c=0,h=l.multiMaterials.length;c<h;c++){var A=zi.a.ParseMultiMaterial(l.multiMaterials[c],e);s.multiMaterials.push(A),u+=0===c?"\n\tMultiMaterials:":"",u+="\n\t\t"+A.toString(d),A.getActiveTextures().forEach(function(e){-1==s.textures.indexOf(e)&&s.textures.push(e)})}if(null!=l.morphTargetManagers)for(var S=0,C=l.morphTargetManagers;S<C.length;S++)s.morphTargetManagers.push(Ki.Parse(C[S],e));if(null!=l.skeletons)for(c=0,h=l.skeletons.length;c<h;c++){var R=Ye.Parse(l.skeletons[c],e);s.skeletons.push(R),u+=0===c?"\n\tSkeletons:":"",u+="\n\t\t"+R.toString(d)}var D=l.geometries;if(null!=D){var O=new Array,w=D.vertexData;if(null!=w)for(c=0,h=w.length;c<h;c++)O.push(ji.a.Parse(w[c],e,n));O.forEach(function(e){e&&s.geometries.push(e)})}if(null!=l.transformNodes)for(c=0,h=l.transformNodes.length;c<h;c++){var L=$r.a.Parse(l.transformNodes[c],e,n);s.transformNodes.push(L)}if(null!=l.meshes)for(c=0,h=l.meshes.length;c<h;c++){var I=fe.a.Parse(l.meshes[c],e,n);s.meshes.push(I),u+=0===c?"\n\tMeshes:":"",u+="\n\t\t"+I.toString(d)}if(null!=l.cameras)for(c=0,h=l.cameras.length;c<h;c++){var F=Ne.a.Parse(l.cameras[c],e);s.cameras.push(F),u+=0===c?"\n\tCameras:":"",u+="\n\t\t"+F.toString(d)}if(null!=l.animationGroups)for(c=0,h=l.animationGroups.length;c<h;c++){var N=Z.Parse(l.animationGroups[c],e);s.animationGroups.push(N),u+=0===c?"\n\tAnimationGroups:":"",u+="\n\t\t"+N.toString(d)}for(c=0,h=e.cameras.length;c<h;c++)(F=e.cameras[c])._waitingParentId&&(F.parent=e.getLastEntryByID(F._waitingParentId),F._waitingParentId=null);for(c=0,h=e.lights.length;c<h;c++){var B=e.lights[c];B&&B._waitingParentId&&(B.parent=e.getLastEntryByID(B._waitingParentId),B._waitingParentId=null)}for(c=0,h=e.transformNodes.length;c<h;c++){var k=e.transformNodes[c];k._waitingParentId&&(k.parent=e.getLastEntryByID(k._waitingParentId),k._waitingParentId=null)}for(c=0,h=e.meshes.length;c<h;c++)(I=e.meshes[c])._waitingParentId&&(I.parent=e.getLastEntryByID(I._waitingParentId),I._waitingParentId=null),I._waitingData.lods&&uo(e,I);for(c=0,h=e.skeletons.length;c<h;c++)(R=e.skeletons[c])._hasWaitingData&&(null!=R.bones&&R.bones.forEach(function(t){if(t._waitingTransformNodeId){var n=e.getLastEntryByID(t._waitingTransformNodeId);n&&t.linkTransformNode(n),t._waitingTransformNodeId=null}}),R._hasWaitingData=null);for(c=0,h=e.meshes.length;c<h;c++){var U=e.meshes[c];U._waitingData.freezeWorldMatrix?(U.freezeWorldMatrix(),U._waitingData.freezeWorldMatrix=null):U.computeWorldMatrix(!0)}for(c=0,h=e.lights.length;c<h;c++){var V=e.lights[c];if(V._excludedMeshesIds.length>0){for(var G=0;G<V._excludedMeshesIds.length;G++){var j=e.getMeshByID(V._excludedMeshesIds[G]);j&&V.excludedMeshes.push(j)}V._excludedMeshesIds=[]}if(V._includedOnlyMeshesIds.length>0){for(var z=0;z<V._includedOnlyMeshesIds.length;z++){var Y=e.getMeshByID(V._includedOnlyMeshesIds[z]);Y&&V.includedOnlyMeshes.push(Y)}V._includedOnlyMeshesIds=[]}}for(r.a.Parse(l,e,s,n),c=0,h=e.meshes.length;c<h;c++)(I=e.meshes[c])._waitingData.actions&&(P.Parse(I._waitingData.actions,I,e),I._waitingData.actions=null);null!=l.actions&&P.Parse(l.actions,null,e),o||s.removeAllFromScene()}catch(e){var H=so("loadAssets",l?l.producer:"Unknown")+u;if(!i)throw p.a.Log(H),e;i(H,e)}finally{null!==u&&fr.loggingLevel!==fr.NO_LOGGING&&p.a.Log(so("loadAssets",l?l.producer:"Unknown")+(fr.loggingLevel!==fr.MINIMAL_LOGGING?u:""))}return s};fr.RegisterPlugin({name:"babylon.js",extensions:".babylon",canDirectLoad:function(e){return-1!==e.indexOf("babylon")},importMesh:function(e,t,n,i,o,a,s,u){var l="importMesh has failed JSON parse";try{var c=JSON.parse(n);l="";var h=fr.loggingLevel===fr.DETAILED_LOGGING;e?Array.isArray(e)||(e=[e]):e=null;var d=new Array;if(null!=c.meshes){var f,_,m,g=[],v=[];for(f=0,_=c.meshes.length;f<_;f++){var y=c.meshes[f];if(null===e||ao(y,e,d)){if(null!==e&&delete e[e.indexOf(y.name)],null!=y.geometryId&&null!=c.geometries){var b=!1;["boxes","spheres","cylinders","toruses","grounds","planes","torusKnots","vertexData"].forEach(function(e){!0!==b&&c.geometries[e]&&Array.isArray(c.geometries[e])&&c.geometries[e].forEach(function(n){if(n.id===y.geometryId){switch(e){case"vertexData":ji.a.Parse(n,t,i)}b=!0}})}),!1===b&&p.a.Warn("Geometry not found for mesh "+y.id)}if(y.materialId){var T=-1!==v.indexOf(y.materialId);if(!1===T&&null!=c.multiMaterials)for(var E=0,x=c.multiMaterials.length;E<x;E++){var M=c.multiMaterials[E];if(M.id===y.materialId){for(var A=0,S=M.materials.length;A<S;A++){var C,P=M.materials[A];v.push(P),(C=oo(P,c,t,i))&&(l+="\n\tMaterial "+C.toString(h))}v.push(M.id);var R=zi.a.ParseMultiMaterial(M,t);R&&(T=!0,l+="\n\tMulti-Material "+R.toString(h));break}}!1===T&&(v.push(y.materialId),(C=oo(y.materialId,c,t,i))?l+="\n\tMaterial "+C.toString(h):p.a.Warn("Material not found for mesh "+y.id))}if(y.skeletonId>-1&&null!=c.skeletons&&0==g.indexOf(y.skeletonId)>-1)for(var D=0,O=c.skeletons.length;D<O;D++){var w=c.skeletons[D];if(w.id===y.skeletonId){var L=Ye.Parse(w,t);s.push(L),g.push(w.id),l+="\n\tSkeleton "+L.toString(h)}}if(null!=c.morphTargetManagers)for(var I=0,F=c.morphTargetManagers;I<F.length;I++)Ki.Parse(F[I],t);var N=fe.a.Parse(y,t,i);o.push(N),l+="\n\tMesh "+N.toString(h)}}for(f=0,_=t.meshes.length;f<_;f++)(m=t.meshes[f])._waitingParentId&&(m.parent=t.getLastEntryByID(m._waitingParentId),m._waitingParentId=null),m._waitingData.lods&&uo(t,m);for(f=0,_=t.skeletons.length;f<_;f++)(L=t.skeletons[f])._hasWaitingData&&(null!=L.bones&&L.bones.forEach(function(e){if(e._waitingTransformNodeId){var n=t.getLastEntryByID(e._waitingTransformNodeId);n&&e.linkTransformNode(n),e._waitingTransformNodeId=null}}),L._hasWaitingData=null);for(f=0,_=t.meshes.length;f<_;f++)(m=t.meshes[f])._waitingData.freezeWorldMatrix?(m.freezeWorldMatrix(),m._waitingData.freezeWorldMatrix=null):m.computeWorldMatrix(!0)}if(null!=c.particleSystems){var B=r.a.GetIndividualParser(xe.a.NAME_PARTICLESYSTEM);if(B)for(f=0,_=c.particleSystems.length;f<_;f++){var k=c.particleSystems[f];-1!==d.indexOf(k.emitterId)&&a.push(B(k,t,i))}}return!0}catch(e){var U=so("importMesh",c?c.producer:"Unknown")+l;if(!u)throw p.a.Log(U),e;u(U,e)}finally{null!==l&&fr.loggingLevel!==fr.NO_LOGGING&&p.a.Log(so("importMesh",c?c.producer:"Unknown")+(fr.loggingLevel!==fr.MINIMAL_LOGGING?l:""))}return!1},load:function(e,t,n,r){var i="importScene has failed JSON parse";try{var a=JSON.parse(t);if(i="",null!=a.useDelayedTextureLoading&&(e.useDelayedTextureLoading=a.useDelayedTextureLoading&&!fr.ForceFullSceneLoadingForIncremental),null!=a.autoClear&&(e.autoClear=a.autoClear),null!=a.clearColor&&(e.clearColor=o.f.FromArray(a.clearColor)),null!=a.ambientColor&&(e.ambientColor=o.e.FromArray(a.ambientColor)),null!=a.gravity&&(e.gravity=o.x.FromArray(a.gravity)),a.fogMode&&0!==a.fogMode)switch(e.fogMode=a.fogMode,e.fogColor=o.e.FromArray(a.fogColor),e.fogStart=a.fogStart,e.fogEnd=a.fogEnd,e.fogDensity=a.fogDensity,i+="\tFog mode for scene:  ",e.fogMode){case 1:i+="exp\n";break;case 2:i+="exp2\n";break;case 3:i+="linear\n"}if(a.physicsEnabled){var s;"cannon"===a.physicsEngine?s=new $i:"oimo"===a.physicsEngine?s=new eo:"ammo"===a.physicsEngine&&(s=new ro),i="\tPhysics engine "+(a.physicsEngine?a.physicsEngine:"oimo")+" enabled\n";var u=a.physicsGravity?o.x.FromArray(a.physicsGravity):null;e.enablePhysics(u,s)}if(null!=a.metadata&&(e.metadata=a.metadata),null!=a.collisionsEnabled&&(e.collisionsEnabled=a.collisionsEnabled),!lo(e,t,n,r,!0))return!1;if(a.autoAnimate&&e.beginAnimation(e,a.autoAnimateFrom,a.autoAnimateTo,a.autoAnimateLoop,a.autoAnimateSpeed||1),null!=a.activeCameraID&&e.setActiveCameraByID(a.activeCameraID),null!=a.environmentTexture){var l=void 0===a.isPBR||a.isPBR;if(a.environmentTextureType&&"BABYLON.HDRCubeTexture"===a.environmentTextureType){var c=new Wi(n+a.environmentTexture,e,a.environmentTextureSize?a.environmentTextureSize:128,!0,!l);a.environmentTextureRotationY&&(c.rotationY=a.environmentTextureRotationY),e.environmentTexture=c}else if(ye.h.EndsWith(a.environmentTexture,".env")){var h=new Yr(n+a.environmentTexture,e);a.environmentTextureRotationY&&(h.rotationY=a.environmentTextureRotationY),e.environmentTexture=h}else{var d=Yr.CreateFromPrefilteredData(n+a.environmentTexture,e);a.environmentTextureRotationY&&(d.rotationY=a.environmentTextureRotationY),e.environmentTexture=d}!0===a.createDefaultSkybox&&e.createDefaultSkybox(e.environmentTexture,l,null!=e.activeCamera?(e.activeCamera.maxZ-e.activeCamera.minZ)/2:1e3,a.skyboxBlurLevel||0)}return!0}catch(e){var f=so("importScene",a?a.producer:"Unknown")+i;if(!r)throw p.a.Log(f),e;r(f,e)}finally{null!==i&&fr.loggingLevel!==fr.NO_LOGGING&&p.a.Log(so("importScene",a?a.producer:"Unknown")+(fr.loggingLevel!==fr.MINIMAL_LOGGING?i:""))}return!1},loadAssetContainer:function(e,t,n,r){return lo(e,t,n,r)}});var co=n(93),ho=function(){function e(){this._isEnabled=!0,this.leftColor=o.e.White(),this.rightColor=o.e.Black(),this.bias=0,this.power=1}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},set:function(e){this._isEnabled!==e&&(this._isEnabled=e,me.b.MarkAllMaterialsAsDirty(_.a.MATERIAL_FresnelDirtyFlag|_.a.MATERIAL_MiscDirtyFlag))},enumerable:!0,configurable:!0}),e.prototype.clone=function(){var t=new e;return C.a.DeepCopy(this,t),t},e.prototype.serialize=function(){var e={};return e.isEnabled=this.isEnabled,e.leftColor=this.leftColor.asArray(),e.rightColor=this.rightColor.asArray(),e.bias=this.bias,e.power=this.power,e},e.Parse=function(t){var n=new e;return n.isEnabled=t.isEnabled,n.leftColor=o.e.FromArray(t.leftColor),n.rightColor=o.e.FromArray(t.rightColor),n.bias=t.bias,n.power=t.power||1,n},e}();L.a._FresnelParametersParser=ho.Parse;var fo=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.maxSimultaneousLights=4,r.disableLighting=!1,r.invertNormalMapX=!1,r.invertNormalMapY=!1,r.emissiveColor=new o.e(0,0,0),r.occlusionStrength=1,r.useLightmapAsShadowmap=!1,r._useAlphaFromAlbedoTexture=!0,r._useAmbientInGrayScale=!0,r}return l.d(t,e),Object.defineProperty(t.prototype,"doubleSided",{get:function(){return this._twoSidedLighting},set:function(e){this._twoSidedLighting!==e&&(this._twoSidedLighting=e,this.backFaceCulling=!e,this._markAllSubMeshesAsTexturesDirty())},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"PBRBaseSimpleMaterial"},l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsLightsDirty")],t.prototype,"maxSimultaneousLights",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsLightsDirty")],t.prototype,"disableLighting",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_reflectionTexture")],t.prototype,"environmentTexture",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"invertNormalMapX",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"invertNormalMapY",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_bumpTexture")],t.prototype,"normalTexture",void 0),l.c([Object(L.e)("emissive"),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"emissiveColor",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"emissiveTexture",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_ambientTextureStrength")],t.prototype,"occlusionStrength",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_ambientTexture")],t.prototype,"occlusionTexture",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_alphaCutOff")],t.prototype,"alphaCutOff",void 0),l.c([Object(L.c)()],t.prototype,"doubleSided",null),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty",null)],t.prototype,"lightmapTexture",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"useLightmapAsShadowmap",void 0),t}(ui),po=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._useRoughnessFromMetallicTextureAlpha=!1,r._useRoughnessFromMetallicTextureGreen=!0,r._useMetallnessFromMetallicTextureBlue=!0,r.metallic=1,r.roughness=1,r}return l.d(t,e),t.prototype.getClassName=function(){return"PBRMetallicRoughnessMaterial"},t.prototype.clone=function(e){var n=this,r=L.a.Clone(function(){return new t(e,n.getScene())},this);return r.id=e,r.name=e,this.clearCoat.copyTo(r.clearCoat),this.anisotropy.copyTo(r.anisotropy),this.brdf.copyTo(r.brdf),this.sheen.copyTo(r.sheen),r},t.prototype.serialize=function(){var e=L.a.Serialize(this);return e.customType="BABYLON.PBRMetallicRoughnessMaterial",e.clearCoat=this.clearCoat.serialize(),e.anisotropy=this.anisotropy.serialize(),e.brdf=this.brdf.serialize(),e.sheen=this.sheen.serialize(),e},t.Parse=function(e,n,r){var i=L.a.Parse(function(){return new t(e.name,n)},e,n,r);return e.clearCoat&&i.clearCoat.parse(e.clearCoat),e.anisotropy&&i.anisotropy.parse(e.anisotropy),e.brdf&&i.brdf.parse(e.brdf),e.sheen&&i.sheen.parse(e.brdf),i},l.c([Object(L.e)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_albedoColor")],t.prototype,"baseColor",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_albedoTexture")],t.prototype,"baseTexture",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"metallic",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty")],t.prototype,"roughness",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_metallicTexture")],t.prototype,"metallicRoughnessTexture",void 0),t}(fo);a.a.RegisteredTypes["BABYLON.PBRMetallicRoughnessMaterial"]=po;var _o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._useMicroSurfaceFromReflectivityMapAlpha=!0,r}return l.d(t,e),t.prototype.getClassName=function(){return"PBRSpecularGlossinessMaterial"},t.prototype.clone=function(e){var n=this,r=L.a.Clone(function(){return new t(e,n.getScene())},this);return r.id=e,r.name=e,this.clearCoat.copyTo(r.clearCoat),this.anisotropy.copyTo(r.anisotropy),this.brdf.copyTo(r.brdf),this.sheen.copyTo(r.sheen),r},t.prototype.serialize=function(){var e=L.a.Serialize(this);return e.customType="BABYLON.PBRSpecularGlossinessMaterial",e.clearCoat=this.clearCoat.serialize(),e.anisotropy=this.anisotropy.serialize(),e.brdf=this.brdf.serialize(),e.sheen=this.sheen.serialize(),e},t.Parse=function(e,n,r){var i=L.a.Parse(function(){return new t(e.name,n)},e,n,r);return e.clearCoat&&i.clearCoat.parse(e.clearCoat),e.anisotropy&&i.anisotropy.parse(e.anisotropy),e.brdf&&i.brdf.parse(e.brdf),e.sheen&&i.sheen.parse(e.brdf),i},l.c([Object(L.e)("diffuse"),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_albedoColor")],t.prototype,"diffuseColor",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_albedoTexture")],t.prototype,"diffuseTexture",void 0),l.c([Object(L.e)("specular"),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_reflectivityColor")],t.prototype,"specularColor",void 0),l.c([Object(L.c)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_microSurface")],t.prototype,"glossiness",void 0),l.c([Object(L.m)(),Object(L.b)("_markAllSubMeshesAsTexturesDirty","_reflectivityTexture")],t.prototype,"specularGlossinessTexture",void 0),t}(fo);a.a.RegisteredTypes["BABYLON.PBRSpecularGlossinessMaterial"]=_o;var mo=n(76),go=function(e){function t(t,n){var r=e.call(this,n)||this;return t?(r._engine=n.getEngine(),r._textureMatrix=o.j.Identity(),r.name=t,r.url=t,r.hasAlpha=!1,r.isCube=!1,r.is3D=r._engine.webGLVersion>1,r.wrapU=_.a.TEXTURE_CLAMP_ADDRESSMODE,r.wrapV=_.a.TEXTURE_CLAMP_ADDRESSMODE,r.wrapR=_.a.TEXTURE_CLAMP_ADDRESSMODE,r.anisotropicFilteringLevel=1,r._texture=r._getFromCache(t,!0),r._texture||(n.useDelayedTextureLoading?r.delayLoadState=_.a.DELAYLOADSTATE_NOTLOADED:r.loadTexture()),r):r}return l.d(t,e),t.prototype.getTextureMatrix=function(){return this._textureMatrix},t.prototype.load3dlTexture=function(){var e,n=this._engine;e=1===n.webGLVersion?n.createRawTexture(null,1,1,_.a.TEXTUREFORMAT_RGBA,!1,!1,_.a.TEXTURE_BILINEAR_SAMPLINGMODE):n.createRawTexture3D(null,1,1,1,_.a.TEXTUREFORMAT_RGBA,!1,!1,_.a.TEXTURE_BILINEAR_SAMPLINGMODE),this._texture=e;var r=function(r){if("string"==typeof r){for(var i,o=null,a=null,s=r.split("\n"),u=0,l=0,c=0,h=0,d=0,f=0;f<s.length;f++)if(t._noneEmptyLineRegex.test(i=s[f])&&0!==i.indexOf("#")){var p=i.split(" ");if(0!==u){if(0!=u){var m=Math.max(parseInt(p[0]),0),g=Math.max(parseInt(p[1]),0),v=Math.max(parseInt(p[2]),0);d=Math.max(m,d),d=Math.max(g,d),d=Math.max(v,d);var y=4*(l+h*u+c*u*u);a&&(a[y+0]=m,a[y+1]=g,a[y+2]=v),++c%u==0&&(c=0,++h%u==0&&(l++,h=0))}}else u=p.length,o=new Uint8Array(u*u*u*4),a=new Float32Array(u*u*u*4)}if(a&&o)for(f=0;f<a.length;f++)o[f]=f>0&&(f+1)%4==0?255:a[f]/d*255;e.is3D?(e.updateSize(u,u,u),n.updateRawTexture3D(e,o,_.a.TEXTUREFORMAT_RGBA,!1)):(e.updateSize(u*u,u),n.updateRawTexture(e,o,_.a.TEXTUREFORMAT_RGBA,!1))}},i=this.getScene();return i?i._loadFile(this.url,r):this._engine._loadFile(this.url,r),this._texture},t.prototype.loadTexture=function(){this.url&&this.url.toLocaleLowerCase().indexOf(".3dl")==this.url.length-4&&this.load3dlTexture()},t.prototype.clone=function(){var e=new t(this.url,this.getScene());return e.level=this.level,e},t.prototype.delayLoad=function(){this.delayLoadState===_.a.DELAYLOADSTATE_NOTLOADED&&(this.delayLoadState=_.a.DELAYLOADSTATE_LOADED,this._texture=this._getFromCache(this.url,!0),this._texture||this.loadTexture())},t.Parse=function(e,n){var r=null;return e.name&&!e.isRenderTarget&&((r=new t(e.name,n)).name=e.name,r.level=e.level),r},t.prototype.serialize=function(){if(!this.name)return null;var e={};return e.name=this.name,e.level=this.level,e.customType="BABYLON.ColorGradingTexture",e},t._noneEmptyLineRegex=/\S+/,t}(Gr.a);a.a.RegisteredTypes["BABYLON.ColorGradingTexture"]=go;var vo=function(e){function t(t,n,r,i,o,a,s){void 0===i&&(i=!1),void 0===o&&(o=!0),void 0===a&&(a=null),void 0===s&&(s=null);var u=e.call(this,n)||this;if(u._onLoad=null,u._onError=null,u.coordinatesMode=Ge.a.CUBIC_MODE,!t)throw new Error("Image url is not set");return u.name=t,u.url=t,u._size=r,u._noMipmap=i,u.gammaSpace=o,u._onLoad=a,u._onError=s,u.hasAlpha=!1,u.isCube=!0,u._texture=u._getFromCache(t,u._noMipmap),u._texture?a&&(u._texture.isReady?ye.h.SetImmediate(function(){return a()}):u._texture.onLoadedObservable.add(a)):n.useDelayedTextureLoading?u.delayLoadState=me.b.DELAYLOADSTATE_NOTLOADED:u.loadImage(u.loadTexture.bind(u),u._onError),u}return l.d(t,e),t.prototype.loadImage=function(e,t){var n=this,r=document.createElement("canvas"),i=new Image;i.addEventListener("load",function(){n._width=i.width,n._height=i.height,r.width=n._width,r.height=n._height;var t=r.getContext("2d");t.drawImage(i,0,0);var o=t.getImageData(0,0,i.width,i.height);n._buffer=o.data.buffer,r.remove(),e()}),i.addEventListener("error",function(e){t&&t(n.getClassName()+" could not be loaded",e)}),i.src=this.url},t.prototype.loadTexture=function(){var e=this,n=this.getScene();n&&(this._texture=n.getEngine().createRawCubeTextureFromUrl(this.url,n,this._size,me.b.TEXTUREFORMAT_RGB,n.getEngine().getCaps().textureFloat?me.b.TEXTURETYPE_FLOAT:me.b.TEXTURETYPE_UNSIGNED_INTEGER,this._noMipmap,function(){for(var n=e.getFloat32ArrayFromArrayBuffer(e._buffer),r=Yi.ConvertPanoramaToCubemap(n,e._width,e._height,e._size),i=[],o=0;o<6;o++)i.push(r[t._FacesMapping[o]]);return i},null,this._onLoad,this._onError))},t.prototype.getFloat32ArrayFromArrayBuffer=function(e){for(var t=new DataView(e),n=new Float32Array(3*e.byteLength/4),r=0,i=0;i<e.byteLength;i++)(i+1)%4!=0&&(n[r++]=t.getUint8(i)/255);return n},t.prototype.getClassName=function(){return"EquiRectangularCubeTexture"},t.prototype.clone=function(){var e=this.getScene();if(!e)return this;var n=new t(this.url,e,this._size,this._noMipmap,this.gammaSpace);return n.level=this.level,n.wrapU=this.wrapU,n.wrapV=this.wrapV,n.coordinatesIndex=this.coordinatesIndex,n.coordinatesMode=this.coordinatesMode,n},t._FacesMapping=["right","left","up","down","front","back"],t}(Gr.a),yo=function(){function e(){}return e.GetTGAHeader=function(e){var t=0;return{id_length:e[t++],colormap_type:e[t++],image_type:e[t++],colormap_index:e[t++]|e[t++]<<8,colormap_length:e[t++]|e[t++]<<8,colormap_size:e[t++],origin:[e[t++]|e[t++]<<8,e[t++]|e[t++]<<8],width:e[t++]|e[t++]<<8,height:e[t++]|e[t++]<<8,pixel_size:e[t++],flags:e[t++]}},e.UploadContent=function(t,n){if(n.length<19)p.a.Error("Unable to load TGA file - Not enough data to contain header");else{var r=18,i=e.GetTGAHeader(n);if(i.id_length+r>n.length)p.a.Error("Unable to load TGA file - Not enough data");else{r+=i.id_length;var o,a=!1,s=!1,u=!1;switch(i.image_type){case e._TYPE_RLE_INDEXED:a=!0;case e._TYPE_INDEXED:s=!0;break;case e._TYPE_RLE_RGB:a=!0;case e._TYPE_RGB:break;case e._TYPE_RLE_GREY:a=!0;case e._TYPE_GREY:u=!0}var l,c,h,d,f,_,m,g=i.pixel_size>>3,v=i.width*i.height*g;if(s&&(l=n.subarray(r,r+=i.colormap_length*(i.colormap_size>>3))),a){var y,b,T;o=new Uint8Array(v);for(var E=0,x=new Uint8Array(g);r<v&&E<v;)if(b=1+(127&(y=n[r++])),128&y){for(T=0;T<g;++T)x[T]=n[r++];for(T=0;T<b;++T)o.set(x,E+T*g);E+=g*b}else{for(b*=g,T=0;T<b;++T)o[E+T]=n[r++];E+=b}}else o=n.subarray(r,r+=s?i.width*i.height:v);switch((i.flags&e._ORIGIN_MASK)>>e._ORIGIN_SHIFT){default:case e._ORIGIN_UL:c=0,d=1,m=i.width,h=0,f=1,_=i.height;break;case e._ORIGIN_BL:c=0,d=1,m=i.width,h=i.height-1,f=-1,_=-1;break;case e._ORIGIN_UR:c=i.width-1,d=-1,m=-1,h=0,f=1,_=i.height;break;case e._ORIGIN_BR:c=i.width-1,d=-1,m=-1,h=i.height-1,f=-1,_=-1}var M=e["_getImageData"+(u?"Grey":"")+i.pixel_size+"bits"](i,l,o,h,f,_,c,d,m);t.getEngine()._uploadDataToTextureDirectly(t,M)}}},e._getImageData8bits=function(e,t,n,r,i,o,a,s,u){var l,c,h,d=n,f=t,p=e.width,_=0,m=new Uint8Array(p*e.height*4);for(h=r;h!==o;h+=i)for(c=a;c!==u;c+=s,_++)l=d[_],m[4*(c+p*h)+3]=255,m[4*(c+p*h)+2]=f[3*l+0],m[4*(c+p*h)+1]=f[3*l+1],m[4*(c+p*h)+0]=f[3*l+2];return m},e._getImageData16bits=function(e,t,n,r,i,o,a,s,u){var l,c,h,d=n,f=e.width,p=0,_=new Uint8Array(f*e.height*4);for(h=r;h!==o;h+=i)for(c=a;c!==u;c+=s,p+=2){var m=255*((31744&(l=d[p+0]+(d[p+1]<<8)))>>10)/31|0,g=255*((992&l)>>5)/31|0,v=255*(31&l)/31|0;_[4*(c+f*h)+0]=m,_[4*(c+f*h)+1]=g,_[4*(c+f*h)+2]=v,_[4*(c+f*h)+3]=32768&l?0:255}return _},e._getImageData24bits=function(e,t,n,r,i,o,a,s,u){var l,c,h=n,d=e.width,f=0,p=new Uint8Array(d*e.height*4);for(c=r;c!==o;c+=i)for(l=a;l!==u;l+=s,f+=3)p[4*(l+d*c)+3]=255,p[4*(l+d*c)+2]=h[f+0],p[4*(l+d*c)+1]=h[f+1],p[4*(l+d*c)+0]=h[f+2];return p},e._getImageData32bits=function(e,t,n,r,i,o,a,s,u){var l,c,h=n,d=e.width,f=0,p=new Uint8Array(d*e.height*4);for(c=r;c!==o;c+=i)for(l=a;l!==u;l+=s,f+=4)p[4*(l+d*c)+2]=h[f+0],p[4*(l+d*c)+1]=h[f+1],p[4*(l+d*c)+0]=h[f+2],p[4*(l+d*c)+3]=h[f+3];return p},e._getImageDataGrey8bits=function(e,t,n,r,i,o,a,s,u){var l,c,h,d=n,f=e.width,p=0,_=new Uint8Array(f*e.height*4);for(h=r;h!==o;h+=i)for(c=a;c!==u;c+=s,p++)_[4*(c+f*h)+0]=l=d[p],_[4*(c+f*h)+1]=l,_[4*(c+f*h)+2]=l,_[4*(c+f*h)+3]=255;return _},e._getImageDataGrey16bits=function(e,t,n,r,i,o,a,s,u){var l,c,h=n,d=e.width,f=0,p=new Uint8Array(d*e.height*4);for(c=r;c!==o;c+=i)for(l=a;l!==u;l+=s,f+=2)p[4*(l+d*c)+0]=h[f+0],p[4*(l+d*c)+1]=h[f+0],p[4*(l+d*c)+2]=h[f+0],p[4*(l+d*c)+3]=h[f+1];return p},e._TYPE_INDEXED=1,e._TYPE_RGB=2,e._TYPE_GREY=3,e._TYPE_RLE_INDEXED=9,e._TYPE_RLE_RGB=10,e._TYPE_RLE_GREY=11,e._ORIGIN_MASK=48,e._ORIGIN_SHIFT=4,e._ORIGIN_BL=0,e._ORIGIN_BR=1,e._ORIGIN_UL=2,e._ORIGIN_UR=3,e}(),bo=function(){function e(){this.supportCascades=!1}return e.prototype.canLoad=function(e,t,n,r,i){return 0===e.indexOf(".tga")},e.prototype.transformUrl=function(e,t){return e},e.prototype.getFallbackTextureUrl=function(e,t){return null},e.prototype.loadCubeData=function(e,t,n,r,i){throw".env not supported in Cube."},e.prototype.loadData=function(e,t,n){var r=new Uint8Array(e),i=yo.GetTGAHeader(r);n(i.width,i.height,t.generateMipMaps,!1,function(){yo.UploadContent(t,r)})},e}();me.b._TextureLoaders.push(new bo),me.b.prototype.unBindMultiColorAttachmentFramebuffer=function(e,t,n){void 0===t&&(t=!1),this._currentRenderTarget=null;var r=this._gl;if(e[0]._MSAAFramebuffer){r.bindFramebuffer(r.READ_FRAMEBUFFER,e[0]._MSAAFramebuffer),r.bindFramebuffer(r.DRAW_FRAMEBUFFER,e[0]._framebuffer);var i=e[0]._attachments;i||(i=new Array(e.length),e[0]._attachments=i);for(var o=0;o<e.length;o++){for(var a=e[o],s=0;s<i.length;s++)i[s]=r.NONE;i[o]=r[this.webGLVersion>1?"COLOR_ATTACHMENT"+o:"COLOR_ATTACHMENT"+o+"_WEBGL"],r.readBuffer(i[o]),r.drawBuffers(i),r.blitFramebuffer(0,0,a.width,a.height,0,0,a.width,a.height,r.COLOR_BUFFER_BIT,r.NEAREST)}for(o=0;o<i.length;o++)i[o]=r[this.webGLVersion>1?"COLOR_ATTACHMENT"+o:"COLOR_ATTACHMENT"+o+"_WEBGL"];r.drawBuffers(i)}for(o=0;o<e.length;o++)!(a=e[o]).generateMipMaps||t||a.isCube||(this._bindTextureDirectly(r.TEXTURE_2D,a),r.generateMipmap(r.TEXTURE_2D),this._bindTextureDirectly(r.TEXTURE_2D,null));n&&(e[0]._MSAAFramebuffer&&this._bindUnboundFramebuffer(e[0]._framebuffer),n()),this._bindUnboundFramebuffer(null)},me.b.prototype.createMultipleRenderTarget=function(e,t){var n=!1,r=!0,i=!1,o=!1,a=1,s=me.b.TEXTURETYPE_UNSIGNED_INT,u=me.b.TEXTURE_TRILINEAR_SAMPLINGMODE,l=new Array,c=new Array;void 0!==t&&(n=void 0!==t.generateMipMaps&&t.generateMipMaps,r=void 0===t.generateDepthBuffer||t.generateDepthBuffer,i=void 0!==t.generateStencilBuffer&&t.generateStencilBuffer,o=void 0!==t.generateDepthTexture&&t.generateDepthTexture,a=t.textureCount||1,t.types&&(l=t.types),t.samplingModes&&(c=t.samplingModes));var h=this._gl,d=h.createFramebuffer();this._bindUnboundFramebuffer(d);for(var f=e.width||e,_=e.height||e,m=[],g=[],v=this._setupFramebufferDepthAttachments(i,r,f,_),y=0;y<a;y++){var b=c[y]||u,T=l[y]||s;(T!==me.b.TEXTURETYPE_FLOAT||this._caps.textureFloatLinearFiltering)&&(T!==me.b.TEXTURETYPE_HALF_FLOAT||this._caps.textureHalfFloatLinearFiltering)||(b=me.b.TEXTURE_NEAREST_SAMPLINGMODE);var E=this._getSamplingParameters(b,n);T!==me.b.TEXTURETYPE_FLOAT||this._caps.textureFloat||(T=me.b.TEXTURETYPE_UNSIGNED_INT,p.a.Warn("Float textures are not supported. Render target forced to TEXTURETYPE_UNSIGNED_BYTE type"));var x=new je.a(this,je.a.DATASOURCE_MULTIRENDERTARGET),M=h[this.webGLVersion>1?"COLOR_ATTACHMENT"+y:"COLOR_ATTACHMENT"+y+"_WEBGL"];m.push(x),g.push(M),h.activeTexture(h["TEXTURE"+y]),h.bindTexture(h.TEXTURE_2D,x._webGLTexture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,E.mag),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,E.min),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texImage2D(h.TEXTURE_2D,0,this._getRGBABufferInternalSizedFormat(T),f,_,0,h.RGBA,this._getWebGLTextureType(T),null),h.framebufferTexture2D(h.DRAW_FRAMEBUFFER,M,h.TEXTURE_2D,x._webGLTexture,0),n&&this._gl.generateMipmap(this._gl.TEXTURE_2D),this._bindTextureDirectly(h.TEXTURE_2D,null),x._framebuffer=d,x._depthStencilBuffer=v,x.baseWidth=f,x.baseHeight=_,x.width=f,x.height=_,x.isReady=!0,x.samples=1,x.generateMipMaps=n,x.samplingMode=b,x.type=T,x._generateDepthBuffer=r,x._generateStencilBuffer=i,x._attachments=g,this._internalTexturesCache.push(x)}if(o&&this._caps.depthTextureExtension){var A=new je.a(this,je.a.DATASOURCE_MULTIRENDERTARGET);h.activeTexture(h.TEXTURE0),h.bindTexture(h.TEXTURE_2D,A._webGLTexture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.NEAREST),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.CLAMP_TO_EDGE),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.CLAMP_TO_EDGE),h.texImage2D(h.TEXTURE_2D,0,this.webGLVersion<2?h.DEPTH_COMPONENT:h.DEPTH_COMPONENT16,f,_,0,h.DEPTH_COMPONENT,h.UNSIGNED_SHORT,null),h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.TEXTURE_2D,A._webGLTexture,0),A._framebuffer=d,A.baseWidth=f,A.baseHeight=_,A.width=f,A.height=_,A.isReady=!0,A.samples=1,A.generateMipMaps=n,A.samplingMode=h.NEAREST,A._generateDepthBuffer=r,A._generateStencilBuffer=i,m.push(A),this._internalTexturesCache.push(A)}return h.drawBuffers(g),h.bindRenderbuffer(h.RENDERBUFFER,null),this._bindUnboundFramebuffer(null),this.resetTextureCache(),m},me.b.prototype.updateMultipleRenderTargetTextureSampleCount=function(e,t){if(this.webGLVersion<2||!e||0==e.length)return 1;if(e[0].samples===t)return t;var n=this._gl;t=Math.min(t,n.getParameter(n.MAX_SAMPLES)),e[0]._depthStencilBuffer&&(n.deleteRenderbuffer(e[0]._depthStencilBuffer),e[0]._depthStencilBuffer=null),e[0]._MSAAFramebuffer&&(n.deleteFramebuffer(e[0]._MSAAFramebuffer),e[0]._MSAAFramebuffer=null);for(var r=0;r<e.length;r++)e[r]._MSAARenderBuffer&&(n.deleteRenderbuffer(e[r]._MSAARenderBuffer),e[r]._MSAARenderBuffer=null);if(t>1){var i=n.createFramebuffer();if(!i)throw new Error("Unable to create multi sampled framebuffer");this._bindUnboundFramebuffer(i);var o=this._setupFramebufferDepthAttachments(e[0]._generateStencilBuffer,e[0]._generateDepthBuffer,e[0].width,e[0].height,t),a=[];for(r=0;r<e.length;r++){var s=e[r],u=n[this.webGLVersion>1?"COLOR_ATTACHMENT"+r:"COLOR_ATTACHMENT"+r+"_WEBGL"],l=n.createRenderbuffer();if(!l)throw new Error("Unable to create multi sampled framebuffer");n.bindRenderbuffer(n.RENDERBUFFER,l),n.renderbufferStorageMultisample(n.RENDERBUFFER,t,this._getRGBAMultiSampleBufferFormat(s.type),s.width,s.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,u,n.RENDERBUFFER,l),s._MSAAFramebuffer=i,s._MSAARenderBuffer=l,s.samples=t,s._depthStencilBuffer=o,n.bindRenderbuffer(n.RENDERBUFFER,null),a.push(u)}n.drawBuffers(a)}else this._bindUnboundFramebuffer(e[0]._framebuffer);return this._bindUnboundFramebuffer(null),t};var To=function(e){function t(t,n,r,i,o){var a=this,s=!(!o||!o.generateMipMaps)&&o.generateMipMaps,u=!(!o||!o.generateDepthTexture)&&o.generateDepthTexture;if((a=e.call(this,t,n,i,s,!o||void 0===o.doNotChangeAspectRatio||o.doNotChangeAspectRatio)||this)._engine=i.getEngine(),a.isSupported){for(var l=[],c=[],h=0;h<r;h++)l.push(o&&o.types&&void 0!==o.types[h]?o.types[h]:o&&o.defaultType?o.defaultType:_.a.TEXTURETYPE_UNSIGNED_INT),c.push(o&&o.samplingModes&&void 0!==o.samplingModes[h]?o.samplingModes[h]:Ge.a.BILINEAR_SAMPLINGMODE);var d=!o||void 0===o.generateDepthBuffer||o.generateDepthBuffer,f=!(!o||void 0===o.generateStencilBuffer)&&o.generateStencilBuffer;return a._size=n,a._multiRenderTargetOptions={samplingModes:c,generateMipMaps:s,generateDepthBuffer:d,generateStencilBuffer:f,generateDepthTexture:u,types:l,textureCount:r},a._createInternalTextures(),a._createTextures(),a}a.dispose()}return l.d(t,e),Object.defineProperty(t.prototype,"isSupported",{get:function(){return this._engine.webGLVersion>1||this._engine.getCaps().drawBuffersExtension},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textures",{get:function(){return this._textures},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depthTexture",{get:function(){return this._textures[this._textures.length-1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapU",{set:function(e){if(this._textures)for(var t=0;t<this._textures.length;t++)this._textures[t].wrapU=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wrapV",{set:function(e){if(this._textures)for(var t=0;t<this._textures.length;t++)this._textures[t].wrapV=e},enumerable:!0,configurable:!0}),t.prototype._rebuild=function(){this.releaseInternalTextures(),this._createInternalTextures();for(var e=0;e<this._internalTextures.length;e++)this._textures[e]._texture=this._internalTextures[e];this._texture=this._internalTextures[0]},t.prototype._createInternalTextures=function(){this._internalTextures=this._engine.createMultipleRenderTarget(this._size,this._multiRenderTargetOptions)},t.prototype._createTextures=function(){this._textures=[];for(var e=0;e<this._internalTextures.length;e++){var t=new Ge.a(null,this.getScene());t._texture=this._internalTextures[e],this._textures.push(t)}this._texture=this._internalTextures[0]},Object.defineProperty(t.prototype,"samples",{get:function(){return this._samples},set:function(e){this._samples!==e&&(this._samples=this._engine.updateMultipleRenderTargetTextureSampleCount(this._internalTextures,e))},enumerable:!0,configurable:!0}),t.prototype.resize=function(e){this.releaseInternalTextures(),this._internalTextures=this._engine.createMultipleRenderTarget(e,this._multiRenderTargetOptions),this._createInternalTextures()},t.prototype.unbindFrameBuffer=function(e,t){var n=this;e.unBindMultiColorAttachmentFramebuffer(this._internalTextures,this.isCube,function(){n.onAfterRenderObservable.notifyObservers(t)})},t.prototype.dispose=function(){this.releaseInternalTextures(),e.prototype.dispose.call(this)},t.prototype.releaseInternalTextures=function(){if(this._internalTextures)for(var e=this._internalTextures.length-1;e>=0;e--)void 0!==this._internalTextures[e]&&(this._internalTextures[e].dispose(),this._internalTextures.splice(e,1))},t}(ln),Eo=function(){function e(e){this.name=xe.a.NAME_PROCEDURALTEXTURE,this.scene=e,this.scene.proceduralTextures=new Array,e.layers=new Array}return e.prototype.register=function(){this.scene._beforeClearStage.registerStep(xe.a.STEP_BEFORECLEAR_PROCEDURALTEXTURE,this,this._beforeClear)},e.prototype.rebuild=function(){},e.prototype.dispose=function(){},e.prototype._beforeClear=function(){if(this.scene.proceduralTexturesEnabled){ye.h.StartPerformanceCounter("Procedural textures",this.scene.proceduralTextures.length>0);for(var e=0;e<this.scene.proceduralTextures.length;e++){var t=this.scene.proceduralTextures[e];t._shouldRender()&&t.render()}ye.h.EndPerformanceCounter("Procedural textures",this.scene.proceduralTextures.length>0)}},e}();jt.a.ShadersStore.proceduralVertexShader="\nattribute vec2 position;\n\nvarying vec2 vPosition;\nvarying vec2 vUV;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nvPosition=position;\nvUV=position*madd+madd;\ngl_Position=vec4(position,0.0,1.0);\n}";var xo=function(e){function t(t,n,r,o,a,s,u){void 0===a&&(a=null),void 0===s&&(s=!0),void 0===u&&(u=!1);var l=e.call(this,null,o,!s)||this;l.isCube=u,l.isEnabled=!0,l.autoClear=!0,l.onGeneratedObservable=new i.c,l._textures={},l._currentRefreshId=-1,l._refreshRate=1,l._vertexBuffers={},l._uniforms=new Array,l._samplers=new Array,l._floats={},l._ints={},l._floatsArrays={},l._colors3={},l._colors4={},l._vectors2={},l._vectors3={},l._matrices={},l._fallbackTextureUsed=!1,l._cachedDefines="",l._contentUpdateId=-1;var c=(o=l.getScene())._getComponent(xe.a.NAME_PROCEDURALTEXTURE);c||(c=new Eo(o),o._addComponent(c)),o.proceduralTextures.push(l),l._engine=o.getEngine(),l.name=t,l.isRenderTarget=!0,l._size=n,l._generateMipMaps=s,l.setFragment(r),l._fallbackTexture=a,u?(l._texture=l._engine.createRenderTargetCubeTexture(n,{generateMipMaps:s,generateDepthBuffer:!1,generateStencilBuffer:!1}),l.setFloat("face",0)):l._texture=l._engine.createRenderTargetTexture(n,{generateMipMaps:s,generateDepthBuffer:!1,generateStencilBuffer:!1});var h=[];return h.push(1,1),h.push(-1,1),h.push(-1,-1),h.push(1,-1),l._vertexBuffers[Mn.b.PositionKind]=new Mn.b(l._engine,h,Mn.b.PositionKind,!1,!1,2),l._createIndexBuffer(),l}return l.d(t,e),t.prototype.getEffect=function(){return this._effect},t.prototype.getContent=function(){return this._contentData&&this._currentRefreshId==this._contentUpdateId?this._contentData:(this._contentData=this.readPixels(0,0,this._contentData),this._contentUpdateId=this._currentRefreshId,this._contentData)},t.prototype._createIndexBuffer=function(){var e=this._engine,t=[];t.push(0),t.push(1),t.push(2),t.push(0),t.push(2),t.push(3),this._indexBuffer=e.createIndexBuffer(t)},t.prototype._rebuild=function(){var e=this._vertexBuffers[Mn.b.PositionKind];e&&e._rebuild(),this._createIndexBuffer(),this.refreshRate===ln.REFRESHRATE_RENDER_ONCE&&(this.refreshRate=ln.REFRESHRATE_RENDER_ONCE)},t.prototype.reset=function(){void 0!==this._effect&&this._effect.dispose()},t.prototype._getDefines=function(){return""},t.prototype.isReady=function(){var e,t=this,n=this._engine;if(!this._fragment)return!1;if(this._fallbackTextureUsed)return!0;var r=this._getDefines();return!(!this._effect||r!==this._cachedDefines||!this._effect.isReady())||(e=void 0!==this._fragment.fragmentElement?{vertex:"procedural",fragmentElement:this._fragment.fragmentElement}:{vertex:"procedural",fragment:this._fragment},this._cachedDefines=r,this._effect=n.createEffect(e,[Mn.b.PositionKind],this._uniforms,this._samplers,r,void 0,void 0,function(){t.releaseInternalTexture(),t._fallbackTexture&&(t._texture=t._fallbackTexture._texture,t._texture&&t._texture.incrementReferences()),t._fallbackTextureUsed=!0}),this._effect.isReady())},t.prototype.resetRefreshCounter=function(){this._currentRefreshId=-1},t.prototype.setFragment=function(e){this._fragment=e},Object.defineProperty(t.prototype,"refreshRate",{get:function(){return this._refreshRate},set:function(e){this._refreshRate=e,this.resetRefreshCounter()},enumerable:!0,configurable:!0}),t.prototype._shouldRender=function(){return this.isEnabled&&this.isReady()&&this._texture?!(this._fallbackTextureUsed||(-1===this._currentRefreshId?(this._currentRefreshId=1,0):this.refreshRate===this._currentRefreshId?(this._currentRefreshId=1,0):(this._currentRefreshId++,1))):(this._texture&&(this._texture.isReady=!1),!1)},t.prototype.getRenderSize=function(){return this._size},t.prototype.resize=function(e,t){this._fallbackTextureUsed||(this.releaseInternalTexture(),this._texture=this._engine.createRenderTargetTexture(e,t),this._size=e,this._generateMipMaps=t)},t.prototype._checkUniform=function(e){-1===this._uniforms.indexOf(e)&&this._uniforms.push(e)},t.prototype.setTexture=function(e,t){return-1===this._samplers.indexOf(e)&&this._samplers.push(e),this._textures[e]=t,this},t.prototype.setFloat=function(e,t){return this._checkUniform(e),this._floats[e]=t,this},t.prototype.setInt=function(e,t){return this._checkUniform(e),this._ints[e]=t,this},t.prototype.setFloats=function(e,t){return this._checkUniform(e),this._floatsArrays[e]=t,this},t.prototype.setColor3=function(e,t){return this._checkUniform(e),this._colors3[e]=t,this},t.prototype.setColor4=function(e,t){return this._checkUniform(e),this._colors4[e]=t,this},t.prototype.setVector2=function(e,t){return this._checkUniform(e),this._vectors2[e]=t,this},t.prototype.setVector3=function(e,t){return this._checkUniform(e),this._vectors3[e]=t,this},t.prototype.setMatrix=function(e,t){return this._checkUniform(e),this._matrices[e]=t,this},t.prototype.render=function(e){var t=this.getScene();if(t){var n=this._engine;for(var r in n.enableEffect(this._effect),n.setState(!1),this._textures)this._effect.setTexture(r,this._textures[r]);for(r in this._ints)this._effect.setInt(r,this._ints[r]);for(r in this._floats)this._effect.setFloat(r,this._floats[r]);for(r in this._floatsArrays)this._effect.setArray(r,this._floatsArrays[r]);for(r in this._colors3)this._effect.setColor3(r,this._colors3[r]);for(r in this._colors4){var i=this._colors4[r];this._effect.setFloat4(r,i.r,i.g,i.b,i.a)}for(r in this._vectors2)this._effect.setVector2(r,this._vectors2[r]);for(r in this._vectors3)this._effect.setVector3(r,this._vectors3[r]);for(r in this._matrices)this._effect.setMatrix(r,this._matrices[r]);if(this._texture){if(this.isCube)for(var o=0;o<6;o++)n.bindFramebuffer(this._texture,o,void 0,void 0,!0),n.bindBuffers(this._vertexBuffers,this._indexBuffer,this._effect),this._effect.setFloat("face",o),this.autoClear&&n.clear(t.clearColor,!0,!1,!1),n.drawElementsType(Ci.a.TriangleFillMode,0,6),5===o&&n.generateMipMapsForCubemap(this._texture);else n.bindFramebuffer(this._texture,0,void 0,void 0,!0),n.bindBuffers(this._vertexBuffers,this._indexBuffer,this._effect),this.autoClear&&n.clear(t.clearColor,!0,!1,!1),n.drawElementsType(Ci.a.TriangleFillMode,0,6);n.unBindFramebuffer(this._texture,this.isCube),this.onGenerated&&this.onGenerated(),this.onGeneratedObservable.notifyObservers(this)}}},t.prototype.clone=function(){var e=this.getSize(),n=new t(this.name,e.width,this._fragment,this.getScene(),this._fallbackTexture,this._generateMipMaps);return n.hasAlpha=this.hasAlpha,n.level=this.level,n.coordinatesMode=this.coordinatesMode,n},t.prototype.dispose=function(){var t=this.getScene();if(t){var n=t.proceduralTextures.indexOf(this);n>=0&&t.proceduralTextures.splice(n,1);var r=this._vertexBuffers[Mn.b.PositionKind];r&&(r.dispose(),this._vertexBuffers[Mn.b.PositionKind]=null),this._indexBuffer&&this._engine._releaseBuffer(this._indexBuffer)&&(this._indexBuffer=null),e.prototype.dispose.call(this)}},l.c([Object(L.c)()],t.prototype,"isEnabled",void 0),l.c([Object(L.c)()],t.prototype,"autoClear",void 0),l.c([Object(L.c)()],t.prototype,"_generateMipMaps",void 0),l.c([Object(L.c)()],t.prototype,"_size",void 0),l.c([Object(L.c)()],t.prototype,"refreshRate",null),t}(Ge.a),Mo=n(60),Ao=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,r,null,i,o,a)||this;return s._animate=!0,s._time=0,s._texturePath=n,s._loadJson(n),s.refreshRate=1,s}return l.d(t,e),t.prototype._loadJson=function(e){var t=this,n=function(){p.a.Log("No config file found in "+e+" trying to use ShadersStore or DOM element");try{t.setFragment(t._texturePath)}catch(e){p.a.Error("No json or ShaderStore or DOM element found for CustomProceduralTexture")}},r=e+"/config.json",i=new Mo.a;i.open("GET",r),i.addEventListener("load",function(){if(200===i.status||i.responseText&&i.responseText.length>0)try{t._config=JSON.parse(i.response),t.updateShaderUniforms(),t.updateTextures(),t.setFragment(t._texturePath+"/custom"),t._animate=t._config.animate,t.refreshRate=t._config.refreshrate}catch(e){n()}else n()},!1),i.addEventListener("error",function(){n()},!1);try{i.send()}catch(e){p.a.Error("CustomProceduralTexture: Error on XHR send request.")}},t.prototype.isReady=function(){if(!e.prototype.isReady.call(this))return!1;for(var t in this._textures)if(!this._textures[t].isReady())return!1;return!0},t.prototype.render=function(t){var n=this.getScene();this._animate&&n&&(this._time+=.03*n.getAnimationRatio(),this.updateShaderUniforms()),e.prototype.render.call(this,t)},t.prototype.updateTextures=function(){for(var e=0;e<this._config.sampler2Ds.length;e++)this.setTexture(this._config.sampler2Ds[e].sample2Dname,new Ge.a(this._texturePath+"/"+this._config.sampler2Ds[e].textureRelativeUrl,this.getScene()))},t.prototype.updateShaderUniforms=function(){if(this._config)for(var e=0;e<this._config.uniforms.length;e++){var t=this._config.uniforms[e];switch(t.type){case"float":this.setFloat(t.name,t.value);break;case"color3":this.setColor3(t.name,new o.e(t.r,t.g,t.b));break;case"color4":this.setColor4(t.name,new o.f(t.r,t.g,t.b,t.a));break;case"vector2":this.setVector2(t.name,new o.w(t.x,t.y));break;case"vector3":this.setVector3(t.name,new o.x(t.x,t.y,t.z))}}this.setFloat("time",this._time)},Object.defineProperty(t.prototype,"animate",{get:function(){return this._animate},set:function(e){this._animate=e},enumerable:!0,configurable:!0}),t}(xo);jt.a.ShadersStore.noisePixelShader="\n\nuniform float brightness;\nuniform float persistence;\nuniform float timeScale;\n\nvarying vec2 vUV;\n\nvec2 hash22(vec2 p)\n{\np=p*mat2(127.1,311.7,269.5,183.3);\np=-1.0+2.0*fract(sin(p)*43758.5453123);\nreturn sin(p*6.283+timeScale);\n}\nfloat interpolationNoise(vec2 p)\n{\nvec2 pi=floor(p);\nvec2 pf=p-pi;\nvec2 w=pf*pf*(3.-2.*pf);\nfloat f00=dot(hash22(pi+vec2(.0,.0)),pf-vec2(.0,.0));\nfloat f01=dot(hash22(pi+vec2(.0,1.)),pf-vec2(.0,1.));\nfloat f10=dot(hash22(pi+vec2(1.0,0.)),pf-vec2(1.0,0.));\nfloat f11=dot(hash22(pi+vec2(1.0,1.)),pf-vec2(1.0,1.));\nfloat xm1=mix(f00,f10,w.x);\nfloat xm2=mix(f01,f11,w.x);\nfloat ym=mix(xm1,xm2,w.y);\nreturn ym;\n}\nfloat perlinNoise2D(float x,float y)\n{\nfloat sum=0.0;\nfloat frequency=0.0;\nfloat amplitude=0.0;\nfor(int i=0; i<OCTAVES; i++)\n{\nfrequency=pow(2.0,float(i));\namplitude=pow(persistence,float(i));\nsum=sum+interpolationNoise(vec2(x*frequency,y*frequency))*amplitude;\n}\nreturn sum;\n}\n\nvoid main(void)\n{\nfloat x=abs(vUV.x);\nfloat y=abs(vUV.y);\nfloat noise=brightness+(1.0-brightness)*perlinNoise2D(x,y);\ngl_FragColor=vec4(noise,noise,noise,1.0);\n}\n";var So=function(e){function t(t,n,r,i,o){void 0===n&&(n=256),void 0===r&&(r=S.a.LastCreatedScene);var a=e.call(this,t,n,"noise",r,i,o)||this;return a._time=0,a.brightness=.2,a.octaves=3,a.persistence=.8,a.animationSpeedFactor=1,a.autoClear=!1,a._updateShaderUniforms(),a}return l.d(t,e),t.prototype._updateShaderUniforms=function(){var e=this.getScene();e&&(this._time+=e.getAnimationRatio()*this.animationSpeedFactor*.01,this.setFloat("brightness",this.brightness),this.setFloat("persistence",this.persistence),this.setFloat("timeScale",this._time))},t.prototype._getDefines=function(){return"#define OCTAVES "+(0|this.octaves)},t.prototype.render=function(t){this._updateShaderUniforms(),e.prototype.render.call(this,t)},t.prototype.serialize=function(){var e={customType:"BABYLON.NoiseProceduralTexture"};return e.brightness=this.brightness,e.octaves=this.octaves,e.persistence=this.persistence,e.animationSpeedFactor=this.animationSpeedFactor,e.size=this.getSize().width,e.generateMipMaps=this._generateMipMaps,e},t.Parse=function(e,n){var r=new t(e.name,e.size,n,void 0,e.generateMipMaps);return r.brightness=e.brightness,r.octaves=e.octaves,r.persistence=e.persistence,r.animationSpeedFactor=e.animationSpeedFactor,r},t}(xo);a.a.RegisteredTypes["BABYLON.NoiseProceduralTexture"]=So;var Co=function(e){function t(t,n,r,i,o,a,s,u,l){void 0===i&&(i=_.a.TEXTUREFORMAT_RGBA),void 0===o&&(o=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===a&&(a=!1),void 0===s&&(s=!1),void 0===u&&(u=_.a.TEXTURE_TRILINEAR_SAMPLINGMODE),void 0===l&&(l=null);var c=e.call(this,"",t)||this;return c._texture=t.getEngine().createRawCubeTexture(n,r,i,o,a,s,u,l),c}return l.d(t,e),t.prototype.update=function(e,t,n,r,i){void 0===i&&(i=null),this._texture.getEngine().updateRawCubeTexture(this._texture,e,t,n,r,i)},t.prototype.updateRGBDAsync=function(e,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=.8),void 0===i&&(i=0),t._UpdateRGBDAsync(this._texture,e,n,r,i)},t.prototype.clone=function(){var e=this;return L.a.Clone(function(){var n=e.getScene(),r=e._texture,i=new t(n,r._bufferViewArray,r.width,r.format,r.type,r.generateMipMaps,r.invertY,r.samplingMode,r._compression);return r.dataSource===je.a.DATASOURCE_CUBERAW_RGBD&&i.updateRGBDAsync(r._bufferViewArrayArray,r._sphericalPolynomial,r._lodGenerationScale,r._lodGenerationOffset),i},this)},t._UpdateRGBDAsync=function(e,t,n,r,i){return e._dataSource=je.a.DATASOURCE_CUBERAW_RGBD,e._bufferViewArrayArray=t,e._lodGenerationScale=r,e._lodGenerationOffset=i,e._sphericalPolynomial=n,yi.UploadLevelsAsync(e,t).then(function(){e.isReady=!0})},t}(Yr),Po=function(e){function t(t,n,r,i,o,a,s,u,l,c){void 0===s&&(s=!0),void 0===u&&(u=!1),void 0===l&&(l=Ge.a.TRILINEAR_SAMPLINGMODE),void 0===c&&(c=_.a.TEXTURETYPE_UNSIGNED_INT);var h=e.call(this,null,a,!s,u)||this;return h.format=o,h._engine=a.getEngine(),h._texture=a.getEngine().createRawTexture3D(t,n,r,i,o,s,u,l,void 0,c),h.is3D=!0,h}return l.d(t,e),t.prototype.update=function(e){this._texture&&this._engine.updateRawTexture3D(this._texture,e,this._texture.format,this._texture.invertY,null,this._texture.type)},t}(Ge.a),Ro=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r,i,!0)||this;return a.refractionPlane=new o.n(0,1,0,1),a.depth=2,a.onBeforeRenderObservable.add(function(){r.clipPlane=a.refractionPlane}),a.onAfterRenderObservable.add(function(){r.clipPlane=null}),a}return l.d(t,e),t.prototype.clone=function(){var e=this.getScene();if(!e)return this;var n=this.getSize(),r=new t(this.name,n.width,e,this._generateMipMaps);return r.hasAlpha=this.hasAlpha,r.level=this.level,r.refractionPlane=this.refractionPlane.clone(),this.renderList&&(r.renderList=this.renderList.slice(0)),r.depth=this.depth,r},t.prototype.serialize=function(){if(!this.name)return null;var t=e.prototype.serialize.call(this);return t.mirrorPlane=this.refractionPlane.asArray(),t.depth=this.depth,t},t}(ln),Do=function(e){function t(n,r,i){var a=e.call(this,i.scene)||this;return r&&(i.engine||i.scene)?(i=l.a({},t.DefaultOptions,i),a._engine=i.engine||i.scene.getEngine(),a._generateMipMaps=i.generateMipMaps,a._samplingMode=i.samplingMode,a._textureMatrix=o.j.Identity(),a.name=n,a.element=r,a._isVideo=r instanceof HTMLVideoElement,a.anisotropicFilteringLevel=1,a._createInternalTexture(),a):a}return l.d(t,e),t.prototype._createInternalTexture=function(){var e=0,t=0;this._isVideo?(e=this.element.videoWidth,t=this.element.videoHeight):(e=this.element.width,t=this.element.height),this._texture=this._engine.createDynamicTexture(e,t,this._generateMipMaps,this._samplingMode),this.update()},t.prototype.getTextureMatrix=function(){return this._textureMatrix},t.prototype.update=function(e){if(void 0===e&&(e=null),null!=this._texture)if(this._isVideo){var t=this.element;if(t.readyState<t.HAVE_CURRENT_DATA)return;this._engine.updateVideoTexture(this._texture,t,null===e||e)}else this._engine.updateDynamicTexture(this._texture,this.element,null===e||e,!1)},t.DefaultOptions={generateMipMaps:!1,samplingMode:_.a.TEXTURE_BILINEAR_SAMPLINGMODE,engine:null,scene:null},t}(Gr.a),Oo=function(){function e(e){this._pendingActions=new Array,this._workerInfos=e.map(function(e){return{worker:e,active:!1}})}return e.prototype.dispose=function(){for(var e=0,t=this._workerInfos;e<t.length;e++)t[e].worker.terminate();delete this._workerInfos,delete this._pendingActions},e.prototype.push=function(e){for(var t=0,n=this._workerInfos;t<n.length;t++){var r=n[t];if(!r.active)return void this._execute(r,e)}this._pendingActions.push(e)},e.prototype._execute=function(e,t){var n=this;e.active=!0,t(e.worker,function(){e.active=!1;var t=n._pendingActions.shift();t&&n._execute(e,t)})},e}();function wo(e){return"function"==typeof importScripts?(importScripts(e),Promise.resolve()):new Promise(function(t,n){ye.h.LoadScript(e,function(){t()},function(e){n(new Error(e))})})}function Lo(e,t,n){var r=t&&e||n;if(r)return wo(r).then(function(){return new Promise(function(e){DracoDecoderModule({wasmBinary:t}).then(function(t){e({module:t})})})})}function Io(e,t,n,r,i){var o=new e.DecoderBuffer;o.Init(t,t.byteLength);var a,s,u=new e.Decoder;try{var l=u.GetEncodedGeometryType(o);switch(l){case e.TRIANGULAR_MESH:a=new e.Mesh,s=u.DecodeBufferToMesh(o,a);break;case e.POINT_CLOUD:a=new e.PointCloud,s=u.DecodeBufferToPointCloud(o,a);break;default:throw new Error("Invalid geometry type "+l)}if(!s.ok()||!a.ptr)throw new Error(s.error_msg());var c=a.num_points();if(l===e.TRIANGULAR_MESH){var h=a.num_faces(),d=new e.DracoInt32Array;try{for(var f=new Uint32Array(3*h),p=0;p<h;p++){u.GetFaceFromMesh(a,p,d);var _=3*p;f[_+0]=d.GetValue(0),f[_+1]=d.GetValue(1),f[_+2]=d.GetValue(2)}r(f)}finally{e.destroy(d)}}var m=function(t,n){var r=new e.DracoFloat32Array;try{u.GetAttributeFloatForAllPoints(a,n,r);for(var o=new Float32Array(c*n.num_components()),s=0;s<o.length;s++)o[s]=r.GetValue(s);i(t,o)}finally{e.destroy(r)}};if(n)for(var g in n){var v=n[g];m(g,u.GetAttributeByUniqueId(a,v))}else{var y={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"};for(var g in y)-1!==(v=u.GetAttributeId(a,e[y[g]]))&&m(g,u.GetAttribute(a,v))}}finally{a&&e.destroy(a),e.destroy(u),e.destroy(o)}}function Fo(e){return"object"!=typeof document||"string"!=typeof e?e:ye.h.GetAbsoluteUrl(e)}var No=function(){function e(t){void 0===t&&(t=e.DefaultNumWorkers);var n,r=e.Configuration.decoder,i=r.wasmUrl&&r.wasmBinaryUrl&&"object"==typeof WebAssembly?(n=Fo(r.wasmBinaryUrl),new Promise(function(e,t){ye.h.LoadFile(n,function(t){e(t)},void 0,void 0,!0,function(e,n){t(n)})})):Promise.resolve(void 0);t&&"function"==typeof Worker?this._workerPoolPromise=i.then(function(e){for(var n=URL.createObjectURL(new Blob([""+wo+Lo+Io+"("+function(){var e;onmessage=function(t){var n=t.data;switch(n.id){case"init":var r=n.decoder;e=Lo(r.wasmUrl,r.wasmBinary,r.fallbackUrl),postMessage("done");break;case"decodeMesh":if(!e)throw new Error("Draco decoder module is not available");e.then(function(e){Io(e.module,n.dataView,n.attributes,function(e){postMessage({id:"indices",value:e},[e.buffer])},function(e,t){postMessage({id:e,value:t},[t.buffer])}),postMessage("done")})}}}+")()"],{type:"application/javascript"})),i=new Array(t),o=0;o<i.length;o++)i[o]=new Promise(function(t,i){var o=new Worker(n),a=function(e){o.removeEventListener("error",a),o.removeEventListener("message",s),i(e)},s=function(e){"done"===e.data&&(o.removeEventListener("error",a),o.removeEventListener("message",s),t(o))};o.addEventListener("error",a),o.addEventListener("message",s),o.postMessage({id:"init",decoder:{wasmUrl:Fo(r.wasmUrl),wasmBinary:e,fallbackUrl:Fo(r.fallbackUrl)}})});return Promise.all(i).then(function(e){return new Oo(e)})}):this._decoderModulePromise=i.then(function(e){return Lo(r.wasmUrl,e,r.fallbackUrl)})}return Object.defineProperty(e,"DecoderAvailable",{get:function(){var t=e.Configuration.decoder;return!!(t.wasmUrl&&t.wasmBinaryUrl&&"object"==typeof WebAssembly||t.fallbackUrl)},enumerable:!0,configurable:!0}),e.GetDefaultNumWorkers=function(){return"object"==typeof navigator&&navigator.hardwareConcurrency?Math.min(Math.floor(.5*navigator.hardwareConcurrency),4):1},Object.defineProperty(e,"Default",{get:function(){return e._Default||(e._Default=new e),e._Default},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._workerPoolPromise&&this._workerPoolPromise.then(function(e){e.dispose()}),delete this._workerPoolPromise,delete this._decoderModulePromise},e.prototype.whenReadyAsync=function(){return this._workerPoolPromise?this._workerPoolPromise.then(function(){}):this._decoderModulePromise?this._decoderModulePromise.then(function(){}):Promise.resolve()},e.prototype.decodeMeshAsync=function(e,t){var n=e instanceof ArrayBuffer?new Uint8Array(e):e;if(this._workerPoolPromise)return this._workerPoolPromise.then(function(e){return new Promise(function(r,i){e.push(function(e,o){var a=new xn.a,s=function(t){e.removeEventListener("error",s),e.removeEventListener("message",u),i(t),o()},u=function(t){"done"===t.data?(e.removeEventListener("error",s),e.removeEventListener("message",u),r(a),o()):"indices"===t.data.id?a.indices=t.data.value:a.set(t.data.value,t.data.id)};e.addEventListener("error",s),e.addEventListener("message",u);var l=new Uint8Array(n.byteLength);l.set(new Uint8Array(n.buffer,n.byteOffset,n.byteLength)),e.postMessage({id:"decodeMesh",dataView:l,attributes:t},[l.buffer])})})});if(this._decoderModulePromise)return this._decoderModulePromise.then(function(e){var r=new xn.a;return Io(e.module,n,t,function(e){r.indices=e},function(e,t){r.set(t,e)}),r});throw new Error("Draco decoder module is not available")},e.Configuration={decoder:{wasmUrl:"https://preview.babylonjs.com/draco_wasm_wrapper_gltf.js",wasmBinaryUrl:"https://preview.babylonjs.com/draco_decoder_gltf.wasm",fallbackUrl:"https://preview.babylonjs.com/draco_decoder_gltf.js"}},e.DefaultNumWorkers=e.GetDefaultNumWorkers(),e._Default=null,e}(),Bo=n(49),ko=0,Uo=function(){function e(e,t,n){this.pos=e,this.normal=t,this.uv=n}return e.prototype.clone=function(){return new e(this.pos.clone(),this.normal.clone(),this.uv.clone())},e.prototype.flip=function(){this.normal=this.normal.scale(-1)},e.prototype.interpolate=function(t,n){return new e(o.x.Lerp(this.pos,t.pos,n),o.x.Lerp(this.normal,t.normal,n),o.w.Lerp(this.uv,t.uv,n))},e}(),Vo=function(){function e(e,t){this.normal=e,this.w=t}return e.FromPoints=function(t,n,r){var i=r.subtract(t),a=n.subtract(t);if(0===i.lengthSquared()||0===a.lengthSquared())return null;var s=o.x.Normalize(o.x.Cross(i,a));return new e(s,o.x.Dot(s,t))},e.prototype.clone=function(){return new e(this.normal.clone(),this.w)},e.prototype.flip=function(){this.normal.scaleInPlace(-1),this.w=-this.w},e.prototype.splitPolygon=function(t,n,r,i,a){var s,u,l=0,c=[];for(s=0;s<t.vertices.length;s++){var h=(u=o.x.Dot(this.normal,t.vertices[s].pos)-this.w)<-e.EPSILON?2:u>e.EPSILON?1:0;l|=h,c.push(h)}switch(l){case 0:(o.x.Dot(this.normal,t.plane.normal)>0?n:r).push(t);break;case 1:i.push(t);break;case 2:a.push(t);break;case 3:var d,f=[],p=[];for(s=0;s<t.vertices.length;s++){var _=(s+1)%t.vertices.length,m=c[s],g=c[_],v=t.vertices[s],y=t.vertices[_];if(2!==m&&f.push(v),1!==m&&p.push(2!==m?v.clone():v),3==(m|g)){u=(this.w-o.x.Dot(this.normal,v.pos))/o.x.Dot(this.normal,y.pos.subtract(v.pos));var b=v.interpolate(y,u);f.push(b),p.push(b.clone())}}f.length>=3&&(d=new Go(f,t.shared)).plane&&i.push(d),p.length>=3&&(d=new Go(p,t.shared)).plane&&a.push(d)}},e.EPSILON=1e-5,e}(),Go=function(){function e(e,t){this.vertices=e,this.shared=t,this.plane=Vo.FromPoints(e[0].pos,e[1].pos,e[2].pos)}return e.prototype.clone=function(){return new e(this.vertices.map(function(e){return e.clone()}),this.shared)},e.prototype.flip=function(){this.vertices.reverse().map(function(e){e.flip()}),this.plane.flip()},e}(),jo=function(){function e(e){this.plane=null,this.front=null,this.back=null,this.polygons=new Array,e&&this.build(e)}return e.prototype.clone=function(){var t=new e;return t.plane=this.plane&&this.plane.clone(),t.front=this.front&&this.front.clone(),t.back=this.back&&this.back.clone(),t.polygons=this.polygons.map(function(e){return e.clone()}),t},e.prototype.invert=function(){for(var e=0;e<this.polygons.length;e++)this.polygons[e].flip();this.plane&&this.plane.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();var t=this.front;this.front=this.back,this.back=t},e.prototype.clipPolygons=function(e){if(!this.plane)return e.slice();for(var t=new Array,n=new Array,r=0;r<e.length;r++)this.plane.splitPolygon(e[r],t,n,t,n);return this.front&&(t=this.front.clipPolygons(t)),n=this.back?this.back.clipPolygons(n):[],t.concat(n)},e.prototype.clipTo=function(e){this.polygons=e.clipPolygons(this.polygons),this.front&&this.front.clipTo(e),this.back&&this.back.clipTo(e)},e.prototype.allPolygons=function(){var e=this.polygons.slice();return this.front&&(e=e.concat(this.front.allPolygons())),this.back&&(e=e.concat(this.back.allPolygons())),e},e.prototype.build=function(t){if(t.length){this.plane||(this.plane=t[0].plane.clone());for(var n=new Array,r=new Array,i=0;i<t.length;i++)this.plane.splitPolygon(t[i],this.polygons,this.polygons,n,r);n.length&&(this.front||(this.front=new e),this.front.build(n)),r.length&&(this.back||(this.back=new e),this.back.build(r))}},e}(),zo=function(){function e(){this.polygons=new Array}return e.FromMesh=function(t){var n,r,i,a,s,u,l,c,h,d,f=new Array,p=null;if(!(t instanceof fe.a))throw"BABYLON.CSG: Wrong Mesh type, must be BABYLON.Mesh";t.computeWorldMatrix(!0),l=t.getWorldMatrix(),c=t.position.clone(),h=t.rotation.clone(),t.rotationQuaternion&&(p=t.rotationQuaternion.clone()),d=t.scaling.clone();for(var _=t.getIndices(),m=t.getVerticesData(Mn.b.PositionKind),g=t.getVerticesData(Mn.b.NormalKind),v=t.getVerticesData(Mn.b.UVKind),y=t.subMeshes,b=0,T=y.length;b<T;b++)for(var E=y[b].indexStart,x=y[b].indexCount+y[b].indexStart;E<x;E+=3){u=[];for(var M=0;M<3;M++){var A=new o.x(g[3*_[E+M]],g[3*_[E+M]+1],g[3*_[E+M]+2]);i=new o.w(v[2*_[E+M]],v[2*_[E+M]+1]);var S=new o.x(m[3*_[E+M]],m[3*_[E+M]+1],m[3*_[E+M]+2]);a=o.x.TransformCoordinates(S,l),r=o.x.TransformNormal(A,l),n=new Uo(a,r,i),u.push(n)}(s=new Go(u,{subMeshId:b,meshId:ko,materialIndex:y[b].materialIndex})).plane&&f.push(s)}var C=e.FromPolygons(f);return C.matrix=l,C.position=c,C.rotation=h,C.scaling=d,C.rotationQuaternion=p,ko++,C},e.FromPolygons=function(t){var n=new e;return n.polygons=t,n},e.prototype.clone=function(){var t=new e;return t.polygons=this.polygons.map(function(e){return e.clone()}),t.copyTransformAttributes(this),t},e.prototype.union=function(t){var n=new jo(this.clone().polygons),r=new jo(t.clone().polygons);return n.clipTo(r),r.clipTo(n),r.invert(),r.clipTo(n),r.invert(),n.build(r.allPolygons()),e.FromPolygons(n.allPolygons()).copyTransformAttributes(this)},e.prototype.unionInPlace=function(e){var t=new jo(this.polygons),n=new jo(e.polygons);t.clipTo(n),n.clipTo(t),n.invert(),n.clipTo(t),n.invert(),t.build(n.allPolygons()),this.polygons=t.allPolygons()},e.prototype.subtract=function(t){var n=new jo(this.clone().polygons),r=new jo(t.clone().polygons);return n.invert(),n.clipTo(r),r.clipTo(n),r.invert(),r.clipTo(n),r.invert(),n.build(r.allPolygons()),n.invert(),e.FromPolygons(n.allPolygons()).copyTransformAttributes(this)},e.prototype.subtractInPlace=function(e){var t=new jo(this.polygons),n=new jo(e.polygons);t.invert(),t.clipTo(n),n.clipTo(t),n.invert(),n.clipTo(t),n.invert(),t.build(n.allPolygons()),t.invert(),this.polygons=t.allPolygons()},e.prototype.intersect=function(t){var n=new jo(this.clone().polygons),r=new jo(t.clone().polygons);return n.invert(),r.clipTo(n),r.invert(),n.clipTo(r),r.clipTo(n),n.build(r.allPolygons()),n.invert(),e.FromPolygons(n.allPolygons()).copyTransformAttributes(this)},e.prototype.intersectInPlace=function(e){var t=new jo(this.polygons),n=new jo(e.polygons);t.invert(),n.clipTo(t),n.invert(),t.clipTo(n),n.clipTo(t),t.build(n.allPolygons()),t.invert(),this.polygons=t.allPolygons()},e.prototype.inverse=function(){var e=this.clone();return e.inverseInPlace(),e},e.prototype.inverseInPlace=function(){this.polygons.map(function(e){e.flip()})},e.prototype.copyTransformAttributes=function(e){return this.matrix=e.matrix,this.position=e.position,this.rotation=e.rotation,this.scaling=e.scaling,this.rotationQuaternion=e.rotationQuaternion,this},e.prototype.buildMeshGeometry=function(e,t,n){var r=this.matrix.clone();r.invert();var i,a,s,u=new fe.a(e,t),l=[],c=[],h=[],d=[],f=o.x.Zero(),p=o.x.Zero(),_=o.w.Zero(),m=this.polygons,g=[0,0,0],v={},y=0,b={};n&&m.sort(function(e,t){return e.shared.meshId===t.shared.meshId?e.shared.subMeshId-t.shared.subMeshId:e.shared.meshId-t.shared.meshId});for(var T=0,E=m.length;T<E;T++){b[(i=m[T]).shared.meshId]||(b[i.shared.meshId]={}),b[i.shared.meshId][i.shared.subMeshId]||(b[i.shared.meshId][i.shared.subMeshId]={indexStart:1/0,indexEnd:-1/0,materialIndex:i.shared.materialIndex}),s=b[i.shared.meshId][i.shared.subMeshId];for(var x=2,M=i.vertices.length;x<M;x++){g[0]=0,g[1]=x-1,g[2]=x;for(var A=0;A<3;A++){f.copyFrom(i.vertices[g[A]].pos),p.copyFrom(i.vertices[g[A]].normal),_.copyFrom(i.vertices[g[A]].uv);var S=o.x.TransformCoordinates(f,r),C=o.x.TransformNormal(p,r);void 0!==(a=v[S.x+","+S.y+","+S.z])&&h[3*a]===C.x&&h[3*a+1]===C.y&&h[3*a+2]===C.z&&d[2*a]===_.x&&d[2*a+1]===_.y||(l.push(S.x,S.y,S.z),d.push(_.x,_.y),h.push(p.x,p.y,p.z),a=v[S.x+","+S.y+","+S.z]=l.length/3-1),c.push(a),s.indexStart=Math.min(y,s.indexStart),s.indexEnd=Math.max(y,s.indexEnd),y++}}}if(u.setVerticesData(Mn.b.PositionKind,l),u.setVerticesData(Mn.b.NormalKind,h),u.setVerticesData(Mn.b.UVKind,d),u.setIndices(c,null),n){var P,R=0;for(var D in u.subMeshes=new Array,b){for(var O in P=-1,b[D])Bo.b.CreateFromIndices((s=b[D][O]).materialIndex+R,s.indexStart,s.indexEnd-s.indexStart+1,u),P=Math.max(s.materialIndex,P);R+=++P}}return u},e.prototype.toMesh=function(e,t,n,r){var i=this.buildMeshGeometry(e,n,r);return i.material=t,i.position.copyFrom(this.position),i.rotation.copyFrom(this.rotation),this.rotationQuaternion&&(i.rotationQuaternion=this.rotationQuaternion.clone()),i.scaling.copyFrom(this.scaling),i.computeWorldMatrix(!0),i},e}(),Yo=function(e){function t(t,n,r,i,a,s){void 0===i&&(i=1),void 0===a&&(a=60),void 0===s&&(s=!0);var u=e.call(this,t,r)||this;u._sectionPolygonPointsCount=4,u._running=!1,u._autoStart=s,u._generator=n,u._diameter=i,u._length=a,u._sectionVectors=[],u._sectionNormalVectors=[];for(var l=0;l<u._sectionPolygonPointsCount;l++)u._sectionVectors[l]=o.x.Zero(),u._sectionNormalVectors[l]=o.x.Zero();return u._createMesh(),u}return l.d(t,e),t.prototype.getClassName=function(){return"TrailMesh"},t.prototype._createMesh=function(){var e=new xn.a,t=[],n=[],r=[],i=o.x.Zero();this._generator._boundingInfo&&(i=this._generator._boundingInfo.boundingBox.centerWorld);for(var a=2*Math.PI/this._sectionPolygonPointsCount,s=0;s<this._sectionPolygonPointsCount;s++)t.push(i.x+Math.cos(s*a)*this._diameter,i.y+Math.sin(s*a)*this._diameter,i.z);for(s=1;s<=this._length;s++){for(var u=0;u<this._sectionPolygonPointsCount;u++)t.push(i.x+Math.cos(u*a)*this._diameter,i.y+Math.sin(u*a)*this._diameter,i.z);var l=t.length/3-2*this._sectionPolygonPointsCount;for(u=0;u<this._sectionPolygonPointsCount-1;u++)r.push(l+u,l+u+this._sectionPolygonPointsCount,l+u+this._sectionPolygonPointsCount+1),r.push(l+u,l+u+this._sectionPolygonPointsCount+1,l+u+1);r.push(l+this._sectionPolygonPointsCount-1,l+this._sectionPolygonPointsCount-1+this._sectionPolygonPointsCount,l+this._sectionPolygonPointsCount),r.push(l+this._sectionPolygonPointsCount-1,l+this._sectionPolygonPointsCount,l)}xn.a.ComputeNormals(t,r,n),e.positions=t,e.normals=n,e.indices=r,e.applyToMesh(this,!0),this._autoStart&&this.start()},t.prototype.start=function(){var e=this;this._running||(this._running=!0,this._beforeRenderObserver=this.getScene().onBeforeRenderObservable.add(function(){e.update()}))},t.prototype.stop=function(){this._beforeRenderObserver&&this._running&&(this._running=!1,this.getScene().onBeforeRenderObservable.remove(this._beforeRenderObserver))},t.prototype.update=function(){var e=this.getVerticesData(Mn.b.PositionKind),t=this.getVerticesData(Mn.b.NormalKind),n=this._generator.getWorldMatrix();if(e&&t){for(var r=3*this._sectionPolygonPointsCount;r<e.length;r++)e[r-3*this._sectionPolygonPointsCount]=e[r]-t[r]/this._length*this._diameter;for(r=3*this._sectionPolygonPointsCount;r<t.length;r++)t[r-3*this._sectionPolygonPointsCount]=t[r];var i=e.length-3*this._sectionPolygonPointsCount,a=2*Math.PI/this._sectionPolygonPointsCount;for(r=0;r<this._sectionPolygonPointsCount;r++)this._sectionVectors[r].copyFromFloats(Math.cos(r*a)*this._diameter,Math.sin(r*a)*this._diameter,0),this._sectionNormalVectors[r].copyFromFloats(Math.cos(r*a),Math.sin(r*a),0),o.x.TransformCoordinatesToRef(this._sectionVectors[r],n,this._sectionVectors[r]),o.x.TransformNormalToRef(this._sectionNormalVectors[r],n,this._sectionNormalVectors[r]);for(r=0;r<this._sectionPolygonPointsCount;r++)e[i+3*r]=this._sectionVectors[r].x,e[i+3*r+1]=this._sectionVectors[r].y,e[i+3*r+2]=this._sectionVectors[r].z,t[i+3*r]=this._sectionNormalVectors[r].x,t[i+3*r+1]=this._sectionNormalVectors[r].y,t[i+3*r+2]=this._sectionNormalVectors[r].z;this.updateVerticesData(Mn.b.PositionKind,e,!0,!1),this.updateVerticesData(Mn.b.NormalKind,t,!0,!1)}},t.prototype.clone=function(e,n){return void 0===e&&(e=""),new t(e,void 0===n?this._generator:n,this.getScene(),this._diameter,this._length,this._autoStart)},t.prototype.serialize=function(t){e.prototype.serialize.call(this,t)},t.Parse=function(e,n){return new t(e.name,e._generator,n,e._diameter,e._length,e._autoStart)},t}(fe.a),Ho=n(111),Wo=n(72);xn.a.CreateDisc=function(e){var t=new Array,n=new Array,r=new Array,i=new Array,o=e.radius||.5,a=e.tessellation||64,s=e.arc&&(e.arc<=0||e.arc>1)?1:e.arc||1,u=0===e.sideOrientation?0:e.sideOrientation||xn.a.DEFAULTSIDE;t.push(0,0,0),i.push(.5,.5);for(var l=2*Math.PI*s,c=l/a,h=0;h<l;h+=c){var d=Math.cos(h),f=Math.sin(h),p=(d+1)/2,_=(1-f)/2;t.push(o*d,o*f,0),i.push(p,_)}1===s&&(t.push(t[3],t[4],t[5]),i.push(i[2],i[3]));for(var m=t.length/3,g=1;g<m-1;g++)n.push(g+1,0,g);xn.a.ComputeNormals(t,n,r),xn.a._ComputeSides(u,t,n,r,i,e.frontUVs,e.backUVs);var v=new xn.a;return v.indices=n,v.positions=t,v.normals=r,v.uvs=i,v},fe.a.CreateDisc=function(e,t,n,r,i,o){return void 0===r&&(r=null),Xo.CreateDisc(e,{radius:t,tessellation:n,sideOrientation:o,updatable:i},r)};var Xo=function(){function e(){}return e.CreateDisc=function(e,t,n){void 0===n&&(n=null);var r=new fe.a(e,n);return t.sideOrientation=fe.a._GetDefaultSideOrientation(t.sideOrientation),r._originalBuilderSideOrientation=t.sideOrientation,xn.a.CreateDisc(t).applyToMesh(r,t.updatable),r},e}();xn.a.CreateTorusKnot=function(e){var t,n,r=new Array,i=new Array,a=new Array,s=new Array,u=e.radius||2,l=e.tube||.5,c=e.radialSegments||32,h=e.tubularSegments||32,d=e.p||2,f=e.q||3,p=0===e.sideOrientation?0:e.sideOrientation||xn.a.DEFAULTSIDE,_=function(e){var t=Math.cos(e),n=Math.sin(e),r=f/d*e,i=Math.cos(r),a=u*(2+i)*.5*t,s=u*(2+i)*n*.5,l=u*Math.sin(r)*.5;return new o.x(a,s,l)};for(t=0;t<=c;t++){var m=t%c/c*2*d*Math.PI,g=_(m),v=_(m+.01),y=v.subtract(g),b=v.add(g),T=o.x.Cross(y,b);for(b=o.x.Cross(T,y),T.normalize(),b.normalize(),n=0;n<h;n++){var E=n%h/h*2*Math.PI,x=-l*Math.cos(E),M=l*Math.sin(E);i.push(g.x+x*b.x+M*T.x),i.push(g.y+x*b.y+M*T.y),i.push(g.z+x*b.z+M*T.z),s.push(t/c),s.push(n/h)}}for(t=0;t<c;t++)for(n=0;n<h;n++){var A=(n+1)%h,S=t*h+n,C=(t+1)*h+n,P=(t+1)*h+A,R=t*h+A;r.push(R),r.push(C),r.push(S),r.push(R),r.push(P),r.push(C)}xn.a.ComputeNormals(i,r,a),xn.a._ComputeSides(p,i,r,a,s,e.frontUVs,e.backUVs);var D=new xn.a;return D.indices=r,D.positions=i,D.normals=a,D.uvs=s,D},fe.a.CreateTorusKnot=function(e,t,n,r,i,o,a,s,u,l){return Ko.CreateTorusKnot(e,{radius:t,tube:n,radialSegments:r,tubularSegments:i,p:o,q:a,sideOrientation:l,updatable:u},s)};var Ko=function(){function e(){}return e.CreateTorusKnot=function(e,t,n){var r=new fe.a(e,n);return t.sideOrientation=fe.a._GetDefaultSideOrientation(t.sideOrientation),r._originalBuilderSideOrientation=t.sideOrientation,xn.a.CreateTorusKnot(t).applyToMesh(r,t.updatable),r},e}(),Qo=function(e){function t(t,n){var r=e.call(this,t.x,t.y)||this;return r.index=n,r}return l.d(t,e),t}(o.w),qo=function(){function e(){this.elements=new Array}return e.prototype.add=function(e){var t=this,n=new Array;return e.forEach(function(e){if(0===n.length||!e.equalsWithEpsilon(n[0])){var r=new Qo(e,t.elements.length);n.push(r),t.elements.push(r)}}),n},e.prototype.computeBounds=function(){var e=new o.w(this.elements[0].x,this.elements[0].y),t=new o.w(this.elements[0].x,this.elements[0].y);return this.elements.forEach(function(n){n.x<e.x?e.x=n.x:n.x>t.x&&(t.x=n.x),n.y<e.y?e.y=n.y:n.y>t.y&&(t.y=n.y)}),{min:e,max:t,width:t.x-e.x,height:t.y-e.y}},e}(),Zo=function(){function e(){}return e.Rectangle=function(e,t,n,r){return[new o.w(e,t),new o.w(n,t),new o.w(n,r),new o.w(e,r)]},e.Circle=function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=32);for(var i=new Array,a=0,s=2*Math.PI/r,u=0;u<r;u++)i.push(new o.w(t+Math.cos(a)*e,n+Math.sin(a)*e)),a-=s;return i},e.Parse=function(e){var t,n=e.split(/[^-+eE\.\d]+/).map(parseFloat).filter(function(e){return!isNaN(e)}),r=[];for(t=0;t<(2147483646&n.length);t+=2)r.push(new o.w(n[t],n[t+1]));return r},e.StartingAt=function(e,t){return o.l.StartingAt(e,t)},e}(),Jo=function(){function e(e,t,n,r){var i;void 0===r&&(r=earcut),this._points=new qo,this._outlinepoints=new qo,this._holes=new Array,this._epoints=new Array,this._eholes=new Array,this.bjsEarcut=r,this._name=e,this._scene=n||me.b.LastCreatedScene,i=t instanceof o.l?t.getPoints():t,this._addToepoint(i),this._points.add(i),this._outlinepoints.add(i),void 0===this.bjsEarcut&&p.a.Warn("Earcut was not found, the polygon will not be built.")}return e.prototype._addToepoint=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this._epoints.push(r.x,r.y)}},e.prototype.addHole=function(e){this._points.add(e);var t=new qo;return t.add(e),this._holes.push(t),this._eholes.push(this._epoints.length/2),this._addToepoint(e),this},e.prototype.build=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=0);var n=new fe.a(this._name,this._scene),r=this.buildVertexData(t);return n.setVerticesData(Mn.b.PositionKind,r.positions,e),n.setVerticesData(Mn.b.NormalKind,r.normals,e),n.setVerticesData(Mn.b.UVKind,r.uvs,e),n.setIndices(r.indices),n},e.prototype.buildVertexData=function(e){var t=this;void 0===e&&(e=0);var n=new xn.a,r=new Array,i=new Array,o=new Array,a=this._points.computeBounds();this._points.elements.forEach(function(e){r.push(0,1,0),i.push(e.x,0,e.y),o.push((e.x-a.min.x)/a.width,(e.y-a.min.y)/a.height)});for(var s=new Array,u=this.bjsEarcut(this._epoints,this._eholes,2),l=0;l<u.length;l++)s.push(u[l]);if(e>0){var c=i.length/3;this._points.elements.forEach(function(t){r.push(0,-1,0),i.push(t.x,-e,t.y),o.push(1-(t.x-a.min.x)/a.width,1-(t.y-a.min.y)/a.height)});var h=s.length;for(l=0;l<h;l+=3){var d=s[l+0],f=s[l+1];s.push(s[l+2]+c),s.push(f+c),s.push(d+c)}this.addSide(i,r,o,s,a,this._outlinepoints,e,!1),this._holes.forEach(function(n){t.addSide(i,r,o,s,a,n,e,!0)})}return n.indices=s,n.positions=i,n.normals=r,n.uvs=o,n},e.prototype.addSide=function(e,t,n,r,i,a,s,u){for(var l=e.length/3,c=0,h=0;h<a.elements.length;h++){var d,f=a.elements[h];d=h+1>a.elements.length-1?a.elements[0]:a.elements[h+1],e.push(f.x,0,f.y),e.push(f.x,-s,f.y),e.push(d.x,0,d.y),e.push(d.x,-s,d.y);var p=new o.x(f.x,0,f.y),_=new o.x(d.x,0,d.y).subtract(p),m=new o.x(0,1,0),g=o.x.Cross(_,m);g=g.normalize(),n.push(c/i.width,0),n.push(c/i.width,1),c+=_.length(),n.push(c/i.width,0),n.push(c/i.width,1),u?(t.push(g.x,g.y,g.z),t.push(g.x,g.y,g.z),t.push(g.x,g.y,g.z),t.push(g.x,g.y,g.z),r.push(l),r.push(l+2),r.push(l+1),r.push(l+1),r.push(l+2),r.push(l+3)):(t.push(-g.x,-g.y,-g.z),t.push(-g.x,-g.y,-g.z),t.push(-g.x,-g.y,-g.z),t.push(-g.x,-g.y,-g.z),r.push(l),r.push(l+1),r.push(l+2),r.push(l+1),r.push(l+3),r.push(l+2)),l+=4}},e}();xn.a.CreatePolygon=function(e,t,n,r,i,a){for(var s=n||new Array(3),u=r,l=[],c=0;c<3;c++)void 0===s[c]&&(s[c]=new o.y(0,0,1,1)),u&&void 0===u[c]&&(u[c]=new o.f(1,1,1,1));for(var h=e.getVerticesData(Mn.b.PositionKind),d=e.getVerticesData(Mn.b.NormalKind),f=e.getVerticesData(Mn.b.UVKind),p=e.getIndices(),_=0,m=0,g=0;g<d.length;g+=3)Math.abs(d[g+1])<.001&&(m=1),Math.abs(d[g+1]-1)<.001&&(m=0),Math.abs(d[g+1]+1)<.001&&(m=2),f[2*(_=g/3)]=(1-f[2*_])*s[m].x+f[2*_]*s[m].z,f[2*_+1]=(1-f[2*_+1])*s[m].y+f[2*_+1]*s[m].w,u&&l.push(u[m].r,u[m].g,u[m].b,u[m].a);xn.a._ComputeSides(t,h,p,d,f,i,a);var v=new xn.a;if(v.indices=p,v.positions=h,v.normals=d,v.uvs=f,u){var y=t===xn.a.DOUBLESIDE?l.concat(l):l;v.colors=y}return v},fe.a.CreatePolygon=function(e,t,n,r,i,o,a){return void 0===a&&(a=earcut),$o.CreatePolygon(e,{shape:t,holes:r,updatable:i,sideOrientation:o},n,a)},fe.a.ExtrudePolygon=function(e,t,n,r,i,o,a,s){return void 0===s&&(s=earcut),$o.ExtrudePolygon(e,{shape:t,holes:i,depth:n,updatable:o,sideOrientation:a},r,s)};var $o=function(){function e(){}return e.CreatePolygon=function(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r=earcut),t.sideOrientation=fe.a._GetDefaultSideOrientation(t.sideOrientation);for(var i=t.shape,a=t.holes||[],s=t.depth||0,u=[],l=[],c=0;c<i.length;c++)u[c]=new o.w(i[c].x,i[c].z);u[0].equalsWithEpsilon(u[u.length-1],1e-8)&&u.pop();for(var h=new Jo(e,u,n||S.a.LastCreatedScene,r),d=0;d<a.length;d++){l=[];for(var f=0;f<a[d].length;f++)l.push(new o.w(a[d][f].x,a[d][f].z));h.addHole(l)}var p=h.build(t.updatable,s);return p._originalBuilderSideOrientation=t.sideOrientation,xn.a.CreatePolygon(p,t.sideOrientation,t.faceUV,t.faceColors,t.frontUVs,t.backUVs).applyToMesh(p,t.updatable),p},e.ExtrudePolygon=function(t,n,r,i){return void 0===r&&(r=null),void 0===i&&(i=earcut),e.CreatePolygon(t,n,r,i)},e}();fe.a.CreateLathe=function(e,t,n,r,i,o,a){return ea.CreateLathe(e,{shape:t,radius:n,tessellation:r,sideOrientation:a,updatable:o},i)};var ea=function(){function e(){}return e.CreateLathe=function(e,t,n){void 0===n&&(n=null);var r,i=t.arc?t.arc<=0||t.arc>1?1:t.arc:1,a=void 0===t.closed||t.closed,s=t.shape,u=t.radius||1,l=t.tessellation||64,c=t.clip||0,h=t.updatable,d=fe.a._GetDefaultSideOrientation(t.sideOrientation),f=t.cap||fe.a.NO_CAP,p=2*Math.PI,_=new Array,m=t.invertUV||!1,g=0,v=0,y=p/l*i,b=new Array;for(g=0;g<=l-c;g++){for(b=[],f!=fe.a.CAP_START&&f!=fe.a.CAP_ALL||(b.push(new o.x(0,s[0].y,0)),b.push(new o.x(Math.cos(g*y)*s[0].x*u,s[0].y,Math.sin(g*y)*s[0].x*u))),v=0;v<s.length;v++)r=new o.x(Math.cos(g*y)*s[v].x*u,s[v].y,Math.sin(g*y)*s[v].x*u),b.push(r);f!=fe.a.CAP_END&&f!=fe.a.CAP_ALL||(b.push(new o.x(Math.cos(g*y)*s[s.length-1].x*u,s[s.length-1].y,Math.sin(g*y)*s[s.length-1].x*u)),b.push(new o.x(0,s[s.length-1].y,0))),_.push(b)}return to.CreateRibbon(e,{pathArray:_,closeArray:a,sideOrientation:d,updatable:h,invertUV:m,frontUVs:t.frontUVs,backUVs:t.backUVs},n)},e}();fe.a.CreateTube=function(e,t,n,r,i,o,a,s,u,l){return ta.CreateTube(e,{path:t,radius:n,tessellation:r,radiusFunction:i,arc:1,cap:o,updatable:s,sideOrientation:u,instance:l},a)};var ta=function(){function e(){}return e.CreateTube=function(e,t,n){void 0===n&&(n=null);var r=t.path,i=t.instance,a=1;void 0!==t.radius?a=t.radius:i&&(a=i._creationDataStorage.radius);var s=t.tessellation||64,u=t.radiusFunction||null,l=t.cap||fe.a.NO_CAP,c=t.invertUV||!1,h=t.updatable,d=fe.a._GetDefaultSideOrientation(t.sideOrientation);t.arc=t.arc&&(t.arc<=0||t.arc>1)?1:t.arc||1;var f,p,_=function(e,t,n,r,i,a,s,u){for(var l,c,h,d,f=t.getTangents(),p=t.getNormals(),_=t.getDistances(),m=2*Math.PI/i*u,g=a||function(){return r},v=o.t.Matrix[0],y=s===fe.a.NO_CAP||s===fe.a.CAP_END?0:2,b=0;b<e.length;b++){c=g(b,_[b]),l=Array(),h=p[b];for(var T=0;T<i;T++)o.j.RotationAxisToRef(f[b],m*T,v),d=l[T]?l[T]:o.x.Zero(),o.x.TransformCoordinatesToRef(h,v,d),d.scaleInPlace(c).addInPlace(e[b]),l[T]=d;n[y]=l,y++}var E=function(t,n){for(var r=Array(),i=0;i<t;i++)r.push(e[n]);return r};switch(s){case fe.a.NO_CAP:break;case fe.a.CAP_START:n[0]=E(i,0),n[1]=n[2].slice(0);break;case fe.a.CAP_END:n[y]=n[y-1].slice(0),n[y+1]=E(i,e.length-1);break;case fe.a.CAP_ALL:n[0]=E(i,0),n[1]=n[2].slice(0),n[y]=n[y-1].slice(0),n[y+1]=E(i,e.length-1)}return n};if(i){var m=i._creationDataStorage,g=t.arc||m.arc;return p=_(r,f=m.path3D.update(r),m.pathArray,a,m.tessellation,u,m.cap,g),i=to.CreateRibbon("",{pathArray:p,instance:i}),m.path3D=f,m.pathArray=p,m.arc=g,m.radius=a,i}p=_(r,f=new o.m(r),new Array,a,s,u,l=l<0||l>3?0:l,t.arc);var v=to.CreateRibbon(e,{pathArray:p,closePath:!0,closeArray:!1,updatable:h,sideOrientation:d,invertUV:c,frontUVs:t.frontUVs,backUVs:t.backUVs},n);return v._creationDataStorage.pathArray=p,v._creationDataStorage.path3D=f,v._creationDataStorage.tessellation=s,v._creationDataStorage.cap=l,v._creationDataStorage.arc=t.arc,v._creationDataStorage.radius=a,v},e}();xn.a.CreateIcoSphere=function(e){var t,n=e.sideOrientation||xn.a.DEFAULTSIDE,r=e.radius||1,i=void 0===e.flat||e.flat,a=e.subdivisions||4,s=e.radiusX||r,u=e.radiusY||r,l=e.radiusZ||r,c=(1+Math.sqrt(5))/2,h=[-1,c,-0,1,c,0,-1,-c,0,1,-c,0,0,-1,-c,0,1,-c,0,-1,c,0,1,c,c,0,1,c,0,-1,-c,0,1,-c,0,-1],d=[0,11,5,0,5,1,0,1,7,0,7,10,12,22,23,1,5,20,5,11,4,23,22,13,22,18,6,7,1,8,14,21,4,14,4,2,16,13,6,15,6,19,3,8,9,4,21,5,13,17,23,6,13,22,19,6,18,9,8,1],f=[0,1,2,3,4,5,6,7,8,9,10,11,0,2,3,3,3,4,7,8,9,9,10,11],p=[5,1,3,1,6,4,0,0,5,3,4,2,2,2,4,0,2,0,1,1,6,0,6,2,0,4,3,3,4,4,3,1,4,2,4,4,0,2,1,1,2,2,3,3,1,3,2,4],_=[0,0,0,0,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,0],m=new Array,g=new Array,v=new Array,y=new Array,b=0,T=new Array(3),E=new Array(3);for(t=0;t<3;t++)T[t]=o.x.Zero(),E[t]=o.w.Zero();for(var x=0;x<20;x++){for(t=0;t<3;t++){var M=d[3*x+t];T[t].copyFromFloats(h[3*f[M]],h[3*f[M]+1],h[3*f[M]+2]),T[t].normalize().scaleInPlace(r),E[t].copyFromFloats(p[2*M]*(138/1024)+60/1024+_[x]*(-40/1024),p[2*M+1]*(239/1024)+26/1024+_[x]*(20/1024))}for(var A=function(e,t,n,r){var c,h=o.x.Lerp(T[0],T[2],t/a),d=o.x.Lerp(T[1],T[2],t/a),f=a===t?T[2]:o.x.Lerp(h,d,e/(a-t));if(f.normalize(),i){var p=o.x.Lerp(T[0],T[2],r/a),_=o.x.Lerp(T[1],T[2],r/a);c=o.x.Lerp(p,_,n/(a-r))}else c=new o.x(f.x,f.y,f.z);c.x/=s,c.y/=u,c.z/=l,c.normalize();var x=o.w.Lerp(E[0],E[2],t/a),M=o.w.Lerp(E[1],E[2],t/a),A=a===t?E[2]:o.w.Lerp(x,M,e/(a-t));g.push(f.x*s,f.y*u,f.z*l),v.push(c.x,c.y,c.z),y.push(A.x,A.y),m.push(b),b++},S=0;S<a;S++)for(var C=0;C+S<a;C++)A(C,S,C+1/3,S+1/3),A(C+1,S,C+1/3,S+1/3),A(C,S+1,C+1/3,S+1/3),C+S+1<a&&(A(C+1,S,C+2/3,S+2/3),A(C+1,S+1,C+2/3,S+2/3),A(C,S+1,C+2/3,S+2/3))}xn.a._ComputeSides(n,g,m,v,y,e.frontUVs,e.backUVs);var P=new xn.a;return P.indices=m,P.positions=g,P.normals=v,P.uvs=y,P},fe.a.CreateIcoSphere=function(e,t,n){return na.CreateIcoSphere(e,t,n)};var na=function(){function e(){}return e.CreateIcoSphere=function(e,t,n){void 0===n&&(n=null);var r=new fe.a(e,n);return t.sideOrientation=fe.a._GetDefaultSideOrientation(t.sideOrientation),r._originalBuilderSideOrientation=t.sideOrientation,xn.a.CreateIcoSphere(t).applyToMesh(r,t.updatable),r},e}();fe.a.CreateDecal=function(e,t,n,r,i,o){return ia.CreateDecal(e,t,{position:n,normal:r,size:i,angle:o})};var ra,ia=function(){function e(){}return e.CreateDecal=function(e,t,n){var r=t.getIndices(),i=t.getVerticesData(Mn.b.PositionKind),a=t.getVerticesData(Mn.b.NormalKind),s=n.position||o.x.Zero(),u=n.normal||o.x.Up(),l=n.size||o.x.One(),c=n.angle||0;if(!u){var h=new o.x(0,0,1),d=t.getScene().activeCamera,f=o.x.TransformCoordinates(h,d.getWorldMatrix());u=d.globalPosition.subtract(f)}var p=-Math.atan2(u.z,u.x)-Math.PI/2,_=Math.sqrt(u.x*u.x+u.z*u.z),m=Math.atan2(u.y,_),g=o.j.RotationYawPitchRoll(p,m,c).multiply(o.j.Translation(s.x,s.y,s.z)),v=o.j.Invert(g),y=t.getWorldMatrix().multiply(v),b=new xn.a;b.indices=[],b.positions=[],b.normals=[],b.uvs=[];for(var T=0,E=function(e){var t=new o.p;if(!r||!i||!a)return t;var n=r[e];return t.position=new o.x(i[3*n],i[3*n+1],i[3*n+2]),t.position=o.x.TransformCoordinates(t.position,y),t.normal=new o.x(a[3*n],a[3*n+1],a[3*n+2]),t.normal=o.x.TransformNormal(t.normal,y),t},x=function(e,t){if(0===e.length)return e;for(var n=.5*Math.abs(o.x.Dot(l,t)),r=function(e,r){var i=o.x.GetClipFactor(e.position,r.position,t,n);return new o.p(o.x.Lerp(e.position,r.position,i),o.x.Lerp(e.normal,r.normal,i))},i=new Array,a=0;a<e.length;a+=3){var s,u,c,h=null,d=null,f=null,p=null;switch(((s=o.x.Dot(e[a].position,t)-n>0)?1:0)+((u=o.x.Dot(e[a+1].position,t)-n>0)?1:0)+((c=o.x.Dot(e[a+2].position,t)-n>0)?1:0)){case 0:i.push(e[a]),i.push(e[a+1]),i.push(e[a+2]);break;case 1:if(s&&(d=e[a+2],f=r(e[a],h=e[a+1]),p=r(e[a],d)),u){d=e[a+2],f=r(e[a+1],h=e[a]),p=r(e[a+1],d),i.push(f),i.push(d.clone()),i.push(h.clone()),i.push(d.clone()),i.push(f.clone()),i.push(p);break}c&&(d=e[a+1],f=r(e[a+2],h=e[a]),p=r(e[a+2],d)),h&&d&&f&&p&&(i.push(h.clone()),i.push(d.clone()),i.push(f),i.push(p),i.push(f.clone()),i.push(d.clone()));break;case 2:s||(d=r(h=e[a].clone(),e[a+1]),f=r(h,e[a+2]),i.push(h),i.push(d),i.push(f)),u||(d=r(h=e[a+1].clone(),e[a+2]),f=r(h,e[a]),i.push(h),i.push(d),i.push(f)),c||(d=r(h=e[a+2].clone(),e[a]),f=r(h,e[a+1]),i.push(h),i.push(d),i.push(f))}}return i},M=0;M<r.length;M+=3){var A=new Array;if(A.push(E(M)),A.push(E(M+1)),A.push(E(M+2)),A=x(A,new o.x(1,0,0)),A=x(A,new o.x(-1,0,0)),A=x(A,new o.x(0,1,0)),A=x(A,new o.x(0,-1,0)),A=x(A,new o.x(0,0,1)),0!==(A=x(A,new o.x(0,0,-1))).length)for(var S=0;S<A.length;S++){var C=A[S];b.indices.push(T),C.position.toArray(b.positions,3*T),C.normal.toArray(b.normals,3*T),b.uvs.push(.5+C.position.x/l.x),b.uvs.push(.5+C.position.y/l.y),T++}}var P=new fe.a(e,t.getScene());return b.applyToMesh(P),P.position=s.clone(),P.rotation=new o.x(m,p,c),P},e}(),oa=function(){function e(){}return e.CreateBox=function(e,t,n){return void 0===n&&(n=null),Er.a.CreateBox(e,t,n)},e.CreateSphere=function(e,t,n){return void 0===n&&(n=null),Sr.a.CreateSphere(e,t,n)},e.CreateDisc=function(e,t,n){return void 0===n&&(n=null),Xo.CreateDisc(e,t,n)},e.CreateIcoSphere=function(e,t,n){return void 0===n&&(n=null),na.CreateIcoSphere(e,t,n)},e.CreateRibbon=function(e,t,n){return void 0===n&&(n=null),to.CreateRibbon(e,t,n)},e.CreateCylinder=function(e,t,n){return void 0===n&&(n=null),Rn.a.CreateCylinder(e,t,n)},e.CreateTorus=function(e,t,n){return void 0===n&&(n=null),Pn.CreateTorus(e,t,n)},e.CreateTorusKnot=function(e,t,n){return void 0===n&&(n=null),Ko.CreateTorusKnot(e,t,n)},e.CreateLineSystem=function(e,t,n){return Cr.a.CreateLineSystem(e,t,n)},e.CreateLines=function(e,t,n){return void 0===n&&(n=null),Cr.a.CreateLines(e,t,n)},e.CreateDashedLines=function(e,t,n){return void 0===n&&(n=null),Cr.a.CreateDashedLines(e,t,n)},e.ExtrudeShape=function(e,t,n){return void 0===n&&(n=null),no.ExtrudeShape(e,t,n)},e.ExtrudeShapeCustom=function(e,t,n){return void 0===n&&(n=null),no.ExtrudeShapeCustom(e,t,n)},e.CreateLathe=function(e,t,n){return void 0===n&&(n=null),ea.CreateLathe(e,t,n)},e.CreatePlane=function(e,t,n){return void 0===n&&(n=null),Zr.a.CreatePlane(e,t,n)},e.CreateGround=function(e,t,n){return void 0===n&&(n=null),Sn.CreateGround(e,t,n)},e.CreateTiledGround=function(e,t,n){return void 0===n&&(n=null),Sn.CreateTiledGround(e,t,n)},e.CreateGroundFromHeightMap=function(e,t,n,r){return void 0===r&&(r=null),Sn.CreateGroundFromHeightMap(e,t,n,r)},e.CreatePolygon=function(e,t,n,r){return void 0===n&&(n=null),void 0===r&&(r=earcut),$o.CreatePolygon(e,t,n,r)},e.ExtrudePolygon=function(e,t,n,r){return void 0===n&&(n=null),void 0===r&&(r=earcut),$o.ExtrudePolygon(e,t,n,r)},e.CreateTube=function(e,t,n){return void 0===n&&(n=null),ta.CreateTube(e,t,n)},e.CreatePolyhedron=function(e,t,n){return void 0===n&&(n=null),wr.CreatePolyhedron(e,t,n)},e.CreateDecal=function(e,t,n){return ia.CreateDecal(e,t,n)},e}(),aa=function(e,t,n){this.quality=e,this.distance=t,this.optimizeMesh=n},sa=function(){function e(){this.running=!1,this._simplificationArray=[]}return e.prototype.addTask=function(e){this._simplificationArray.push(e)},e.prototype.executeNext=function(){var e=this._simplificationArray.pop();e?(this.running=!0,this.runSimplification(e)):this.running=!1},e.prototype.runSimplification=function(e){var t=this;if(e.parallelProcessing)e.settings.forEach(function(n){t.getSimplifier(e).simplify(n,function(r){e.mesh.addLODLevel(n.distance,r),r.isVisible=!0,n.quality===e.settings[e.settings.length-1].quality&&e.successCallback&&e.successCallback(),t.executeNext()})});else{var n=this.getSimplifier(e);ye.a.Run(e.settings.length,function(t){var r,i;i=function(){t.executeNext()},n.simplify(r=e.settings[t.index],function(t){e.mesh.addLODLevel(r.distance,t),t.isVisible=!0,i()})},function(){e.successCallback&&e.successCallback(),t.executeNext()})}},e.prototype.getSimplifier=function(e){switch(e.simplificationType){case ra.QUADRATIC:default:return new da(e.mesh)}},e}();!function(e){e[e.QUADRATIC=0]="QUADRATIC"}(ra||(ra={}));var ua=function(e){this.vertices=e,this.error=new Array(4),this.deleted=!1,this.isDirty=!1,this.deletePending=!1,this.borderFactor=0},la=function(){function e(e,t){this.position=e,this.id=t,this.isBorder=!0,this.q=new ca,this.triangleCount=0,this.triangleStart=0,this.originalOffsets=[]}return e.prototype.updatePosition=function(e){this.position.copyFrom(e)},e}(),ca=function(){function e(e){this.data=new Array(10);for(var t=0;t<10;++t)this.data[t]=e&&e[t]?e[t]:0}return e.prototype.det=function(e,t,n,r,i,o,a,s,u){return this.data[e]*this.data[i]*this.data[u]+this.data[n]*this.data[r]*this.data[s]+this.data[t]*this.data[o]*this.data[a]-this.data[n]*this.data[i]*this.data[a]-this.data[e]*this.data[o]*this.data[s]-this.data[t]*this.data[r]*this.data[u]},e.prototype.addInPlace=function(e){for(var t=0;t<10;++t)this.data[t]+=e.data[t]},e.prototype.addArrayInPlace=function(e){for(var t=0;t<10;++t)this.data[t]+=e[t]},e.prototype.add=function(t){for(var n=new e,r=0;r<10;++r)n.data[r]=this.data[r]+t.data[r];return n},e.FromData=function(t,n,r,i){return new e(e.DataFromNumbers(t,n,r,i))},e.DataFromNumbers=function(e,t,n,r){return[e*e,e*t,e*n,e*r,t*t,t*n,t*r,n*n,n*r,r*r]},e}(),ha=function(e,t){this.vertexId=e,this.triangleId=t},da=function(){function e(e){this._mesh=e,this.syncIterations=5e3,this.aggressiveness=7,this.decimationIterations=100,this.boundingBoxEpsilon=o.h}return e.prototype.simplify=function(e,t){var n=this;this.initDecimatedMesh(),ye.a.Run(this._mesh.subMeshes.length,function(t){n.initWithMesh(t.index,function(){n.runDecimation(e,t.index,function(){t.executeNext()})},e.optimizeMesh)},function(){setTimeout(function(){t(n._reconstructedMesh)},0)})},e.prototype.runDecimation=function(e,t,n){var r=this,i=~~(this.triangles.length*e.quality),a=0,s=this.triangles.length;ye.a.Run(this.decimationIterations,function(e){var t,n;s-a<=i?e.breakLoop():(t=e.index,n=function(){e.executeNext()},setTimeout(function(){t%5==0&&r.updateMesh(0===t);for(var e=0;e<r.triangles.length;++e)r.triangles[e].isDirty=!1;var u=1e-9*Math.pow(t+3,r.aggressiveness);ye.a.SyncAsyncForLoop(r.triangles.length,r.syncIterations,function(e){var t=r.triangles[~~((r.triangles.length/2+e)%r.triangles.length)];if(t&&!(t.error[3]>u||t.deleted||t.isDirty))for(var n=0;n<3;++n)if(t.error[n]<u){var i=[],s=[],l=t.vertices[n],c=t.vertices[(n+1)%3];if(l.isBorder||c.isBorder)continue;var h=o.x.Zero();r.calculateError(l,c,h);var d=new Array;if(r.isFlipped(l,c,h,i,d))continue;if(r.isFlipped(c,l,h,s,d))continue;if(i.indexOf(!0)<0||s.indexOf(!0)<0)continue;var f=new Array;if(d.forEach(function(e){-1===f.indexOf(e)&&(e.deletePending=!0,f.push(e))}),f.length%2!=0)continue;l.q=c.q.add(l.q),l.updatePosition(h);var p=r.references.length;a=r.updateTriangles(l,l,i,a),a=r.updateTriangles(l,c,s,a);var _=r.references.length-p;if(_<=l.triangleCount){if(_)for(var m=0;m<_;m++)r.references[l.triangleStart+m]=r.references[p+m]}else l.triangleStart=p;l.triangleCount=_;break}},n,function(){return s-a<=i})},0))},function(){setTimeout(function(){r.reconstructMesh(t),n()},0)})},e.prototype.initWithMesh=function(e,t,n){var r=this;this.vertices=[],this.triangles=[];var i=this._mesh.getVerticesData(Mn.b.PositionKind),a=this._mesh.getIndices(),s=this._mesh.subMeshes[e],u=[];ye.a.SyncAsyncForLoop(s.verticesCount,this.syncIterations/4>>0,function(e){if(i){var t=e+s.verticesStart,a=o.x.FromArray(i,3*t),l=function(e){if(n)for(var t=0;t<r.vertices.length;++t)if(r.vertices[t].position.equals(e))return r.vertices[t];return null}(a)||new la(a,r.vertices.length);l.originalOffsets.push(t),l.id===r.vertices.length&&r.vertices.push(l),u.push(l.id)}},function(){ye.a.SyncAsyncForLoop(s.indexCount/3,r.syncIterations,function(e){if(a){var t=3*(s.indexStart/3+e),n=new ua([r.vertices[u[a[t+0]-s.verticesStart]],r.vertices[u[a[t+1]-s.verticesStart]],r.vertices[u[a[t+2]-s.verticesStart]]]);n.originalOffset=t,r.triangles.push(n)}},function(){r.init(t)})})},e.prototype.init=function(e){var t=this;ye.a.SyncAsyncForLoop(this.triangles.length,this.syncIterations,function(e){var n=t.triangles[e];n.normal=o.x.Cross(n.vertices[1].position.subtract(n.vertices[0].position),n.vertices[2].position.subtract(n.vertices[0].position)).normalize();for(var r=0;r<3;r++)n.vertices[r].q.addArrayInPlace(ca.DataFromNumbers(n.normal.x,n.normal.y,n.normal.z,-o.x.Dot(n.normal,n.vertices[0].position)))},function(){ye.a.SyncAsyncForLoop(t.triangles.length,t.syncIterations,function(e){for(var n=t.triangles[e],r=0;r<3;++r)n.error[r]=t.calculateError(n.vertices[r],n.vertices[(r+1)%3]);n.error[3]=Math.min(n.error[0],n.error[1],n.error[2])},function(){e()})})},e.prototype.reconstructMesh=function(e){var t,n,r,i=[];for(t=0;t<this.vertices.length;++t)this.vertices[t].triangleCount=0;for(t=0;t<this.triangles.length;++t)if(!this.triangles[t].deleted){for(n=this.triangles[t],r=0;r<3;++r)n.vertices[r].triangleCount=1;i.push(n)}var o=this._reconstructedMesh.getVerticesData(Mn.b.PositionKind)||[],a=this._reconstructedMesh.getVerticesData(Mn.b.NormalKind)||[],s=this._reconstructedMesh.getVerticesData(Mn.b.UVKind)||[],u=this._reconstructedMesh.getVerticesData(Mn.b.ColorKind)||[],l=this._mesh.getVerticesData(Mn.b.NormalKind),c=this._mesh.getVerticesData(Mn.b.UVKind),h=this._mesh.getVerticesData(Mn.b.ColorKind),d=0;for(t=0;t<this.vertices.length;++t){var f=this.vertices[t];f.id=d,f.triangleCount&&f.originalOffsets.forEach(function(e){l&&(o.push(f.position.x),o.push(f.position.y),o.push(f.position.z),a.push(l[3*e]),a.push(l[3*e+1]),a.push(l[3*e+2]),c&&c.length&&(s.push(c[2*e]),s.push(c[2*e+1])),h&&h.length&&(u.push(h[4*e]),u.push(h[4*e+1]),u.push(h[4*e+2]),u.push(h[4*e+3])),++d)})}var p=this._reconstructedMesh.getTotalIndices(),_=this._reconstructedMesh.getTotalVertices(),m=this._reconstructedMesh.subMeshes;this._reconstructedMesh.subMeshes=[];var g=this._reconstructedMesh.getIndices(),v=this._mesh.getIndices();for(t=0;t<i.length;++t)n=i[t],[0,1,2].forEach(function(e){var t=n.vertices[e].originalOffsets.indexOf(v[n.originalOffset+e]);t<0&&(t=0),g.push(n.vertices[e].id+t+_)});this._reconstructedMesh.setIndices(g),this._reconstructedMesh.setVerticesData(Mn.b.PositionKind,o),this._reconstructedMesh.setVerticesData(Mn.b.NormalKind,a),s.length>0&&this._reconstructedMesh.setVerticesData(Mn.b.UVKind,s),u.length>0&&this._reconstructedMesh.setVerticesData(Mn.b.ColorKind,u);var y=this._mesh.subMeshes[e];e>0&&(this._reconstructedMesh.subMeshes=[],m.forEach(function(e){Bo.b.AddToMesh(e.materialIndex,e.verticesStart,e.verticesCount,e.indexStart,e.indexCount,e.getMesh())}),Bo.b.AddToMesh(y.materialIndex,_,d,p,3*i.length,this._reconstructedMesh))},e.prototype.initDecimatedMesh=function(){this._reconstructedMesh=new fe.a(this._mesh.name+"Decimated",this._mesh.getScene()),this._reconstructedMesh.material=this._mesh.material,this._reconstructedMesh.parent=this._mesh.parent,this._reconstructedMesh.isVisible=!1,this._reconstructedMesh.renderingGroupId=this._mesh.renderingGroupId},e.prototype.isFlipped=function(e,t,n,r,i){for(var a=0;a<e.triangleCount;++a){var s=this.triangles[this.references[e.triangleStart+a].triangleId];if(!s.deleted){var u=this.references[e.triangleStart+a].vertexId,l=s.vertices[(u+1)%3],c=s.vertices[(u+2)%3];if(l!==t&&c!==t){var h=l.position.subtract(n);h=h.normalize();var d=c.position.subtract(n);if(d=d.normalize(),Math.abs(o.x.Dot(h,d))>.999)return!0;var f=o.x.Cross(h,d).normalize();if(r[a]=!1,o.x.Dot(f,s.normal)<.2)return!0}else r[a]=!0,i.push(s)}}return!1},e.prototype.updateTriangles=function(e,t,n,r){for(var i=r,o=0;o<t.triangleCount;++o){var a=this.references[t.triangleStart+o],s=this.triangles[a.triangleId];s.deleted||(n[o]&&s.deletePending?(s.deleted=!0,i++):(s.vertices[a.vertexId]=e,s.isDirty=!0,s.error[0]=this.calculateError(s.vertices[0],s.vertices[1])+s.borderFactor/2,s.error[1]=this.calculateError(s.vertices[1],s.vertices[2])+s.borderFactor/2,s.error[2]=this.calculateError(s.vertices[2],s.vertices[0])+s.borderFactor/2,s.error[3]=Math.min(s.error[0],s.error[1],s.error[2]),this.references.push(a)))}return i},e.prototype.identifyBorder=function(){for(var e=0;e<this.vertices.length;++e){var t,n=[],r=[],i=this.vertices[e];for(t=0;t<i.triangleCount;++t)for(var o=this.triangles[this.references[i.triangleStart+t].triangleId],a=0;a<3;a++){for(var s=0,u=o.vertices[a];s<n.length&&r[s]!==u.id;)++s;s===n.length?(n.push(1),r.push(u.id)):n[s]++}for(t=0;t<n.length;++t)this.vertices[r[t]].isBorder=1===n[t]}},e.prototype.updateMesh=function(e){var t,n,r,i;if(void 0===e&&(e=!1),!e){var o=[];for(t=0;t<this.triangles.length;++t)this.triangles[t].deleted||o.push(this.triangles[t]);this.triangles=o}for(t=0;t<this.vertices.length;++t)this.vertices[t].triangleCount=0,this.vertices[t].triangleStart=0;for(t=0;t<this.triangles.length;++t)for(n=this.triangles[t],r=0;r<3;++r)(i=n.vertices[r]).triangleCount++;var a=0;for(t=0;t<this.vertices.length;++t)this.vertices[t].triangleStart=a,a+=this.vertices[t].triangleCount,this.vertices[t].triangleCount=0;var s=new Array(3*this.triangles.length);for(t=0;t<this.triangles.length;++t)for(n=this.triangles[t],r=0;r<3;++r)s[(i=n.vertices[r]).triangleStart+i.triangleCount]=new ha(r,t),i.triangleCount++;this.references=s,e&&this.identifyBorder()},e.prototype.vertexError=function(e,t){var n=t.x,r=t.y,i=t.z;return e.data[0]*n*n+2*e.data[1]*n*r+2*e.data[2]*n*i+2*e.data[3]*n+e.data[4]*r*r+2*e.data[5]*r*i+2*e.data[6]*r+e.data[7]*i*i+2*e.data[8]*i+e.data[9]},e.prototype.calculateError=function(e,t,n){var r=e.q.add(t.q),i=e.isBorder&&t.isBorder,a=0,s=r.det(0,1,2,1,4,5,2,5,7);if(0===s||i){var u=e.position.add(t.position).divide(new o.x(2,2,2)),l=this.vertexError(r,e.position),c=this.vertexError(r,t.position),h=this.vertexError(r,u);(a=Math.min(l,c,h))===l?n&&n.copyFrom(e.position):a===c?n&&n.copyFrom(t.position):n&&n.copyFrom(u)}else n||(n=o.x.Zero()),n.x=-1/s*r.det(1,2,3,4,5,6,5,7,8),n.y=1/s*r.det(0,2,3,1,5,6,2,7,8),n.z=-1/s*r.det(0,1,3,1,4,6,2,5,8),a=this.vertexError(r,n);return a},e}();Object.defineProperty(H.a.prototype,"simplificationQueue",{get:function(){if(!this._simplificationQueue){this._simplificationQueue=new sa;var e=this._getComponent(xe.a.NAME_SIMPLIFICATIONQUEUE);e||(e=new fa(this),this._addComponent(e))}return this._simplificationQueue},set:function(e){this._simplificationQueue=e},enumerable:!0,configurable:!0}),fe.a.prototype.simplify=function(e,t,n,r){return void 0===t&&(t=!0),void 0===n&&(n=ra.QUADRATIC),this.getScene().simplificationQueue.addTask({settings:e,parallelProcessing:t,mesh:this,simplificationType:n,successCallback:r}),this};var fa=function(){function e(e){this.name=xe.a.NAME_SIMPLIFICATIONQUEUE,this.scene=e}return e.prototype.register=function(){this.scene._beforeCameraUpdateStage.registerStep(xe.a.STEP_BEFORECAMERAUPDATE_SIMPLIFICATIONQUEUE,this,this._beforeCameraUpdate)},e.prototype.rebuild=function(){},e.prototype.dispose=function(){},e.prototype._beforeCameraUpdate=function(){this.scene._simplificationQueue&&!this.scene._simplificationQueue.running&&this.scene._simplificationQueue.executeNext()},e}(),pa=n(110),_a=n(78),ma=n(73);me.b.OfflineProviderFactory=function(e,t,n){return void 0===n&&(n=!1),new va(e,t,n)};var ga,va=function(){function e(t,n,r){var i=this;void 0===r&&(r=!1),this._idbFactory=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,this._callbackManifestChecked=n,this._currentSceneUrl=e._ReturnFullUrlLocation(t),this._db=null,this._enableSceneOffline=!1,this._enableTexturesOffline=!1,this._manifestVersionFound=0,this._mustUpdateRessources=!1,this._hasReachedQuota=!1,e.IDBStorageEnabled?r?(this._enableSceneOffline=!0,this._enableTexturesOffline=!0,this._manifestVersionFound=1,ye.h.SetImmediate(function(){i._callbackManifestChecked(!0)})):this._checkManifestFile():this._callbackManifestChecked(!0)}return Object.defineProperty(e.prototype,"enableSceneOffline",{get:function(){return this._enableSceneOffline},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enableTexturesOffline",{get:function(){return this._enableTexturesOffline},enumerable:!0,configurable:!0}),e.prototype._checkManifestFile=function(){var t=this,n=function(){t._enableSceneOffline=!1,t._enableTexturesOffline=!1,t._callbackManifestChecked(!1)},r=!1,i=this._currentSceneUrl+".manifest",o=new Mo.a;navigator.onLine&&(r=!0,i=i+(null==i.match(/\?/)?"?":"&")+Date.now()),o.open("GET",i),o.addEventListener("load",function(){if(200===o.status||e._ValidateXHRData(o,1))try{var r=JSON.parse(o.response);t._enableSceneOffline=r.enableSceneOffline,t._enableTexturesOffline=r.enableTexturesOffline&&e.IsUASupportingBlobStorage,r.version&&!isNaN(parseInt(r.version))&&(t._manifestVersionFound=r.version),t._callbackManifestChecked&&t._callbackManifestChecked(!0)}catch(e){n()}else n()},!1),o.addEventListener("error",function(){r?(r=!1,o.open("GET",t._currentSceneUrl+".manifest"),o.send()):n()},!1);try{o.send()}catch(e){p.a.Error("Error on XHR send request."),this._callbackManifestChecked(!1)}},e.prototype.open=function(e,t){var n=this,r=function(){n._isSupported=!1,t&&t()};if(this._idbFactory&&(this._enableSceneOffline||this._enableTexturesOffline))if(this._db)e&&e();else{this._hasReachedQuota=!1,this._isSupported=!0;var i=this._idbFactory.open("babylonjs",1);i.onerror=function(){r()},i.onblocked=function(){p.a.Error("IDB request blocked. Please reload the page."),r()},i.onsuccess=function(){n._db=i.result,e()},i.onupgradeneeded=function(e){if(n._db=e.target.result,n._db)try{n._db.createObjectStore("scenes",{keyPath:"sceneUrl"}),n._db.createObjectStore("versions",{keyPath:"sceneUrl"}),n._db.createObjectStore("textures",{keyPath:"textureUrl"})}catch(e){p.a.Error("Error while creating object stores. Exception: "+e.message),r()}}}else this._isSupported=!1,t&&t()},e.prototype.loadImage=function(t,n){var r=this,i=e._ReturnFullUrlLocation(t),o=function(){r._hasReachedQuota||null===r._db?n.src=t:r._saveImageIntoDBAsync(i,n)};this._mustUpdateRessources?o():this._loadImageFromDBAsync(i,n,o)},e.prototype._loadImageFromDBAsync=function(e,t,n){if(this._isSupported&&null!==this._db){var r,i=this._db.transaction(["textures"]);i.onabort=function(){t.src=e},i.oncomplete=function(){var i;if(r){var o=window.URL||window.webkitURL;i=o.createObjectURL(r.data),t.onerror=function(){p.a.Error("Error loading image from blob URL: "+i+" switching back to web url: "+e),t.src=e},t.src=i}else n()};var o=i.objectStore("textures").get(e);o.onsuccess=function(e){r=e.target.result},o.onerror=function(){p.a.Error("Error loading texture "+e+" from DB."),t.src=e}}else p.a.Error("Error: IndexedDB not supported by your browser or BabylonJS Database is not open."),t.src=e},e.prototype._saveImageIntoDBAsync=function(t,n){var r=this;if(this._isSupported){var i=function(){var e;if(o){var t=window.URL||window.webkitURL;try{e=t.createObjectURL(o)}catch(n){e=t.createObjectURL(o)}}e&&(n.src=e)};if(e.IsUASupportingBlobStorage){var o,a=new Mo.a;a.open("GET",t),a.responseType="blob",a.addEventListener("load",function(){if(200===a.status&&r._db){o=a.response;var s=r._db.transaction(["textures"],"readwrite");s.onabort=function(e){try{var t=(e.srcElement||e.target).error;t&&"QuotaExceededError"===t.name&&(r._hasReachedQuota=!0)}catch(e){}i()},s.oncomplete=function(){i()};var u={textureUrl:t,data:o};try{var l=s.objectStore("textures").put(u);l.onsuccess=function(){},l.onerror=function(){i()}}catch(i){25===i.code&&(e.IsUASupportingBlobStorage=!1,r._enableTexturesOffline=!1),n.src=t}}else n.src=t},!1),a.addEventListener("error",function(){p.a.Error("Error in XHR request in BABYLON.Database."),n.src=t},!1),a.send()}else n.src=t}else p.a.Error("Error: IndexedDB not supported by your browser or BabylonJS Database is not open."),n.src=t},e.prototype._checkVersionFromDB=function(e,t){var n=this;this._loadVersionFromDBAsync(e,t,function(){n._saveVersionIntoDBAsync(e,t)})},e.prototype._loadVersionFromDBAsync=function(e,t,n){var r,i=this;if(this._isSupported&&this._db)try{var o=this._db.transaction(["versions"]);o.oncomplete=function(){r?i._manifestVersionFound!==r.data?(i._mustUpdateRessources=!0,n()):t(r.data):(i._mustUpdateRessources=!0,n())},o.onabort=function(){t(-1)};var a=o.objectStore("versions").get(e);a.onsuccess=function(e){r=e.target.result},a.onerror=function(){p.a.Error("Error loading version for scene "+e+" from DB."),t(-1)}}catch(e){p.a.Error("Error while accessing 'versions' object store (READ OP). Exception: "+e.message),t(-1)}else p.a.Error("Error: IndexedDB not supported by your browser or BabylonJS Database is not open."),t(-1)},e.prototype._saveVersionIntoDBAsync=function(e,t){var n=this;if(this._isSupported&&!this._hasReachedQuota&&this._db)try{var r=this._db.transaction(["versions"],"readwrite");r.onabort=function(e){try{var r=e.srcElement.error;r&&"QuotaExceededError"===r.name&&(n._hasReachedQuota=!0)}catch(e){}t(-1)},r.oncomplete=function(){t(n._manifestVersionFound)};var i={sceneUrl:e,data:this._manifestVersionFound},o=r.objectStore("versions").put(i);o.onsuccess=function(){},o.onerror=function(){p.a.Error("Error in DB add version request in BABYLON.Database.")}}catch(e){p.a.Error("Error while accessing 'versions' object store (WRITE OP). Exception: "+e.message),t(-1)}else t(-1)},e.prototype.loadFile=function(t,n,r,i,o){var a=this,s=e._ReturnFullUrlLocation(t),u=function(){a._saveFileAsync(s,n,r,o,i)};this._checkVersionFromDB(s,function(e){-1!==e?a._mustUpdateRessources?a._saveFileAsync(s,n,r,o,i):a._loadFileAsync(s,n,u):i&&i()})},e.prototype._loadFileAsync=function(e,t,n){if(this._isSupported&&this._db){var r,i;r=-1!==e.indexOf(".babylon")?"scenes":"textures";var o=this._db.transaction([r]);o.oncomplete=function(){i?t(i.data):n()},o.onabort=function(){n()};var a=o.objectStore(r).get(e);a.onsuccess=function(e){i=e.target.result},a.onerror=function(){p.a.Error("Error loading file "+e+" from DB."),n()}}else p.a.Error("Error: IndexedDB not supported by your browser or BabylonJS Database is not open."),t()},e.prototype._saveFileAsync=function(t,n,r,i,o){var a=this;if(this._isSupported){var s;s=-1!==t.indexOf(".babylon")?"scenes":"textures";var u,l=new Mo.a;l.open("GET",t+"?"+Date.now()),i&&(l.responseType="arraybuffer"),r&&(l.onprogress=r),l.addEventListener("load",function(){if(200===l.status||l.status<400&&e._ValidateXHRData(l,i?6:1))if(u=i?l.response:l.responseText,!a._hasReachedQuota&&a._db){var r,c=a._db.transaction([s],"readwrite");c.onabort=function(e){try{var t=e.srcElement.error;t&&"QuotaExceededError"===t.name&&(a._hasReachedQuota=!0)}catch(e){}n(u)},c.oncomplete=function(){n(u)},r="scenes"===s?{sceneUrl:t,data:u,version:a._manifestVersionFound}:{textureUrl:t,data:u};try{var h=c.objectStore(s).put(r);h.onsuccess=function(){},h.onerror=function(){p.a.Error("Error in DB add file request in BABYLON.Database.")}}catch(e){n(u)}}else n(u);else l.status>=400&&o?o(l):n()},!1),l.addEventListener("error",function(){p.a.Error("error on XHR request."),n()},!1),l.send()}else p.a.Error("Error: IndexedDB not supported by your browser or Babylon.js Database is not open."),n()},e._ValidateXHRData=function(e,t){void 0===t&&(t=7);try{if(1&t){if(e.responseText&&e.responseText.length>0)return!0;if(1===t)return!1}if(2&t){var n=yo.GetTGAHeader(e.response);if(n.width&&n.height&&n.width>0&&n.height>0)return!0;if(2===t)return!1}if(4&t){var r=new Uint8Array(e.response,0,3);return 68===r[0]&&68===r[1]&&83===r[2]}}catch(e){}return!1},e.IsUASupportingBlobStorage=!0,e.IDBStorageEnabled=!1,e._ParseURL=function(e){document.createElement("a").href=e;var t=e.substring(0,e.lastIndexOf("#")),n=e.substring(t.lastIndexOf("/")+1,e.length);return e.substring(0,e.indexOf(n,0))},e._ReturnFullUrlLocation=function(t){return-1===t.indexOf("http:/")&&-1===t.indexOf("https:/")?e._ParseURL(window.location.href)+t:t},e}(),ya=function(){function e(){this.direction1=new o.x(0,1,0),this.direction2=new o.x(0,1,0),this.minEmitBox=new o.x(-.5,-.5,-.5),this.maxEmitBox=new o.x(.5,.5,.5)}return e.prototype.startDirectionFunction=function(e,t,n){var r=w.a.RandomRange(this.direction1.x,this.direction2.x),i=w.a.RandomRange(this.direction1.y,this.direction2.y),a=w.a.RandomRange(this.direction1.z,this.direction2.z);o.x.TransformNormalFromFloatsToRef(r,i,a,e,t)},e.prototype.startPositionFunction=function(e,t,n){var r=w.a.RandomRange(this.minEmitBox.x,this.maxEmitBox.x),i=w.a.RandomRange(this.minEmitBox.y,this.maxEmitBox.y),a=w.a.RandomRange(this.minEmitBox.z,this.maxEmitBox.z);o.x.TransformCoordinatesFromFloatsToRef(r,i,a,e,t)},e.prototype.clone=function(){var t=new e;return C.a.DeepCopy(this,t),t},e.prototype.applyToShader=function(e){e.setVector3("direction1",this.direction1),e.setVector3("direction2",this.direction2),e.setVector3("minEmitBox",this.minEmitBox),e.setVector3("maxEmitBox",this.maxEmitBox)},e.prototype.getEffectDefines=function(){return"#define BOXEMITTER"},e.prototype.getClassName=function(){return"BoxParticleEmitter"},e.prototype.serialize=function(){var e={};return e.type=this.getClassName(),e.direction1=this.direction1.asArray(),e.direction2=this.direction2.asArray(),e.minEmitBox=this.minEmitBox.asArray(),e.maxEmitBox=this.maxEmitBox.asArray(),e},e.prototype.parse=function(e){o.x.FromArrayToRef(e.direction1,0,this.direction1),o.x.FromArrayToRef(e.direction2,0,this.direction2),o.x.FromArrayToRef(e.minEmitBox,0,this.minEmitBox),o.x.FromArrayToRef(e.maxEmitBox,0,this.maxEmitBox)},e}(),ba=function(){function e(e,t,n){void 0===e&&(e=1),void 0===t&&(t=Math.PI),void 0===n&&(n=0),this.directionRandomizer=n,this.radiusRange=1,this.heightRange=1,this.emitFromSpawnPointOnly=!1,this.angle=t,this.radius=e}return Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e,this._buildHeight()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this._angle},set:function(e){this._angle=e,this._buildHeight()},enumerable:!0,configurable:!0}),e.prototype._buildHeight=function(){this._height=0!==this._angle?this._radius/Math.tan(this._angle/2):1},e.prototype.startDirectionFunction=function(e,t,n){if(1===Math.abs(Math.cos(this._angle)))o.x.TransformNormalFromFloatsToRef(0,1,0,e,t);else{var r=n.position.subtract(e.getTranslation()).normalize(),i=w.a.RandomRange(0,this.directionRandomizer),a=w.a.RandomRange(0,this.directionRandomizer),s=w.a.RandomRange(0,this.directionRandomizer);r.x+=i,r.y+=a,r.z+=s,r.normalize(),o.x.TransformNormalFromFloatsToRef(r.x,r.y,r.z,e,t)}},e.prototype.startPositionFunction=function(e,t,n){var r,i=w.a.RandomRange(0,2*Math.PI);r=this.emitFromSpawnPointOnly?1e-4:1-(r=w.a.RandomRange(0,this.heightRange))*r;var a=this._radius-w.a.RandomRange(0,this._radius*this.radiusRange),s=(a*=r)*Math.sin(i),u=a*Math.cos(i);o.x.TransformCoordinatesFromFloatsToRef(s,r*this._height,u,e,t)},e.prototype.clone=function(){var t=new e(this._radius,this._angle,this.directionRandomizer);return C.a.DeepCopy(this,t),t},e.prototype.applyToShader=function(e){e.setFloat2("radius",this._radius,this.radiusRange),e.setFloat("coneAngle",this._angle),e.setFloat2("height",this._height,this.heightRange),e.setFloat("directionRandomizer",this.directionRandomizer)},e.prototype.getEffectDefines=function(){var e="#define CONEEMITTER";return this.emitFromSpawnPointOnly&&(e+="\n#define CONEEMITTERSPAWNPOINT"),e},e.prototype.getClassName=function(){return"ConeParticleEmitter"},e.prototype.serialize=function(){var e={};return e.type=this.getClassName(),e.radius=this._radius,e.angle=this._angle,e.directionRandomizer=this.directionRandomizer,e},e.prototype.parse=function(e){this.radius=e.radius,this.angle=e.angle,this.directionRandomizer=e.directionRandomizer},e}(),Ta=function(){function e(e,t,n,r){void 0===e&&(e=1),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=0),this.radius=e,this.height=t,this.radiusRange=n,this.directionRandomizer=r}return e.prototype.startDirectionFunction=function(e,t,n){var r=n.position.subtract(e.getTranslation()).normalize(),i=w.a.RandomRange(-this.directionRandomizer/2,this.directionRandomizer/2),a=Math.atan2(r.x,r.z);a+=w.a.RandomRange(-Math.PI/2,Math.PI/2)*this.directionRandomizer,r.y=i,r.x=Math.sin(a),r.z=Math.cos(a),r.normalize(),o.x.TransformNormalFromFloatsToRef(r.x,r.y,r.z,e,t)},e.prototype.startPositionFunction=function(e,t,n){var r=w.a.RandomRange(-this.height/2,this.height/2),i=w.a.RandomRange(0,2*Math.PI),a=w.a.RandomRange((1-this.radiusRange)*(1-this.radiusRange),1),s=Math.sqrt(a)*this.radius,u=s*Math.cos(i),l=s*Math.sin(i);o.x.TransformCoordinatesFromFloatsToRef(u,r,l,e,t)},e.prototype.clone=function(){var t=new e(this.radius,this.directionRandomizer);return C.a.DeepCopy(this,t),t},e.prototype.applyToShader=function(e){e.setFloat("radius",this.radius),e.setFloat("height",this.height),e.setFloat("radiusRange",this.radiusRange),e.setFloat("directionRandomizer",this.directionRandomizer)},e.prototype.getEffectDefines=function(){return"#define CYLINDEREMITTER"},e.prototype.getClassName=function(){return"CylinderParticleEmitter"},e.prototype.serialize=function(){var e={};return e.type=this.getClassName(),e.radius=this.radius,e.height=this.height,e.radiusRange=this.radiusRange,e.directionRandomizer=this.directionRandomizer,e},e.prototype.parse=function(e){this.radius=e.radius,this.height=e.height,this.radiusRange=e.radiusRange,this.directionRandomizer=e.directionRandomizer},e}(),Ea=function(e){function t(t,n,r,i,a){void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=new o.x(0,1,0)),void 0===a&&(a=new o.x(0,1,0));var s=e.call(this,t,n,r)||this;return s.direction1=i,s.direction2=a,s}return l.d(t,e),t.prototype.startDirectionFunction=function(e,t,n){var r=w.a.RandomRange(this.direction1.x,this.direction2.x),i=w.a.RandomRange(this.direction1.y,this.direction2.y),a=w.a.RandomRange(this.direction1.z,this.direction2.z);o.x.TransformNormalFromFloatsToRef(r,i,a,e,t)},t.prototype.clone=function(){var e=new t(this.radius,this.height,this.radiusRange,this.direction1,this.direction2);return C.a.DeepCopy(this,e),e},t.prototype.applyToShader=function(e){e.setFloat("radius",this.radius),e.setFloat("height",this.height),e.setFloat("radiusRange",this.radiusRange),e.setVector3("direction1",this.direction1),e.setVector3("direction2",this.direction2)},t.prototype.getEffectDefines=function(){return"#define CYLINDEREMITTER\n#define DIRECTEDCYLINDEREMITTER"},t.prototype.getClassName=function(){return"CylinderDirectedParticleEmitter"},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.direction1=this.direction1.asArray(),t.direction2=this.direction2.asArray(),t},t.prototype.parse=function(t){e.prototype.parse.call(this,t),this.direction1.copyFrom(t.direction1),this.direction2.copyFrom(t.direction2)},t}(Ta),xa=function(){function e(e,t,n){void 0===e&&(e=1),void 0===t&&(t=1),void 0===n&&(n=0),this.radius=e,this.radiusRange=t,this.directionRandomizer=n}return e.prototype.startDirectionFunction=function(e,t,n){var r=n.position.subtract(e.getTranslation()).normalize(),i=w.a.RandomRange(0,this.directionRandomizer),a=w.a.RandomRange(0,this.directionRandomizer),s=w.a.RandomRange(0,this.directionRandomizer);r.x+=i,r.y+=a,r.z+=s,r.normalize(),o.x.TransformNormalFromFloatsToRef(r.x,r.y,r.z,e,t)},e.prototype.startPositionFunction=function(e,t,n){var r=this.radius-w.a.RandomRange(0,this.radius*this.radiusRange),i=w.a.RandomRange(0,1),a=w.a.RandomRange(0,2*Math.PI),s=Math.acos(2*i-1),u=r*Math.cos(a)*Math.sin(s),l=r*Math.cos(s),c=r*Math.sin(a)*Math.sin(s);o.x.TransformCoordinatesFromFloatsToRef(u,Math.abs(l),c,e,t)},e.prototype.clone=function(){var t=new e(this.radius,this.directionRandomizer);return C.a.DeepCopy(this,t),t},e.prototype.applyToShader=function(e){e.setFloat("radius",this.radius),e.setFloat("radiusRange",this.radiusRange),e.setFloat("directionRandomizer",this.directionRandomizer)},e.prototype.getEffectDefines=function(){return"#define HEMISPHERICEMITTER"},e.prototype.getClassName=function(){return"HemisphericParticleEmitter"},e.prototype.serialize=function(){var e={};return e.type=this.getClassName(),e.radius=this.radius,e.radiusRange=this.radiusRange,e.directionRandomizer=this.directionRandomizer,e},e.prototype.parse=function(e){this.radius=e.radius,this.radiusRange=e.radiusRange,this.directionRandomizer=e.directionRandomizer},e}(),Ma=function(){function e(){this.direction1=new o.x(0,1,0),this.direction2=new o.x(0,1,0)}return e.prototype.startDirectionFunction=function(e,t,n){var r=w.a.RandomRange(this.direction1.x,this.direction2.x),i=w.a.RandomRange(this.direction1.y,this.direction2.y),a=w.a.RandomRange(this.direction1.z,this.direction2.z);o.x.TransformNormalFromFloatsToRef(r,i,a,e,t)},e.prototype.startPositionFunction=function(e,t,n){o.x.TransformCoordinatesFromFloatsToRef(0,0,0,e,t)},e.prototype.clone=function(){var t=new e;return C.a.DeepCopy(this,t),t},e.prototype.applyToShader=function(e){e.setVector3("direction1",this.direction1),e.setVector3("direction2",this.direction2)},e.prototype.getEffectDefines=function(){return"#define POINTEMITTER"},e.prototype.getClassName=function(){return"PointParticleEmitter"},e.prototype.serialize=function(){var e={};return e.type=this.getClassName(),e.direction1=this.direction1.asArray(),e.direction2=this.direction2.asArray(),e},e.prototype.parse=function(e){o.x.FromArrayToRef(e.direction1,0,this.direction1),o.x.FromArrayToRef(e.direction2,0,this.direction2)},e}(),Aa=function(){function e(e,t,n){void 0===e&&(e=1),void 0===t&&(t=1),void 0===n&&(n=0),this.radius=e,this.radiusRange=t,this.directionRandomizer=n}return e.prototype.startDirectionFunction=function(e,t,n){var r=n.position.subtract(e.getTranslation()).normalize(),i=w.a.RandomRange(0,this.directionRandomizer),a=w.a.RandomRange(0,this.directionRandomizer),s=w.a.RandomRange(0,this.directionRandomizer);r.x+=i,r.y+=a,r.z+=s,r.normalize(),o.x.TransformNormalFromFloatsToRef(r.x,r.y,r.z,e,t)},e.prototype.startPositionFunction=function(e,t,n){var r=this.radius-w.a.RandomRange(0,this.radius*this.radiusRange),i=w.a.RandomRange(0,1),a=w.a.RandomRange(0,2*Math.PI),s=Math.acos(2*i-1),u=r*Math.cos(a)*Math.sin(s),l=r*Math.cos(s),c=r*Math.sin(a)*Math.sin(s);o.x.TransformCoordinatesFromFloatsToRef(u,l,c,e,t)},e.prototype.clone=function(){var t=new e(this.radius,this.directionRandomizer);return C.a.DeepCopy(this,t),t},e.prototype.applyToShader=function(e){e.setFloat("radius",this.radius),e.setFloat("radiusRange",this.radiusRange),e.setFloat("directionRandomizer",this.directionRandomizer)},e.prototype.getEffectDefines=function(){return"#define SPHEREEMITTER"},e.prototype.getClassName=function(){return"SphereParticleEmitter"},e.prototype.serialize=function(){var e={};return e.type=this.getClassName(),e.radius=this.radius,e.radiusRange=this.radiusRange,e.directionRandomizer=this.directionRandomizer,e},e.prototype.parse=function(e){this.radius=e.radius,this.radiusRange=e.radiusRange,this.directionRandomizer=e.directionRandomizer},e}(),Sa=function(e){function t(t,n,r){void 0===t&&(t=1),void 0===n&&(n=new o.x(0,1,0)),void 0===r&&(r=new o.x(0,1,0));var i=e.call(this,t)||this;return i.direction1=n,i.direction2=r,i}return l.d(t,e),t.prototype.startDirectionFunction=function(e,t,n){var r=w.a.RandomRange(this.direction1.x,this.direction2.x),i=w.a.RandomRange(this.direction1.y,this.direction2.y),a=w.a.RandomRange(this.direction1.z,this.direction2.z);o.x.TransformNormalFromFloatsToRef(r,i,a,e,t)},t.prototype.clone=function(){var e=new t(this.radius,this.direction1,this.direction2);return C.a.DeepCopy(this,e),e},t.prototype.applyToShader=function(e){e.setFloat("radius",this.radius),e.setFloat("radiusRange",this.radiusRange),e.setVector3("direction1",this.direction1),e.setVector3("direction2",this.direction2)},t.prototype.getEffectDefines=function(){return"#define SPHEREEMITTER\n#define DIRECTEDSPHEREEMITTER"},t.prototype.getClassName=function(){return"SphereDirectedParticleEmitter"},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this);return t.direction1=this.direction1.asArray(),t.direction2=this.direction2.asArray(),t},t.prototype.parse=function(t){e.prototype.parse.call(this,t),this.direction1.copyFrom(t.direction1),this.direction2.copyFrom(t.direction2)},t}(Aa),Ca=function(){function e(t){this.animations=[],this.renderingGroupId=0,this.emitter=null,this.emitRate=10,this.manualEmitCount=-1,this.updateSpeed=.01,this.targetStopDuration=0,this.disposeOnStop=!1,this.minEmitPower=1,this.maxEmitPower=1,this.minLifeTime=1,this.maxLifeTime=1,this.minSize=1,this.maxSize=1,this.minScaleX=1,this.maxScaleX=1,this.minScaleY=1,this.maxScaleY=1,this.minInitialRotation=0,this.maxInitialRotation=0,this.minAngularSpeed=0,this.maxAngularSpeed=0,this.layerMask=268435455,this.customShader=null,this.preventAutoStart=!1,this.noiseStrength=new o.x(10,10,10),this.onAnimationEnd=null,this.blendMode=e.BLENDMODE_ONEONE,this.forceDepthWrite=!1,this.preWarmCycles=0,this.preWarmStepOffset=1,this.spriteCellChangeSpeed=1,this.startSpriteCellID=0,this.endSpriteCellID=0,this.spriteCellWidth=0,this.spriteCellHeight=0,this.spriteRandomStartCell=!1,this.translationPivot=new o.w(0,0),this.beginAnimationOnStart=!1,this.beginAnimationFrom=0,this.beginAnimationTo=60,this.beginAnimationLoop=!1,this.worldOffset=new o.x(0,0,0),this.gravity=o.x.Zero(),this._colorGradients=null,this._sizeGradients=null,this._lifeTimeGradients=null,this._angularSpeedGradients=null,this._velocityGradients=null,this._limitVelocityGradients=null,this._dragGradients=null,this._emitRateGradients=null,this._startSizeGradients=null,this._rampGradients=null,this._colorRemapGradients=null,this._alphaRemapGradients=null,this.startDelay=0,this.limitVelocityDamping=.4,this.color1=new o.f(1,1,1,1),this.color2=new o.f(1,1,1,1),this.colorDead=new o.f(0,0,0,1),this.textureMask=new o.f(1,1,1,1),this._isSubEmitter=!1,this.billboardMode=_.a.PARTICLES_BILLBOARDMODE_ALL,this._isBillboardBased=!0,this._imageProcessingConfigurationDefines=new vn.b,this.id=t,this.name=t}return Object.defineProperty(e.prototype,"noiseTexture",{get:function(){return this._noiseTexture},set:function(e){this._noiseTexture!==e&&(this._noiseTexture=e,this._reset())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAnimationSheetEnabled",{get:function(){return this._isAnimationSheetEnabled},set:function(e){this._isAnimationSheetEnabled!=e&&(this._isAnimationSheetEnabled=e,this._reset())},enumerable:!0,configurable:!0}),e.prototype.getScene=function(){return this._scene},e.prototype._hasTargetStopDurationDependantGradient=function(){return this._startSizeGradients&&this._startSizeGradients.length>0||this._emitRateGradients&&this._emitRateGradients.length>0||this._lifeTimeGradients&&this._lifeTimeGradients.length>0},e.prototype.getDragGradients=function(){return this._dragGradients},e.prototype.getLimitVelocityGradients=function(){return this._limitVelocityGradients},e.prototype.getColorGradients=function(){return this._colorGradients},e.prototype.getSizeGradients=function(){return this._sizeGradients},e.prototype.getColorRemapGradients=function(){return this._colorRemapGradients},e.prototype.getAlphaRemapGradients=function(){return this._alphaRemapGradients},e.prototype.getLifeTimeGradients=function(){return this._lifeTimeGradients},e.prototype.getAngularSpeedGradients=function(){return this._angularSpeedGradients},e.prototype.getVelocityGradients=function(){return this._velocityGradients},e.prototype.getStartSizeGradients=function(){return this._startSizeGradients},e.prototype.getEmitRateGradients=function(){return this._emitRateGradients},Object.defineProperty(e.prototype,"direction1",{get:function(){return this.particleEmitterType.direction1?this.particleEmitterType.direction1:o.x.Zero()},set:function(e){this.particleEmitterType.direction1&&(this.particleEmitterType.direction1=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction2",{get:function(){return this.particleEmitterType.direction2?this.particleEmitterType.direction2:o.x.Zero()},set:function(e){this.particleEmitterType.direction2&&(this.particleEmitterType.direction2=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minEmitBox",{get:function(){return this.particleEmitterType.minEmitBox?this.particleEmitterType.minEmitBox:o.x.Zero()},set:function(e){this.particleEmitterType.minEmitBox&&(this.particleEmitterType.minEmitBox=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxEmitBox",{get:function(){return this.particleEmitterType.maxEmitBox?this.particleEmitterType.maxEmitBox:o.x.Zero()},set:function(e){this.particleEmitterType.maxEmitBox&&(this.particleEmitterType.maxEmitBox=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBillboardBased",{get:function(){return this._isBillboardBased},set:function(e){this._isBillboardBased!==e&&(this._isBillboardBased=e,this._reset())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageProcessingConfiguration",{get:function(){return this._imageProcessingConfiguration},set:function(e){this._attachImageProcessingConfiguration(e)},enumerable:!0,configurable:!0}),e.prototype._attachImageProcessingConfiguration=function(e){e!==this._imageProcessingConfiguration&&(this._imageProcessingConfiguration=e||this._scene.imageProcessingConfiguration)},e.prototype._reset=function(){},e.prototype._removeGradientAndTexture=function(e,t,n){if(!t)return this;for(var r=0,i=0,o=t;i<o.length;i++){if(o[i].gradient===e){t.splice(r,1);break}r++}return n&&n.dispose(),this},e.prototype.createPointEmitter=function(e,t){var n=new Ma;return n.direction1=e,n.direction2=t,this.particleEmitterType=n,n},e.prototype.createHemisphericEmitter=function(e,t){void 0===e&&(e=1),void 0===t&&(t=1);var n=new xa(e,t);return this.particleEmitterType=n,n},e.prototype.createSphereEmitter=function(e,t){void 0===e&&(e=1),void 0===t&&(t=1);var n=new Aa(e,t);return this.particleEmitterType=n,n},e.prototype.createDirectedSphereEmitter=function(e,t,n){void 0===e&&(e=1),void 0===t&&(t=new o.x(0,1,0)),void 0===n&&(n=new o.x(0,1,0));var r=new Sa(e,t,n);return this.particleEmitterType=r,r},e.prototype.createCylinderEmitter=function(e,t,n,r){void 0===e&&(e=1),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=0);var i=new Ta(e,t,n,r);return this.particleEmitterType=i,i},e.prototype.createDirectedCylinderEmitter=function(e,t,n,r,i){void 0===e&&(e=1),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=new o.x(0,1,0)),void 0===i&&(i=new o.x(0,1,0));var a=new Ea(e,t,n,r,i);return this.particleEmitterType=a,a},e.prototype.createConeEmitter=function(e,t){void 0===e&&(e=1),void 0===t&&(t=Math.PI/4);var n=new ba(e,t);return this.particleEmitterType=n,n},e.prototype.createBoxEmitter=function(e,t,n,r){var i=new ya;return this.particleEmitterType=i,this.direction1=e,this.direction2=t,this.minEmitBox=n,this.maxEmitBox=r,i},e.BLENDMODE_ONEONE=0,e.BLENDMODE_STANDARD=1,e.BLENDMODE_ADD=2,e.BLENDMODE_MULTIPLY=3,e.BLENDMODE_MULTIPLYADD=4,e}(),Pa=function(){function e(t){this.particleSystem=t,this.position=o.x.Zero(),this.direction=o.x.Zero(),this.color=new o.f(0,0,0,0),this.colorStep=new o.f(0,0,0,0),this.lifeTime=1,this.age=0,this.size=0,this.scale=new o.w(1,1),this.angle=0,this.angularSpeed=0,this.cellIndex=0,this._attachedSubEmitters=null,this._currentColor1=new o.f(0,0,0,0),this._currentColor2=new o.f(0,0,0,0),this._currentSize1=0,this._currentSize2=0,this._currentAngularSpeed1=0,this._currentAngularSpeed2=0,this._currentVelocity1=0,this._currentVelocity2=0,this._currentLimitVelocity1=0,this._currentLimitVelocity2=0,this._currentDrag1=0,this._currentDrag2=0,this.id=e._Count++,this.particleSystem.isAnimationSheetEnabled&&this.updateCellInfoFromSystem()}return e.prototype.updateCellInfoFromSystem=function(){this.cellIndex=this.particleSystem.startSpriteCellID},e.prototype.updateCellIndex=function(){var e=this.age,t=this.particleSystem.spriteCellChangeSpeed;this.particleSystem.spriteRandomStartCell&&(void 0===this._randomCellOffset&&(this._randomCellOffset=Math.random()*this.lifeTime),0===t?(t=1,e=this._randomCellOffset):e+=this._randomCellOffset);var n=this._initialEndSpriteCellID-this._initialStartSpriteCellID,r=w.a.Clamp(e*t%this.lifeTime/this.lifeTime);this.cellIndex=this._initialStartSpriteCellID+r*n|0},e.prototype._inheritParticleInfoToSubEmitter=function(e){if(e.particleSystem.emitter.position){var t=e.particleSystem.emitter;t.position.copyFrom(this.position),e.inheritDirection&&(t.position.subtractToRef(this.direction,o.t.Vector3[0]),t.lookAt(o.t.Vector3[0],0,Math.PI/2))}else e.particleSystem.emitter.copyFrom(this.position);this.direction.scaleToRef(e.inheritedVelocityAmount/2,o.t.Vector3[0]),e.particleSystem._inheritedVelocityOffset.copyFrom(o.t.Vector3[0])},e.prototype._inheritParticleInfoToSubEmitters=function(){var e=this;this._attachedSubEmitters&&this._attachedSubEmitters.length>0&&this._attachedSubEmitters.forEach(function(t){e._inheritParticleInfoToSubEmitter(t)})},e.prototype._reset=function(){this.age=0,this._currentColorGradient=null,this._currentSizeGradient=null,this._currentAngularSpeedGradient=null,this._currentVelocityGradient=null,this._currentLimitVelocityGradient=null,this._currentDragGradient=null,this.cellIndex=this.particleSystem.startSpriteCellID,this._randomCellOffset=void 0},e.prototype.copyTo=function(e){e.position.copyFrom(this.position),this._initialDirection?e._initialDirection?e._initialDirection.copyFrom(this._initialDirection):e._initialDirection=this._initialDirection.clone():e._initialDirection=null,e.direction.copyFrom(this.direction),e.color.copyFrom(this.color),e.colorStep.copyFrom(this.colorStep),e.lifeTime=this.lifeTime,e.age=this.age,e._randomCellOffset=this._randomCellOffset,e.size=this.size,e.scale.copyFrom(this.scale),e.angle=this.angle,e.angularSpeed=this.angularSpeed,e.particleSystem=this.particleSystem,e.cellIndex=this.cellIndex,e.id=this.id,e._attachedSubEmitters=this._attachedSubEmitters,this._currentColorGradient&&(e._currentColorGradient=this._currentColorGradient,e._currentColor1.copyFrom(this._currentColor1),e._currentColor2.copyFrom(this._currentColor2)),this._currentSizeGradient&&(e._currentSizeGradient=this._currentSizeGradient,e._currentSize1=this._currentSize1,e._currentSize2=this._currentSize2),this._currentAngularSpeedGradient&&(e._currentAngularSpeedGradient=this._currentAngularSpeedGradient,e._currentAngularSpeed1=this._currentAngularSpeed1,e._currentAngularSpeed2=this._currentAngularSpeed2),this._currentVelocityGradient&&(e._currentVelocityGradient=this._currentVelocityGradient,e._currentVelocity1=this._currentVelocity1,e._currentVelocity2=this._currentVelocity2),this._currentLimitVelocityGradient&&(e._currentLimitVelocityGradient=this._currentLimitVelocityGradient,e._currentLimitVelocity1=this._currentLimitVelocity1,e._currentLimitVelocity2=this._currentLimitVelocity2),this._currentDragGradient&&(e._currentDragGradient=this._currentDragGradient,e._currentDrag1=this._currentDrag1,e._currentDrag2=this._currentDrag2),this.particleSystem.isAnimationSheetEnabled&&(e._initialStartSpriteCellID=this._initialStartSpriteCellID,e._initialEndSpriteCellID=this._initialEndSpriteCellID),this.particleSystem.useRampGradients&&e.remapData.copyFrom(this.remapData),this._randomNoiseCoordinates1&&(e._randomNoiseCoordinates1?(e._randomNoiseCoordinates1.copyFrom(this._randomNoiseCoordinates1),e._randomNoiseCoordinates2.copyFrom(this._randomNoiseCoordinates2)):(e._randomNoiseCoordinates1=this._randomNoiseCoordinates1.clone(),e._randomNoiseCoordinates2=this._randomNoiseCoordinates2.clone()))},e._Count=0,e}();!function(e){e[e.ATTACHED=0]="ATTACHED",e[e.END=1]="END"}(ga||(ga={}));var Ra=function(){function e(e){this.particleSystem=e,this.type=ga.END,this.inheritDirection=!1,this.inheritedVelocityAmount=0,e.emitter&&e.emitter.dispose||(e.emitter=new Fe.a("SubemitterSystemEmitter",e.getScene())),e.onDisposeObservable.add(function(){e.emitter&&e.emitter.dispose&&e.emitter.dispose()})}return e.prototype.clone=function(){var t=this.particleSystem.emitter;t?t instanceof o.x?t=t.clone():t instanceof Fe.a&&((t=new fe.a("",t.getScene())).isVisible=!1):t=new o.x;var n=new e(this.particleSystem.clone("",t));return n.type=this.type,n.inheritDirection=this.inheritDirection,n.inheritedVelocityAmount=this.inheritedVelocityAmount,n.particleSystem._disposeEmitterOnDispose=!0,n.particleSystem.disposeOnStop=!0,n},e.prototype.serialize=function(){var e={};return e.type=this.type,e.inheritDirection=this.inheritDirection,e.inheritedVelocityAmount=this.inheritedVelocityAmount,e.particleSystem=this.particleSystem.serialize(),e},e._ParseParticleSystem=function(e,t,n){throw be.a.WarnImport("ParseParticle")},e.Parse=function(t,n,r){var i=new e(e._ParseParticleSystem(t.particleSystem,n,r));return i.type=t.type,i.inheritDirection=t.inheritDirection,i.inheritedVelocityAmount=t.inheritedVelocityAmount,i.particleSystem._isSubEmitter=!0,i},e.prototype.dispose=function(){this.particleSystem.dispose()},e}();jt.a.ShadersStore.particlesPixelShader="\nvarying vec2 vUV;\nvarying vec4 vColor;\nuniform vec4 textureMask;\nuniform sampler2D diffuseSampler;\n#include<clipPlaneFragmentDeclaration>\n#include<imageProcessingDeclaration>\n#include<helperFunctions>\n#include<imageProcessingFunctions>\n#ifdef RAMPGRADIENT\nvarying vec4 remapRanges;\nuniform sampler2D rampSampler;\n#endif\nvoid main(void) {\n#include<clipPlaneFragment>\nvec4 textureColor=texture2D(diffuseSampler,vUV);\nvec4 baseColor=(textureColor*textureMask+(vec4(1.,1.,1.,1.)-textureMask))*vColor;\n#ifdef RAMPGRADIENT\nfloat alpha=baseColor.a;\nfloat remappedColorIndex=clamp((alpha-remapRanges.x)/remapRanges.y,0.0,1.0);\nvec4 rampColor=texture2D(rampSampler,vec2(1.0-remappedColorIndex,0.));\nbaseColor.rgb*=rampColor.rgb;\n\nfloat finalAlpha=baseColor.a;\nbaseColor.a=clamp((alpha*rampColor.a-remapRanges.z)/remapRanges.w,0.0,1.0);\n#endif\n#ifdef BLENDMULTIPLYMODE\nfloat sourceAlpha=vColor.a*textureColor.a;\nbaseColor.rgb=baseColor.rgb*sourceAlpha+vec3(1.0)*(1.0-sourceAlpha);\n#endif\n\n\n#ifdef IMAGEPROCESSINGPOSTPROCESS\nbaseColor.rgb=toLinearSpace(baseColor.rgb);\n#else\n#ifdef IMAGEPROCESSING\nbaseColor.rgb=toLinearSpace(baseColor.rgb);\nbaseColor=applyImageProcessing(baseColor);\n#endif\n#endif\ngl_FragColor=baseColor;\n}",jt.a.ShadersStore.particlesVertexShader="\nattribute vec3 position;\nattribute vec4 color;\nattribute float angle;\nattribute vec2 size;\n#ifdef ANIMATESHEET\nattribute float cellIndex;\n#endif\n#ifndef BILLBOARD\nattribute vec3 direction;\n#endif\n#ifdef BILLBOARDSTRETCHED\nattribute vec3 direction;\n#endif\n#ifdef RAMPGRADIENT\nattribute vec4 remapData;\n#endif\nattribute vec2 offset;\n\nuniform mat4 view;\nuniform mat4 projection;\nuniform vec2 translationPivot;\n#ifdef ANIMATESHEET\nuniform vec3 particlesInfos;\n#endif\n\nvarying vec2 vUV;\nvarying vec4 vColor;\n#ifdef RAMPGRADIENT\nvarying vec4 remapRanges;\n#endif\n#if defined(CLIPPLANE) || defined(CLIPPLANE2) || defined(CLIPPLANE3) || defined(CLIPPLANE4)\nuniform mat4 invView;\n#endif\n#include<clipPlaneVertexDeclaration>\n#ifdef BILLBOARD\nuniform vec3 eyePosition;\n#endif\nvec3 rotate(vec3 yaxis,vec3 rotatedCorner) {\nvec3 xaxis=normalize(cross(vec3(0.,1.0,0.),yaxis));\nvec3 zaxis=normalize(cross(yaxis,xaxis));\nvec3 row0=vec3(xaxis.x,xaxis.y,xaxis.z);\nvec3 row1=vec3(yaxis.x,yaxis.y,yaxis.z);\nvec3 row2=vec3(zaxis.x,zaxis.y,zaxis.z);\nmat3 rotMatrix=mat3(row0,row1,row2);\nvec3 alignedCorner=rotMatrix*rotatedCorner;\nreturn position+alignedCorner;\n}\n#ifdef BILLBOARDSTRETCHED\nvec3 rotateAlign(vec3 toCamera,vec3 rotatedCorner) {\nvec3 normalizedToCamera=normalize(toCamera);\nvec3 normalizedCrossDirToCamera=normalize(cross(normalize(direction),normalizedToCamera));\nvec3 crossProduct=normalize(cross(normalizedToCamera,normalizedCrossDirToCamera));\nvec3 row0=vec3(normalizedCrossDirToCamera.x,normalizedCrossDirToCamera.y,normalizedCrossDirToCamera.z);\nvec3 row1=vec3(crossProduct.x,crossProduct.y,crossProduct.z);\nvec3 row2=vec3(normalizedToCamera.x,normalizedToCamera.y,normalizedToCamera.z);\nmat3 rotMatrix=mat3(row0,row1,row2);\nvec3 alignedCorner=rotMatrix*rotatedCorner;\nreturn position+alignedCorner;\n}\n#endif\nvoid main(void) {\nvec2 cornerPos;\ncornerPos=(vec2(offset.x-0.5,offset.y-0.5)-translationPivot)*size+translationPivot;\n#ifdef BILLBOARD\n\nvec3 rotatedCorner;\n#ifdef BILLBOARDY\nrotatedCorner.x=cornerPos.x*cos(angle)-cornerPos.y*sin(angle);\nrotatedCorner.z=cornerPos.x*sin(angle)+cornerPos.y*cos(angle);\nrotatedCorner.y=0.;\nvec3 yaxis=position-eyePosition;\nyaxis.y=0.;\nvec3 worldPos=rotate(normalize(yaxis),rotatedCorner);\nvec3 viewPos=(view*vec4(worldPos,1.0)).xyz;\n#elif defined(BILLBOARDSTRETCHED)\nrotatedCorner.x=cornerPos.x*cos(angle)-cornerPos.y*sin(angle);\nrotatedCorner.y=cornerPos.x*sin(angle)+cornerPos.y*cos(angle);\nrotatedCorner.z=0.;\nvec3 toCamera=position-eyePosition;\nvec3 worldPos=rotateAlign(toCamera,rotatedCorner);\nvec3 viewPos=(view*vec4(worldPos,1.0)).xyz;\n#else\nrotatedCorner.x=cornerPos.x*cos(angle)-cornerPos.y*sin(angle);\nrotatedCorner.y=cornerPos.x*sin(angle)+cornerPos.y*cos(angle);\nrotatedCorner.z=0.;\nvec3 viewPos=(view*vec4(position,1.0)).xyz+rotatedCorner;\n#endif\n#ifdef RAMPGRADIENT\nremapRanges=remapData;\n#endif\n\ngl_Position=projection*vec4(viewPos,1.0);\n#else\n\nvec3 rotatedCorner;\nrotatedCorner.x=cornerPos.x*cos(angle)-cornerPos.y*sin(angle);\nrotatedCorner.z=cornerPos.x*sin(angle)+cornerPos.y*cos(angle);\nrotatedCorner.y=0.;\nvec3 yaxis=normalize(direction);\nvec3 worldPos=rotate(yaxis,rotatedCorner);\ngl_Position=projection*view*vec4(worldPos,1.0);\n#endif\nvColor=color;\n#ifdef ANIMATESHEET\nfloat rowOffset=floor(cellIndex/particlesInfos.z);\nfloat columnOffset=cellIndex-rowOffset*particlesInfos.z;\nvec2 uvScale=particlesInfos.xy;\nvec2 uvOffset=vec2(offset.x ,1.0-offset.y);\nvUV=(uvOffset+vec2(columnOffset,rowOffset))*uvScale;\n#else\nvUV=offset;\n#endif\n\n#if defined(CLIPPLANE) || defined(CLIPPLANE2) || defined(CLIPPLANE3) || defined(CLIPPLANE4)\nvec4 worldPos=invView*vec4(viewPos,1.0);\n#endif\n#include<clipPlaneVertex>\n}";var Da=function(e){function t(t,n,r,a,s,u){void 0===a&&(a=null),void 0===s&&(s=!1),void 0===u&&(u=.01);var l=e.call(this,t)||this;return l._inheritedVelocityOffset=new o.x,l.onDisposeObservable=new i.c,l._particles=new Array,l._stockParticles=new Array,l._newPartsExcess=0,l._vertexBuffers={},l._scaledColorStep=new o.f(0,0,0,0),l._colorDiff=new o.f(0,0,0,0),l._scaledDirection=o.x.Zero(),l._scaledGravity=o.x.Zero(),l._currentRenderId=-1,l._useInstancing=!1,l._started=!1,l._stopped=!1,l._actualFrame=0,l._currentEmitRate1=0,l._currentEmitRate2=0,l._currentStartSize1=0,l._currentStartSize2=0,l._rawTextureWidth=256,l._useRampGradients=!1,l._disposeEmitterOnDispose=!1,l.recycleParticle=function(e){var t=l._particles.pop();t!==e&&t.copyTo(e),l._stockParticles.push(t)},l._createParticle=function(){var e;if(0!==l._stockParticles.length?(e=l._stockParticles.pop())._reset():e=new Pa(l),l._subEmitters&&l._subEmitters.length>0){var t=l._subEmitters[Math.floor(Math.random()*l._subEmitters.length)];e._attachedSubEmitters=[],t.forEach(function(t){if(t.type===ga.ATTACHED){var n=t.clone();e._attachedSubEmitters.push(n),n.particleSystem.start()}})}return e},l._emitFromParticle=function(e){if(l._subEmitters&&0!==l._subEmitters.length){var t=Math.floor(Math.random()*l._subEmitters.length);l._subEmitters[t].forEach(function(t){if(t.type===ga.END){var n=t.clone();e._inheritParticleInfoToSubEmitter(n),n.particleSystem._rootParticleSystem=l,l.activeSubSystems.push(n.particleSystem),n.particleSystem.start()}})}},l._capacity=n,l._epsilon=u,l._isAnimationSheetEnabled=s,l._scene=r||S.a.LastCreatedScene,l._attachImageProcessingConfiguration(null),l._customEffect=a,l._scene.particleSystems.push(l),l._useInstancing=l._scene.getEngine().getCaps().instancedArrays,l._createIndexBuffer(),l._createVertexBuffers(),l.particleEmitterType=new ya,l.updateFunction=function(e){var t=null,n=null;l.noiseTexture&&(t=l.noiseTexture.getSize(),n=l.noiseTexture.getContent());for(var r,i=function(){var i=l._scaledUpdateSpeed,s=(r=e[a]).age;r.age+=i,r.age>r.lifeTime&&(i=(r.lifeTime-s)*i/(r.age-s),r.age=r.lifeTime);var u=r.age/r.lifeTime;l._colorGradients&&l._colorGradients.length>0?ye.h.GetCurrentGradient(u,l._colorGradients,function(e,t,n){e!==r._currentColorGradient&&(r._currentColor1.copyFrom(r._currentColor2),t.getColorToRef(r._currentColor2),r._currentColorGradient=e),o.f.LerpToRef(r._currentColor1,r._currentColor2,n,r.color)}):(r.colorStep.scaleToRef(i,l._scaledColorStep),r.color.addInPlace(l._scaledColorStep),r.color.a<0&&(r.color.a=0)),l._angularSpeedGradients&&l._angularSpeedGradients.length>0&&ye.h.GetCurrentGradient(u,l._angularSpeedGradients,function(e,t,n){e!==r._currentAngularSpeedGradient&&(r._currentAngularSpeed1=r._currentAngularSpeed2,r._currentAngularSpeed2=t.getFactor(),r._currentAngularSpeedGradient=e),r.angularSpeed=w.a.Lerp(r._currentAngularSpeed1,r._currentAngularSpeed2,n)}),r.angle+=r.angularSpeed*i;var c=i;if(l._velocityGradients&&l._velocityGradients.length>0&&ye.h.GetCurrentGradient(u,l._velocityGradients,function(e,t,n){e!==r._currentVelocityGradient&&(r._currentVelocity1=r._currentVelocity2,r._currentVelocity2=t.getFactor(),r._currentVelocityGradient=e),c*=w.a.Lerp(r._currentVelocity1,r._currentVelocity2,n)}),r.direction.scaleToRef(c,l._scaledDirection),l._limitVelocityGradients&&l._limitVelocityGradients.length>0&&ye.h.GetCurrentGradient(u,l._limitVelocityGradients,function(e,t,n){e!==r._currentLimitVelocityGradient&&(r._currentLimitVelocity1=r._currentLimitVelocity2,r._currentLimitVelocity2=t.getFactor(),r._currentLimitVelocityGradient=e);var i=w.a.Lerp(r._currentLimitVelocity1,r._currentLimitVelocity2,n);r.direction.length()>i&&r.direction.scaleInPlace(l.limitVelocityDamping)}),l._dragGradients&&l._dragGradients.length>0&&ye.h.GetCurrentGradient(u,l._dragGradients,function(e,t,n){e!==r._currentDragGradient&&(r._currentDrag1=r._currentDrag2,r._currentDrag2=t.getFactor(),r._currentDragGradient=e);var i=w.a.Lerp(r._currentDrag1,r._currentDrag2,n);l._scaledDirection.scaleInPlace(1-i)}),r.position.addInPlace(l._scaledDirection),n&&t&&r._randomNoiseCoordinates1){var h=l._fetchR(r._randomNoiseCoordinates1.x,r._randomNoiseCoordinates1.y,t.width,t.height,n),d=l._fetchR(r._randomNoiseCoordinates1.z,r._randomNoiseCoordinates2.x,t.width,t.height,n),f=l._fetchR(r._randomNoiseCoordinates2.y,r._randomNoiseCoordinates2.z,t.width,t.height,n),p=o.t.Vector3[0],_=o.t.Vector3[1];p.copyFromFloats((2*h-1)*l.noiseStrength.x,(2*d-1)*l.noiseStrength.y,(2*f-1)*l.noiseStrength.z),p.scaleToRef(i,_),r.direction.addInPlace(_)}if(l.gravity.scaleToRef(i,l._scaledGravity),r.direction.addInPlace(l._scaledGravity),l._sizeGradients&&l._sizeGradients.length>0&&ye.h.GetCurrentGradient(u,l._sizeGradients,function(e,t,n){e!==r._currentSizeGradient&&(r._currentSize1=r._currentSize2,r._currentSize2=t.getFactor(),r._currentSizeGradient=e),r.size=w.a.Lerp(r._currentSize1,r._currentSize2,n)}),l._useRampGradients&&(l._colorRemapGradients&&l._colorRemapGradients.length>0&&ye.h.GetCurrentGradient(u,l._colorRemapGradients,function(e,t,n){var i=w.a.Lerp(e.factor1,t.factor1,n),o=w.a.Lerp(e.factor2,t.factor2,n);r.remapData.x=i,r.remapData.y=o-i}),l._alphaRemapGradients&&l._alphaRemapGradients.length>0&&ye.h.GetCurrentGradient(u,l._alphaRemapGradients,function(e,t,n){var i=w.a.Lerp(e.factor1,t.factor1,n),o=w.a.Lerp(e.factor2,t.factor2,n);r.remapData.z=i,r.remapData.w=o-i})),l._isAnimationSheetEnabled&&r.updateCellIndex(),r._inheritParticleInfoToSubEmitters(),r.age>=r.lifeTime)return l._emitFromParticle(r),r._attachedSubEmitters&&(r._attachedSubEmitters.forEach(function(e){e.particleSystem.disposeOnStop=!0,e.particleSystem.stop()}),r._attachedSubEmitters=null),l.recycleParticle(r),a--,"continue"},a=0;a<e.length;a++)i()},l}return l.d(t,e),Object.defineProperty(t.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useRampGradients",{get:function(){return this._useRampGradients},set:function(e){this._useRampGradients!==e&&(this._useRampGradients=e,this._resetEffect())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"particles",{get:function(){return this._particles},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"ParticleSystem"},t.prototype._addFactorGradient=function(e,t,n,r){var i=new ye.d;i.gradient=t,i.factor1=n,i.factor2=r,e.push(i),e.sort(function(e,t){return e.gradient<t.gradient?-1:e.gradient>t.gradient?1:0})},t.prototype._removeFactorGradient=function(e,t){if(e)for(var n=0,r=0,i=e;r<i.length;r++){if(i[r].gradient===t){e.splice(n,1);break}n++}},t.prototype.addLifeTimeGradient=function(e,t,n){return this._lifeTimeGradients||(this._lifeTimeGradients=[]),this._addFactorGradient(this._lifeTimeGradients,e,t,n),this},t.prototype.removeLifeTimeGradient=function(e){return this._removeFactorGradient(this._lifeTimeGradients,e),this},t.prototype.addSizeGradient=function(e,t,n){return this._sizeGradients||(this._sizeGradients=[]),this._addFactorGradient(this._sizeGradients,e,t,n),this},t.prototype.removeSizeGradient=function(e){return this._removeFactorGradient(this._sizeGradients,e),this},t.prototype.addColorRemapGradient=function(e,t,n){return this._colorRemapGradients||(this._colorRemapGradients=[]),this._addFactorGradient(this._colorRemapGradients,e,t,n),this},t.prototype.removeColorRemapGradient=function(e){return this._removeFactorGradient(this._colorRemapGradients,e),this},t.prototype.addAlphaRemapGradient=function(e,t,n){return this._alphaRemapGradients||(this._alphaRemapGradients=[]),this._addFactorGradient(this._alphaRemapGradients,e,t,n),this},t.prototype.removeAlphaRemapGradient=function(e){return this._removeFactorGradient(this._alphaRemapGradients,e),this},t.prototype.addAngularSpeedGradient=function(e,t,n){return this._angularSpeedGradients||(this._angularSpeedGradients=[]),this._addFactorGradient(this._angularSpeedGradients,e,t,n),this},t.prototype.removeAngularSpeedGradient=function(e){return this._removeFactorGradient(this._angularSpeedGradients,e),this},t.prototype.addVelocityGradient=function(e,t,n){return this._velocityGradients||(this._velocityGradients=[]),this._addFactorGradient(this._velocityGradients,e,t,n),this},t.prototype.removeVelocityGradient=function(e){return this._removeFactorGradient(this._velocityGradients,e),this},t.prototype.addLimitVelocityGradient=function(e,t,n){return this._limitVelocityGradients||(this._limitVelocityGradients=[]),this._addFactorGradient(this._limitVelocityGradients,e,t,n),this},t.prototype.removeLimitVelocityGradient=function(e){return this._removeFactorGradient(this._limitVelocityGradients,e),this},t.prototype.addDragGradient=function(e,t,n){return this._dragGradients||(this._dragGradients=[]),this._addFactorGradient(this._dragGradients,e,t,n),this},t.prototype.removeDragGradient=function(e){return this._removeFactorGradient(this._dragGradients,e),this},t.prototype.addEmitRateGradient=function(e,t,n){return this._emitRateGradients||(this._emitRateGradients=[]),this._addFactorGradient(this._emitRateGradients,e,t,n),this},t.prototype.removeEmitRateGradient=function(e){return this._removeFactorGradient(this._emitRateGradients,e),this},t.prototype.addStartSizeGradient=function(e,t,n){return this._startSizeGradients||(this._startSizeGradients=[]),this._addFactorGradient(this._startSizeGradients,e,t,n),this},t.prototype.removeStartSizeGradient=function(e){return this._removeFactorGradient(this._emitRateGradients,e),this},t.prototype._createRampGradientTexture=function(){if(this._rampGradients&&this._rampGradients.length&&!this._rampGradientsTexture){for(var e=new Uint8Array(4*this._rawTextureWidth),t=o.t.Color3[0],n=0;n<this._rawTextureWidth;n++)ye.h.GetCurrentGradient(n/this._rawTextureWidth,this._rampGradients,function(r,i,a){o.e.LerpToRef(r.color,i.color,a,t),e[4*n]=255*t.r,e[4*n+1]=255*t.g,e[4*n+2]=255*t.b,e[4*n+3]=255});this._rampGradientsTexture=ze.CreateRGBATexture(e,this._rawTextureWidth,1,this._scene,!1,!1,Ge.a.NEAREST_SAMPLINGMODE)}},t.prototype.getRampGradients=function(){return this._rampGradients},t.prototype.addRampGradient=function(e,t){this._rampGradients||(this._rampGradients=[]);var n=new ye.b;return n.gradient=e,n.color=t,this._rampGradients.push(n),this._rampGradients.sort(function(e,t){return e.gradient<t.gradient?-1:e.gradient>t.gradient?1:0}),this._rampGradientsTexture&&(this._rampGradientsTexture.dispose(),this._rampGradientsTexture=null),this._createRampGradientTexture(),this},t.prototype.removeRampGradient=function(e){return this._removeGradientAndTexture(e,this._rampGradients,this._rampGradientsTexture),this._rampGradientsTexture=null,this._rampGradients&&this._rampGradients.length>0&&this._createRampGradientTexture(),this},t.prototype.addColorGradient=function(e,t,n){this._colorGradients||(this._colorGradients=[]);var r=new ye.c;return r.gradient=e,r.color1=t,r.color2=n,this._colorGradients.push(r),this._colorGradients.sort(function(e,t){return e.gradient<t.gradient?-1:e.gradient>t.gradient?1:0}),this},t.prototype.removeColorGradient=function(e){if(!this._colorGradients)return this;for(var t=0,n=0,r=this._colorGradients;n<r.length;n++){if(r[n].gradient===e){this._colorGradients.splice(t,1);break}t++}return this},t.prototype._fetchR=function(e,t,n,r,i){return i[4*(((e=.5*Math.abs(e)+.5)*n%n|0)+((t=.5*Math.abs(t)+.5)*r%r|0)*n)]/255},t.prototype._reset=function(){this._resetEffect()},t.prototype._resetEffect=function(){this._vertexBuffer&&(this._vertexBuffer.dispose(),this._vertexBuffer=null),this._spriteBuffer&&(this._spriteBuffer.dispose(),this._spriteBuffer=null),this._createVertexBuffers()},t.prototype._createVertexBuffers=function(){this._vertexBufferSize=this._useInstancing?10:12,this._isAnimationSheetEnabled&&(this._vertexBufferSize+=1),this._isBillboardBased&&this.billboardMode!==t.BILLBOARDMODE_STRETCHED||(this._vertexBufferSize+=3),this._useRampGradients&&(this._vertexBufferSize+=4);var e=this._scene.getEngine();this._vertexData=new Float32Array(this._capacity*this._vertexBufferSize*(this._useInstancing?1:4)),this._vertexBuffer=new Mn.a(e,this._vertexData,!0,this._vertexBufferSize);var n=0,r=this._vertexBuffer.createVertexBuffer(Mn.b.PositionKind,n,3,this._vertexBufferSize,this._useInstancing);this._vertexBuffers[Mn.b.PositionKind]=r;var i=this._vertexBuffer.createVertexBuffer(Mn.b.ColorKind,n+=3,4,this._vertexBufferSize,this._useInstancing);this._vertexBuffers[Mn.b.ColorKind]=i;var o=this._vertexBuffer.createVertexBuffer("angle",n+=4,1,this._vertexBufferSize,this._useInstancing);this._vertexBuffers.angle=o;var a,s=this._vertexBuffer.createVertexBuffer("size",n+=1,2,this._vertexBufferSize,this._useInstancing);if(this._vertexBuffers.size=s,n+=2,this._isAnimationSheetEnabled){var u=this._vertexBuffer.createVertexBuffer("cellIndex",n,1,this._vertexBufferSize,this._useInstancing);this._vertexBuffers.cellIndex=u,n+=1}if(!this._isBillboardBased||this.billboardMode===t.BILLBOARDMODE_STRETCHED){var l=this._vertexBuffer.createVertexBuffer("direction",n,3,this._vertexBufferSize,this._useInstancing);this._vertexBuffers.direction=l,n+=3}if(this._useRampGradients){var c=this._vertexBuffer.createVertexBuffer("remapData",n,4,this._vertexBufferSize,this._useInstancing);this._vertexBuffers.remapData=c,n+=4}if(this._useInstancing){var h=new Float32Array([0,0,1,0,1,1,0,1]);this._spriteBuffer=new Mn.a(e,h,!1,2),a=this._spriteBuffer.createVertexBuffer("offset",0,2)}else a=this._vertexBuffer.createVertexBuffer("offset",n,2,this._vertexBufferSize,this._useInstancing),n+=2;this._vertexBuffers.offset=a},t.prototype._createIndexBuffer=function(){if(!this._useInstancing){for(var e=[],t=0,n=0;n<this._capacity;n++)e.push(t),e.push(t+1),e.push(t+2),e.push(t),e.push(t+2),e.push(t+3),t+=4;this._indexBuffer=this._scene.getEngine().createIndexBuffer(e)}},t.prototype.getCapacity=function(){return this._capacity},t.prototype.isAlive=function(){return this._alive},t.prototype.isStarted=function(){return this._started},t.prototype._prepareSubEmitterInternalArray=function(){var e=this;this._subEmitters=new Array,this.subEmitters&&this.subEmitters.forEach(function(n){n instanceof t?e._subEmitters.push([new Ra(n)]):n instanceof Ra?e._subEmitters.push([n]):n instanceof Array&&e._subEmitters.push(n)})},t.prototype.start=function(e){var t=this;if(void 0===e&&(e=this.startDelay),!this.targetStopDuration&&this._hasTargetStopDurationDependantGradient())throw"Particle system started with a targetStopDuration dependant gradient (eg. startSizeGradients) but no targetStopDuration set";if(e)setTimeout(function(){t.start(0)},e);else{if(this._prepareSubEmitterInternalArray(),this._started=!0,this._stopped=!1,this._actualFrame=0,this._subEmitters&&0!=this._subEmitters.length&&(this.activeSubSystems=new Array),this._emitRateGradients&&(this._emitRateGradients.length>0&&(this._currentEmitRateGradient=this._emitRateGradients[0],this._currentEmitRate1=this._currentEmitRateGradient.getFactor(),this._currentEmitRate2=this._currentEmitRate1),this._emitRateGradients.length>1&&(this._currentEmitRate2=this._emitRateGradients[1].getFactor())),this._startSizeGradients&&(this._startSizeGradients.length>0&&(this._currentStartSizeGradient=this._startSizeGradients[0],this._currentStartSize1=this._currentStartSizeGradient.getFactor(),this._currentStartSize2=this._currentStartSize1),this._startSizeGradients.length>1&&(this._currentStartSize2=this._startSizeGradients[1].getFactor())),this.preWarmCycles){this.emitter instanceof Fe.a&&this.emitter.computeWorldMatrix(!0);var n=this.noiseTexture;if(n&&n.onGeneratedObservable)n.onGeneratedObservable.addOnce(function(){setTimeout(function(){for(var e=0;e<t.preWarmCycles;e++)t.animate(!0),n.render()})});else for(var r=0;r<this.preWarmCycles;r++)this.animate(!0)}this.beginAnimationOnStart&&this.animations&&this.animations.length>0&&this.getScene().beginAnimation(this,this.beginAnimationFrom,this.beginAnimationTo,this.beginAnimationLoop)}},t.prototype.stop=function(e){void 0===e&&(e=!0),this._stopped=!0,e&&this._stopSubEmitters()},t.prototype.reset=function(){this._stockParticles=[],this._particles=[]},t.prototype._appendParticleVertex=function(e,n,r,i){var o=e*this._vertexBufferSize;this._vertexData[o++]=n.position.x+this.worldOffset.x,this._vertexData[o++]=n.position.y+this.worldOffset.y,this._vertexData[o++]=n.position.z+this.worldOffset.z,this._vertexData[o++]=n.color.r,this._vertexData[o++]=n.color.g,this._vertexData[o++]=n.color.b,this._vertexData[o++]=n.color.a,this._vertexData[o++]=n.angle,this._vertexData[o++]=n.scale.x*n.size,this._vertexData[o++]=n.scale.y*n.size,this._isAnimationSheetEnabled&&(this._vertexData[o++]=n.cellIndex),this._isBillboardBased?this.billboardMode===t.BILLBOARDMODE_STRETCHED&&(this._vertexData[o++]=n.direction.x,this._vertexData[o++]=n.direction.y,this._vertexData[o++]=n.direction.z):n._initialDirection?(this._vertexData[o++]=n._initialDirection.x,this._vertexData[o++]=n._initialDirection.y,this._vertexData[o++]=n._initialDirection.z):(this._vertexData[o++]=n.direction.x,this._vertexData[o++]=n.direction.y,this._vertexData[o++]=n.direction.z),this._useRampGradients&&(this._vertexData[o++]=n.remapData.x,this._vertexData[o++]=n.remapData.y,this._vertexData[o++]=n.remapData.z,this._vertexData[o++]=n.remapData.w),this._useInstancing||(this._isAnimationSheetEnabled&&(0===r?r=this._epsilon:1===r&&(r=1-this._epsilon),0===i?i=this._epsilon:1===i&&(i=1-this._epsilon)),this._vertexData[o++]=r,this._vertexData[o++]=i)},t.prototype._stopSubEmitters=function(){this.activeSubSystems&&(this.activeSubSystems.forEach(function(e){e.stop(!0)}),this.activeSubSystems=new Array)},t.prototype._removeFromRoot=function(){if(this._rootParticleSystem){var e=this._rootParticleSystem.activeSubSystems.indexOf(this);-1!==e&&this._rootParticleSystem.activeSubSystems.splice(e,1),this._rootParticleSystem=null}},t.prototype._update=function(e){var t,n=this;if(this._alive=this._particles.length>0,this.emitter.position)this._emitterWorldMatrix=this.emitter.getWorldMatrix();else{var r=this.emitter;this._emitterWorldMatrix=o.j.Translation(r.x,r.y,r.z)}this.updateFunction(this._particles);for(var i,a=function(){if(s._particles.length===s._capacity)return"break";t=s._createParticle(),s._particles.push(t);var e=w.a.RandomRange(s.minEmitPower,s.maxEmitPower);if(s.startPositionFunction?s.startPositionFunction(s._emitterWorldMatrix,t.position,t):s.particleEmitterType.startPositionFunction(s._emitterWorldMatrix,t.position,t),s.startDirectionFunction?s.startDirectionFunction(s._emitterWorldMatrix,t.direction,t):s.particleEmitterType.startDirectionFunction(s._emitterWorldMatrix,t.direction,t),0===e?t._initialDirection?t._initialDirection.copyFrom(t.direction):t._initialDirection=t.direction.clone():t._initialDirection=null,t.direction.scaleInPlace(e),s.targetStopDuration&&s._lifeTimeGradients&&s._lifeTimeGradients.length>0){var r=w.a.Clamp(s._actualFrame/s.targetStopDuration);ye.h.GetCurrentGradient(r,s._lifeTimeGradients,function(e,n){var i=e,o=n,a=i.getFactor(),s=o.getFactor();t.lifeTime=w.a.Lerp(a,s,(r-i.gradient)/(o.gradient-i.gradient))})}else t.lifeTime=w.a.RandomRange(s.minLifeTime,s.maxLifeTime);s._sizeGradients&&0!==s._sizeGradients.length?(t._currentSizeGradient=s._sizeGradients[0],t._currentSize1=t._currentSizeGradient.getFactor(),t.size=t._currentSize1,t._currentSize2=s._sizeGradients.length>1?s._sizeGradients[1].getFactor():t._currentSize1):t.size=w.a.RandomRange(s.minSize,s.maxSize),t.scale.copyFromFloats(w.a.RandomRange(s.minScaleX,s.maxScaleX),w.a.RandomRange(s.minScaleY,s.maxScaleY)),s._startSizeGradients&&s._startSizeGradients[0]&&s.targetStopDuration&&ye.h.GetCurrentGradient(s._actualFrame/s.targetStopDuration,s._startSizeGradients,function(e,r,i){e!==n._currentStartSizeGradient&&(n._currentStartSize1=n._currentStartSize2,n._currentStartSize2=r.getFactor(),n._currentStartSizeGradient=e);var o=w.a.Lerp(n._currentStartSize1,n._currentStartSize2,i);t.scale.scaleInPlace(o)}),s._angularSpeedGradients&&0!==s._angularSpeedGradients.length?(t._currentAngularSpeedGradient=s._angularSpeedGradients[0],t.angularSpeed=t._currentAngularSpeedGradient.getFactor(),t._currentAngularSpeed1=t.angularSpeed,t._currentAngularSpeed2=s._angularSpeedGradients.length>1?s._angularSpeedGradients[1].getFactor():t._currentAngularSpeed1):t.angularSpeed=w.a.RandomRange(s.minAngularSpeed,s.maxAngularSpeed),t.angle=w.a.RandomRange(s.minInitialRotation,s.maxInitialRotation),s._velocityGradients&&s._velocityGradients.length>0&&(t._currentVelocityGradient=s._velocityGradients[0],t._currentVelocity1=t._currentVelocityGradient.getFactor(),t._currentVelocity2=s._velocityGradients.length>1?s._velocityGradients[1].getFactor():t._currentVelocity1),s._limitVelocityGradients&&s._limitVelocityGradients.length>0&&(t._currentLimitVelocityGradient=s._limitVelocityGradients[0],t._currentLimitVelocity1=t._currentLimitVelocityGradient.getFactor(),t._currentLimitVelocity2=s._limitVelocityGradients.length>1?s._limitVelocityGradients[1].getFactor():t._currentLimitVelocity1),s._dragGradients&&s._dragGradients.length>0&&(t._currentDragGradient=s._dragGradients[0],t._currentDrag1=t._currentDragGradient.getFactor(),t._currentDrag2=s._dragGradients.length>1?s._dragGradients[1].getFactor():t._currentDrag1),s._colorGradients&&0!==s._colorGradients.length?(t._currentColorGradient=s._colorGradients[0],t._currentColorGradient.getColorToRef(t.color),t._currentColor1.copyFrom(t.color),s._colorGradients.length>1?s._colorGradients[1].getColorToRef(t._currentColor2):t._currentColor2.copyFrom(t.color)):(i=w.a.RandomRange(0,1),o.f.LerpToRef(s.color1,s.color2,i,t.color),s.colorDead.subtractToRef(t.color,s._colorDiff),s._colorDiff.scaleToRef(1/t.lifeTime,t.colorStep)),s._isAnimationSheetEnabled&&(t._initialStartSpriteCellID=s.startSpriteCellID,t._initialEndSpriteCellID=s.endSpriteCellID),t.direction.addInPlace(s._inheritedVelocityOffset),s._useRampGradients&&(t.remapData=new o.y(0,1,0,1)),s.noiseTexture&&(t._randomNoiseCoordinates1?(t._randomNoiseCoordinates1.copyFromFloats(Math.random(),Math.random(),Math.random()),t._randomNoiseCoordinates2.copyFromFloats(Math.random(),Math.random(),Math.random())):(t._randomNoiseCoordinates1=new o.x(Math.random(),Math.random(),Math.random()),t._randomNoiseCoordinates2=new o.x(Math.random(),Math.random(),Math.random()))),t._inheritParticleInfoToSubEmitters()},s=this,u=0;u<e&&"break"!==a();u++);},t._GetAttributeNamesOrOptions=function(e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);var r=[Mn.b.PositionKind,Mn.b.ColorKind,"angle","offset","size"];return e&&r.push("cellIndex"),t||r.push("direction"),n&&r.push("remapData"),r},t._GetEffectCreationOptions=function(e){void 0===e&&(e=!1);var t=["invView","view","projection","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","textureMask","translationPivot","eyePosition"];return e&&t.push("particlesInfos"),t},t.prototype._getEffect=function(e){if(this._customEffect)return this._customEffect;var n=[];if(this._scene.clipPlane&&n.push("#define CLIPPLANE"),this._scene.clipPlane2&&n.push("#define CLIPPLANE2"),this._scene.clipPlane3&&n.push("#define CLIPPLANE3"),this._scene.clipPlane4&&n.push("#define CLIPPLANE4"),this._isAnimationSheetEnabled&&n.push("#define ANIMATESHEET"),e===t.BLENDMODE_MULTIPLY&&n.push("#define BLENDMULTIPLYMODE"),this._useRampGradients&&n.push("#define RAMPGRADIENT"),this._isBillboardBased)switch(n.push("#define BILLBOARD"),this.billboardMode){case t.BILLBOARDMODE_Y:n.push("#define BILLBOARDY");break;case t.BILLBOARDMODE_STRETCHED:n.push("#define BILLBOARDSTRETCHED")}this._imageProcessingConfiguration&&(this._imageProcessingConfiguration.prepareDefines(this._imageProcessingConfigurationDefines),n.push(this._imageProcessingConfigurationDefines.toString()));var r=n.join("\n");if(this._cachedDefines!==r){this._cachedDefines=r;var i=t._GetAttributeNamesOrOptions(this._isAnimationSheetEnabled,this._isBillboardBased&&this.billboardMode!==t.BILLBOARDMODE_STRETCHED,this._useRampGradients),o=t._GetEffectCreationOptions(this._isAnimationSheetEnabled),a=["diffuseSampler","rampSampler"];vn.a&&(vn.a.PrepareUniforms(o,this._imageProcessingConfigurationDefines),vn.a.PrepareSamplers(a,this._imageProcessingConfigurationDefines)),this._effect=this._scene.getEngine().createEffect("particles",i,o,a,r)}return this._effect},t.prototype.animate=function(e){var t=this;if(void 0===e&&(e=!1),this._started){if(!e){if(!this.isReady())return;if(this._currentRenderId===this._scene.getFrameId())return;this._currentRenderId=this._scene.getFrameId()}var n;if(this._scaledUpdateSpeed=this.updateSpeed*(e?this.preWarmStepOffset:this._scene.getAnimationRatio()),this.manualEmitCount>-1)n=this.manualEmitCount,this._newPartsExcess=0,this.manualEmitCount=0;else{var r=this.emitRate;this._emitRateGradients&&this._emitRateGradients.length>0&&this.targetStopDuration&&ye.h.GetCurrentGradient(this._actualFrame/this.targetStopDuration,this._emitRateGradients,function(e,n,i){e!==t._currentEmitRateGradient&&(t._currentEmitRate1=t._currentEmitRate2,t._currentEmitRate2=n.getFactor(),t._currentEmitRateGradient=e),r=w.a.Lerp(t._currentEmitRate1,t._currentEmitRate2,i)}),this._newPartsExcess+=r*this._scaledUpdateSpeed-(n=r*this._scaledUpdateSpeed>>0)}if(this._newPartsExcess>1&&(n+=this._newPartsExcess>>0,this._newPartsExcess-=this._newPartsExcess>>0),this._alive=!1,this._stopped?n=0:(this._actualFrame+=this._scaledUpdateSpeed,this.targetStopDuration&&this._actualFrame>=this.targetStopDuration&&this.stop()),this._update(n),this._stopped&&(this._alive||(this._started=!1,this.onAnimationEnd&&this.onAnimationEnd(),this.disposeOnStop&&this._scene._toBeDisposed.push(this))),!e){for(var i=0,o=0;o<this._particles.length;o++)this._appendParticleVertices(i,this._particles[o]),i+=this._useInstancing?1:4;this._vertexBuffer&&this._vertexBuffer.update(this._vertexData)}0===this.manualEmitCount&&this.disposeOnStop&&this.stop()}},t.prototype._appendParticleVertices=function(e,t){this._appendParticleVertex(e++,t,0,0),this._useInstancing||(this._appendParticleVertex(e++,t,1,0),this._appendParticleVertex(e++,t,1,1),this._appendParticleVertex(e++,t,0,1))},t.prototype.rebuild=function(){this._createIndexBuffer(),this._vertexBuffer&&this._vertexBuffer._rebuild()},t.prototype.isReady=function(){if(!(this.emitter&&this._imageProcessingConfiguration.isReady()&&this.particleTexture&&this.particleTexture.isReady()))return!1;if(this.blendMode!==t.BLENDMODE_MULTIPLYADD){if(!this._getEffect(this.blendMode).isReady())return!1}else{if(!this._getEffect(t.BLENDMODE_MULTIPLY).isReady())return!1;if(!this._getEffect(t.BLENDMODE_ADD).isReady())return!1}return!0},t.prototype._render=function(e){var n=this._getEffect(e),r=this._scene.getEngine();r.enableEffect(n);var i=this._scene.getViewMatrix();if(n.setTexture("diffuseSampler",this.particleTexture),n.setMatrix("view",i),n.setMatrix("projection",this._scene.getProjectionMatrix()),this._isAnimationSheetEnabled&&this.particleTexture){var o=this.particleTexture.getBaseSize();n.setFloat3("particlesInfos",this.spriteCellWidth/o.width,this.spriteCellHeight/o.height,o.width/this.spriteCellWidth)}if(n.setVector2("translationPivot",this.translationPivot),n.setFloat4("textureMask",this.textureMask.r,this.textureMask.g,this.textureMask.b,this.textureMask.a),this._isBillboardBased&&n.setVector3("eyePosition",this._scene.activeCamera.globalPosition),this._rampGradientsTexture&&n.setTexture("rampSampler",this._rampGradientsTexture),this._scene.clipPlane||this._scene.clipPlane2||this._scene.clipPlane3||this._scene.clipPlane4){var a=i.clone();a.invert(),n.setMatrix("invView",a),Hr.a.BindClipPlane(n,this._scene)}switch(r.bindBuffers(this._vertexBuffers,this._indexBuffer,n),this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.applyByPostProcess&&this._imageProcessingConfiguration.bind(n),e){case t.BLENDMODE_ADD:r.setAlphaMode(_.a.ALPHA_ADD);break;case t.BLENDMODE_ONEONE:r.setAlphaMode(_.a.ALPHA_ONEONE);break;case t.BLENDMODE_STANDARD:r.setAlphaMode(_.a.ALPHA_COMBINE);break;case t.BLENDMODE_MULTIPLY:r.setAlphaMode(_.a.ALPHA_MULTIPLY)}return this._useInstancing?r.drawArraysType(Ci.a.TriangleFanDrawMode,0,4,this._particles.length):r.drawElementsType(Ci.a.TriangleFillMode,0,6*this._particles.length),this._particles.length},t.prototype.render=function(){if(!this.isReady()||!this._particles.length)return 0;var e=this._scene.getEngine();e.setState(!1),this.forceDepthWrite&&e.setDepthWrite(!0);var n=0;return this.blendMode===t.BLENDMODE_MULTIPLYADD&&(n=this._render(t.BLENDMODE_MULTIPLY)+this._render(t.BLENDMODE_ADD)),n=this._render(this.blendMode),e.unbindInstanceAttributes(),e.setAlphaMode(_.a.ALPHA_DISABLE),n},t.prototype.dispose=function(e){if(void 0===e&&(e=!0),this._vertexBuffer&&(this._vertexBuffer.dispose(),this._vertexBuffer=null),this._spriteBuffer&&(this._spriteBuffer.dispose(),this._spriteBuffer=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null),e&&this.particleTexture&&(this.particleTexture.dispose(),this.particleTexture=null),e&&this.noiseTexture&&(this.noiseTexture.dispose(),this.noiseTexture=null),this._rampGradientsTexture&&(this._rampGradientsTexture.dispose(),this._rampGradientsTexture=null),this._removeFromRoot(),this._subEmitters&&this._subEmitters.length){for(var t=0;t<this._subEmitters.length;t++)for(var n=0,r=this._subEmitters[t];n<r.length;n++)r[n].dispose();this._subEmitters=[],this.subEmitters=[]}this._disposeEmitterOnDispose&&this.emitter&&this.emitter.dispose&&this.emitter.dispose(!0),(t=this._scene.particleSystems.indexOf(this))>-1&&this._scene.particleSystems.splice(t,1),this._scene._activeParticleSystems.dispose(),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear(),this.reset()},t.prototype.clone=function(e,n){var r=null,i=null;if(null!=this.customShader){var o=(i=this.customShader).shaderOptions.defines.length>0?i.shaderOptions.defines.join("\n"):"";r=this._scene.getEngine().createEffectForParticles(i.shaderPath.fragmentElement,i.shaderOptions.uniforms,i.shaderOptions.samplers,o)}else this._customEffect&&(r=this._customEffect);var a=new t(e,this._capacity,this._scene,r);return a.customShader=i,C.a.DeepCopy(this,a,["particles","customShader","noiseTexture"]),void 0===n&&(n=this.emitter),a.noiseTexture=this.noiseTexture,a.emitter=n,this.particleTexture&&(a.particleTexture=new Ge.a(this.particleTexture.url,this._scene)),this._colorGradients&&this._colorGradients.forEach(function(e){a.addColorGradient(e.gradient,e.color1,e.color2)}),this._dragGradients&&this._dragGradients.forEach(function(e){a.addDragGradient(e.gradient,e.factor1,e.factor2)}),this._angularSpeedGradients&&this._angularSpeedGradients.forEach(function(e){a.addAngularSpeedGradient(e.gradient,e.factor1,e.factor2)}),this._emitRateGradients&&this._emitRateGradients.forEach(function(e){a.addEmitRateGradient(e.gradient,e.factor1,e.factor2)}),this._lifeTimeGradients&&this._lifeTimeGradients.forEach(function(e){a.addLifeTimeGradient(e.gradient,e.factor1,e.factor2)}),this._limitVelocityGradients&&this._limitVelocityGradients.forEach(function(e){a.addLimitVelocityGradient(e.gradient,e.factor1,e.factor2)}),this._sizeGradients&&this._sizeGradients.forEach(function(e){a.addSizeGradient(e.gradient,e.factor1,e.factor2)}),this._startSizeGradients&&this._startSizeGradients.forEach(function(e){a.addStartSizeGradient(e.gradient,e.factor1,e.factor2)}),this._velocityGradients&&this._velocityGradients.forEach(function(e){a.addVelocityGradient(e.gradient,e.factor1,e.factor2)}),this._rampGradients&&this._rampGradients.forEach(function(e){a.addRampGradient(e.gradient,e.color)}),this._colorRemapGradients&&this._colorRemapGradients.forEach(function(e){a.addColorRemapGradient(e.gradient,e.factor1,e.factor2)}),this._alphaRemapGradients&&this._alphaRemapGradients.forEach(function(e){a.addAlphaRemapGradient(e.gradient,e.factor1,e.factor2)}),this.preventAutoStart||a.start(),a},t.prototype.serialize=function(){var e={};if(t._Serialize(e,this),e.textureMask=this.textureMask.asArray(),e.customShader=this.customShader,e.preventAutoStart=this.preventAutoStart,this.subEmitters){e.subEmitters=[],this._subEmitters||this._prepareSubEmitterInternalArray();for(var n=0,r=this._subEmitters;n<r.length;n++){for(var i=[],o=0,a=r[n];o<a.length;o++)i.push(a[o].serialize());e.subEmitters.push(i)}}return e},t._Serialize=function(e,t){e.name=t.name,e.id=t.id,e.capacity=t.getCapacity(),t.emitter.position?e.emitterId=t.emitter.id:e.emitter=t.emitter.asArray(),t.particleEmitterType&&(e.particleEmitterType=t.particleEmitterType.serialize()),t.particleTexture&&(e.textureName=t.particleTexture.name,e.invertY=t.particleTexture._invertY),L.a.AppendSerializedAnimations(t,e),e.beginAnimationOnStart=t.beginAnimationOnStart,e.beginAnimationFrom=t.beginAnimationFrom,e.beginAnimationTo=t.beginAnimationTo,e.beginAnimationLoop=t.beginAnimationLoop,e.startDelay=t.startDelay,e.renderingGroupId=t.renderingGroupId,e.isBillboardBased=t.isBillboardBased,e.billboardMode=t.billboardMode,e.minAngularSpeed=t.minAngularSpeed,e.maxAngularSpeed=t.maxAngularSpeed,e.minSize=t.minSize,e.maxSize=t.maxSize,e.minScaleX=t.minScaleX,e.maxScaleX=t.maxScaleX,e.minScaleY=t.minScaleY,e.maxScaleY=t.maxScaleY,e.minEmitPower=t.minEmitPower,e.maxEmitPower=t.maxEmitPower,e.minLifeTime=t.minLifeTime,e.maxLifeTime=t.maxLifeTime,e.emitRate=t.emitRate,e.gravity=t.gravity.asArray(),e.noiseStrength=t.noiseStrength.asArray(),e.color1=t.color1.asArray(),e.color2=t.color2.asArray(),e.colorDead=t.colorDead.asArray(),e.updateSpeed=t.updateSpeed,e.targetStopDuration=t.targetStopDuration,e.blendMode=t.blendMode,e.preWarmCycles=t.preWarmCycles,e.preWarmStepOffset=t.preWarmStepOffset,e.minInitialRotation=t.minInitialRotation,e.maxInitialRotation=t.maxInitialRotation,e.startSpriteCellID=t.startSpriteCellID,e.endSpriteCellID=t.endSpriteCellID,e.spriteCellChangeSpeed=t.spriteCellChangeSpeed,e.spriteCellWidth=t.spriteCellWidth,e.spriteCellHeight=t.spriteCellHeight,e.spriteRandomStartCell=t.spriteRandomStartCell,e.isAnimationSheetEnabled=t.isAnimationSheetEnabled;var n=t.getColorGradients();if(n){e.colorGradients=[];for(var r=0,i=n;r<i.length;r++){var o=i[r],a={gradient:o.gradient,color1:o.color1.asArray()};o.color2&&(a.color2=o.color2.asArray()),e.colorGradients.push(a)}}var s=t.getRampGradients();if(s){e.rampGradients=[];for(var u=0,l=s;u<l.length;u++){var c=l[u];a={gradient:c.gradient,color:c.color.asArray()},e.rampGradients.push(a)}e.useRampGradients=t.useRampGradients}var h=t.getColorRemapGradients();if(h){e.colorRemapGradients=[];for(var d=0,f=h;d<f.length;d++){var p=f[d];a={gradient:p.gradient,factor1:p.factor1},void 0!==p.factor2&&(a.factor2=p.factor2),e.colorRemapGradients.push(a)}}var _=t.getAlphaRemapGradients();if(_){e.alphaRemapGradients=[];for(var m=0,g=_;m<g.length;m++){var v=g[m];a={gradient:v.gradient,factor1:v.factor1},void 0!==v.factor2&&(a.factor2=v.factor2),e.alphaRemapGradients.push(a)}}var y=t.getSizeGradients();if(y){e.sizeGradients=[];for(var b=0,T=y;b<T.length;b++){var E=T[b];a={gradient:E.gradient,factor1:E.factor1},void 0!==E.factor2&&(a.factor2=E.factor2),e.sizeGradients.push(a)}}var x=t.getAngularSpeedGradients();if(x){e.angularSpeedGradients=[];for(var M=0,A=x;M<A.length;M++){var S=A[M];a={gradient:S.gradient,factor1:S.factor1},void 0!==S.factor2&&(a.factor2=S.factor2),e.angularSpeedGradients.push(a)}}var C=t.getVelocityGradients();if(C){e.velocityGradients=[];for(var P=0,R=C;P<R.length;P++){var D=R[P];a={gradient:D.gradient,factor1:D.factor1},void 0!==D.factor2&&(a.factor2=D.factor2),e.velocityGradients.push(a)}}var O=t.getDragGradients();if(O){e.dragyGradients=[];for(var w=0,I=O;w<I.length;w++){var F=I[w];a={gradient:F.gradient,factor1:F.factor1},void 0!==F.factor2&&(a.factor2=F.factor2),e.dragGradients.push(a)}}var N=t.getEmitRateGradients();if(N){e.emitRateGradients=[];for(var B=0,k=N;B<k.length;B++){var U=k[B];a={gradient:U.gradient,factor1:U.factor1},void 0!==U.factor2&&(a.factor2=U.factor2),e.emitRateGradients.push(a)}}var V=t.getStartSizeGradients();if(V){e.startSizeGradients=[];for(var G=0,j=V;G<j.length;G++){var z=j[G];a={gradient:z.gradient,factor1:z.factor1},void 0!==z.factor2&&(a.factor2=z.factor2),e.startSizeGradients.push(a)}}var Y=t.getLifeTimeGradients();if(Y){e.lifeTimeGradients=[];for(var H=0,W=Y;H<W.length;H++){var X=W[H];a={gradient:X.gradient,factor1:X.factor1},void 0!==X.factor2&&(a.factor2=X.factor2),e.lifeTimeGradients.push(a)}}var K=t.getLimitVelocityGradients();if(K){e.limitVelocityGradients=[];for(var Q=0,q=K;Q<q.length;Q++){var Z=q[Q];a={gradient:Z.gradient,factor1:Z.factor1},void 0!==Z.factor2&&(a.factor2=Z.factor2),e.limitVelocityGradients.push(a)}e.limitVelocityDamping=t.limitVelocityDamping}t.noiseTexture&&(e.noiseTexture=t.noiseTexture.serialize())},t._Parse=function(e,t,n,r){if(e.textureName&&(t.particleTexture=new Ge.a(r+e.textureName,n,!1,void 0===e.invertY||e.invertY),t.particleTexture.name=e.textureName),t.emitter=e.emitterId||0===e.emitterId||void 0!==e.emitter?e.emitterId?n.getLastMeshByID(e.emitterId):o.x.FromArray(e.emitter):o.x.Zero(),void 0!==e.renderingGroupId&&(t.renderingGroupId=e.renderingGroupId),void 0!==e.isBillboardBased&&(t.isBillboardBased=e.isBillboardBased),void 0!==e.billboardMode&&(t.billboardMode=e.billboardMode),e.animations){for(var i=0;i<e.animations.length;i++){var s=e.animations[i],u=a.a.GetClass("BABYLON.Animation");u&&t.animations.push(u.Parse(s))}t.beginAnimationOnStart=e.beginAnimationOnStart,t.beginAnimationFrom=e.beginAnimationFrom,t.beginAnimationTo=e.beginAnimationTo,t.beginAnimationLoop=e.beginAnimationLoop}if(e.autoAnimate&&n.beginAnimation(t,e.autoAnimateFrom,e.autoAnimateTo,e.autoAnimateLoop,e.autoAnimateSpeed||1),t.startDelay=0|e.startDelay,t.minAngularSpeed=e.minAngularSpeed,t.maxAngularSpeed=e.maxAngularSpeed,t.minSize=e.minSize,t.maxSize=e.maxSize,e.minScaleX&&(t.minScaleX=e.minScaleX,t.maxScaleX=e.maxScaleX,t.minScaleY=e.minScaleY,t.maxScaleY=e.maxScaleY),void 0!==e.preWarmCycles&&(t.preWarmCycles=e.preWarmCycles,t.preWarmStepOffset=e.preWarmStepOffset),void 0!==e.minInitialRotation&&(t.minInitialRotation=e.minInitialRotation,t.maxInitialRotation=e.maxInitialRotation),t.minLifeTime=e.minLifeTime,t.maxLifeTime=e.maxLifeTime,t.minEmitPower=e.minEmitPower,t.maxEmitPower=e.maxEmitPower,t.emitRate=e.emitRate,t.gravity=o.x.FromArray(e.gravity),e.noiseStrength&&(t.noiseStrength=o.x.FromArray(e.noiseStrength)),t.color1=o.f.FromArray(e.color1),t.color2=o.f.FromArray(e.color2),t.colorDead=o.f.FromArray(e.colorDead),t.updateSpeed=e.updateSpeed,t.targetStopDuration=e.targetStopDuration,t.blendMode=e.blendMode,e.colorGradients)for(var l=0,c=e.colorGradients;l<c.length;l++){var h=c[l];t.addColorGradient(h.gradient,o.f.FromArray(h.color1),h.color2?o.f.FromArray(h.color2):void 0)}if(e.rampGradients){for(var d=0,f=e.rampGradients;d<f.length;d++){var p=f[d];t.addRampGradient(p.gradient,o.e.FromArray(p.color))}t.useRampGradients=e.useRampGradients}if(e.colorRemapGradients)for(var _=0,m=e.colorRemapGradients;_<m.length;_++){var g=m[_];t.addColorRemapGradient(g.gradient,void 0!==g.factor1?g.factor1:g.factor,g.factor2)}if(e.alphaRemapGradients)for(var v=0,y=e.alphaRemapGradients;v<y.length;v++){var b=y[v];t.addAlphaRemapGradient(b.gradient,void 0!==b.factor1?b.factor1:b.factor,b.factor2)}if(e.sizeGradients)for(var T=0,E=e.sizeGradients;T<E.length;T++){var x=E[T];t.addSizeGradient(x.gradient,void 0!==x.factor1?x.factor1:x.factor,x.factor2)}if(e.sizeGradients)for(var M=0,A=e.sizeGradients;M<A.length;M++)t.addSizeGradient((x=A[M]).gradient,void 0!==x.factor1?x.factor1:x.factor,x.factor2);if(e.angularSpeedGradients)for(var S=0,C=e.angularSpeedGradients;S<C.length;S++){var P=C[S];t.addAngularSpeedGradient(P.gradient,void 0!==P.factor1?P.factor1:P.factor,P.factor2)}if(e.velocityGradients)for(var R=0,D=e.velocityGradients;R<D.length;R++){var O=D[R];t.addVelocityGradient(O.gradient,void 0!==O.factor1?O.factor1:O.factor,O.factor2)}if(e.dragGradients)for(var w=0,L=e.dragGradients;w<L.length;w++){var I=L[w];t.addDragGradient(I.gradient,void 0!==I.factor1?I.factor1:I.factor,I.factor2)}if(e.emitRateGradients)for(var F=0,N=e.emitRateGradients;F<N.length;F++){var B=N[F];t.addEmitRateGradient(B.gradient,void 0!==B.factor1?B.factor1:B.factor,B.factor2)}if(e.startSizeGradients)for(var k=0,U=e.startSizeGradients;k<U.length;k++){var V=U[k];t.addStartSizeGradient(V.gradient,void 0!==V.factor1?V.factor1:V.factor,V.factor2)}if(e.lifeTimeGradients)for(var G=0,j=e.lifeTimeGradients;G<j.length;G++){var z=j[G];t.addLifeTimeGradient(z.gradient,void 0!==z.factor1?z.factor1:z.factor,z.factor2)}if(e.limitVelocityGradients){for(var Y=0,H=e.limitVelocityGradients;Y<H.length;Y++){var W=H[Y];t.addLimitVelocityGradient(W.gradient,void 0!==W.factor1?W.factor1:W.factor,W.factor2)}t.limitVelocityDamping=e.limitVelocityDamping}var X;if(e.noiseTexture&&(t.noiseTexture=xo.Parse(e.noiseTexture,n,r)),e.particleEmitterType){switch(e.particleEmitterType.type){case"SphereParticleEmitter":X=new Aa;break;case"SphereDirectedParticleEmitter":X=new Sa;break;case"ConeEmitter":case"ConeParticleEmitter":X=new ba;break;case"CylinderParticleEmitter":X=new Ta;break;case"HemisphericParticleEmitter":X=new xa;break;case"BoxEmitter":case"BoxParticleEmitter":default:X=new ya}X.parse(e.particleEmitterType)}else(X=new ya).parse(e);t.particleEmitterType=X,t.startSpriteCellID=e.startSpriteCellID,t.endSpriteCellID=e.endSpriteCellID,t.spriteCellWidth=e.spriteCellWidth,t.spriteCellHeight=e.spriteCellHeight,t.spriteCellChangeSpeed=e.spriteCellChangeSpeed,t.spriteRandomStartCell=e.spriteRandomStartCell},t.Parse=function(e,n,r,i){void 0===i&&(i=!1);var a=e.name,s=null,u=null;if(e.customShader){var l=(u=e.customShader).shaderOptions.defines.length>0?u.shaderOptions.defines.join("\n"):"";s=n.getEngine().createEffectForParticles(u.shaderPath.fragmentElement,u.shaderOptions.uniforms,u.shaderOptions.samplers,l)}var c=new t(a,e.capacity,n,s,e.isAnimationSheetEnabled);if(c.customShader=u,e.id&&(c.id=e.id),e.subEmitters){c.subEmitters=[];for(var h=0,d=e.subEmitters;h<d.length;h++){for(var f=[],p=0,_=d[h];p<_.length;p++)f.push(Ra.Parse(_[p],n,r));c.subEmitters.push(f)}}return t._Parse(e,c,n,r),c.textureMask=o.f.FromArray(e.textureMask),e.preventAutoStart&&(c.preventAutoStart=e.preventAutoStart),i||c.preventAutoStart||c.start(),c},t.BILLBOARDMODE_Y=_.a.PARTICLES_BILLBOARDMODE_Y,t.BILLBOARDMODE_ALL=_.a.PARTICLES_BILLBOARDMODE_ALL,t.BILLBOARDMODE_STRETCHED=_.a.PARTICLES_BILLBOARDMODE_STRETCHED,t}(Ca);Ra._ParseParticleSystem=Da.Parse,jt.a.ShadersStore.gpuUpdateParticlesPixelShader="#version 300 es\nvoid main() {\ndiscard;\n}\n",jt.a.ShadersStore.gpuUpdateParticlesVertexShader="#version 300 es\n#define PI 3.14159\nuniform float currentCount;\nuniform float timeDelta;\nuniform float stopFactor;\nuniform mat4 emitterWM;\nuniform vec2 lifeTime;\nuniform vec2 emitPower;\nuniform vec2 sizeRange;\nuniform vec4 scaleRange;\n#ifndef COLORGRADIENTS\nuniform vec4 color1;\nuniform vec4 color2;\n#endif\nuniform vec3 gravity;\nuniform sampler2D randomSampler;\nuniform sampler2D randomSampler2;\nuniform vec4 angleRange;\n#ifdef BOXEMITTER\nuniform vec3 direction1;\nuniform vec3 direction2;\nuniform vec3 minEmitBox;\nuniform vec3 maxEmitBox;\n#endif\n#ifdef POINTEMITTER\nuniform vec3 direction1;\nuniform vec3 direction2;\n#endif\n#ifdef HEMISPHERICEMITTER\nuniform float radius;\nuniform float radiusRange;\nuniform float directionRandomizer;\n#endif\n#ifdef SPHEREEMITTER\nuniform float radius;\nuniform float radiusRange;\n#ifdef DIRECTEDSPHEREEMITTER\nuniform vec3 direction1;\nuniform vec3 direction2;\n#else\nuniform float directionRandomizer;\n#endif\n#endif\n#ifdef CYLINDEREMITTER\nuniform float radius;\nuniform float height;\nuniform float radiusRange;\n#ifdef DIRECTEDCYLINDEREMITTER\nuniform vec3 direction1;\nuniform vec3 direction2;\n#else\nuniform float directionRandomizer;\n#endif\n#endif\n#ifdef CONEEMITTER\nuniform vec2 radius;\nuniform float coneAngle;\nuniform vec2 height;\nuniform float directionRandomizer;\n#endif\n\nin vec3 position;\nin float age;\nin float life;\nin vec4 seed;\nin vec3 size;\n#ifndef COLORGRADIENTS\nin vec4 color;\n#endif\nin vec3 direction;\n#ifndef BILLBOARD\nin vec3 initialDirection;\n#endif\n#ifdef ANGULARSPEEDGRADIENTS\nin float angle;\n#else\nin vec2 angle;\n#endif\n#ifdef ANIMATESHEET\nin float cellIndex;\n#ifdef ANIMATESHEETRANDOMSTART\nin float cellStartOffset;\n#endif\n#endif\n#ifdef NOISE\nin vec3 noiseCoordinates1;\nin vec3 noiseCoordinates2;\n#endif\n\nout vec3 outPosition;\nout float outAge;\nout float outLife;\nout vec4 outSeed;\nout vec3 outSize;\n#ifndef COLORGRADIENTS\nout vec4 outColor;\n#endif\nout vec3 outDirection;\n#ifndef BILLBOARD\nout vec3 outInitialDirection;\n#endif\n#ifdef ANGULARSPEEDGRADIENTS\nout float outAngle;\n#else\nout vec2 outAngle;\n#endif\n#ifdef ANIMATESHEET\nout float outCellIndex;\n#ifdef ANIMATESHEETRANDOMSTART\nout float outCellStartOffset;\n#endif\n#endif\n#ifdef NOISE\nout vec3 outNoiseCoordinates1;\nout vec3 outNoiseCoordinates2;\n#endif\n#ifdef SIZEGRADIENTS\nuniform sampler2D sizeGradientSampler;\n#endif\n#ifdef ANGULARSPEEDGRADIENTS\nuniform sampler2D angularSpeedGradientSampler;\n#endif\n#ifdef VELOCITYGRADIENTS\nuniform sampler2D velocityGradientSampler;\n#endif\n#ifdef LIMITVELOCITYGRADIENTS\nuniform sampler2D limitVelocityGradientSampler;\nuniform float limitVelocityDamping;\n#endif\n#ifdef DRAGGRADIENTS\nuniform sampler2D dragGradientSampler;\n#endif\n#ifdef NOISE\nuniform vec3 noiseStrength;\nuniform sampler2D noiseSampler;\n#endif\n#ifdef ANIMATESHEET\nuniform vec3 cellInfos;\n#endif\nvec3 getRandomVec3(float offset) {\nreturn texture(randomSampler2,vec2(float(gl_VertexID)*offset/currentCount,0)).rgb;\n}\nvec4 getRandomVec4(float offset) {\nreturn texture(randomSampler,vec2(float(gl_VertexID)*offset/currentCount,0));\n}\nvoid main() {\nfloat newAge=age+timeDelta;\n\nif (newAge>=life && stopFactor != 0.) {\nvec3 position;\nvec3 direction;\n\nvec4 randoms=getRandomVec4(seed.x);\n\noutLife=lifeTime.x+(lifeTime.y-lifeTime.x)*randoms.r;\noutAge=mod(newAge,outLife);\n\noutSeed=seed;\n\n#ifdef SIZEGRADIENTS\noutSize.x=texture(sizeGradientSampler,vec2(0,0)).r;\n#else\noutSize.x=sizeRange.x+(sizeRange.y-sizeRange.x)*randoms.g;\n#endif\noutSize.y=scaleRange.x+(scaleRange.y-scaleRange.x)*randoms.b;\noutSize.z=scaleRange.z+(scaleRange.w-scaleRange.z)*randoms.a;\n#ifndef COLORGRADIENTS\n\noutColor=color1+(color2-color1)*randoms.b;\n#endif\n\n#ifndef ANGULARSPEEDGRADIENTS\noutAngle.y=angleRange.x+(angleRange.y-angleRange.x)*randoms.a;\noutAngle.x=angleRange.z+(angleRange.w-angleRange.z)*randoms.r;\n#else\noutAngle=angleRange.z+(angleRange.w-angleRange.z)*randoms.r;\n#endif\n\n#ifdef POINTEMITTER\nvec3 randoms2=getRandomVec3(seed.y);\nvec3 randoms3=getRandomVec3(seed.z);\nposition=vec3(0,0,0);\ndirection=direction1+(direction2-direction1)*randoms3;\n#elif defined(BOXEMITTER)\nvec3 randoms2=getRandomVec3(seed.y);\nvec3 randoms3=getRandomVec3(seed.z);\nposition=minEmitBox+(maxEmitBox-minEmitBox)*randoms2;\ndirection=direction1+(direction2-direction1)*randoms3;\n#elif defined(HEMISPHERICEMITTER)\nvec3 randoms2=getRandomVec3(seed.y);\nvec3 randoms3=getRandomVec3(seed.z);\n\nfloat phi=2.0*PI*randoms2.x;\nfloat theta=acos(2.0*randoms2.y-1.0);\nfloat randX=cos(phi)*sin(theta);\nfloat randY=cos(theta);\nfloat randZ=sin(phi)*sin(theta);\nposition=(radius-(radius*radiusRange*randoms2.z))*vec3(randX,abs(randY),randZ);\ndirection=position+directionRandomizer*randoms3;\n#elif defined(SPHEREEMITTER)\nvec3 randoms2=getRandomVec3(seed.y);\nvec3 randoms3=getRandomVec3(seed.z);\n\nfloat phi=2.0*PI*randoms2.x;\nfloat theta=acos(2.0*randoms2.y-1.0);\nfloat randX=cos(phi)*sin(theta);\nfloat randY=cos(theta);\nfloat randZ=sin(phi)*sin(theta);\nposition=(radius-(radius*radiusRange*randoms2.z))*vec3(randX,randY,randZ);\n#ifdef DIRECTEDSPHEREEMITTER\ndirection=direction1+(direction2-direction1)*randoms3;\n#else\n\ndirection=position+directionRandomizer*randoms3;\n#endif\n#elif defined(CYLINDEREMITTER)\nvec3 randoms2=getRandomVec3(seed.y);\nvec3 randoms3=getRandomVec3(seed.z);\n\nfloat yPos=(randoms2.x-0.5)*height;\nfloat angle=randoms2.y*PI*2.;\nfloat inverseRadiusRangeSquared=((1.-radiusRange)*(1.-radiusRange));\nfloat positionRadius=radius*sqrt(inverseRadiusRangeSquared+(randoms2.z*(1.-inverseRadiusRangeSquared)));\nfloat xPos=positionRadius*cos(angle);\nfloat zPos=positionRadius*sin(angle);\nposition=vec3(xPos,yPos,zPos);\n#ifdef DIRECTEDCYLINDEREMITTER\ndirection=direction1+(direction2-direction1)*randoms3;\n#else\n\nangle=angle+((randoms3.x-0.5)*PI);\ndirection=vec3(cos(angle),randoms3.y-0.5,sin(angle));\ndirection=normalize(direction);\n#endif\n#elif defined(CONEEMITTER)\nvec3 randoms2=getRandomVec3(seed.y);\nfloat s=2.0*PI*randoms2.x;\n#ifdef CONEEMITTERSPAWNPOINT\nfloat h=0.00001;\n#else\nfloat h=randoms2.y*height.y;\n\nh=1.-h*h;\n#endif\nfloat lRadius=radius.x-radius.x*randoms2.z*radius.y;\nlRadius=lRadius*h;\nfloat randX=lRadius*sin(s);\nfloat randZ=lRadius*cos(s);\nfloat randY=h*height.x;\nposition=vec3(randX,randY,randZ);\n\nif (abs(cos(coneAngle)) == 1.0) {\ndirection=vec3(0.,1.0,0.);\n} else {\nvec3 randoms3=getRandomVec3(seed.z);\ndirection=position+directionRandomizer*randoms3;\n}\n#else\n\nposition=vec3(0.,0.,0.);\n\ndirection=2.0*(getRandomVec3(seed.w)-vec3(0.5,0.5,0.5));\n#endif\nfloat power=emitPower.x+(emitPower.y-emitPower.x)*randoms.a;\noutPosition=(emitterWM*vec4(position,1.)).xyz;\nvec3 initial=(emitterWM*vec4(direction,0.)).xyz;\noutDirection=initial*power;\n#ifndef BILLBOARD\noutInitialDirection=initial;\n#endif\n#ifdef ANIMATESHEET\noutCellIndex=cellInfos.x;\n#ifdef ANIMATESHEETRANDOMSTART\noutCellStartOffset=randoms.a*outLife;\n#endif\n#endif\n#ifdef NOISE\noutNoiseCoordinates1=noiseCoordinates1;\noutNoiseCoordinates2=noiseCoordinates2;\n#endif\n} else {\nfloat directionScale=timeDelta;\noutAge=newAge;\nfloat ageGradient=newAge/life;\n#ifdef VELOCITYGRADIENTS\ndirectionScale*=texture(velocityGradientSampler,vec2(ageGradient,0)).r;\n#endif\n#ifdef DRAGGRADIENTS\ndirectionScale*=1.0-texture(dragGradientSampler,vec2(ageGradient,0)).r;\n#endif\noutPosition=position+direction*directionScale;\noutLife=life;\noutSeed=seed;\n#ifndef COLORGRADIENTS\noutColor=color;\n#endif\n#ifdef SIZEGRADIENTS\noutSize.x=texture(sizeGradientSampler,vec2(ageGradient,0)).r;\noutSize.yz=size.yz;\n#else\noutSize=size;\n#endif\n#ifndef BILLBOARD\noutInitialDirection=initialDirection;\n#endif\nvec3 updatedDirection=direction+gravity*timeDelta;\n#ifdef LIMITVELOCITYGRADIENTS\nfloat limitVelocity=texture(limitVelocityGradientSampler,vec2(ageGradient,0)).r;\nfloat currentVelocity=length(updatedDirection);\nif (currentVelocity>limitVelocity) {\nupdatedDirection=updatedDirection*limitVelocityDamping;\n}\n#endif\noutDirection=updatedDirection;\n#ifdef NOISE\nvec3 localPosition=outPosition-emitterWM[3].xyz;\nfloat fetchedR=texture(noiseSampler,vec2(noiseCoordinates1.x,noiseCoordinates1.y)*vec2(0.5)+vec2(0.5)).r;\nfloat fetchedG=texture(noiseSampler,vec2(noiseCoordinates1.z,noiseCoordinates2.x)*vec2(0.5)+vec2(0.5)).r;\nfloat fetchedB=texture(noiseSampler,vec2(noiseCoordinates2.y,noiseCoordinates2.z)*vec2(0.5)+vec2(0.5)).r;\nvec3 force=vec3(2.*fetchedR-1.,2.*fetchedG-1.,2.*fetchedB-1.)*noiseStrength;\noutDirection=outDirection+force*timeDelta;\noutNoiseCoordinates1=noiseCoordinates1;\noutNoiseCoordinates2=noiseCoordinates2;\n#endif\n#ifdef ANGULARSPEEDGRADIENTS\nfloat angularSpeed=texture(angularSpeedGradientSampler,vec2(ageGradient,0)).r;\noutAngle=angle+angularSpeed*timeDelta;\n#else\noutAngle=vec2(angle.x+angle.y*timeDelta,angle.y);\n#endif\n#ifdef ANIMATESHEET\nfloat offsetAge=outAge;\nfloat dist=cellInfos.y-cellInfos.x;\n#ifdef ANIMATESHEETRANDOMSTART\noutCellStartOffset=cellStartOffset;\noffsetAge+=cellStartOffset;\n#endif\nfloat ratio=clamp(mod(offsetAge*cellInfos.z,life)/life,0.,1.0);\noutCellIndex=float(int(cellInfos.x+ratio*dist));\n#endif\n}\n}",jt.a.IncludesShadersStore.clipPlaneFragmentDeclaration2="#ifdef CLIPPLANE\nin float fClipDistance;\n#endif\n#ifdef CLIPPLANE2\nin float fClipDistance2;\n#endif\n#ifdef CLIPPLANE3\nin float fClipDistance3;\n#endif\n#ifdef CLIPPLANE4\nin float fClipDistance4;\n#endif",jt.a.ShadersStore.gpuRenderParticlesPixelShader="#version 300 es\nuniform sampler2D textureSampler;\nin vec2 vUV;\nin vec4 vColor;\nout vec4 outFragColor;\n#include<clipPlaneFragmentDeclaration2>\n#include<imageProcessingDeclaration>\n#include<helperFunctions>\n#include<imageProcessingFunctions>\nvoid main() {\n#include<clipPlaneFragment>\nvec4 textureColor=texture(textureSampler,vUV);\noutFragColor=textureColor*vColor;\n#ifdef BLENDMULTIPLYMODE\nfloat alpha=vColor.a*textureColor.a;\noutFragColor.rgb=outFragColor.rgb*alpha+vec3(1.0)*(1.0-alpha);\n#endif\n\n\n#ifdef IMAGEPROCESSINGPOSTPROCESS\noutFragColor.rgb=toLinearSpace(outFragColor.rgb);\n#else\n#ifdef IMAGEPROCESSING\noutFragColor.rgb=toLinearSpace(outFragColor.rgb);\noutFragColor=applyImageProcessing(outFragColor);\n#endif\n#endif\n}\n",jt.a.IncludesShadersStore.clipPlaneVertexDeclaration2="#ifdef CLIPPLANE\nuniform vec4 vClipPlane;\nout float fClipDistance;\n#endif\n#ifdef CLIPPLANE2\nuniform vec4 vClipPlane2;\nout float fClipDistance2;\n#endif\n#ifdef CLIPPLANE3\nuniform vec4 vClipPlane3;\nout float fClipDistance3;\n#endif\n#ifdef CLIPPLANE4\nuniform vec4 vClipPlane4;\nout float fClipDistance4;\n#endif",jt.a.ShadersStore.gpuRenderParticlesVertexShader="#version 300 es\nuniform mat4 view;\nuniform mat4 projection;\nuniform vec2 translationPivot;\nuniform vec3 worldOffset;\n\nin vec3 position;\nin float age;\nin float life;\nin vec3 size;\n#ifndef BILLBOARD\nin vec3 initialDirection;\n#endif\n#ifdef BILLBOARDSTRETCHED\nin vec3 direction;\n#endif\nin float angle;\n#ifdef ANIMATESHEET\nin float cellIndex;\n#endif\nin vec2 offset;\nin vec2 uv;\nout vec2 vUV;\nout vec4 vColor;\n#if defined(CLIPPLANE) || defined(CLIPPLANE2) || defined(CLIPPLANE3) || defined(CLIPPLANE4)\nuniform mat4 invView;\n#endif\n#include<clipPlaneVertexDeclaration2>\n#ifdef COLORGRADIENTS\nuniform sampler2D colorGradientSampler;\n#else\nuniform vec4 colorDead;\nin vec4 color;\n#endif\n#ifdef ANIMATESHEET\nuniform vec3 sheetInfos;\n#endif\n#ifdef BILLBOARD\nuniform vec3 eyePosition;\n#endif\nvec3 rotate(vec3 yaxis,vec3 rotatedCorner) {\nvec3 xaxis=normalize(cross(vec3(0.,1.0,0.),yaxis));\nvec3 zaxis=normalize(cross(yaxis,xaxis));\nvec3 row0=vec3(xaxis.x,xaxis.y,xaxis.z);\nvec3 row1=vec3(yaxis.x,yaxis.y,yaxis.z);\nvec3 row2=vec3(zaxis.x,zaxis.y,zaxis.z);\nmat3 rotMatrix=mat3(row0,row1,row2);\nvec3 alignedCorner=rotMatrix*rotatedCorner;\nreturn (position+worldOffset)+alignedCorner;\n}\n#ifdef BILLBOARDSTRETCHED\nvec3 rotateAlign(vec3 toCamera,vec3 rotatedCorner) {\nvec3 normalizedToCamera=normalize(toCamera);\nvec3 normalizedCrossDirToCamera=normalize(cross(normalize(direction),normalizedToCamera));\nvec3 crossProduct=normalize(cross(normalizedToCamera,normalizedCrossDirToCamera));\nvec3 row0=vec3(normalizedCrossDirToCamera.x,normalizedCrossDirToCamera.y,normalizedCrossDirToCamera.z);\nvec3 row1=vec3(crossProduct.x,crossProduct.y,crossProduct.z);\nvec3 row2=vec3(normalizedToCamera.x,normalizedToCamera.y,normalizedToCamera.z);\nmat3 rotMatrix=mat3(row0,row1,row2);\nvec3 alignedCorner=rotMatrix*rotatedCorner;\nreturn (position+worldOffset)+alignedCorner;\n}\n#endif\nvoid main() {\n#ifdef ANIMATESHEET\nfloat rowOffset=floor(cellIndex/sheetInfos.z);\nfloat columnOffset=cellIndex-rowOffset*sheetInfos.z;\nvec2 uvScale=sheetInfos.xy;\nvec2 uvOffset=vec2(uv.x ,1.0-uv.y);\nvUV=(uvOffset+vec2(columnOffset,rowOffset))*uvScale;\n#else\nvUV=uv;\n#endif\nfloat ratio=age/life;\n#ifdef COLORGRADIENTS\nvColor=texture(colorGradientSampler,vec2(ratio,0));\n#else\nvColor=color*vec4(1.0-ratio)+colorDead*vec4(ratio);\n#endif\nvec2 cornerPos=(offset-translationPivot)*size.yz*size.x+translationPivot;\n#ifdef BILLBOARD\nvec4 rotatedCorner;\nrotatedCorner.w=0.;\n#ifdef BILLBOARDY\nrotatedCorner.x=cornerPos.x*cos(angle)-cornerPos.y*sin(angle);\nrotatedCorner.z=cornerPos.x*sin(angle)+cornerPos.y*cos(angle);\nrotatedCorner.y=0.;\nvec3 yaxis=(position+worldOffset)-eyePosition;\nyaxis.y=0.;\nvec3 worldPos=rotate(normalize(yaxis),rotatedCorner.xyz);\nvec4 viewPosition=(view*vec4(worldPos,1.0));\n#elif defined(BILLBOARDSTRETCHED)\nrotatedCorner.x=cornerPos.x*cos(angle)-cornerPos.y*sin(angle);\nrotatedCorner.y=cornerPos.x*sin(angle)+cornerPos.y*cos(angle);\nrotatedCorner.z=0.;\nvec3 toCamera=(position+worldOffset)-eyePosition;\nvec3 worldPos=rotateAlign(toCamera,rotatedCorner.xyz);\nvec4 viewPosition=(view*vec4(worldPos,1.0));\n#else\n\nrotatedCorner.x=cornerPos.x*cos(angle)-cornerPos.y*sin(angle);\nrotatedCorner.y=cornerPos.x*sin(angle)+cornerPos.y*cos(angle);\nrotatedCorner.z=0.;\n\nvec4 viewPosition=view*vec4((position+worldOffset),1.0)+rotatedCorner;\n#endif\n#else\n\nvec3 rotatedCorner;\nrotatedCorner.x=cornerPos.x*cos(angle)-cornerPos.y*sin(angle);\nrotatedCorner.y=0.;\nrotatedCorner.z=cornerPos.x*sin(angle)+cornerPos.y*cos(angle);\nvec3 yaxis=normalize(initialDirection);\nvec3 worldPos=rotate(yaxis,rotatedCorner);\n\nvec4 viewPosition=view*vec4(worldPos,1.0);\n#endif\ngl_Position=projection*viewPosition;\n\n#if defined(CLIPPLANE) || defined(CLIPPLANE2) || defined(CLIPPLANE3) || defined(CLIPPLANE4)\nvec4 worldPos=invView*viewPosition;\n#endif\n#include<clipPlaneVertex>\n}";var Oa=function(e){function t(t,n,r,o){void 0===o&&(o=!1);var a=e.call(this,t)||this;a.layerMask=268435455,a._accumulatedCount=0,a._targetIndex=0,a._currentRenderId=-1,a._started=!1,a._stopped=!1,a._timeDelta=0,a._actualFrame=0,a._rawTextureWidth=256,a.onDisposeObservable=new i.c,a.forceDepthWrite=!1,a._preWarmDone=!1,a._scene=r||S.a.LastCreatedScene,a._attachImageProcessingConfiguration(null),a._engine=a._scene.getEngine(),n.randomTextureSize||delete n.randomTextureSize;var s=l.a({capacity:5e4,randomTextureSize:a._engine.getCaps().maxTextureSize},n),u=n;isFinite(u)&&(s.capacity=u),a._capacity=s.capacity,a._activeCount=s.capacity,a._currentActiveCount=0,a._isAnimationSheetEnabled=o,a._scene.particleSystems.push(a),a._updateEffectOptions={attributes:["position","age","life","seed","size","color","direction","initialDirection","angle","cellIndex","cellStartOffset","noiseCoordinates1","noiseCoordinates2"],uniformsNames:["currentCount","timeDelta","emitterWM","lifeTime","color1","color2","sizeRange","scaleRange","gravity","emitPower","direction1","direction2","minEmitBox","maxEmitBox","radius","directionRandomizer","height","coneAngle","stopFactor","angleRange","radiusRange","cellInfos","noiseStrength","limitVelocityDamping"],uniformBuffersNames:[],samplers:["randomSampler","randomSampler2","sizeGradientSampler","angularSpeedGradientSampler","velocityGradientSampler","limitVelocityGradientSampler","noiseSampler","dragGradientSampler"],defines:"",fallbacks:null,onCompiled:null,onError:null,indexParameters:null,maxSimultaneousLights:0,transformFeedbackVaryings:[]},a.particleEmitterType=new ya;for(var c=Math.min(a._engine.getCaps().maxTextureSize,s.randomTextureSize),h=[],d=0;d<c;++d)h.push(Math.random()),h.push(Math.random()),h.push(Math.random()),h.push(Math.random());for(a._randomTexture=new ze(new Float32Array(h),c,1,_.a.TEXTUREFORMAT_RGBA,a._scene,!1,!1,_.a.TEXTURE_NEAREST_SAMPLINGMODE,_.a.TEXTURETYPE_FLOAT),a._randomTexture.wrapU=Ge.a.WRAP_ADDRESSMODE,a._randomTexture.wrapV=Ge.a.WRAP_ADDRESSMODE,h=[],d=0;d<c;++d)h.push(Math.random()),h.push(Math.random()),h.push(Math.random()),h.push(Math.random());return a._randomTexture2=new ze(new Float32Array(h),c,1,_.a.TEXTUREFORMAT_RGBA,a._scene,!1,!1,_.a.TEXTURE_NEAREST_SAMPLINGMODE,_.a.TEXTURETYPE_FLOAT),a._randomTexture2.wrapU=Ge.a.WRAP_ADDRESSMODE,a._randomTexture2.wrapV=Ge.a.WRAP_ADDRESSMODE,a._randomTextureSize=c,a}return l.d(t,e),Object.defineProperty(t,"IsSupported",{get:function(){return!!S.a.LastCreatedEngine&&S.a.LastCreatedEngine.webGLVersion>1},enumerable:!0,configurable:!0}),t.prototype.getCapacity=function(){return this._capacity},Object.defineProperty(t.prototype,"activeParticleCount",{get:function(){return this._activeCount},set:function(e){this._activeCount=Math.min(e,this._capacity)},enumerable:!0,configurable:!0}),t.prototype.isReady=function(){return this._updateEffect?!!(this.emitter&&this._updateEffect.isReady()&&this._imageProcessingConfiguration.isReady()&&this._renderEffect.isReady()&&this.particleTexture&&this.particleTexture.isReady()):(this._recreateUpdateEffect(),this._recreateRenderEffect(),!1)},t.prototype.isStarted=function(){return this._started},t.prototype.start=function(e){var t=this;if(void 0===e&&(e=this.startDelay),!this.targetStopDuration&&this._hasTargetStopDurationDependantGradient())throw"Particle system started with a targetStopDuration dependant gradient (eg. startSizeGradients) but no targetStopDuration set";e?setTimeout(function(){t.start(0)},e):(this._started=!0,this._stopped=!1,this._preWarmDone=!1,this.beginAnimationOnStart&&this.animations&&this.animations.length>0&&this.getScene().beginAnimation(this,this.beginAnimationFrom,this.beginAnimationTo,this.beginAnimationLoop))},t.prototype.stop=function(){this._stopped=!0},t.prototype.reset=function(){this._releaseBuffers(),this._releaseVAOs(),this._currentActiveCount=0,this._targetIndex=0},t.prototype.getClassName=function(){return"GPUParticleSystem"},t.prototype._removeGradientAndTexture=function(t,n,r){return e.prototype._removeGradientAndTexture.call(this,t,n,r),this._releaseBuffers(),this},t.prototype.addColorGradient=function(e,t,n){this._colorGradients||(this._colorGradients=[]);var r=new ye.c;return r.gradient=e,r.color1=t,this._colorGradients.push(r),this._colorGradients.sort(function(e,t){return e.gradient<t.gradient?-1:e.gradient>t.gradient?1:0}),this._colorGradientsTexture&&(this._colorGradientsTexture.dispose(),this._colorGradientsTexture=null),this._releaseBuffers(),this},t.prototype.removeColorGradient=function(e){return this._removeGradientAndTexture(e,this._colorGradients,this._colorGradientsTexture),this._colorGradientsTexture=null,this},t.prototype._addFactorGradient=function(e,t,n){var r=new ye.d;r.gradient=t,r.factor1=n,e.push(r),e.sort(function(e,t){return e.gradient<t.gradient?-1:e.gradient>t.gradient?1:0}),this._releaseBuffers()},t.prototype.addSizeGradient=function(e,t){return this._sizeGradients||(this._sizeGradients=[]),this._addFactorGradient(this._sizeGradients,e,t),this._sizeGradientsTexture&&(this._sizeGradientsTexture.dispose(),this._sizeGradientsTexture=null),this._releaseBuffers(),this},t.prototype.removeSizeGradient=function(e){return this._removeGradientAndTexture(e,this._sizeGradients,this._sizeGradientsTexture),this._sizeGradientsTexture=null,this},t.prototype.addAngularSpeedGradient=function(e,t){return this._angularSpeedGradients||(this._angularSpeedGradients=[]),this._addFactorGradient(this._angularSpeedGradients,e,t),this._angularSpeedGradientsTexture&&(this._angularSpeedGradientsTexture.dispose(),this._angularSpeedGradientsTexture=null),this._releaseBuffers(),this},t.prototype.removeAngularSpeedGradient=function(e){return this._removeGradientAndTexture(e,this._angularSpeedGradients,this._angularSpeedGradientsTexture),this._angularSpeedGradientsTexture=null,this},t.prototype.addVelocityGradient=function(e,t){return this._velocityGradients||(this._velocityGradients=[]),this._addFactorGradient(this._velocityGradients,e,t),this._velocityGradientsTexture&&(this._velocityGradientsTexture.dispose(),this._velocityGradientsTexture=null),this._releaseBuffers(),this},t.prototype.removeVelocityGradient=function(e){return this._removeGradientAndTexture(e,this._velocityGradients,this._velocityGradientsTexture),this._velocityGradientsTexture=null,this},t.prototype.addLimitVelocityGradient=function(e,t){return this._limitVelocityGradients||(this._limitVelocityGradients=[]),this._addFactorGradient(this._limitVelocityGradients,e,t),this._limitVelocityGradientsTexture&&(this._limitVelocityGradientsTexture.dispose(),this._limitVelocityGradientsTexture=null),this._releaseBuffers(),this},t.prototype.removeLimitVelocityGradient=function(e){return this._removeGradientAndTexture(e,this._limitVelocityGradients,this._limitVelocityGradientsTexture),this._limitVelocityGradientsTexture=null,this},t.prototype.addDragGradient=function(e,t){return this._dragGradients||(this._dragGradients=[]),this._addFactorGradient(this._dragGradients,e,t),this._dragGradientsTexture&&(this._dragGradientsTexture.dispose(),this._dragGradientsTexture=null),this._releaseBuffers(),this},t.prototype.removeDragGradient=function(e){return this._removeGradientAndTexture(e,this._dragGradients,this._dragGradientsTexture),this._dragGradientsTexture=null,this},t.prototype.addEmitRateGradient=function(e,t,n){return this},t.prototype.removeEmitRateGradient=function(e){return this},t.prototype.addStartSizeGradient=function(e,t,n){return this},t.prototype.removeStartSizeGradient=function(e){return this},t.prototype.addColorRemapGradient=function(e,t,n){return this},t.prototype.removeColorRemapGradient=function(){return this},t.prototype.addAlphaRemapGradient=function(e,t,n){return this},t.prototype.removeAlphaRemapGradient=function(){return this},t.prototype.addRampGradient=function(e,t){return this},t.prototype.removeRampGradient=function(){return this},t.prototype.getRampGradients=function(){return null},Object.defineProperty(t.prototype,"useRampGradients",{get:function(){return!1},set:function(e){},enumerable:!0,configurable:!0}),t.prototype.addLifeTimeGradient=function(e,t,n){return this},t.prototype.removeLifeTimeGradient=function(e){return this},t.prototype._reset=function(){this._releaseBuffers()},t.prototype._createUpdateVAO=function(e){var t={};t.position=e.createVertexBuffer("position",0,3),t.age=e.createVertexBuffer("age",3,1),t.life=e.createVertexBuffer("life",4,1),t.seed=e.createVertexBuffer("seed",5,4),t.size=e.createVertexBuffer("size",9,3);var n=12;this._colorGradientsTexture||(t.color=e.createVertexBuffer("color",n,4),n+=4),t.direction=e.createVertexBuffer("direction",n,3),n+=3,this._isBillboardBased||(t.initialDirection=e.createVertexBuffer("initialDirection",n,3),n+=3),this._angularSpeedGradientsTexture?(t.angle=e.createVertexBuffer("angle",n,1),n+=1):(t.angle=e.createVertexBuffer("angle",n,2),n+=2),this._isAnimationSheetEnabled&&(t.cellIndex=e.createVertexBuffer("cellIndex",n,1),n+=1,this.spriteRandomStartCell&&(t.cellStartOffset=e.createVertexBuffer("cellStartOffset",n,1),n+=1)),this.noiseTexture&&(t.noiseCoordinates1=e.createVertexBuffer("noiseCoordinates1",n,3),t.noiseCoordinates2=e.createVertexBuffer("noiseCoordinates2",n+=3,3),n+=3);var r=this._engine.recordVertexArrayObject(t,null,this._updateEffect);return this._engine.bindArrayBuffer(null),r},t.prototype._createRenderVAO=function(e,t){var n={};n.position=e.createVertexBuffer("position",0,3,this._attributesStrideSize,!0),n.age=e.createVertexBuffer("age",3,1,this._attributesStrideSize,!0),n.life=e.createVertexBuffer("life",4,1,this._attributesStrideSize,!0),n.size=e.createVertexBuffer("size",9,3,this._attributesStrideSize,!0);var r=12;this._colorGradientsTexture||(n.color=e.createVertexBuffer("color",r,4,this._attributesStrideSize,!0),r+=4),this.billboardMode===Da.BILLBOARDMODE_STRETCHED&&(n.direction=e.createVertexBuffer("direction",r,3,this._attributesStrideSize,!0)),r+=3,this._isBillboardBased||(n.initialDirection=e.createVertexBuffer("initialDirection",r,3,this._attributesStrideSize,!0),r+=3),n.angle=e.createVertexBuffer("angle",r,1,this._attributesStrideSize,!0),this._angularSpeedGradientsTexture?r++:r+=2,this._isAnimationSheetEnabled&&(n.cellIndex=e.createVertexBuffer("cellIndex",r,1,this._attributesStrideSize,!0),r+=1,this.spriteRandomStartCell&&(n.cellStartOffset=e.createVertexBuffer("cellStartOffset",r,1,this._attributesStrideSize,!0),r+=1)),this.noiseTexture&&(n.noiseCoordinates1=e.createVertexBuffer("noiseCoordinates1",r,3,this._attributesStrideSize,!0),n.noiseCoordinates2=e.createVertexBuffer("noiseCoordinates2",r+=3,3,this._attributesStrideSize,!0),r+=3),n.offset=t.createVertexBuffer("offset",0,2),n.uv=t.createVertexBuffer("uv",2,2);var i=this._engine.recordVertexArrayObject(n,null,this._renderEffect);return this._engine.bindArrayBuffer(null),i},t.prototype._initialize=function(e){if(void 0===e&&(e=!1),!this._buffer0||e){var t=this._scene.getEngine(),n=new Array;this._attributesStrideSize=21,this._targetIndex=0,this.isBillboardBased||(this._attributesStrideSize+=3),this._colorGradientsTexture&&(this._attributesStrideSize-=4),this._angularSpeedGradientsTexture&&(this._attributesStrideSize-=1),this._isAnimationSheetEnabled&&(this._attributesStrideSize+=1,this.spriteRandomStartCell&&(this._attributesStrideSize+=1)),this.noiseTexture&&(this._attributesStrideSize+=6);for(var r=0;r<this._capacity;r++)n.push(0),n.push(0),n.push(0),n.push(0),n.push(0),n.push(Math.random()),n.push(Math.random()),n.push(Math.random()),n.push(Math.random()),n.push(0),n.push(0),n.push(0),this._colorGradientsTexture||(n.push(0),n.push(0),n.push(0),n.push(0)),n.push(0),n.push(0),n.push(0),this.isBillboardBased||(n.push(0),n.push(0),n.push(0)),n.push(0),this._angularSpeedGradientsTexture||n.push(0),this._isAnimationSheetEnabled&&(n.push(0),this.spriteRandomStartCell&&n.push(0)),this.noiseTexture&&(n.push(Math.random()),n.push(Math.random()),n.push(Math.random()),n.push(Math.random()),n.push(Math.random()),n.push(Math.random()));var i=new Float32Array([.5,.5,1,1,-.5,.5,0,1,-.5,-.5,0,0,.5,-.5,1,0]);this._buffer0=new Mn.a(t,n,!1,this._attributesStrideSize),this._buffer1=new Mn.a(t,n,!1,this._attributesStrideSize),this._spriteBuffer=new Mn.a(t,i,!1,4),this._updateVAO=[],this._updateVAO.push(this._createUpdateVAO(this._buffer0)),this._updateVAO.push(this._createUpdateVAO(this._buffer1)),this._renderVAO=[],this._renderVAO.push(this._createRenderVAO(this._buffer1,this._spriteBuffer)),this._renderVAO.push(this._createRenderVAO(this._buffer0,this._spriteBuffer)),this._sourceBuffer=this._buffer0,this._targetBuffer=this._buffer1}},t.prototype._recreateUpdateEffect=function(){var e=this.particleEmitterType?this.particleEmitterType.getEffectDefines():"";this._isBillboardBased&&(e+="\n#define BILLBOARD"),this._colorGradientsTexture&&(e+="\n#define COLORGRADIENTS"),this._sizeGradientsTexture&&(e+="\n#define SIZEGRADIENTS"),this._angularSpeedGradientsTexture&&(e+="\n#define ANGULARSPEEDGRADIENTS"),this._velocityGradientsTexture&&(e+="\n#define VELOCITYGRADIENTS"),this._limitVelocityGradientsTexture&&(e+="\n#define LIMITVELOCITYGRADIENTS"),this._dragGradientsTexture&&(e+="\n#define DRAGGRADIENTS"),this.isAnimationSheetEnabled&&(e+="\n#define ANIMATESHEET",this.spriteRandomStartCell&&(e+="\n#define ANIMATESHEETRANDOMSTART")),this.noiseTexture&&(e+="\n#define NOISE"),this._updateEffect&&this._updateEffectOptions.defines===e||(this._updateEffectOptions.transformFeedbackVaryings=["outPosition","outAge","outLife","outSeed","outSize"],this._colorGradientsTexture||this._updateEffectOptions.transformFeedbackVaryings.push("outColor"),this._updateEffectOptions.transformFeedbackVaryings.push("outDirection"),this._isBillboardBased||this._updateEffectOptions.transformFeedbackVaryings.push("outInitialDirection"),this._updateEffectOptions.transformFeedbackVaryings.push("outAngle"),this.isAnimationSheetEnabled&&(this._updateEffectOptions.transformFeedbackVaryings.push("outCellIndex"),this.spriteRandomStartCell&&this._updateEffectOptions.transformFeedbackVaryings.push("outCellStartOffset")),this.noiseTexture&&(this._updateEffectOptions.transformFeedbackVaryings.push("outNoiseCoordinates1"),this._updateEffectOptions.transformFeedbackVaryings.push("outNoiseCoordinates2")),this._updateEffectOptions.defines=e,this._updateEffect=new jt.a("gpuUpdateParticles",this._updateEffectOptions,this._scene.getEngine()))},t.prototype._recreateRenderEffect=function(){var e="";if(this._scene.clipPlane&&(e="\n#define CLIPPLANE"),this._scene.clipPlane2&&(e="\n#define CLIPPLANE2"),this._scene.clipPlane3&&(e="\n#define CLIPPLANE3"),this._scene.clipPlane4&&(e="\n#define CLIPPLANE4"),this.blendMode===Da.BLENDMODE_MULTIPLY&&(e="\n#define BLENDMULTIPLYMODE"),this._isBillboardBased)switch(e+="\n#define BILLBOARD",this.billboardMode){case Da.BILLBOARDMODE_Y:e+="\n#define BILLBOARDY";break;case Da.BILLBOARDMODE_STRETCHED:e+="\n#define BILLBOARDSTRETCHED"}if(this._colorGradientsTexture&&(e+="\n#define COLORGRADIENTS"),this.isAnimationSheetEnabled&&(e+="\n#define ANIMATESHEET"),this._imageProcessingConfiguration&&(this._imageProcessingConfiguration.prepareDefines(this._imageProcessingConfigurationDefines),e+="\n"+this._imageProcessingConfigurationDefines.toString()),!this._renderEffect||this._renderEffect.defines!==e){var t=["worldOffset","view","projection","colorDead","invView","vClipPlane","vClipPlane2","vClipPlane3","vClipPlane4","sheetInfos","translationPivot","eyePosition"],n=["textureSampler","colorGradientSampler"];vn.a&&(vn.a.PrepareUniforms(t,this._imageProcessingConfigurationDefines),vn.a.PrepareSamplers(n,this._imageProcessingConfigurationDefines)),this._renderEffect=new jt.a("gpuRenderParticles",["position","age","life","size","color","offset","uv","direction","initialDirection","angle","cellIndex"],t,n,this._scene.getEngine(),e)}},t.prototype.animate=function(e){void 0===e&&(e=!1),this._timeDelta=this.updateSpeed*(e?this.preWarmStepOffset:this._scene.getAnimationRatio()),this._actualFrame+=this._timeDelta,this._stopped||this.targetStopDuration&&this._actualFrame>=this.targetStopDuration&&this.stop()},t.prototype._createFactorGradientTexture=function(e,t){if(e&&e.length&&!this[t]){for(var n=new Float32Array(this._rawTextureWidth),r=0;r<this._rawTextureWidth;r++)ye.h.GetCurrentGradient(r/this._rawTextureWidth,e,function(e,t,i){n[r]=w.a.Lerp(e.factor1,t.factor1,i)});this[t]=ze.CreateRTexture(n,this._rawTextureWidth,1,this._scene,!1,!1,Ge.a.NEAREST_SAMPLINGMODE)}},t.prototype._createSizeGradientTexture=function(){this._createFactorGradientTexture(this._sizeGradients,"_sizeGradientsTexture")},t.prototype._createAngularSpeedGradientTexture=function(){this._createFactorGradientTexture(this._angularSpeedGradients,"_angularSpeedGradientsTexture")},t.prototype._createVelocityGradientTexture=function(){this._createFactorGradientTexture(this._velocityGradients,"_velocityGradientsTexture")},t.prototype._createLimitVelocityGradientTexture=function(){this._createFactorGradientTexture(this._limitVelocityGradients,"_limitVelocityGradientsTexture")},t.prototype._createDragGradientTexture=function(){this._createFactorGradientTexture(this._dragGradients,"_dragGradientsTexture")},t.prototype._createColorGradientTexture=function(){if(this._colorGradients&&this._colorGradients.length&&!this._colorGradientsTexture){for(var e=new Uint8Array(4*this._rawTextureWidth),t=o.t.Color4[0],n=0;n<this._rawTextureWidth;n++)ye.h.GetCurrentGradient(n/this._rawTextureWidth,this._colorGradients,function(r,i,a){o.f.LerpToRef(r.color1,i.color1,a,t),e[4*n]=255*t.r,e[4*n+1]=255*t.g,e[4*n+2]=255*t.b,e[4*n+3]=255*t.a});this._colorGradientsTexture=ze.CreateRGBATexture(e,this._rawTextureWidth,1,this._scene,!1,!1,Ge.a.NEAREST_SAMPLINGMODE)}},t.prototype.render=function(e){if(void 0===e&&(e=!1),!this._started)return 0;if(this._createColorGradientTexture(),this._createSizeGradientTexture(),this._createAngularSpeedGradientTexture(),this._createVelocityGradientTexture(),this._createLimitVelocityGradientTexture(),this._createDragGradientTexture(),this._recreateUpdateEffect(),this._recreateRenderEffect(),!this.isReady())return 0;if(!e){if(!this._preWarmDone&&this.preWarmCycles){for(var t=0;t<this.preWarmCycles;t++)this.animate(!0),this.render(!0);this._preWarmDone=!0}if(this._currentRenderId===this._scene.getFrameId())return 0;this._currentRenderId=this._scene.getFrameId()}if(this._initialize(),this._accumulatedCount+=this.emitRate*this._timeDelta,this._accumulatedCount>1){var n=0|this._accumulatedCount;this._accumulatedCount-=n,this._currentActiveCount=Math.min(this._activeCount,this._currentActiveCount+n)}if(!this._currentActiveCount)return 0;var r;if(this._engine.enableEffect(this._updateEffect),this._engine.setState(!1),this._updateEffect.setFloat("currentCount",this._currentActiveCount),this._updateEffect.setFloat("timeDelta",this._timeDelta),this._updateEffect.setFloat("stopFactor",this._stopped?0:1),this._updateEffect.setTexture("randomSampler",this._randomTexture),this._updateEffect.setTexture("randomSampler2",this._randomTexture2),this._updateEffect.setFloat2("lifeTime",this.minLifeTime,this.maxLifeTime),this._updateEffect.setFloat2("emitPower",this.minEmitPower,this.maxEmitPower),this._colorGradientsTexture||(this._updateEffect.setDirectColor4("color1",this.color1),this._updateEffect.setDirectColor4("color2",this.color2)),this._updateEffect.setFloat2("sizeRange",this.minSize,this.maxSize),this._updateEffect.setFloat4("scaleRange",this.minScaleX,this.maxScaleX,this.minScaleY,this.maxScaleY),this._updateEffect.setFloat4("angleRange",this.minAngularSpeed,this.maxAngularSpeed,this.minInitialRotation,this.maxInitialRotation),this._updateEffect.setVector3("gravity",this.gravity),this._sizeGradientsTexture&&this._updateEffect.setTexture("sizeGradientSampler",this._sizeGradientsTexture),this._angularSpeedGradientsTexture&&this._updateEffect.setTexture("angularSpeedGradientSampler",this._angularSpeedGradientsTexture),this._velocityGradientsTexture&&this._updateEffect.setTexture("velocityGradientSampler",this._velocityGradientsTexture),this._limitVelocityGradientsTexture&&(this._updateEffect.setTexture("limitVelocityGradientSampler",this._limitVelocityGradientsTexture),this._updateEffect.setFloat("limitVelocityDamping",this.limitVelocityDamping)),this._dragGradientsTexture&&this._updateEffect.setTexture("dragGradientSampler",this._dragGradientsTexture),this.particleEmitterType&&this.particleEmitterType.applyToShader(this._updateEffect),this._isAnimationSheetEnabled&&this._updateEffect.setFloat3("cellInfos",this.startSpriteCellID,this.endSpriteCellID,this.spriteCellChangeSpeed),this.noiseTexture&&(this._updateEffect.setTexture("noiseSampler",this.noiseTexture),this._updateEffect.setVector3("noiseStrength",this.noiseStrength)),this.emitter.position)r=this.emitter.getWorldMatrix();else{var i=this.emitter;r=o.j.Translation(i.x,i.y,i.z)}if(this._updateEffect.setMatrix("emitterWM",r),this._engine.bindVertexArrayObject(this._updateVAO[this._targetIndex],null),this._engine.bindTransformFeedbackBuffer(this._targetBuffer.getBuffer()),this._engine.setRasterizerState(!1),this._engine.beginTransformFeedback(!0),this._engine.drawArraysType(Ci.a.PointListDrawMode,0,this._currentActiveCount),this._engine.endTransformFeedback(),this._engine.setRasterizerState(!0),this._engine.bindTransformFeedbackBuffer(null),!e){this._engine.enableEffect(this._renderEffect);var a=this._scene.getViewMatrix();if(this._renderEffect.setMatrix("view",a),this._renderEffect.setMatrix("projection",this._scene.getProjectionMatrix()),this._renderEffect.setTexture("textureSampler",this.particleTexture),this._renderEffect.setVector2("translationPivot",this.translationPivot),this._renderEffect.setVector3("worldOffset",this.worldOffset),this._colorGradientsTexture?this._renderEffect.setTexture("colorGradientSampler",this._colorGradientsTexture):this._renderEffect.setDirectColor4("colorDead",this.colorDead),this._isAnimationSheetEnabled&&this.particleTexture){var s=this.particleTexture.getBaseSize();this._renderEffect.setFloat3("sheetInfos",this.spriteCellWidth/s.width,this.spriteCellHeight/s.height,s.width/this.spriteCellWidth)}if(this._isBillboardBased&&this._renderEffect.setVector3("eyePosition",this._scene.activeCamera.globalPosition),this._scene.clipPlane||this._scene.clipPlane2||this._scene.clipPlane3||this._scene.clipPlane4){var u=a.clone();u.invert(),this._renderEffect.setMatrix("invView",u),Hr.a.BindClipPlane(this._renderEffect,this._scene)}switch(this._imageProcessingConfiguration&&!this._imageProcessingConfiguration.applyByPostProcess&&this._imageProcessingConfiguration.bind(this._renderEffect),this.blendMode){case Da.BLENDMODE_ADD:this._engine.setAlphaMode(_.a.ALPHA_ADD);break;case Da.BLENDMODE_ONEONE:this._engine.setAlphaMode(_.a.ALPHA_ONEONE);break;case Da.BLENDMODE_STANDARD:this._engine.setAlphaMode(_.a.ALPHA_COMBINE);break;case Da.BLENDMODE_MULTIPLY:this._engine.setAlphaMode(_.a.ALPHA_MULTIPLY)}this.forceDepthWrite&&this._engine.setDepthWrite(!0),this._engine.bindVertexArrayObject(this._renderVAO[this._targetIndex],null),this._engine.drawArraysType(Ci.a.TriangleFanDrawMode,0,4,this._currentActiveCount),this._engine.setAlphaMode(_.a.ALPHA_DISABLE)}this._targetIndex++,2===this._targetIndex&&(this._targetIndex=0);var l=this._sourceBuffer;return this._sourceBuffer=this._targetBuffer,this._targetBuffer=l,this._currentActiveCount},t.prototype.rebuild=function(){this._initialize(!0)},t.prototype._releaseBuffers=function(){this._buffer0&&(this._buffer0.dispose(),this._buffer0=null),this._buffer1&&(this._buffer1.dispose(),this._buffer1=null),this._spriteBuffer&&(this._spriteBuffer.dispose(),this._spriteBuffer=null)},t.prototype._releaseVAOs=function(){if(this._updateVAO){for(var e=0;e<this._updateVAO.length;e++)this._engine.releaseVertexArrayObject(this._updateVAO[e]);for(this._updateVAO=[],e=0;e<this._renderVAO.length;e++)this._engine.releaseVertexArrayObject(this._renderVAO[e]);this._renderVAO=[]}},t.prototype.dispose=function(e){void 0===e&&(e=!0);var t=this._scene.particleSystems.indexOf(this);t>-1&&this._scene.particleSystems.splice(t,1),this._releaseBuffers(),this._releaseVAOs(),this._colorGradientsTexture&&(this._colorGradientsTexture.dispose(),this._colorGradientsTexture=null),this._sizeGradientsTexture&&(this._sizeGradientsTexture.dispose(),this._sizeGradientsTexture=null),this._angularSpeedGradientsTexture&&(this._angularSpeedGradientsTexture.dispose(),this._angularSpeedGradientsTexture=null),this._velocityGradientsTexture&&(this._velocityGradientsTexture.dispose(),this._velocityGradientsTexture=null),this._limitVelocityGradientsTexture&&(this._limitVelocityGradientsTexture.dispose(),this._limitVelocityGradientsTexture=null),this._dragGradientsTexture&&(this._dragGradientsTexture.dispose(),this._dragGradientsTexture=null),this._randomTexture&&(this._randomTexture.dispose(),this._randomTexture=null),this._randomTexture2&&(this._randomTexture2.dispose(),this._randomTexture2=null),e&&this.particleTexture&&(this.particleTexture.dispose(),this.particleTexture=null),e&&this.noiseTexture&&(this.noiseTexture.dispose(),this.noiseTexture=null),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear()},t.prototype.clone=function(e,n){var r=new t(e,{capacity:this._capacity,randomTextureSize:this._randomTextureSize},this._scene);return C.a.DeepCopy(this,r),void 0===n&&(n=this.emitter),r.emitter=n,this.particleTexture&&(r.particleTexture=new Ge.a(this.particleTexture.url,this._scene)),r},t.prototype.serialize=function(){var e={};return Da._Serialize(e,this),e.activeParticleCount=this.activeParticleCount,e},t.Parse=function(e,n,r,i){void 0===i&&(i=!1);var o=new t(e.name,{capacity:e.capacity,randomTextureSize:e.randomTextureSize},n);return e.activeParticleCount&&(o.activeParticleCount=e.activeParticleCount),Da._Parse(e,o,n,r),e.preventAutoStart&&(o.preventAutoStart=e.preventAutoStart),i||o.preventAutoStart||o.start(),o},t}(Ca),wa=function(){function e(){this.systems=new Array}return Object.defineProperty(e.prototype,"emitterNode",{get:function(){return this._emitterNode},enumerable:!0,configurable:!0}),e.prototype.setEmitterAsSphere=function(e,t,n){this._emitterNode&&this._emitterNode.dispose(),this._emitterCreationOptions={kind:"Sphere",options:e,renderingGroupId:t};var r=Sr.a.CreateSphere("emitterSphere",{diameter:e.diameter,segments:e.segments},n);r.renderingGroupId=t;var i=new yn.a("emitterSphereMaterial",n);i.emissiveColor=e.color,r.material=i;for(var o=0,a=this.systems;o<a.length;o++)a[o].emitter=r;this._emitterNode=r},e.prototype.start=function(e){for(var t=0,n=this.systems;t<n.length;t++){var r=n[t];e&&(r.emitter=e),r.start()}},e.prototype.dispose=function(){for(var e=0,t=this.systems;e<t.length;e++)t[e].dispose();this.systems=[],this._emitterNode&&(this._emitterNode.dispose(),this._emitterNode=null)},e.prototype.serialize=function(){for(var e={systems:[]},t=0,n=this.systems;t<n.length;t++)e.systems.push(n[t].serialize());return this._emitterNode&&(e.emitter=this._emitterCreationOptions),e},e.Parse=function(t,n,r){void 0===r&&(r=!1);var i=new e,a=_.a.PARTICLES_BaseAssetsUrl+"/textures/";n=n||S.a.LastCreatedScene;for(var s=0,u=t.systems;s<u.length;s++){var l=u[s];i.systems.push(r?Oa.Parse(l,n,a,!0):Da.Parse(l,n,a,!0))}if(t.emitter){var c=t.emitter.options;switch(t.emitter.kind){case"Sphere":i.setEmitterAsSphere({diameter:c.diameter,segments:c.segments,color:o.e.FromArray(c.color)},t.emitter.renderingGroupId,n)}}return i},e}(),La=function(){function e(){}return e.CreateDefault=function(e,t,n,r){var i;return void 0===t&&(t=500),void 0===r&&(r=!1),(i=r?new Oa("default system",{capacity:t},n):new Da("default system",t,n)).emitter=e,i.particleTexture=new Ge.a("https://www.babylonjs.com/assets/Flare.png",i.getScene()),i.createConeEmitter(.1,Math.PI/4),i.color1=new o.f(1,1,1,1),i.color2=new o.f(1,1,1,1),i.colorDead=new o.f(1,1,1,0),i.minSize=.1,i.maxSize=.1,i.minEmitPower=2,i.maxEmitPower=2,i.updateSpeed=1/60,i.emitRate=30,i},e.CreateAsync=function(t,n,r){void 0===r&&(r=!1),n||(n=S.a.LastCreatedScene);var i={};return n._addPendingData(i),new Promise(function(o,a){if(r&&!Oa.IsSupported)return n._removePendingData(i),a("Particle system with GPU is not supported.");ye.h.LoadFile(e.BaseAssetsUrl+"/systems/"+t+".json",function(e){n._removePendingData(i);var t=JSON.parse(e.toString());return o(wa.Parse(t,n,r))},void 0,void 0,void 0,function(){return n._removePendingData(i),a("An error occured while the creation of your particle system. Check if your type '"+t+"' exists.")})})},e.ExportSet=function(e){for(var t=new wa,n=0,r=e;n<r.length;n++)t.systems.push(r[n]);return t},e.BaseAssetsUrl=_.a.PARTICLES_BaseAssetsUrl,e}();r.a.AddParser(xe.a.NAME_PARTICLESYSTEM,function(e,t,n,i){var o=r.a.GetIndividualParser(xe.a.NAME_PARTICLESYSTEM);if(o&&null!=e.particleSystems)for(var a=0,s=e.particleSystems.length;a<s;a++)n.particleSystems.push(o(e.particleSystems[a],t,i))}),r.a.AddIndividualParser(xe.a.NAME_PARTICLESYSTEM,function(e,t,n){return e.activeParticleCount?Oa.Parse(e,t,n):Da.Parse(e,t,n)}),me.b.prototype.createEffectForParticles=function(e,t,n,r,i,o,a){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var s=Da._GetAttributeNamesOrOptions(),u=Da._GetEffectCreationOptions();return-1===r.indexOf(" BILLBOARD")&&(r+="\n#define BILLBOARD\n"),-1===n.indexOf("diffuseSampler")&&n.push("diffuseSampler"),this.createEffect({vertex:"particles",fragmentElement:e},s,u.concat(t),n,r,i,o,a)},fe.a.prototype.getEmittedParticleSystems=function(){for(var e=new Array,t=0;t<this.getScene().particleSystems.length;t++){var n=this.getScene().particleSystems[t];n.emitter===this&&e.push(n)}return e},fe.a.prototype.getHierarchyEmittedParticleSystems=function(){var e=new Array,t=this.getDescendants();t.push(this);for(var n=0;n<this.getScene().particleSystems.length;n++){var r=this.getScene().particleSystems[n],i=r.emitter;i.position&&-1!==t.indexOf(i)&&e.push(r)}return e};var Ia=function(){function e(e,t,n,r,i,a,s,u){void 0===u&&(u=null),this.idx=0,this.color=new o.f(1,1,1,1),this.position=o.x.Zero(),this.rotation=o.x.Zero(),this.scaling=o.x.One(),this.uvs=new o.y(0,0,1,1),this.velocity=o.x.Zero(),this.pivot=o.x.Zero(),this.translateFromPivot=!1,this.alive=!0,this.isVisible=!0,this._pos=0,this._ind=0,this.shapeId=0,this.idxInShape=0,this._stillInvisible=!1,this._rotationMatrix=[1,0,0,0,1,0,0,0,1],this.parentId=null,this.cullingStrategy=Fe.a.CULLINGSTRATEGY_BOUNDINGSPHERE_ONLY,this._globalPosition=o.x.Zero(),this.idx=e,this._pos=t,this._ind=n,this._model=r,this.shapeId=i,this.idxInShape=a,this._sps=s,u&&(this._modelBoundingInfo=u,this._boundingInfo=new Jn.a(u.minimum,u.maximum))}return Object.defineProperty(e.prototype,"scale",{get:function(){return this.scaling},set:function(e){this.scaling=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quaternion",{get:function(){return this.rotationQuaternion},set:function(e){this.rotationQuaternion=e},enumerable:!0,configurable:!0}),e.prototype.intersectsMesh=function(e){return!(!this._boundingInfo||!e._boundingInfo)&&(this._sps._bSphereOnly?$n.a.Intersects(this._boundingInfo.boundingSphere,e._boundingInfo.boundingSphere):this._boundingInfo.intersects(e._boundingInfo,!1))},e.prototype.isInFrustum=function(e){return null!==this._boundingInfo&&this._boundingInfo.isInFrustum(e,this.cullingStrategy)},e.prototype.getRotationMatrix=function(e){var t;if(this.rotationQuaternion)t=this.rotationQuaternion;else{var n=this.rotation;o.q.RotationYawPitchRollToRef(n.y,n.x,n.z,t=o.t.Quaternion[0])}t.toRotationMatrix(e)},e}(),Fa=function(e,t,n,r,i,o){this._indicesLength=0,this.shapeID=e,this._shape=t,this._indicesLength=n,this._shapeUV=r,this._positionFunction=i,this._vertexFunction=o},Na=function(){this.ind=0,this.indicesLength=0,this.sqDistance=0},Ba=function(e,t){return t.sqDistance-e.sqDistance},ka=function(){function e(e,t,n){this.particles=new Array,this.nbParticles=0,this.billboard=!1,this.recomputeNormals=!0,this.counter=0,this.vars={},this._bSphereOnly=!1,this._bSphereRadiusFactor=1,this._positions=new Array,this._indices=new Array,this._normals=new Array,this._colors=new Array,this._uvs=new Array,this._index=0,this._updatable=!0,this._pickable=!1,this._isVisibilityBoxLocked=!1,this._alwaysVisible=!1,this._depthSort=!1,this._shapeCounter=0,this._copy=new Ia(0,0,0,null,0,0,this),this._color=new o.f(0,0,0,0),this._computeParticleColor=!0,this._computeParticleTexture=!0,this._computeParticleRotation=!0,this._computeParticleVertex=!1,this._computeBoundingBox=!1,this._depthSortParticles=!0,this._mustUnrotateFixedNormals=!1,this._particlesIntersect=!1,this._needs32Bits=!1,this.name=e,this._scene=t||S.a.LastCreatedScene,this._camera=t.activeCamera,this._pickable=!!n&&n.isPickable,this._depthSort=!!n&&n.enableDepthSort,this._particlesIntersect=!!n&&n.particleIntersection,this._bSphereOnly=!!n&&n.boundingSphereOnly,this._bSphereRadiusFactor=n&&n.bSphereRadiusFactor?n.bSphereRadiusFactor:1,this._updatable=!n||void 0===n.updatable||n.updatable,this._pickable&&(this.pickedParticles=[]),this._depthSort&&(this.depthSortedParticles=[])}return e.prototype.buildMesh=function(){if(0===this.nbParticles){var e=Xo.CreateDisc("",{radius:1,tessellation:3},this._scene);this.addShape(e,1),e.dispose()}this._indices32=this._needs32Bits?new Uint32Array(this._indices):new Uint16Array(this._indices),this._positions32=new Float32Array(this._positions),this._uvs32=new Float32Array(this._uvs),this._colors32=new Float32Array(this._colors),this.recomputeNormals&&xn.a.ComputeNormals(this._positions32,this._indices32,this._normals),this._normals32=new Float32Array(this._normals),this._fixedNormal32=new Float32Array(this._normals),this._mustUnrotateFixedNormals&&this._unrotateFixedNormals();var t=new xn.a;t.indices=this._depthSort?this._indices:this._indices32,t.set(this._positions32,Mn.b.PositionKind),t.set(this._normals32,Mn.b.NormalKind),this._uvs32.length>0&&t.set(this._uvs32,Mn.b.UVKind),this._colors32.length>0&&t.set(this._colors32,Mn.b.ColorKind);var n=new fe.a(this.name,this._scene);return t.applyToMesh(n,this._updatable),this.mesh=n,this.mesh.isPickable=this._pickable,this._depthSort||(this._indices=null),this._positions=null,this._normals=null,this._uvs=null,this._colors=null,this._updatable||(this.particles.length=0),n},e.prototype.digest=function(e,t){var n=t&&t.facetNb||1,r=t&&t.number||0,i=t&&t.delta||0,a=e.getVerticesData(Mn.b.PositionKind),s=e.getIndices(),u=e.getVerticesData(Mn.b.UVKind),l=e.getVerticesData(Mn.b.ColorKind),c=e.getVerticesData(Mn.b.NormalKind),h=0,d=s.length/3;r?(r=r>d?d:r,n=Math.round(d/r),i=0):n=n>d?d:n;for(var f=[],p=[],_=[],m=[],g=o.x.Zero(),v=n;h<d;){h>d-(n=v+Math.floor((1+i)*Math.random()))&&(n=d-h),f.length=0,p.length=0,_.length=0,m.length=0;for(var y=0,b=3*h;b<3*(h+n);b++){p.push(y);var T=s[b];f.push(a[3*T],a[3*T+1],a[3*T+2]),u&&_.push(u[2*T],u[2*T+1]),l&&m.push(l[4*T],l[4*T+1],l[4*T+2],l[4*T+3]),y++}var E,x,M=this.nbParticles,A=this._posToShape(f),S=this._uvsToShapeUV(_);for(E=0;E<A.length;E++)g.addInPlace(A[E]);for(g.scaleInPlace(1/A.length),E=0;E<A.length;E++)A[E].subtractInPlace(g);this._particlesIntersect&&(x=new Jn.a(g,g));var C=new Fa(this._shapeCounter,A,3*n,S,null,null),P=this._positions.length,R=this._indices.length;this._meshBuilder(this._index,A,this._positions,p,this._indices,_,this._uvs,m,this._colors,c,this._normals,M,0,null),this._addParticle(M,P,R,C,this._shapeCounter,0,x),this.particles[this.nbParticles].position.addInPlace(g),this._index+=A.length,M++,this.nbParticles++,this._shapeCounter++,h+=n}return this},e.prototype._unrotateFixedNormals=function(){for(var e=0,t=0,n=o.t.Vector3[0],r=o.t.Quaternion[0],i=o.t.Matrix[0],a=0;a<this.particles.length;a++){var s=this.particles[a],u=s._model._shape;if(s.rotationQuaternion)s.rotationQuaternion.conjugateToRef(r);else{var l=s.rotation;o.q.RotationYawPitchRollToRef(l.y,l.x,l.z,r),r.conjugateInPlace()}r.toRotationMatrix(i);for(var c=0;c<u.length;c++)o.x.TransformNormalFromFloatsToRef(this._normals32[t=e+3*c],this._normals32[t+1],this._normals32[t+2],i,n),n.toArray(this._fixedNormal32,t);e=t+3}},e.prototype._resetCopy=function(){var e=this._copy;e.position.setAll(0),e.rotation.setAll(0),e.rotationQuaternion=null,e.scaling.setAll(1),e.uvs.copyFromFloats(0,0,1,1),e.color=null,e.translateFromPivot=!1},e.prototype._meshBuilder=function(e,t,n,r,i,a,s,u,l,c,h,d,f,p){var _,m=0,g=0,v=0;this._resetCopy();var y=this._copy;p&&p.positionFunction&&(p.positionFunction(y,d,f),this._mustUnrotateFixedNormals=!0);var b=o.t.Matrix[0],T=o.t.Vector3[0],E=o.t.Vector3[1],x=o.t.Vector3[2],M=o.t.Vector3[3];for(y.getRotationMatrix(b),y.pivot.multiplyToRef(y.scaling,M),y.translateFromPivot?x.setAll(0):x.copyFrom(M),_=0;_<t.length;_++){if(T.copyFrom(t[_]),p&&p.vertexFunction&&p.vertexFunction(y,T,_),T.multiplyInPlace(y.scaling).subtractInPlace(M),o.x.TransformCoordinatesToRef(T,b,E),E.addInPlace(x).addInPlace(y.position),n.push(E.x,E.y,E.z),a){var A=y.uvs;s.push((A.z-A.x)*a[m]+A.x,(A.w-A.y)*a[m+1]+A.y),m+=2}if(y.color)this._color=y.color;else{var S=this._color;u&&void 0!==u[g]?(S.r=u[g],S.g=u[g+1],S.b=u[g+2],S.a=u[g+3]):(S.r=1,S.g=1,S.b=1,S.a=1)}l.push(this._color.r,this._color.g,this._color.b,this._color.a),g+=4,!this.recomputeNormals&&c&&(T.x=c[v],T.y=c[v+1],T.z=c[v+2],o.x.TransformNormalToRef(T,b,T),h.push(T.x,T.y,T.z),v+=3)}for(_=0;_<r.length;_++){var C=e+r[_];i.push(C),C>65535&&(this._needs32Bits=!0)}if(this._pickable){var P=r.length/3;for(_=0;_<P;_++)this.pickedParticles.push({idx:d,faceId:_})}return this._depthSort&&this.depthSortedParticles.push(new Na),y},e.prototype._posToShape=function(e){for(var t=[],n=0;n<e.length;n+=3)t.push(o.x.FromArray(e,n));return t},e.prototype._uvsToShapeUV=function(e){var t=[];if(e)for(var n=0;n<e.length;n++)t.push(e[n]);return t},e.prototype._addParticle=function(e,t,n,r,i,o,a){void 0===a&&(a=null);var s=new Ia(e,t,n,r,i,o,this,a);return this.particles.push(s),s},e.prototype.addShape=function(e,t,n){var r,i=e.getVerticesData(Mn.b.PositionKind),o=e.getIndices(),a=e.getVerticesData(Mn.b.UVKind),s=e.getVerticesData(Mn.b.ColorKind),u=e.getVerticesData(Mn.b.NormalKind);this._particlesIntersect&&(r=e.getBoundingInfo());for(var l,c,h=this._posToShape(i),d=this._uvsToShapeUV(a),f=new Fa(this._shapeCounter,h,o.length,d,n?n.positionFunction:null,n?n.vertexFunction:null),p=this.nbParticles,_=0;_<t;_++){var m=this._positions.length,g=this._indices.length;c=this._meshBuilder(this._index,h,this._positions,o,this._indices,a,this._uvs,s,this._colors,u,this._normals,p,_,n),this._updatable&&((l=this._addParticle(p,m,g,f,this._shapeCounter,_,r)).position.copyFrom(c.position),l.rotation.copyFrom(c.rotation),c.rotationQuaternion&&l.rotationQuaternion&&l.rotationQuaternion.copyFrom(c.rotationQuaternion),c.color&&l.color&&l.color.copyFrom(c.color),l.scaling.copyFrom(c.scaling),l.uvs.copyFrom(c.uvs)),this._index+=h.length,p++}return this.nbParticles+=t,this._shapeCounter++,this._shapeCounter-1},e.prototype._rebuildParticle=function(e){this._resetCopy();var t=this._copy;e._model._positionFunction&&e._model._positionFunction(t,e.idx,e.idxInShape);var n=o.t.Matrix[0],r=o.t.Vector3[0],i=o.t.Vector3[1],a=o.t.Vector3[2],s=o.t.Vector3[3];t.getRotationMatrix(n),e.pivot.multiplyToRef(e.scaling,s),t.translateFromPivot?a.copyFromFloats(0,0,0):a.copyFrom(s);for(var u=e._model._shape,l=0;l<u.length;l++)r.copyFrom(u[l]),e._model._vertexFunction&&e._model._vertexFunction(t,r,l),r.multiplyInPlace(t.scaling).subtractInPlace(s),o.x.TransformCoordinatesToRef(r,n,i),i.addInPlace(a).addInPlace(t.position).toArray(this._positions32,e._pos+3*l);e.position.setAll(0),e.rotation.setAll(0),e.rotationQuaternion=null,e.scaling.setAll(1),e.uvs.setAll(0),e.pivot.setAll(0),e.translateFromPivot=!1,e.parentId=null},e.prototype.rebuildMesh=function(){for(var e=0;e<this.particles.length;e++)this._rebuildParticle(this.particles[e]);return this.mesh.updateVerticesData(Mn.b.PositionKind,this._positions32,!1,!1),this},e.prototype.setParticles=function(e,t,n){if(void 0===e&&(e=0),void 0===t&&(t=this.nbParticles-1),void 0===n&&(n=!0),!this._updatable)return this;this.beforeUpdateParticles(e,t,n);var r=o.t.Matrix[0],i=o.t.Matrix[1],a=this.mesh,s=this._colors32,u=this._positions32,l=this._normals32,c=this._uvs32,h=this._indices32,d=this._indices,f=this._fixedNormal32,p=o.t.Vector3,_=p[5].copyFromFloats(1,0,0),m=p[6].copyFromFloats(0,1,0),g=p[7].copyFromFloats(0,0,1),v=p[8].setAll(Number.MAX_VALUE),y=p[9].setAll(-Number.MAX_VALUE),b=p[10].setAll(0);if((this.billboard||this._depthSort)&&(this.mesh.computeWorldMatrix(!0),this.mesh._worldMatrix.invertToRef(i)),this.billboard){var T=p[0];this._camera.getDirectionToRef(o.c.Z,T),o.x.TransformNormalToRef(T,i,g),g.normalize();var E=this._camera.getViewMatrix(!0);o.x.TransformNormalFromFloatsToRef(E.m[1],E.m[5],E.m[9],i,m),o.x.CrossToRef(m,g,_),m.normalize(),_.normalize()}this._depthSort&&o.x.TransformCoordinatesToRef(this._camera.globalPosition,i,b),o.j.IdentityToRef(r);var x=0,M=0,A=0,S=0,C=0,P=0,R=0;if(this.mesh.isFacetDataEnabled&&(this._computeBoundingBox=!0),t=t>=this.nbParticles?this.nbParticles-1:t,this._computeBoundingBox&&(0!=e||t!=this.nbParticles-1)){var D=this.mesh._boundingInfo;D&&(v.copyFrom(D.minimum),y.copyFrom(D.maximum))}var O=(M=this.particles[e]._pos)/3|0;S=4*O,P=2*O;for(var w=e;w<=t;w++){var L=this.particles[w];this.updateParticle(L);var I=L._model._shape,F=L._model._shapeUV,N=L._rotationMatrix,B=L.position,k=L.rotation,U=L.scaling,V=L._globalPosition;if(this._depthSort&&this._depthSortParticles){var G=this.depthSortedParticles[w];G.ind=L._ind,G.indicesLength=L._model._indicesLength,G.sqDistance=o.x.DistanceSquared(L.position,b)}if(!L.alive||L._stillInvisible&&!L.isVisible)M+=3*(R=I.length),S+=4*R,P+=2*R;else{if(L.isVisible){L._stillInvisible=!1;var j=p[12];if(L.pivot.multiplyToRef(U,j),this.billboard&&(k.x=0,k.y=0),(this._computeParticleRotation||this.billboard)&&L.getRotationMatrix(r),null!==L.parentId){var z=this.particles[L.parentId],Y=z._rotationMatrix,H=z._globalPosition,W=B.x*Y[1]+B.y*Y[4]+B.z*Y[7],X=B.x*Y[0]+B.y*Y[3]+B.z*Y[6],K=B.x*Y[2]+B.y*Y[5]+B.z*Y[8];if(V.x=H.x+X,V.y=H.y+W,V.z=H.z+K,this._computeParticleRotation||this.billboard){var Q=r.m;N[0]=Q[0]*Y[0]+Q[1]*Y[3]+Q[2]*Y[6],N[1]=Q[0]*Y[1]+Q[1]*Y[4]+Q[2]*Y[7],N[2]=Q[0]*Y[2]+Q[1]*Y[5]+Q[2]*Y[8],N[3]=Q[4]*Y[0]+Q[5]*Y[3]+Q[6]*Y[6],N[4]=Q[4]*Y[1]+Q[5]*Y[4]+Q[6]*Y[7],N[5]=Q[4]*Y[2]+Q[5]*Y[5]+Q[6]*Y[8],N[6]=Q[8]*Y[0]+Q[9]*Y[3]+Q[10]*Y[6],N[7]=Q[8]*Y[1]+Q[9]*Y[4]+Q[10]*Y[7],N[8]=Q[8]*Y[2]+Q[9]*Y[5]+Q[10]*Y[8]}}else V.x=B.x,V.y=B.y,V.z=B.z,(this._computeParticleRotation||this.billboard)&&(N[0]=(Q=r.m)[0],N[1]=Q[1],N[2]=Q[2],N[3]=Q[4],N[4]=Q[5],N[5]=Q[6],N[6]=Q[8],N[7]=Q[9],N[8]=Q[10]);var q=p[11];for(L.translateFromPivot?q.setAll(0):q.copyFrom(j),R=0;R<I.length;R++){x=M+3*R,A=S+4*R,C=P+2*R,(T=p[0]).copyFrom(I[R]),this._computeParticleVertex&&this.updateParticleVertex(L,T,R);var Z=T.x*U.x-j.x,J=T.y*U.y-j.y,$=T.z*U.z-j.z;X=Z*N[0]+J*N[3]+$*N[6],W=Z*N[1]+J*N[4]+$*N[7],K=Z*N[2]+J*N[5]+$*N[8];var ee=u[x]=V.x+_.x*(X+=q.x)+m.x*(W+=q.y)+g.x*(K+=q.z),te=u[x+1]=V.y+_.y*X+m.y*W+g.y*K,ne=u[x+2]=V.z+_.z*X+m.z*W+g.z*K;if(this._computeBoundingBox&&(v.minimizeInPlaceFromFloats(ee,te,ne),y.maximizeInPlaceFromFloats(ee,te,ne)),!this._computeParticleVertex){var re=f[x],ie=f[x+1],oe=f[x+2],ae=re*N[0]+ie*N[3]+oe*N[6],se=re*N[1]+ie*N[4]+oe*N[7],ue=re*N[2]+ie*N[5]+oe*N[8];l[x]=_.x*ae+m.x*se+g.x*ue,l[x+1]=_.y*ae+m.y*se+g.y*ue,l[x+2]=_.z*ae+m.z*se+g.z*ue}if(this._computeParticleColor&&L.color){var le=L.color,ce=this._colors32;ce[A]=le.r,ce[A+1]=le.g,ce[A+2]=le.b,ce[A+3]=le.a}if(this._computeParticleTexture){var he=L.uvs;c[C]=F[2*R]*(he.z-he.x)+he.x,c[C+1]=F[2*R+1]*(he.w-he.y)+he.y}}}else for(L._stillInvisible=!0,R=0;R<I.length;R++)A=S+4*R,C=P+2*R,u[x=M+3*R]=u[x+1]=u[x+2]=0,l[x]=l[x+1]=l[x+2]=0,this._computeParticleColor&&L.color&&(s[A]=(le=L.color).r,s[A+1]=le.g,s[A+2]=le.b,s[A+3]=le.a),this._computeParticleTexture&&(c[C]=F[2*R]*((he=L.uvs).z-he.x)+he.x,c[C+1]=F[2*R+1]*(he.w-he.y)+he.y);if(this._particlesIntersect){var de=L._boundingInfo,fe=de.boundingBox,pe=de.boundingSphere,_e=L._modelBoundingInfo;if(!this._bSphereOnly){var me=_e.boundingBox.vectors,ge=p[1],ve=p[2];ge.setAll(Number.MAX_VALUE),ve.setAll(-Number.MAX_VALUE);for(var ye=0;ye<8;ye++){var be=me[ye].x*U.x,Te=me[ye].y*U.y,Ee=me[ye].z*U.z,xe=B.x+_.x*(X=be*N[0]+Te*N[3]+Ee*N[6])+m.x*(W=be*N[1]+Te*N[4]+Ee*N[7])+g.x*(K=be*N[2]+Te*N[5]+Ee*N[8]),Me=B.y+_.y*X+m.y*W+g.y*K,Ae=B.z+_.z*X+m.z*W+g.z*K;ge.minimizeInPlaceFromFloats(xe,Me,Ae),ve.maximizeInPlaceFromFloats(xe,Me,Ae)}fe.reConstruct(ge,ve,a._worldMatrix)}var Se=_e.minimum.multiplyToRef(U,p[1]),Ce=_e.maximum.multiplyToRef(U,p[2]),Pe=Ce.addToRef(Se,p[3]).scaleInPlace(.5).addInPlace(V),Re=Ce.subtractToRef(Se,p[4]).scaleInPlace(.5*this._bSphereRadiusFactor),De=Pe.subtractToRef(Re,p[1]),Oe=Pe.addToRef(Re,p[2]);pe.reConstruct(De,Oe,a._worldMatrix)}M=x+3,S=A+4,P=C+2}}if(n){if(this._computeParticleColor&&a.updateVerticesData(Mn.b.ColorKind,s,!1,!1),this._computeParticleTexture&&a.updateVerticesData(Mn.b.UVKind,c,!1,!1),a.updateVerticesData(Mn.b.PositionKind,u,!1,!1),!a.areNormalsFrozen||a.isFacetDataEnabled){if(this._computeParticleVertex||a.isFacetDataEnabled){var we=a.isFacetDataEnabled?a.getFacetDataParameters():null;xn.a.ComputeNormals(u,h,l,we);for(var Le=0;Le<l.length;Le++)f[Le]=l[Le]}a.areNormalsFrozen||a.updateVerticesData(Mn.b.NormalKind,l,!1,!1)}if(this._depthSort&&this._depthSortParticles){var Ie=this.depthSortedParticles;Ie.sort(Ba);for(var Fe=Ie.length,Ne=0,Be=0;Be<Fe;Be++){var ke=Ie[Be].indicesLength,Ue=Ie[Be].ind;for(Le=0;Le<ke;Le++)h[Ne]=d[Ue+Le],Ne++}a.updateIndices(h)}}return this._computeBoundingBox&&(a._boundingInfo?a._boundingInfo.reConstruct(v,y,a._worldMatrix):a._boundingInfo=new Jn.a(v,y,a._worldMatrix)),this.afterUpdateParticles(e,t,n),this},e.prototype.dispose=function(){this.mesh.dispose(),this.vars=null,this._positions=null,this._indices=null,this._normals=null,this._uvs=null,this._colors=null,this._indices32=null,this._positions32=null,this._normals32=null,this._fixedNormal32=null,this._uvs32=null,this._colors32=null,this.pickedParticles=null},e.prototype.refreshVisibleSize=function(){return this._isVisibilityBoxLocked||this.mesh.refreshBoundingInfo(),this},e.prototype.setVisibilityBox=function(e){var t=e/2;this.mesh._boundingInfo=new Jn.a(new o.x(-t,-t,-t),new o.x(t,t,t))},Object.defineProperty(e.prototype,"isAlwaysVisible",{get:function(){return this._alwaysVisible},set:function(e){this._alwaysVisible=e,this.mesh.alwaysSelectAsActiveMesh=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisibilityBoxLocked",{get:function(){return this._isVisibilityBoxLocked},set:function(e){this._isVisibilityBoxLocked=e,this.mesh.getBoundingInfo().isLocked=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computeParticleRotation",{get:function(){return this._computeParticleRotation},set:function(e){this._computeParticleRotation=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computeParticleColor",{get:function(){return this._computeParticleColor},set:function(e){this._computeParticleColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computeParticleTexture",{get:function(){return this._computeParticleTexture},set:function(e){this._computeParticleTexture=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computeParticleVertex",{get:function(){return this._computeParticleVertex},set:function(e){this._computeParticleVertex=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"computeBoundingBox",{get:function(){return this._computeBoundingBox},set:function(e){this._computeBoundingBox=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"depthSortParticles",{get:function(){return this._depthSortParticles},set:function(e){this._depthSortParticles=e},enumerable:!0,configurable:!0}),e.prototype.initParticles=function(){},e.prototype.recycleParticle=function(e){return e},e.prototype.updateParticle=function(e){return e},e.prototype.updateParticleVertex=function(e,t,n){return t},e.prototype.beforeUpdateParticles=function(e,t,n){},e.prototype.afterUpdateParticles=function(e,t,n){},e}();H.a.prototype.getPhysicsEngine=function(){return this._physicsEngine},H.a.prototype.enablePhysics=function(e,t){if(void 0===e&&(e=null),this._physicsEngine)return!0;var n=this._getComponent(xe.a.NAME_PHYSICSENGINE);n||(n=new Ga(this),this._addComponent(n));try{return this._physicsEngine=new Zi(e,t),!0}catch(e){return p.a.Error(e.message),!1}},H.a.prototype.disablePhysicsEngine=function(){this._physicsEngine&&(this._physicsEngine.dispose(),this._physicsEngine=null)},H.a.prototype.isPhysicsEnabled=function(){return void 0!==this._physicsEngine},H.a.prototype.deleteCompoundImpostor=function(e){var t=e.parts[0].mesh;t.physicsImpostor&&(t.physicsImpostor.dispose(),t.physicsImpostor=null)},H.a.prototype._advancePhysicsEngineStep=function(e){this._physicsEngine&&(this.onBeforePhysicsObservable.notifyObservers(this),this._physicsEngine._step(e/1e3),this.onAfterPhysicsObservable.notifyObservers(this))},Object.defineProperty(Fe.a.prototype,"physicsImpostor",{get:function(){return this._physicsImpostor},set:function(e){var t=this;this._physicsImpostor!==e&&(this._disposePhysicsObserver&&this.onDisposeObservable.remove(this._disposePhysicsObserver),this._physicsImpostor=e,e&&(this._disposePhysicsObserver=this.onDisposeObservable.add(function(){t.physicsImpostor&&(t.physicsImpostor.dispose(),t.physicsImpostor=null)})))},enumerable:!0,configurable:!0}),Fe.a.prototype.getPhysicsImpostor=function(){return this.physicsImpostor},Fe.a.prototype.applyImpulse=function(e,t){return this.physicsImpostor?(this.physicsImpostor.applyImpulse(e,t),this):this},Fe.a.prototype.setPhysicsLinkWith=function(e,t,n,r){return this.physicsImpostor&&e.physicsImpostor?(this.physicsImpostor.createJoint(e.physicsImpostor,qi.e.HingeJoint,{mainPivot:t,connectedPivot:n,nativeParams:r}),this):this};var Ua,Va,Ga=function(){function e(e){var t=this;this.name=xe.a.NAME_PHYSICSENGINE,this.scene=e,this.scene.onBeforePhysicsObservable=new i.c,this.scene.onAfterPhysicsObservable=new i.c,this.scene.getDeterministicFrameTime=function(){return t.scene._physicsEngine?1e3*t.scene._physicsEngine.getTimeStep():1e3/60}}return e.prototype.register=function(){},e.prototype.rebuild=function(){},e.prototype.dispose=function(){this.scene.onBeforePhysicsObservable.clear(),this.scene.onAfterPhysicsObservable.clear(),this.scene._physicsEngine&&this.scene.disablePhysicsEngine()},e}(),ja=function(){function e(e){this._scene=e,this._physicsEngine=this._scene.getPhysicsEngine(),this._physicsEngine||p.a.Warn("Physics engine not enabled. Please enable the physics before you can use the methods.")}return e.prototype.applyRadialExplosionImpulse=function(e,t,n,r){if(!this._physicsEngine)return p.a.Warn("Physics engine not enabled. Please enable the physics before you call this method."),null;var i=this._physicsEngine.getImpostors();if(0===i.length)return null;"number"==typeof t&&((t=new Xa).radius=t,t.strength=n||t.strength,t.falloff=r||t.falloff);var o=new za(this._scene,t),a=Array();return i.forEach(function(t){var n=o.getImpostorHitData(t,e);n&&(t.applyImpulse(n.force,n.contactPoint),a.push({impostor:t,hitData:n}))}),o.triggerAffectedImpostorsCallback(a),o.dispose(!1),o},e.prototype.applyRadialExplosionForce=function(e,t,n,r){if(!this._physicsEngine)return p.a.Warn("Physics engine not enabled. Please enable the physics before you call the PhysicsHelper."),null;var i=this._physicsEngine.getImpostors();if(0===i.length)return null;"number"==typeof t&&((t=new Xa).radius=t,t.strength=n||t.strength,t.falloff=r||t.falloff);var o=new za(this._scene,t),a=Array();return i.forEach(function(t){var n=o.getImpostorHitData(t,e);n&&(t.applyForce(n.force,n.contactPoint),a.push({impostor:t,hitData:n}))}),o.triggerAffectedImpostorsCallback(a),o.dispose(!1),o},e.prototype.gravitationalField=function(e,t,n,r){if(!this._physicsEngine)return p.a.Warn("Physics engine not enabled. Please enable the physics before you call the PhysicsHelper."),null;if(0===this._physicsEngine.getImpostors().length)return null;"number"==typeof t&&((t=new Xa).radius=t,t.strength=n||t.strength,t.falloff=r||t.falloff);var i=new Ya(this,this._scene,e,t);return i.dispose(!1),i},e.prototype.updraft=function(e,t,n,r,i){if(!this._physicsEngine)return p.a.Warn("Physics engine not enabled. Please enable the physics before you call the PhysicsHelper."),null;if(0===this._physicsEngine.getImpostors().length)return null;"number"==typeof t&&((t=new Ka).radius=t,t.strength=n||t.strength,t.height=r||t.height,t.updraftMode=i||t.updraftMode);var o=new Ha(this._scene,e,t);return o.dispose(!1),o},e.prototype.vortex=function(e,t,n,r){if(!this._physicsEngine)return p.a.Warn("Physics engine not enabled. Please enable the physics before you call the PhysicsHelper."),null;if(0===this._physicsEngine.getImpostors().length)return null;"number"==typeof t&&((t=new Qa).radius=t,t.strength=n||t.strength,t.height=r||t.height);var i=new Wa(this._scene,e,t);return i.dispose(!1),i},e}(),za=function(){function e(e,t){this._scene=e,this._options=t,this._dataFetched=!1,this._options=l.a({},new Xa,this._options)}return e.prototype.getData=function(){return this._dataFetched=!0,{sphere:this._sphere}},e.prototype.getImpostorHitData=function(e,t){if(0===e.mass)return null;if(!this._intersectsWithSphere(e,t,this._options.radius))return null;if("Mesh"!==e.object.getClassName()&&"InstancedMesh"!==e.object.getClassName())return null;var n=e.getObjectCenter().subtract(t),r=new Ot.a(t,n,this._options.radius).intersectsMesh(e.object).pickedPoint;if(!r)return null;var i=o.x.Distance(t,r);if(i>this._options.radius)return null;var a=this._options.falloff===Ua.Constant?this._options.strength:this._options.strength*(1-i/this._options.radius);return{force:n.multiplyByFloats(a,a,a),contactPoint:r,distanceFromOrigin:i}},e.prototype.triggerAffectedImpostorsCallback=function(e){this._options.affectedImpostorsCallback&&this._options.affectedImpostorsCallback(e)},e.prototype.dispose=function(e){var t=this;void 0===e&&(e=!0),e?this._sphere.dispose():setTimeout(function(){t._dataFetched||t._sphere.dispose()},0)},e.prototype._prepareSphere=function(){this._sphere||(this._sphere=Sr.a.CreateSphere("radialExplosionEventSphere",this._options.sphere,this._scene),this._sphere.isVisible=!1)},e.prototype._intersectsWithSphere=function(e,t,n){var r=e.object;return this._prepareSphere(),this._sphere.position=t,this._sphere.scaling=new o.x(2*n,2*n,2*n),this._sphere._updateBoundingInfo(),this._sphere.computeWorldMatrix(!0),this._sphere.intersectsMesh(r,!0)},e}(),Ya=function(){function e(e,t,n,r){this._physicsHelper=e,this._scene=t,this._origin=n,this._options=r,this._dataFetched=!1,this._options=l.a({},new Xa,this._options),this._tickCallback=this._tick.bind(this),this._options.strength=-1*this._options.strength}return e.prototype.getData=function(){return this._dataFetched=!0,{sphere:this._sphere}},e.prototype.enable=function(){this._tickCallback.call(this),this._scene.registerBeforeRender(this._tickCallback)},e.prototype.disable=function(){this._scene.unregisterBeforeRender(this._tickCallback)},e.prototype.dispose=function(e){var t=this;void 0===e&&(e=!0),e?this._sphere.dispose():setTimeout(function(){t._dataFetched||t._sphere.dispose()},0)},e.prototype._tick=function(){if(this._sphere)this._physicsHelper.applyRadialExplosionForce(this._origin,this._options);else{var e=this._physicsHelper.applyRadialExplosionForce(this._origin,this._options);e&&(this._sphere=e.getData().sphere.clone("radialExplosionEventSphereClone"))}},e}(),Ha=function(){function e(e,t,n){this._scene=e,this._origin=t,this._options=n,this._originTop=o.x.Zero(),this._originDirection=o.x.Zero(),this._cylinderPosition=o.x.Zero(),this._dataFetched=!1,this._physicsEngine=this._scene.getPhysicsEngine(),this._options=l.a({},new Ka,this._options),this._origin.addToRef(new o.x(0,this._options.height/2,0),this._cylinderPosition),this._origin.addToRef(new o.x(0,this._options.height,0),this._originTop),this._options.updraftMode===Va.Perpendicular&&(this._originDirection=this._origin.subtract(this._originTop).normalize()),this._tickCallback=this._tick.bind(this),this._prepareCylinder()}return e.prototype.getData=function(){return this._dataFetched=!0,{cylinder:this._cylinder}},e.prototype.enable=function(){this._tickCallback.call(this),this._scene.registerBeforeRender(this._tickCallback)},e.prototype.disable=function(){this._scene.unregisterBeforeRender(this._tickCallback)},e.prototype.dispose=function(e){var t=this;void 0===e&&(e=!0),this._cylinder&&(e?this._cylinder.dispose():setTimeout(function(){t._dataFetched||t._cylinder.dispose()},0))},e.prototype.getImpostorHitData=function(e){if(0===e.mass)return null;if(!this._intersectsWithCylinder(e))return null;var t=e.getObjectCenter();if(this._options.updraftMode===Va.Perpendicular)var n=this._originDirection;else n=t.subtract(this._originTop);var r=o.x.Distance(this._origin,t),i=-1*this._options.strength;return{force:n.multiplyByFloats(i,i,i),contactPoint:t,distanceFromOrigin:r}},e.prototype._tick=function(){var e=this;this._physicsEngine.getImpostors().forEach(function(t){var n=e.getImpostorHitData(t);n&&t.applyForce(n.force,n.contactPoint)})},e.prototype._prepareCylinder=function(){this._cylinder||(this._cylinder=Rn.a.CreateCylinder("updraftEventCylinder",{height:this._options.height,diameter:2*this._options.radius},this._scene),this._cylinder.isVisible=!1)},e.prototype._intersectsWithCylinder=function(e){var t=e.object;return this._cylinder.position=this._cylinderPosition,this._cylinder.intersectsMesh(t,!0)},e}(),Wa=function(){function e(e,t,n){this._scene=e,this._origin=t,this._options=n,this._originTop=o.x.Zero(),this._cylinderPosition=o.x.Zero(),this._dataFetched=!1,this._physicsEngine=this._scene.getPhysicsEngine(),this._options=l.a({},new Qa,this._options),this._origin.addToRef(new o.x(0,this._options.height/2,0),this._cylinderPosition),this._origin.addToRef(new o.x(0,this._options.height,0),this._originTop),this._tickCallback=this._tick.bind(this),this._prepareCylinder()}return e.prototype.getData=function(){return this._dataFetched=!0,{cylinder:this._cylinder}},e.prototype.enable=function(){this._tickCallback.call(this),this._scene.registerBeforeRender(this._tickCallback)},e.prototype.disable=function(){this._scene.unregisterBeforeRender(this._tickCallback)},e.prototype.dispose=function(e){var t=this;void 0===e&&(e=!0),e?this._cylinder.dispose():setTimeout(function(){t._dataFetched||t._cylinder.dispose()},0)},e.prototype.getImpostorHitData=function(e){if(0===e.mass)return null;if(!this._intersectsWithCylinder(e))return null;if("Mesh"!==e.object.getClassName()&&"InstancedMesh"!==e.object.getClassName())return null;var t=e.getObjectCenter(),n=new o.x(this._origin.x,t.y,this._origin.z),r=t.subtract(n),i=new Ot.a(n,r,this._options.radius).intersectsMesh(e.object),a=i.pickedPoint;if(!a)return null;var s=i.distance/this._options.radius,u=a.normalize();if(s>this._options.centripetalForceThreshold&&(u=u.negate()),s>this._options.centripetalForceThreshold)var l=u.x*this._options.centripetalForceMultiplier,c=u.y*this._options.updraftForceMultiplier,h=u.z*this._options.centripetalForceMultiplier;else{var d=o.x.Cross(n,t).normalize();l=(d.x+u.x)*this._options.centrifugalForceMultiplier,c=this._originTop.y*this._options.updraftForceMultiplier,h=(d.z+u.z)*this._options.centrifugalForceMultiplier}var f=new o.x(l,c,h);return{force:f=f.multiplyByFloats(this._options.strength,this._options.strength,this._options.strength),contactPoint:t,distanceFromOrigin:s}},e.prototype._tick=function(){var e=this;this._physicsEngine.getImpostors().forEach(function(t){var n=e.getImpostorHitData(t);n&&t.applyForce(n.force,n.contactPoint)})},e.prototype._prepareCylinder=function(){this._cylinder||(this._cylinder=Rn.a.CreateCylinder("vortexEventCylinder",{height:this._options.height,diameter:2*this._options.radius},this._scene),this._cylinder.isVisible=!1)},e.prototype._intersectsWithCylinder=function(e){var t=e.object;return this._cylinder.position=this._cylinderPosition,this._cylinder.intersectsMesh(t,!0)},e}(),Xa=function(){this.radius=5,this.strength=10,this.falloff=Ua.Constant,this.sphere={segments:32,diameter:1}},Ka=function(){this.radius=5,this.strength=10,this.height=10,this.updraftMode=Va.Center},Qa=function(){this.radius=5,this.strength=10,this.height=10,this.centripetalForceThreshold=.7,this.centripetalForceMultiplier=5,this.centrifugalForceMultiplier=.5,this.updraftForceMultiplier=.02};!function(e){e[e.Constant=0]="Constant",e[e.Linear=1]="Linear"}(Ua||(Ua={})),function(e){e[e.Center=0]="Center",e[e.Perpendicular=1]="Perpendicular"}(Va||(Va={})),jt.a.ShadersStore.blackAndWhitePixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform float degree;\nvoid main(void)\n{\nvec3 color=texture2D(textureSampler,vUV).rgb;\nfloat luminance=dot(color,vec3(0.3,0.59,0.11));\nvec3 blackAndWhite=vec3(luminance,luminance,luminance);\ngl_FragColor=vec4(color-((color-blackAndWhite)*degree),1.0);\n}";var qa=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,"blackAndWhite",["degree"],null,n,r,i,o,a)||this;return s.degree=1,s.onApplyObservable.add(function(e){e.setFloat("degree",s.degree)}),s}return l.d(t,e),t}(zt),Za=function(){function e(e,t,n,r){this._name=t,this._singleInstance=r||!0,this._getPostProcesses=n,this._cameras={},this._indicesForCamera={},this._postProcesses={}}return Object.defineProperty(e.prototype,"isSupported",{get:function(){for(var e in this._postProcesses)if(this._postProcesses.hasOwnProperty(e))for(var t=this._postProcesses[e],n=0;n<t.length;n++)if(!t[n].isSupported)return!1;return!0},enumerable:!0,configurable:!0}),e.prototype._update=function(){},e.prototype._attachCameras=function(e){var t,n=this,r=ye.h.MakeArray(e||this._cameras);if(r)for(var i=0;i<r.length;i++){var o=r[i],a=o.name;if(!this._postProcesses[t=this._singleInstance?0:a]){var s=this._getPostProcesses();s&&(this._postProcesses[t]=Array.isArray(s)?s:[s])}this._indicesForCamera[a]||(this._indicesForCamera[a]=[]),this._postProcesses[t].forEach(function(e){var t=o.attachPostProcess(e);n._indicesForCamera[a].push(t)}),this._cameras[a]||(this._cameras[a]=o)}},e.prototype._detachCameras=function(e){var t=ye.h.MakeArray(e||this._cameras);if(t)for(var n=0;n<t.length;n++){var r=t[n],i=r.name,o=this._postProcesses[this._singleInstance?0:i];o&&o.forEach(function(e){r.detachPostProcess(e)}),this._cameras[i]&&(this._cameras[i]=null)}},e.prototype._enable=function(e){var t=this,n=ye.h.MakeArray(e||this._cameras);if(n)for(var r=0;r<n.length;r++)for(var i=n[r],o=i.name,a=0;a<this._indicesForCamera[o].length;a++)null!=i._postProcesses[this._indicesForCamera[o][a]]||this._postProcesses[this._singleInstance?0:o].forEach(function(e){n[r].attachPostProcess(e,t._indicesForCamera[o][a])})},e.prototype._disable=function(e){var t=ye.h.MakeArray(e||this._cameras);if(t)for(var n=0;n<t.length;n++){var r=t[n];this._postProcesses[this._singleInstance?0:r.name].forEach(function(e){r.detachPostProcess(e)})}},e.prototype.getPostProcesses=function(e){return this._singleInstance?this._postProcesses[0]:e?this._postProcesses[e.name]:null},e}();jt.a.ShadersStore.extractHighlightsPixelShader="#include<helperFunctions>\n\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform float threshold;\nuniform float exposure;\nvoid main(void)\n{\ngl_FragColor=texture2D(textureSampler,vUV);\nfloat luma=getLuminance(gl_FragColor.rgb*exposure);\ngl_FragColor.rgb=step(threshold,luma)*gl_FragColor.rgb;\n}";var Ja=function(e){function t(t,n,r,i,a,s,u,l){void 0===u&&(u=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===l&&(l=!1);var c=e.call(this,t,"extractHighlights",["threshold","exposure"],null,n,r,i,a,s,null,u,void 0,null,l)||this;return c.threshold=.9,c._exposure=1,c._inputPostProcess=null,c.onApplyObservable.add(function(e){c._inputPostProcess&&e.setTextureFromPostProcess("textureSampler",c._inputPostProcess),e.setFloat("threshold",Math.pow(c.threshold,o.u)),e.setFloat("exposure",c._exposure)}),c}return l.d(t,e),t}(zt);jt.a.ShadersStore.bloomMergePixelShader="uniform sampler2D textureSampler;\nuniform sampler2D bloomBlur;\nvarying vec2 vUV;\nuniform float bloomWeight;\nvoid main(void)\n{\ngl_FragColor=texture2D(textureSampler,vUV);\nvec3 blurred=texture2D(bloomBlur,vUV).rgb;\ngl_FragColor.rgb=gl_FragColor.rgb+(blurred.rgb*bloomWeight);\n}\n";var $a=function(e){function t(t,n,r,i,o,a,s,u,l,c,h){void 0===c&&(c=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===h&&(h=!1);var d=e.call(this,t,"bloomMerge",["bloomWeight"],["circleOfConfusionSampler","blurStep0","blurStep1","blurStep2","bloomBlur"],o,a,s,u,l,null,c,void 0,null,!0)||this;return d.weight=i,d.onApplyObservable.add(function(e){e.setTextureFromPostProcess("textureSampler",n),e.setTextureFromPostProcessOutput("bloomBlur",r),e.setFloat("bloomWeight",d.weight)}),h||d.updateEffect(),d}return l.d(t,e),t}(zt),es=function(e){function t(t,n,r,i,a,s){void 0===a&&(a=0),void 0===s&&(s=!1);var u=e.call(this,t.getEngine(),"bloom",function(){return u._effects},!0)||this;return u.bloomScale=n,u._effects=[],u._downscale=new Ja("highlights",1,null,Ge.a.BILINEAR_SAMPLINGMODE,t.getEngine(),!1,a,s),u._blurX=new jr("horizontal blur",new o.w(1,0),10,n,null,Ge.a.BILINEAR_SAMPLINGMODE,t.getEngine(),!1,a,void 0,s),u._blurX.alwaysForcePOT=!0,u._blurX.autoClear=!1,u._blurY=new jr("vertical blur",new o.w(0,1),10,n,null,Ge.a.BILINEAR_SAMPLINGMODE,t.getEngine(),!1,a,void 0,s),u._blurY.alwaysForcePOT=!0,u._blurY.autoClear=!1,u.kernel=i,u._effects=[u._downscale,u._blurX,u._blurY],u._merge=new $a("bloomMerge",u._downscale,u._blurY,r,n,null,Ge.a.BILINEAR_SAMPLINGMODE,t.getEngine(),!1,a,s),u._merge.autoClear=!1,u._effects.push(u._merge),u}return l.d(t,e),Object.defineProperty(t.prototype,"threshold",{get:function(){return this._downscale.threshold},set:function(e){this._downscale.threshold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){return this._merge.weight},set:function(e){this._merge.weight=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"kernel",{get:function(){return this._blurX.kernel/this.bloomScale},set:function(e){this._blurX.kernel=e*this.bloomScale,this._blurY.kernel=e*this.bloomScale},enumerable:!0,configurable:!0}),t.prototype.disposeEffects=function(e){for(var t=0;t<this._effects.length;t++)this._effects[t].dispose(e)},t.prototype._updateEffects=function(){for(var e=0;e<this._effects.length;e++)this._effects[e].updateEffect()},t.prototype._isReady=function(){for(var e=0;e<this._effects.length;e++)if(!this._effects[e].isReady())return!1;return!0},t}(Za);jt.a.ShadersStore.chromaticAberrationPixelShader="\nuniform sampler2D textureSampler;\n\nuniform float chromatic_aberration;\nuniform float radialIntensity;\nuniform vec2 direction;\nuniform vec2 centerPosition;\nuniform float screen_width;\nuniform float screen_height;\n\nvarying vec2 vUV;\nvoid main(void)\n{\nvec2 centered_screen_pos=vec2(vUV.x-centerPosition.x,vUV.y-centerPosition.y);\nvec2 directionOfEffect=direction;\nif(directionOfEffect.x == 0. && directionOfEffect.y == 0.){\ndirectionOfEffect=normalize(centered_screen_pos);\n}\nfloat radius2=centered_screen_pos.x*centered_screen_pos.x\n+centered_screen_pos.y*centered_screen_pos.y;\nfloat radius=sqrt(radius2);\nvec4 original=texture2D(textureSampler,vUV);\n\nvec3 ref_indices=vec3(-0.3,0.0,0.3);\nfloat ref_shiftX=chromatic_aberration*pow(radius,radialIntensity)*directionOfEffect.x/screen_width;\nfloat ref_shiftY=chromatic_aberration*pow(radius,radialIntensity)*directionOfEffect.y/screen_height;\n\nvec2 ref_coords_r=vec2(vUV.x+ref_indices.r*ref_shiftX,vUV.y+ref_indices.r*ref_shiftY*0.5);\nvec2 ref_coords_g=vec2(vUV.x+ref_indices.g*ref_shiftX,vUV.y+ref_indices.g*ref_shiftY*0.5);\nvec2 ref_coords_b=vec2(vUV.x+ref_indices.b*ref_shiftX,vUV.y+ref_indices.b*ref_shiftY*0.5);\noriginal.r=texture2D(textureSampler,ref_coords_r).r;\noriginal.g=texture2D(textureSampler,ref_coords_g).g;\noriginal.b=texture2D(textureSampler,ref_coords_b).b;\noriginal.a=clamp(texture2D(textureSampler,ref_coords_r).a+texture2D(textureSampler,ref_coords_g).a+texture2D(textureSampler,ref_coords_b).a,0.,1.);\ngl_FragColor=original;\n}";var ts=function(e){function t(t,n,r,i,a,s,u,l,c,h){void 0===c&&(c=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===h&&(h=!1);var d=e.call(this,t,"chromaticAberration",["chromatic_aberration","screen_width","screen_height","direction","radialIntensity","centerPosition"],[],i,a,s,u,l,null,c,void 0,null,h)||this;return d.aberrationAmount=30,d.radialIntensity=0,d.direction=new o.w(.707,.707),d.centerPosition=new o.w(.5,.5),d.onApplyObservable.add(function(e){e.setFloat("chromatic_aberration",d.aberrationAmount),e.setFloat("screen_width",n),e.setFloat("screen_height",r),e.setFloat("radialIntensity",d.radialIntensity),e.setFloat2("direction",d.direction.x,d.direction.y),e.setFloat2("centerPosition",d.centerPosition.x,d.centerPosition.y)}),d}return l.d(t,e),t}(zt);jt.a.ShadersStore.circleOfConfusionPixelShader="\nuniform sampler2D depthSampler;\n\nvarying vec2 vUV;\n\nuniform vec2 cameraMinMaxZ;\n\nuniform float focusDistance;\nuniform float cocPrecalculation;\nvoid main(void)\n{\nfloat depth=texture2D(depthSampler,vUV).r;\nfloat pixelDistance=(cameraMinMaxZ.x+(cameraMinMaxZ.y-cameraMinMaxZ.x)*depth)*1000.0;\nfloat coc=abs(cocPrecalculation* ((focusDistance-pixelDistance)/pixelDistance));\ncoc=clamp(coc,0.0,1.0);\ngl_FragColor=vec4(coc,depth,coc,1.0);\n}\n";var ns=function(e){function t(t,n,r,i,o,a,s,u,l){void 0===u&&(u=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===l&&(l=!1);var c=e.call(this,t,"circleOfConfusion",["cameraMinMaxZ","focusDistance","cocPrecalculation"],["depthSampler"],r,i,o,a,s,null,u,void 0,null,l)||this;return c.lensSize=50,c.fStop=1.4,c.focusDistance=2e3,c.focalLength=50,c._depthTexture=null,c._depthTexture=n,c.onApplyObservable.add(function(e){if(c._depthTexture){e.setTexture("depthSampler",c._depthTexture);var t=c.lensSize/c.fStop*c.focalLength/(c.focusDistance-c.focalLength);e.setFloat("focusDistance",c.focusDistance),e.setFloat("cocPrecalculation",t),e.setFloat2("cameraMinMaxZ",c._depthTexture.activeCamera.minZ,c._depthTexture.activeCamera.maxZ)}else p.a.Warn("No depth texture set on CircleOfConfusionPostProcess")}),c}return l.d(t,e),Object.defineProperty(t.prototype,"depthTexture",{set:function(e){this._depthTexture=e},enumerable:!0,configurable:!0}),t}(zt);jt.a.ShadersStore.colorCorrectionPixelShader="\nuniform sampler2D textureSampler;\nuniform sampler2D colorTable;\n\nvarying vec2 vUV;\n\nconst float SLICE_COUNT=16.0;\n\nvec4 sampleAs3DTexture(sampler2D textureSampler,vec3 uv,float width) {\nfloat sliceSize=1.0/width;\nfloat slicePixelSize=sliceSize/width;\nfloat sliceInnerSize=slicePixelSize*(width-1.0);\nfloat zSlice0=min(floor(uv.z*width),width-1.0);\nfloat zSlice1=min(zSlice0+1.0,width-1.0);\nfloat xOffset=slicePixelSize*0.5+uv.x*sliceInnerSize;\nfloat s0=xOffset+(zSlice0*sliceSize);\nfloat s1=xOffset+(zSlice1*sliceSize);\nvec4 slice0Color=texture2D(textureSampler,vec2(s0,uv.y));\nvec4 slice1Color=texture2D(textureSampler,vec2(s1,uv.y));\nfloat zOffset=mod(uv.z*width,1.0);\nvec4 result=mix(slice0Color,slice1Color,zOffset);\nreturn result;\n}\nvoid main(void)\n{\nvec4 screen_color=texture2D(textureSampler,vUV);\ngl_FragColor=sampleAs3DTexture(colorTable,screen_color.rgb,SLICE_COUNT);\n}";var rs=function(e){function t(t,n,r,i,o,a,s){var u=e.call(this,t,"colorCorrection",null,["colorTable"],r,i,o,a,s)||this;return u._colorTableTexture=new Ge.a(n,i.getScene(),!0,!1,Ge.a.TRILINEAR_SAMPLINGMODE),u._colorTableTexture.anisotropicFilteringLevel=1,u._colorTableTexture.wrapU=Ge.a.CLAMP_ADDRESSMODE,u._colorTableTexture.wrapV=Ge.a.CLAMP_ADDRESSMODE,u.onApply=function(e){e.setTexture("colorTable",u._colorTableTexture)},u}return l.d(t,e),t}(zt);jt.a.ShadersStore.convolutionPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform vec2 screenSize;\nuniform float kernel[9];\nvoid main(void)\n{\nvec2 onePixel=vec2(1.0,1.0)/screenSize;\nvec4 colorSum =\ntexture2D(textureSampler,vUV+onePixel*vec2(-1,-1))*kernel[0] +\ntexture2D(textureSampler,vUV+onePixel*vec2(0,-1))*kernel[1] +\ntexture2D(textureSampler,vUV+onePixel*vec2(1,-1))*kernel[2] +\ntexture2D(textureSampler,vUV+onePixel*vec2(-1,0))*kernel[3] +\ntexture2D(textureSampler,vUV+onePixel*vec2(0,0))*kernel[4] +\ntexture2D(textureSampler,vUV+onePixel*vec2(1,0))*kernel[5] +\ntexture2D(textureSampler,vUV+onePixel*vec2(-1,1))*kernel[6] +\ntexture2D(textureSampler,vUV+onePixel*vec2(0,1))*kernel[7] +\ntexture2D(textureSampler,vUV+onePixel*vec2(1,1))*kernel[8];\nfloat kernelWeight =\nkernel[0] +\nkernel[1] +\nkernel[2] +\nkernel[3] +\nkernel[4] +\nkernel[5] +\nkernel[6] +\nkernel[7] +\nkernel[8];\nif (kernelWeight<=0.0) {\nkernelWeight=1.0;\n}\ngl_FragColor=vec4((colorSum/kernelWeight).rgb,1);\n}";var is=function(e){function t(t,n,r,i,o,a,s,u){void 0===u&&(u=_.a.TEXTURETYPE_UNSIGNED_INT);var l=e.call(this,t,"convolution",["kernel","screenSize"],null,r,i,o,a,s,null,u)||this;return l.kernel=n,l.onApply=function(e){e.setFloat2("screenSize",l.width,l.height),e.setArray("kernel",l.kernel)},l}return l.d(t,e),t.EdgeDetect0Kernel=[1,0,-1,0,0,0,-1,0,1],t.EdgeDetect1Kernel=[0,1,0,1,-4,1,0,1,0],t.EdgeDetect2Kernel=[-1,-1,-1,-1,8,-1,-1,-1,-1],t.SharpenKernel=[0,-1,0,-1,5,-1,0,-1,0],t.EmbossKernel=[-2,-1,0,-1,1,1,0,1,2],t.GaussianKernel=[0,1,0,1,1,1,0,1,0],t}(zt),os=function(e){function t(t,n,r,i,o,a,s,u,l,c,h,d,f){void 0===u&&(u=null),void 0===l&&(l=Ge.a.BILINEAR_SAMPLINGMODE),void 0===d&&(d=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===f&&(f=!1);var p=e.call(this,t,r,i,o,a,l=_.a.TEXTURE_BILINEAR_SAMPLINGMODE,c,h,d=_.a.TEXTURETYPE_UNSIGNED_INT,"#define DOF 1\r\n",f)||this;return p.direction=r,p.onApplyObservable.add(function(e){null!=u&&e.setTextureFromPostProcess("textureSampler",u),e.setTextureFromPostProcessOutput("circleOfConfusionSampler",s),n.activeCamera&&e.setFloat2("cameraMinMaxZ",n.activeCamera.minZ,n.activeCamera.maxZ)}),p}return l.d(t,e),t}(jr);jt.a.ShadersStore.depthOfFieldMergePixelShader="uniform sampler2D textureSampler;\nvarying vec2 vUV;\nuniform sampler2D circleOfConfusionSampler;\nuniform sampler2D blurStep0;\n#if BLUR_LEVEL>0\nuniform sampler2D blurStep1;\n#endif\n#if BLUR_LEVEL>1\nuniform sampler2D blurStep2;\n#endif\nvoid main(void)\n{\nfloat coc=texture2D(circleOfConfusionSampler,vUV).r;\n#if BLUR_LEVEL == 0\nvec4 original=texture2D(textureSampler,vUV);\nvec4 blurred0=texture2D(blurStep0,vUV);\ngl_FragColor=mix(original,blurred0,coc);\n#endif\n#if BLUR_LEVEL == 1\nif(coc<0.5){\nvec4 original=texture2D(textureSampler,vUV);\nvec4 blurred1=texture2D(blurStep1,vUV);\ngl_FragColor=mix(original,blurred1,coc/0.5);\n}else{\nvec4 blurred0=texture2D(blurStep0,vUV);\nvec4 blurred1=texture2D(blurStep1,vUV);\ngl_FragColor=mix(blurred1,blurred0,(coc-0.5)/0.5);\n}\n#endif\n#if BLUR_LEVEL == 2\nif(coc<0.33){\nvec4 original=texture2D(textureSampler,vUV);\nvec4 blurred2=texture2D(blurStep2,vUV);\ngl_FragColor=mix(original,blurred2,coc/0.33);\n}else if(coc<0.66){\nvec4 blurred1=texture2D(blurStep1,vUV);\nvec4 blurred2=texture2D(blurStep2,vUV);\ngl_FragColor=mix(blurred2,blurred1,(coc-0.33)/0.33);\n}else{\nvec4 blurred0=texture2D(blurStep0,vUV);\nvec4 blurred1=texture2D(blurStep1,vUV);\ngl_FragColor=mix(blurred1,blurred0,(coc-0.66)/0.34);\n}\n#endif\n}\n";var as,ss=function(){},us=function(e){function t(t,n,r,i,o,a,s,u,l,c,h){void 0===c&&(c=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===h&&(h=!1);var d=e.call(this,t,"depthOfFieldMerge",[],["circleOfConfusionSampler","blurStep0","blurStep1","blurStep2"],o,a,s,u,l,null,c,void 0,null,!0)||this;return d.blurSteps=i,d.onApplyObservable.add(function(e){e.setTextureFromPostProcess("textureSampler",n),e.setTextureFromPostProcessOutput("circleOfConfusionSampler",r),i.forEach(function(t,n){e.setTextureFromPostProcessOutput("blurStep"+(i.length-n-1),t)})}),h||d.updateEffect(),d}return l.d(t,e),t.prototype.updateEffect=function(t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=null),t||(t="",t+="#define BLUR_LEVEL "+(this.blurSteps.length-1)+"\n"),e.prototype.updateEffect.call(this,t,n,r,i,o,a)},t}(zt);!function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}(as||(as={}));var ls=function(e){function t(t,n,r,i,a){void 0===r&&(r=as.Low),void 0===i&&(i=0),void 0===a&&(a=!1);var s=e.call(this,t.getEngine(),"depth of field",function(){return s._effects},!0)||this;s._effects=[],s._circleOfConfusion=new ns("circleOfConfusion",n,1,null,Ge.a.BILINEAR_SAMPLINGMODE,t.getEngine(),!1,i,a),s._depthOfFieldBlurY=[],s._depthOfFieldBlurX=[];var u=1,l=15;switch(r){case as.High:u=3,l=51;break;case as.Medium:u=2,l=31;break;default:l=15,u=1}for(var c=l/Math.pow(2,u-1),h=1,d=0;d<u;d++){var f=new os("verticle blur",t,new o.w(0,1),c,h,null,s._circleOfConfusion,0==d?s._circleOfConfusion:null,Ge.a.BILINEAR_SAMPLINGMODE,t.getEngine(),!1,i,a);f.autoClear=!1,h=.75/Math.pow(2,d);var p=new os("horizontal blur",t,new o.w(1,0),c,h,null,s._circleOfConfusion,null,Ge.a.BILINEAR_SAMPLINGMODE,t.getEngine(),!1,i,a);p.autoClear=!1,s._depthOfFieldBlurY.push(f),s._depthOfFieldBlurX.push(p)}for(s._effects=[s._circleOfConfusion],d=0;d<s._depthOfFieldBlurX.length;d++)s._effects.push(s._depthOfFieldBlurY[d]),s._effects.push(s._depthOfFieldBlurX[d]);return s._dofMerge=new us("dofMerge",s._circleOfConfusion,s._circleOfConfusion,s._depthOfFieldBlurX,h,null,Ge.a.BILINEAR_SAMPLINGMODE,t.getEngine(),!1,i,a),s._dofMerge.autoClear=!1,s._effects.push(s._dofMerge),s}return l.d(t,e),Object.defineProperty(t.prototype,"focalLength",{get:function(){return this._circleOfConfusion.focalLength},set:function(e){this._circleOfConfusion.focalLength=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fStop",{get:function(){return this._circleOfConfusion.fStop},set:function(e){this._circleOfConfusion.fStop=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusDistance",{get:function(){return this._circleOfConfusion.focusDistance},set:function(e){this._circleOfConfusion.focusDistance=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lensSize",{get:function(){return this._circleOfConfusion.lensSize},set:function(e){this._circleOfConfusion.lensSize=e},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"DepthOfFieldEffect"},Object.defineProperty(t.prototype,"depthTexture",{set:function(e){this._circleOfConfusion.depthTexture=e},enumerable:!0,configurable:!0}),t.prototype.disposeEffects=function(e){for(var t=0;t<this._effects.length;t++)this._effects[t].dispose(e)},t.prototype._updateEffects=function(){for(var e=0;e<this._effects.length;e++)this._effects[e].updateEffect()},t.prototype._isReady=function(){for(var e=0;e<this._effects.length;e++)if(!this._effects[e].isReady())return!1;return!0},t}(Za);jt.a.ShadersStore.displayPassPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform sampler2D passSampler;\nvoid main(void)\n{\ngl_FragColor=texture2D(passSampler,vUV);\n}";var cs=function(e){function t(t,n,r,i,o,a){return e.call(this,t,"displayPass",["passSampler"],["passSampler"],n,r,i,o,a)||this}return l.d(t,e),t}(zt);jt.a.ShadersStore.filterPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform mat4 kernelMatrix;\nvoid main(void)\n{\nvec3 baseColor=texture2D(textureSampler,vUV).rgb;\nvec3 updatedColor=(kernelMatrix*vec4(baseColor,1.0)).rgb;\ngl_FragColor=vec4(updatedColor,1.0);\n}";var hs=function(e){function t(t,n,r,i,o,a,s){var u=e.call(this,t,"filter",["kernelMatrix"],null,r,i,o,a,s)||this;return u.kernelMatrix=n,u.onApply=function(e){e.setMatrix("kernelMatrix",u.kernelMatrix)},u}return l.d(t,e),t}(zt);jt.a.ShadersStore.fxaaPixelShader="uniform sampler2D textureSampler;\nuniform vec2 texelSize;\nvarying vec2 vUV;\nvarying vec2 sampleCoordS;\nvarying vec2 sampleCoordE;\nvarying vec2 sampleCoordN;\nvarying vec2 sampleCoordW;\nvarying vec2 sampleCoordNW;\nvarying vec2 sampleCoordSE;\nvarying vec2 sampleCoordNE;\nvarying vec2 sampleCoordSW;\nconst float fxaaQualitySubpix=1.0;\nconst float fxaaQualityEdgeThreshold=0.166;\nconst float fxaaQualityEdgeThresholdMin=0.0833;\nconst vec3 kLumaCoefficients=vec3(0.2126,0.7152,0.0722);\n#define FxaaLuma(rgba) dot(rgba.rgb,kLumaCoefficients)\nvoid main(){\nvec2 posM;\nposM.x=vUV.x;\nposM.y=vUV.y;\nvec4 rgbyM=texture2D(textureSampler,vUV,0.0);\nfloat lumaM=FxaaLuma(rgbyM);\nfloat lumaS=FxaaLuma(texture2D(textureSampler,sampleCoordS,0.0));\nfloat lumaE=FxaaLuma(texture2D(textureSampler,sampleCoordE,0.0));\nfloat lumaN=FxaaLuma(texture2D(textureSampler,sampleCoordN,0.0));\nfloat lumaW=FxaaLuma(texture2D(textureSampler,sampleCoordW,0.0));\nfloat maxSM=max(lumaS,lumaM);\nfloat minSM=min(lumaS,lumaM);\nfloat maxESM=max(lumaE,maxSM);\nfloat minESM=min(lumaE,minSM);\nfloat maxWN=max(lumaN,lumaW);\nfloat minWN=min(lumaN,lumaW);\nfloat rangeMax=max(maxWN,maxESM);\nfloat rangeMin=min(minWN,minESM);\nfloat rangeMaxScaled=rangeMax*fxaaQualityEdgeThreshold;\nfloat range=rangeMax-rangeMin;\nfloat rangeMaxClamped=max(fxaaQualityEdgeThresholdMin,rangeMaxScaled);\n#ifndef MALI\nif(range<rangeMaxClamped)\n{\ngl_FragColor=rgbyM;\nreturn;\n}\n#endif\nfloat lumaNW=FxaaLuma(texture2D(textureSampler,sampleCoordNW,0.0));\nfloat lumaSE=FxaaLuma(texture2D(textureSampler,sampleCoordSE,0.0));\nfloat lumaNE=FxaaLuma(texture2D(textureSampler,sampleCoordNE,0.0));\nfloat lumaSW=FxaaLuma(texture2D(textureSampler,sampleCoordSW,0.0));\nfloat lumaNS=lumaN+lumaS;\nfloat lumaWE=lumaW+lumaE;\nfloat subpixRcpRange=1.0/range;\nfloat subpixNSWE=lumaNS+lumaWE;\nfloat edgeHorz1=(-2.0*lumaM)+lumaNS;\nfloat edgeVert1=(-2.0*lumaM)+lumaWE;\nfloat lumaNESE=lumaNE+lumaSE;\nfloat lumaNWNE=lumaNW+lumaNE;\nfloat edgeHorz2=(-2.0*lumaE)+lumaNESE;\nfloat edgeVert2=(-2.0*lumaN)+lumaNWNE;\nfloat lumaNWSW=lumaNW+lumaSW;\nfloat lumaSWSE=lumaSW+lumaSE;\nfloat edgeHorz4=(abs(edgeHorz1)*2.0)+abs(edgeHorz2);\nfloat edgeVert4=(abs(edgeVert1)*2.0)+abs(edgeVert2);\nfloat edgeHorz3=(-2.0*lumaW)+lumaNWSW;\nfloat edgeVert3=(-2.0*lumaS)+lumaSWSE;\nfloat edgeHorz=abs(edgeHorz3)+edgeHorz4;\nfloat edgeVert=abs(edgeVert3)+edgeVert4;\nfloat subpixNWSWNESE=lumaNWSW+lumaNESE;\nfloat lengthSign=texelSize.x;\nbool horzSpan=edgeHorz>=edgeVert;\nfloat subpixA=subpixNSWE*2.0+subpixNWSWNESE;\nif (!horzSpan)\n{\nlumaN=lumaW;\n}\nif (!horzSpan)\n{\nlumaS=lumaE;\n}\nif (horzSpan)\n{\nlengthSign=texelSize.y;\n}\nfloat subpixB=(subpixA*(1.0/12.0))-lumaM;\nfloat gradientN=lumaN-lumaM;\nfloat gradientS=lumaS-lumaM;\nfloat lumaNN=lumaN+lumaM;\nfloat lumaSS=lumaS+lumaM;\nbool pairN=abs(gradientN)>=abs(gradientS);\nfloat gradient=max(abs(gradientN),abs(gradientS));\nif (pairN)\n{\nlengthSign=-lengthSign;\n}\nfloat subpixC=clamp(abs(subpixB)*subpixRcpRange,0.0,1.0);\nvec2 posB;\nposB.x=posM.x;\nposB.y=posM.y;\nvec2 offNP;\noffNP.x=(!horzSpan) ? 0.0 : texelSize.x;\noffNP.y=(horzSpan) ? 0.0 : texelSize.y;\nif (!horzSpan)\n{\nposB.x+=lengthSign*0.5;\n}\nif (horzSpan)\n{\nposB.y+=lengthSign*0.5;\n}\nvec2 posN;\nposN.x=posB.x-offNP.x*1.5;\nposN.y=posB.y-offNP.y*1.5;\nvec2 posP;\nposP.x=posB.x+offNP.x*1.5;\nposP.y=posB.y+offNP.y*1.5;\nfloat subpixD=((-2.0)*subpixC)+3.0;\nfloat lumaEndN=FxaaLuma(texture2D(textureSampler,posN,0.0));\nfloat subpixE=subpixC*subpixC;\nfloat lumaEndP=FxaaLuma(texture2D(textureSampler,posP,0.0));\nif (!pairN)\n{\nlumaNN=lumaSS;\n}\nfloat gradientScaled=gradient*1.0/4.0;\nfloat lumaMM=lumaM-lumaNN*0.5;\nfloat subpixF=subpixD*subpixE;\nbool lumaMLTZero=lumaMM<0.0;\nlumaEndN-=lumaNN*0.5;\nlumaEndP-=lumaNN*0.5;\nbool doneN=abs(lumaEndN)>=gradientScaled;\nbool doneP=abs(lumaEndP)>=gradientScaled;\nif (!doneN)\n{\nposN.x-=offNP.x*3.0;\n}\nif (!doneN)\n{\nposN.y-=offNP.y*3.0;\n}\nbool doneNP=(!doneN) || (!doneP);\nif (!doneP)\n{\nposP.x+=offNP.x*3.0;\n}\nif (!doneP)\n{\nposP.y+=offNP.y*3.0;\n}\nif (doneNP)\n{\nif (!doneN) lumaEndN=FxaaLuma(texture2D(textureSampler,posN.xy,0.0));\nif (!doneP) lumaEndP=FxaaLuma(texture2D(textureSampler,posP.xy,0.0));\nif (!doneN) lumaEndN=lumaEndN-lumaNN*0.5;\nif (!doneP) lumaEndP=lumaEndP-lumaNN*0.5;\ndoneN=abs(lumaEndN)>=gradientScaled;\ndoneP=abs(lumaEndP)>=gradientScaled;\nif (!doneN) posN.x-=offNP.x*12.0;\nif (!doneN) posN.y-=offNP.y*12.0;\ndoneNP=(!doneN) || (!doneP);\nif (!doneP) posP.x+=offNP.x*12.0;\nif (!doneP) posP.y+=offNP.y*12.0;\n}\nfloat dstN=posM.x-posN.x;\nfloat dstP=posP.x-posM.x;\nif (!horzSpan)\n{\ndstN=posM.y-posN.y;\n}\nif (!horzSpan)\n{\ndstP=posP.y-posM.y;\n}\nbool goodSpanN=(lumaEndN<0.0) != lumaMLTZero;\nfloat spanLength=(dstP+dstN);\nbool goodSpanP=(lumaEndP<0.0) != lumaMLTZero;\nfloat spanLengthRcp=1.0/spanLength;\nbool directionN=dstN<dstP;\nfloat dst=min(dstN,dstP);\nbool goodSpan=directionN ? goodSpanN : goodSpanP;\nfloat subpixG=subpixF*subpixF;\nfloat pixelOffset=(dst*(-spanLengthRcp))+0.5;\nfloat subpixH=subpixG*fxaaQualitySubpix;\nfloat pixelOffsetGood=goodSpan ? pixelOffset : 0.0;\nfloat pixelOffsetSubpix=max(pixelOffsetGood,subpixH);\nif (!horzSpan)\n{\nposM.x+=pixelOffsetSubpix*lengthSign;\n}\nif (horzSpan)\n{\nposM.y+=pixelOffsetSubpix*lengthSign;\n}\n#ifdef MALI\nif(range<rangeMaxClamped)\n{\ngl_FragColor=rgbyM;\n}\nelse\n{\ngl_FragColor=texture2D(textureSampler,posM,0.0);\n}\n#else\ngl_FragColor=texture2D(textureSampler,posM,0.0);\n#endif\n}",jt.a.ShadersStore.fxaaVertexShader="\nattribute vec2 position;\nuniform vec2 texelSize;\n\nvarying vec2 vUV;\nvarying vec2 sampleCoordS;\nvarying vec2 sampleCoordE;\nvarying vec2 sampleCoordN;\nvarying vec2 sampleCoordW;\nvarying vec2 sampleCoordNW;\nvarying vec2 sampleCoordSE;\nvarying vec2 sampleCoordNE;\nvarying vec2 sampleCoordSW;\nconst vec2 madd=vec2(0.5,0.5);\nvoid main(void) {\nvUV=(position*madd+madd);\nsampleCoordS=vUV+vec2( 0.0,1.0)*texelSize;\nsampleCoordE=vUV+vec2( 1.0,0.0)*texelSize;\nsampleCoordN=vUV+vec2( 0.0,-1.0)*texelSize;\nsampleCoordW=vUV+vec2(-1.0,0.0)*texelSize;\nsampleCoordNW=vUV+vec2(-1.0,-1.0)*texelSize;\nsampleCoordSE=vUV+vec2( 1.0,1.0)*texelSize;\nsampleCoordNE=vUV+vec2( 1.0,-1.0)*texelSize;\nsampleCoordSW=vUV+vec2(-1.0,1.0)*texelSize;\ngl_Position=vec4(position,0.0,1.0);\n}";var ds=function(e){function t(t,n,r,i,o,a,s){void 0===r&&(r=null),void 0===s&&(s=_.a.TEXTURETYPE_UNSIGNED_INT);var u=e.call(this,t,"fxaa",["texelSize"],null,n,r,i||Ge.a.BILINEAR_SAMPLINGMODE,o,a,null,s,"fxaa",void 0,!0)||this,l=u._getDefines();return u.updateEffect(l),u.onApplyObservable.add(function(e){var t=u.texelSize;e.setFloat2("texelSize",t.x,t.y)}),u}return l.d(t,e),t.prototype._getDefines=function(){var e=this.getEngine();if(!e)return null;var t=e.getGlInfo();return t&&t.renderer&&t.renderer.toLowerCase().indexOf("mali")>-1?"#define MALI 1\n":null},t}(zt);jt.a.ShadersStore.grainPixelShader="#include<helperFunctions>\n\nuniform sampler2D textureSampler;\n\nuniform float intensity;\nuniform float animatedSeed;\n\nvarying vec2 vUV;\nvoid main(void)\n{\ngl_FragColor=texture2D(textureSampler,vUV);\nvec2 seed=vUV*(animatedSeed);\nfloat grain=dither(seed,intensity);\n\nfloat lum=getLuminance(gl_FragColor.rgb);\nfloat grainAmount=(cos(-PI+(lum*PI*2.))+1.)/2.;\ngl_FragColor.rgb+=grain*grainAmount;\ngl_FragColor.rgb=max(gl_FragColor.rgb,0.0);\n}";var fs=function(e){function t(t,n,r,i,o,a,s,u){void 0===s&&(s=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===u&&(u=!1);var l=e.call(this,t,"grain",["intensity","animatedSeed"],[],n,r,i,o,a,null,s,void 0,null,u)||this;return l.intensity=30,l.animated=!1,l.onApplyObservable.add(function(e){e.setFloat("intensity",l.intensity),e.setFloat("animatedSeed",l.animated?Math.random()+1:1)}),l}return l.d(t,e),t}(zt);jt.a.ShadersStore.highlightsPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nconst vec3 RGBLuminanceCoefficients=vec3(0.2126,0.7152,0.0722);\nvoid main(void)\n{\nvec4 tex=texture2D(textureSampler,vUV);\nvec3 c=tex.rgb;\nfloat luma=dot(c.rgb,RGBLuminanceCoefficients);\n\n\ngl_FragColor=vec4(pow(c,vec3(25.0-luma*15.0)),tex.a);\n}";var ps=function(e){function t(t,n,r,i,o,a,s){return void 0===s&&(s=_.a.TEXTURETYPE_UNSIGNED_INT),e.call(this,t,"highlights",null,null,n,r,i,o,a,null,s)||this}return l.d(t,e),t}(zt);jt.a.IncludesShadersStore.mrtFragmentDeclaration="#if __VERSION__>=200\nlayout(location=0) out vec4 glFragData[{X}];\n#endif\n",jt.a.ShadersStore.geometryPixelShader="#extension GL_EXT_draw_buffers : require\nprecision highp float;\nprecision highp int;\nvarying vec3 vNormalV;\nvarying vec4 vViewPos;\n#ifdef POSITION\nvarying vec3 vPosition;\n#endif\n#ifdef VELOCITY\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n#endif\n#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform sampler2D diffuseSampler;\n#endif\n#include<mrtFragmentDeclaration>[RENDER_TARGET_COUNT]\nvoid main() {\n#ifdef ALPHATEST\nif (texture2D(diffuseSampler,vUV).a<0.4)\ndiscard;\n#endif\ngl_FragData[0]=vec4(vViewPos.z/vViewPos.w,0.0,0.0,1.0);\n\ngl_FragData[1]=vec4(normalize(vNormalV),1.0);\n\n#ifdef POSITION\ngl_FragData[POSITION_INDEX]=vec4(vPosition,1.0);\n#endif\n#ifdef VELOCITY\nvec2 a=(vCurrentPosition.xy/vCurrentPosition.w)*0.5+0.5;\nvec2 b=(vPreviousPosition.xy/vPreviousPosition.w)*0.5+0.5;\nvec2 velocity=abs(a-b);\nvelocity=vec2(pow(velocity.x,1.0/3.0),pow(velocity.y,1.0/3.0))*sign(a-b)*0.5+0.5;\ngl_FragData[VELOCITY_INDEX]=vec4(velocity,0.0,1.0);\n#endif\n}",jt.a.ShadersStore.geometryVertexShader="precision highp float;\nprecision highp int;\n#include<bonesDeclaration>\n#include<instancesDeclaration>\nattribute vec3 position;\nattribute vec3 normal;\n#if defined(ALPHATEST) || defined(NEED_UV)\nvarying vec2 vUV;\nuniform mat4 diffuseMatrix;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#endif\n\nuniform mat4 viewProjection;\nuniform mat4 view;\nvarying vec3 vNormalV;\nvarying vec4 vViewPos;\n#ifdef POSITION\nvarying vec3 vPosition;\n#endif\n#ifdef VELOCITY\nuniform mat4 previousWorld;\nuniform mat4 previousViewProjection;\n#ifdef BONES_VELOCITY_ENABLED\n#if NUM_BONE_INFLUENCERS>0\nuniform mat4 mPreviousBones[BonesPerMesh];\n#endif\n#endif\nvarying vec4 vCurrentPosition;\nvarying vec4 vPreviousPosition;\n#endif\nvoid main(void)\n{\n#include<instancesVertex>\n#if defined(VELOCITY) && !defined(BONES_VELOCITY_ENABLED)\n\nvCurrentPosition=viewProjection*finalWorld*vec4(position,1.0);\nvPreviousPosition=previousViewProjection*previousWorld*vec4(position,1.0);\n#endif\n#include<bonesVertex>\nvec4 pos=vec4(finalWorld*vec4(position,1.0));\nvNormalV=normalize(vec3((view*finalWorld)*vec4(normal,0.0)));\nvViewPos=view*pos;\n#if defined(VELOCITY) && defined(BONES_VELOCITY_ENABLED)\nvCurrentPosition=viewProjection*finalWorld*vec4(position,1.0);\n#if NUM_BONE_INFLUENCERS>0\nmat4 previousInfluence;\npreviousInfluence=mPreviousBones[int(matricesIndices[0])]*matricesWeights[0];\n#if NUM_BONE_INFLUENCERS>1\npreviousInfluence+=mPreviousBones[int(matricesIndices[1])]*matricesWeights[1];\n#endif\n#if NUM_BONE_INFLUENCERS>2\npreviousInfluence+=mPreviousBones[int(matricesIndices[2])]*matricesWeights[2];\n#endif\n#if NUM_BONE_INFLUENCERS>3\npreviousInfluence+=mPreviousBones[int(matricesIndices[3])]*matricesWeights[3];\n#endif\n#if NUM_BONE_INFLUENCERS>4\npreviousInfluence+=mPreviousBones[int(matricesIndicesExtra[0])]*matricesWeightsExtra[0];\n#endif\n#if NUM_BONE_INFLUENCERS>5\npreviousInfluence+=mPreviousBones[int(matricesIndicesExtra[1])]*matricesWeightsExtra[1];\n#endif\n#if NUM_BONE_INFLUENCERS>6\npreviousInfluence+=mPreviousBones[int(matricesIndicesExtra[2])]*matricesWeightsExtra[2];\n#endif\n#if NUM_BONE_INFLUENCERS>7\npreviousInfluence+=mPreviousBones[int(matricesIndicesExtra[3])]*matricesWeightsExtra[3];\n#endif\nvPreviousPosition=previousViewProjection*previousWorld*previousInfluence*vec4(position,1.0);\n#else\nvPreviousPosition=previousViewProjection*previousWorld*vec4(position,1.0);\n#endif\n#endif\n#ifdef POSITION\nvPosition=pos.xyz/pos.w;\n#endif\ngl_Position=viewProjection*finalWorld*vec4(position,1.0);\n#if defined(ALPHATEST) || defined(BASIC_RENDER)\n#ifdef UV1\nvUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef UV2\nvUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n}";var _s=function(){function e(t,n){void 0===n&&(n=1),this._previousTransformationMatrices={},this._previousBonesTransformationMatrices={},this.excludedSkinnedMeshesFromVelocity=[],this._enablePosition=!1,this._enableVelocity=!1,this._positionIndex=-1,this._velocityIndex=-1,this._scene=t,this._ratio=n,e._SceneComponentInitialization(this._scene),this._createRenderTargets()}return Object.defineProperty(e.prototype,"renderList",{set:function(e){this._multiRenderTarget.renderList=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSupported",{get:function(){return this._multiRenderTarget.isSupported},enumerable:!0,configurable:!0}),e.prototype.getTextureIndex=function(t){switch(t){case e.POSITION_TEXTURE_TYPE:return this._positionIndex;case e.VELOCITY_TEXTURE_TYPE:return this._velocityIndex;default:return-1}},Object.defineProperty(e.prototype,"enablePosition",{get:function(){return this._enablePosition},set:function(e){this._enablePosition=e,this.dispose(),this._createRenderTargets()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enableVelocity",{get:function(){return this._enableVelocity},set:function(e){this._enableVelocity=e,e||(this._previousTransformationMatrices={}),this.dispose(),this._createRenderTargets()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ratio",{get:function(){return this._ratio},enumerable:!0,configurable:!0}),e.prototype.isReady=function(e,t){var n=e.getMaterial();if(n&&n.disableDepthWrite)return!1;var r=[],i=[Mn.b.PositionKind,Mn.b.NormalKind],o=e.getMesh();n&&n.needAlphaTesting()&&(r.push("#define ALPHATEST"),o.isVerticesDataPresent(Mn.b.UVKind)&&(i.push(Mn.b.UVKind),r.push("#define UV1")),o.isVerticesDataPresent(Mn.b.UV2Kind)&&(i.push(Mn.b.UV2Kind),r.push("#define UV2"))),this._enablePosition&&(r.push("#define POSITION"),r.push("#define POSITION_INDEX "+this._positionIndex)),this._enableVelocity&&(r.push("#define VELOCITY"),r.push("#define VELOCITY_INDEX "+this._velocityIndex),-1===this.excludedSkinnedMeshesFromVelocity.indexOf(o)&&r.push("#define BONES_VELOCITY_ENABLED")),o.useBones&&o.computeBonesUsingShaders?(i.push(Mn.b.MatricesIndicesKind),i.push(Mn.b.MatricesWeightsKind),o.numBoneInfluencers>4&&(i.push(Mn.b.MatricesIndicesExtraKind),i.push(Mn.b.MatricesWeightsExtraKind)),r.push("#define NUM_BONE_INFLUENCERS "+o.numBoneInfluencers),r.push("#define BonesPerMesh "+(o.skeleton?o.skeleton.bones.length+1:0))):r.push("#define NUM_BONE_INFLUENCERS 0"),t&&(r.push("#define INSTANCES"),i.push("world0"),i.push("world1"),i.push("world2"),i.push("world3")),r.push("#define RENDER_TARGET_COUNT "+this._multiRenderTarget.textures.length);var a=r.join("\n");return this._cachedDefines!==a&&(this._cachedDefines=a,this._effect=this._scene.getEngine().createEffect("geometry",i,["world","mBones","viewProjection","diffuseMatrix","view","previousWorld","previousViewProjection","mPreviousBones"],["diffuseSampler"],a,void 0,void 0,void 0,{buffersCount:this._enablePosition?3:2})),this._effect.isReady()},e.prototype.getGBuffer=function(){return this._multiRenderTarget},Object.defineProperty(e.prototype,"samples",{get:function(){return this._multiRenderTarget.samples},set:function(e){this._multiRenderTarget.samples=e},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this.getGBuffer().dispose()},e.prototype._createRenderTargets=function(){var e=this,t=this._scene.getEngine(),n=2;if(this._enablePosition&&(this._positionIndex=n,n++),this._enableVelocity&&(this._velocityIndex=n,n++),this._multiRenderTarget=new To("gBuffer",{width:t.getRenderWidth()*this._ratio,height:t.getRenderHeight()*this._ratio},n,this._scene,{generateMipMaps:!1,generateDepthTexture:!0,defaultType:_.a.TEXTURETYPE_FLOAT}),this.isSupported){this._multiRenderTarget.wrapU=Ge.a.CLAMP_ADDRESSMODE,this._multiRenderTarget.wrapV=Ge.a.CLAMP_ADDRESSMODE,this._multiRenderTarget.refreshRate=1,this._multiRenderTarget.renderParticles=!1,this._multiRenderTarget.renderList=null,this._multiRenderTarget.onClearObservable.add(function(e){e.clear(new o.f(0,0,0,1),!0,!0,!0)});var r=function(t){var n=t.getRenderingMesh(),r=e._scene,i=r.getEngine(),a=t.getMaterial();if(a){if(e._enableVelocity&&!e._previousTransformationMatrices[n.uniqueId]&&(e._previousTransformationMatrices[n.uniqueId]={world:o.j.Identity(),viewProjection:r.getTransformMatrix()},n.skeleton)){var s=n.skeleton.getTransformMatrices(n);e._previousBonesTransformationMatrices[n.uniqueId]=e._copyBonesTransformationMatrices(s,new Float32Array(s.length))}i.setState(a.backFaceCulling,0,!1,r.useRightHandedSystem);var u=n._getInstancesRenderList(t._id);if(!u.mustReturn){var l=i.getCaps().instancedArrays&&null!==u.visibleInstances[t._id];if(e.isReady(t,l)){if(i.enableEffect(e._effect),n._bind(t,e._effect,Ci.a.TriangleFillMode),e._effect.setMatrix("viewProjection",r.getTransformMatrix()),e._effect.setMatrix("view",r.getViewMatrix()),a&&a.needAlphaTesting()){var c=a.getAlphaTestTexture();c&&(e._effect.setTexture("diffuseSampler",c),e._effect.setMatrix("diffuseMatrix",c.getTextureMatrix()))}n.useBones&&n.computeBonesUsingShaders&&n.skeleton&&(e._effect.setMatrices("mBones",n.skeleton.getTransformMatrices(n)),e._enableVelocity&&e._effect.setMatrices("mPreviousBones",e._previousBonesTransformationMatrices[n.uniqueId])),e._enableVelocity&&(e._effect.setMatrix("previousWorld",e._previousTransformationMatrices[n.uniqueId].world),e._effect.setMatrix("previousViewProjection",e._previousTransformationMatrices[n.uniqueId].viewProjection)),n._processRendering(t,e._effect,Ci.a.TriangleFillMode,u,l,function(t,n){return e._effect.setMatrix("world",n)})}e._enableVelocity&&(e._previousTransformationMatrices[n.uniqueId].world=n.getWorldMatrix().clone(),e._previousTransformationMatrices[n.uniqueId].viewProjection=e._scene.getTransformMatrix().clone(),n.skeleton&&e._copyBonesTransformationMatrices(n.skeleton.getTransformMatrices(n),e._previousBonesTransformationMatrices[n.uniqueId]))}}};this._multiRenderTarget.customRenderFunction=function(e,n,i,o){var a;if(o.length){for(t.setColorWrite(!1),a=0;a<o.length;a++)r(o.data[a]);t.setColorWrite(!0)}for(a=0;a<e.length;a++)r(e.data[a]);for(a=0;a<n.length;a++)r(n.data[a])}}},e.prototype._copyBonesTransformationMatrices=function(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t},e.POSITION_TEXTURE_TYPE=1,e.VELOCITY_TEXTURE_TYPE=2,e._SceneComponentInitialization=function(e){throw be.a.WarnImport("GeometryBufferRendererSceneComponent")},e}();Object.defineProperty(H.a.prototype,"geometryBufferRenderer",{get:function(){},set:function(e){e&&e.isSupported&&(this._geometryBufferRenderer=e)},enumerable:!0,configurable:!0}),H.a.prototype.enableGeometryBufferRenderer=function(e){return void 0===e&&(e=1),this._geometryBufferRenderer?this._geometryBufferRenderer:(this._geometryBufferRenderer=new _s(this,e),this._geometryBufferRenderer.isSupported||(this._geometryBufferRenderer=null),this._geometryBufferRenderer)},H.a.prototype.disableGeometryBufferRenderer=function(){this._geometryBufferRenderer&&(this._geometryBufferRenderer.dispose(),this._geometryBufferRenderer=null)};var ms=function(){function e(e){this.name=xe.a.NAME_GEOMETRYBUFFERRENDERER,this.scene=e}return e.prototype.register=function(){this.scene._gatherRenderTargetsStage.registerStep(xe.a.STEP_GATHERRENDERTARGETS_GEOMETRYBUFFERRENDERER,this,this._gatherRenderTargets)},e.prototype.rebuild=function(){},e.prototype.dispose=function(){},e.prototype._gatherRenderTargets=function(e){this.scene._geometryBufferRenderer&&e.push(this.scene._geometryBufferRenderer.getGBuffer())},e}();_s._SceneComponentInitialization=function(e){var t=e._getComponent(xe.a.NAME_GEOMETRYBUFFERRENDERER);t||(t=new ms(e),e._addComponent(t))},jt.a.ShadersStore.motionBlurPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform sampler2D velocitySampler;\nuniform float motionStrength;\nuniform float motionScale;\nuniform vec2 screenSize;\nvoid main(void)\n{\n#ifdef GEOMETRY_SUPPORTED\nvec2 texelSize=1.0/screenSize;\nvec2 velocityColor=texture2D(velocitySampler,vUV).rg*2.0-1.0;\nvec2 velocity=vec2(pow(velocityColor.r,3.0),pow(velocityColor.g,3.0));\nvelocity*=motionScale*motionStrength;\nfloat speed=length(velocity/texelSize);\nint samplesCount=int(clamp(speed,1.0,SAMPLES));\nvelocity=normalize(velocity)*texelSize;\nfloat hlim=float(-samplesCount)*0.5+0.5;\nvec4 result=texture2D(textureSampler,vUV);\nfor (int i=1; i<int(SAMPLES); ++i)\n{\nif (i>=samplesCount)\nbreak;\nvec2 offset=vUV+velocity*(hlim+float(i));\nresult+=texture2D(textureSampler,offset);\n}\ngl_FragColor=result/float(samplesCount);\ngl_FragColor.a=1.0;\n#else\ngl_FragColor=texture2D(textureSampler,vUV);\n#endif\n}\n";var gs=function(e){function t(t,n,r,i,a,s,u,l,c){void 0===l&&(l=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===c&&(c=!1);var h=e.call(this,t,"motionBlur",["motionStrength","motionScale","screenSize"],["velocitySampler"],r,i,a,s,u,"#define GEOMETRY_SUPPORTED\n#define SAMPLES 64.0",l,void 0,null,c)||this;return h.motionStrength=1,h._motionBlurSamples=32,h._geometryBufferRenderer=n.enableGeometryBufferRenderer(),h._geometryBufferRenderer?(h._geometryBufferRenderer.enableVelocity=!0,h.onApply=function(e){if(e.setVector2("screenSize",new o.w(h.width,h.height)),e.setFloat("motionScale",n.getAnimationRatio()),e.setFloat("motionStrength",h.motionStrength),h._geometryBufferRenderer){var t=h._geometryBufferRenderer.getTextureIndex(_s.VELOCITY_TEXTURE_TYPE);e.setTexture("velocitySampler",h._geometryBufferRenderer.getGBuffer().textures[t])}}):(p.a.Warn("Multiple Render Target support needed to compute object based motion blur"),h.updateEffect()),h}return l.d(t,e),Object.defineProperty(t.prototype,"motionBlurSamples",{get:function(){return this._motionBlurSamples},set:function(e){this._motionBlurSamples=e,this._geometryBufferRenderer&&this.updateEffect("#define GEOMETRY_SUPPORTED\n#define SAMPLES "+e.toFixed(1))},enumerable:!0,configurable:!0}),t.prototype.excludeSkinnedMesh=function(e){this._geometryBufferRenderer&&e.skeleton&&this._geometryBufferRenderer.excludedSkinnedMeshesFromVelocity.push(e)},t.prototype.removeExcludedSkinnedMesh=function(e){if(this._geometryBufferRenderer&&e.skeleton){var t=this._geometryBufferRenderer.excludedSkinnedMeshesFromVelocity.indexOf(e);-1!==t&&this._geometryBufferRenderer.excludedSkinnedMeshesFromVelocity.splice(t,1)}},t.prototype.dispose=function(t){this._geometryBufferRenderer&&(this._geometryBufferRenderer._previousTransformationMatrices={},this._geometryBufferRenderer._previousBonesTransformationMatrices={},this._geometryBufferRenderer.excludedSkinnedMeshesFromVelocity=[]),e.prototype.dispose.call(this,t)},t}(zt);jt.a.ShadersStore.refractionPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform sampler2D refractionSampler;\n\nuniform vec3 baseColor;\nuniform float depth;\nuniform float colorLevel;\nvoid main() {\nfloat ref=1.0-texture2D(refractionSampler,vUV).r;\nvec2 uv=vUV-vec2(0.5);\nvec2 offset=uv*depth*ref;\nvec3 sourceColor=texture2D(textureSampler,vUV-offset).rgb;\ngl_FragColor=vec4(sourceColor+sourceColor*ref*colorLevel,1.0);\n}";var vs=function(e){function t(t,n,r,i,o,a,s,u,l,c){var h=e.call(this,t,"refraction",["baseColor","depth","colorLevel"],["refractionSampler"],a,s,u,l,c)||this;return h.color=r,h.depth=i,h.colorLevel=o,h._ownRefractionTexture=!0,h.onActivateObservable.add(function(e){h._refTexture=h._refTexture||new Ge.a(n,e.getScene())}),h.onApplyObservable.add(function(e){e.setColor3("baseColor",h.color),e.setFloat("depth",h.depth),e.setFloat("colorLevel",h.colorLevel),e.setTexture("refractionSampler",h._refTexture)}),h}return l.d(t,e),Object.defineProperty(t.prototype,"refractionTexture",{get:function(){return this._refTexture},set:function(e){this._refTexture&&this._ownRefractionTexture&&this._refTexture.dispose(),this._refTexture=e,this._ownRefractionTexture=!1},enumerable:!0,configurable:!0}),t.prototype.dispose=function(t){this._refTexture&&this._ownRefractionTexture&&(this._refTexture.dispose(),this._refTexture=null),e.prototype.dispose.call(this,t)},t}(zt);jt.a.ShadersStore.sharpenPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\nuniform vec2 screenSize;\nuniform vec2 sharpnessAmounts;\nvoid main(void)\n{\nvec2 onePixel=vec2(1.0,1.0)/screenSize;\nvec4 color=texture2D(textureSampler,vUV);\nvec4 edgeDetection=texture2D(textureSampler,vUV+onePixel*vec2(0,-1)) +\ntexture2D(textureSampler,vUV+onePixel*vec2(-1,0)) +\ntexture2D(textureSampler,vUV+onePixel*vec2(1,0)) +\ntexture2D(textureSampler,vUV+onePixel*vec2(0,1)) -\ncolor*4.0;\ngl_FragColor=max(vec4(color.rgb*sharpnessAmounts.y,color.a)-(sharpnessAmounts.x*vec4(edgeDetection.rgb,0)),0.);\n}";var ys=function(e){function t(t,n,r,i,o,a,s,u){void 0===s&&(s=_.a.TEXTURETYPE_UNSIGNED_INT),void 0===u&&(u=!1);var l=e.call(this,t,"sharpen",["sharpnessAmounts","screenSize"],null,n,r,i,o,a,null,s,void 0,null,u)||this;return l.colorAmount=1,l.edgeAmount=.3,l.onApply=function(e){e.setFloat2("screenSize",l.width,l.height),e.setFloat2("sharpnessAmounts",l.edgeAmount,l.colorAmount)},l}return l.d(t,e),t}(zt),bs=function(){function e(e,t){this.engine=e,this._name=t,this._renderEffects={},this._renderEffectsForIsolatedPass=new Array,this._cameras=[]}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return"PostProcessRenderPipeline"},Object.defineProperty(e.prototype,"isSupported",{get:function(){for(var e in this._renderEffects)if(this._renderEffects.hasOwnProperty(e)&&!this._renderEffects[e].isSupported)return!1;return!0},enumerable:!0,configurable:!0}),e.prototype.addEffect=function(e){this._renderEffects[e._name]=e},e.prototype._rebuild=function(){},e.prototype._enableEffect=function(e,t){var n=this._renderEffects[e];n&&n._enable(ye.h.MakeArray(t||this._cameras))},e.prototype._disableEffect=function(e,t){var n=this._renderEffects[e];n&&n._disable(ye.h.MakeArray(t||this._cameras))},e.prototype._attachCameras=function(e,t){var n=ye.h.MakeArray(e||this._cameras);if(n){var r,i=[];for(r=0;r<n.length;r++){var o=n[r],a=o.name;-1===this._cameras.indexOf(o)?this._cameras[a]=o:t&&i.push(r)}for(r=0;r<i.length;r++)e.splice(i[r],1);for(var s in this._renderEffects)this._renderEffects.hasOwnProperty(s)&&this._renderEffects[s]._attachCameras(n)}},e.prototype._detachCameras=function(e){var t=ye.h.MakeArray(e||this._cameras);if(t){for(var n in this._renderEffects)this._renderEffects.hasOwnProperty(n)&&this._renderEffects[n]._detachCameras(t);for(var r=0;r<t.length;r++)this._cameras.splice(this._cameras.indexOf(t[r]),1)}},e.prototype._update=function(){for(var e in this._renderEffects)this._renderEffects.hasOwnProperty(e)&&this._renderEffects[e]._update();for(var t=0;t<this._cameras.length;t++){var n=this._cameras[t].name;this._renderEffectsForIsolatedPass[n]&&this._renderEffectsForIsolatedPass[n]._update()}},e.prototype._reset=function(){this._renderEffects={},this._renderEffectsForIsolatedPass=new Array},e.prototype._enableMSAAOnFirstPostProcess=function(e){var t=Object.keys(this._renderEffects);if(1===this.engine.webGLVersion)return!1;if(t.length>0){var n=this._renderEffects[t[0]].getPostProcesses();n&&(n[0].samples=e)}return!0},e.prototype.dispose=function(){},l.c([Object(L.c)()],e.prototype,"_name",void 0),e}(),Ts=function(){function e(){this._renderPipelines={}}return Object.defineProperty(e.prototype,"supportedPipelines",{get:function(){var e=[];for(var t in this._renderPipelines)if(this._renderPipelines.hasOwnProperty(t)){var n=this._renderPipelines[t];n.isSupported&&e.push(n)}return e},enumerable:!0,configurable:!0}),e.prototype.addPipeline=function(e){this._renderPipelines[e._name]=e},e.prototype.attachCamerasToRenderPipeline=function(e,t,n){void 0===n&&(n=!1);var r=this._renderPipelines[e];r&&r._attachCameras(t,n)},e.prototype.detachCamerasFromRenderPipeline=function(e,t){var n=this._renderPipelines[e];n&&n._detachCameras(t)},e.prototype.enableEffectInPipeline=function(e,t,n){var r=this._renderPipelines[e];r&&r._enableEffect(t,n)},e.prototype.disableEffectInPipeline=function(e,t,n){var r=this._renderPipelines[e];r&&r._disableEffect(t,n)},e.prototype.update=function(){for(var e in this._renderPipelines)if(this._renderPipelines.hasOwnProperty(e)){var t=this._renderPipelines[e];t.isSupported?t._update():(t.dispose(),delete this._renderPipelines[e])}},e.prototype._rebuild=function(){for(var e in this._renderPipelines)this._renderPipelines.hasOwnProperty(e)&&this._renderPipelines[e]._rebuild()},e.prototype.dispose=function(){for(var e in this._renderPipelines)this._renderPipelines.hasOwnProperty(e)&&this._renderPipelines[e].dispose()},e}();Object.defineProperty(H.a.prototype,"postProcessRenderPipelineManager",{get:function(){if(!this._postProcessRenderPipelineManager){var e=this._getComponent(xe.a.NAME_POSTPROCESSRENDERPIPELINEMANAGER);e||(e=new Es(this),this._addComponent(e)),this._postProcessRenderPipelineManager=new Ts}return this._postProcessRenderPipelineManager},enumerable:!0,configurable:!0});var Es=function(){function e(e){this.name=xe.a.NAME_POSTPROCESSRENDERPIPELINEMANAGER,this.scene=e}return e.prototype.register=function(){this.scene._gatherRenderTargetsStage.registerStep(xe.a.STEP_GATHERRENDERTARGETS_POSTPROCESSRENDERPIPELINEMANAGER,this,this._gatherRenderTargets)},e.prototype.rebuild=function(){this.scene._postProcessRenderPipelineManager&&this.scene._postProcessRenderPipelineManager._rebuild()},e.prototype.dispose=function(){this.scene._postProcessRenderPipelineManager&&this.scene._postProcessRenderPipelineManager.dispose()},e.prototype._gatherRenderTargets=function(){this.scene._postProcessRenderPipelineManager&&this.scene._postProcessRenderPipelineManager.update()},e}(),xs=function(e){function t(t,n,r,i,o){void 0===t&&(t=""),void 0===n&&(n=!0),void 0===r&&(r=S.a.LastCreatedScene),void 0===o&&(o=!0);var a=e.call(this,r.getEngine(),t)||this;a._camerasToBeAttached=[],a.SharpenPostProcessId="SharpenPostProcessEffect",a.ImageProcessingPostProcessId="ImageProcessingPostProcessEffect",a.FxaaPostProcessId="FxaaPostProcessEffect",a.ChromaticAberrationPostProcessId="ChromaticAberrationPostProcessEffect",a.GrainPostProcessId="GrainPostProcessEffect",a._glowLayer=null,a.animations=[],a._imageProcessingConfigurationObserver=null,a._sharpenEnabled=!1,a._bloomEnabled=!1,a._depthOfFieldEnabled=!1,a._depthOfFieldBlurLevel=as.Low,a._fxaaEnabled=!1,a._imageProcessingEnabled=!0,a._bloomScale=.5,a._chromaticAberrationEnabled=!1,a._grainEnabled=!1,a._buildAllowed=!0,a._resizeObserver=null,a._hardwareScaleLevel=1,a._bloomKernel=64,a._bloomWeight=.15,a._bloomThreshold=.9,a._samples=1,a._hasCleared=!1,a._prevPostProcess=null,a._prevPrevPostProcess=null,a._depthOfFieldSceneObserver=null,a._cameras=i||r.cameras,a._cameras=a._cameras.slice(),a._camerasToBeAttached=a._cameras.slice(),a._buildAllowed=o,a._scene=r;var s=a._scene.getEngine().getCaps();a._hdr=n&&(s.textureHalfFloatRender||s.textureFloatRender),a._hdr?s.textureHalfFloatRender?a._defaultPipelineTextureType=_.a.TEXTURETYPE_HALF_FLOAT:s.textureFloatRender&&(a._defaultPipelineTextureType=_.a.TEXTURETYPE_FLOAT):a._defaultPipelineTextureType=_.a.TEXTURETYPE_UNSIGNED_INT,r.postProcessRenderPipelineManager.addPipeline(a);var u=a._scene.getEngine();return a.sharpen=new ys("sharpen",1,null,Ge.a.BILINEAR_SAMPLINGMODE,u,!1,a._defaultPipelineTextureType,!0),a._sharpenEffect=new Za(u,a.SharpenPostProcessId,function(){return a.sharpen},!0),a.depthOfField=new ls(a._scene,null,a._depthOfFieldBlurLevel,a._defaultPipelineTextureType,!0),a.bloom=new es(a._scene,a._bloomScale,a._bloomWeight,a.bloomKernel,a._defaultPipelineTextureType,!0),a.chromaticAberration=new ts("ChromaticAberration",u.getRenderWidth(),u.getRenderHeight(),1,null,Ge.a.BILINEAR_SAMPLINGMODE,u,!1,a._defaultPipelineTextureType,!0),a._chromaticAberrationEffect=new Za(u,a.ChromaticAberrationPostProcessId,function(){return a.chromaticAberration},!0),a.grain=new fs("Grain",1,null,Ge.a.BILINEAR_SAMPLINGMODE,u,!1,a._defaultPipelineTextureType,!0),a._grainEffect=new Za(u,a.GrainPostProcessId,function(){return a.grain},!0),a._resizeObserver=u.onResizeObservable.add(function(){a._hardwareScaleLevel=u.getHardwareScalingLevel(),a.bloomKernel=a.bloomKernel}),a._imageProcessingConfigurationObserver=a._scene.imageProcessingConfiguration.onUpdateParameters.add(function(){a.bloom._downscale._exposure=a._scene.imageProcessingConfiguration.exposure}),a._buildPipeline(),a}return l.d(t,e),Object.defineProperty(t.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sharpenEnabled",{get:function(){return this._sharpenEnabled},set:function(e){this._sharpenEnabled!==e&&(this._sharpenEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bloomKernel",{get:function(){return this._bloomKernel},set:function(e){this._bloomKernel=e,this.bloom.kernel=e/this._hardwareScaleLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bloomWeight",{get:function(){return this._bloomWeight},set:function(e){this._bloomWeight!==e&&(this.bloom.weight=e,this._bloomWeight=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bloomThreshold",{get:function(){return this._bloomThreshold},set:function(e){this._bloomThreshold!==e&&(this.bloom.threshold=e,this._bloomThreshold=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bloomScale",{get:function(){return this._bloomScale},set:function(e){this._bloomScale!==e&&(this._bloomScale=e,this._rebuildBloom(),this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bloomEnabled",{get:function(){return this._bloomEnabled},set:function(e){this._bloomEnabled!==e&&(this._bloomEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),t.prototype._rebuildBloom=function(){var e=this.bloom;this.bloom=new es(this._scene,this.bloomScale,this._bloomWeight,this.bloomKernel,this._defaultPipelineTextureType,!1),this.bloom.threshold=e.threshold;for(var t=0;t<this._cameras.length;t++)e.disposeEffects(this._cameras[t])},Object.defineProperty(t.prototype,"depthOfFieldEnabled",{get:function(){return this._depthOfFieldEnabled},set:function(e){this._depthOfFieldEnabled!==e&&(this._depthOfFieldEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"depthOfFieldBlurLevel",{get:function(){return this._depthOfFieldBlurLevel},set:function(e){if(this._depthOfFieldBlurLevel!==e){this._depthOfFieldBlurLevel=e;var t=this.depthOfField;this.depthOfField=new ls(this._scene,null,this._depthOfFieldBlurLevel,this._defaultPipelineTextureType,!1),this.depthOfField.focalLength=t.focalLength,this.depthOfField.focusDistance=t.focusDistance,this.depthOfField.fStop=t.fStop,this.depthOfField.lensSize=t.lensSize;for(var n=0;n<this._cameras.length;n++)t.disposeEffects(this._cameras[n]);this._buildPipeline()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fxaaEnabled",{get:function(){return this._fxaaEnabled},set:function(e){this._fxaaEnabled!==e&&(this._fxaaEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"samples",{get:function(){return this._samples},set:function(e){this._samples!==e&&(this._samples=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageProcessingEnabled",{get:function(){return this._imageProcessingEnabled},set:function(e){this._imageProcessingEnabled!==e&&(this._imageProcessingEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"glowLayerEnabled",{get:function(){return null!=this._glowLayer},set:function(e){e&&!this._glowLayer?this._glowLayer=new Di("",this._scene):!e&&this._glowLayer&&(this._glowLayer.dispose(),this._glowLayer=null)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"glowLayer",{get:function(){return this._glowLayer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chromaticAberrationEnabled",{get:function(){return this._chromaticAberrationEnabled},set:function(e){this._chromaticAberrationEnabled!==e&&(this._chromaticAberrationEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grainEnabled",{get:function(){return this._grainEnabled},set:function(e){this._grainEnabled!==e&&(this._grainEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"DefaultRenderingPipeline"},t.prototype.prepare=function(){var e=this._buildAllowed;this._buildAllowed=!0,this._buildPipeline(),this._buildAllowed=e},t.prototype._setAutoClearAndTextureSharing=function(e,t){void 0===t&&(t=!1),this._hasCleared?e.autoClear=!1:(e.autoClear=!0,this._scene.autoClear=!1,this._hasCleared=!0),t||(this._prevPrevPostProcess?e.shareOutputWith(this._prevPrevPostProcess):e.useOwnOutput(),this._prevPostProcess&&(this._prevPrevPostProcess=this._prevPostProcess),this._prevPostProcess=e)},t.prototype._buildPipeline=function(){var e=this;if(this._buildAllowed){this._scene.autoClear=!0;var t=this._scene.getEngine();if(this._disposePostProcesses(),null!==this._cameras&&(this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._cameras),this._cameras=this._camerasToBeAttached.slice()),this._reset(),this._prevPostProcess=null,this._prevPrevPostProcess=null,this._hasCleared=!1,this.depthOfFieldEnabled){if(this._cameras.length>1){for(var n=0,r=this._cameras;n<r.length;n++)(i=this._scene.enableDepthRenderer(r[n])).useOnlyInActiveCamera=!0;this._depthOfFieldSceneObserver=this._scene.onAfterRenderTargetsRenderObservable.add(function(t){e._cameras.indexOf(t.activeCamera)>-1&&(e.depthOfField.depthTexture=t.enableDepthRenderer(t.activeCamera).getDepthMap())})}else{this._scene.onAfterRenderTargetsRenderObservable.remove(this._depthOfFieldSceneObserver);var i=this._scene.enableDepthRenderer(this._cameras[0]);this.depthOfField.depthTexture=i.getDepthMap()}this.depthOfField._isReady()||this.depthOfField._updateEffects(),this.addEffect(this.depthOfField),this._setAutoClearAndTextureSharing(this.depthOfField._effects[0],!0)}else this._scene.onAfterRenderTargetsRenderObservable.remove(this._depthOfFieldSceneObserver);this.bloomEnabled&&(this.bloom._isReady()||this.bloom._updateEffects(),this.addEffect(this.bloom),this._setAutoClearAndTextureSharing(this.bloom._effects[0],!0)),this._imageProcessingEnabled&&(this.imageProcessing=new En("imageProcessing",1,null,Ge.a.BILINEAR_SAMPLINGMODE,t,!1,this._defaultPipelineTextureType),this._hdr?(this.addEffect(new Za(t,this.ImageProcessingPostProcessId,function(){return e.imageProcessing},!0)),this._setAutoClearAndTextureSharing(this.imageProcessing)):this._scene.imageProcessingConfiguration.applyByPostProcess=!1),this.sharpenEnabled&&(this.sharpen.isReady()||this.sharpen.updateEffect(),this.addEffect(this._sharpenEffect),this._setAutoClearAndTextureSharing(this.sharpen)),this.grainEnabled&&(this.grain.isReady()||this.grain.updateEffect(),this.addEffect(this._grainEffect),this._setAutoClearAndTextureSharing(this.grain)),this.chromaticAberrationEnabled&&(this.chromaticAberration.isReady()||this.chromaticAberration.updateEffect(),this.addEffect(this._chromaticAberrationEffect),this._setAutoClearAndTextureSharing(this.chromaticAberration)),this.fxaaEnabled&&(this.fxaa=new ds("fxaa",1,null,Ge.a.BILINEAR_SAMPLINGMODE,t,!1,this._defaultPipelineTextureType),this.addEffect(new Za(t,this.FxaaPostProcessId,function(){return e.fxaa},!0)),this._setAutoClearAndTextureSharing(this.fxaa,!0)),null!==this._cameras&&this._scene.postProcessRenderPipelineManager.attachCamerasToRenderPipeline(this._name,this._cameras),!this._enableMSAAOnFirstPostProcess(this.samples)&&this.samples>1&&p.a.Warn("MSAA failed to enable, MSAA is only supported in browsers that support webGL >= 2.0")}},t.prototype._disposePostProcesses=function(e){void 0===e&&(e=!1);for(var t=0;t<this._cameras.length;t++){var n=this._cameras[t];this.imageProcessing&&this.imageProcessing.dispose(n),this.fxaa&&this.fxaa.dispose(n),e&&(this.sharpen&&this.sharpen.dispose(n),this.depthOfField&&(this._scene.onAfterRenderTargetsRenderObservable.remove(this._depthOfFieldSceneObserver),this.depthOfField.disposeEffects(n)),this.bloom&&this.bloom.disposeEffects(n),this.chromaticAberration&&this.chromaticAberration.dispose(n),this.grain&&this.grain.dispose(n),this._glowLayer&&this._glowLayer.dispose())}this.imageProcessing=null,this.fxaa=null,e&&(this.sharpen=null,this._sharpenEffect=null,this.depthOfField=null,this.bloom=null,this.chromaticAberration=null,this._chromaticAberrationEffect=null,this.grain=null,this._grainEffect=null,this._glowLayer=null)},t.prototype.addCamera=function(e){this._camerasToBeAttached.push(e),this._buildPipeline()},t.prototype.removeCamera=function(e){var t=this._camerasToBeAttached.indexOf(e);this._camerasToBeAttached.splice(t,1),this._buildPipeline()},t.prototype.dispose=function(){this._disposePostProcesses(!0),this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._cameras),this._scene.autoClear=!0,this._resizeObserver&&(this._scene.getEngine().onResizeObservable.remove(this._resizeObserver),this._resizeObserver=null),this._scene.imageProcessingConfiguration.onUpdateParameters.remove(this._imageProcessingConfigurationObserver),e.prototype.dispose.call(this)},t.prototype.serialize=function(){var e=L.a.Serialize(this);return e.customType="DefaultRenderingPipeline",e},t.Parse=function(e,n,r){return L.a.Parse(function(){return new t(e._name,e._name._hdr,n)},e,n,r)},l.c([Object(L.c)()],t.prototype,"sharpenEnabled",null),l.c([Object(L.c)()],t.prototype,"bloomKernel",null),l.c([Object(L.c)()],t.prototype,"_bloomWeight",void 0),l.c([Object(L.c)()],t.prototype,"_bloomThreshold",void 0),l.c([Object(L.c)()],t.prototype,"_hdr",void 0),l.c([Object(L.c)()],t.prototype,"bloomWeight",null),l.c([Object(L.c)()],t.prototype,"bloomThreshold",null),l.c([Object(L.c)()],t.prototype,"bloomScale",null),l.c([Object(L.c)()],t.prototype,"bloomEnabled",null),l.c([Object(L.c)()],t.prototype,"depthOfFieldEnabled",null),l.c([Object(L.c)()],t.prototype,"depthOfFieldBlurLevel",null),l.c([Object(L.c)()],t.prototype,"fxaaEnabled",null),l.c([Object(L.c)()],t.prototype,"samples",null),l.c([Object(L.c)()],t.prototype,"imageProcessingEnabled",null),l.c([Object(L.c)()],t.prototype,"glowLayerEnabled",null),l.c([Object(L.c)()],t.prototype,"chromaticAberrationEnabled",null),l.c([Object(L.c)()],t.prototype,"grainEnabled",null),t}(bs);a.a.RegisteredTypes["BABYLON.DefaultRenderingPipeline"]=xs,jt.a.ShadersStore.lensHighlightsPixelShader="\nuniform sampler2D textureSampler;\n\nuniform float gain;\nuniform float threshold;\nuniform float screen_width;\nuniform float screen_height;\n\nvarying vec2 vUV;\n\nvec4 highlightColor(vec4 color) {\nvec4 highlight=color;\nfloat luminance=dot(highlight.rgb,vec3(0.2125,0.7154,0.0721));\nfloat lum_threshold;\nif (threshold>1.0) { lum_threshold=0.94+0.01*threshold; }\nelse { lum_threshold=0.5+0.44*threshold; }\nluminance=clamp((luminance-lum_threshold)*(1.0/(1.0-lum_threshold)),0.0,1.0);\nhighlight*=luminance*gain;\nhighlight.a=1.0;\nreturn highlight;\n}\nvoid main(void)\n{\nvec4 original=texture2D(textureSampler,vUV);\n\nif (gain == -1.0) {\ngl_FragColor=vec4(0.0,0.0,0.0,1.0);\nreturn;\n}\nfloat w=2.0/screen_width;\nfloat h=2.0/screen_height;\nfloat weight=1.0;\n\nvec4 blurred=vec4(0.0,0.0,0.0,0.0);\n#ifdef PENTAGON\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.84*w,0.43*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.48*w,-1.29*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.61*w,1.51*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.55*w,-0.74*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.71*w,-0.52*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.94*w,1.59*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.40*w,-1.87*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.62*w,1.16*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.09*w,0.25*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.46*w,-1.71*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.08*w,2.42*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.85*w,-1.89*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.89*w,0.16*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.29*w,1.88*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.40*w,-2.81*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.54*w,2.26*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.60*w,-0.61*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.31*w,-1.30*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.83*w,2.53*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.12*w,-2.48*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.60*w,1.11*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.82*w,0.99*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.50*w,-2.81*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.85*w,3.33*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.94*w,-1.92*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(3.27*w,-0.53*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.95*w,2.48*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.23*w,-3.04*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.17*w,2.05*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.97*w,-0.04*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.25*w,-2.00*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.31*w,3.08*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.94*w,-2.59*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(3.37*w,0.64*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-3.13*w,1.93*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.03*w,-3.65*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.60*w,3.17*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-3.14*w,-1.19*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(3.00*w,-1.19*h)));\n#else\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.85*w,0.36*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.52*w,-1.14*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.46*w,1.42*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.46*w,-0.83*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.79*w,-0.42*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.11*w,1.62*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.29*w,-2.07*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.69*w,1.39*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.28*w,0.12*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.65*w,-1.69*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.08*w,2.44*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.63*w,-1.90*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.55*w,0.31*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.13*w,1.52*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.56*w,-2.61*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.38*w,2.34*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.64*w,-0.81*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.53*w,-1.21*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.06*w,2.63*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.00*w,-2.69*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.59*w,1.32*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.82*w,0.78*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.57*w,-2.50*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(0.54*w,2.93*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.39*w,-1.81*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(3.01*w,-0.28*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.04*w,2.25*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.02*w,-3.05*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.09*w,2.25*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-3.07*w,-0.25*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.44*w,-1.90*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-0.52*w,3.05*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-1.68*w,-2.61*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(3.01*w,0.79*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.76*w,1.46*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.05*w,-2.94*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(1.21*w,2.88*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(-2.84*w,-1.30*h)));\nblurred+=highlightColor(texture2D(textureSampler,vUV+vec2(2.98*w,-0.96*h)));\n#endif\nblurred/=39.0;\ngl_FragColor=blurred;\n\n}",jt.a.ShadersStore.depthOfFieldPixelShader="\n\n\n\n\nuniform sampler2D textureSampler;\nuniform sampler2D highlightsSampler;\nuniform sampler2D depthSampler;\nuniform sampler2D grainSampler;\n\nuniform float grain_amount;\nuniform bool blur_noise;\nuniform float screen_width;\nuniform float screen_height;\nuniform float distortion;\nuniform bool dof_enabled;\n\nuniform float screen_distance;\nuniform float aperture;\nuniform float darken;\nuniform float edge_blur;\nuniform bool highlights;\n\nuniform float near;\nuniform float far;\n\nvarying vec2 vUV;\n\n#define PI 3.14159265\n#define TWOPI 6.28318530\n#define inverse_focal_length 0.1\n\nvec2 centered_screen_pos;\nvec2 distorted_coords;\nfloat radius2;\nfloat radius;\n\nvec2 rand(vec2 co)\n{\nfloat noise1=(fract(sin(dot(co,vec2(12.9898,78.233)))*43758.5453));\nfloat noise2=(fract(sin(dot(co,vec2(12.9898,78.233)*2.0))*43758.5453));\nreturn clamp(vec2(noise1,noise2),0.0,1.0);\n}\n\nvec2 getDistortedCoords(vec2 coords) {\nif (distortion == 0.0) { return coords; }\nvec2 direction=1.0*normalize(centered_screen_pos);\nvec2 dist_coords=vec2(0.5,0.5);\ndist_coords.x=0.5+direction.x*radius2*1.0;\ndist_coords.y=0.5+direction.y*radius2*1.0;\nfloat dist_amount=clamp(distortion*0.23,0.0,1.0);\ndist_coords=mix(coords,dist_coords,dist_amount);\nreturn dist_coords;\n}\n\nfloat sampleScreen(inout vec4 color,const in vec2 offset,const in float weight) {\n\nvec2 coords=distorted_coords;\nfloat angle=rand(coords*100.0).x*TWOPI;\ncoords+=vec2(offset.x*cos(angle)-offset.y*sin(angle),offset.x*sin(angle)+offset.y*cos(angle));\ncolor+=texture2D(textureSampler,coords)*weight;\nreturn weight;\n}\n\nfloat getBlurLevel(float size) {\nreturn min(3.0,ceil(size/1.0));\n}\n\nvec4 getBlurColor(float size) {\nvec4 col=texture2D(textureSampler,distorted_coords);\nif (size == 0.0) { return col; }\n\n\nfloat blur_level=getBlurLevel(size);\nfloat w=(size/screen_width);\nfloat h=(size/screen_height);\nfloat total_weight=1.0;\nvec2 sample_coords;\ntotal_weight+=sampleScreen(col,vec2(-0.50*w,0.24*h),0.93);\ntotal_weight+=sampleScreen(col,vec2(0.30*w,-0.75*h),0.90);\ntotal_weight+=sampleScreen(col,vec2(0.36*w,0.96*h),0.87);\ntotal_weight+=sampleScreen(col,vec2(-1.08*w,-0.55*h),0.85);\ntotal_weight+=sampleScreen(col,vec2(1.33*w,-0.37*h),0.83);\ntotal_weight+=sampleScreen(col,vec2(-0.82*w,1.31*h),0.80);\ntotal_weight+=sampleScreen(col,vec2(-0.31*w,-1.67*h),0.78);\ntotal_weight+=sampleScreen(col,vec2(1.47*w,1.11*h),0.76);\ntotal_weight+=sampleScreen(col,vec2(-1.97*w,0.19*h),0.74);\ntotal_weight+=sampleScreen(col,vec2(1.42*w,-1.57*h),0.72);\nif (blur_level>1.0) {\ntotal_weight+=sampleScreen(col,vec2(0.01*w,2.25*h),0.70);\ntotal_weight+=sampleScreen(col,vec2(-1.62*w,-1.74*h),0.67);\ntotal_weight+=sampleScreen(col,vec2(2.49*w,0.20*h),0.65);\ntotal_weight+=sampleScreen(col,vec2(-2.07*w,1.61*h),0.63);\ntotal_weight+=sampleScreen(col,vec2(0.46*w,-2.70*h),0.61);\ntotal_weight+=sampleScreen(col,vec2(1.55*w,2.40*h),0.59);\ntotal_weight+=sampleScreen(col,vec2(-2.88*w,-0.75*h),0.56);\ntotal_weight+=sampleScreen(col,vec2(2.73*w,-1.44*h),0.54);\ntotal_weight+=sampleScreen(col,vec2(-1.08*w,3.02*h),0.52);\ntotal_weight+=sampleScreen(col,vec2(-1.28*w,-3.05*h),0.49);\n}\nif (blur_level>2.0) {\ntotal_weight+=sampleScreen(col,vec2(3.11*w,1.43*h),0.46);\ntotal_weight+=sampleScreen(col,vec2(-3.36*w,1.08*h),0.44);\ntotal_weight+=sampleScreen(col,vec2(1.80*w,-3.16*h),0.41);\ntotal_weight+=sampleScreen(col,vec2(0.83*w,3.65*h),0.38);\ntotal_weight+=sampleScreen(col,vec2(-3.16*w,-2.19*h),0.34);\ntotal_weight+=sampleScreen(col,vec2(3.92*w,-0.53*h),0.31);\ntotal_weight+=sampleScreen(col,vec2(-2.59*w,3.12*h),0.26);\ntotal_weight+=sampleScreen(col,vec2(-0.20*w,-4.15*h),0.22);\ntotal_weight+=sampleScreen(col,vec2(3.02*w,3.00*h),0.15);\n}\ncol/=total_weight;\n\nif (darken>0.0) {\ncol.rgb*=clamp(0.3,1.0,1.05-size*0.5*darken);\n}\n\n\n\n\nreturn col;\n}\nvoid main(void)\n{\n\ncentered_screen_pos=vec2(vUV.x-0.5,vUV.y-0.5);\nradius2=centered_screen_pos.x*centered_screen_pos.x+centered_screen_pos.y*centered_screen_pos.y;\nradius=sqrt(radius2);\ndistorted_coords=getDistortedCoords(vUV);\nvec2 texels_coords=vec2(vUV.x*screen_width,vUV.y*screen_height);\nfloat depth=texture2D(depthSampler,distorted_coords).r;\nfloat distance=near+(far-near)*depth;\nvec4 color=texture2D(textureSampler,vUV);\n\n\nfloat coc=abs(aperture*(screen_distance*(inverse_focal_length-1.0/distance)-1.0));\n\nif (dof_enabled == false || coc<0.07) { coc=0.0; }\n\nfloat edge_blur_amount=0.0;\nif (edge_blur>0.0) {\nedge_blur_amount=clamp((radius*2.0-1.0+0.15*edge_blur)*1.5,0.0,1.0)*1.3;\n}\n\nfloat blur_amount=max(edge_blur_amount,coc);\n\nif (blur_amount == 0.0) {\ngl_FragColor=texture2D(textureSampler,distorted_coords);\n}\nelse {\n\ngl_FragColor=getBlurColor(blur_amount*1.7);\n\nif (highlights) {\ngl_FragColor.rgb+=clamp(coc,0.0,1.0)*texture2D(highlightsSampler,distorted_coords).rgb;\n}\nif (blur_noise) {\n\nvec2 noise=rand(distorted_coords)*0.01*blur_amount;\nvec2 blurred_coord=vec2(distorted_coords.x+noise.x,distorted_coords.y+noise.y);\ngl_FragColor=0.04*texture2D(textureSampler,blurred_coord)+0.96*gl_FragColor;\n}\n}\n\nif (grain_amount>0.0) {\nvec4 grain_color=texture2D(grainSampler,texels_coords*0.003);\ngl_FragColor.rgb+=(-0.5+grain_color.rgb)*0.30*grain_amount;\n}\n}\n";var Ms=function(e){function t(t,n,r,i,o){void 0===i&&(i=1);var a=e.call(this,r.getEngine(),t)||this;return a.LensChromaticAberrationEffect="LensChromaticAberrationEffect",a.HighlightsEnhancingEffect="HighlightsEnhancingEffect",a.LensDepthOfFieldEffect="LensDepthOfFieldEffect",a._pentagonBokehIsEnabled=!1,a._scene=r,a._depthTexture=r.enableDepthRenderer().getDepthMap(),n.grain_texture?a._grainTexture=n.grain_texture:a._createGrainTexture(),a._edgeBlur=n.edge_blur?n.edge_blur:0,a._grainAmount=n.grain_amount?n.grain_amount:0,a._chromaticAberration=n.chromatic_aberration?n.chromatic_aberration:0,a._distortion=n.distortion?n.distortion:0,a._highlightsGain=void 0!==n.dof_gain?n.dof_gain:-1,a._highlightsThreshold=n.dof_threshold?n.dof_threshold:1,a._dofDistance=void 0!==n.dof_focus_distance?n.dof_focus_distance:-1,a._dofAperture=n.dof_aperture?n.dof_aperture:1,a._dofDarken=n.dof_darken?n.dof_darken:0,a._dofPentagon=void 0===n.dof_pentagon||n.dof_pentagon,a._blurNoise=void 0===n.blur_noise||n.blur_noise,a._createChromaticAberrationPostProcess(i),a._createHighlightsPostProcess(i),a._createDepthOfFieldPostProcess(i/4),a.addEffect(new Za(r.getEngine(),a.LensChromaticAberrationEffect,function(){return a._chromaticAberrationPostProcess},!0)),a.addEffect(new Za(r.getEngine(),a.HighlightsEnhancingEffect,function(){return a._highlightsPostProcess},!0)),a.addEffect(new Za(r.getEngine(),a.LensDepthOfFieldEffect,function(){return a._depthOfFieldPostProcess},!0)),-1===a._highlightsGain&&a._disableEffect(a.HighlightsEnhancingEffect,null),r.postProcessRenderPipelineManager.addPipeline(a),o&&r.postProcessRenderPipelineManager.attachCamerasToRenderPipeline(t,o),a}return l.d(t,e),t.prototype.getClassName=function(){return"LensRenderingPipeline"},Object.defineProperty(t.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeBlur",{get:function(){return this._edgeBlur},set:function(e){this.setEdgeBlur(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"grainAmount",{get:function(){return this._grainAmount},set:function(e){this.setGrainAmount(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chromaticAberration",{get:function(){return this._chromaticAberration},set:function(e){this.setChromaticAberration(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dofAperture",{get:function(){return this._dofAperture},set:function(e){this.setAperture(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"edgeDistortion",{get:function(){return this._distortion},set:function(e){this.setEdgeDistortion(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dofDistortion",{get:function(){return this._dofDistance},set:function(e){this.setFocusDistance(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"darkenOutOfFocus",{get:function(){return this._dofDarken},set:function(e){this.setDarkenOutOfFocus(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blurNoise",{get:function(){return this._blurNoise},set:function(e){this._blurNoise=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pentagonBokeh",{get:function(){return this._pentagonBokehIsEnabled},set:function(e){e?this.enablePentagonBokeh():this.disablePentagonBokeh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highlightsGain",{get:function(){return this._highlightsGain},set:function(e){this.setHighlightsGain(e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"highlightsThreshold",{get:function(){return this._highlightsThreshold},set:function(e){this.setHighlightsThreshold(e)},enumerable:!0,configurable:!0}),t.prototype.setEdgeBlur=function(e){this._edgeBlur=e},t.prototype.disableEdgeBlur=function(){this._edgeBlur=0},t.prototype.setGrainAmount=function(e){this._grainAmount=e},t.prototype.disableGrain=function(){this._grainAmount=0},t.prototype.setChromaticAberration=function(e){this._chromaticAberration=e},t.prototype.disableChromaticAberration=function(){this._chromaticAberration=0},t.prototype.setEdgeDistortion=function(e){this._distortion=e},t.prototype.disableEdgeDistortion=function(){this._distortion=0},t.prototype.setFocusDistance=function(e){this._dofDistance=e},t.prototype.disableDepthOfField=function(){this._dofDistance=-1},t.prototype.setAperture=function(e){this._dofAperture=e},t.prototype.setDarkenOutOfFocus=function(e){this._dofDarken=e},t.prototype.enablePentagonBokeh=function(){this._highlightsPostProcess.updateEffect("#define PENTAGON\n"),this._pentagonBokehIsEnabled=!0},t.prototype.disablePentagonBokeh=function(){this._pentagonBokehIsEnabled=!1,this._highlightsPostProcess.updateEffect()},t.prototype.enableNoiseBlur=function(){this._blurNoise=!0},t.prototype.disableNoiseBlur=function(){this._blurNoise=!1},t.prototype.setHighlightsGain=function(e){this._highlightsGain=e},t.prototype.setHighlightsThreshold=function(e){-1===this._highlightsGain&&(this._highlightsGain=1),this._highlightsThreshold=e},t.prototype.disableHighlights=function(){this._highlightsGain=-1},t.prototype.dispose=function(e){void 0===e&&(e=!1),this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._scene.cameras),this._chromaticAberrationPostProcess=null,this._highlightsPostProcess=null,this._depthOfFieldPostProcess=null,this._grainTexture.dispose(),e&&this._scene.disableDepthRenderer()},t.prototype._createChromaticAberrationPostProcess=function(e){var t=this;this._chromaticAberrationPostProcess=new zt("LensChromaticAberration","chromaticAberration",["chromatic_aberration","screen_width","screen_height","direction","radialIntensity","centerPosition"],[],e,null,Ge.a.TRILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1),this._chromaticAberrationPostProcess.onApply=function(e){e.setFloat("chromatic_aberration",t._chromaticAberration),e.setFloat("screen_width",t._scene.getEngine().getRenderWidth()),e.setFloat("screen_height",t._scene.getEngine().getRenderHeight()),e.setFloat("radialIntensity",1),e.setFloat2("direction",17,17),e.setFloat2("centerPosition",.5,.5)}},t.prototype._createHighlightsPostProcess=function(e){var t=this;this._highlightsPostProcess=new zt("LensHighlights","lensHighlights",["gain","threshold","screen_width","screen_height"],[],e,null,Ge.a.TRILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,this._dofPentagon?"#define PENTAGON\n":""),this._highlightsPostProcess.onApply=function(e){e.setFloat("gain",t._highlightsGain),e.setFloat("threshold",t._highlightsThreshold),e.setTextureFromPostProcess("textureSampler",t._chromaticAberrationPostProcess),e.setFloat("screen_width",t._scene.getEngine().getRenderWidth()),e.setFloat("screen_height",t._scene.getEngine().getRenderHeight())}},t.prototype._createDepthOfFieldPostProcess=function(e){var t=this;this._depthOfFieldPostProcess=new zt("LensDepthOfField","depthOfField",["grain_amount","blur_noise","screen_width","screen_height","distortion","dof_enabled","screen_distance","aperture","darken","edge_blur","highlights","near","far"],["depthSampler","grainSampler","highlightsSampler"],e,null,Ge.a.TRILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1),this._depthOfFieldPostProcess.onApply=function(e){e.setTexture("depthSampler",t._depthTexture),e.setTexture("grainSampler",t._grainTexture),e.setTextureFromPostProcess("textureSampler",t._highlightsPostProcess),e.setTextureFromPostProcess("highlightsSampler",t._depthOfFieldPostProcess),e.setFloat("grain_amount",t._grainAmount),e.setBool("blur_noise",t._blurNoise),e.setFloat("screen_width",t._scene.getEngine().getRenderWidth()),e.setFloat("screen_height",t._scene.getEngine().getRenderHeight()),e.setFloat("distortion",t._distortion),e.setBool("dof_enabled",-1!==t._dofDistance),e.setFloat("screen_distance",1/(.1-1/t._dofDistance)),e.setFloat("aperture",t._dofAperture),e.setFloat("darken",t._dofDarken),e.setFloat("edge_blur",t._edgeBlur),e.setBool("highlights",-1!==t._highlightsGain),t._scene.activeCamera&&(e.setFloat("near",t._scene.activeCamera.minZ),e.setFloat("far",t._scene.activeCamera.maxZ))}},t.prototype._createGrainTexture=function(){this._grainTexture=new bn("LensNoiseTexture",512,this._scene,!1,Ge.a.BILINEAR_SAMPLINGMODE),this._grainTexture.wrapU=Ge.a.WRAP_ADDRESSMODE,this._grainTexture.wrapV=Ge.a.WRAP_ADDRESSMODE;for(var e,t=this._grainTexture.getContext(),n=0;n<512;n++)for(var r=0;r<512;r++)e=Math.floor(255*(Math.random()*(.58-.42)+.42)),t.fillStyle="rgb("+e+", "+e+", "+e+")",t.fillRect(n,r,1,1);this._grainTexture.update(!1)},t}(bs);jt.a.ShadersStore.ssao2PixelShader="\nprecision highp float;\nuniform sampler2D textureSampler;\nuniform float near;\nuniform float far;\nuniform float radius;\nfloat scales[16]=float[16](\n0.1,\n0.11406250000000001,\n0.131640625,\n0.15625,\n0.187890625,\n0.2265625,\n0.272265625,\n0.325,\n0.384765625,\n0.4515625,\n0.525390625,\n0.60625,\n0.694140625,\n0.7890625,\n0.891015625,\n1.0\n);\nvarying vec2 vUV;\nfloat perspectiveDepthToViewZ( const in float invClipZ,const in float near,const in float far ) {\nreturn ( near*far )/( ( far-near )*invClipZ-far );\n}\nfloat viewZToPerspectiveDepth( const in float viewZ,const in float near,const in float far ) {\nreturn ( near*far/viewZ+far)/( far-near );\n}\nfloat viewZToOrthographicDepth( const in float viewZ,const in float near,const in float far ) {\nreturn ( viewZ+near )/( near-far );\n}\n#ifdef SSAO\nuniform sampler2D randomSampler;\nuniform sampler2D normalSampler;\nuniform float randTextureTiles;\nuniform float samplesFactor;\nuniform vec3 sampleSphere[SAMPLES];\nuniform float totalStrength;\nuniform float base;\nuniform float xViewport;\nuniform float yViewport;\nuniform float maxZ;\nuniform float minZAspect;\nuniform vec2 texelSize;\nuniform mat4 projection;\nvoid main()\n{\nvec3 random=texture2D(randomSampler,vUV*randTextureTiles).rgb;\nfloat depth=texture2D(textureSampler,vUV).r;\nfloat depthSign=depth/abs(depth);\ndepth=depth*depthSign;\nvec3 normal=texture2D(normalSampler,vUV).rgb;\nfloat occlusion=0.0;\nfloat correctedRadius=min(radius,minZAspect*depth/near);\nvec3 vViewRay=vec3((vUV.x*2.0-1.0)*xViewport,(vUV.y*2.0-1.0)*yViewport,depthSign);\nvec3 origin=vViewRay*depth;\nvec3 rvec=random*2.0-1.0;\nrvec.z=0.0;\n\nfloat dotProduct=dot(rvec,normal);\nrvec=1.0-abs(dotProduct)>1e-2 ? rvec : vec3(-rvec.y,0.0,rvec.x);\nvec3 tangent=normalize(rvec-normal*dot(rvec,normal));\nvec3 bitangent=cross(normal,tangent);\nmat3 tbn=mat3(tangent,bitangent,normal);\nfloat difference;\nfor (int i=0; i<SAMPLES; ++i) {\n\nvec3 samplePosition=scales[(i+int(random.x*16.0)) % 16]*tbn*sampleSphere[(i+int(random.y*16.0)) % 16];\nsamplePosition=samplePosition*correctedRadius+origin;\n\nvec4 offset=vec4(samplePosition,1.0);\noffset=projection*offset;\noffset.xyz/=offset.w;\noffset.xy=offset.xy*0.5+0.5;\nif (offset.x<0.0 || offset.y<0.0 || offset.x>1.0 || offset.y>1.0) {\ncontinue;\n}\n\nfloat sampleDepth=abs(texture2D(textureSampler,offset.xy).r);\n\ndifference=depthSign*samplePosition.z-sampleDepth;\nfloat rangeCheck=1.0-smoothstep(correctedRadius*0.5,correctedRadius,difference);\nocclusion+=(difference>=0.0 ? 1.0 : 0.0)*rangeCheck;\n}\nocclusion=occlusion*(1.0-smoothstep(maxZ*0.75,maxZ,depth));\nfloat ao=1.0-totalStrength*occlusion*samplesFactor;\nfloat result=clamp(ao+base,0.0,1.0);\ngl_FragColor=vec4(vec3(result),1.0);\n}\n#endif\n#ifdef BILATERAL_BLUR\nuniform sampler2D depthSampler;\nuniform float outSize;\nuniform float samplerOffsets[SAMPLES];\nvec4 blur9(sampler2D image,vec2 uv,float resolution,vec2 direction) {\nvec4 color=vec4(0.0);\nvec2 off1=vec2(1.3846153846)*direction;\nvec2 off2=vec2(3.2307692308)*direction;\ncolor+=texture2D(image,uv)*0.2270270270;\ncolor+=texture2D(image,uv+(off1/resolution))*0.3162162162;\ncolor+=texture2D(image,uv-(off1/resolution))*0.3162162162;\ncolor+=texture2D(image,uv+(off2/resolution))*0.0702702703;\ncolor+=texture2D(image,uv-(off2/resolution))*0.0702702703;\nreturn color;\n}\nvec4 blur13(sampler2D image,vec2 uv,float resolution,vec2 direction) {\nvec4 color=vec4(0.0);\nvec2 off1=vec2(1.411764705882353)*direction;\nvec2 off2=vec2(3.2941176470588234)*direction;\nvec2 off3=vec2(5.176470588235294)*direction;\ncolor+=texture2D(image,uv)*0.1964825501511404;\ncolor+=texture2D(image,uv+(off1/resolution))*0.2969069646728344;\ncolor+=texture2D(image,uv-(off1/resolution))*0.2969069646728344;\ncolor+=texture2D(image,uv+(off2/resolution))*0.09447039785044732;\ncolor+=texture2D(image,uv-(off2/resolution))*0.09447039785044732;\ncolor+=texture2D(image,uv+(off3/resolution))*0.010381362401148057;\ncolor+=texture2D(image,uv-(off3/resolution))*0.010381362401148057;\nreturn color;\n}\nvec4 blur13Bilateral(sampler2D image,vec2 uv,float resolution,vec2 direction) {\nvec4 color=vec4(0.0);\nvec2 off1=vec2(1.411764705882353)*direction;\nvec2 off2=vec2(3.2941176470588234)*direction;\nvec2 off3=vec2(5.176470588235294)*direction;\nfloat compareDepth=abs(texture2D(depthSampler,uv).r);\nfloat sampleDepth;\nfloat weight;\nfloat weightSum=30.0;\ncolor+=texture2D(image,uv)*30.0;\nsampleDepth=abs(texture2D(depthSampler,uv+(off1/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv+(off1/resolution))*weight;\nsampleDepth=abs(texture2D(depthSampler,uv-(off1/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv-(off1/resolution))*weight;\nsampleDepth=abs(texture2D(depthSampler,uv+(off2/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv+(off2/resolution))*weight;\nsampleDepth=abs(texture2D(depthSampler,uv-(off2/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv-(off2/resolution))*weight;\nsampleDepth=abs(texture2D(depthSampler,uv+(off3/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv+(off3/resolution))*weight;\nsampleDepth=abs(texture2D(depthSampler,uv-(off3/resolution)).r);\nweight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30.0);\nweightSum+=weight;\ncolor+=texture2D(image,uv-(off3/resolution))*weight;\nreturn color/weightSum;\n}\nvoid main()\n{\n#if EXPENSIVE\nfloat compareDepth=abs(texture2D(depthSampler,vUV).r);\nfloat texelsize=1.0/outSize;\nfloat result=0.0;\nfloat weightSum=0.0;\nfor (int i=0; i<SAMPLES; ++i)\n{\n#ifdef BILATERAL_BLUR_H\nvec2 direction=vec2(1.0,0.0);\nvec2 sampleOffset=vec2(texelsize*samplerOffsets[i],0.0);\n#else\nvec2 direction=vec2(0.0,1.0);\nvec2 sampleOffset=vec2(0.0,texelsize*samplerOffsets[i]);\n#endif\nvec2 samplePos=vUV+sampleOffset;\nfloat sampleDepth=abs(texture2D(depthSampler,samplePos).r);\nfloat weight=clamp(1.0/( 0.003+abs(compareDepth-sampleDepth)),0.0,30000.0);\nresult+=texture2D(textureSampler,samplePos).r*weight;\nweightSum+=weight;\n}\nresult/=weightSum;\ngl_FragColor.rgb=vec3(result);\ngl_FragColor.a=1.0;\n#else\nvec4 color;\n#ifdef BILATERAL_BLUR_H\nvec2 direction=vec2(1.0,0.0);\ncolor=blur13Bilateral(textureSampler,vUV,outSize,direction);\n#else\nvec2 direction=vec2(0.0,1.0);\ncolor=blur13Bilateral(textureSampler,vUV,outSize,direction);\n#endif\ngl_FragColor.rgb=vec3(color.r);\ngl_FragColor.a=1.0;\n#endif\n}\n#endif\n",jt.a.ShadersStore.ssaoCombinePixelShader="uniform sampler2D textureSampler;\nuniform sampler2D originalColor;\nuniform vec4 viewport;\nvarying vec2 vUV;\nvoid main(void) {\nvec4 ssaoColor=texture2D(textureSampler,viewport.xy+vUV*viewport.zw);\nvec4 sceneColor=texture2D(originalColor,vUV);\ngl_FragColor=sceneColor*ssaoColor;\n}\n";var As=function(e){function t(t,n,r,i){var o=e.call(this,n.getEngine(),t)||this;if(o.SSAOOriginalSceneColorEffect="SSAOOriginalSceneColorEffect",o.SSAORenderEffect="SSAORenderEffect",o.SSAOBlurHRenderEffect="SSAOBlurHRenderEffect",o.SSAOBlurVRenderEffect="SSAOBlurVRenderEffect",o.SSAOCombineRenderEffect="SSAOCombineRenderEffect",o.totalStrength=1,o.maxZ=100,o.minZAspect=.2,o._samples=8,o._textureSamples=1,o._expensiveBlur=!0,o.radius=2,o.base=0,o._firstUpdate=!0,o._bits=new Uint32Array(1),o._scene=n,o._ratio=r,!o.isSupported)return p.a.Error("SSAO 2 needs WebGL 2 support."),o;var a=o._ratio.ssaoRatio||r,s=o._ratio.blurRatio||r,u=n.enableGeometryBufferRenderer();return o._createRandomTexture(),o._depthTexture=u.getGBuffer().textures[0],o._normalTexture=u.getGBuffer().textures[1],o._originalColorPostProcess=new Yt("SSAOOriginalSceneColor",1,null,Ge.a.BILINEAR_SAMPLINGMODE,n.getEngine(),!1),o._originalColorPostProcess.samples=o.textureSamples,o._createSSAOPostProcess(1),o._createBlurPostProcess(a,s),o._createSSAOCombinePostProcess(s),o.addEffect(new Za(n.getEngine(),o.SSAOOriginalSceneColorEffect,function(){return o._originalColorPostProcess},!0)),o.addEffect(new Za(n.getEngine(),o.SSAORenderEffect,function(){return o._ssaoPostProcess},!0)),o.addEffect(new Za(n.getEngine(),o.SSAOBlurHRenderEffect,function(){return o._blurHPostProcess},!0)),o.addEffect(new Za(n.getEngine(),o.SSAOBlurVRenderEffect,function(){return o._blurVPostProcess},!0)),o.addEffect(new Za(n.getEngine(),o.SSAOCombineRenderEffect,function(){return o._ssaoCombinePostProcess},!0)),n.postProcessRenderPipelineManager.addPipeline(o),i&&n.postProcessRenderPipelineManager.attachCamerasToRenderPipeline(t,i),o}return l.d(t,e),Object.defineProperty(t.prototype,"samples",{get:function(){return this._samples},set:function(e){this._ssaoPostProcess.updateEffect("#define SAMPLES "+e+"\n#define SSAO"),this._samples=e,this._sampleSphere=this._generateHemisphere(),this._firstUpdate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textureSamples",{get:function(){return this._textureSamples},set:function(e){this._textureSamples=e,this._originalColorPostProcess.samples=e,this._blurHPostProcess.samples=e,this._blurVPostProcess.samples=e,this._ssaoPostProcess.samples=e,this._ssaoCombinePostProcess.samples=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expensiveBlur",{get:function(){return this._expensiveBlur},set:function(e){this._blurHPostProcess.updateEffect("#define BILATERAL_BLUR\n#define BILATERAL_BLUR_H\n#define SAMPLES 16\n#define EXPENSIVE "+(e?"1":"0")+"\n",null,["textureSampler","depthSampler"]),this._blurVPostProcess.updateEffect("#define BILATERAL_BLUR\n#define SAMPLES 16\n#define EXPENSIVE "+(e?"1":"0")+"\n",null,["textureSampler","depthSampler"]),this._expensiveBlur=e,this._firstUpdate=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsSupported",{get:function(){var e=S.a.LastCreatedEngine;return!!e&&e.getCaps().drawBuffersExtension},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"SSAO2RenderingPipeline"},t.prototype.dispose=function(t){void 0===t&&(t=!1);for(var n=0;n<this._scene.cameras.length;n++){var r=this._scene.cameras[n];this._originalColorPostProcess.dispose(r),this._ssaoPostProcess.dispose(r),this._blurHPostProcess.dispose(r),this._blurVPostProcess.dispose(r),this._ssaoCombinePostProcess.dispose(r)}this._randomTexture.dispose(),t&&this._scene.disableGeometryBufferRenderer(),this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._scene.cameras),e.prototype.dispose.call(this)},t.prototype._createBlurPostProcess=function(e,t){var n=this;this._samplerOffsets=[];for(var r=this.expensiveBlur,i=-8;i<8;i++)this._samplerOffsets.push(2*i+.5);this._blurHPostProcess=new zt("BlurH","ssao2",["outSize","samplerOffsets","near","far","radius"],["depthSampler"],e,null,Ge.a.TRILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,"#define BILATERAL_BLUR\n#define BILATERAL_BLUR_H\n#define SAMPLES 16\n#define EXPENSIVE "+(r?"1":"0")+"\n"),this._blurHPostProcess.onApply=function(e){n._scene.activeCamera&&(e.setFloat("outSize",n._ssaoCombinePostProcess.width>0?n._ssaoCombinePostProcess.width:n._originalColorPostProcess.width),e.setFloat("near",n._scene.activeCamera.minZ),e.setFloat("far",n._scene.activeCamera.maxZ),e.setFloat("radius",n.radius),e.setTexture("depthSampler",n._depthTexture),n._firstUpdate&&e.setArray("samplerOffsets",n._samplerOffsets))},this._blurVPostProcess=new zt("BlurV","ssao2",["outSize","samplerOffsets","near","far","radius"],["depthSampler"],t,null,Ge.a.TRILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,"#define BILATERAL_BLUR\n#define BILATERAL_BLUR_V\n#define SAMPLES 16\n#define EXPENSIVE "+(r?"1":"0")+"\n"),this._blurVPostProcess.onApply=function(e){n._scene.activeCamera&&(e.setFloat("outSize",n._ssaoCombinePostProcess.height>0?n._ssaoCombinePostProcess.height:n._originalColorPostProcess.height),e.setFloat("near",n._scene.activeCamera.minZ),e.setFloat("far",n._scene.activeCamera.maxZ),e.setFloat("radius",n.radius),e.setTexture("depthSampler",n._depthTexture),n._firstUpdate&&(e.setArray("samplerOffsets",n._samplerOffsets),n._firstUpdate=!1))},this._blurHPostProcess.samples=this.textureSamples,this._blurVPostProcess.samples=this.textureSamples},t.prototype._rebuild=function(){this._firstUpdate=!0,e.prototype._rebuild.call(this)},t.prototype._radicalInverse_VdC=function(e){return this._bits[0]=e,this._bits[0]=(this._bits[0]<<16|this._bits[0]>>16)>>>0,this._bits[0]=(1431655765&this._bits[0])<<1|(2863311530&this._bits[0])>>>1>>>0,this._bits[0]=(858993459&this._bits[0])<<2|(3435973836&this._bits[0])>>>2>>>0,this._bits[0]=(252645135&this._bits[0])<<4|(4042322160&this._bits[0])>>>4>>>0,this._bits[0]=(16711935&this._bits[0])<<8|(4278255360&this._bits[0])>>>8>>>0,2.3283064365386963e-10*this._bits[0]},t.prototype._hammersley=function(e,t){return[e/t,this._radicalInverse_VdC(e)]},t.prototype._hemisphereSample_uniform=function(e,t){var n=2*t*Math.PI,r=1-(.85*e+.15),i=Math.sqrt(1-r*r);return new o.x(Math.cos(n)*i,Math.sin(n)*i,r)},t.prototype._generateHemisphere=function(){for(var e,t=this.samples,n=[],r=0;r<t;){if(t<16)e=this._hemisphereSample_uniform(Math.random(),Math.random());else{var i=this._hammersley(r,t);e=this._hemisphereSample_uniform(i[0],i[1])}n.push(e.x,e.y,e.z),r++}return n},t.prototype._createSSAOPostProcess=function(e){var t=this,n=this.samples;this._sampleSphere=this._generateHemisphere(),this._ssaoPostProcess=new zt("ssao2","ssao2",["sampleSphere","samplesFactor","randTextureTiles","totalStrength","radius","base","range","projection","near","far","texelSize","xViewport","yViewport","maxZ","minZAspect"],["randomSampler","normalSampler"],e,null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,"#define SAMPLES "+n+"\n#define SSAO"),this._ssaoPostProcess.onApply=function(e){t._firstUpdate&&(e.setArray3("sampleSphere",t._sampleSphere),e.setFloat("randTextureTiles",32)),t._scene.activeCamera&&(e.setFloat("samplesFactor",1/t.samples),e.setFloat("totalStrength",t.totalStrength),e.setFloat2("texelSize",1/t._ssaoPostProcess.width,1/t._ssaoPostProcess.height),e.setFloat("radius",t.radius),e.setFloat("maxZ",t.maxZ),e.setFloat("minZAspect",t.minZAspect),e.setFloat("base",t.base),e.setFloat("near",t._scene.activeCamera.minZ),e.setFloat("far",t._scene.activeCamera.maxZ),e.setFloat("xViewport",Math.tan(t._scene.activeCamera.fov/2)*t._scene.getEngine().getAspectRatio(t._scene.activeCamera,!0)),e.setFloat("yViewport",Math.tan(t._scene.activeCamera.fov/2)),e.setMatrix("projection",t._scene.getProjectionMatrix()),e.setTexture("textureSampler",t._depthTexture),e.setTexture("normalSampler",t._normalTexture),e.setTexture("randomSampler",t._randomTexture))},this._ssaoPostProcess.samples=this.textureSamples},t.prototype._createSSAOCombinePostProcess=function(e){var t=this;this._ssaoCombinePostProcess=new zt("ssaoCombine","ssaoCombine",[],["originalColor","viewport"],e,null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1),this._ssaoCombinePostProcess.onApply=function(e){var n=t._scene.activeCamera.viewport;e.setVector4("viewport",o.t.Vector4[0].copyFromFloats(n.x,n.y,n.width,n.height)),e.setTextureFromPostProcess("originalColor",t._originalColorPostProcess)},this._ssaoCombinePostProcess.samples=this.textureSamples},t.prototype._createRandomTexture=function(){this._randomTexture=new bn("SSAORandomTexture",128,this._scene,!1,Ge.a.TRILINEAR_SAMPLINGMODE),this._randomTexture.wrapU=Ge.a.WRAP_ADDRESSMODE,this._randomTexture.wrapV=Ge.a.WRAP_ADDRESSMODE;for(var e=this._randomTexture.getContext(),t=function(e,t){return Math.random()*(t-e)+e},n=o.x.Zero(),r=0;r<128;r++)for(var i=0;i<128;i++)n.x=t(0,1),n.y=t(0,1),n.z=0,n.normalize(),n.scaleInPlace(255),n.x=Math.floor(n.x),n.y=Math.floor(n.y),e.fillStyle="rgb("+n.x+", "+n.y+", "+n.z+")",e.fillRect(r,i,1,1);this._randomTexture.update(!1)},t.prototype.serialize=function(){var e=L.a.Serialize(this);return e.customType="SSAO2RenderingPipeline",e},t.Parse=function(e,n,r){return L.a.Parse(function(){return new t(e._name,n,e._ratio)},e,n,r)},l.c([Object(L.c)()],t.prototype,"totalStrength",void 0),l.c([Object(L.c)()],t.prototype,"maxZ",void 0),l.c([Object(L.c)()],t.prototype,"minZAspect",void 0),l.c([Object(L.c)("samples")],t.prototype,"_samples",void 0),l.c([Object(L.c)("textureSamples")],t.prototype,"_textureSamples",void 0),l.c([Object(L.c)()],t.prototype,"_ratio",void 0),l.c([Object(L.c)("expensiveBlur")],t.prototype,"_expensiveBlur",void 0),l.c([Object(L.c)()],t.prototype,"radius",void 0),l.c([Object(L.c)()],t.prototype,"base",void 0),t}(bs);a.a.RegisteredTypes["BABYLON.SSAO2RenderingPipeline"]=As,jt.a.ShadersStore.ssaoPixelShader="\nuniform sampler2D textureSampler;\nvarying vec2 vUV;\n#ifdef SSAO\nuniform sampler2D randomSampler;\nuniform float randTextureTiles;\nuniform float samplesFactor;\nuniform vec3 sampleSphere[SAMPLES];\nuniform float totalStrength;\nuniform float radius;\nuniform float area;\nuniform float fallOff;\nuniform float base;\nvec3 normalFromDepth(float depth,vec2 coords)\n{\nvec2 offset1=vec2(0.0,radius);\nvec2 offset2=vec2(radius,0.0);\nfloat depth1=texture2D(textureSampler,coords+offset1).r;\nfloat depth2=texture2D(textureSampler,coords+offset2).r;\nvec3 p1=vec3(offset1,depth1-depth);\nvec3 p2=vec3(offset2,depth2-depth);\nvec3 normal=cross(p1,p2);\nnormal.z=-normal.z;\nreturn normalize(normal);\n}\nvoid main()\n{\nvec3 random=normalize(texture2D(randomSampler,vUV*randTextureTiles).rgb);\nfloat depth=texture2D(textureSampler,vUV).r;\nvec3 position=vec3(vUV,depth);\nvec3 normal=normalFromDepth(depth,vUV);\nfloat radiusDepth=radius/depth;\nfloat occlusion=0.0;\nvec3 ray;\nvec3 hemiRay;\nfloat occlusionDepth;\nfloat difference;\nfor (int i=0; i<SAMPLES; i++)\n{\nray=radiusDepth*reflect(sampleSphere[i],random);\nhemiRay=position+sign(dot(ray,normal))*ray;\nocclusionDepth=texture2D(textureSampler,clamp(hemiRay.xy,vec2(0.001,0.001),vec2(0.999,0.999))).r;\ndifference=depth-occlusionDepth;\nocclusion+=step(fallOff,difference)*(1.0-smoothstep(fallOff,area,difference));\n}\nfloat ao=1.0-totalStrength*occlusion*samplesFactor;\nfloat result=clamp(ao+base,0.0,1.0);\ngl_FragColor.r=result;\ngl_FragColor.g=result;\ngl_FragColor.b=result;\ngl_FragColor.a=1.0;\n}\n#endif\n";var Ss=function(e){function t(t,n,r,i){var o=e.call(this,n.getEngine(),t)||this;o.SSAOOriginalSceneColorEffect="SSAOOriginalSceneColorEffect",o.SSAORenderEffect="SSAORenderEffect",o.SSAOBlurHRenderEffect="SSAOBlurHRenderEffect",o.SSAOBlurVRenderEffect="SSAOBlurVRenderEffect",o.SSAOCombineRenderEffect="SSAOCombineRenderEffect",o.totalStrength=1,o.radius=1e-4,o.area=.0075,o.fallOff=1e-6,o.base=.5,o._firstUpdate=!0,o._scene=n,o._createRandomTexture(),o._depthTexture=n.enableDepthRenderer().getDepthMap();var a=r.ssaoRatio||r,s=r.combineRatio||r;return o._originalColorPostProcess=new Yt("SSAOOriginalSceneColor",s,null,Ge.a.BILINEAR_SAMPLINGMODE,n.getEngine(),!1),o._createSSAOPostProcess(a),o._createBlurPostProcess(a),o._createSSAOCombinePostProcess(s),o.addEffect(new Za(n.getEngine(),o.SSAOOriginalSceneColorEffect,function(){return o._originalColorPostProcess},!0)),o.addEffect(new Za(n.getEngine(),o.SSAORenderEffect,function(){return o._ssaoPostProcess},!0)),o.addEffect(new Za(n.getEngine(),o.SSAOBlurHRenderEffect,function(){return o._blurHPostProcess},!0)),o.addEffect(new Za(n.getEngine(),o.SSAOBlurVRenderEffect,function(){return o._blurVPostProcess},!0)),o.addEffect(new Za(n.getEngine(),o.SSAOCombineRenderEffect,function(){return o._ssaoCombinePostProcess},!0)),n.postProcessRenderPipelineManager.addPipeline(o),i&&n.postProcessRenderPipelineManager.attachCamerasToRenderPipeline(t,i),o}return l.d(t,e),Object.defineProperty(t.prototype,"scene",{get:function(){return this._scene},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"SSAORenderingPipeline"},t.prototype.dispose=function(t){void 0===t&&(t=!1);for(var n=0;n<this._scene.cameras.length;n++){var r=this._scene.cameras[n];this._originalColorPostProcess.dispose(r),this._ssaoPostProcess.dispose(r),this._blurHPostProcess.dispose(r),this._blurVPostProcess.dispose(r),this._ssaoCombinePostProcess.dispose(r)}this._randomTexture.dispose(),t&&this._scene.disableDepthRenderer(),this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._scene.cameras),e.prototype.dispose.call(this)},t.prototype._createBlurPostProcess=function(e){var t=this;this._blurHPostProcess=new jr("BlurH",new o.w(1,0),16,e,null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,_.a.TEXTURETYPE_UNSIGNED_INT),this._blurVPostProcess=new jr("BlurV",new o.w(0,1),16,e,null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,_.a.TEXTURETYPE_UNSIGNED_INT),this._blurHPostProcess.onActivateObservable.add(function(){var e=t._blurHPostProcess.width/t._scene.getEngine().getRenderWidth();t._blurHPostProcess.kernel=16*e}),this._blurVPostProcess.onActivateObservable.add(function(){var e=t._blurVPostProcess.height/t._scene.getEngine().getRenderHeight();t._blurVPostProcess.kernel=16*e})},t.prototype._rebuild=function(){this._firstUpdate=!0,e.prototype._rebuild.call(this)},t.prototype._createSSAOPostProcess=function(e){var t=this,n=[.5381,.1856,-.4319,.1379,.2486,.443,.3371,.5679,-.0057,-.6999,-.0451,-.0019,.0689,-.1598,-.8547,.056,.0069,-.1843,-.0146,.1402,.0762,.01,-.1924,-.0344,-.3577,-.5301,-.4358,-.3169,.1063,.0158,.0103,-.5869,.0046,-.0897,-.494,.3287,.7119,-.0154,-.0918,-.0533,.0596,-.5411,.0352,-.0631,.546,-.4776,.2847,-.0271];this._ssaoPostProcess=new zt("ssao","ssao",["sampleSphere","samplesFactor","randTextureTiles","totalStrength","radius","area","fallOff","base","range","viewport"],["randomSampler"],e,null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1,"#define SAMPLES 16\n#define SSAO"),this._ssaoPostProcess.onApply=function(e){t._firstUpdate&&(e.setArray3("sampleSphere",n),e.setFloat("samplesFactor",1/16),e.setFloat("randTextureTiles",4)),e.setFloat("totalStrength",t.totalStrength),e.setFloat("radius",t.radius),e.setFloat("area",t.area),e.setFloat("fallOff",t.fallOff),e.setFloat("base",t.base),e.setTexture("textureSampler",t._depthTexture),e.setTexture("randomSampler",t._randomTexture)}},t.prototype._createSSAOCombinePostProcess=function(e){var t=this;this._ssaoCombinePostProcess=new zt("ssaoCombine","ssaoCombine",[],["originalColor","viewport"],e,null,Ge.a.BILINEAR_SAMPLINGMODE,this._scene.getEngine(),!1),this._ssaoCombinePostProcess.onApply=function(e){e.setVector4("viewport",o.t.Vector4[0].copyFromFloats(0,0,1,1)),e.setTextureFromPostProcess("originalColor",t._originalColorPostProcess)}},t.prototype._createRandomTexture=function(){this._randomTexture=new bn("SSAORandomTexture",512,this._scene,!1,Ge.a.TRILINEAR_SAMPLINGMODE),this._randomTexture.wrapU=Ge.a.WRAP_ADDRESSMODE,this._randomTexture.wrapV=Ge.a.WRAP_ADDRESSMODE;for(var e=this._randomTexture.getContext(),t=function(e,t){return Math.random()*(t-e)+e},n=o.x.Zero(),r=0;r<512;r++)for(var i=0;i<512;i++)n.x=Math.floor(255*t(-1,1)),n.y=Math.floor(255*t(-1,1)),n.z=Math.floor(255*t(-1,1)),e.fillStyle="rgb("+n.x+", "+n.y+", "+n.z+")",e.fillRect(r,i,1,1);this._randomTexture.update(!1)},l.c([Object(L.c)()],t.prototype,"totalStrength",void 0),l.c([Object(L.c)()],t.prototype,"radius",void 0),l.c([Object(L.c)()],t.prototype,"area",void 0),l.c([Object(L.c)()],t.prototype,"fallOff",void 0),l.c([Object(L.c)()],t.prototype,"base",void 0),t}(bs);jt.a.ShadersStore.standardPixelShader="uniform sampler2D textureSampler;\nvarying vec2 vUV;\n#if defined(PASS_POST_PROCESS)\nvoid main(void)\n{\nvec4 color=texture2D(textureSampler,vUV);\ngl_FragColor=color;\n}\n#endif\n#if defined(DOWN_SAMPLE_X4)\nuniform vec2 dsOffsets[16];\nvoid main(void)\n{\nvec4 average=vec4(0.0,0.0,0.0,0.0);\naverage=texture2D(textureSampler,vUV+dsOffsets[0]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[1]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[2]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[3]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[4]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[5]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[6]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[7]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[8]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[9]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[10]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[11]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[12]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[13]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[14]);\naverage+=texture2D(textureSampler,vUV+dsOffsets[15]);\naverage/=16.0;\ngl_FragColor=average;\n}\n#endif\n#if defined(BRIGHT_PASS)\nuniform vec2 dsOffsets[4];\nuniform float brightThreshold;\nvoid main(void)\n{\nvec4 average=vec4(0.0,0.0,0.0,0.0);\naverage=texture2D(textureSampler,vUV+vec2(dsOffsets[0].x,dsOffsets[0].y));\naverage+=texture2D(textureSampler,vUV+vec2(dsOffsets[1].x,dsOffsets[1].y));\naverage+=texture2D(textureSampler,vUV+vec2(dsOffsets[2].x,dsOffsets[2].y));\naverage+=texture2D(textureSampler,vUV+vec2(dsOffsets[3].x,dsOffsets[3].y));\naverage*=0.25;\nfloat luminance=length(average.rgb);\nif (luminance<brightThreshold) {\naverage=vec4(0.0,0.0,0.0,1.0);\n}\ngl_FragColor=average;\n}\n#endif\n#if defined(TEXTURE_ADDER)\nuniform sampler2D otherSampler;\nuniform sampler2D lensSampler;\nuniform float exposure;\nvoid main(void)\n{\nvec3 colour=texture2D(textureSampler,vUV).rgb;\ncolour*=exposure;\nvec3 X=max(vec3(0.0,0.0,0.0),colour-0.004);\nvec3 retColor=(X*(6.2*X+0.5))/(X*(6.2*X+1.7)+0.06);\ncolour=retColor*retColor;\ncolour+=colour*texture2D(lensSampler,vUV).rgb;\nvec4 finalColor=vec4(colour.rgb,1.0)+texture2D(otherSampler,vUV);\ngl_FragColor=finalColor;\n}\n#endif\n#if defined(VLS)\n#define PI 3.1415926535897932384626433832795\nuniform mat4 shadowViewProjection;\nuniform mat4 lightWorld;\nuniform vec3 cameraPosition;\nuniform vec3 sunDirection;\nuniform vec3 sunColor;\nuniform vec2 depthValues;\nuniform float scatteringCoefficient;\nuniform float scatteringPower;\nuniform sampler2D shadowMapSampler;\nuniform sampler2D positionSampler;\nfloat computeScattering(float lightDotView)\n{\nfloat result=1.0-scatteringCoefficient*scatteringCoefficient;\nresult/=(4.0*PI*pow(1.0+scatteringCoefficient*scatteringCoefficient-(2.0*scatteringCoefficient)*lightDotView,1.5));\nreturn result;\n}\nvoid main(void)\n{\n\nvec3 worldPos=texture2D(positionSampler,vUV).rgb;\nvec3 startPosition=cameraPosition;\nvec3 rayVector=worldPos-startPosition;\nfloat rayLength=length(rayVector);\nvec3 rayDirection=rayVector/rayLength;\nfloat stepLength=rayLength/NB_STEPS;\nvec3 stepL=rayDirection*stepLength;\nvec3 currentPosition=startPosition;\nvec3 accumFog=vec3(0.0);\nfor (int i=0; i<int(NB_STEPS); i++)\n{\nvec4 worldInShadowCameraSpace=shadowViewProjection*vec4(currentPosition,1.0);\nfloat depthMetric=(worldInShadowCameraSpace.z+depthValues.x)/(depthValues.y);\nfloat shadowPixelDepth=clamp(depthMetric,0.0,1.0);\nworldInShadowCameraSpace.xyz/=worldInShadowCameraSpace.w;\nworldInShadowCameraSpace.xyz=0.5*worldInShadowCameraSpace.xyz+vec3(0.5);\nfloat shadowMapValue=texture2D(shadowMapSampler,worldInShadowCameraSpace.xy).r;\nif (shadowMapValue>shadowPixelDepth)\naccumFog+=sunColor*computeScattering(dot(rayDirection,sunDirection));\ncurrentPosition+=stepL;\n}\naccumFog/=NB_STEPS;\nvec3 color=accumFog*scatteringPower;\ngl_FragColor=vec4(color*exp(color) ,1.0);\n}\n#endif\n#if defined(VLSMERGE)\nuniform sampler2D originalSampler;\nvoid main(void)\n{\ngl_FragColor=texture2D(originalSampler,vUV)+texture2D(textureSampler,vUV);\n}\n#endif\n#if defined(LUMINANCE)\nuniform vec2 lumOffsets[4];\nvoid main()\n{\nfloat average=0.0;\nvec4 color=vec4(0.0);\nfloat maximum=-1e20;\nvec3 weight=vec3(0.299,0.587,0.114);\nfor (int i=0; i<4; i++)\n{\ncolor=texture2D(textureSampler,vUV+ lumOffsets[i]);\n\nfloat GreyValue=dot(color.rgb,vec3(0.33,0.33,0.33));\n\n#ifdef WEIGHTED_AVERAGE\nfloat GreyValue=dot(color.rgb,weight);\n#endif\n#ifdef BRIGHTNESS\nfloat GreyValue=max(color.r,max(color.g,color.b));\n#endif\n#ifdef HSL_COMPONENT\nfloat GreyValue=0.5*(max(color.r,max(color.g,color.b))+min(color.r,min(color.g,color.b)));\n#endif\n#ifdef MAGNITUDE\nfloat GreyValue=length(color.rgb);\n#endif\nmaximum=max(maximum,GreyValue);\naverage+=(0.25*log(1e-5+GreyValue));\n}\naverage=exp(average);\ngl_FragColor=vec4(average,maximum,0.0,1.0);\n}\n#endif\n#if defined(LUMINANCE_DOWN_SAMPLE)\nuniform vec2 dsOffsets[9];\nuniform float halfDestPixelSize;\n#ifdef FINAL_DOWN_SAMPLER\nvec4 pack(float value) {\nconst vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);\nconst vec4 bit_mask=vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);\nvec4 res=fract(value*bit_shift);\nres-=res.xxyz*bit_mask;\nreturn res;\n}\n#endif\nvoid main()\n{\nvec4 color=vec4(0.0);\nfloat average=0.0;\nfor (int i=0; i<9; i++)\n{\ncolor=texture2D(textureSampler,vUV+vec2(halfDestPixelSize,halfDestPixelSize)+dsOffsets[i]);\naverage+=color.r;\n}\naverage/=9.0;\n#ifdef FINAL_DOWN_SAMPLER\ngl_FragColor=pack(average);\n#else\ngl_FragColor=vec4(average,average,0.0,1.0);\n#endif\n}\n#endif\n#if defined(HDR)\nuniform sampler2D textureAdderSampler;\nuniform float averageLuminance;\nvoid main()\n{\nvec4 color=texture2D(textureAdderSampler,vUV);\n#ifndef AUTO_EXPOSURE\nvec4 adjustedColor=color/averageLuminance;\ncolor=adjustedColor;\ncolor.a=1.0;\n#endif\ngl_FragColor=color;\n}\n#endif\n#if defined(LENS_FLARE)\n#define GHOSTS 3\nuniform sampler2D lensColorSampler;\nuniform float strength;\nuniform float ghostDispersal;\nuniform float haloWidth;\nuniform vec2 resolution;\nuniform float distortionStrength;\nfloat hash(vec2 p)\n{\nfloat h=dot(p,vec2(127.1,311.7));\nreturn -1.0+2.0*fract(sin(h)*43758.5453123);\n}\nfloat noise(in vec2 p)\n{\nvec2 i=floor(p);\nvec2 f=fract(p);\nvec2 u=f*f*(3.0-2.0*f);\nreturn mix(mix(hash(i+vec2(0.0,0.0)),\nhash(i+vec2(1.0,0.0)),u.x),\nmix(hash(i+vec2(0.0,1.0)),\nhash(i+vec2(1.0,1.0)),u.x),u.y);\n}\nfloat fbm(vec2 p)\n{\nfloat f=0.0;\nf+=0.5000*noise(p); p*=2.02;\nf+=0.2500*noise(p); p*=2.03;\nf+=0.1250*noise(p); p*=2.01;\nf+=0.0625*noise(p); p*=2.04;\nf/=0.9375;\nreturn f;\n}\nvec3 pattern(vec2 uv)\n{\nvec2 p=-1.0+2.0*uv;\nfloat p2=dot(p,p);\nfloat f=fbm(vec2(15.0*p2))/2.0;\nfloat r=0.2+0.6*sin(12.5*length(uv-vec2(0.5)));\nfloat g=0.2+0.6*sin(20.5*length(uv-vec2(0.5)));\nfloat b=0.2+0.6*sin(17.2*length(uv-vec2(0.5)));\nreturn (1.0-f)*vec3(r,g,b);\n}\nfloat luminance(vec3 color)\n{\nreturn dot(color.rgb,vec3(0.2126,0.7152,0.0722));\n}\nvec4 textureDistorted(sampler2D tex,vec2 texcoord,vec2 direction,vec3 distortion)\n{\nreturn vec4(\ntexture2D(tex,texcoord+direction*distortion.r).r,\ntexture2D(tex,texcoord+direction*distortion.g).g,\ntexture2D(tex,texcoord+direction*distortion.b).b,\n1.0\n);\n}\nvoid main(void)\n{\nvec2 uv=-vUV+vec2(1.0);\nvec2 ghostDir=(vec2(0.5)-uv)*ghostDispersal;\nvec2 texelSize=1.0/resolution;\nvec3 distortion=vec3(-texelSize.x*distortionStrength,0.0,texelSize.x*distortionStrength);\nvec4 result=vec4(0.0);\nfloat ghostIndice=1.0;\nfor (int i=0; i<GHOSTS; ++i)\n{\nvec2 offset=fract(uv+ghostDir*ghostIndice);\nfloat weight=length(vec2(0.5)-offset)/length(vec2(0.5));\nweight=pow(1.0-weight,10.0);\nresult+=textureDistorted(textureSampler,offset,normalize(ghostDir),distortion)*weight*strength;\nghostIndice+=1.0;\n}\nvec2 haloVec=normalize(ghostDir)*haloWidth;\nfloat weight=length(vec2(0.5)-fract(uv+haloVec))/length(vec2(0.5));\nweight=pow(1.0-weight,10.0);\nresult+=textureDistorted(textureSampler,fract(uv+haloVec),normalize(ghostDir),distortion)*weight*strength;\nresult*=texture2D(lensColorSampler,vec2(length(vec2(0.5)-uv)/length(vec2(0.5))));\ngl_FragColor=result;\n}\n#endif\n#if defined(LENS_FLARE_COMPOSE)\nuniform sampler2D otherSampler;\nuniform sampler2D lensDirtSampler;\nuniform sampler2D lensStarSampler;\nuniform mat4 lensStarMatrix;\nvoid main(void)\n{\nvec2 lensFlareCoords=(lensStarMatrix*vec4(vUV,1.0,1.0)).xy;\nvec4 lensMod=texture2D(lensDirtSampler,vUV);\nlensMod+=texture2D(lensStarSampler,vUV);\nvec4 result=texture2D(textureSampler,vUV)*lensMod;\ngl_FragColor=texture2D(otherSampler,vUV)+result;\n}\n#endif\n#if defined(DEPTH_OF_FIELD)\nuniform sampler2D otherSampler;\nuniform sampler2D depthSampler;\nuniform float distance;\nvoid main(void)\n{\nvec4 sharp=texture2D(otherSampler,vUV);\nvec4 blur=texture2D(textureSampler,vUV);\nfloat dist=clamp(texture2D(depthSampler,vUV).r*distance,0.0,1.0);\nfloat factor=0.0;\nif (dist<0.05)\nfactor=1.0;\nelse if (dist<0.1)\nfactor=20.0*(0.1-dist);\nelse if (dist<0.5)\nfactor=0.0;\nelse\nfactor=2.0*(dist-0.5);\nfactor=clamp(factor,0.0,0.90);\ngl_FragColor=mix(sharp,blur,factor);\n}\n#endif\n#if defined(MOTION_BLUR)\nuniform mat4 inverseViewProjection;\nuniform mat4 prevViewProjection;\nuniform vec2 screenSize;\nuniform float motionScale;\nuniform float motionStrength;\nuniform sampler2D depthSampler;\nvoid main(void)\n{\nvec2 texelSize=1.0/screenSize;\nfloat depth=texture2D(depthSampler,vUV).r;\nvec4 cpos=vec4(vUV*2.0-1.0,depth,1.0);\ncpos=cpos*inverseViewProjection;\nvec4 ppos=cpos*prevViewProjection;\nppos.xyz/=ppos.w;\nppos.xy=ppos.xy*0.5+0.5;\nvec2 velocity=(ppos.xy-vUV)*motionScale*motionStrength;\nfloat speed=length(velocity/texelSize);\nint nSamples=int(clamp(speed,1.0,MAX_MOTION_SAMPLES));\nvec4 result=texture2D(textureSampler,vUV);\nfor (int i=1; i<int(MAX_MOTION_SAMPLES); ++i) {\nif (i>=nSamples)\nbreak;\nvec2 offset1=vUV+velocity*(float(i)/float(nSamples-1)-0.5);\nresult+=texture2D(textureSampler,offset1);\n}\ngl_FragColor=result/float(nSamples);\n}\n#endif\n";var Cs,Ps=function(e){function t(t,n,r,i,o){void 0===i&&(i=null);var a=e.call(this,n.getEngine(),t)||this;return a.downSampleX4PostProcess=null,a.brightPassPostProcess=null,a.blurHPostProcesses=[],a.blurVPostProcesses=[],a.textureAdderPostProcess=null,a.volumetricLightPostProcess=null,a.volumetricLightSmoothXPostProcess=null,a.volumetricLightSmoothYPostProcess=null,a.volumetricLightMergePostProces=null,a.volumetricLightFinalPostProcess=null,a.luminancePostProcess=null,a.luminanceDownSamplePostProcesses=[],a.hdrPostProcess=null,a.textureAdderFinalPostProcess=null,a.lensFlareFinalPostProcess=null,a.hdrFinalPostProcess=null,a.lensFlarePostProcess=null,a.lensFlareComposePostProcess=null,a.motionBlurPostProcess=null,a.depthOfFieldPostProcess=null,a.fxaaPostProcess=null,a.brightThreshold=1,a.blurWidth=512,a.horizontalBlur=!1,a.lensTexture=null,a.volumetricLightCoefficient=.2,a.volumetricLightPower=4,a.volumetricLightBlurScale=64,a.sourceLight=null,a.hdrMinimumLuminance=1,a.hdrDecreaseRate=.5,a.hdrIncreaseRate=.5,a.lensColorTexture=null,a.lensFlareStrength=20,a.lensFlareGhostDispersal=1.4,a.lensFlareHaloWidth=.7,a.lensFlareDistortionStrength=16,a.lensStarTexture=null,a.lensFlareDirtTexture=null,a.depthOfFieldDistance=10,a.depthOfFieldBlurWidth=64,a.motionStrength=1,a.animations=[],a._currentDepthOfFieldSource=null,a._fixedExposure=1,a._currentExposure=1,a._hdrAutoExposure=!1,a._hdrCurrentLuminance=1,a._bloomEnabled=!1,a._depthOfFieldEnabled=!1,a._vlsEnabled=!1,a._lensFlareEnabled=!1,a._hdrEnabled=!1,a._motionBlurEnabled=!1,a._fxaaEnabled=!1,a._motionBlurSamples=64,a._volumetricLightStepsCount=50,a._samples=1,a._cameras=o||[],a._scene=n,a._basePostProcess=i,a._ratio=r,a._floatTextureType=n.getEngine().getCaps().textureFloatRender?_.a.TEXTURETYPE_FLOAT:_.a.TEXTURETYPE_HALF_FLOAT,n.postProcessRenderPipelineManager.addPipeline(a),a._buildPipeline(),a}return l.d(t,e),Object.defineProperty(t.prototype,"exposure",{get:function(){return this._fixedExposure},set:function(e){this._fixedExposure=e,this._currentExposure=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hdrAutoExposure",{get:function(){return this._hdrAutoExposure},set:function(e){if(this._hdrAutoExposure=e,this.hdrPostProcess){var t=["#define HDR"];e&&t.push("#define AUTO_EXPOSURE"),this.hdrPostProcess.updateEffect(t.join("\n"))}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"BloomEnabled",{get:function(){return this._bloomEnabled},set:function(e){this._bloomEnabled!==e&&(this._bloomEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DepthOfFieldEnabled",{get:function(){return this._depthOfFieldEnabled},set:function(e){this._depthOfFieldEnabled!==e&&(this._depthOfFieldEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"LensFlareEnabled",{get:function(){return this._lensFlareEnabled},set:function(e){this._lensFlareEnabled!==e&&(this._lensFlareEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"HDREnabled",{get:function(){return this._hdrEnabled},set:function(e){this._hdrEnabled!==e&&(this._hdrEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"VLSEnabled",{get:function(){return this._vlsEnabled},set:function(e){if(this._vlsEnabled!==e){if(e&&!this._scene.enableGeometryBufferRenderer())return void p.a.Warn("Geometry renderer is not supported, cannot create volumetric lights in Standard Rendering Pipeline");this._vlsEnabled=e,this._buildPipeline()}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"MotionBlurEnabled",{get:function(){return this._motionBlurEnabled},set:function(e){this._motionBlurEnabled!==e&&(this._motionBlurEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fxaaEnabled",{get:function(){return this._fxaaEnabled},set:function(e){this._fxaaEnabled!==e&&(this._fxaaEnabled=e,this._buildPipeline())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"volumetricLightStepsCount",{get:function(){return this._volumetricLightStepsCount},set:function(e){this.volumetricLightPostProcess&&this.volumetricLightPostProcess.updateEffect("#define VLS\n#define NB_STEPS "+e.toFixed(1)),this._volumetricLightStepsCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"motionBlurSamples",{get:function(){return this._motionBlurSamples},set:function(e){this.motionBlurPostProcess&&this.motionBlurPostProcess.updateEffect("#define MOTION_BLUR\n#define MAX_MOTION_SAMPLES "+e.toFixed(1)),this._motionBlurSamples=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"samples",{get:function(){return this._samples},set:function(e){this._samples!==e&&(this._samples=e,this._buildPipeline())},enumerable:!0,configurable:!0}),t.prototype._buildPipeline=function(){var e=this,t=this._ratio,n=this._scene;this._disposePostProcesses(),this._reset(),this._basePostProcess?this.originalPostProcess=this._basePostProcess:(this.originalPostProcess=new zt("HDRPass","standard",[],[],t,null,_.a.TEXTURE_BILINEAR_SAMPLINGMODE,n.getEngine(),!1,"#define PASS_POST_PROCESS",this._floatTextureType),this.originalPostProcess.onApply=function(){e._currentDepthOfFieldSource=e.originalPostProcess}),(this._bloomEnabled||this._vlsEnabled||this._lensFlareEnabled||this._depthOfFieldEnabled||this._motionBlurEnabled)&&this.addEffect(new Za(n.getEngine(),"HDRPassPostProcess",function(){return e.originalPostProcess},!0)),this._currentDepthOfFieldSource=this.originalPostProcess,this._bloomEnabled&&(this._createDownSampleX4PostProcess(n,t/2),this._createBrightPassPostProcess(n,t/2),this._createBlurPostProcesses(n,t/4,1),this._createTextureAdderPostProcess(n,t),this.textureAdderFinalPostProcess=new zt("HDRDepthOfFieldSource","standard",[],[],t,null,Ge.a.BILINEAR_SAMPLINGMODE,n.getEngine(),!1,"#define PASS_POST_PROCESS",_.a.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new Za(n.getEngine(),"HDRBaseDepthOfFieldSource",function(){return e.textureAdderFinalPostProcess},!0))),this._vlsEnabled&&(this._createVolumetricLightPostProcess(n,t),this.volumetricLightFinalPostProcess=new zt("HDRVLSFinal","standard",[],[],t,null,Ge.a.BILINEAR_SAMPLINGMODE,n.getEngine(),!1,"#define PASS_POST_PROCESS",_.a.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new Za(n.getEngine(),"HDRVLSFinal",function(){return e.volumetricLightFinalPostProcess},!0))),this._lensFlareEnabled&&(this._createLensFlarePostProcess(n,t),this.lensFlareFinalPostProcess=new zt("HDRPostLensFlareDepthOfFieldSource","standard",[],[],t,null,Ge.a.BILINEAR_SAMPLINGMODE,n.getEngine(),!1,"#define PASS_POST_PROCESS",_.a.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new Za(n.getEngine(),"HDRPostLensFlareDepthOfFieldSource",function(){return e.lensFlareFinalPostProcess},!0))),this._hdrEnabled&&(this._createLuminancePostProcesses(n,this._floatTextureType),this._createHdrPostProcess(n,t),this.hdrFinalPostProcess=new zt("HDRPostHDReDepthOfFieldSource","standard",[],[],t,null,Ge.a.BILINEAR_SAMPLINGMODE,n.getEngine(),!1,"#define PASS_POST_PROCESS",_.a.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new Za(n.getEngine(),"HDRPostHDReDepthOfFieldSource",function(){return e.hdrFinalPostProcess},!0))),this._depthOfFieldEnabled&&(this._createBlurPostProcesses(n,t/2,3,"depthOfFieldBlurWidth"),this._createDepthOfFieldPostProcess(n,t)),this._motionBlurEnabled&&this._createMotionBlurPostProcess(n,t),this._fxaaEnabled&&(this.fxaaPostProcess=new ds("fxaa",1,null,Ge.a.BILINEAR_SAMPLINGMODE,n.getEngine(),!1,_.a.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new Za(n.getEngine(),"HDRFxaa",function(){return e.fxaaPostProcess},!0))),null!==this._cameras&&this._scene.postProcessRenderPipelineManager.attachCamerasToRenderPipeline(this._name,this._cameras),!this._enableMSAAOnFirstPostProcess(this._samples)&&this._samples>1&&p.a.Warn("MSAA failed to enable, MSAA is only supported in browsers that support webGL >= 2.0")},t.prototype._createDownSampleX4PostProcess=function(e,t){var n=this,r=new Array(32);this.downSampleX4PostProcess=new zt("HDRDownSampleX4","standard",["dsOffsets"],[],t,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define DOWN_SAMPLE_X4",_.a.TEXTURETYPE_UNSIGNED_INT),this.downSampleX4PostProcess.onApply=function(e){for(var t=0,i=n.downSampleX4PostProcess.width,o=n.downSampleX4PostProcess.height,a=-2;a<2;a++)for(var s=-2;s<2;s++)r[t]=(a+.5)*(1/i),r[t+1]=(s+.5)*(1/o),t+=2;e.setArray2("dsOffsets",r)},this.addEffect(new Za(e.getEngine(),"HDRDownSampleX4",function(){return n.downSampleX4PostProcess},!0))},t.prototype._createBrightPassPostProcess=function(e,t){var n=this,r=new Array(8);this.brightPassPostProcess=new zt("HDRBrightPass","standard",["dsOffsets","brightThreshold"],[],t,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define BRIGHT_PASS",_.a.TEXTURETYPE_UNSIGNED_INT),this.brightPassPostProcess.onApply=function(e){var t=1/n.brightPassPostProcess.width,i=1/n.brightPassPostProcess.height;r[0]=-.5*t,r[1]=.5*i,r[2]=.5*t,r[3]=.5*i,r[4]=-.5*t,r[5]=-.5*i,r[6]=.5*t,r[7]=-.5*i,e.setArray2("dsOffsets",r),e.setFloat("brightThreshold",n.brightThreshold)},this.addEffect(new Za(e.getEngine(),"HDRBrightPass",function(){return n.brightPassPostProcess},!0))},t.prototype._createBlurPostProcesses=function(e,t,n,r){var i=this;void 0===r&&(r="blurWidth");var a=e.getEngine(),s=new jr("HDRBlurH_"+n,new o.w(1,0),this[r],t,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,_.a.TEXTURETYPE_UNSIGNED_INT),u=new jr("HDRBlurV_"+n,new o.w(0,1),this[r],t,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,_.a.TEXTURETYPE_UNSIGNED_INT);s.onActivateObservable.add(function(){var e=s.width/a.getRenderWidth();s.kernel=i[r]*e}),u.onActivateObservable.add(function(){var e=u.height/a.getRenderHeight();u.kernel=i.horizontalBlur?64*e:i[r]*e}),this.addEffect(new Za(e.getEngine(),"HDRBlurH"+n,function(){return s},!0)),this.addEffect(new Za(e.getEngine(),"HDRBlurV"+n,function(){return u},!0)),this.blurHPostProcesses.push(s),this.blurVPostProcesses.push(u)},t.prototype._createTextureAdderPostProcess=function(e,t){var n=this;this.textureAdderPostProcess=new zt("HDRTextureAdder","standard",["exposure"],["otherSampler","lensSampler"],t,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define TEXTURE_ADDER",_.a.TEXTURETYPE_UNSIGNED_INT),this.textureAdderPostProcess.onApply=function(e){e.setTextureFromPostProcess("otherSampler",n._vlsEnabled?n._currentDepthOfFieldSource:n.originalPostProcess),e.setTexture("lensSampler",n.lensTexture),e.setFloat("exposure",n._currentExposure),n._currentDepthOfFieldSource=n.textureAdderFinalPostProcess},this.addEffect(new Za(e.getEngine(),"HDRTextureAdder",function(){return n.textureAdderPostProcess},!0))},t.prototype._createVolumetricLightPostProcess=function(e,t){var n=this,r=e.enableGeometryBufferRenderer();r.enablePosition=!0;var i=r.getGBuffer();this.volumetricLightPostProcess=new zt("HDRVLS","standard",["shadowViewProjection","cameraPosition","sunDirection","sunColor","scatteringCoefficient","scatteringPower","depthValues"],["shadowMapSampler","positionSampler"],t/8,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define VLS\n#define NB_STEPS "+this._volumetricLightStepsCount.toFixed(1));var a=o.w.Zero();this.volumetricLightPostProcess.onApply=function(e){if(n.sourceLight&&n.sourceLight.getShadowGenerator()&&n._scene.activeCamera){var t=n.sourceLight.getShadowGenerator();e.setTexture("shadowMapSampler",t.getShadowMap()),e.setTexture("positionSampler",i.textures[2]),e.setColor3("sunColor",n.sourceLight.diffuse),e.setVector3("sunDirection",n.sourceLight.getShadowDirection()),e.setVector3("cameraPosition",n._scene.activeCamera.globalPosition),e.setMatrix("shadowViewProjection",t.getTransformMatrix()),e.setFloat("scatteringCoefficient",n.volumetricLightCoefficient),e.setFloat("scatteringPower",n.volumetricLightPower),a.x=n.sourceLight.getDepthMinZ(n._scene.activeCamera),a.y=n.sourceLight.getDepthMaxZ(n._scene.activeCamera),e.setVector2("depthValues",a)}},this.addEffect(new Za(e.getEngine(),"HDRVLS",function(){return n.volumetricLightPostProcess},!0)),this._createBlurPostProcesses(e,t/4,0,"volumetricLightBlurScale"),this.volumetricLightMergePostProces=new zt("HDRVLSMerge","standard",[],["originalSampler"],t,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define VLSMERGE"),this.volumetricLightMergePostProces.onApply=function(e){e.setTextureFromPostProcess("originalSampler",n._bloomEnabled?n.textureAdderFinalPostProcess:n.originalPostProcess),n._currentDepthOfFieldSource=n.volumetricLightFinalPostProcess},this.addEffect(new Za(e.getEngine(),"HDRVLSMerge",function(){return n.volumetricLightMergePostProces},!0))},t.prototype._createLuminancePostProcesses=function(e,n){var r=this,i=Math.pow(3,t.LuminanceSteps);this.luminancePostProcess=new zt("HDRLuminance","standard",["lumOffsets"],[],{width:i,height:i},null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define LUMINANCE",n);var a=[];this.luminancePostProcess.onApply=function(e){var t=1/r.luminancePostProcess.width,n=1/r.luminancePostProcess.height;a[0]=-.5*t,a[1]=.5*n,a[2]=.5*t,a[3]=.5*n,a[4]=-.5*t,a[5]=-.5*n,a[6]=.5*t,a[7]=-.5*n,e.setArray2("lumOffsets",a)},this.addEffect(new Za(e.getEngine(),"HDRLuminance",function(){return r.luminancePostProcess},!0));for(var s=t.LuminanceSteps-1;s>=0;s--){i=Math.pow(3,s);var u="#define LUMINANCE_DOWN_SAMPLE\n";0===s&&(u+="#define FINAL_DOWN_SAMPLER");var l=new zt("HDRLuminanceDownSample"+s,"standard",["dsOffsets","halfDestPixelSize"],[],{width:i,height:i},null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,u,n);this.luminanceDownSamplePostProcesses.push(l)}var c=this.luminancePostProcess;this.luminanceDownSamplePostProcesses.forEach(function(t,n){var i=new Array(18);t.onApply=function(e){if(c){for(var o=0,a=-1;a<2;a++)for(var s=-1;s<2;s++)i[o]=a/c.width,i[o+1]=s/c.height,o+=2;e.setArray2("dsOffsets",i),e.setFloat("halfDestPixelSize",.5/c.width),c=n===r.luminanceDownSamplePostProcesses.length-1?r.luminancePostProcess:t}},n===r.luminanceDownSamplePostProcesses.length-1&&(t.onAfterRender=function(){var t=e.getEngine().readPixels(0,0,1,1),n=new o.y(1/16581375,1/65025,1/255,1);r._hdrCurrentLuminance=(t[0]*n.x+t[1]*n.y+t[2]*n.z+t[3]*n.w)/100}),r.addEffect(new Za(e.getEngine(),"HDRLuminanceDownSample"+n,function(){return t},!0))})},t.prototype._createHdrPostProcess=function(e,t){var n=this,r=["#define HDR"];this._hdrAutoExposure&&r.push("#define AUTO_EXPOSURE"),this.hdrPostProcess=new zt("HDR","standard",["averageLuminance"],["textureAdderSampler"],t,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,r.join("\n"),_.a.TEXTURETYPE_UNSIGNED_INT);var i=1,o=0,a=0;this.hdrPostProcess.onApply=function(t){if(t.setTextureFromPostProcess("textureAdderSampler",n._currentDepthOfFieldSource),o+=e.getEngine().getDeltaTime(),i<0)i=n._hdrCurrentLuminance;else{var r=(a-o)/1e3;n._hdrCurrentLuminance<i+n.hdrDecreaseRate*r?i+=n.hdrDecreaseRate*r:n._hdrCurrentLuminance>i-n.hdrIncreaseRate*r?i-=n.hdrIncreaseRate*r:i=n._hdrCurrentLuminance}n.hdrAutoExposure?n._currentExposure=n._fixedExposure/i:(i=w.a.Clamp(i,n.hdrMinimumLuminance,1e20),t.setFloat("averageLuminance",i)),a=o,n._currentDepthOfFieldSource=n.hdrFinalPostProcess},this.addEffect(new Za(e.getEngine(),"HDR",function(){return n.hdrPostProcess},!0))},t.prototype._createLensFlarePostProcess=function(e,t){var n=this;this.lensFlarePostProcess=new zt("HDRLensFlare","standard",["strength","ghostDispersal","haloWidth","resolution","distortionStrength"],["lensColorSampler"],t/2,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define LENS_FLARE",_.a.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new Za(e.getEngine(),"HDRLensFlare",function(){return n.lensFlarePostProcess},!0)),this._createBlurPostProcesses(e,t/4,2),this.lensFlareComposePostProcess=new zt("HDRLensFlareCompose","standard",["lensStarMatrix"],["otherSampler","lensDirtSampler","lensStarSampler"],t,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define LENS_FLARE_COMPOSE",_.a.TEXTURETYPE_UNSIGNED_INT),this.addEffect(new Za(e.getEngine(),"HDRLensFlareCompose",function(){return n.lensFlareComposePostProcess},!0));var r=new o.w(0,0);this.lensFlarePostProcess.onApply=function(e){e.setTextureFromPostProcess("textureSampler",n._bloomEnabled?n.blurHPostProcesses[0]:n.originalPostProcess),e.setTexture("lensColorSampler",n.lensColorTexture),e.setFloat("strength",n.lensFlareStrength),e.setFloat("ghostDispersal",n.lensFlareGhostDispersal),e.setFloat("haloWidth",n.lensFlareHaloWidth),r.x=n.lensFlarePostProcess.width,r.y=n.lensFlarePostProcess.height,e.setVector2("resolution",r),e.setFloat("distortionStrength",n.lensFlareDistortionStrength)};var i=o.j.FromValues(2,0,-1,0,0,2,-1,0,0,0,1,0,0,0,0,1),a=o.j.FromValues(.5,0,.5,0,0,.5,.5,0,0,0,1,0,0,0,0,1);this.lensFlareComposePostProcess.onApply=function(e){if(n._scene.activeCamera){e.setTextureFromPostProcess("otherSampler",n._currentDepthOfFieldSource),e.setTexture("lensDirtSampler",n.lensFlareDirtTexture),e.setTexture("lensStarSampler",n.lensStarTexture);var t=n._scene.activeCamera.getViewMatrix().getRow(0),r=n._scene.activeCamera.getViewMatrix().getRow(2),s=o.x.Dot(t.toVector3(),new o.x(1,0,0))+o.x.Dot(r.toVector3(),new o.x(0,0,1));s*=4;var u=o.j.FromValues(.5*Math.cos(s),-Math.sin(s),0,0,Math.sin(s),.5*Math.cos(s),0,0,0,0,1,0,0,0,0,1),l=a.multiply(u).multiply(i);e.setMatrix("lensStarMatrix",l),n._currentDepthOfFieldSource=n.lensFlareFinalPostProcess}}},t.prototype._createDepthOfFieldPostProcess=function(e,t){var n=this;this.depthOfFieldPostProcess=new zt("HDRDepthOfField","standard",["distance"],["otherSampler","depthSampler"],t,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define DEPTH_OF_FIELD",_.a.TEXTURETYPE_UNSIGNED_INT),this.depthOfFieldPostProcess.onApply=function(e){e.setTextureFromPostProcess("otherSampler",n._currentDepthOfFieldSource),e.setTexture("depthSampler",n._getDepthTexture()),e.setFloat("distance",n.depthOfFieldDistance)},this.addEffect(new Za(e.getEngine(),"HDRDepthOfField",function(){return n.depthOfFieldPostProcess},!0))},t.prototype._createMotionBlurPostProcess=function(e,t){var n=this;this.motionBlurPostProcess=new zt("HDRMotionBlur","standard",["inverseViewProjection","prevViewProjection","screenSize","motionScale","motionStrength"],["depthSampler"],t,null,Ge.a.BILINEAR_SAMPLINGMODE,e.getEngine(),!1,"#define MOTION_BLUR\n#define MAX_MOTION_SAMPLES "+this.motionBlurSamples.toFixed(1),_.a.TEXTURETYPE_UNSIGNED_INT);var r=0,i=o.j.Identity(),a=o.j.Identity(),s=o.j.Identity(),u=o.w.Zero();this.motionBlurPostProcess.onApply=function(t){(s=e.getProjectionMatrix().multiply(e.getViewMatrix())).invertToRef(a),t.setMatrix("inverseViewProjection",a),t.setMatrix("prevViewProjection",i),i=s,u.x=n.motionBlurPostProcess.width,u.y=n.motionBlurPostProcess.height,t.setVector2("screenSize",u),r=e.getEngine().getFps()/60,t.setFloat("motionScale",r),t.setFloat("motionStrength",n.motionStrength),t.setTexture("depthSampler",n._getDepthTexture())},this.addEffect(new Za(e.getEngine(),"HDRMotionBlur",function(){return n.motionBlurPostProcess},!0))},t.prototype._getDepthTexture=function(){return this._scene.getEngine().getCaps().drawBuffersExtension?this._scene.enableGeometryBufferRenderer().getGBuffer().textures[0]:this._scene.enableDepthRenderer().getDepthMap()},t.prototype._disposePostProcesses=function(){for(var e=0;e<this._cameras.length;e++){var t=this._cameras[e];this.originalPostProcess&&this.originalPostProcess.dispose(t),this.downSampleX4PostProcess&&this.downSampleX4PostProcess.dispose(t),this.brightPassPostProcess&&this.brightPassPostProcess.dispose(t),this.textureAdderPostProcess&&this.textureAdderPostProcess.dispose(t),this.textureAdderFinalPostProcess&&this.textureAdderFinalPostProcess.dispose(t),this.volumetricLightPostProcess&&this.volumetricLightPostProcess.dispose(t),this.volumetricLightSmoothXPostProcess&&this.volumetricLightSmoothXPostProcess.dispose(t),this.volumetricLightSmoothYPostProcess&&this.volumetricLightSmoothYPostProcess.dispose(t),this.volumetricLightMergePostProces&&this.volumetricLightMergePostProces.dispose(t),this.volumetricLightFinalPostProcess&&this.volumetricLightFinalPostProcess.dispose(t),this.lensFlarePostProcess&&this.lensFlarePostProcess.dispose(t),this.lensFlareComposePostProcess&&this.lensFlareComposePostProcess.dispose(t);for(var n=0;n<this.luminanceDownSamplePostProcesses.length;n++)this.luminanceDownSamplePostProcesses[n].dispose(t);for(this.luminancePostProcess&&this.luminancePostProcess.dispose(t),this.hdrPostProcess&&this.hdrPostProcess.dispose(t),this.hdrFinalPostProcess&&this.hdrFinalPostProcess.dispose(t),this.depthOfFieldPostProcess&&this.depthOfFieldPostProcess.dispose(t),this.motionBlurPostProcess&&this.motionBlurPostProcess.dispose(t),this.fxaaPostProcess&&this.fxaaPostProcess.dispose(t),n=0;n<this.blurHPostProcesses.length;n++)this.blurHPostProcesses[n].dispose(t);for(n=0;n<this.blurVPostProcesses.length;n++)this.blurVPostProcesses[n].dispose(t)}this.originalPostProcess=null,this.downSampleX4PostProcess=null,this.brightPassPostProcess=null,this.textureAdderPostProcess=null,this.textureAdderFinalPostProcess=null,this.volumetricLightPostProcess=null,this.volumetricLightSmoothXPostProcess=null,this.volumetricLightSmoothYPostProcess=null,this.volumetricLightMergePostProces=null,this.volumetricLightFinalPostProcess=null,this.lensFlarePostProcess=null,this.lensFlareComposePostProcess=null,this.luminancePostProcess=null,this.hdrPostProcess=null,this.hdrFinalPostProcess=null,this.depthOfFieldPostProcess=null,this.motionBlurPostProcess=null,this.fxaaPostProcess=null,this.luminanceDownSamplePostProcesses=[],this.blurHPostProcesses=[],this.blurVPostProcesses=[]},t.prototype.dispose=function(){this._disposePostProcesses(),this._scene.postProcessRenderPipelineManager.detachCamerasFromRenderPipeline(this._name,this._cameras),e.prototype.dispose.call(this)},t.prototype.serialize=function(){var e=L.a.Serialize(this);return this.sourceLight&&(e.sourceLightId=this.sourceLight.id),e.customType="StandardRenderingPipeline",e},t.Parse=function(e,n,r){var i=L.a.Parse(function(){return new t(e._name,n,e._ratio)},e,n,r);return e.sourceLightId&&(i.sourceLight=n.getLightByID(e.sourceLightId)),i},t.LuminanceSteps=6,l.c([Object(L.c)()],t.prototype,"brightThreshold",void 0),l.c([Object(L.c)()],t.prototype,"blurWidth",void 0),l.c([Object(L.c)()],t.prototype,"horizontalBlur",void 0),l.c([Object(L.c)()],t.prototype,"exposure",null),l.c([Object(L.m)("lensTexture")],t.prototype,"lensTexture",void 0),l.c([Object(L.c)()],t.prototype,"volumetricLightCoefficient",void 0),l.c([Object(L.c)()],t.prototype,"volumetricLightPower",void 0),l.c([Object(L.c)()],t.prototype,"volumetricLightBlurScale",void 0),l.c([Object(L.c)()],t.prototype,"hdrMinimumLuminance",void 0),l.c([Object(L.c)()],t.prototype,"hdrDecreaseRate",void 0),l.c([Object(L.c)()],t.prototype,"hdrIncreaseRate",void 0),l.c([Object(L.c)()],t.prototype,"hdrAutoExposure",null),l.c([Object(L.m)("lensColorTexture")],t.prototype,"lensColorTexture",void 0),l.c([Object(L.c)()],t.prototype,"lensFlareStrength",void 0),l.c([Object(L.c)()],t.prototype,"lensFlareGhostDispersal",void 0),l.c([Object(L.c)()],t.prototype,"lensFlareHaloWidth",void 0),l.c([Object(L.c)()],t.prototype,"lensFlareDistortionStrength",void 0),l.c([Object(L.m)("lensStarTexture")],t.prototype,"lensStarTexture",void 0),l.c([Object(L.m)("lensFlareDirtTexture")],t.prototype,"lensFlareDirtTexture",void 0),l.c([Object(L.c)()],t.prototype,"depthOfFieldDistance",void 0),l.c([Object(L.c)()],t.prototype,"depthOfFieldBlurWidth",void 0),l.c([Object(L.c)()],t.prototype,"motionStrength",void 0),l.c([Object(L.c)()],t.prototype,"_ratio",void 0),l.c([Object(L.c)()],t.prototype,"BloomEnabled",null),l.c([Object(L.c)()],t.prototype,"DepthOfFieldEnabled",null),l.c([Object(L.c)()],t.prototype,"LensFlareEnabled",null),l.c([Object(L.c)()],t.prototype,"HDREnabled",null),l.c([Object(L.c)()],t.prototype,"VLSEnabled",null),l.c([Object(L.c)()],t.prototype,"MotionBlurEnabled",null),l.c([Object(L.c)()],t.prototype,"fxaaEnabled",null),l.c([Object(L.c)()],t.prototype,"volumetricLightStepsCount",null),l.c([Object(L.c)()],t.prototype,"motionBlurSamples",null),l.c([Object(L.c)()],t.prototype,"samples",null),t}(bs);a.a.RegisteredTypes["BABYLON.StandardRenderingPipeline"]=Ps,jt.a.ShadersStore.tonemapPixelShader="\nvarying vec2 vUV;\nuniform sampler2D textureSampler;\n\nuniform float _ExposureAdjustment;\n#if defined(HABLE_TONEMAPPING)\nconst float A=0.15;\nconst float B=0.50;\nconst float C=0.10;\nconst float D=0.20;\nconst float E=0.02;\nconst float F=0.30;\nconst float W=11.2;\n#endif\nfloat Luminance(vec3 c)\n{\nreturn dot(c,vec3(0.22,0.707,0.071));\n}\nvoid main(void)\n{\nvec3 colour=texture2D(textureSampler,vUV).rgb;\n#if defined(REINHARD_TONEMAPPING)\nfloat lum=Luminance(colour.rgb);\nfloat lumTm=lum*_ExposureAdjustment;\nfloat scale=lumTm/(1.0+lumTm);\ncolour*=scale/lum;\n#elif defined(HABLE_TONEMAPPING)\ncolour*=_ExposureAdjustment;\nconst float ExposureBias=2.0;\nvec3 x=ExposureBias*colour;\nvec3 curr=((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;\nx=vec3(W,W,W);\nvec3 whiteScale=1.0/(((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F);\ncolour=curr*whiteScale;\n#elif defined(OPTIMIZED_HEJIDAWSON_TONEMAPPING)\ncolour*=_ExposureAdjustment;\nvec3 X=max(vec3(0.0,0.0,0.0),colour-0.004);\nvec3 retColor=(X*(6.2*X+0.5))/(X*(6.2*X+1.7)+0.06);\ncolour=retColor*retColor;\n#elif defined(PHOTOGRAPHIC_TONEMAPPING)\ncolour=vec3(1.0,1.0,1.0)-exp2(-_ExposureAdjustment*colour);\n#endif\ngl_FragColor=vec4(colour.rgb,1.0);\n}",function(e){e[e.Hable=0]="Hable",e[e.Reinhard=1]="Reinhard",e[e.HejiDawson=2]="HejiDawson",e[e.Photographic=3]="Photographic"}(Cs||(Cs={}));var Rs=function(e){function t(t,n,r,i,o,a,s){void 0===o&&(o=_.a.TEXTURE_BILINEAR_SAMPLINGMODE),void 0===s&&(s=_.a.TEXTURETYPE_UNSIGNED_INT);var u=e.call(this,t,"tonemap",["_ExposureAdjustment"],null,1,i,o,a,!0,null,s)||this;u._operator=n,u.exposureAdjustment=r;var l="#define ";return u._operator===Cs.Hable?l+="HABLE_TONEMAPPING":u._operator===Cs.Reinhard?l+="REINHARD_TONEMAPPING":u._operator===Cs.HejiDawson?l+="OPTIMIZED_HEJIDAWSON_TONEMAPPING":u._operator===Cs.Photographic&&(l+="PHOTOGRAPHIC_TONEMAPPING"),u.updateEffect(l),u.onApply=function(e){e.setFloat("_ExposureAdjustment",u.exposureAdjustment)},u}return l.d(t,e),t}(zt);jt.a.ShadersStore.depthVertexShader="\nattribute vec3 position;\n#include<bonesDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 viewProjection;\nuniform vec2 depthValues;\n#if defined(ALPHATEST) || defined(NEED_UV)\nvarying vec2 vUV;\nuniform mat4 diffuseMatrix;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#endif\nvarying float vDepthMetric;\nvoid main(void)\n{\n#include<instancesVertex>\n#include<bonesVertex>\ngl_Position=viewProjection*finalWorld*vec4(position,1.0);\nvDepthMetric=((gl_Position.z+depthValues.x)/(depthValues.y));\n#if defined(ALPHATEST) || defined(BASIC_RENDER)\n#ifdef UV1\nvUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef UV2\nvUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n}",jt.a.ShadersStore.volumetricLightScatteringPixelShader="uniform sampler2D textureSampler;\nuniform sampler2D lightScatteringSampler;\nuniform float decay;\nuniform float exposure;\nuniform float weight;\nuniform float density;\nuniform vec2 meshPositionOnScreen;\nvarying vec2 vUV;\nvoid main(void) {\nvec2 tc=vUV;\nvec2 deltaTexCoord=(tc-meshPositionOnScreen.xy);\ndeltaTexCoord*=1.0/float(NUM_SAMPLES)*density;\nfloat illuminationDecay=1.0;\nvec4 color=texture2D(lightScatteringSampler,tc)*0.4;\nfor(int i=0; i<NUM_SAMPLES; i++) {\ntc-=deltaTexCoord;\nvec4 dataSample=texture2D(lightScatteringSampler,tc)*0.4;\ndataSample*=illuminationDecay*weight;\ncolor+=dataSample;\nilluminationDecay*=decay;\n}\nvec4 realColor=texture2D(textureSampler,vUV);\ngl_FragColor=((vec4((vec3(color.r,color.g,color.b)*exposure),1))+(realColor*(1.5-0.4)));\n}\n",jt.a.ShadersStore.volumetricLightScatteringPassPixelShader="#if defined(ALPHATEST) || defined(NEED_UV)\nvarying vec2 vUV;\n#endif\n#if defined(ALPHATEST)\nuniform sampler2D diffuseSampler;\n#endif\nvoid main(void)\n{\n#if defined(ALPHATEST)\nvec4 diffuseColor=texture2D(diffuseSampler,vUV);\nif (diffuseColor.a<0.4)\ndiscard;\n#endif\ngl_FragColor=vec4(0.0,0.0,0.0,1.0);\n}\n";var Ds=function(e){function t(n,r,i,a,s,u,l,c,h){void 0===s&&(s=100),void 0===u&&(u=Ge.a.BILINEAR_SAMPLINGMODE);var d=e.call(this,n,"volumetricLightScattering",["decay","exposure","weight","meshPositionOnScreen","density"],["lightScatteringSampler"],r.postProcessRatio||r,i,u,l,c,"#define NUM_SAMPLES "+s)||this;return d._screenCoordinates=o.w.Zero(),d.customMeshPosition=o.x.Zero(),d.useCustomMeshPosition=!1,d.invert=!0,d.excludedMeshes=new Array,d.exposure=.3,d.decay=.96815,d.weight=.58767,d.density=.926,l=(h=null===i?h:i.getScene()).getEngine(),d._viewPort=new o.z(0,0,1,1).toGlobal(l.getRenderWidth(),l.getRenderHeight()),d.mesh=null!==a?a:t.CreateDefaultMesh("VolumetricLightScatteringMesh",h),d._createPass(h,r.passRatio||r),d.onActivate=function(e){d.isSupported||d.dispose(e),d.onActivate=null},d.onApplyObservable.add(function(e){d._updateMeshScreenCoordinates(h),e.setTexture("lightScatteringSampler",d._volumetricLightScatteringRTT),e.setFloat("exposure",d.exposure),e.setFloat("decay",d.decay),e.setFloat("weight",d.weight),e.setFloat("density",d.density),e.setVector2("meshPositionOnScreen",d._screenCoordinates)}),d}return l.d(t,e),Object.defineProperty(t.prototype,"useDiffuseColor",{get:function(){return p.a.Warn("VolumetricLightScatteringPostProcess.useDiffuseColor is no longer used, use the mesh material directly instead"),!1},set:function(e){p.a.Warn("VolumetricLightScatteringPostProcess.useDiffuseColor is no longer used, use the mesh material directly instead")},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return"VolumetricLightScatteringPostProcess"},t.prototype._isReady=function(e,t){var n=e.getMesh();if(n===this.mesh&&n.material)return n.material.isReady(n);var r=[],i=[Mn.b.PositionKind],o=e.getMaterial();o&&(o.needAlphaTesting()&&r.push("#define ALPHATEST"),n.isVerticesDataPresent(Mn.b.UVKind)&&(i.push(Mn.b.UVKind),r.push("#define UV1")),n.isVerticesDataPresent(Mn.b.UV2Kind)&&(i.push(Mn.b.UV2Kind),r.push("#define UV2"))),n.useBones&&n.computeBonesUsingShaders?(i.push(Mn.b.MatricesIndicesKind),i.push(Mn.b.MatricesWeightsKind),r.push("#define NUM_BONE_INFLUENCERS "+n.numBoneInfluencers),r.push("#define BonesPerMesh "+(n.skeleton?n.skeleton.bones.length+1:0))):r.push("#define NUM_BONE_INFLUENCERS 0"),t&&(r.push("#define INSTANCES"),i.push("world0"),i.push("world1"),i.push("world2"),i.push("world3"));var a=r.join("\n");return this._cachedDefines!==a&&(this._cachedDefines=a,this._volumetricLightScatteringPass=n.getScene().getEngine().createEffect({vertexElement:"depth",fragmentElement:"volumetricLightScatteringPass"},i,["world","mBones","viewProjection","diffuseMatrix"],["diffuseSampler"],a)),this._volumetricLightScatteringPass.isReady()},t.prototype.setCustomMeshPosition=function(e){this.customMeshPosition=e},t.prototype.getCustomMeshPosition=function(){return this.customMeshPosition},t.prototype.dispose=function(t){var n=t.getScene().customRenderTargets.indexOf(this._volumetricLightScatteringRTT);-1!==n&&t.getScene().customRenderTargets.splice(n,1),this._volumetricLightScatteringRTT.dispose(),e.prototype.dispose.call(this,t)},t.prototype.getPass=function(){return this._volumetricLightScatteringRTT},t.prototype._meshExcluded=function(e){return this.excludedMeshes.length>0&&-1!==this.excludedMeshes.indexOf(e)},t.prototype._createPass=function(e,t){var n=this,r=e.getEngine();this._volumetricLightScatteringRTT=new ln("volumetricLightScatteringMap",{width:r.getRenderWidth()*t,height:r.getRenderHeight()*t},e,!1,!0,_.a.TEXTURETYPE_UNSIGNED_INT),this._volumetricLightScatteringRTT.wrapU=Ge.a.CLAMP_ADDRESSMODE,this._volumetricLightScatteringRTT.wrapV=Ge.a.CLAMP_ADDRESSMODE,this._volumetricLightScatteringRTT.renderList=null,this._volumetricLightScatteringRTT.renderParticles=!1,this._volumetricLightScatteringRTT.ignoreCameraViewport=!0;var i=this.getCamera();i?i.customRenderTargets.push(this._volumetricLightScatteringRTT):e.customRenderTargets.push(this._volumetricLightScatteringRTT);var a,s=function(e){var t=e.getRenderingMesh();if(!n._meshExcluded(t)){var r=e.getMaterial();if(r){var i=t.getScene(),o=i.getEngine();o.setState(r.backFaceCulling);var a=t._getInstancesRenderList(e._id);if(!a.mustReturn){var s=o.getCaps().instancedArrays&&null!==a.visibleInstances[e._id];if(n._isReady(e,s)){var u=n._volumetricLightScatteringPass;if(t===n.mesh&&(u=e.effect?e.effect:r.getEffect()),o.enableEffect(u),t._bind(e,u,Ci.a.TriangleFillMode),t===n.mesh)r.bind(t.getWorldMatrix(),t);else{if(n._volumetricLightScatteringPass.setMatrix("viewProjection",i.getTransformMatrix()),r&&r.needAlphaTesting()){var l=r.getAlphaTestTexture();n._volumetricLightScatteringPass.setTexture("diffuseSampler",l),l&&n._volumetricLightScatteringPass.setMatrix("diffuseMatrix",l.getTextureMatrix())}t.useBones&&t.computeBonesUsingShaders&&t.skeleton&&n._volumetricLightScatteringPass.setMatrices("mBones",t.skeleton.getTransformMatrices(t))}t._processRendering(e,n._volumetricLightScatteringPass,Ci.a.TriangleFillMode,a,s,function(e,t){return u.setMatrix("world",t)})}}}}},u=new o.f(0,0,0,1);this._volumetricLightScatteringRTT.onBeforeRenderObservable.add(function(){a=e.clearColor,e.clearColor=u}),this._volumetricLightScatteringRTT.onAfterRenderObservable.add(function(){e.clearColor=a}),this._volumetricLightScatteringRTT.customRenderFunction=function(t,n,r,i){var o,a=e.getEngine();if(i.length){for(a.setColorWrite(!1),o=0;o<i.length;o++)s(i.data[o]);a.setColorWrite(!0)}for(o=0;o<t.length;o++)s(t.data[o]);for(o=0;o<n.length;o++)s(n.data[o]);if(r.length){for(o=0;o<r.length;o++){var u=r.data[o],l=u.getBoundingInfo();l&&e.activeCamera&&(u._alphaIndex=u.getMesh().alphaIndex,u._distanceToCamera=l.boundingSphere.centerWorld.subtract(e.activeCamera.position).length())}var c=r.data.slice(0,r.length);for(c.sort(function(e,t){return e._alphaIndex>t._alphaIndex?1:e._alphaIndex<t._alphaIndex?-1:e._distanceToCamera<t._distanceToCamera?1:e._distanceToCamera>t._distanceToCamera?-1:0}),a.setAlphaMode(_.a.ALPHA_COMBINE),o=0;o<c.length;o++)s(c[o]);a.setAlphaMode(_.a.ALPHA_DISABLE)}}},t.prototype._updateMeshScreenCoordinates=function(e){var t,n=e.getTransformMatrix();t=this.useCustomMeshPosition?this.customMeshPosition:this.attachedNode?this.attachedNode.position:this.mesh.parent?this.mesh.getAbsolutePosition():this.mesh.position;var r=o.x.Project(t,o.j.Identity(),n,this._viewPort);this._screenCoordinates.x=r.x/this._viewPort.width,this._screenCoordinates.y=r.y/this._viewPort.height,this.invert&&(this._screenCoordinates.y=1-this._screenCoordinates.y)},t.CreateDefaultMesh=function(e,t){var n=fe.a.CreatePlane(e,1,t);n.billboardMode=Fe.a.BILLBOARDMODE_ALL;var r=new yn.a(e+"Material",t);return r.emissiveColor=new o.e(1,1,1),n.material=r,n},l.c([Object(L.o)()],t.prototype,"customMeshPosition",void 0),l.c([Object(L.c)()],t.prototype,"useCustomMeshPosition",void 0),l.c([Object(L.c)()],t.prototype,"invert",void 0),l.c([Object(L.k)()],t.prototype,"mesh",void 0),l.c([Object(L.c)()],t.prototype,"excludedMeshes",void 0),l.c([Object(L.c)()],t.prototype,"exposure",void 0),l.c([Object(L.c)()],t.prototype,"decay",void 0),l.c([Object(L.c)()],t.prototype,"weight",void 0),l.c([Object(L.c)()],t.prototype,"density",void 0),t}(zt);n(126),n(127),Object.defineProperty(H.a.prototype,"forceShowBoundingBoxes",{get:function(){return this._forceShowBoundingBoxes||!1},set:function(e){this._forceShowBoundingBoxes=e,e&&this.getBoundingBoxRenderer()},enumerable:!0,configurable:!0}),H.a.prototype.getBoundingBoxRenderer=function(){return this._boundingBoxRenderer||(this._boundingBoxRenderer=new Os(this)),this._boundingBoxRenderer},Object.defineProperty(Fe.a.prototype,"showBoundingBox",{get:function(){return this._showBoundingBox||!1},set:function(e){this._showBoundingBox=e,e&&this.getScene().getBoundingBoxRenderer()},enumerable:!0,configurable:!0});var Os=function(){function e(e){this.name=xe.a.NAME_BOUNDINGBOXRENDERER,this.frontColor=new o.e(1,1,1),this.backColor=new o.e(.1,.1,.1),this.showBackLines=!0,this.renderList=new Gt.a(32),this._vertexBuffers={},this.scene=e,e._addComponent(this)}return e.prototype.register=function(){this.scene._beforeEvaluateActiveMeshStage.registerStep(xe.a.STEP_BEFOREEVALUATEACTIVEMESH_BOUNDINGBOXRENDERER,this,this.reset),this.scene._activeMeshStage.registerStep(xe.a.STEP_ACTIVEMESH_BOUNDINGBOXRENDERER,this,this._activeMesh),this.scene._evaluateSubMeshStage.registerStep(xe.a.STEP_EVALUATESUBMESH_BOUNDINGBOXRENDERER,this,this._evaluateSubMesh),this.scene._afterRenderingGroupDrawStage.registerStep(xe.a.STEP_AFTERRENDERINGGROUPDRAW_BOUNDINGBOXRENDERER,this,this.render)},e.prototype._evaluateSubMesh=function(e,t){if(e.showSubMeshesBoundingBox){var n=t.getBoundingInfo();null!=n&&(n.boundingBox._tag=e.renderingGroupId,this.renderList.push(n.boundingBox))}},e.prototype._activeMesh=function(e,t){if(e.showBoundingBox||this.scene.forceShowBoundingBoxes){var n=e.getBoundingInfo();n.boundingBox._tag=t.renderingGroupId,this.renderList.push(n.boundingBox)}},e.prototype._prepareRessources=function(){if(!this._colorShader){this._colorShader=new mo.a("colorShader",this.scene,"color",{attributes:[Mn.b.PositionKind],uniforms:["world","viewProjection","color"]});var e=this.scene.getEngine(),t=xn.a.CreateBox({size:1});this._vertexBuffers[Mn.b.PositionKind]=new Mn.b(e,t.positions,Mn.b.PositionKind,!1),this._createIndexBuffer()}},e.prototype._createIndexBuffer=function(){var e=this.scene.getEngine();this._indexBuffer=e.createIndexBuffer([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,7,1,6,2,5,3,4])},e.prototype.rebuild=function(){var e=this._vertexBuffers[Mn.b.PositionKind];e&&e._rebuild(),this._createIndexBuffer()},e.prototype.reset=function(){this.renderList.reset()},e.prototype.render=function(e){if(0!==this.renderList.length&&(this._prepareRessources(),this._colorShader.isReady())){var t=this.scene.getEngine();t.setDepthWrite(!1),this._colorShader._preBind();for(var n=0;n<this.renderList.length;n++){var r=this.renderList.data[n];if(r._tag===e){var i=r.minimum,a=r.maximum.subtract(i),s=i.add(a.scale(.5)),u=o.j.Scaling(a.x,a.y,a.z).multiply(o.j.Translation(s.x,s.y,s.z)).multiply(r.getWorldMatrix());t.bindBuffers(this._vertexBuffers,this._indexBuffer,this._colorShader.getEffect()),this.showBackLines&&(t.setDepthFunctionToGreaterOrEqual(),this.scene.resetCachedMaterial(),this._colorShader.setColor4("color",this.backColor.toColor4()),this._colorShader.bind(u),t.drawElementsType(Ci.a.LineListDrawMode,0,24)),t.setDepthFunctionToLess(),this.scene.resetCachedMaterial(),this._colorShader.setColor4("color",this.frontColor.toColor4()),this._colorShader.bind(u),t.drawElementsType(Ci.a.LineListDrawMode,0,24)}}this._colorShader.unbind(),t.setDepthFunctionToLessOrEqual(),t.setDepthWrite(!0)}},e.prototype.renderOcclusionBoundingBox=function(e){if(this._prepareRessources(),this._colorShader.isReady()&&e._boundingInfo){var t=this.scene.getEngine();t.setDepthWrite(!1),t.setColorWrite(!1),this._colorShader._preBind();var n=e._boundingInfo.boundingBox,r=n.minimum,i=n.maximum.subtract(r),a=r.add(i.scale(.5)),s=o.j.Scaling(i.x,i.y,i.z).multiply(o.j.Translation(a.x,a.y,a.z)).multiply(n.getWorldMatrix());t.bindBuffers(this._vertexBuffers,this._indexBuffer,this._colorShader.getEffect()),t.setDepthFunctionToLess(),this.scene.resetCachedMaterial(),this._colorShader.bind(s),t.drawElementsType(Ci.a.LineListDrawMode,0,24),this._colorShader.unbind(),t.setDepthFunctionToLessOrEqual(),t.setDepthWrite(!0),t.setColorWrite(!0)}},e.prototype.dispose=function(){if(this._colorShader){this.renderList.dispose(),this._colorShader.dispose();var e=this._vertexBuffers[Mn.b.PositionKind];e&&(e.dispose(),this._vertexBuffers[Mn.b.PositionKind]=null),this.scene.getEngine()._releaseBuffer(this._indexBuffer)}},e}();jt.a.ShadersStore.depthPixelShader="#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform sampler2D diffuseSampler;\n#endif\nvarying float vDepthMetric;\nvoid main(void)\n{\n#ifdef ALPHATEST\nif (texture2D(diffuseSampler,vUV).a<0.4)\ndiscard;\n#endif\ngl_FragColor=vec4(vDepthMetric,vDepthMetric*vDepthMetric,0.0,1.0);\n}";var ws=function(){function e(t,n,r){var i=this;void 0===n&&(n=_.a.TEXTURETYPE_FLOAT),void 0===r&&(r=null),this.useOnlyInActiveCamera=!1,this._scene=t,e._SceneComponentInitialization(this._scene),this._camera=r;var a=t.getEngine();this._depthMap=new ln("depthMap",{width:a.getRenderWidth(),height:a.getRenderHeight()},this._scene,!1,!0,n),this._depthMap.wrapU=Ge.a.CLAMP_ADDRESSMODE,this._depthMap.wrapV=Ge.a.CLAMP_ADDRESSMODE,this._depthMap.refreshRate=1,this._depthMap.renderParticles=!1,this._depthMap.renderList=null,this._depthMap.activeCamera=this._camera,this._depthMap.ignoreCameraViewport=!0,this._depthMap.useCameraPostProcesses=!1,this._depthMap.onClearObservable.add(function(e){e.clear(new o.f(1,1,1,1),!0,!0,!0)});var s=function(e){var t=e.getRenderingMesh(),n=i._scene,r=n.getEngine(),o=e.getMaterial();if(o){r.setState(o.backFaceCulling,0,!1,n.useRightHandedSystem);var a=t._getInstancesRenderList(e._id);if(!a.mustReturn){var s=r.getCaps().instancedArrays&&null!==a.visibleInstances[e._id],u=i._camera||n.activeCamera;if(i.isReady(e,s)&&u){if(r.enableEffect(i._effect),t._bind(e,i._effect,Ci.a.TriangleFillMode),i._effect.setMatrix("viewProjection",n.getTransformMatrix()),i._effect.setFloat2("depthValues",u.minZ,u.minZ+u.maxZ),o&&o.needAlphaTesting()){var l=o.getAlphaTestTexture();l&&(i._effect.setTexture("diffuseSampler",l),i._effect.setMatrix("diffuseMatrix",l.getTextureMatrix()))}t.useBones&&t.computeBonesUsingShaders&&t.skeleton&&i._effect.setMatrices("mBones",t.skeleton.getTransformMatrices(t)),t._processRendering(e,i._effect,Ci.a.TriangleFillMode,a,s,function(e,t){return i._effect.setMatrix("world",t)})}}}};this._depthMap.customRenderFunction=function(e,t,n,r){var i;if(r.length){for(a.setColorWrite(!1),i=0;i<r.length;i++)s(r.data[i]);a.setColorWrite(!0)}for(i=0;i<e.length;i++)s(e.data[i]);for(i=0;i<t.length;i++)s(t.data[i])}}return e.prototype.isReady=function(e,t){var n=e.getMaterial();if(n.disableDepthWrite)return!1;var r=[],i=[Mn.b.PositionKind],o=e.getMesh();n&&n.needAlphaTesting()&&n.getAlphaTestTexture()&&(r.push("#define ALPHATEST"),o.isVerticesDataPresent(Mn.b.UVKind)&&(i.push(Mn.b.UVKind),r.push("#define UV1")),o.isVerticesDataPresent(Mn.b.UV2Kind)&&(i.push(Mn.b.UV2Kind),r.push("#define UV2"))),o.useBones&&o.computeBonesUsingShaders?(i.push(Mn.b.MatricesIndicesKind),i.push(Mn.b.MatricesWeightsKind),o.numBoneInfluencers>4&&(i.push(Mn.b.MatricesIndicesExtraKind),i.push(Mn.b.MatricesWeightsExtraKind)),r.push("#define NUM_BONE_INFLUENCERS "+o.numBoneInfluencers),r.push("#define BonesPerMesh "+(o.skeleton?o.skeleton.bones.length+1:0))):r.push("#define NUM_BONE_INFLUENCERS 0"),t&&(r.push("#define INSTANCES"),i.push("world0"),i.push("world1"),i.push("world2"),i.push("world3"));var a=r.join("\n");return this._cachedDefines!==a&&(this._cachedDefines=a,this._effect=this._scene.getEngine().createEffect("depth",i,["world","mBones","viewProjection","diffuseMatrix","depthValues"],["diffuseSampler"],a)),this._effect.isReady()},e.prototype.getDepthMap=function(){return this._depthMap},e.prototype.dispose=function(){this._depthMap.dispose()},e._SceneComponentInitialization=function(e){throw be.a.WarnImport("DepthRendererSceneComponent")},e}();H.a.prototype.enableDepthRenderer=function(e){if(!(e=e||this.activeCamera))throw"No camera available to enable depth renderer";if(this._depthRenderer||(this._depthRenderer={}),!this._depthRenderer[e.id]){var t=0;if(this.getEngine().getCaps().textureHalfFloatRender)t=_.a.TEXTURETYPE_HALF_FLOAT;else{if(!this.getEngine().getCaps().textureFloatRender)throw"Depth renderer does not support int texture type";t=_.a.TEXTURETYPE_FLOAT}this._depthRenderer[e.id]=new ws(this,t,e)}return this._depthRenderer[e.id]},H.a.prototype.disableDepthRenderer=function(e){(e=e||this.activeCamera)&&this._depthRenderer&&this._depthRenderer[e.id]&&(this._depthRenderer[e.id].dispose(),delete this._depthRenderer[e.id])};var Ls=function(){function e(e){this.name=xe.a.NAME_DEPTHRENDERER,this.scene=e}return e.prototype.register=function(){this.scene._gatherRenderTargetsStage.registerStep(xe.a.STEP_GATHERRENDERTARGETS_DEPTHRENDERER,this,this._gatherRenderTargets),this.scene._gatherActiveCameraRenderTargetsStage.registerStep(xe.a.STEP_GATHERACTIVECAMERARENDERTARGETS_DEPTHRENDERER,this,this._gatherActiveCameraRenderTargets)},e.prototype.rebuild=function(){},e.prototype.dispose=function(){for(var e in this.scene._depthRenderer)this.scene._depthRenderer[e].dispose()},e.prototype._gatherRenderTargets=function(e){if(this.scene._depthRenderer)for(var t in this.scene._depthRenderer){var n=this.scene._depthRenderer[t];n.useOnlyInActiveCamera||e.push(n.getDepthMap())}},e.prototype._gatherActiveCameraRenderTargets=function(e){if(this.scene._depthRenderer)for(var t in this.scene._depthRenderer){var n=this.scene._depthRenderer[t];n.useOnlyInActiveCamera&&this.scene.activeCamera.id===t&&e.push(n.getDepthMap())}},e}();ws._SceneComponentInitialization=function(e){var t=e._getComponent(xe.a.NAME_DEPTHRENDERER);t||(t=new Ls(e),e._addComponent(t))},jt.a.ShadersStore.linePixelShader="uniform vec4 color;\nvoid main(void) {\ngl_FragColor=color;\n}",jt.a.ShadersStore.lineVertexShader="\nattribute vec3 position;\nattribute vec4 normal;\n\nuniform mat4 worldViewProjection;\nuniform float width;\nuniform float aspectRatio;\nvoid main(void) {\nvec4 viewPosition=worldViewProjection*vec4(position,1.0);\nvec4 viewPositionNext=worldViewProjection*vec4(normal.xyz,1.0);\nvec2 currentScreen=viewPosition.xy/viewPosition.w;\nvec2 nextScreen=viewPositionNext.xy/viewPositionNext.w;\ncurrentScreen.x*=aspectRatio;\nnextScreen.x*=aspectRatio;\nvec2 dir=normalize(nextScreen-currentScreen);\nvec2 normalDir=vec2(-dir.y,dir.x);\nnormalDir*=width/2.0;\nnormalDir.x/=aspectRatio;\nvec4 offset=vec4(normalDir*normal.w,0.0,0.0);\ngl_Position=viewPosition+offset;\n}",Fe.a.prototype.disableEdgesRendering=function(){return this._edgesRenderer&&(this._edgesRenderer.dispose(),this._edgesRenderer=null),this},Fe.a.prototype.enableEdgesRendering=function(e,t){return void 0===e&&(e=.95),void 0===t&&(t=!1),this.disableEdgesRendering(),this._edgesRenderer=new Fs(this,e,t),this},Object.defineProperty(Fe.a.prototype,"edgesRenderer",{get:function(){return this._edgesRenderer},enumerable:!0,configurable:!0}),Wo.b.prototype.enableEdgesRendering=function(e,t){return void 0===e&&(e=.95),void 0===t&&(t=!1),this.disableEdgesRendering(),this._edgesRenderer=new Ns(this,e,t),this},Wo.a.prototype.enableEdgesRendering=function(e,t){return void 0===e&&(e=.95),void 0===t&&(t=!1),Wo.b.prototype.enableEdgesRendering.apply(this,arguments),this};var Is=function(){this.edges=new Array,this.edgesConnectedCount=0},Fs=function(){function e(e,t,n,r){var i=this;void 0===t&&(t=.95),void 0===n&&(n=!1),void 0===r&&(r=!0),this.edgesWidthScalerForOrthographic=1e3,this.edgesWidthScalerForPerspective=50,this._linesPositions=new Array,this._linesNormals=new Array,this._linesIndices=new Array,this._buffers={},this._checkVerticesInsteadOfIndices=!1,this.isEnabled=!0,this._source=e,this._checkVerticesInsteadOfIndices=n,this._epsilon=t,this._prepareRessources(),r&&this._generateEdgesLines(),this._meshRebuildObserver=this._source.onRebuildObservable.add(function(){i._rebuild()}),this._meshDisposeObserver=this._source.onDisposeObservable.add(function(){i.dispose()})}return e.prototype._prepareRessources=function(){this._lineShader||(this._lineShader=new mo.a("lineShader",this._source.getScene(),"line",{attributes:["position","normal"],uniforms:["worldViewProjection","color","width","aspectRatio"]}),this._lineShader.disableDepthWrite=!0,this._lineShader.backFaceCulling=!1)},e.prototype._rebuild=function(){var e=this._buffers[Mn.b.PositionKind];e&&e._rebuild(),(e=this._buffers[Mn.b.NormalKind])&&e._rebuild();var t=this._source.getScene().getEngine();this._ib=t.createIndexBuffer(this._linesIndices)},e.prototype.dispose=function(){this._source.onRebuildObservable.remove(this._meshRebuildObserver),this._source.onDisposeObservable.remove(this._meshDisposeObserver);var e=this._buffers[Mn.b.PositionKind];e&&(e.dispose(),this._buffers[Mn.b.PositionKind]=null),(e=this._buffers[Mn.b.NormalKind])&&(e.dispose(),this._buffers[Mn.b.NormalKind]=null),this._source.getScene().getEngine()._releaseBuffer(this._ib),this._lineShader.dispose()},e.prototype._processEdgeForAdjacencies=function(e,t,n,r,i){return e===n&&t===r||e===r&&t===n?0:e===r&&t===i||e===i&&t===r?1:e===i&&t===n||e===n&&t===i?2:-1},e.prototype._processEdgeForAdjacenciesWithVertices=function(e,t,n,r,i){return e.equalsWithEpsilon(n)&&t.equalsWithEpsilon(r)||e.equalsWithEpsilon(r)&&t.equalsWithEpsilon(n)?0:e.equalsWithEpsilon(r)&&t.equalsWithEpsilon(i)||e.equalsWithEpsilon(i)&&t.equalsWithEpsilon(r)?1:e.equalsWithEpsilon(i)&&t.equalsWithEpsilon(n)||e.equalsWithEpsilon(n)&&t.equalsWithEpsilon(i)?2:-1},e.prototype._checkEdge=function(e,t,n,r,i){(void 0===t||o.x.Dot(n[e],n[t])<this._epsilon)&&this.createLine(r,i,this._linesPositions.length/3)},e.prototype.createLine=function(e,t,n){this._linesPositions.push(e.x,e.y,e.z,e.x,e.y,e.z,t.x,t.y,t.z,t.x,t.y,t.z),this._linesNormals.push(t.x,t.y,t.z,-1,t.x,t.y,t.z,1,e.x,e.y,e.z,-1,e.x,e.y,e.z,1),this._linesIndices.push(n,n+1,n+2,n,n+2,n+3)},e.prototype._generateEdgesLines=function(){var e=this._source.getVerticesData(Mn.b.PositionKind),t=this._source.getIndices();if(t&&e){var n,r,i=new Array,a=new Array;for(n=0;n<t.length;n+=3){r=new Is;var s=t[n],u=t[n+1],l=t[n+2];r.p0=new o.x(e[3*s],e[3*s+1],e[3*s+2]),r.p1=new o.x(e[3*u],e[3*u+1],e[3*u+2]),r.p2=new o.x(e[3*l],e[3*l+1],e[3*l+2]);var c=o.x.Cross(r.p1.subtract(r.p0),r.p2.subtract(r.p1));c.normalize(),a.push(c),i.push(r)}for(n=0;n<i.length;n++){r=i[n];for(var h=n+1;h<i.length;h++){var d=i[h];if(3===r.edgesConnectedCount)break;if(3!==d.edgesConnectedCount)for(var f=t[3*h],p=t[3*h+1],_=t[3*h+2],m=0;m<3;m++){var g=0;if(void 0===r.edges[m]){switch(m){case 0:g=this._checkVerticesInsteadOfIndices?this._processEdgeForAdjacenciesWithVertices(r.p0,r.p1,d.p0,d.p1,d.p2):this._processEdgeForAdjacencies(t[3*n],t[3*n+1],f,p,_);break;case 1:g=this._checkVerticesInsteadOfIndices?this._processEdgeForAdjacenciesWithVertices(r.p1,r.p2,d.p0,d.p1,d.p2):this._processEdgeForAdjacencies(t[3*n+1],t[3*n+2],f,p,_);break;case 2:g=this._checkVerticesInsteadOfIndices?this._processEdgeForAdjacenciesWithVertices(r.p2,r.p0,d.p0,d.p1,d.p2):this._processEdgeForAdjacencies(t[3*n+2],t[3*n],f,p,_)}if(-1!==g&&(r.edges[m]=h,d.edges[g]=n,r.edgesConnectedCount++,d.edgesConnectedCount++,3===r.edgesConnectedCount))break}}}}for(n=0;n<i.length;n++){var v=i[n];this._checkEdge(n,v.edges[0],a,v.p0,v.p1),this._checkEdge(n,v.edges[1],a,v.p1,v.p2),this._checkEdge(n,v.edges[2],a,v.p2,v.p0)}var y=this._source.getScene().getEngine();this._buffers[Mn.b.PositionKind]=new Mn.b(y,this._linesPositions,Mn.b.PositionKind,!1),this._buffers[Mn.b.NormalKind]=new Mn.b(y,this._linesNormals,Mn.b.NormalKind,!1,!1,4),this._ib=y.createIndexBuffer(this._linesIndices),this._indicesCount=this._linesIndices.length}},e.prototype.isReady=function(){return this._lineShader.isReady()},e.prototype.render=function(){var e=this._source.getScene();if(this.isReady()&&e.activeCamera){var t=e.getEngine();this._lineShader._preBind(),t.setAlphaMode(1!==this._source.edgesColor.a?_.a.ALPHA_COMBINE:_.a.ALPHA_DISABLE),t.bindBuffers(this._buffers,this._ib,this._lineShader.getEffect()),e.resetCachedMaterial(),this._lineShader.setColor4("color",this._source.edgesColor),this._lineShader.setFloat("width",e.activeCamera.mode===Ne.a.ORTHOGRAPHIC_CAMERA?this._source.edgesWidth/this.edgesWidthScalerForOrthographic:this._source.edgesWidth/this.edgesWidthScalerForPerspective),this._lineShader.setFloat("aspectRatio",t.getAspectRatio(e.activeCamera)),this._lineShader.bind(this._source.getWorldMatrix()),t.drawElementsType(Ci.a.TriangleFillMode,0,this._indicesCount),this._lineShader.unbind()}},e}(),Ns=function(e){function t(t,n,r){void 0===n&&(n=.95),void 0===r&&(r=!1);var i=e.call(this,t,n,r,!1)||this;return i._generateEdgesLines(),i}return l.d(t,e),t.prototype._generateEdgesLines=function(){var e=this._source.getVerticesData(Mn.b.PositionKind),t=this._source.getIndices();if(t&&e){for(var n=o.t.Vector3[0],r=o.t.Vector3[1],i=t.length-1,a=0,s=0;a<i;a+=2,s+=4)o.x.FromArrayToRef(e,3*t[a],n),o.x.FromArrayToRef(e,3*t[a+1],r),this.createLine(n,r,s);var u=this._source.getScene().getEngine();this._buffers[Mn.b.PositionKind]=new Mn.b(u,this._linesPositions,Mn.b.PositionKind,!1),this._buffers[Mn.b.NormalKind]=new Mn.b(u,this._linesNormals,Mn.b.NormalKind,!1,!1,4),this._ib=u.createIndexBuffer(this._linesIndices),this._indicesCount=this._linesIndices.length}},t}(Fs);jt.a.ShadersStore.outlinePixelShader="#ifdef LOGARITHMICDEPTH\n#extension GL_EXT_frag_depth : enable\n#endif\nuniform vec4 color;\n#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform sampler2D diffuseSampler;\n#endif\n#include<logDepthDeclaration>\nvoid main(void) {\n#ifdef ALPHATEST\nif (texture2D(diffuseSampler,vUV).a<0.4)\ndiscard;\n#endif\n#include<logDepthFragment>\ngl_FragColor=color;\n}",jt.a.ShadersStore.outlineVertexShader="\nattribute vec3 position;\nattribute vec3 normal;\n#include<bonesDeclaration>\n\nuniform float offset;\n#include<instancesDeclaration>\nuniform mat4 viewProjection;\n#ifdef ALPHATEST\nvarying vec2 vUV;\nuniform mat4 diffuseMatrix;\n#ifdef UV1\nattribute vec2 uv;\n#endif\n#ifdef UV2\nattribute vec2 uv2;\n#endif\n#endif\n#include<logDepthDeclaration>\nvoid main(void)\n{\nvec3 offsetPosition=position+normal*offset;\n#include<instancesVertex>\n#include<bonesVertex>\ngl_Position=viewProjection*finalWorld*vec4(offsetPosition,1.0);\n#ifdef ALPHATEST\n#ifdef UV1\nvUV=vec2(diffuseMatrix*vec4(uv,1.0,0.0));\n#endif\n#ifdef UV2\nvUV=vec2(diffuseMatrix*vec4(uv2,1.0,0.0));\n#endif\n#endif\n#include<logDepthVertex>\n}\n",H.a.prototype.getOutlineRenderer=function(){return this._outlineRenderer||(this._outlineRenderer=new Bs(this)),this._outlineRenderer},Object.defineProperty(Fe.a.prototype,"renderOutline",{get:function(){return this._renderOutline},set:function(e){e&&this.getScene().getOutlineRenderer(),this._renderOutline=e},enumerable:!0,configurable:!0}),Object.defineProperty(Fe.a.prototype,"renderOverlay",{get:function(){return this._renderOverlay},set:function(e){e&&this.getScene().getOutlineRenderer(),this._renderOverlay=e},enumerable:!0,configurable:!0});var Bs=function(){function e(e){this.name=xe.a.NAME_OUTLINERENDERER,this.zOffset=1,this.scene=e,this._engine=e.getEngine(),this.scene._addComponent(this)}return e.prototype.register=function(){this.scene._beforeRenderingMeshStage.registerStep(xe.a.STEP_BEFORERENDERINGMESH_OUTLINE,this,this._beforeRenderingMesh),this.scene._afterRenderingMeshStage.registerStep(xe.a.STEP_AFTERRENDERINGMESH_OUTLINE,this,this._afterRenderingMesh)},e.prototype.rebuild=function(){},e.prototype.dispose=function(){},e.prototype.render=function(e,t,n){var r=this;void 0===n&&(n=!1);var i=this.scene,o=i.getEngine(),a=o.getCaps().instancedArrays&&null!=t.visibleInstances[e._id];if(this.isReady(e,a)){var s=e.getRenderingMesh(),u=e.getMaterial();if(u&&i.activeCamera){if(o.enableEffect(this._effect),u.useLogarithmicDepth&&this._effect.setFloat("logarithmicDepthConstant",2/(Math.log(i.activeCamera.maxZ+1)/Math.LN2)),this._effect.setFloat("offset",n?0:s.outlineWidth),this._effect.setColor4("color",n?s.overlayColor:s.outlineColor,n?s.overlayAlpha:u.alpha),this._effect.setMatrix("viewProjection",i.getTransformMatrix()),s.useBones&&s.computeBonesUsingShaders&&s.skeleton&&this._effect.setMatrices("mBones",s.skeleton.getTransformMatrices(s)),s._bind(e,this._effect,Ci.a.TriangleFillMode),u&&u.needAlphaTesting()){var l=u.getAlphaTestTexture();l&&(this._effect.setTexture("diffuseSampler",l),this._effect.setMatrix("diffuseMatrix",l.getTextureMatrix()))}o.setZOffset(-this.zOffset),s._processRendering(e,this._effect,Ci.a.TriangleFillMode,t,a,function(e,t){r._effect.setMatrix("world",t)}),o.setZOffset(0)}}},e.prototype.isReady=function(e,t){var n=[],r=[Mn.b.PositionKind,Mn.b.NormalKind],i=e.getMesh(),o=e.getMaterial();o&&(o.needAlphaTesting()&&(n.push("#define ALPHATEST"),i.isVerticesDataPresent(Mn.b.UVKind)&&(r.push(Mn.b.UVKind),n.push("#define UV1")),i.isVerticesDataPresent(Mn.b.UV2Kind)&&(r.push(Mn.b.UV2Kind),n.push("#define UV2"))),o.useLogarithmicDepth&&n.push("#define LOGARITHMICDEPTH")),i.useBones&&i.computeBonesUsingShaders?(r.push(Mn.b.MatricesIndicesKind),r.push(Mn.b.MatricesWeightsKind),i.numBoneInfluencers>4&&(r.push(Mn.b.MatricesIndicesExtraKind),r.push(Mn.b.MatricesWeightsExtraKind)),n.push("#define NUM_BONE_INFLUENCERS "+i.numBoneInfluencers),n.push("#define BonesPerMesh "+(i.skeleton?i.skeleton.bones.length+1:0))):n.push("#define NUM_BONE_INFLUENCERS 0"),t&&(n.push("#define INSTANCES"),r.push("world0"),r.push("world1"),r.push("world2"),r.push("world3"));var a=n.join("\n");return this._cachedDefines!==a&&(this._cachedDefines=a,this._effect=this.scene.getEngine().createEffect("outline",r,["world","mBones","viewProjection","diffuseMatrix","offset","color","logarithmicDepthConstant"],["diffuseSampler"],a)),this._effect.isReady()},e.prototype._beforeRenderingMesh=function(t,n,r){if(this._savedDepthWrite=this._engine.getDepthWrite(),t.renderOutline){var i=n.getMaterial();i&&i.needAlphaBlending&&(this._engine.cacheStencilState(),this._engine.setDepthWrite(!1),this._engine.setColorWrite(!1),this._engine.setStencilBuffer(!0),this._engine.setStencilOperationPass(_.a.REPLACE),this._engine.setStencilFunction(_.a.ALWAYS),this._engine.setStencilMask(e._StencilReference),this._engine.setStencilFunctionReference(e._StencilReference),this.render(n,r,!0),this._engine.setColorWrite(!0),this._engine.setStencilFunction(_.a.NOTEQUAL)),this._engine.setDepthWrite(!1),this.render(n,r),this._engine.setDepthWrite(this._savedDepthWrite),i&&i.needAlphaBlending&&this._engine.restoreStencilState()}},e.prototype._afterRenderingMesh=function(e,t,n){if(e.renderOverlay){var r=this._engine.getAlphaMode();this._engine.setAlphaMode(_.a.ALPHA_COMBINE),this.render(t,n,!0),this._engine.setAlphaMode(r)}e.renderOutline&&this._savedDepthWrite&&(this._engine.setDepthWrite(!0),this._engine.setColorWrite(!1),this.render(t,n),this._engine.setColorWrite(!0))},e._StencilReference=4,e}(),ks=n(109),Us=function(){function e(e,t){this.name=e,this.color=new o.f(1,1,1,1),this.width=1,this.height=1,this.angle=0,this.cellIndex=0,this.invertU=0,this.invertV=0,this.animations=new Array,this.isPickable=!1,this._animationStarted=!1,this._loopAnimation=!1,this._fromIndex=0,this._toIndex=0,this._delay=0,this._direction=1,this._time=0,this.isVisible=!0,this._manager=t,this._manager.sprites.push(this),this.position=o.x.Zero()}return Object.defineProperty(e.prototype,"size",{get:function(){return this.width},set:function(e){this.width=e,this.height=e},enumerable:!0,configurable:!0}),e.prototype.playAnimation=function(e,t,n,r,i){this._fromIndex=e,this._toIndex=t,this._loopAnimation=n,this._delay=r,this._animationStarted=!0,e<t?this._direction=1:(this._direction=-1,this._toIndex=e,this._fromIndex=t),this.cellIndex=e,this._time=0,this._onAnimationEnd=i},e.prototype.stopAnimation=function(){this._animationStarted=!1},e.prototype._animate=function(e){this._animationStarted&&(this._time+=e,this._time>this._delay&&(this._time=this._time%this._delay,this.cellIndex+=this._direction,(this._direction>0&&this.cellIndex>this._toIndex||this._direction<0&&this.cellIndex<this._fromIndex)&&(this._loopAnimation?this.cellIndex=this._direction>0?this._fromIndex:this._toIndex:(this.cellIndex=this._toIndex,this._animationStarted=!1,this._onAnimationEnd&&this._onAnimationEnd(),this.disposeWhenFinishedAnimating&&this.dispose()))))},e.prototype.dispose=function(){for(var e=0;e<this._manager.sprites.length;e++)this._manager.sprites[e]==this&&this._manager.sprites.splice(e,1)},e}();H.a.prototype._internalPickSprites=function(e,t,n,r){if(!Kn.a)return null;var i=null;if(!r){if(!this.activeCamera)return null;r=this.activeCamera}if(this.spriteManagers.length>0)for(var o=0;o<this.spriteManagers.length;o++){var a=this.spriteManagers[o];if(a.isPickable){var s=a.intersects(e,r,t,n);if(s&&s.hit&&(n||null==i||!(s.distance>=i.distance))&&(i=s,n))break}}return i||new Kn.a},H.a.prototype.pickSprite=function(e,t,n,r,i){return this.createPickingRayInCameraSpaceToRef(e,t,this._tempSpritePickingRay,i),this._internalPickSprites(this._tempSpritePickingRay,n,r,i)},H.a.prototype.pickSpriteWithRay=function(e,t,n,r){if(!this._tempSpritePickingRay)return null;if(!r){if(!this.activeCamera)return null;r=this.activeCamera}return Ot.a.TransformToRef(e,r.getViewMatrix(),this._tempSpritePickingRay),this._internalPickSprites(this._tempSpritePickingRay,t,n,r)},H.a.prototype.setPointerOverSprite=function(e){this._pointerOverSprite!==e&&(this._pointerOverSprite&&this._pointerOverSprite.actionManager&&this._pointerOverSprite.actionManager.processTrigger(_.a.ACTION_OnPointerOutTrigger,u.a.CreateNewFromSprite(this._pointerOverSprite,this)),this._pointerOverSprite=e,this._pointerOverSprite&&this._pointerOverSprite.actionManager&&this._pointerOverSprite.actionManager.processTrigger(_.a.ACTION_OnPointerOverTrigger,u.a.CreateNewFromSprite(this._pointerOverSprite,this)))},H.a.prototype.getPointerOverSprite=function(){return this._pointerOverSprite};var Vs=function(){function e(e){this.name=xe.a.NAME_SPRITE,this.scene=e,this.scene.spriteManagers=new Array,this.scene._tempSpritePickingRay=Ot.a?Ot.a.Zero():null,this.scene.onBeforeSpritesRenderingObservable=new i.c,this.scene.onAfterSpritesRenderingObservable=new i.c,this._spritePredicate=function(e){return!!e.actionManager&&e.isPickable&&e.actionManager.hasPointerTriggers}}return e.prototype.register=function(){this.scene._pointerMoveStage.registerStep(xe.a.STEP_POINTERMOVE_SPRITE,this,this._pointerMove),this.scene._pointerDownStage.registerStep(xe.a.STEP_POINTERDOWN_SPRITE,this,this._pointerDown),this.scene._pointerUpStage.registerStep(xe.a.STEP_POINTERUP_SPRITE,this,this._pointerUp)},e.prototype.rebuild=function(){},e.prototype.dispose=function(){this.scene.onBeforeSpritesRenderingObservable.clear(),this.scene.onAfterSpritesRenderingObservable.clear();for(var e=this.scene.spriteManagers;e.length;)e[0].dispose()},e.prototype._pickSpriteButKeepRay=function(e,t,n,r,i){var o=this.scene.pickSprite(t,n,this._spritePredicate,r,i);return o&&(o.ray=e?e.ray:null),o},e.prototype._pointerMove=function(e,t,n,r,i){var o=this.scene;return r?o.setPointerOverSprite(null):(n=this._pickSpriteButKeepRay(n,e,t,!1,o.cameraToUseForPointers||void 0))&&n.hit&&n.pickedSprite?(o.setPointerOverSprite(n.pickedSprite),i.style.cursor=o._pointerOverSprite&&o._pointerOverSprite.actionManager&&o._pointerOverSprite.actionManager.hoverCursor?o._pointerOverSprite.actionManager.hoverCursor:o.hoverCursor):o.setPointerOverSprite(null),n},e.prototype._pointerDown=function(e,t,n,r){var i=this.scene;if(i._pickedDownSprite=null,i.spriteManagers.length>0&&(n=i.pickSprite(e,t,this._spritePredicate,!1,i.cameraToUseForPointers||void 0))&&n.hit&&n.pickedSprite&&n.pickedSprite.actionManager){switch(i._pickedDownSprite=n.pickedSprite,r.button){case 0:n.pickedSprite.actionManager.processTrigger(_.a.ACTION_OnLeftPickTrigger,u.a.CreateNewFromSprite(n.pickedSprite,i,r));break;case 1:n.pickedSprite.actionManager.processTrigger(_.a.ACTION_OnCenterPickTrigger,u.a.CreateNewFromSprite(n.pickedSprite,i,r));break;case 2:n.pickedSprite.actionManager.processTrigger(_.a.ACTION_OnRightPickTrigger,u.a.CreateNewFromSprite(n.pickedSprite,i,r))}n.pickedSprite.actionManager&&n.pickedSprite.actionManager.processTrigger(_.a.ACTION_OnPickDownTrigger,u.a.CreateNewFromSprite(n.pickedSprite,i,r))}return n},e.prototype._pointerUp=function(e,t,n,r){var i=this.scene;if(i.spriteManagers.length>0){var o=i.pickSprite(e,t,this._spritePredicate,!1,i.cameraToUseForPointers||void 0);o&&(o.hit&&o.pickedSprite&&o.pickedSprite.actionManager&&(o.pickedSprite.actionManager.processTrigger(_.a.ACTION_OnPickUpTrigger,u.a.CreateNewFromSprite(o.pickedSprite,i,r)),o.pickedSprite.actionManager&&(this.scene._inputManager._isPointerSwiping()||o.pickedSprite.actionManager.processTrigger(_.a.ACTION_OnPickTrigger,u.a.CreateNewFromSprite(o.pickedSprite,i,r)))),i._pickedDownSprite&&i._pickedDownSprite.actionManager&&i._pickedDownSprite!==o.pickedSprite&&i._pickedDownSprite.actionManager.processTrigger(_.a.ACTION_OnPickOutTrigger,u.a.CreateNewFromSprite(i._pickedDownSprite,i,r)))}return n},e}();jt.a.ShadersStore.spritesPixelShader="uniform bool alphaTest;\nvarying vec4 vColor;\n\nvarying vec2 vUV;\nuniform sampler2D diffuseSampler;\n\n#include<fogFragmentDeclaration>\nvoid main(void) {\nvec4 color=texture2D(diffuseSampler,vUV);\nif (alphaTest)\n{\nif (color.a<0.95)\ndiscard;\n}\ncolor*=vColor;\n#include<fogFragment>\ngl_FragColor=color;\n}",jt.a.ShadersStore.spritesVertexShader="\nattribute vec4 position;\nattribute vec4 options;\nattribute vec4 cellInfo;\nattribute vec4 color;\n\nuniform vec2 textureInfos;\nuniform mat4 view;\nuniform mat4 projection;\n\nvarying vec2 vUV;\nvarying vec4 vColor;\n#include<fogVertexDeclaration>\nvoid main(void) {\nvec3 viewPos=(view*vec4(position.xyz,1.0)).xyz;\nvec2 cornerPos;\nfloat angle=position.w;\nvec2 size=vec2(options.x,options.y);\nvec2 offset=options.zw;\nvec2 uvScale=textureInfos.xy;\ncornerPos=vec2(offset.x-0.5,offset.y-0.5)*size;\n\nvec3 rotatedCorner;\nrotatedCorner.x=cornerPos.x*cos(angle)-cornerPos.y*sin(angle);\nrotatedCorner.y=cornerPos.x*sin(angle)+cornerPos.y*cos(angle);\nrotatedCorner.z=0.;\n\nviewPos+=rotatedCorner;\ngl_Position=projection*vec4(viewPos,1.0);\n\nvColor=color;\n\nvec2 uvOffset=vec2(abs(offset.x-cellInfo.x),1.0-abs(offset.y-cellInfo.y));\nvUV=(uvOffset+cellInfo.zw)*uvScale;\n\n#ifdef FOG\nvFogDistance=viewPos;\n#endif\n}";var Gs,js=function(){function e(e,t,n,r,o,a,s){if(void 0===a&&(a=.01),void 0===s&&(s=Ge.a.TRILINEAR_SAMPLINGMODE),this.name=e,this.sprites=new Array,this.renderingGroupId=0,this.layerMask=268435455,this.fogEnabled=!0,this.isPickable=!1,this.onDisposeObservable=new i.c,this._vertexBuffers={},o._getComponent(xe.a.NAME_SPRITE)||o._addComponent(new Vs(o)),this._capacity=n,this._spriteTexture=new Ge.a(t,o,!0,!1,s),this._spriteTexture.wrapU=Ge.a.CLAMP_ADDRESSMODE,this._spriteTexture.wrapV=Ge.a.CLAMP_ADDRESSMODE,r.width&&r.height)this.cellWidth=r.width,this.cellHeight=r.height;else{if(void 0===r)return;this.cellWidth=r,this.cellHeight=r}this._epsilon=a,this._scene=o,this._scene.spriteManagers.push(this);for(var u=[],l=0,c=0;c<n;c++)u.push(l),u.push(l+1),u.push(l+2),u.push(l),u.push(l+2),u.push(l+3),l+=4;this._indexBuffer=o.getEngine().createIndexBuffer(u),this._vertexData=new Float32Array(16*n*4),this._buffer=new Mn.a(o.getEngine(),this._vertexData,!0,16);var h=this._buffer.createVertexBuffer(Mn.b.PositionKind,0,4),d=this._buffer.createVertexBuffer("options",4,4),f=this._buffer.createVertexBuffer("cellInfo",8,4),p=this._buffer.createVertexBuffer(Mn.b.ColorKind,12,4);this._vertexBuffers[Mn.b.PositionKind]=h,this._vertexBuffers.options=d,this._vertexBuffers.cellInfo=f,this._vertexBuffers[Mn.b.ColorKind]=p,this._effectBase=this._scene.getEngine().createEffect("sprites",[Mn.b.PositionKind,"options","cellInfo",Mn.b.ColorKind],["view","projection","textureInfos","alphaTest"],["diffuseSampler"],""),this._effectFog=this._scene.getEngine().createEffect("sprites",[Mn.b.PositionKind,"options","cellInfo",Mn.b.ColorKind],["view","projection","textureInfos","alphaTest","vFogInfos","vFogColor"],["diffuseSampler"],"#define FOG")}return Object.defineProperty(e.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._spriteTexture},set:function(e){this._spriteTexture=e},enumerable:!0,configurable:!0}),e.prototype._appendSpriteVertex=function(e,t,n,r,i){var o=16*e;0===n?n=this._epsilon:1===n&&(n=1-this._epsilon),0===r?r=this._epsilon:1===r&&(r=1-this._epsilon),this._vertexData[o]=t.position.x,this._vertexData[o+1]=t.position.y,this._vertexData[o+2]=t.position.z,this._vertexData[o+3]=t.angle,this._vertexData[o+4]=t.width,this._vertexData[o+5]=t.height,this._vertexData[o+6]=n,this._vertexData[o+7]=r,this._vertexData[o+8]=t.invertU?1:0,this._vertexData[o+9]=t.invertV?1:0;var a=t.cellIndex/i>>0;this._vertexData[o+10]=t.cellIndex-a*i,this._vertexData[o+11]=a,this._vertexData[o+12]=t.color.r,this._vertexData[o+13]=t.color.g,this._vertexData[o+14]=t.color.b,this._vertexData[o+15]=t.color.a},e.prototype.intersects=function(e,t,n,r){for(var i=Math.min(this._capacity,this.sprites.length),a=o.x.Zero(),s=o.x.Zero(),u=Number.MAX_VALUE,l=null,c=o.x.Zero(),h=o.x.Zero(),d=t.getViewMatrix(),f=0;f<i;f++){var p=this.sprites[f];if(p){if(n){if(!n(p))continue}else if(!p.isPickable)continue;if(o.x.TransformCoordinatesToRef(p.position,d,h),a.copyFromFloats(h.x-p.width/2,h.y-p.height/2,h.z),s.copyFromFloats(h.x+p.width/2,h.y+p.height/2,h.z),e.intersectsBoxMinMax(a,s)){var _=o.x.Distance(h,e.origin);if(u>_&&(u=_,l=p,r))break}}}if(l){var m=new Kn.a;d.invertToRef(o.t.Matrix[0]),m.hit=!0,m.pickedSprite=l,m.distance=u;var g=o.t.Vector3[0];return g.copyFrom(e.direction),g.normalize(),g.scaleInPlace(u),e.origin.addToRef(g,c),m.pickedPoint=o.x.TransformCoordinates(c,o.t.Matrix[0]),m}return null},e.prototype.render=function(){if(this._effectBase.isReady()&&this._effectFog.isReady()&&this._spriteTexture&&this._spriteTexture.isReady()&&this.sprites.length){for(var e=this._scene.getEngine(),t=this._spriteTexture.getBaseSize(),n=e.getDeltaTime(),r=Math.min(this._capacity,this.sprites.length),i=t.width/this.cellWidth,o=0,a=!0,s=0;s<r;s++){var u=this.sprites[s];u&&u.isVisible&&(a=!1,u._animate(n),this._appendSpriteVertex(o++,u,0,0,i),this._appendSpriteVertex(o++,u,1,0,i),this._appendSpriteVertex(o++,u,1,1,i),this._appendSpriteVertex(o++,u,0,1,i))}if(!a){this._buffer.update(this._vertexData);var l=this._effectBase;this._scene.fogEnabled&&this._scene.fogMode!==H.a.FOGMODE_NONE&&this.fogEnabled&&(l=this._effectFog),e.enableEffect(l);var c=this._scene.getViewMatrix();l.setTexture("diffuseSampler",this._spriteTexture),l.setMatrix("view",c),l.setMatrix("projection",this._scene.getProjectionMatrix()),l.setFloat2("textureInfos",this.cellWidth/t.width,this.cellHeight/t.height),this._scene.fogEnabled&&this._scene.fogMode!==H.a.FOGMODE_NONE&&this.fogEnabled&&(l.setFloat4("vFogInfos",this._scene.fogMode,this._scene.fogStart,this._scene.fogEnd,this._scene.fogDensity),l.setColor3("vFogColor",this._scene.fogColor)),e.bindBuffers(this._vertexBuffers,this._indexBuffer,l),e.setDepthFunctionToLessOrEqual(),l.setBool("alphaTest",!0),e.setColorWrite(!1),e.drawElementsType(Ci.a.TriangleFillMode,0,o/4*6),e.setColorWrite(!0),l.setBool("alphaTest",!1),e.setAlphaMode(_.a.ALPHA_COMBINE),e.drawElementsType(Ci.a.TriangleFillMode,0,o/4*6),e.setAlphaMode(_.a.ALPHA_DISABLE)}}},e.prototype.dispose=function(){this._buffer&&(this._buffer.dispose(),this._buffer=null),this._indexBuffer&&(this._scene.getEngine()._releaseBuffer(this._indexBuffer),this._indexBuffer=null),this._spriteTexture&&(this._spriteTexture.dispose(),this._spriteTexture=null);var e=this._scene.spriteManagers.indexOf(this);this._scene.spriteManagers.splice(e,1),this.onDisposeObservable.notifyObservers(this),this.onDisposeObservable.clear()},e}(),zs=n(94),Ys=n(104);!function(e){e[e.INIT=0]="INIT",e[e.RUNNING=1]="RUNNING",e[e.DONE=2]="DONE",e[e.ERROR=3]="ERROR"}(Gs||(Gs={}));var Hs,Ws=function(){function e(e){this.name=e,this._isCompleted=!1,this._taskState=Gs.INIT}return Object.defineProperty(e.prototype,"isCompleted",{get:function(){return this._isCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"taskState",{get:function(){return this._taskState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorObject",{get:function(){return this._errorObject},enumerable:!0,configurable:!0}),e.prototype._setErrorObject=function(e,t){this._errorObject||(this._errorObject={message:e,exception:t})},e.prototype.run=function(e,t,n){var r=this;this._taskState=Gs.RUNNING,this.runTask(e,function(){r.onDoneCallback(t,n)},function(e,t){r.onErrorCallback(n,e,t)})},e.prototype.runTask=function(e,t,n){throw new Error("runTask is not implemented")},e.prototype.reset=function(){this._taskState=Gs.INIT},e.prototype.onErrorCallback=function(e,t,n){this._taskState=Gs.ERROR,this._errorObject={message:t,exception:n},this.onError&&this.onError(this,t,n),e()},e.prototype.onDoneCallback=function(e,t){try{this._taskState=Gs.DONE,this._isCompleted=!0,this.onSuccess&&this.onSuccess(this),e()}catch(e){this.onErrorCallback(t,"Task is done, error executing success callback(s)",e)}},e}(),Xs=function(e,t,n){this.remainingCount=e,this.totalCount=t,this.task=n},Ks=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.name=t,o.meshesNames=n,o.rootUrl=r,o.sceneFilename=i,o}return l.d(t,e),t.prototype.runTask=function(e,t,n){var r=this;fr.ImportMesh(this.meshesNames,this.rootUrl,this.sceneFilename,e,function(e,n,i,o){r.loadedMeshes=e,r.loadedParticleSystems=n,r.loadedSkeletons=i,r.loadedAnimationGroups=o,t()},null,function(e,t,r){n(t,r)})},t}(Ws),Qs=function(e){function t(t,n){var r=e.call(this,t)||this;return r.name=t,r.url=n,r}return l.d(t,e),t.prototype.runTask=function(e,t,n){var r=this;e._loadFile(this.url,function(e){r.text=e,t()},void 0,!1,!1,function(e,t){e&&n(e.status+" "+e.statusText,t)})},t}(Ws),qs=function(e){function t(t,n){var r=e.call(this,t)||this;return r.name=t,r.url=n,r}return l.d(t,e),t.prototype.runTask=function(e,t,n){var r=this;e._loadFile(this.url,function(e){r.data=e,t()},void 0,!0,!0,function(e,t){e&&n(e.status+" "+e.statusText,t)})},t}(Ws),Zs=function(e){function t(t,n){var r=e.call(this,t)||this;return r.name=t,r.url=n,r}return l.d(t,e),t.prototype.runTask=function(e,t,n){var r=this,i=new Image;ye.h.SetCorsBehavior(this.url,i),i.onload=function(){r.image=i,t()},i.onerror=function(e){n("Error loading image",e)},i.src=this.url},t}(Ws),Js=function(e){function t(t,n,r,i,o){void 0===o&&(o=Ge.a.TRILINEAR_SAMPLINGMODE);var a=e.call(this,t)||this;return a.name=t,a.url=n,a.noMipmap=r,a.invertY=i,a.samplingMode=o,a}return l.d(t,e),t.prototype.runTask=function(e,t,n){this.texture=new Ge.a(this.url,e,this.noMipmap,this.invertY,this.samplingMode,function(){t()},function(e,t){n(e,t)})},t}(Ws),$s=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;return a.name=t,a.url=n,a.extensions=r,a.noMipmap=i,a.files=o,a}return l.d(t,e),t.prototype.runTask=function(e,t,n){this.texture=new Yr(this.url,e,this.extensions,this.noMipmap,this.files,function(){t()},function(e,t){n(e,t)})},t}(Ws),eu=function(e){function t(t,n,r,i,o,a,s){void 0===i&&(i=!1),void 0===o&&(o=!0),void 0===a&&(a=!1),void 0===s&&(s=!1);var u=e.call(this,t)||this;return u.name=t,u.url=n,u.size=r,u.noMipmap=i,u.generateHarmonics=o,u.gammaSpace=a,u.reserved=s,u}return l.d(t,e),t.prototype.runTask=function(e,t,n){this.texture=new Wi(this.url,e,this.size,this.noMipmap,this.generateHarmonics,this.gammaSpace,this.reserved,function(){t()},function(e,t){n(e,t)})},t}(Ws),tu=function(e){function t(t,n,r,i,o){void 0===i&&(i=!1),void 0===o&&(o=!0);var a=e.call(this,t)||this;return a.name=t,a.url=n,a.size=r,a.noMipmap=i,a.gammaSpace=o,a}return l.d(t,e),t.prototype.runTask=function(e,t,n){this.texture=new vo(this.url,e,this.size,this.noMipmap,this.gammaSpace,function(){t()},function(e,t){n(e,t)})},t}(Ws),nu=function(){function e(e){this._isLoading=!1,this._tasks=new Array,this._waitingTasksCount=0,this._totalTasksCount=0,this.onTaskSuccessObservable=new i.c,this.onTaskErrorObservable=new i.c,this.onTasksDoneObservable=new i.c,this.onProgressObservable=new i.c,this.useDefaultLoadingScreen=!0,this._scene=e}return e.prototype.addMeshTask=function(e,t,n,r){var i=new Ks(e,t,n,r);return this._tasks.push(i),i},e.prototype.addTextFileTask=function(e,t){var n=new Qs(e,t);return this._tasks.push(n),n},e.prototype.addBinaryFileTask=function(e,t){var n=new qs(e,t);return this._tasks.push(n),n},e.prototype.addImageTask=function(e,t){var n=new Zs(e,t);return this._tasks.push(n),n},e.prototype.addTextureTask=function(e,t,n,r,i){void 0===i&&(i=Ge.a.TRILINEAR_SAMPLINGMODE);var o=new Js(e,t,n,r,i);return this._tasks.push(o),o},e.prototype.addCubeTextureTask=function(e,t,n,r,i){var o=new $s(e,t,n,r,i);return this._tasks.push(o),o},e.prototype.addHDRCubeTextureTask=function(e,t,n,r,i,o,a){void 0===r&&(r=!1),void 0===i&&(i=!0),void 0===o&&(o=!1),void 0===a&&(a=!1);var s=new eu(e,t,n,r,i,o,a);return this._tasks.push(s),s},e.prototype.addEquiRectangularCubeTextureAssetTask=function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0);var o=new tu(e,t,n,r,i);return this._tasks.push(o),o},e.prototype.removeTask=function(e){var t=this._tasks.indexOf(e);t>-1&&this._tasks.splice(t,1)},e.prototype._decreaseWaitingTasksCount=function(e){this._waitingTasksCount--;try{this.onProgress&&this.onProgress(this._waitingTasksCount,this._totalTasksCount,e),this.onProgressObservable.notifyObservers(new Xs(this._waitingTasksCount,this._totalTasksCount,e))}catch(e){p.a.Error("Error running progress callbacks."),console.log(e)}if(0===this._waitingTasksCount){try{this.onFinish&&this.onFinish(this._tasks);for(var t=this._tasks.slice(),n=0,r=t;n<r.length;n++)if((e=r[n]).taskState===Gs.DONE){var i=this._tasks.indexOf(e);i>-1&&this._tasks.splice(i,1)}this.onTasksDoneObservable.notifyObservers(this._tasks)}catch(e){p.a.Error("Error running tasks-done callbacks."),console.log(e)}this._isLoading=!1,this._scene.getEngine().hideLoadingUI()}},e.prototype._runTask=function(e){var t=this,n=function(n,r){e._setErrorObject(n,r),t.onTaskError&&t.onTaskError(e),t.onTaskErrorObservable.notifyObservers(e),t._decreaseWaitingTasksCount(e)};e.run(this._scene,function(){try{t.onTaskSuccess&&t.onTaskSuccess(e),t.onTaskSuccessObservable.notifyObservers(e),t._decreaseWaitingTasksCount(e)}catch(e){n("Error executing task success callbacks",e)}},n)},e.prototype.reset=function(){return this._isLoading=!1,this._tasks=new Array,this},e.prototype.load=function(){if(this._isLoading)return this;if(this._isLoading=!0,this._waitingTasksCount=this._tasks.length,this._totalTasksCount=this._tasks.length,0===this._waitingTasksCount)return this._isLoading=!1,this.onFinish&&this.onFinish(this._tasks),this.onTasksDoneObservable.notifyObservers(this._tasks),this;this.useDefaultLoadingScreen&&this._scene.getEngine().displayLoadingUI();for(var e=0;e<this._tasks.length;e++){var t=this._tasks[e];t.taskState===Gs.INIT&&this._runTask(t)}return this},e.prototype.loadAsync=function(){var e=this;return new Promise(function(t,n){e.onTasksDoneObservable.addOnce(function(e){e&&e.length?n(e):t()})})},e}(),ru=function(){function e(){var e=this;this.promise=new Promise(function(t,n){e._resolve=t,e._reject=n})}return Object.defineProperty(e.prototype,"resolve",{get:function(){return this._resolve},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reject",{get:function(){return this._reject},enumerable:!0,configurable:!0}),e}(),iu=function(){function e(e,t){this._meshesOrigins=[],this._toCenterVectors=[],this._scaledDirection=o.x.Zero(),this._newPosition=o.x.Zero(),this._centerPosition=o.x.Zero(),this._meshes=e.slice(),t?this._centerMesh=t:this._setCenterMesh();var n=this._meshes.indexOf(this._centerMesh);n>=0&&this._meshes.splice(n,1),this._centerPosition=this._centerMesh.getAbsolutePosition().clone();for(var r=0;r<this._meshes.length;r++)if(this._meshes[r]){var i=this._meshes[r];this._meshesOrigins[r]=i.getAbsolutePosition().clone(),this._toCenterVectors[r]=o.x.Zero(),i._boundingInfo&&this._centerMesh._boundingInfo&&i._boundingInfo.boundingBox.centerWorld.subtractToRef(this._centerMesh._boundingInfo.boundingBox.centerWorld,this._toCenterVectors[r])}}return e.prototype._setCenterMesh=function(){for(var e=o.x.Zero(),t=o.x.Zero(),n=Number.MAX_VALUE,r=0;r<this._meshes.length;r++)this._meshes[r]&&(a=(i=this._meshes[r]).getBoundingInfo())&&t.addInPlace(a.boundingBox.centerWorld);for(e=t.scale(1/this._meshes.length),r=0;r<this._meshes.length;r++){var i,a;if(this._meshes[r]&&(a=(i=this._meshes[r]).getBoundingInfo())){var s=a.boundingBox.centerWorld.subtract(e).lengthSquared();s<n&&(this._centerMesh=i,n=s)}}},e.prototype.getClassName=function(){return"MeshExploder"},e.prototype.getMeshes=function(){var e=this._meshes.slice();return e.unshift(this._centerMesh),e},e.prototype.explode=function(e){void 0===e&&(e=1);for(var t=0;t<this._meshes.length;t++)this._meshes[t]&&this._meshesOrigins[t]&&this._toCenterVectors[t]&&(this._toCenterVectors[t].scaleToRef(e,this._scaledDirection),this._meshesOrigins[t].addToRef(this._scaledDirection,this._newPosition),this._meshes[t].setAbsolutePosition(this._newPosition));this._centerMesh.setAbsolutePosition(this._centerPosition)},e}(),ou=function(){function e(e,t,n,r,i,o,a,s,u){this.onProcessFileCallback=function(){return!0},this._engine=e,this._currentScene=t,this._sceneLoadedCallback=n,this._progressCallback=r,this._additionalRenderLoopLogicCallback=i,this._textureLoadingCallback=o,this._startingProcessingFilesCallback=a,this._onReloadCallback=s,this._errorCallback=u}return Object.defineProperty(e,"FilesToLoad",{get:function(){return cr.a.FilesToLoad},enumerable:!0,configurable:!0}),e.prototype.monitorElementForDragNDrop=function(e){var t=this;e&&(this._elementToMonitor=e,this._dragEnterHandler=function(e){t.drag(e)},this._dragOverHandler=function(e){t.drag(e)},this._dropHandler=function(e){t.drop(e)},this._elementToMonitor.addEventListener("dragenter",this._dragEnterHandler,!1),this._elementToMonitor.addEventListener("dragover",this._dragOverHandler,!1),this._elementToMonitor.addEventListener("drop",this._dropHandler,!1))},e.prototype.dispose=function(){this._elementToMonitor&&(this._elementToMonitor.removeEventListener("dragenter",this._dragEnterHandler),this._elementToMonitor.removeEventListener("dragover",this._dragOverHandler),this._elementToMonitor.removeEventListener("drop",this._dropHandler))},e.prototype.renderFunction=function(){if(this._additionalRenderLoopLogicCallback&&this._additionalRenderLoopLogicCallback(),this._currentScene){if(this._textureLoadingCallback){var e=this._currentScene.getWaitingItemsCount();e>0&&this._textureLoadingCallback(e)}this._currentScene.render()}},e.prototype.drag=function(e){e.stopPropagation(),e.preventDefault()},e.prototype.drop=function(e){e.stopPropagation(),e.preventDefault(),this.loadFiles(e)},e.prototype._traverseFolder=function(e,t,n,r){var i=this,o=e.createReader(),a=e.fullPath.replace(/^\//,"").replace(/(.+?)\/?$/,"$1/");o.readEntries(function(e){n.count+=e.length;for(var o=0,s=e;o<s.length;o++){var u=s[o];u.isFile?u.file(function(e){e.correctName=a+e.name,t.push(e),0==--n.count&&r()}):u.isDirectory&&i._traverseFolder(u,t,n,r)}--n.count&&r()})},e.prototype._processFiles=function(t){for(var n=0;n<t.length;n++){var r=t[n].correctName.toLowerCase(),i=r.split(".").pop();this.onProcessFileCallback(t[n],r,i)&&("babylon"!==i&&"stl"!==i&&"obj"!==i&&"gltf"!==i&&"glb"!==i||-1!==r.indexOf(".binary.babylon")||-1!==r.indexOf(".incremental.babylon")||(this._sceneFileToLoad=t[n]),e.FilesToLoad[r]=t[n])}},e.prototype.loadFiles=function(e){var t=this;if(e&&e.dataTransfer&&e.dataTransfer.files&&(this._filesToLoad=e.dataTransfer.files),e&&e.target&&e.target.files&&(this._filesToLoad=e.target.files),this._filesToLoad&&0!==this._filesToLoad.length&&(this._startingProcessingFilesCallback&&this._startingProcessingFilesCallback(this._filesToLoad),this._filesToLoad&&this._filesToLoad.length>0)){for(var n=new Array,r=[],i=e.dataTransfer?e.dataTransfer.items:null,o=0;o<this._filesToLoad.length;o++){var a=this._filesToLoad[o],s=a.name.toLowerCase(),u=void 0;if(a.correctName=s,i){var l=i[o];l.getAsEntry?u=l.getAsEntry():l.webkitGetAsEntry&&(u=l.webkitGetAsEntry())}u&&u.isDirectory?r.push(u):n.push(a)}if(0===r.length)this._processFiles(n),this._processReload();else for(var c={count:r.length},h=0,d=r;h<d.length;h++)this._traverseFolder(d[h],n,c,function(){t._processFiles(n),0===c.count&&t._processReload()})}},e.prototype._processReload=function(){this._onReloadCallback?this._onReloadCallback(this._sceneFileToLoad):this.reload()},e.prototype.reload=function(){var e=this;this._sceneFileToLoad?(this._currentScene&&(p.a.errorsCount>0&&p.a.ClearLogCache(),this._engine.stopRenderLoop()),fr.LoadAsync("file:",this._sceneFileToLoad,this._engine,function(t){e._progressCallback&&e._progressCallback(t)}).then(function(t){e._currentScene&&e._currentScene.dispose(),e._currentScene=t,e._sceneLoadedCallback&&e._sceneLoadedCallback(e._sceneFileToLoad,e._currentScene),e._currentScene.executeWhenReady(function(){e._engine.runRenderLoop(function(){e.renderFunction()})})}).catch(function(t){e._errorCallback&&e._errorCallback(e._sceneFileToLoad,e._currentScene,t.message)})):p.a.Error("Please provide a valid .babylon file.")},e}(),au=n(105),su=n(106),uu=function(){function e(e){void 0===e&&(e=0),this.priority=e}return e.prototype.getDescription=function(){return""},e.prototype.apply=function(e,t){return!0},e}(),lu=function(e){function t(t,n,r){void 0===t&&(t=0),void 0===n&&(n=1024),void 0===r&&(r=.5);var i=e.call(this,t)||this;return i.priority=t,i.maximumSize=n,i.step=r,i}return l.d(t,e),t.prototype.getDescription=function(){return"Reducing render target texture size to "+this.maximumSize},t.prototype.apply=function(e,t){for(var n=!0,r=0;r<e.textures.length;r++){var i=e.textures[r];if(i.canRescale&&!i.getContext){var o=i.getSize();Math.max(o.width,o.height)>this.maximumSize&&(i.scale(this.step),n=!1)}}return n},t}(uu),cu=function(e){function t(t,n,r){void 0===t&&(t=0),void 0===n&&(n=2),void 0===r&&(r=.25);var i=e.call(this,t)||this;return i.priority=t,i.maximumScale=n,i.step=r,i._currentScale=-1,i._directionOffset=1,i}return l.d(t,e),t.prototype.getDescription=function(){return"Setting hardware scaling level to "+this._currentScale},t.prototype.apply=function(e,t){return-1===this._currentScale&&(this._currentScale=e.getEngine().getHardwareScalingLevel(),this._currentScale>this.maximumScale&&(this._directionOffset=-1)),this._currentScale+=this._directionOffset*this.step,e.getEngine().setHardwareScalingLevel(this._currentScale),1===this._directionOffset?this._currentScale>=this.maximumScale:this._currentScale<=this.maximumScale},t}(uu),hu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.getDescription=function(){return"Turning shadows on/off"},t.prototype.apply=function(e,t){return e.shadowsEnabled=t.isInImprovementMode,!0},t}(uu),du=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.getDescription=function(){return"Turning post-processes on/off"},t.prototype.apply=function(e,t){return e.postProcessesEnabled=t.isInImprovementMode,!0},t}(uu),fu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.getDescription=function(){return"Turning lens flares on/off"},t.prototype.apply=function(e,t){return e.lensFlaresEnabled=t.isInImprovementMode,!0},t}(uu),pu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.getDescription=function(){return this.onGetDescription?this.onGetDescription():"Running user defined callback"},t.prototype.apply=function(e,t){return!this.onApply||this.onApply(e,t)},t}(uu),_u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.getDescription=function(){return"Turning particles on/off"},t.prototype.apply=function(e,t){return e.particlesEnabled=t.isInImprovementMode,!0},t}(uu),mu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return l.d(t,e),t.prototype.getDescription=function(){return"Turning render targets off"},t.prototype.apply=function(e,t){return e.renderTargetsEnabled=t.isInImprovementMode,!0},t}(uu),gu=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._canBeMerged=function(e){if(!(e instanceof fe.a))return!1;var t=e;return!(t.isDisposed()||!t.isVisible||!t.isEnabled()||t.instances.length>0||t.skeleton||t.hasLODLevels)},t}return l.d(t,e),Object.defineProperty(t,"UpdateSelectionTree",{get:function(){return t._UpdateSelectionTree},set:function(e){t._UpdateSelectionTree=e},enumerable:!0,configurable:!0}),t.prototype.getDescription=function(){return"Merging similar meshes together"},t.prototype.apply=function(e,n,r){for(var i=e.meshes.slice(0),o=i.length,a=0;a<o;a++){var s=new Array,u=i[a];if(this._canBeMerged(u)){s.push(u);for(var l=a+1;l<o;l++){var c=i[l];this._canBeMerged(c)&&c.material===u.material&&c.checkCollisions===u.checkCollisions&&(s.push(c),o--,i.splice(l,1),l--)}s.length<2||fe.a.MergeMeshes(s,void 0,!0)}}var h=e;return h.createOrUpdateSelectionOctree&&(null!=r?r&&h.createOrUpdateSelectionOctree():t.UpdateSelectionTree&&h.createOrUpdateSelectionOctree()),!0},t._UpdateSelectionTree=!1,t}(uu),vu=function(){function e(e,t){void 0===e&&(e=60),void 0===t&&(t=2e3),this.targetFrameRate=e,this.trackerDuration=t,this.optimizations=new Array}return e.prototype.addOptimization=function(e){return this.optimizations.push(e),this},e.prototype.addCustomOptimization=function(e,t,n){void 0===n&&(n=0);var r=new pu(n);return r.onApply=e,r.onGetDescription=t,this.optimizations.push(r),this},e.LowDegradationAllowed=function(t){var n=new e(t),r=0;return n.addOptimization(new gu(r)),n.addOptimization(new hu(r)),n.addOptimization(new fu(r)),n.addOptimization(new du(++r)),n.addOptimization(new _u(r)),n.addOptimization(new lu(++r,1024)),n},e.ModerateDegradationAllowed=function(t){var n=new e(t),r=0;return n.addOptimization(new gu(r)),n.addOptimization(new hu(r)),n.addOptimization(new fu(r)),n.addOptimization(new du(++r)),n.addOptimization(new _u(r)),n.addOptimization(new lu(++r,512)),n.addOptimization(new mu(++r)),n.addOptimization(new cu(++r,2)),n},e.HighDegradationAllowed=function(t){var n=new e(t),r=0;return n.addOptimization(new gu(r)),n.addOptimization(new hu(r)),n.addOptimization(new fu(r)),n.addOptimization(new du(++r)),n.addOptimization(new _u(r)),n.addOptimization(new lu(++r,256)),n.addOptimization(new mu(++r)),n.addOptimization(new cu(++r,4)),n},e}(),yu=function(){function e(e,t,n,r){var o=this;if(void 0===n&&(n=!0),void 0===r&&(r=!1),this._isRunning=!1,this._currentPriorityLevel=0,this._targetFrameRate=60,this._trackerDuration=2e3,this._currentFrameRate=0,this._improvementMode=!1,this.onSuccessObservable=new i.c,this.onNewOptimizationAppliedObservable=new i.c,this.onFailureObservable=new i.c,this._options=t||new vu,this._options.targetFrameRate&&(this._targetFrameRate=this._options.targetFrameRate),this._options.trackerDuration&&(this._trackerDuration=this._options.trackerDuration),n)for(var a=0,s=0,u=this._options.optimizations;s<u.length;s++)u[s].priority=a++;this._improvementMode=r,this._scene=e||S.a.LastCreatedScene,this._sceneDisposeObserver=this._scene.onDisposeObservable.add(function(){o._sceneDisposeObserver=null,o.dispose()})}return Object.defineProperty(e.prototype,"isInImprovementMode",{get:function(){return this._improvementMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentPriorityLevel",{get:function(){return this._currentPriorityLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentFrameRate",{get:function(){return this._currentFrameRate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetFrameRate",{get:function(){return this._targetFrameRate},set:function(e){this._targetFrameRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trackerDuration",{get:function(){return this._trackerDuration},set:function(e){this._trackerDuration=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"optimizations",{get:function(){return this._options.optimizations},enumerable:!0,configurable:!0}),e.prototype.stop=function(){this._isRunning=!1},e.prototype.reset=function(){this._currentPriorityLevel=0},e.prototype.start=function(){var e=this;this._isRunning||(this._isRunning=!0,this._scene.executeWhenReady(function(){setTimeout(function(){e._checkCurrentState()},e._trackerDuration)}))},e.prototype._checkCurrentState=function(){var e=this;if(this._isRunning){var t=this._scene,n=this._options;if(this._currentFrameRate=Math.round(t.getEngine().getFps()),this._improvementMode&&this._currentFrameRate<=this._targetFrameRate||!this._improvementMode&&this._currentFrameRate>=this._targetFrameRate)return this._isRunning=!1,void this.onSuccessObservable.notifyObservers(this);for(var r=!0,i=!0,o=0;o<n.optimizations.length;o++){var a=n.optimizations[o];a.priority===this._currentPriorityLevel&&(i=!1,r=r&&a.apply(t,this),this.onNewOptimizationAppliedObservable.notifyObservers(a))}if(i)return this._isRunning=!1,void this.onFailureObservable.notifyObservers(this);r&&this._currentPriorityLevel++,t.executeWhenReady(function(){setTimeout(function(){e._checkCurrentState()},e._trackerDuration)})}},e.prototype.dispose=function(){this.stop(),this.onSuccessObservable.clear(),this.onFailureObservable.clear(),this.onNewOptimizationAppliedObservable.clear(),this._sceneDisposeObserver&&this._scene.onDisposeObservable.remove(this._sceneDisposeObserver)},e.OptimizeAsync=function(t,n,r,i){var o=new e(t,n||vu.ModerateDegradationAllowed(),!1);return r&&o.onSuccessObservable.add(function(){r()}),i&&o.onFailureObservable.add(function(){i()}),o.start(),o},e}(),bu=[],Tu=function(e,t){bu[e.id]||e.doNotSerialize||(t.vertexData.push(e.serializeVerticeData()),bu[e.id]=!0)},Eu=function(e,t){var n={},r=e._geometry;return r&&(e.getScene().getGeometryByID(r.id)||Tu(r,t.geometries)),e.serialize&&e.serialize(n),n},xu=function(){function e(){}return e.ClearCache=function(){bu=[]},e.Serialize=function(t){var n,r,i,o={};if(e.ClearCache(),o.useDelayedTextureLoading=t.useDelayedTextureLoading,o.autoClear=t.autoClear,o.clearColor=t.clearColor.asArray(),o.ambientColor=t.ambientColor.asArray(),o.gravity=t.gravity.asArray(),o.collisionsEnabled=t.collisionsEnabled,t.fogMode&&0!==t.fogMode&&(o.fogMode=t.fogMode,o.fogColor=t.fogColor.asArray(),o.fogStart=t.fogStart,o.fogEnd=t.fogEnd,o.fogDensity=t.fogDensity),t.isPhysicsEnabled()){var a=t.getPhysicsEngine();a&&(o.physicsEnabled=!0,o.physicsGravity=a.gravity.asArray(),o.physicsEngine=a.getPhysicsPluginName())}t.metadata&&(o.metadata=t.metadata),o.morphTargetManagers=[];for(var s=0,u=t.meshes;s<u.length;s++){var l=(p=u[s]).morphTargetManager;l&&o.morphTargetManagers.push(l.serialize())}for(o.lights=[],n=0;n<t.lights.length;n++)(r=t.lights[n]).doNotSerialize||o.lights.push(r.serialize());for(o.cameras=[],n=0;n<t.cameras.length;n++){var c=t.cameras[n];c.doNotSerialize||o.cameras.push(c.serialize())}if(t.activeCamera&&(o.activeCameraID=t.activeCamera.id),L.a.AppendSerializedAnimations(t,o),t.reflectionProbes&&t.reflectionProbes.length>0)for(o.reflectionProbes=[],n=0;n<t.reflectionProbes.length;n++)o.reflectionProbes.push(t.reflectionProbes[n].serialize());for(o.materials=[],o.multiMaterials=[],n=0;n<t.materials.length;n++)(i=t.materials[n]).doNotSerialize||o.materials.push(i.serialize());for(o.multiMaterials=[],n=0;n<t.multiMaterials.length;n++)o.multiMaterials.push(t.multiMaterials[n].serialize());for(t.environmentTexture&&(o.environmentTexture=t.environmentTexture.name),o.skeletons=[],n=0;n<t.skeletons.length;n++){var h=t.skeletons[n];h.doNotSerialize||o.skeletons.push(h.serialize())}for(o.transformNodes=[],n=0;n<t.transformNodes.length;n++)o.transformNodes.push(t.transformNodes[n].serialize());o.geometries={},o.geometries.boxes=[],o.geometries.spheres=[],o.geometries.cylinders=[],o.geometries.toruses=[],o.geometries.grounds=[],o.geometries.planes=[],o.geometries.torusKnots=[],o.geometries.vertexData=[],bu=[];var d=t.getGeometries();for(n=0;n<d.length;n++){var f=d[n];f.isReady()&&Tu(f,o.geometries)}for(o.meshes=[],n=0;n<t.meshes.length;n++){var p;(p=t.meshes[n])instanceof fe.a&&(p.doNotSerialize||p.delayLoadState!==_.a.DELAYLOADSTATE_LOADED&&p.delayLoadState!==_.a.DELAYLOADSTATE_NONE||o.meshes.push(Eu(p,o)))}for(o.particleSystems=[],n=0;n<t.particleSystems.length;n++)o.particleSystems.push(t.particleSystems[n].serialize());t.actionManager&&(o.actions=t.actionManager.serialize("scene"));for(var m=0,g=t._serializableComponents;m<g.length;m++)g[m].serialize(o);return o},e.SerializeMesh=function(t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!1);var i={};if(e.ClearCache(),t=t instanceof Array?t:[t],n||r)for(var o=0;o<t.length;++o)r&&t[o].getDescendants().forEach(function(e){e instanceof fe.a&&t.indexOf(e)<0&&t.push(e)}),n&&t[o].parent&&t.indexOf(t[o].parent)<0&&t.push(t[o].parent);return t.forEach(function(e){!function(e,t){if(e.delayLoadState===_.a.DELAYLOADSTATE_LOADED||e.delayLoadState===_.a.DELAYLOADSTATE_NONE){if(e.material)if(e.material instanceof zi.a){if(t.multiMaterials=t.multiMaterials||[],t.materials=t.materials||[],!t.multiMaterials.some(function(t){return t.id===e.material.id})){t.multiMaterials.push(e.material.serialize());for(var n=function(e){e&&(t.materials.some(function(t){return t.id===e.id})||t.materials.push(e.serialize()))},r=0,i=e.material.subMaterials;r<i.length;r++)n(i[r])}}else t.materials=t.materials||[],t.materials.some(function(t){return t.id===e.material.id})||t.materials.push(e.material.serialize());var o=e._geometry;o&&(t.geometries||(t.geometries={},t.geometries.boxes=[],t.geometries.spheres=[],t.geometries.cylinders=[],t.geometries.toruses=[],t.geometries.grounds=[],t.geometries.planes=[],t.geometries.torusKnots=[],t.geometries.vertexData=[]),Tu(o,t.geometries)),e.skeleton&&(t.skeletons=t.skeletons||[],t.skeletons.push(e.skeleton.serialize())),t.meshes=t.meshes||[],t.meshes.push(Eu(e,t))}}(e,i)}),i},e}(),Mu=n(29),Au=function(){function e(){}return e.CreateResizedCopy=function(e,t,n,r){void 0===r&&(r=!0);var i=e.getScene(),o=i.getEngine(),a=new ln("resized"+e.name,{width:t,height:n},i,!e.noMipmap,!0,e._texture.type,!1,e.samplingMode,!1);a.wrapU=e.wrapU,a.wrapV=e.wrapV,a.uOffset=e.uOffset,a.vOffset=e.vOffset,a.uScale=e.uScale,a.vScale=e.vScale,a.uAng=e.uAng,a.vAng=e.vAng,a.wAng=e.wAng,a.coordinatesIndex=e.coordinatesIndex,a.level=e.level,a.anisotropicFilteringLevel=e.anisotropicFilteringLevel,a._texture.isReady=!1,e.wrapU=Ge.a.CLAMP_ADDRESSMODE,e.wrapV=Ge.a.CLAMP_ADDRESSMODE;var s=new Yt("pass",1,null,r?Ge.a.BILINEAR_SAMPLINGMODE:Ge.a.NEAREST_SAMPLINGMODE,o,!1,_.a.TEXTURETYPE_UNSIGNED_INT);return s.getEffect().executeWhenCompiled(function(){s.onApply=function(t){t.setTexture("textureSampler",e)};var t=a.getInternalTexture();t&&(i.postProcessManager.directRender([s],t),o.unBindFramebuffer(t),a.disposeFramebufferObjects(),s.dispose(),t.isReady=!0)}),a},e}(),Su=function(){function e(t,n){if(void 0===n&&(n=null),!e.IsSupported(t))throw"Your browser does not support recording so far.";var r=t.getRenderingCanvas();if(!r)throw"The babylon engine must have a canvas to be recorded";this._canvas=r,this._canvas.isRecording=!1,this._options=l.a({},e._defaultOptions,n);var i=this._canvas.captureStream(this._options.fps);if(this._options.audioTracks)for(var o=0,a=this._options.audioTracks;o<a.length;o++)i.addTrack(a[o]);this._mediaRecorder=new MediaRecorder(i,{mimeType:this._options.mimeType}),this._mediaRecorder.ondataavailable=this._handleDataAvailable.bind(this),this._mediaRecorder.onerror=this._handleError.bind(this),this._mediaRecorder.onstop=this._handleStop.bind(this)}return e.IsSupported=function(e){var t=e.getRenderingCanvas();return!!t&&"function"==typeof t.captureStream},Object.defineProperty(e.prototype,"isRecording",{get:function(){return!!this._canvas&&this._canvas.isRecording},enumerable:!0,configurable:!0}),e.prototype.stopRecording=function(){this._canvas&&this._mediaRecorder&&this.isRecording&&(this._canvas.isRecording=!1,this._mediaRecorder.stop())},e.prototype.startRecording=function(e,t){var n=this;if(void 0===e&&(e="babylonjs.webm"),void 0===t&&(t=7),!this._canvas||!this._mediaRecorder)throw"Recorder has already been disposed";if(this.isRecording)throw"Recording already in progress";return t>0&&setTimeout(function(){n.stopRecording()},1e3*t),this._fileName=e,this._recordedChunks=[],this._resolve=null,this._reject=null,this._canvas.isRecording=!0,this._mediaRecorder.start(this._options.recordChunckSize),new Promise(function(e,t){n._resolve=e,n._reject=t})},e.prototype.dispose=function(){this._canvas=null,this._mediaRecorder=null,this._recordedChunks=[],this._fileName=null,this._resolve=null,this._reject=null},e.prototype._handleDataAvailable=function(e){e.data.size>0&&this._recordedChunks.push(e.data)},e.prototype._handleError=function(e){if(this.stopRecording(),!this._reject)throw new e.error;this._reject(e.error)},e.prototype._handleStop=function(){this.stopRecording();var e=new Blob(this._recordedChunks);this._resolve&&this._resolve(e),window.URL.createObjectURL(e),this._fileName&&ye.h.Download(e,this._fileName)},e._defaultOptions={mimeType:"video/webm",fps:25,recordChunckSize:3e3},e}(),Cu=function(){function e(){}return e.CreateScreenshot=function(e,t,n,r,i){var o,a;if(void 0===i&&(i="image/png"),n.precision)o=Math.round(e.getRenderWidth()*n.precision),a=Math.round(o/e.getAspectRatio(t));else if(n.width&&n.height)o=n.width,a=n.height;else if(n.width&&!n.height)o=n.width,a=Math.round(o/e.getAspectRatio(t));else if(n.height&&!n.width)a=n.height,o=Math.round(a*e.getAspectRatio(t));else{if(isNaN(n))return void p.a.Error("Invalid 'size' parameter !");a=n,o=n}ye.h._ScreenshotCanvas||(ye.h._ScreenshotCanvas=document.createElement("canvas")),ye.h._ScreenshotCanvas.width=o,ye.h._ScreenshotCanvas.height=a;var s=ye.h._ScreenshotCanvas.getContext("2d"),u=e.getRenderWidth()/e.getRenderHeight(),l=o,c=l/u;c>a&&(l=(c=a)*u);var h=Math.max(0,o-l)/2,d=Math.max(0,a-c)/2,f=e.getRenderingCanvas();s&&f&&s.drawImage(f,h,d,l,c),ye.h.EncodeScreenshotCanvasData(r,i)},e.CreateScreenshotUsingRenderTarget=function(e,t,n,r,i,o,a,s){var u,l;if(void 0===i&&(i="image/png"),void 0===o&&(o=1),void 0===a&&(a=!1),n.precision)u=Math.round(e.getRenderWidth()*n.precision),l=Math.round(u/e.getAspectRatio(t)),n={width:u,height:l};else if(n.width&&n.height)u=n.width,l=n.height;else if(n.width&&!n.height)u=n.width,l=Math.round(u/e.getAspectRatio(t)),n={width:u,height:l};else if(n.height&&!n.width)l=n.height,n={width:u=Math.round(l*e.getAspectRatio(t)),height:l};else{if(isNaN(n))return void p.a.Error("Invalid 'size' parameter !");l=n,u=n}var c=t.getScene(),h=null;c.activeCamera!==t&&(h=c.activeCamera,c.activeCamera=t);var d=e.getRenderingCanvas();if(d){var f={width:d.width,height:d.height};e.setSize(u,l),c.render();var m=new ln("screenShot",n,c,!1,!1,_.a.TEXTURETYPE_UNSIGNED_INT,!1,Ge.a.NEAREST_SAMPLINGMODE);m.renderList=null,m.samples=o,a&&m.addPostProcess(new ds("antialiasing",1,c.activeCamera)),m.onAfterRenderObservable.add(function(){ye.h.DumpFramebuffer(u,l,e,r,i,s)}),c.incrementRenderId(),c.resetCachedMaterial(),m.render(!0),m.dispose(),h&&(c.activeCamera=h),e.setSize(f.width,f.height),t.getProjectionMatrix(!0)}else p.a.Error("No rendering canvas found !")},e}();ye.h.CreateScreenshot=Cu.CreateScreenshot,ye.h.CreateScreenshotUsingRenderTarget=Cu.CreateScreenshotUsingRenderTarget,function(e){e[e.Checkbox=0]="Checkbox",e[e.Slider=1]="Slider",e[e.Vector3=2]="Vector3",e[e.Quaternion=3]="Quaternion",e[e.Color3=4]="Color3"}(Hs||(Hs={})),n.d(t,"AbstractScene",function(){return r.a}),n.d(t,"Action",function(){return s}),n.d(t,"ActionEvent",function(){return u.a}),n.d(t,"ActionManager",function(){return P}),n.d(t,"Condition",function(){return c}),n.d(t,"ValueCondition",function(){return h}),n.d(t,"PredicateCondition",function(){return d}),n.d(t,"StateCondition",function(){return f}),n.d(t,"SwitchBooleanAction",function(){return m}),n.d(t,"SetStateAction",function(){return g}),n.d(t,"SetValueAction",function(){return v}),n.d(t,"IncrementValueAction",function(){return y}),n.d(t,"PlayAnimationAction",function(){return b}),n.d(t,"StopAnimationAction",function(){return T}),n.d(t,"DoNothingAction",function(){return E}),n.d(t,"CombineAction",function(){return x}),n.d(t,"ExecuteCodeAction",function(){return M}),n.d(t,"SetParentAction",function(){return A}),n.d(t,"PlaySoundAction",function(){return R}),n.d(t,"StopSoundAction",function(){return D}),n.d(t,"InterpolateValueAction",function(){return k}),n.d(t,"Animatable",function(){return Q}),n.d(t,"_IAnimationState",function(){return N}),n.d(t,"Animation",function(){return B}),n.d(t,"TargetedAnimation",function(){return q}),n.d(t,"AnimationGroup",function(){return Z}),n.d(t,"AnimationPropertiesOverride",function(){return J}),n.d(t,"EasingFunction",function(){return $}),n.d(t,"CircleEase",function(){return ee}),n.d(t,"BackEase",function(){return te}),n.d(t,"BounceEase",function(){return ne}),n.d(t,"CubicEase",function(){return re}),n.d(t,"ElasticEase",function(){return ie}),n.d(t,"ExponentialEase",function(){return oe}),n.d(t,"PowerEase",function(){return ae}),n.d(t,"QuadraticEase",function(){return se}),n.d(t,"QuarticEase",function(){return ue}),n.d(t,"QuinticEase",function(){return le}),n.d(t,"SineEase",function(){return ce}),n.d(t,"BezierCurveEase",function(){return he}),n.d(t,"RuntimeAnimation",function(){return Y}),n.d(t,"AnimationEvent",function(){return de}),n.d(t,"AnimationKeyInterpolation",function(){return O}),n.d(t,"AnimationRange",function(){return I}),n.d(t,"KeepAssets",function(){return pe}),n.d(t,"AssetContainer",function(){return _e}),n.d(t,"Analyser",function(){return ge}),n.d(t,"AudioEngine",function(){return ve}),n.d(t,"AudioSceneComponent",function(){return Me}),n.d(t,"Sound",function(){return Te}),n.d(t,"SoundTrack",function(){return Ee}),n.d(t,"WeightedSound",function(){return Ae}),n.d(t,"AutoRotationBehavior",function(){return Ce}),n.d(t,"BouncingBehavior",function(){return Pe}),n.d(t,"FramingBehavior",function(){return Re}),n.d(t,"AttachToBoxBehavior",function(){return Oe}),n.d(t,"FadeInOutBehavior",function(){return we}),n.d(t,"MultiPointerScaleBehavior",function(){return Ie}),n.d(t,"PointerDragBehavior",function(){return Le.a}),n.d(t,"SixDofDragBehavior",function(){return ke}),n.d(t,"Bone",function(){return K}),n.d(t,"BoneIKController",function(){return Ue}),n.d(t,"BoneLookController",function(){return Ve}),n.d(t,"Skeleton",function(){return Ye}),n.d(t,"CameraInputTypes",function(){return He}),n.d(t,"CameraInputsManager",function(){return We}),n.d(t,"Camera",function(){return Ne.a}),n.d(t,"TargetCamera",function(){return yt}),n.d(t,"FreeCamera",function(){return bt}),n.d(t,"FreeCameraInputsManager",function(){return dt}),n.d(t,"TouchCamera",function(){return Tt}),n.d(t,"ArcRotateCamera",function(){return Et}),n.d(t,"ArcRotateCameraInputsManager",function(){return nt}),n.d(t,"DeviceOrientationCamera",function(){return xt}),n.d(t,"FlyCamera",function(){return At}),n.d(t,"FlyCameraInputsManager",function(){return Mt}),n.d(t,"FollowCamera",function(){return Pt}),n.d(t,"ArcFollowCamera",function(){return Rt}),n.d(t,"GamepadCamera",function(){return Vt}),n.d(t,"UniversalCamera",function(){return Ut}),n.d(t,"VirtualJoysticksCamera",function(){return nn}),n.d(t,"ArcRotateCameraGamepadInput",function(){return qe}),n.d(t,"ArcRotateCameraKeyboardMoveInput",function(){return Je}),n.d(t,"ArcRotateCameraMouseWheelInput",function(){return $e}),n.d(t,"ArcRotateCameraPointersInput",function(){return tt}),n.d(t,"ArcRotateCameraVRDeviceOrientationInput",function(){return rt}),n.d(t,"FlyCameraKeyboardInput",function(){return it}),n.d(t,"FlyCameraMouseInput",function(){return ot}),n.d(t,"FollowCameraKeyboardMoveInput",function(){return at}),n.d(t,"FollowCameraMouseWheelInput",function(){return st}),n.d(t,"FollowCameraPointersInput",function(){return ut}),n.d(t,"FreeCameraDeviceOrientationInput",function(){return ft}),n.d(t,"FreeCameraGamepadInput",function(){return pt}),n.d(t,"FreeCameraKeyboardMoveInput",function(){return lt}),n.d(t,"FreeCameraMouseInput",function(){return ct}),n.d(t,"FreeCameraTouchInput",function(){return ht}),n.d(t,"FreeCameraVirtualJoystickInput",function(){return vt}),n.d(t,"AnaglyphArcRotateCamera",function(){return Xt}),n.d(t,"AnaglyphFreeCamera",function(){return Kt}),n.d(t,"AnaglyphGamepadCamera",function(){return Qt}),n.d(t,"AnaglyphUniversalCamera",function(){return qt}),n.d(t,"StereoscopicArcRotateCamera",function(){return Jt}),n.d(t,"StereoscopicFreeCamera",function(){return $t}),n.d(t,"StereoscopicGamepadCamera",function(){return en}),n.d(t,"StereoscopicUniversalCamera",function(){return tn}),n.d(t,"VRCameraMetrics",function(){return rn}),n.d(t,"VRDeviceOrientationArcRotateCamera",function(){return dn}),n.d(t,"VRDeviceOrientationFreeCamera",function(){return fn}),n.d(t,"VRDeviceOrientationGamepadCamera",function(){return pn}),n.d(t,"OnAfterEnteringVRObservableEvent",function(){return Ln}),n.d(t,"VRExperienceHelper",function(){return In}),n.d(t,"WebVRFreeCamera",function(){return mn}),n.d(t,"WebXRCamera",function(){return Fn}),n.d(t,"WebXREnterExitUIButton",function(){return Un}),n.d(t,"WebXREnterExitUIOptions",function(){return Vn}),n.d(t,"WebXREnterExitUI",function(){return Gn}),n.d(t,"WebXRState",function(){return Cn}),n.d(t,"WebXRExperienceHelper",function(){return kn}),n.d(t,"WebXRController",function(){return jn}),n.d(t,"WebXRInput",function(){return zn}),n.d(t,"WebXRManagedOutputCanvas",function(){return Yn}),n.d(t,"WebXRSessionManager",function(){return Nn}),n.d(t,"Collider",function(){return Wn}),n.d(t,"DefaultCollisionCoordinator",function(){return Xn}),n.d(t,"PickingInfo",function(){return Kn.a}),n.d(t,"IntersectionInfo",function(){return Qn.a}),n.d(t,"_MeshCollisionData",function(){return qn.a}),n.d(t,"BoundingBox",function(){return Zn.a}),n.d(t,"BoundingInfo",function(){return Jn.a}),n.d(t,"BoundingSphere",function(){return $n.a}),n.d(t,"Ray",function(){return Ot.a}),n.d(t,"Octree",function(){return tr}),n.d(t,"OctreeBlock",function(){return er}),n.d(t,"OctreeSceneComponent",function(){return nr}),n.d(t,"AxesViewer",function(){return rr.AxesViewer}),n.d(t,"BoneAxesViewer",function(){return rr.BoneAxesViewer}),n.d(t,"DebugLayer",function(){return rr.DebugLayer}),n.d(t,"PhysicsViewer",function(){return rr.PhysicsViewer}),n.d(t,"RayHelper",function(){return rr.RayHelper}),n.d(t,"SkeletonViewer",function(){return rr.SkeletonViewer}),n.d(t,"Constants",function(){return _.a}),n.d(t,"InstancingAttributeInfo",function(){return me.d}),n.d(t,"DepthTextureCreationOptions",function(){return me.a}),n.d(t,"EngineCapabilities",function(){return me.c}),n.d(t,"Engine",function(){return me.b}),n.d(t,"EngineStore",function(){return S.a}),n.d(t,"NullEngineOptions",function(){return ir.b}),n.d(t,"NullEngine",function(){return ir.a}),n.d(t,"WebGLPipelineContext",function(){return sr.a}),n.d(t,"_OcclusionDataStorage",function(){return ar}),n.d(t,"_forceTransformFeedbackToBundle",function(){return!0}),n.d(t,"KeyboardEventTypes",function(){return Ze.a}),n.d(t,"KeyboardInfo",function(){return Ze.b}),n.d(t,"KeyboardInfoPre",function(){return Ze.c}),n.d(t,"PointerEventTypes",function(){return Se.a}),n.d(t,"PointerInfoBase",function(){return Se.c}),n.d(t,"PointerInfoPre",function(){return Se.d}),n.d(t,"PointerInfo",function(){return Se.b}),n.d(t,"ClipboardEventTypes",function(){return ur}),n.d(t,"ClipboardInfo",function(){return lr}),n.d(t,"DaydreamController",function(){return pr}),n.d(t,"GearVRController",function(){return _r}),n.d(t,"GenericController",function(){return mr}),n.d(t,"OculusTouchController",function(){return gr}),n.d(t,"PoseEnabledControllerType",function(){return Ct}),n.d(t,"PoseEnabledControllerHelper",function(){return It}),n.d(t,"PoseEnabledController",function(){return Ft}),n.d(t,"ViveController",function(){return vr}),n.d(t,"WebVRController",function(){return gn}),n.d(t,"WindowsMotionController",function(){return br}),n.d(t,"StickValues",function(){return Xe}),n.d(t,"Gamepad",function(){return Ke}),n.d(t,"GenericPad",function(){return Qe}),n.d(t,"GamepadManager",function(){return Bt}),n.d(t,"GamepadSystemSceneComponent",function(){return kt}),n.d(t,"Xbox360Button",function(){return wt}),n.d(t,"Xbox360Dpad",function(){return Lt}),n.d(t,"Xbox360Pad",function(){return Nt}),n.d(t,"AxisDragGizmo",function(){return Tr.a}),n.d(t,"AxisScaleGizmo",function(){return Ar}),n.d(t,"BoundingBoxGizmo",function(){return Pr}),n.d(t,"Gizmo",function(){return xr.a}),n.d(t,"GizmoManager",function(){return Ir}),n.d(t,"PlaneRotationGizmo",function(){return Rr}),n.d(t,"PositionGizmo",function(){return Or}),n.d(t,"RotationGizmo",function(){return Dr}),n.d(t,"ScaleGizmo",function(){return Lr}),n.d(t,"LightGizmo",function(){return Vr}),n.d(t,"EnvironmentHelper",function(){return Jr}),n.d(t,"PhotoDome",function(){return ei}),n.d(t,"_forceSceneHelpersToBundle",function(){return!0}),n.d(t,"VideoDome",function(){return Mi}),n.d(t,"EngineInstrumentation",function(){return Ai}),n.d(t,"SceneInstrumentation",function(){return Si}),n.d(t,"_TimeToken",function(){return or}),n.d(t,"EffectLayer",function(){return Pi}),n.d(t,"EffectLayerSceneComponent",function(){return Ri}),n.d(t,"GlowLayer",function(){return Di}),n.d(t,"HighlightLayer",function(){return wi}),n.d(t,"Layer",function(){return Ii}),n.d(t,"LayerSceneComponent",function(){return Li}),n.d(t,"LensFlare",function(){return Fi}),n.d(t,"LensFlareSystem",function(){return Ni}),n.d(t,"LensFlareSystemSceneComponent",function(){return Bi}),n.d(t,"Light",function(){return Fr.a}),n.d(t,"ShadowLight",function(){return Nr}),n.d(t,"DirectionalLight",function(){return Br}),n.d(t,"HemisphericLight",function(){return _n.a}),n.d(t,"PointLight",function(){return Vi}),n.d(t,"SpotLight",function(){return Ur}),n.d(t,"ShadowGenerator",function(){return ki}),n.d(t,"ShadowGeneratorSceneComponent",function(){return Ui}),n.d(t,"DefaultLoadingScreen",function(){return Gi}),n.d(t,"SceneLoaderProgressEvent",function(){return dr}),n.d(t,"SceneLoader",function(){return fr}),n.d(t,"SceneLoaderFlags",function(){return hr.a}),n.d(t,"_BabylonLoaderRegistered",function(){return!0}),n.d(t,"ColorCurves",function(){return co.a}),n.d(t,"EffectFallbacks",function(){return jt.c}),n.d(t,"EffectCreationOptions",function(){return jt.b}),n.d(t,"Effect",function(){return jt.a}),n.d(t,"FresnelParameters",function(){return ho}),n.d(t,"ImageProcessingConfigurationDefines",function(){return vn.b}),n.d(t,"ImageProcessingConfiguration",function(){return vn.a}),n.d(t,"Material",function(){return Ci.a}),n.d(t,"MaterialDefines",function(){return Wr.a}),n.d(t,"MaterialHelper",function(){return Hr.a}),n.d(t,"MultiMaterial",function(){return zi.a}),n.d(t,"PushMaterial",function(){return Xr.a}),n.d(t,"ShaderMaterial",function(){return mo.a}),n.d(t,"StandardMaterialDefines",function(){return yn.b}),n.d(t,"StandardMaterial",function(){return yn.a}),n.d(t,"BaseTexture",function(){return Gr.a}),n.d(t,"CubeTexture",function(){return Yr}),n.d(t,"EquiRectangularCubeTexture",function(){return vo}),n.d(t,"HDRCubeTexture",function(){return Wi}),n.d(t,"InternalTexture",function(){return je.a}),n.d(t,"MirrorTexture",function(){return zr}),n.d(t,"MultiRenderTarget",function(){return To}),n.d(t,"RenderTargetTexture",function(){return ln}),n.d(t,"Texture",function(){return Ge.a}),n.d(t,"UniformBuffer",function(){return an.a}),n.d(t,"MaterialFlags",function(){return Kr.a}),n.d(t,"BackgroundMaterial",function(){return qr}),n.d(t,"PBRMaterialDefines",function(){return si}),n.d(t,"PBRBaseMaterial",function(){return ui}),n.d(t,"PBRBaseSimpleMaterial",function(){return fo}),n.d(t,"PBRMaterial",function(){return li}),n.d(t,"PBRMetallicRoughnessMaterial",function(){return po}),n.d(t,"PBRSpecularGlossinessMaterial",function(){return _o}),n.d(t,"ColorGradingTexture",function(){return go}),n.d(t,"DynamicTexture",function(){return bn}),n.d(t,"ProceduralTexture",function(){return xo}),n.d(t,"RawCubeTexture",function(){return Co}),n.d(t,"RawTexture",function(){return ze}),n.d(t,"RawTexture3D",function(){return Po}),n.d(t,"RefractionTexture",function(){return Ro}),n.d(t,"VideoTexture",function(){return xi}),n.d(t,"HtmlElementTexture",function(){return Do}),n.d(t,"_DDSTextureLoader",function(){return vi}),n.d(t,"_ENVTextureLoader",function(){return bi}),n.d(t,"_KTXTextureLoader",function(){return Ei}),n.d(t,"_TGATextureLoader",function(){return bo}),n.d(t,"CustomProceduralTexture",function(){return Ao}),n.d(t,"NoiseProceduralTexture",function(){return So}),n.d(t,"ProceduralTextureSceneComponent",function(){return Eo}),n.d(t,"Scalar",function(){return w.a}),n.d(t,"ToGammaSpace",function(){return o.u}),n.d(t,"ToLinearSpace",function(){return o.v}),n.d(t,"Epsilon",function(){return o.h}),n.d(t,"Color3",function(){return o.e}),n.d(t,"Color4",function(){return o.f}),n.d(t,"Vector2",function(){return o.w}),n.d(t,"Vector3",function(){return o.x}),n.d(t,"Vector4",function(){return o.y}),n.d(t,"Size",function(){return o.r}),n.d(t,"Quaternion",function(){return o.q}),n.d(t,"Matrix",function(){return o.j}),n.d(t,"Plane",function(){return o.n}),n.d(t,"Viewport",function(){return o.z}),n.d(t,"Frustum",function(){return o.i}),n.d(t,"Space",function(){return o.s}),n.d(t,"Axis",function(){return o.c}),n.d(t,"BezierCurve",function(){return o.d}),n.d(t,"Orientation",function(){return o.k}),n.d(t,"Angle",function(){return o.a}),n.d(t,"Arc2",function(){return o.b}),n.d(t,"Path2",function(){return o.l}),n.d(t,"Path3D",function(){return o.m}),n.d(t,"Curve3",function(){return o.g}),n.d(t,"PositionNormalVertex",function(){return o.p}),n.d(t,"PositionNormalTextureVertex",function(){return o.o}),n.d(t,"Tmp",function(){return o.t}),n.d(t,"SphericalHarmonics",function(){return ci.a}),n.d(t,"SphericalPolynomial",function(){return ci.b}),n.d(t,"AbstractMesh",function(){return Fe.a}),n.d(t,"Buffer",function(){return Mn.a}),n.d(t,"VertexBuffer",function(){return Mn.b}),n.d(t,"CSG",function(){return zo}),n.d(t,"Geometry",function(){return ji.a}),n.d(t,"GroundMesh",function(){return An}),n.d(t,"TrailMesh",function(){return Yo}),n.d(t,"InstancedMesh",function(){return Ho.a}),n.d(t,"LinesMesh",function(){return Wo.b}),n.d(t,"InstancedLinesMesh",function(){return Wo.a}),n.d(t,"_CreationDataStorage",function(){return fe.b}),n.d(t,"_InstancesBatch",function(){return fe.c}),n.d(t,"Mesh",function(){return fe.a}),n.d(t,"VertexData",function(){return xn.a}),n.d(t,"MeshBuilder",function(){return oa}),n.d(t,"SimplificationSettings",function(){return aa}),n.d(t,"SimplificationQueue",function(){return sa}),n.d(t,"SimplificationType",function(){return ra}),n.d(t,"SimplicationQueueSceneComponent",function(){return fa}),n.d(t,"Polygon",function(){return Zo}),n.d(t,"PolygonMeshBuilder",function(){return Jo}),n.d(t,"BaseSubMesh",function(){return Bo.a}),n.d(t,"SubMesh",function(){return Bo.b}),n.d(t,"MeshLODLevel",function(){return pa.a}),n.d(t,"TransformNode",function(){return $r.a}),n.d(t,"BoxBuilder",function(){return Er.a}),n.d(t,"SphereBuilder",function(){return Sr.a}),n.d(t,"CylinderBuilder",function(){return Rn.a}),n.d(t,"LinesBuilder",function(){return Cr.a}),n.d(t,"PlaneBuilder",function(){return Zr.a}),n.d(t,"DataBuffer",function(){return _a.a}),n.d(t,"WebGLDataBuffer",function(){return ma.a}),n.d(t,"DracoCompression",function(){return No}),n.d(t,"DiscBuilder",function(){return Xo}),n.d(t,"RibbonBuilder",function(){return to}),n.d(t,"HemisphereBuilder",function(){return kr}),n.d(t,"TorusBuilder",function(){return Pn}),n.d(t,"TorusKnotBuilder",function(){return Ko}),n.d(t,"PolygonBuilder",function(){return $o}),n.d(t,"ShapeBuilder",function(){return no}),n.d(t,"LatheBuilder",function(){return ea}),n.d(t,"GroundBuilder",function(){return Sn}),n.d(t,"TubeBuilder",function(){return ta}),n.d(t,"PolyhedronBuilder",function(){return wr}),n.d(t,"IcoSphereBuilder",function(){return na}),n.d(t,"DecalBuilder",function(){return ia}),n.d(t,"MorphTarget",function(){return Xi}),n.d(t,"MorphTargetManager",function(){return Ki}),n.d(t,"Node",function(){return F.a}),n.d(t,"Database",function(){return va}),n.d(t,"BaseParticleSystem",function(){return Ca}),n.d(t,"GPUParticleSystem",function(){return Oa}),n.d(t,"Particle",function(){return Pa}),n.d(t,"ParticleHelper",function(){return La}),n.d(t,"ParticleSystem",function(){return Da}),n.d(t,"_IDoNeedToBeInTheBuild",function(){return 42}),n.d(t,"ParticleSystemSet",function(){return wa}),n.d(t,"SolidParticle",function(){return Ia}),n.d(t,"ModelShape",function(){return Fa}),n.d(t,"DepthSortedParticle",function(){return Na}),n.d(t,"SolidParticleSystem",function(){return ka}),n.d(t,"SubEmitterType",function(){return ga}),n.d(t,"SubEmitter",function(){return Ra}),n.d(t,"BoxParticleEmitter",function(){return ya}),n.d(t,"ConeParticleEmitter",function(){return ba}),n.d(t,"CylinderParticleEmitter",function(){return Ta}),n.d(t,"CylinderDirectedParticleEmitter",function(){return Ea}),n.d(t,"HemisphericParticleEmitter",function(){return xa}),n.d(t,"PointParticleEmitter",function(){return Ma}),n.d(t,"SphereParticleEmitter",function(){return Aa}),n.d(t,"SphereDirectedParticleEmitter",function(){return Sa}),n.d(t,"PhysicsEngine",function(){return Zi}),n.d(t,"PhysicsEngineSceneComponent",function(){return Ga}),n.d(t,"PhysicsHelper",function(){return ja}),n.d(t,"PhysicsRadialExplosionEventOptions",function(){return Xa}),n.d(t,"PhysicsUpdraftEventOptions",function(){return Ka}),n.d(t,"PhysicsVortexEventOptions",function(){return Qa}),n.d(t,"PhysicsRadialImpulseFalloff",function(){return Ua}),n.d(t,"PhysicsUpdraftMode",function(){return Va}),n.d(t,"PhysicsImpostor",function(){return Qi.a}),n.d(t,"PhysicsJoint",function(){return qi.e}),n.d(t,"DistanceJoint",function(){return qi.a}),n.d(t,"MotorEnabledJoint",function(){return qi.d}),n.d(t,"HingeJoint",function(){return qi.c}),n.d(t,"Hinge2Joint",function(){return qi.b}),n.d(t,"CannonJSPlugin",function(){return $i}),n.d(t,"AmmoJSPlugin",function(){return ro}),n.d(t,"OimoJSPlugin",function(){return eo}),n.d(t,"AnaglyphPostProcess",function(){return Wt}),n.d(t,"BlackAndWhitePostProcess",function(){return qa}),n.d(t,"BloomEffect",function(){return es}),n.d(t,"BloomMergePostProcess",function(){return $a}),n.d(t,"BlurPostProcess",function(){return jr}),n.d(t,"ChromaticAberrationPostProcess",function(){return ts}),n.d(t,"CircleOfConfusionPostProcess",function(){return ns}),n.d(t,"ColorCorrectionPostProcess",function(){return rs}),n.d(t,"ConvolutionPostProcess",function(){return is}),n.d(t,"DepthOfFieldBlurPostProcess",function(){return os}),n.d(t,"DepthOfFieldEffectBlurLevel",function(){return as}),n.d(t,"DepthOfFieldEffect",function(){return ls}),n.d(t,"DepthOfFieldMergePostProcessOptions",function(){return ss}),n.d(t,"DepthOfFieldMergePostProcess",function(){return us}),n.d(t,"DisplayPassPostProcess",function(){return cs}),n.d(t,"ExtractHighlightsPostProcess",function(){return Ja}),n.d(t,"FilterPostProcess",function(){return hs}),n.d(t,"FxaaPostProcess",function(){return ds}),n.d(t,"GrainPostProcess",function(){return fs}),n.d(t,"HighlightsPostProcess",function(){return ps}),n.d(t,"ImageProcessingPostProcess",function(){return En}),n.d(t,"MotionBlurPostProcess",function(){return gs}),n.d(t,"PassPostProcess",function(){return Yt}),n.d(t,"PassCubePostProcess",function(){return Ht}),n.d(t,"PostProcess",function(){return zt}),n.d(t,"PostProcessManager",function(){return sn.a}),n.d(t,"RefractionPostProcess",function(){return vs}),n.d(t,"SharpenPostProcess",function(){return ys}),n.d(t,"StereoscopicInterlacePostProcess",function(){return Zt}),n.d(t,"TonemappingOperator",function(){return Cs}),n.d(t,"TonemapPostProcess",function(){return Rs}),n.d(t,"VolumetricLightScatteringPostProcess",function(){return Ds}),n.d(t,"VRDistortionCorrectionPostProcess",function(){return on}),n.d(t,"VRMultiviewToSingleviewPostProcess",function(){return hn}),n.d(t,"PostProcessRenderEffect",function(){return Za}),n.d(t,"PostProcessRenderPipeline",function(){return bs}),n.d(t,"PostProcessRenderPipelineManager",function(){return Ts}),n.d(t,"PostProcessRenderPipelineManagerSceneComponent",function(){return Es}),n.d(t,"DefaultRenderingPipeline",function(){return xs}),n.d(t,"LensRenderingPipeline",function(){return Ms}),n.d(t,"SSAO2RenderingPipeline",function(){return As}),n.d(t,"SSAORenderingPipeline",function(){return Ss}),n.d(t,"StandardRenderingPipeline",function(){return Ps}),n.d(t,"ReflectionProbe",function(){return io}),n.d(t,"BoundingBoxRenderer",function(){return Os}),n.d(t,"DepthRenderer",function(){return ws}),n.d(t,"DepthRendererSceneComponent",function(){return Ls}),n.d(t,"EdgesRenderer",function(){return Fs}),n.d(t,"LineEdgesRenderer",function(){return Ns}),n.d(t,"GeometryBufferRenderer",function(){return _s}),n.d(t,"GeometryBufferRendererSceneComponent",function(){return ms}),n.d(t,"OutlineRenderer",function(){return Bs}),n.d(t,"RenderingGroup",function(){return ks.a}),n.d(t,"RenderingGroupInfo",function(){return un.a}),n.d(t,"RenderingManager",function(){return un.b}),n.d(t,"UtilityLayerRenderer",function(){return Mr.a}),n.d(t,"Scene",function(){return H.a}),n.d(t,"SceneComponentConstants",function(){return xe.a}),n.d(t,"Stage",function(){return xe.b}),n.d(t,"Sprite",function(){return Us}),n.d(t,"SpriteManager",function(){return js}),n.d(t,"SpriteSceneComponent",function(){return Vs}),n.d(t,"_AlphaState",function(){return zs.a}),n.d(t,"_DepthCullingState",function(){return zs.b}),n.d(t,"_StencilState",function(){return zs.c}),n.d(t,"AndOrNotEvaluator",function(){return Ys.a}),n.d(t,"AssetTaskState",function(){return Gs}),n.d(t,"AbstractAssetTask",function(){return Ws}),n.d(t,"AssetsProgressEvent",function(){return Xs}),n.d(t,"MeshAssetTask",function(){return Ks}),n.d(t,"TextFileAssetTask",function(){return Qs}),n.d(t,"BinaryFileAssetTask",function(){return qs}),n.d(t,"ImageAssetTask",function(){return Zs}),n.d(t,"TextureAssetTask",function(){return Js}),n.d(t,"CubeTextureAssetTask",function(){return $s}),n.d(t,"HDRCubeTextureAssetTask",function(){return eu}),n.d(t,"EquiRectangularCubeTextureAssetTask",function(){return tu}),n.d(t,"AssetsManager",function(){return nu}),n.d(t,"DDSTools",function(){return gi}),n.d(t,"expandToProperty",function(){return L.b}),n.d(t,"serialize",function(){return L.c}),n.d(t,"serializeAsTexture",function(){return L.m}),n.d(t,"serializeAsColor3",function(){return L.e}),n.d(t,"serializeAsFresnelParameters",function(){return L.h}),n.d(t,"serializeAsVector2",function(){return L.n}),n.d(t,"serializeAsVector3",function(){return L.o}),n.d(t,"serializeAsMeshReference",function(){return L.k}),n.d(t,"serializeAsColorCurves",function(){return L.g}),n.d(t,"serializeAsColor4",function(){return L.f}),n.d(t,"serializeAsImageProcessingConfiguration",function(){return L.i}),n.d(t,"serializeAsQuaternion",function(){return L.l}),n.d(t,"serializeAsMatrix",function(){return L.j}),n.d(t,"serializeAsCameraReference",function(){return L.d}),n.d(t,"SerializationHelper",function(){return L.a}),n.d(t,"Deferred",function(){return ru}),n.d(t,"EnvironmentTextureTools",function(){return yi}),n.d(t,"MeshExploder",function(){return iu}),n.d(t,"FilesInput",function(){return ou}),n.d(t,"KhronosTextureContainer",function(){return Ti}),n.d(t,"EventState",function(){return i.a}),n.d(t,"Observer",function(){return i.d}),n.d(t,"MultiObserver",function(){return i.b}),n.d(t,"Observable",function(){return i.c}),n.d(t,"PerformanceMonitor",function(){return au.a}),n.d(t,"RollingAverage",function(){return au.b}),n.d(t,"PromisePolyfill",function(){return su.a}),n.d(t,"SceneOptimization",function(){return uu}),n.d(t,"TextureOptimization",function(){return lu}),n.d(t,"HardwareScalingOptimization",function(){return cu}),n.d(t,"ShadowsOptimization",function(){return hu}),n.d(t,"PostProcessesOptimization",function(){return du}),n.d(t,"LensFlaresOptimization",function(){return fu}),n.d(t,"CustomOptimization",function(){return pu}),n.d(t,"ParticlesOptimization",function(){return _u}),n.d(t,"RenderTargetsOptimization",function(){return mu}),n.d(t,"MergeMeshesOptimization",function(){return gu}),n.d(t,"SceneOptimizerOptions",function(){return vu}),n.d(t,"SceneOptimizer",function(){return yu}),n.d(t,"SceneSerializer",function(){return xu}),n.d(t,"SmartArray",function(){return Gt.a}),n.d(t,"SmartArrayNoDuplicate",function(){return Gt.b}),n.d(t,"StringDictionary",function(){return mt.a}),n.d(t,"Tags",function(){return Mu.a}),n.d(t,"TextureTools",function(){return Au}),n.d(t,"TGATools",function(){return yo}),n.d(t,"ColorGradient",function(){return ye.c}),n.d(t,"Color3Gradient",function(){return ye.b}),n.d(t,"FactorGradient",function(){return ye.d}),n.d(t,"LoadFileError",function(){return ye.e}),n.d(t,"RetryStrategy",function(){return ye.g}),n.d(t,"Tools",function(){return ye.h}),n.d(t,"PerfCounter",function(){return ye.f}),n.d(t,"className",function(){return ye.i}),n.d(t,"AsyncLoop",function(){return ye.a}),n.d(t,"VideoRecorder",function(){return Su}),n.d(t,"JoystickAxis",function(){return _t}),n.d(t,"VirtualJoystick",function(){return gt}),n.d(t,"WorkerPool",function(){return Oo}),n.d(t,"Logger",function(){return p.a}),n.d(t,"_TypeStore",function(){return a.a}),n.d(t,"FilesInputStore",function(){return cr.a}),n.d(t,"DeepCopier",function(){return C.a}),n.d(t,"PivotTools",function(){return Be.a}),n.d(t,"PrecisionDate",function(){return W.a}),n.d(t,"ScreenshotTools",function(){return Cu}),n.d(t,"WebRequest",function(){return Mo.a}),n.d(t,"InspectableType",function(){return Hs}),n.d(t,"CubeMapToSphericalPolynomialTools",function(){return hi.a}),n.d(t,"HDRTools",function(){return Hi}),n.d(t,"PanoramaToCubeMapTools",function(){return Yi})},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.fogFragmentDeclaration="#ifdef FOG\n#define FOGMODE_NONE 0.\n#define FOGMODE_EXP 1.\n#define FOGMODE_EXP2 2.\n#define FOGMODE_LINEAR 3.\n#define E 2.71828\nuniform vec4 vFogInfos;\nuniform vec3 vFogColor;\nvarying vec3 vFogDistance;\nfloat CalcFogFactor()\n{\nfloat fogCoeff=1.0;\nfloat fogStart=vFogInfos.y;\nfloat fogEnd=vFogInfos.z;\nfloat fogDensity=vFogInfos.w;\nfloat fogDistance=length(vFogDistance);\nif (FOGMODE_LINEAR == vFogInfos.x)\n{\nfogCoeff=(fogEnd-fogDistance)/(fogEnd-fogStart);\n}\nelse if (FOGMODE_EXP == vFogInfos.x)\n{\nfogCoeff=1.0/pow(E,fogDistance*fogDensity);\n}\nelse if (FOGMODE_EXP2 == vFogInfos.x)\n{\nfogCoeff=1.0/pow(E,fogDistance*fogDistance*fogDensity*fogDensity);\n}\nreturn clamp(fogCoeff,0.0,1.0);\n}\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.fogFragment="#ifdef FOG\nfloat fog=CalcFogFactor();\ncolor.rgb=fog*color.rgb+(1.0-fog)*vFogColor;\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.fogVertexDeclaration="#ifdef FOG\nvarying vec3 vFogDistance;\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.morphTargetsVertexGlobalDeclaration="#ifdef MORPHTARGETS\nuniform float morphTargetInfluences[NUM_MORPH_INFLUENCERS];\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.morphTargetsVertexDeclaration="#ifdef MORPHTARGETS\nattribute vec3 position{X};\n#ifdef MORPHTARGETS_NORMAL\nattribute vec3 normal{X};\n#endif\n#ifdef MORPHTARGETS_TANGENT\nattribute vec3 tangent{X};\n#endif\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.morphTargetsVertex="#ifdef MORPHTARGETS\npositionUpdated+=(position{X}-position)*morphTargetInfluences[{X}];\n#ifdef MORPHTARGETS_NORMAL\nnormalUpdated+=(normal{X}-normal)*morphTargetInfluences[{X}];\n#endif\n#ifdef MORPHTARGETS_TANGENT\ntangentUpdated.xyz+=(tangent{X}-tangent.xyz)*morphTargetInfluences[{X}];\n#endif\n#endif"},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.Eval=function(t,n){return"true"===(t=t.match(/\([^\(\)]*\)/g)?t.replace(/\([^\(\)]*\)/g,function(t){return t=t.slice(1,t.length-1),e._HandleParenthesisContent(t,n)}):e._HandleParenthesisContent(t,n))||"false"!==t&&e.Eval(t,n)},e._HandleParenthesisContent=function(t,n){var r;n=n||function(e){return"true"===e};var i=t.split("||");for(var o in i)if(i.hasOwnProperty(o)){var a=e._SimplifyNegation(i[o].trim()),s=a.split("&&");if(s.length>1)for(var u=0;u<s.length;++u){var l=e._SimplifyNegation(s[u].trim());if(!(r="true"!==l&&"false"!==l?"!"===l[0]?!n(l.substring(1)):n(l):"true"===l)){a="false";break}}if(r||"true"===a){r=!0;break}r="true"!==a&&"false"!==a?"!"===a[0]?!n(a.substring(1)):n(a):"true"===a}return r?"true":"false"},e._SimplifyNegation=function(e){return"!true"===(e=(e=e.replace(/^[\s!]+/,function(e){return(e=e.replace(/[\s]/g,function(){return""})).length%2?"!":""})).trim())?e="false":"!false"===e&&(e="true"),e},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=n(47),i=function(){function e(e){void 0===e&&(e=30),this._enabled=!0,this._rollingFrameTime=new o(e)}return e.prototype.sampleFrame=function(e){void 0===e&&(e=r.a.Now),this._enabled&&(null!=this._lastFrameTimeMs&&this._rollingFrameTime.add(e-this._lastFrameTimeMs),this._lastFrameTimeMs=e)},Object.defineProperty(e.prototype,"averageFrameTime",{get:function(){return this._rollingFrameTime.average},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"averageFrameTimeVariance",{get:function(){return this._rollingFrameTime.variance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instantaneousFrameTime",{get:function(){return this._rollingFrameTime.history(0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"averageFPS",{get:function(){return 1e3/this._rollingFrameTime.average},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"instantaneousFPS",{get:function(){var e=this._rollingFrameTime.history(0);return 0===e?0:1e3/e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSaturated",{get:function(){return this._rollingFrameTime.isSaturated()},enumerable:!0,configurable:!0}),e.prototype.enable=function(){this._enabled=!0},e.prototype.disable=function(){this._enabled=!1,this._lastFrameTimeMs=null},Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._enabled},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._lastFrameTimeMs=null,this._rollingFrameTime.reset()},e}(),o=function(){function e(e){this._samples=new Array(e),this.reset()}return e.prototype.add=function(e){var t;if(this.isSaturated()){var n=this._samples[this._pos];this.average-=(t=n-this.average)/(this._sampleCount-1),this._m2-=t*(n-this.average)}else this._sampleCount++;this.average+=(t=e-this.average)/this._sampleCount,this._m2+=t*(e-this.average),this.variance=this._m2/(this._sampleCount-1),this._samples[this._pos]=e,this._pos++,this._pos%=this._samples.length},e.prototype.history=function(e){if(e>=this._sampleCount||e>=this._samples.length)return 0;var t=this._wrapPosition(this._pos-1);return this._samples[this._wrapPosition(t-e)]},e.prototype.isSaturated=function(){return this._sampleCount>=this._samples.length},e.prototype.reset=function(){this.average=0,this.variance=0,this._sampleCount=0,this._pos=0,this._m2=0},e.prototype._wrapPosition=function(e){var t=this._samples.length;return(e%t+t)%t},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r,i=n(9);!function(e){e[e.Pending=0]="Pending",e[e.Fulfilled=1]="Fulfilled",e[e.Rejected=2]="Rejected"}(r||(r={}));var o=function(){this.count=0,this.target=0,this.results=[]},a=function(){function e(e){var t=this;if(this._state=r.Pending,this._children=new Array,this._rejectWasConsumed=!1,e)try{e(function(e){t._resolve(e)},function(e){t._reject(e)})}catch(e){this._reject(e)}}return Object.defineProperty(e.prototype,"_result",{get:function(){return this._resultValue},set:function(e){this._resultValue=e,this._parent&&void 0===this._parent._result&&(this._parent._result=e)},enumerable:!0,configurable:!0}),e.prototype.catch=function(e){return this.then(void 0,e)},e.prototype.then=function(t,n){var o=this,a=new e;return a._onFulfilled=t,a._onRejected=n,this._children.push(a),a._parent=this,this._state!==r.Pending&&i.h.SetImmediate(function(){if(o._state===r.Fulfilled||o._rejectWasConsumed){var e=a._resolve(o._result);if(null!=e)if(void 0!==e._state){var t=e;a._children.push(t),t._parent=a,a=t}else a._result=e}else a._reject(o._reason)}),a},e.prototype._moveChildren=function(e){var t,n=this;if((t=this._children).push.apply(t,e.splice(0,e.length)),this._children.forEach(function(e){e._parent=n}),this._state===r.Fulfilled)for(var i=0,o=this._children;i<o.length;i++)o[i]._resolve(this._result);else if(this._state===r.Rejected)for(var a=0,s=this._children;a<s.length;a++)s[a]._reject(this._reason)},e.prototype._resolve=function(e){try{this._state=r.Fulfilled;var t=null;if(this._onFulfilled&&(t=this._onFulfilled(e)),null!=t)if(void 0!==t._state){var n=t;n._parent=this,n._moveChildren(this._children),e=n._result}else e=t;this._result=e;for(var i=0,o=this._children;i<o.length;i++)o[i]._resolve(e);this._children.length=0,delete this._onFulfilled,delete this._onRejected}catch(e){this._reject(e,!0)}},e.prototype._reject=function(e,t){if(void 0===t&&(t=!1),this._state=r.Rejected,this._reason=e,this._onRejected&&!t)try{this._onRejected(e),this._rejectWasConsumed=!0}catch(t){e=t}for(var n=0,i=this._children;n<i.length;n++){var o=i[n];this._rejectWasConsumed?o._resolve(null):o._reject(e)}this._children.length=0,delete this._onFulfilled,delete this._onRejected},e.resolve=function(t){var n=new e;return n._resolve(t),n},e._RegisterForFulfillment=function(e,t,n){e.then(function(e){return t.results[n]=e,t.count++,t.count===t.target&&t.rootPromise._resolve(t.results),null},function(e){t.rootPromise._state!==r.Rejected&&t.rootPromise._reject(e)})},e.all=function(t){var n=new e,r=new o;if(r.target=t.length,r.rootPromise=n,t.length)for(var i=0;i<t.length;i++)e._RegisterForFulfillment(t[i],r,i);else n._resolve([]);return n},e.race=function(t){var n=new e;if(t.length)for(var r=0,i=t;r<i.length;r++)i[r].then(function(e){return n&&(n._resolve(e),n=null),null},function(e){n&&(n._reject(e),n=null)});return n},e}(),s=function(){function e(){}return e.Apply=function(e){void 0===e&&(e=!1),(e||"undefined"==typeof Promise)&&(window.Promise=a)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return Object.defineProperty(e.prototype,"isAsync",{get:function(){return this.isParallelCompiled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return!!this.program&&(!this.isParallelCompiled||this.engine._isRenderingStateCompiled(this))},enumerable:!0,configurable:!0}),e.prototype._handlesSpectorRebuildCallback=function(e){e&&this.program&&e(this.program)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),i=function(){this._checkCollisions=!1,this._collisionMask=-1,this._collisionGroup=-1,this._collider=null,this._oldPositionForCollisions=new r.x(0,0,0),this._diffPositionForCollisions=new r.x(0,0,0)}},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n(28),i=n(0),o=n(3),a=function(){function e(e,t,n,i,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===o&&(o=null),this.index=e,this._opaqueSubMeshes=new r.a(256),this._transparentSubMeshes=new r.a(256),this._alphaTestSubMeshes=new r.a(256),this._depthOnlySubMeshes=new r.a(256),this._particleSystems=new r.a(256),this._spriteManagers=new r.a(256),this._edgesRenderers=new r.a(16),this._scene=t,this.opaqueSortCompareFn=n,this.alphaTestSortCompareFn=i,this.transparentSortCompareFn=o}return Object.defineProperty(e.prototype,"opaqueSortCompareFn",{set:function(t){this._opaqueSortCompareFn=t,this._renderOpaque=t?this.renderOpaqueSorted:e.renderUnsorted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alphaTestSortCompareFn",{set:function(t){this._alphaTestSortCompareFn=t,this._renderAlphaTest=t?this.renderAlphaTestSorted:e.renderUnsorted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transparentSortCompareFn",{set:function(t){this._transparentSortCompareFn=t||e.defaultTransparentSortCompare,this._renderTransparent=this.renderTransparentSorted},enumerable:!0,configurable:!0}),e.prototype.render=function(e,t,n,r){if(e)e(this._opaqueSubMeshes,this._alphaTestSubMeshes,this._transparentSubMeshes,this._depthOnlySubMeshes);else{var i=this._scene.getEngine();0!==this._depthOnlySubMeshes.length&&(i.setColorWrite(!1),this._renderAlphaTest(this._depthOnlySubMeshes),i.setColorWrite(!0)),0!==this._opaqueSubMeshes.length&&this._renderOpaque(this._opaqueSubMeshes),0!==this._alphaTestSubMeshes.length&&this._renderAlphaTest(this._alphaTestSubMeshes);var a=i.getStencilBuffer();if(i.setStencilBuffer(!1),t&&this._renderSprites(),n&&this._renderParticles(r),this.onBeforeTransparentRendering&&this.onBeforeTransparentRendering(),0!==this._transparentSubMeshes.length&&(this._renderTransparent(this._transparentSubMeshes),i.setAlphaMode(o.a.ALPHA_DISABLE)),i.setStencilBuffer(!1),this._edgesRenderers.length){for(var s=0;s<this._edgesRenderers.length;s++)this._edgesRenderers.data[s].render();i.setAlphaMode(o.a.ALPHA_DISABLE)}i.setStencilBuffer(a)}},e.prototype.renderOpaqueSorted=function(t){return e.renderSorted(t,this._opaqueSortCompareFn,this._scene.activeCamera,!1)},e.prototype.renderAlphaTestSorted=function(t){return e.renderSorted(t,this._alphaTestSortCompareFn,this._scene.activeCamera,!1)},e.prototype.renderTransparentSorted=function(t){return e.renderSorted(t,this._transparentSortCompareFn,this._scene.activeCamera,!0)},e.renderSorted=function(e,t,n,r){for(var a,s=0,u=n?n.globalPosition:i.x.Zero();s<e.length;s++)(a=e.data[s])._alphaIndex=a.getMesh().alphaIndex,a._distanceToCamera=a.getBoundingInfo().boundingSphere.centerWorld.subtract(u).length();var l=e.data.slice(0,e.length);for(t&&l.sort(t),s=0;s<l.length;s++){if(a=l[s],r){var c=a.getMaterial();if(c&&c.needDepthPrePass){var h=c.getScene().getEngine();h.setColorWrite(!1),h.setAlphaMode(o.a.ALPHA_DISABLE),a.render(!1),h.setColorWrite(!0)}}a.render(r)}},e.renderUnsorted=function(e){for(var t=0;t<e.length;t++)e.data[t].render(!1)},e.defaultTransparentSortCompare=function(t,n){return t._alphaIndex>n._alphaIndex?1:t._alphaIndex<n._alphaIndex?-1:e.backToFrontSortCompare(t,n)},e.backToFrontSortCompare=function(e,t){return e._distanceToCamera<t._distanceToCamera?1:e._distanceToCamera>t._distanceToCamera?-1:0},e.frontToBackSortCompare=function(e,t){return e._distanceToCamera<t._distanceToCamera?-1:e._distanceToCamera>t._distanceToCamera?1:0},e.prototype.prepare=function(){this._opaqueSubMeshes.reset(),this._transparentSubMeshes.reset(),this._alphaTestSubMeshes.reset(),this._depthOnlySubMeshes.reset(),this._particleSystems.reset(),this._spriteManagers.reset(),this._edgesRenderers.reset()},e.prototype.dispose=function(){this._opaqueSubMeshes.dispose(),this._transparentSubMeshes.dispose(),this._alphaTestSubMeshes.dispose(),this._depthOnlySubMeshes.dispose(),this._particleSystems.dispose(),this._spriteManagers.dispose(),this._edgesRenderers.dispose()},e.prototype.dispatch=function(e,t,n){void 0===t&&(t=e.getMesh()),void 0===n&&(n=e.getMaterial()),null!=n&&(n.needAlphaBlendingForMesh(t)?this._transparentSubMeshes.push(e):n.needAlphaTesting()?(n.needDepthPrePass&&this._depthOnlySubMeshes.push(e),this._alphaTestSubMeshes.push(e)):(n.needDepthPrePass&&this._depthOnlySubMeshes.push(e),this._opaqueSubMeshes.push(e)),t._renderingGroup=this,t._edgesRenderer&&t._edgesRenderer.isEnabled&&this._edgesRenderers.push(t._edgesRenderer))},e.prototype.dispatchSprites=function(e){this._spriteManagers.push(e)},e.prototype.dispatchParticles=function(e){this._particleSystems.push(e)},e.prototype._renderParticles=function(e){if(0!==this._particleSystems.length){var t=this._scene.activeCamera;this._scene.onBeforeParticlesRenderingObservable.notifyObservers(this._scene);for(var n=0;n<this._particleSystems.length;n++){var r=this._particleSystems.data[n];if(0!==(t&&t.layerMask&r.layerMask)){var i=r.emitter;i.position&&e&&-1===e.indexOf(i)||this._scene._activeParticles.addCount(r.render(),!1)}}this._scene.onAfterParticlesRenderingObservable.notifyObservers(this._scene)}},e.prototype._renderSprites=function(){if(this._scene.spritesEnabled&&0!==this._spriteManagers.length){var e=this._scene.activeCamera;this._scene.onBeforeSpritesRenderingObservable.notifyObservers(this._scene);for(var t=0;t<this._spriteManagers.length;t++){var n=this._spriteManagers.data[t];0!==(e&&e.layerMask&n.layerMask)&&n.render()}this._scene.onAfterSpritesRenderingObservable.notifyObservers(this._scene)}},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(e,t){this.distance=e,this.mesh=t}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(1),i=n(0),o=n(6),a=n(24),s=n(11),u=n(32),l=n(42);s.a._instancedMeshFactory=function(e,t){return new c(e,t)};var c=function(e){function t(t,n){var r=e.call(this,t,n.getScene())||this;return r._indexInSourceMeshInstanceArray=-1,n.addInstance(r),r._sourceMesh=n,r.position.copyFrom(n.position),r.rotation.copyFrom(n.rotation),r.scaling.copyFrom(n.scaling),n.rotationQuaternion&&(r.rotationQuaternion=n.rotationQuaternion.clone()),r.infiniteDistance=n.infiniteDistance,r.setPivotMatrix(n.getPivotMatrix()),r.refreshBoundingInfo(),r._syncSubMeshes(),r}return r.d(t,e),t.prototype.getClassName=function(){return"InstancedMesh"},Object.defineProperty(t.prototype,"lightSources",{get:function(){return this._sourceMesh._lightSources},enumerable:!0,configurable:!0}),t.prototype._resyncLightSources=function(){},t.prototype._resyncLighSource=function(e){},t.prototype._removeLightSource=function(e){},Object.defineProperty(t.prototype,"receiveShadows",{get:function(){return this._sourceMesh.receiveShadows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"material",{get:function(){return this._sourceMesh.material},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visibility",{get:function(){return this._sourceMesh.visibility},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skeleton",{get:function(){return this._sourceMesh.skeleton},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"renderingGroupId",{get:function(){return this._sourceMesh.renderingGroupId},set:function(e){this._sourceMesh&&e!==this._sourceMesh.renderingGroupId&&o.a.Warn("Note - setting renderingGroupId of an instanced mesh has no effect on the scene")},enumerable:!0,configurable:!0}),t.prototype.getTotalVertices=function(){return this._sourceMesh.getTotalVertices()},t.prototype.getTotalIndices=function(){return this._sourceMesh.getTotalIndices()},Object.defineProperty(t.prototype,"sourceMesh",{get:function(){return this._sourceMesh},enumerable:!0,configurable:!0}),t.prototype.isReady=function(e){return void 0===e&&(e=!1),this._sourceMesh.isReady(e,!0)},t.prototype.getVerticesData=function(e,t){return this._sourceMesh.getVerticesData(e,t)},t.prototype.setVerticesData=function(e,t,n,r){return this.sourceMesh&&this.sourceMesh.setVerticesData(e,t,n,r),this.sourceMesh},t.prototype.updateVerticesData=function(e,t,n,r){return this.sourceMesh&&this.sourceMesh.updateVerticesData(e,t,n,r),this.sourceMesh},t.prototype.setIndices=function(e,t){return void 0===t&&(t=null),this.sourceMesh&&this.sourceMesh.setIndices(e,t),this.sourceMesh},t.prototype.isVerticesDataPresent=function(e){return this._sourceMesh.isVerticesDataPresent(e)},t.prototype.getIndices=function(){return this._sourceMesh.getIndices()},Object.defineProperty(t.prototype,"_positions",{get:function(){return this._sourceMesh._positions},enumerable:!0,configurable:!0}),t.prototype.refreshBoundingInfo=function(e){if(void 0===e&&(e=!1),this._boundingInfo&&this._boundingInfo.isLocked)return this;var t=this._sourceMesh.geometry?this._sourceMesh.geometry.boundingBias:null;return this._refreshBoundingInfo(this._sourceMesh._getPositionData(e),t),this},t.prototype._preActivate=function(){return this._currentLOD&&this._currentLOD._preActivate(),this},t.prototype._activate=function(e,t){if(this._currentLOD&&this._currentLOD._registerInstanceForRenderId(this,e),t){if(!this._currentLOD._internalAbstractMeshDataInfo._isActiveIntermediate)return this._currentLOD._internalAbstractMeshDataInfo._onlyForInstancesIntermediate=!0,!0}else if(!this._currentLOD._internalAbstractMeshDataInfo._isActive)return this._currentLOD._internalAbstractMeshDataInfo._onlyForInstances=!0,!0;return!1},t.prototype._postActivate=function(){this._edgesRenderer&&this._edgesRenderer.isEnabled&&this._sourceMesh._renderingGroup&&this._sourceMesh._renderingGroup._edgesRenderers.push(this._edgesRenderer)},t.prototype.getWorldMatrix=function(){if(this._currentLOD&&this._currentLOD.billboardMode!==l.a.BILLBOARDMODE_NONE&&this._currentLOD._masterMesh!==this){var t=this._currentLOD._masterMesh;return this._currentLOD._masterMesh=this,i.t.Matrix[0].copyFrom(this._currentLOD.computeWorldMatrix(!0)),this._currentLOD._masterMesh=t,i.t.Matrix[0]}return e.prototype.getWorldMatrix.call(this)},Object.defineProperty(t.prototype,"isAnInstance",{get:function(){return!0},enumerable:!0,configurable:!0}),t.prototype.getLOD=function(e){if(!e)return this;var t=this.getBoundingInfo();return this._currentLOD=this.sourceMesh.getLOD(e,t.boundingSphere),this._currentLOD===this.sourceMesh?this.sourceMesh:this._currentLOD},t.prototype._syncSubMeshes=function(){if(this.releaseSubMeshes(),this._sourceMesh.subMeshes)for(var e=0;e<this._sourceMesh.subMeshes.length;e++)this._sourceMesh.subMeshes[e].clone(this,this._sourceMesh);return this},t.prototype._generatePointsArray=function(){return this._sourceMesh._generatePointsArray()},t.prototype.clone=function(e,t,n){var r=this._sourceMesh.createInstance(e);if(u.a.DeepCopy(this,r,["name","subMeshes","uniqueId"],[]),this.refreshBoundingInfo(),t&&(r.parent=t),!n)for(var i=0;i<this.getScene().meshes.length;i++){var o=this.getScene().meshes[i];o.parent===this&&o.clone(o.name,r)}return r.computeWorldMatrix(!0),r},t.prototype.dispose=function(t,n){void 0===n&&(n=!1),this._sourceMesh.removeInstance(this),e.prototype.dispose.call(this,t,n)},t}(a.a)},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.shadowsFragmentFunctions="#ifdef SHADOWS\n#ifndef SHADOWFLOAT\nfloat unpack(vec4 color)\n{\nconst vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);\nreturn dot(color,bit_shift);\n}\n#endif\nfloat computeFallOff(float value,vec2 clipSpace,float frustumEdgeFalloff)\n{\nfloat mask=smoothstep(1.0-frustumEdgeFalloff,1.0,clamp(dot(clipSpace,clipSpace),0.,1.));\nreturn mix(value,1.0,mask);\n}\nfloat computeShadowCube(vec3 lightPosition,samplerCube shadowSampler,float darkness,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\ndepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\n#ifndef SHADOWFLOAT\nfloat shadow=unpack(textureCube(shadowSampler,directionToLight));\n#else\nfloat shadow=textureCube(shadowSampler,directionToLight).x;\n#endif\nif (depth>shadow)\n{\nreturn darkness;\n}\nreturn 1.0;\n}\nfloat computeShadowWithPoissonSamplingCube(vec3 lightPosition,samplerCube shadowSampler,float mapSize,float darkness,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\ndepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\nfloat visibility=1.;\nvec3 poissonDisk[4];\npoissonDisk[0]=vec3(-1.0,1.0,-1.0);\npoissonDisk[1]=vec3(1.0,-1.0,-1.0);\npoissonDisk[2]=vec3(-1.0,-1.0,-1.0);\npoissonDisk[3]=vec3(1.0,-1.0,1.0);\n\n#ifndef SHADOWFLOAT\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[0]*mapSize))<depth) visibility-=0.25;\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[1]*mapSize))<depth) visibility-=0.25;\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[2]*mapSize))<depth) visibility-=0.25;\nif (unpack(textureCube(shadowSampler,directionToLight+poissonDisk[3]*mapSize))<depth) visibility-=0.25;\n#else\nif (textureCube(shadowSampler,directionToLight+poissonDisk[0]*mapSize).x<depth) visibility-=0.25;\nif (textureCube(shadowSampler,directionToLight+poissonDisk[1]*mapSize).x<depth) visibility-=0.25;\nif (textureCube(shadowSampler,directionToLight+poissonDisk[2]*mapSize).x<depth) visibility-=0.25;\nif (textureCube(shadowSampler,directionToLight+poissonDisk[3]*mapSize).x<depth) visibility-=0.25;\n#endif\nreturn min(1.0,visibility+darkness);\n}\nfloat computeShadowWithESMCube(vec3 lightPosition,samplerCube shadowSampler,float darkness,float depthScale,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\nfloat shadowPixelDepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(textureCube(shadowSampler,directionToLight));\n#else\nfloat shadowMapSample=textureCube(shadowSampler,directionToLight).x;\n#endif\nfloat esm=1.0-clamp(exp(min(87.,depthScale*shadowPixelDepth))*shadowMapSample,0.,1.-darkness);\nreturn esm;\n}\nfloat computeShadowWithCloseESMCube(vec3 lightPosition,samplerCube shadowSampler,float darkness,float depthScale,vec2 depthValues)\n{\nvec3 directionToLight=vPositionW-lightPosition;\nfloat depth=length(directionToLight);\ndepth=(depth+depthValues.x)/(depthValues.y);\nfloat shadowPixelDepth=clamp(depth,0.,1.0);\ndirectionToLight=normalize(directionToLight);\ndirectionToLight.y=-directionToLight.y;\n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(textureCube(shadowSampler,directionToLight));\n#else\nfloat shadowMapSample=textureCube(shadowSampler,directionToLight).x;\n#endif\nfloat esm=clamp(exp(min(87.,-depthScale*(shadowPixelDepth-shadowMapSample))),darkness,1.);\nreturn esm;\n}\nfloat computeShadow(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float darkness,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\n#ifndef SHADOWFLOAT\nfloat shadow=unpack(texture2D(shadowSampler,uv));\n#else\nfloat shadow=texture2D(shadowSampler,uv).x;\n#endif\nif (shadowPixelDepth>shadow)\n{\nreturn computeFallOff(darkness,clipSpace.xy,frustumEdgeFalloff);\n}\nreturn 1.;\n}\nfloat computeShadowWithPoissonSampling(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float mapSize,float darkness,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\nfloat visibility=1.;\nvec2 poissonDisk[4];\npoissonDisk[0]=vec2(-0.94201624,-0.39906216);\npoissonDisk[1]=vec2(0.94558609,-0.76890725);\npoissonDisk[2]=vec2(-0.094184101,-0.92938870);\npoissonDisk[3]=vec2(0.34495938,0.29387760);\n\n#ifndef SHADOWFLOAT\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[0]*mapSize))<shadowPixelDepth) visibility-=0.25;\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[1]*mapSize))<shadowPixelDepth) visibility-=0.25;\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[2]*mapSize))<shadowPixelDepth) visibility-=0.25;\nif (unpack(texture2D(shadowSampler,uv+poissonDisk[3]*mapSize))<shadowPixelDepth) visibility-=0.25;\n#else\nif (texture2D(shadowSampler,uv+poissonDisk[0]*mapSize).x<shadowPixelDepth) visibility-=0.25;\nif (texture2D(shadowSampler,uv+poissonDisk[1]*mapSize).x<shadowPixelDepth) visibility-=0.25;\nif (texture2D(shadowSampler,uv+poissonDisk[2]*mapSize).x<shadowPixelDepth) visibility-=0.25;\nif (texture2D(shadowSampler,uv+poissonDisk[3]*mapSize).x<shadowPixelDepth) visibility-=0.25;\n#endif\nreturn computeFallOff(min(1.0,visibility+darkness),clipSpace.xy,frustumEdgeFalloff);\n}\nfloat computeShadowWithESM(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float darkness,float depthScale,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(texture2D(shadowSampler,uv));\n#else\nfloat shadowMapSample=texture2D(shadowSampler,uv).x;\n#endif\nfloat esm=1.0-clamp(exp(min(87.,depthScale*shadowPixelDepth))*shadowMapSample,0.,1.-darkness);\nreturn computeFallOff(esm,clipSpace.xy,frustumEdgeFalloff);\n}\nfloat computeShadowWithCloseESM(vec4 vPositionFromLight,float depthMetric,sampler2D shadowSampler,float darkness,float depthScale,float frustumEdgeFalloff)\n{\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec2 uv=0.5*clipSpace.xy+vec2(0.5);\nif (uv.x<0. || uv.x>1.0 || uv.y<0. || uv.y>1.0)\n{\nreturn 1.0;\n}\nfloat shadowPixelDepth=clamp(depthMetric,0.,1.0);\n#ifndef SHADOWFLOAT\nfloat shadowMapSample=unpack(texture2D(shadowSampler,uv));\n#else\nfloat shadowMapSample=texture2D(shadowSampler,uv).x;\n#endif\nfloat esm=clamp(exp(min(87.,-depthScale*(shadowPixelDepth-shadowMapSample))),darkness,1.);\nreturn computeFallOff(esm,clipSpace.xy,frustumEdgeFalloff);\n}\n#ifdef WEBGL2\n\nfloat computeShadowWithPCF1(vec4 vPositionFromLight,float depthMetric,sampler2DShadow shadowSampler,float darkness,float frustumEdgeFalloff)\n{\nif (depthMetric>1.0 || depthMetric<0.0) {\nreturn 1.0;\n}\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nfloat shadow=texture2D(shadowSampler,uvDepth);\nshadow=mix(darkness,1.,shadow);\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\n\n\n\nfloat computeShadowWithPCF3(vec4 vPositionFromLight,float depthMetric,sampler2DShadow shadowSampler,vec2 shadowMapSizeAndInverse,float darkness,float frustumEdgeFalloff)\n{\nif (depthMetric>1.0 || depthMetric<0.0) {\nreturn 1.0;\n}\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nvec2 uv=uvDepth.xy*shadowMapSizeAndInverse.x;\nuv+=0.5;\nvec2 st=fract(uv);\nvec2 base_uv=floor(uv)-0.5;\nbase_uv*=shadowMapSizeAndInverse.y;\n\n\n\n\nvec2 uvw0=3.-2.*st;\nvec2 uvw1=1.+2.*st;\nvec2 u=vec2((2.-st.x)/uvw0.x-1.,st.x/uvw1.x+1.)*shadowMapSizeAndInverse.y;\nvec2 v=vec2((2.-st.y)/uvw0.y-1.,st.y/uvw1.y+1.)*shadowMapSizeAndInverse.y;\nfloat shadow=0.;\nshadow+=uvw0.x*uvw0.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[0],v[0]),uvDepth.z));\nshadow+=uvw1.x*uvw0.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[1],v[0]),uvDepth.z));\nshadow+=uvw0.x*uvw1.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[0],v[1]),uvDepth.z));\nshadow+=uvw1.x*uvw1.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[1],v[1]),uvDepth.z));\nshadow=shadow/16.;\nshadow=mix(darkness,1.,shadow);\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\n\n\n\nfloat computeShadowWithPCF5(vec4 vPositionFromLight,float depthMetric,sampler2DShadow shadowSampler,vec2 shadowMapSizeAndInverse,float darkness,float frustumEdgeFalloff)\n{\nif (depthMetric>1.0 || depthMetric<0.0) {\nreturn 1.0;\n}\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nvec2 uv=uvDepth.xy*shadowMapSizeAndInverse.x;\nuv+=0.5;\nvec2 st=fract(uv);\nvec2 base_uv=floor(uv)-0.5;\nbase_uv*=shadowMapSizeAndInverse.y;\n\n\nvec2 uvw0=4.-3.*st;\nvec2 uvw1=vec2(7.);\nvec2 uvw2=1.+3.*st;\nvec3 u=vec3((3.-2.*st.x)/uvw0.x-2.,(3.+st.x)/uvw1.x,st.x/uvw2.x+2.)*shadowMapSizeAndInverse.y;\nvec3 v=vec3((3.-2.*st.y)/uvw0.y-2.,(3.+st.y)/uvw1.y,st.y/uvw2.y+2.)*shadowMapSizeAndInverse.y;\nfloat shadow=0.;\nshadow+=uvw0.x*uvw0.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[0],v[0]),uvDepth.z));\nshadow+=uvw1.x*uvw0.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[1],v[0]),uvDepth.z));\nshadow+=uvw2.x*uvw0.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[2],v[0]),uvDepth.z));\nshadow+=uvw0.x*uvw1.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[0],v[1]),uvDepth.z));\nshadow+=uvw1.x*uvw1.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[1],v[1]),uvDepth.z));\nshadow+=uvw2.x*uvw1.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[2],v[1]),uvDepth.z));\nshadow+=uvw0.x*uvw2.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[0],v[2]),uvDepth.z));\nshadow+=uvw1.x*uvw2.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[1],v[2]),uvDepth.z));\nshadow+=uvw2.x*uvw2.y*texture2D(shadowSampler,vec3(base_uv.xy+vec2(u[2],v[2]),uvDepth.z));\nshadow=shadow/144.;\nshadow=mix(darkness,1.,shadow);\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\nconst vec3 PoissonSamplers32[64]=vec3[64](\nvec3(0.06407013,0.05409927,0.),\nvec3(0.7366577,0.5789394,0.),\nvec3(-0.6270542,-0.5320278,0.),\nvec3(-0.4096107,0.8411095,0.),\nvec3(0.6849564,-0.4990818,0.),\nvec3(-0.874181,-0.04579735,0.),\nvec3(0.9989998,0.0009880066,0.),\nvec3(-0.004920578,-0.9151649,0.),\nvec3(0.1805763,0.9747483,0.),\nvec3(-0.2138451,0.2635818,0.),\nvec3(0.109845,0.3884785,0.),\nvec3(0.06876755,-0.3581074,0.),\nvec3(0.374073,-0.7661266,0.),\nvec3(0.3079132,-0.1216763,0.),\nvec3(-0.3794335,-0.8271583,0.),\nvec3(-0.203878,-0.07715034,0.),\nvec3(0.5912697,0.1469799,0.),\nvec3(-0.88069,0.3031784,0.),\nvec3(0.5040108,0.8283722,0.),\nvec3(-0.5844124,0.5494877,0.),\nvec3(0.6017799,-0.1726654,0.),\nvec3(-0.5554981,0.1559997,0.),\nvec3(-0.3016369,-0.3900928,0.),\nvec3(-0.5550632,-0.1723762,0.),\nvec3(0.925029,0.2995041,0.),\nvec3(-0.2473137,0.5538505,0.),\nvec3(0.9183037,-0.2862392,0.),\nvec3(0.2469421,0.6718712,0.),\nvec3(0.3916397,-0.4328209,0.),\nvec3(-0.03576927,-0.6220032,0.),\nvec3(-0.04661255,0.7995201,0.),\nvec3(0.4402924,0.3640312,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.),\nvec3(0.,0.,0.)\n);\nconst vec3 PoissonSamplers64[64]=vec3[64](\nvec3(-0.613392,0.617481,0.),\nvec3(0.170019,-0.040254,0.),\nvec3(-0.299417,0.791925,0.),\nvec3(0.645680,0.493210,0.),\nvec3(-0.651784,0.717887,0.),\nvec3(0.421003,0.027070,0.),\nvec3(-0.817194,-0.271096,0.),\nvec3(-0.705374,-0.668203,0.),\nvec3(0.977050,-0.108615,0.),\nvec3(0.063326,0.142369,0.),\nvec3(0.203528,0.214331,0.),\nvec3(-0.667531,0.326090,0.),\nvec3(-0.098422,-0.295755,0.),\nvec3(-0.885922,0.215369,0.),\nvec3(0.566637,0.605213,0.),\nvec3(0.039766,-0.396100,0.),\nvec3(0.751946,0.453352,0.),\nvec3(0.078707,-0.715323,0.),\nvec3(-0.075838,-0.529344,0.),\nvec3(0.724479,-0.580798,0.),\nvec3(0.222999,-0.215125,0.),\nvec3(-0.467574,-0.405438,0.),\nvec3(-0.248268,-0.814753,0.),\nvec3(0.354411,-0.887570,0.),\nvec3(0.175817,0.382366,0.),\nvec3(0.487472,-0.063082,0.),\nvec3(-0.084078,0.898312,0.),\nvec3(0.488876,-0.783441,0.),\nvec3(0.470016,0.217933,0.),\nvec3(-0.696890,-0.549791,0.),\nvec3(-0.149693,0.605762,0.),\nvec3(0.034211,0.979980,0.),\nvec3(0.503098,-0.308878,0.),\nvec3(-0.016205,-0.872921,0.),\nvec3(0.385784,-0.393902,0.),\nvec3(-0.146886,-0.859249,0.),\nvec3(0.643361,0.164098,0.),\nvec3(0.634388,-0.049471,0.),\nvec3(-0.688894,0.007843,0.),\nvec3(0.464034,-0.188818,0.),\nvec3(-0.440840,0.137486,0.),\nvec3(0.364483,0.511704,0.),\nvec3(0.034028,0.325968,0.),\nvec3(0.099094,-0.308023,0.),\nvec3(0.693960,-0.366253,0.),\nvec3(0.678884,-0.204688,0.),\nvec3(0.001801,0.780328,0.),\nvec3(0.145177,-0.898984,0.),\nvec3(0.062655,-0.611866,0.),\nvec3(0.315226,-0.604297,0.),\nvec3(-0.780145,0.486251,0.),\nvec3(-0.371868,0.882138,0.),\nvec3(0.200476,0.494430,0.),\nvec3(-0.494552,-0.711051,0.),\nvec3(0.612476,0.705252,0.),\nvec3(-0.578845,-0.768792,0.),\nvec3(-0.772454,-0.090976,0.),\nvec3(0.504440,0.372295,0.),\nvec3(0.155736,0.065157,0.),\nvec3(0.391522,0.849605,0.),\nvec3(-0.620106,-0.328104,0.),\nvec3(0.789239,-0.419965,0.),\nvec3(-0.545396,0.538133,0.),\nvec3(-0.178564,-0.596057,0.)\n);\n\n\n\n\n\nfloat computeShadowWithPCSS(vec4 vPositionFromLight,float depthMetric,sampler2D depthSampler,sampler2DShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff,int searchTapCount,int pcfTapCount,vec3[64] poissonSamplers)\n{\nif (depthMetric>1.0 || depthMetric<0.0) {\nreturn 1.0;\n}\nvec3 clipSpace=vPositionFromLight.xyz/vPositionFromLight.w;\nvec3 uvDepth=vec3(0.5*clipSpace.xyz+vec3(0.5));\nfloat blockerDepth=0.0;\nfloat sumBlockerDepth=0.0;\nfloat numBlocker=0.0;\nfor (int i=0; i<searchTapCount; i ++) {\nblockerDepth=texture(depthSampler,uvDepth.xy+(lightSizeUV*shadowMapSizeInverse*PoissonSamplers32[i].xy)).r;\nif (blockerDepth<depthMetric) {\nsumBlockerDepth+=blockerDepth;\nnumBlocker++;\n}\n}\nif (numBlocker<1.0) {\nreturn 1.0;\n}\nfloat avgBlockerDepth=sumBlockerDepth/numBlocker;\n\nfloat AAOffset=shadowMapSizeInverse*10.;\n\n\nfloat penumbraRatio=((depthMetric-avgBlockerDepth)+AAOffset);\nfloat filterRadius=penumbraRatio*lightSizeUV*shadowMapSizeInverse;\nfloat random=getRand(vPositionFromLight.xy);\nfloat rotationAngle=random*3.1415926;\nvec2 rotationVector=vec2(cos(rotationAngle),sin(rotationAngle));\nfloat shadow=0.;\nfor (int i=0; i<pcfTapCount; i++) {\nvec3 offset=poissonSamplers[i];\n\noffset=vec3(offset.x*rotationVector.x-offset.y*rotationVector.y,offset.y*rotationVector.x+offset.x*rotationVector.y,0.);\nshadow+=texture2D(shadowSampler,uvDepth+offset*filterRadius);\n}\nshadow/=float(pcfTapCount);\n\nshadow=mix(shadow,1.,depthMetric-avgBlockerDepth);\n\nshadow=mix(darkness,1.,shadow);\n\nreturn computeFallOff(shadow,clipSpace.xy,frustumEdgeFalloff);\n}\nfloat computeShadowWithPCSS16(vec4 vPositionFromLight,float depthMetric,sampler2D depthSampler,sampler2DShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff)\n{\nreturn computeShadowWithPCSS(vPositionFromLight,depthMetric,depthSampler,shadowSampler,shadowMapSizeInverse,lightSizeUV,darkness,frustumEdgeFalloff,16,16,PoissonSamplers32);\n}\nfloat computeShadowWithPCSS32(vec4 vPositionFromLight,float depthMetric,sampler2D depthSampler,sampler2DShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff)\n{\nreturn computeShadowWithPCSS(vPositionFromLight,depthMetric,depthSampler,shadowSampler,shadowMapSizeInverse,lightSizeUV,darkness,frustumEdgeFalloff,16,32,PoissonSamplers32);\n}\nfloat computeShadowWithPCSS64(vec4 vPositionFromLight,float depthMetric,sampler2D depthSampler,sampler2DShadow shadowSampler,float shadowMapSizeInverse,float lightSizeUV,float darkness,float frustumEdgeFalloff)\n{\nreturn computeShadowWithPCSS(vPositionFromLight,depthMetric,depthSampler,shadowSampler,shadowMapSizeInverse,lightSizeUV,darkness,frustumEdgeFalloff,32,64,PoissonSamplers64);\n}\n#endif\n#endif\n"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.reflectionFunction="#ifdef USE_LOCAL_REFLECTIONMAP_CUBIC\nvec3 parallaxCorrectNormal( vec3 vertexPos,vec3 origVec,vec3 cubeSize,vec3 cubePos ) {\n\nvec3 invOrigVec=vec3(1.0,1.0,1.0)/origVec;\nvec3 halfSize=cubeSize*0.5;\nvec3 intersecAtMaxPlane=(cubePos+halfSize-vertexPos)*invOrigVec;\nvec3 intersecAtMinPlane=(cubePos-halfSize-vertexPos)*invOrigVec;\n\nvec3 largestIntersec=max(intersecAtMaxPlane,intersecAtMinPlane);\n\nfloat distance=min(min(largestIntersec.x,largestIntersec.y),largestIntersec.z);\n\nvec3 intersectPositionWS=vertexPos+origVec*distance;\n\nreturn intersectPositionWS-cubePos;\n}\n#endif\nvec3 computeReflectionCoords(vec4 worldPos,vec3 worldNormal)\n{\n#if defined(REFLECTIONMAP_EQUIRECTANGULAR_FIXED) || defined(REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED)\nvec3 direction=normalize(vDirectionW);\nfloat lon=atan(direction.z,direction.x);\nfloat lat=acos(direction.y);\nvec2 sphereCoords=vec2(lon,lat)*RECIPROCAL_PI2*2.0;\nfloat s=sphereCoords.x*0.5+0.5;\nfloat t=sphereCoords.y;\n#ifdef REFLECTIONMAP_MIRROREDEQUIRECTANGULAR_FIXED\nreturn vec3(1.0-s,t,0);\n#else\nreturn vec3(s,t,0);\n#endif\n#endif\n#ifdef REFLECTIONMAP_EQUIRECTANGULAR\nvec3 cameraToVertex=normalize(worldPos.xyz-vEyePosition.xyz);\nvec3 r=normalize(reflect(cameraToVertex,worldNormal));\nr=vec3(reflectionMatrix*vec4(r,0));\nfloat lon=atan(r.z,r.x);\nfloat lat=acos(r.y);\nvec2 sphereCoords=vec2(lon,lat)*RECIPROCAL_PI2*2.0;\nfloat s=sphereCoords.x*0.5+0.5;\nfloat t=sphereCoords.y;\nreturn vec3(s,t,0);\n#endif\n#ifdef REFLECTIONMAP_SPHERICAL\nvec3 viewDir=normalize(vec3(view*worldPos));\nvec3 viewNormal=normalize(vec3(view*vec4(worldNormal,0.0)));\nvec3 r=reflect(viewDir,viewNormal);\nr=vec3(reflectionMatrix*vec4(r,0));\nr.z=r.z-1.0;\nfloat m=2.0*length(r);\nreturn vec3(r.x/m+0.5,1.0-r.y/m-0.5,0);\n#endif\n#ifdef REFLECTIONMAP_PLANAR\nvec3 viewDir=worldPos.xyz-vEyePosition.xyz;\nvec3 coords=normalize(reflect(viewDir,worldNormal));\nreturn vec3(reflectionMatrix*vec4(coords,1));\n#endif\n#ifdef REFLECTIONMAP_CUBIC\nvec3 viewDir=normalize(worldPos.xyz-vEyePosition.xyz);\n\nvec3 coords=reflect(viewDir,worldNormal);\n#ifdef USE_LOCAL_REFLECTIONMAP_CUBIC\ncoords=parallaxCorrectNormal(worldPos.xyz,coords,vReflectionSize,vReflectionPosition);\n#endif\ncoords=vec3(reflectionMatrix*vec4(coords,0));\n#ifdef INVERTCUBICMAP\ncoords.y*=-1.0;\n#endif\nreturn coords;\n#endif\n#ifdef REFLECTIONMAP_PROJECTION\nreturn vec3(reflectionMatrix*(view*worldPos));\n#endif\n#ifdef REFLECTIONMAP_SKYBOX\nreturn vec3(reflectionMatrix*vec4(vPositionUVW,0));\n#endif\n#ifdef REFLECTIONMAP_EXPLICIT\nreturn vec3(0,0,0);\n#endif\n}"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.lightFragment="#ifdef LIGHT{X}\n#if defined(SHADOWONLY) || (defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X}) && defined(LIGHTMAPNOSPECULAR{X}))\n\n#else\n#ifdef PBR\n\n#ifdef SPOTLIGHT{X}\npreInfo=computePointAndSpotPreLightingInfo(light{X}.vLightData,viewDirectionW,normalW);\n#elif defined(POINTLIGHT{X})\npreInfo=computePointAndSpotPreLightingInfo(light{X}.vLightData,viewDirectionW,normalW);\n#elif defined(HEMILIGHT{X})\npreInfo=computeHemisphericPreLightingInfo(light{X}.vLightData,viewDirectionW,normalW);\n#elif defined(DIRLIGHT{X})\npreInfo=computeDirectionalPreLightingInfo(light{X}.vLightData,viewDirectionW,normalW);\n#endif\npreInfo.NdotV=NdotV;\n\n#ifdef SPOTLIGHT{X}\n#ifdef LIGHT_FALLOFF_GLTF{X}\npreInfo.attenuation=computeDistanceLightFalloff_GLTF(preInfo.lightDistanceSquared,light{X}.vLightFalloff.y);\npreInfo.attenuation*=computeDirectionalLightFalloff_GLTF(light{X}.vLightDirection.xyz,preInfo.L,light{X}.vLightFalloff.z,light{X}.vLightFalloff.w);\n#elif defined(LIGHT_FALLOFF_PHYSICAL{X})\npreInfo.attenuation=computeDistanceLightFalloff_Physical(preInfo.lightDistanceSquared);\npreInfo.attenuation*=computeDirectionalLightFalloff_Physical(light{X}.vLightDirection.xyz,preInfo.L,light{X}.vLightDirection.w);\n#elif defined(LIGHT_FALLOFF_STANDARD{X})\npreInfo.attenuation=computeDistanceLightFalloff_Standard(preInfo.lightOffset,light{X}.vLightFalloff.x);\npreInfo.attenuation*=computeDirectionalLightFalloff_Standard(light{X}.vLightDirection.xyz,preInfo.L,light{X}.vLightDirection.w,light{X}.vLightData.w);\n#else\npreInfo.attenuation=computeDistanceLightFalloff(preInfo.lightOffset,preInfo.lightDistanceSquared,light{X}.vLightFalloff.x,light{X}.vLightFalloff.y);\npreInfo.attenuation*=computeDirectionalLightFalloff(light{X}.vLightDirection.xyz,preInfo.L,light{X}.vLightDirection.w,light{X}.vLightData.w,light{X}.vLightFalloff.z,light{X}.vLightFalloff.w);\n#endif\n#elif defined(POINTLIGHT{X})\n#ifdef LIGHT_FALLOFF_GLTF{X}\npreInfo.attenuation=computeDistanceLightFalloff_GLTF(preInfo.lightDistanceSquared,light{X}.vLightFalloff.y);\n#elif defined(LIGHT_FALLOFF_PHYSICAL{X})\npreInfo.attenuation=computeDistanceLightFalloff_Physical(preInfo.lightDistanceSquared);\n#elif defined(LIGHT_FALLOFF_STANDARD{X})\npreInfo.attenuation=computeDistanceLightFalloff_Standard(preInfo.lightOffset,light{X}.vLightFalloff.x);\n#else\npreInfo.attenuation=computeDistanceLightFalloff(preInfo.lightOffset,preInfo.lightDistanceSquared,light{X}.vLightFalloff.x,light{X}.vLightFalloff.y);\n#endif\n#else\npreInfo.attenuation=1.0;\n#endif\n\n\n#ifdef HEMILIGHT{X}\npreInfo.roughness=roughness;\n#else\npreInfo.roughness=adjustRoughnessFromLightProperties(roughness,light{X}.vLightDiffuse.a,preInfo.lightDistance);\n#endif\n\n#ifdef HEMILIGHT{X}\ninfo.diffuse=computeHemisphericDiffuseLighting(preInfo,light{X}.vLightDiffuse.rgb,light{X}.vLightGround);\n#elif defined(SS_TRANSLUCENCY)\ninfo.diffuse=computeDiffuseAndTransmittedLighting(preInfo,light{X}.vLightDiffuse.rgb,transmittance);\n#else\ninfo.diffuse=computeDiffuseLighting(preInfo,light{X}.vLightDiffuse.rgb);\n#endif\n\n#ifdef SPECULARTERM\n#ifdef ANISOTROPIC\ninfo.specular=computeAnisotropicSpecularLighting(preInfo,viewDirectionW,normalW,anisotropicTangent,anisotropicBitangent,anisotropy,specularEnvironmentR0,specularEnvironmentR90,AARoughnessFactors.x,light{X}.vLightDiffuse.rgb);\n#else\ninfo.specular=computeSpecularLighting(preInfo,normalW,specularEnvironmentR0,specularEnvironmentR90,AARoughnessFactors.x,light{X}.vLightDiffuse.rgb);\n#endif\n#endif\n\n#ifdef SHEEN\n#ifdef SHEEN_LINKWITHALBEDO\n\npreInfo.roughness=sheenIntensity;\n#endif\ninfo.sheen=computeSheenLighting(preInfo,normalW,sheenColor,specularEnvironmentR90,AARoughnessFactors.x,light{X}.vLightDiffuse.rgb);\n#endif\n\n#ifdef CLEARCOAT\n\n#ifdef HEMILIGHT{X}\npreInfo.roughness=clearCoatRoughness;\n#else\npreInfo.roughness=adjustRoughnessFromLightProperties(clearCoatRoughness,light{X}.vLightDiffuse.a,preInfo.lightDistance);\n#endif\ninfo.clearCoat=computeClearCoatLighting(preInfo,clearCoatNormalW,clearCoatAARoughnessFactors.x,clearCoatIntensity,light{X}.vLightDiffuse.rgb);\n#ifdef CLEARCOAT_TINT\n\nabsorption=computeClearCoatLightingAbsorption(clearCoatNdotVRefract,preInfo.L,clearCoatNormalW,clearCoatColor,clearCoatThickness,clearCoatIntensity);\ninfo.diffuse*=absorption;\n#ifdef SPECULARTERM\ninfo.specular*=absorption;\n#endif\n#endif\n\ninfo.diffuse*=info.clearCoat.w;\n#ifdef SPECULARTERM\ninfo.specular*=info.clearCoat.w*info.clearCoat.w;\n#endif\n#ifdef SHEEN\ninfo.sheen*=info.clearCoat.w*info.clearCoat.w;\n#endif\n#endif\n#else\n#ifdef SPOTLIGHT{X}\ninfo=computeSpotLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDirection,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular,light{X}.vLightDiffuse.a,glossiness);\n#elif defined(HEMILIGHT{X})\ninfo=computeHemisphericLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular,light{X}.vLightGround,glossiness);\n#elif defined(POINTLIGHT{X}) || defined(DIRLIGHT{X})\ninfo=computeLighting(viewDirectionW,normalW,light{X}.vLightData,light{X}.vLightDiffuse.rgb,light{X}.vLightSpecular,light{X}.vLightDiffuse.a,glossiness);\n#endif\n#endif\n#ifdef PROJECTEDLIGHTTEXTURE{X}\ninfo.diffuse*=computeProjectionTextureDiffuseLighting(projectionLightSampler{X},textureProjectionMatrix{X});\n#endif\n#endif\n#ifdef SHADOW{X}\n#ifdef SHADOWCLOSEESM{X}\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowWithCloseESMCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.depthValues);\n#else\nshadow=computeShadowWithCloseESM(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.shadowsInfo.w);\n#endif\n#elif defined(SHADOWESM{X})\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowWithESMCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.depthValues);\n#else\nshadow=computeShadowWithESM(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.z,light{X}.shadowsInfo.w);\n#endif\n#elif defined(SHADOWPOISSON{X})\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowWithPoissonSamplingCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.x,light{X}.depthValues);\n#else\nshadow=computeShadowWithPoissonSampling(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#elif defined(SHADOWPCF{X})\n#if defined(SHADOWLOWQUALITY{X})\nshadow=computeShadowWithPCF1(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#elif defined(SHADOWMEDIUMQUALITY{X})\nshadow=computeShadowWithPCF3(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.yz,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#else\nshadow=computeShadowWithPCF5(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.yz,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#elif defined(SHADOWPCSS{X})\n#if defined(SHADOWLOWQUALITY{X})\nshadow=computeShadowWithPCSS16(vPositionFromLight{X},vDepthMetric{X},depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#elif defined(SHADOWMEDIUMQUALITY{X})\nshadow=computeShadowWithPCSS32(vPositionFromLight{X},vDepthMetric{X},depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#else\nshadow=computeShadowWithPCSS64(vPositionFromLight{X},vDepthMetric{X},depthSampler{X},shadowSampler{X},light{X}.shadowsInfo.y,light{X}.shadowsInfo.z,light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#else\n#if defined(SHADOWCUBE{X})\nshadow=computeShadowCube(light{X}.vLightData.xyz,shadowSampler{X},light{X}.shadowsInfo.x,light{X}.depthValues);\n#else\nshadow=computeShadow(vPositionFromLight{X},vDepthMetric{X},shadowSampler{X},light{X}.shadowsInfo.x,light{X}.shadowsInfo.w);\n#endif\n#endif\n#ifdef SHADOWONLY\n#ifndef SHADOWINUSE\n#define SHADOWINUSE\n#endif\nglobalShadow+=shadow;\nshadowLightCount+=1.0;\n#endif\n#else\nshadow=1.;\n#endif\n#ifndef SHADOWONLY\n#ifdef CUSTOMUSERLIGHTING\ndiffuseBase+=computeCustomDiffuseLighting(info,diffuseBase,shadow);\n#ifdef SPECULARTERM\nspecularBase+=computeCustomSpecularLighting(info,specularBase,shadow);\n#endif\n#elif defined(LIGHTMAP) && defined(LIGHTMAPEXCLUDED{X})\ndiffuseBase+=lightmapColor*shadow;\n#ifdef SPECULARTERM\n#ifndef LIGHTMAPNOSPECULAR{X}\nspecularBase+=info.specular*shadow*lightmapColor;\n#endif\n#endif\n#ifdef CLEARCOAT\n#ifndef LIGHTMAPNOSPECULAR{X}\nclearCoatBase+=info.clearCoat.rgb*shadow*lightmapColor;\n#endif\n#endif\n#ifdef SHEEN\n#ifndef LIGHTMAPNOSPECULAR{X}\nsheenBase+=info.sheen.rgb*shadow;\n#endif\n#endif\n#else\ndiffuseBase+=info.diffuse*shadow;\n#ifdef SPECULARTERM\nspecularBase+=info.specular*shadow;\n#endif\n#ifdef CLEARCOAT\nclearCoatBase+=info.clearCoat.rgb*shadow;\n#endif\n#ifdef SHEEN\nsheenBase+=info.sheen.rgb*shadow;\n#endif\n#endif\n#endif\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.logDepthFragment="#ifdef LOGARITHMICDEPTH\ngl_FragDepthEXT=log2(vFragmentDepth)*logarithmicDepthConstant*0.5;\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.fogVertex="#ifdef FOG\nvFogDistance=(view*worldPos).xyz;\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.shadowsVertex="#ifdef SHADOWS\n#if defined(SHADOW{X}) && !defined(SHADOWCUBE{X})\nvPositionFromLight{X}=lightMatrix{X}*worldPos;\nvDepthMetric{X}=((vPositionFromLight{X}.z+light{X}.depthValues.x)/(light{X}.depthValues.y));\n#endif\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.logDepthVertex="#ifdef LOGARITHMICDEPTH\nvFragmentDepth=1.0+gl_Position.w;\ngl_Position.z=log2(max(0.000001,vFragmentDepth))*logarithmicDepthConstant;\n#endif"},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.lightsFragmentFunctions="\nstruct lightingInfo\n{\nvec3 diffuse;\n#ifdef SPECULARTERM\nvec3 specular;\n#endif\n#ifdef NDOTL\nfloat ndl;\n#endif\n};\nlightingInfo computeLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec3 diffuseColor,vec3 specularColor,float range,float glossiness) {\nlightingInfo result;\nvec3 lightVectorW;\nfloat attenuation=1.0;\nif (lightData.w == 0.)\n{\nvec3 direction=lightData.xyz-vPositionW;\nattenuation=max(0.,1.0-length(direction)/range);\nlightVectorW=normalize(direction);\n}\nelse\n{\nlightVectorW=normalize(-lightData.xyz);\n}\n\nfloat ndl=max(0.,dot(vNormal,lightVectorW));\n#ifdef NDOTL\nresult.ndl=ndl;\n#endif\nresult.diffuse=ndl*diffuseColor*attenuation;\n#ifdef SPECULARTERM\n\nvec3 angleW=normalize(viewDirectionW+lightVectorW);\nfloat specComp=max(0.,dot(vNormal,angleW));\nspecComp=pow(specComp,max(1.,glossiness));\nresult.specular=specComp*specularColor*attenuation;\n#endif\nreturn result;\n}\nlightingInfo computeSpotLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec4 lightDirection,vec3 diffuseColor,vec3 specularColor,float range,float glossiness) {\nlightingInfo result;\nvec3 direction=lightData.xyz-vPositionW;\nvec3 lightVectorW=normalize(direction);\nfloat attenuation=max(0.,1.0-length(direction)/range);\n\nfloat cosAngle=max(0.,dot(lightDirection.xyz,-lightVectorW));\nif (cosAngle>=lightDirection.w)\n{\ncosAngle=max(0.,pow(cosAngle,lightData.w));\nattenuation*=cosAngle;\n\nfloat ndl=max(0.,dot(vNormal,lightVectorW));\n#ifdef NDOTL\nresult.ndl=ndl;\n#endif\nresult.diffuse=ndl*diffuseColor*attenuation;\n#ifdef SPECULARTERM\n\nvec3 angleW=normalize(viewDirectionW+lightVectorW);\nfloat specComp=max(0.,dot(vNormal,angleW));\nspecComp=pow(specComp,max(1.,glossiness));\nresult.specular=specComp*specularColor*attenuation;\n#endif\nreturn result;\n}\nresult.diffuse=vec3(0.);\n#ifdef SPECULARTERM\nresult.specular=vec3(0.);\n#endif\n#ifdef NDOTL\nresult.ndl=0.;\n#endif\nreturn result;\n}\nlightingInfo computeHemisphericLighting(vec3 viewDirectionW,vec3 vNormal,vec4 lightData,vec3 diffuseColor,vec3 specularColor,vec3 groundColor,float glossiness) {\nlightingInfo result;\n\nfloat ndl=dot(vNormal,lightData.xyz)*0.5+0.5;\n#ifdef NDOTL\nresult.ndl=ndl;\n#endif\nresult.diffuse=mix(groundColor,diffuseColor,ndl);\n#ifdef SPECULARTERM\n\nvec3 angleW=normalize(viewDirectionW+lightData.xyz);\nfloat specComp=max(0.,dot(vNormal,angleW));\nspecComp=pow(specComp,max(1.,glossiness));\nresult.specular=specComp*specularColor;\n#endif\nreturn result;\n}\nvec3 computeProjectionTextureDiffuseLighting(sampler2D projectionLightSampler,mat4 textureProjectionMatrix){\nvec4 strq=textureProjectionMatrix*vec4(vPositionW,1.0);\nstrq/=strq.w;\nvec3 textureColor=texture2D(projectionLightSampler,strq.xy).rgb;\nreturn textureColor;\n}"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.bumpFragmentFunctions="#if defined(BUMP) || defined(CLEARCOAT_BUMP) || defined(ANISOTROPIC)\n#if defined(TANGENT) && defined(NORMAL)\nvarying mat3 vTBN;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\nuniform mat4 normalMatrix;\n#endif\nvec3 perturbNormal(mat3 cotangentFrame,vec2 uv,sampler2D textureSampler,float scale)\n{\nvec3 map=texture2D(textureSampler,uv).xyz;\nmap=map*2.0-1.0;\n#ifdef NORMALXYSCALE\nmap=normalize(map*vec3(scale,scale,1.0));\n#endif\nreturn normalize(cotangentFrame*map);\n}\n\nmat3 cotangent_frame(vec3 normal,vec3 p,vec2 uv,vec2 tangentSpaceParams)\n{\n\nuv=gl_FrontFacing ? uv : -uv;\n\nvec3 dp1=dFdx(p);\nvec3 dp2=dFdy(p);\nvec2 duv1=dFdx(uv);\nvec2 duv2=dFdy(uv);\n\nvec3 dp2perp=cross(dp2,normal);\nvec3 dp1perp=cross(normal,dp1);\nvec3 tangent=dp2perp*duv1.x+dp1perp*duv2.x;\nvec3 bitangent=dp2perp*duv1.y+dp1perp*duv2.y;\n\ntangent*=tangentSpaceParams.x;\nbitangent*=tangentSpaceParams.y;\n\nfloat invmax=inversesqrt(max(dot(tangent,tangent),dot(bitangent,bitangent)));\nreturn mat3(tangent*invmax,bitangent*invmax,normal);\n}\n#endif\n#ifdef BUMP\n#if BUMPDIRECTUV == 1\n#define vBumpUV vMainUV1\n#elif BUMPDIRECTUV == 2\n#define vBumpUV vMainUV2\n#else\nvarying vec2 vBumpUV;\n#endif\nuniform sampler2D bumpSampler;\nvec3 perturbNormal(mat3 cotangentFrame,vec2 uv)\n{\nreturn perturbNormal(cotangentFrame,uv,bumpSampler,vBumpInfos.y);\n}\n\nmat3 cotangent_frame(vec3 normal,vec3 p,vec2 uv)\n{\nreturn cotangent_frame(normal,p,uv,vTangentSpaceParams);\n}\n#endif\n#if defined(BUMP) && defined(PARALLAX)\nconst float minSamples=4.;\nconst float maxSamples=15.;\nconst int iMaxSamples=15;\n\nvec2 parallaxOcclusion(vec3 vViewDirCoT,vec3 vNormalCoT,vec2 texCoord,float parallaxScale) {\nfloat parallaxLimit=length(vViewDirCoT.xy)/vViewDirCoT.z;\nparallaxLimit*=parallaxScale;\nvec2 vOffsetDir=normalize(vViewDirCoT.xy);\nvec2 vMaxOffset=vOffsetDir*parallaxLimit;\nfloat numSamples=maxSamples+(dot(vViewDirCoT,vNormalCoT)*(minSamples-maxSamples));\nfloat stepSize=1.0/numSamples;\n\nfloat currRayHeight=1.0;\nvec2 vCurrOffset=vec2(0,0);\nvec2 vLastOffset=vec2(0,0);\nfloat lastSampledHeight=1.0;\nfloat currSampledHeight=1.0;\nfor (int i=0; i<iMaxSamples; i++)\n{\ncurrSampledHeight=texture2D(bumpSampler,vBumpUV+vCurrOffset).w;\n\nif (currSampledHeight>currRayHeight)\n{\nfloat delta1=currSampledHeight-currRayHeight;\nfloat delta2=(currRayHeight+stepSize)-lastSampledHeight;\nfloat ratio=delta1/(delta1+delta2);\nvCurrOffset=(ratio)* vLastOffset+(1.0-ratio)*vCurrOffset;\n\nbreak;\n}\nelse\n{\ncurrRayHeight-=stepSize;\nvLastOffset=vCurrOffset;\nvCurrOffset+=stepSize*vMaxOffset;\nlastSampledHeight=currSampledHeight;\n}\n}\nreturn vCurrOffset;\n}\nvec2 parallaxOffset(vec3 viewDir,float heightScale)\n{\n\nfloat height=texture2D(bumpSampler,vBumpUV).w;\nvec2 texCoordOffset=heightScale*viewDir.xy*height;\nreturn -texCoordOffset;\n}\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.bumpFragment="vec2 uvOffset=vec2(0.0,0.0);\n#if defined(BUMP) || defined(PARALLAX)\n#ifdef NORMALXYSCALE\nfloat normalScale=1.0;\n#else\nfloat normalScale=vBumpInfos.y;\n#endif\n#if defined(TANGENT) && defined(NORMAL)\nmat3 TBN=vTBN;\n#else\nmat3 TBN=cotangent_frame(normalW*normalScale,vPositionW,vBumpUV);\n#endif\n#elif defined(ANISOTROPIC)\n#if defined(TANGENT) && defined(NORMAL)\nmat3 TBN=vTBN;\n#else\nmat3 TBN=cotangent_frame(normalW,vPositionW,vMainUV1,vec2(1.,1.));\n#endif\n#endif\n#ifdef PARALLAX\nmat3 invTBN=transposeMat3(TBN);\n#ifdef PARALLAXOCCLUSION\nuvOffset=parallaxOcclusion(invTBN*-viewDirectionW,invTBN*normalW,vBumpUV,vBumpInfos.z);\n#else\nuvOffset=parallaxOffset(invTBN*viewDirectionW,vBumpInfos.z);\n#endif\n#endif\n#ifdef BUMP\n#ifdef OBJECTSPACE_NORMALMAP\nnormalW=normalize(texture2D(bumpSampler,vBumpUV).xyz*2.0-1.0);\nnormalW=normalize(mat3(normalMatrix)*normalW);\n#else\nnormalW=perturbNormal(TBN,vBumpUV+uvOffset);\n#endif\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.depthPrePass="#ifdef DEPTHPREPASS\ngl_FragColor=vec4(0.,0.,0.,1.0);\nreturn;\n#endif"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.bumpVertexDeclaration="#if defined(BUMP) || defined(PARALLAX) || defined(CLEARCOAT_BUMP)\n#if defined(TANGENT) && defined(NORMAL)\nvarying mat3 vTBN;\n#endif\n#endif\n"},function(e,t,n){"use strict";n(5).a.IncludesShadersStore.bumpVertex="#if defined(BUMP) || defined(PARALLAX) || defined(CLEARCOAT_BUMP)\n#if defined(TANGENT) && defined(NORMAL)\nvec3 tbnNormal=normalize(normalUpdated);\nvec3 tbnTangent=normalize(tangentUpdated.xyz);\nvec3 tbnBitangent=cross(tbnNormal,tbnTangent)*tangentUpdated.w;\nvTBN=mat3(finalWorld)*mat3(tbnTangent,tbnBitangent,tbnNormal);\n#endif\n#endif"},function(e,t,n){"use strict";var r=n(5),i=(n(95),n(89),"colorPixelShader");r.a.ShadersStore[i]="#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#else\nuniform vec4 color;\n#endif\n#include<clipPlaneFragmentDeclaration>\nvoid main(void) {\n#include<clipPlaneFragment>\n#ifdef VERTEXCOLOR\ngl_FragColor=vColor;\n#else\ngl_FragColor=color;\n#endif\n}"},function(e,t,n){"use strict";var r=n(5),i=(n(67),n(96),n(68),n(69),n(70),n(90),"colorVertexShader");r.a.ShadersStore[i]="\nattribute vec3 position;\n#ifdef VERTEXCOLOR\nattribute vec4 color;\n#endif\n#include<bonesDeclaration>\n#include<clipPlaneVertexDeclaration>\n\n#include<instancesDeclaration>\nuniform mat4 viewProjection;\n\n#ifdef VERTEXCOLOR\nvarying vec4 vColor;\n#endif\nvoid main(void) {\n#include<instancesVertex>\n#include<bonesVertex>\nvec4 worldPos=finalWorld*vec4(position,1.0);\ngl_Position=viewProjection*worldPos;\n#include<clipPlaneVertex>\n#ifdef VERTEXCOLOR\n\nvColor=color;\n#endif\n}"},function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return c}),n.d(t,"a",function(){return h});var r=n(1),i=n(6),o=n(10),a=n(92),s=n(26),u=n(3),l=n(78),c=function(){this.renderWidth=512,this.renderHeight=256,this.textureSize=512,this.deterministicLockstep=!1,this.lockstepMaxSteps=4},h=function(t){function n(n){void 0===n&&(n=new c);var r=t.call(this,null)||this;void 0===n.deterministicLockstep&&(n.deterministicLockstep=!1),void 0===n.lockstepMaxSteps&&(n.lockstepMaxSteps=4),r._options=n,r._caps=new o.c,r._caps.maxTexturesImageUnits=16,r._caps.maxVertexTextureImageUnits=16,r._caps.maxTextureSize=512,r._caps.maxCubemapTextureSize=512,r._caps.maxRenderTextureSize=512,r._caps.maxVertexAttribs=16,r._caps.maxVaryingVectors=16,r._caps.maxFragmentUniformVectors=16,r._caps.maxVertexUniformVectors=16,r._caps.standardDerivatives=!1,r._caps.astc=null,r._caps.s3tc=null,r._caps.pvrtc=null,r._caps.etc1=null,r._caps.etc2=null,r._caps.textureAnisotropicFilterExtension=null,r._caps.maxAnisotropy=0,r._caps.uintIndices=!1,r._caps.fragmentDepthSupported=!1,r._caps.highPrecisionShaderSupported=!0,r._caps.colorBufferFloat=!1,r._caps.textureFloat=!1,r._caps.textureFloatLinearFiltering=!1,r._caps.textureFloatRender=!1,r._caps.textureHalfFloat=!1,r._caps.textureHalfFloatLinearFiltering=!1,r._caps.textureHalfFloatRender=!1,r._caps.textureLOD=!1,r._caps.drawBuffersExtension=!1,r._caps.depthTextureExtension=!1,r._caps.vertexArrayObject=!1,r._caps.instancedArrays=!1,i.a.Log("Babylon.js v"+o.b.Version+" - Null engine");var a="undefined"!=typeof self?self:void 0!==e?e:window;return"undefined"==typeof URL&&(a.URL={createObjectURL:function(){},revokeObjectURL:function(){}}),"undefined"==typeof Blob&&(a.Blob=function(){}),r}return r.d(n,t),n.prototype.isDeterministicLockStep=function(){return this._options.deterministicLockstep},n.prototype.getLockstepMaxSteps=function(){return this._options.lockstepMaxSteps},n.prototype.getHardwareScalingLevel=function(){return 1},n.prototype.createVertexBuffer=function(e){var t=new l.a;return t.references=1,t},n.prototype.createIndexBuffer=function(e){var t=new l.a;return t.references=1,t},n.prototype.clear=function(e,t,n,r){void 0===r&&(r=!1)},n.prototype.getRenderWidth=function(e){return void 0===e&&(e=!1),!e&&this._currentRenderTarget?this._currentRenderTarget.width:this._options.renderWidth},n.prototype.getRenderHeight=function(e){return void 0===e&&(e=!1),!e&&this._currentRenderTarget?this._currentRenderTarget.height:this._options.renderHeight},n.prototype.setViewport=function(e,t,n){this._cachedViewport=e},n.prototype.createShaderProgram=function(e,t,n,r,i){return{__SPECTOR_rebuildProgram:null}},n.prototype.getUniforms=function(e,t){return[]},n.prototype.getAttributes=function(e,t){return[]},n.prototype.bindSamplers=function(e){this._currentEffect=null},n.prototype.enableEffect=function(e){this._currentEffect=e,e.onBind&&e.onBind(e),e._onBindObservable&&e._onBindObservable.notifyObservers(e)},n.prototype.setState=function(e,t,n,r){void 0===t&&(t=0),void 0===r&&(r=!1)},n.prototype.setIntArray=function(e,t){},n.prototype.setIntArray2=function(e,t){},n.prototype.setIntArray3=function(e,t){},n.prototype.setIntArray4=function(e,t){},n.prototype.setFloatArray=function(e,t){},n.prototype.setFloatArray2=function(e,t){},n.prototype.setFloatArray3=function(e,t){},n.prototype.setFloatArray4=function(e,t){},n.prototype.setArray=function(e,t){},n.prototype.setArray2=function(e,t){},n.prototype.setArray3=function(e,t){},n.prototype.setArray4=function(e,t){},n.prototype.setMatrices=function(e,t){},n.prototype.setMatrix=function(e,t){},n.prototype.setMatrix3x3=function(e,t){},n.prototype.setMatrix2x2=function(e,t){},n.prototype.setFloat=function(e,t){},n.prototype.setFloat2=function(e,t,n){},n.prototype.setFloat3=function(e,t,n,r){},n.prototype.setBool=function(e,t){},n.prototype.setFloat4=function(e,t,n,r,i){},n.prototype.setColor3=function(e,t){},n.prototype.setColor4=function(e,t,n){},n.prototype.setAlphaMode=function(e,t){void 0===t&&(t=!1),this._alphaMode!==e&&(this._alphaState.alphaBlend=e!==u.a.ALPHA_DISABLE,t||this.setDepthWrite(e===u.a.ALPHA_DISABLE),this._alphaMode=e)},n.prototype.bindBuffers=function(e,t,n){},n.prototype.wipeCaches=function(e){this.preventCacheWipeBetweenFrames||(this.resetTextureCache(),this._currentEffect=null,e&&(this._currentProgram=null,this._stencilState.reset(),this._depthCullingState.reset(),this._alphaState.reset()),this._cachedVertexBuffers=null,this._cachedIndexBuffer=null,this._cachedEffectForVertexBuffers=null)},n.prototype.draw=function(e,t,n,r){},n.prototype.drawElementsType=function(e,t,n,r){},n.prototype.drawArraysType=function(e,t,n,r){},n.prototype._createTexture=function(){return{}},n.prototype._releaseTexture=function(e){},n.prototype.createTexture=function(e,t,n,r,i,o,a,l,c,h){void 0===i&&(i=u.a.TEXTURE_TRILINEAR_SAMPLINGMODE),void 0===o&&(o=null),void 0===a&&(a=null),void 0===l&&(l=null);var d=new s.a(this,s.a.DATASOURCE_URL),f=String(e);return d.url=f,d.generateMipMaps=!t,d.samplingMode=i,d.invertY=n,d.baseWidth=this._options.textureSize,d.baseHeight=this._options.textureSize,d.width=this._options.textureSize,d.height=this._options.textureSize,h&&(d.format=h),d.isReady=!0,o&&o(),this._internalTexturesCache.push(d),d},n.prototype.createRenderTargetTexture=function(e,t){var n=new a.a;void 0!==t&&"object"==typeof t?(n.generateMipMaps=t.generateMipMaps,n.generateDepthBuffer=void 0===t.generateDepthBuffer||t.generateDepthBuffer,n.generateStencilBuffer=n.generateDepthBuffer&&t.generateStencilBuffer,n.type=void 0===t.type?u.a.TEXTURETYPE_UNSIGNED_INT:t.type,n.samplingMode=void 0===t.samplingMode?u.a.TEXTURE_TRILINEAR_SAMPLINGMODE:t.samplingMode):(n.generateMipMaps=t,n.generateDepthBuffer=!0,n.generateStencilBuffer=!1,n.type=u.a.TEXTURETYPE_UNSIGNED_INT,n.samplingMode=u.a.TEXTURE_TRILINEAR_SAMPLINGMODE);var r=new s.a(this,s.a.DATASOURCE_RENDERTARGET),i=e.width||e,o=e.height||e;return r._depthStencilBuffer={},r._framebuffer={},r.baseWidth=i,r.baseHeight=o,r.width=i,r.height=o,r.isReady=!0,r.samples=1,r.generateMipMaps=!!n.generateMipMaps,r.samplingMode=n.samplingMode,r.type=n.type,r._generateDepthBuffer=n.generateDepthBuffer,r._generateStencilBuffer=!!n.generateStencilBuffer,this._internalTexturesCache.push(r),r},n.prototype.updateTextureSamplingMode=function(e,t){t.samplingMode=e},n.prototype.bindFramebuffer=function(e,t,n,r,i){this._currentRenderTarget&&this.unBindFramebuffer(this._currentRenderTarget),this._currentRenderTarget=e,this._currentFramebuffer=e._MSAAFramebuffer?e._MSAAFramebuffer:e._framebuffer,this._cachedViewport&&!i&&this.setViewport(this._cachedViewport,n,r)},n.prototype.unBindFramebuffer=function(e,t,n){void 0===t&&(t=!1),this._currentRenderTarget=null,n&&(e._MSAAFramebuffer&&(this._currentFramebuffer=e._framebuffer),n()),this._currentFramebuffer=null},n.prototype.createDynamicVertexBuffer=function(e){var t=new l.a;return t.references=1,t.capacity=1,t},n.prototype.updateDynamicTexture=function(e,t,n,r,i){void 0===r&&(r=!1)},n.prototype.areAllEffectsReady=function(){return!0},n.prototype.getError=function(){return 0},n.prototype._getUnpackAlignement=function(){return 1},n.prototype._unpackFlipY=function(e){},n.prototype.updateDynamicIndexBuffer=function(e,t,n){void 0===n&&(n=0)},n.prototype.updateDynamicVertexBuffer=function(e,t,n,r){},n.prototype._bindTextureDirectly=function(e,t){return this._boundTexturesCache[this._activeChannel]!==t&&(this._boundTexturesCache[this._activeChannel]=t,!0)},n.prototype._bindTexture=function(e,t){e<0||this._bindTextureDirectly(0,t)},n.prototype._releaseBuffer=function(e){return e.references--,0===e.references},n.prototype.releaseEffects=function(){},n.prototype.displayLoadingUI=function(){},n.prototype.hideLoadingUI=function(){},n.prototype._uploadCompressedDataToTextureDirectly=function(e,t,n,r,i,o,a){void 0===o&&(o=0),void 0===a&&(a=0)},n.prototype._uploadDataToTextureDirectly=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0)},n.prototype._uploadArrayBufferViewToTexture=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0)},n.prototype._uploadImageToTexture=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0)},n}(o.b)}).call(this,n(119))},function(e,t,n){"use strict";n.r(t),(function(e){n.d(t,"Debug",function(){return l});var r=n(97),i=n(74);n.d(t,"AbstractScene",function(){return r.AbstractScene}),n.d(t,"KeepAssets",function(){return r.KeepAssets}),n.d(t,"AssetContainer",function(){return r.AssetContainer}),n.d(t,"Node",function(){return r.Node}),n.d(t,"Scene",function(){return r.Scene}),n.d(t,"SceneComponentConstants",function(){return r.SceneComponentConstants}),n.d(t,"Stage",function(){return r.Stage}),n.d(t,"Action",function(){return r.Action}),n.d(t,"ActionEvent",function(){return r.ActionEvent}),n.d(t,"ActionManager",function(){return r.ActionManager}),n.d(t,"Condition",function(){return r.Condition}),n.d(t,"ValueCondition",function(){return r.ValueCondition}),n.d(t,"PredicateCondition",function(){return r.PredicateCondition}),n.d(t,"StateCondition",function(){return r.StateCondition}),n.d(t,"SwitchBooleanAction",function(){return r.SwitchBooleanAction}),n.d(t,"SetStateAction",function(){return r.SetStateAction}),n.d(t,"SetValueAction",function(){return r.SetValueAction}),n.d(t,"IncrementValueAction",function(){return r.IncrementValueAction}),n.d(t,"PlayAnimationAction",function(){return r.PlayAnimationAction}),n.d(t,"StopAnimationAction",function(){return r.StopAnimationAction}),n.d(t,"DoNothingAction",function(){return r.DoNothingAction}),n.d(t,"CombineAction",function(){return r.CombineAction}),n.d(t,"ExecuteCodeAction",function(){return r.ExecuteCodeAction}),n.d(t,"SetParentAction",function(){return r.SetParentAction}),n.d(t,"PlaySoundAction",function(){return r.PlaySoundAction}),n.d(t,"StopSoundAction",function(){return r.StopSoundAction}),n.d(t,"InterpolateValueAction",function(){return r.InterpolateValueAction}),n.d(t,"Animatable",function(){return r.Animatable}),n.d(t,"_IAnimationState",function(){return r._IAnimationState}),n.d(t,"Animation",function(){return r.Animation}),n.d(t,"TargetedAnimation",function(){return r.TargetedAnimation}),n.d(t,"AnimationGroup",function(){return r.AnimationGroup}),n.d(t,"AnimationPropertiesOverride",function(){return r.AnimationPropertiesOverride}),n.d(t,"EasingFunction",function(){return r.EasingFunction}),n.d(t,"CircleEase",function(){return r.CircleEase}),n.d(t,"BackEase",function(){return r.BackEase}),n.d(t,"BounceEase",function(){return r.BounceEase}),n.d(t,"CubicEase",function(){return r.CubicEase}),n.d(t,"ElasticEase",function(){return r.ElasticEase}),n.d(t,"ExponentialEase",function(){return r.ExponentialEase}),n.d(t,"PowerEase",function(){return r.PowerEase}),n.d(t,"QuadraticEase",function(){return r.QuadraticEase}),n.d(t,"QuarticEase",function(){return r.QuarticEase}),n.d(t,"QuinticEase",function(){return r.QuinticEase}),n.d(t,"SineEase",function(){return r.SineEase}),n.d(t,"BezierCurveEase",function(){return r.BezierCurveEase}),n.d(t,"RuntimeAnimation",function(){return r.RuntimeAnimation}),n.d(t,"AnimationEvent",function(){return r.AnimationEvent}),n.d(t,"AnimationKeyInterpolation",function(){return r.AnimationKeyInterpolation}),n.d(t,"AnimationRange",function(){return r.AnimationRange}),n.d(t,"Analyser",function(){return r.Analyser}),n.d(t,"AudioEngine",function(){return r.AudioEngine}),n.d(t,"AudioSceneComponent",function(){return r.AudioSceneComponent}),n.d(t,"Sound",function(){return r.Sound}),n.d(t,"SoundTrack",function(){return r.SoundTrack}),n.d(t,"WeightedSound",function(){return r.WeightedSound}),n.d(t,"Bone",function(){return r.Bone}),n.d(t,"BoneIKController",function(){return r.BoneIKController}),n.d(t,"BoneLookController",function(){return r.BoneLookController}),n.d(t,"Skeleton",function(){return r.Skeleton}),n.d(t,"CameraInputTypes",function(){return r.CameraInputTypes}),n.d(t,"CameraInputsManager",function(){return r.CameraInputsManager}),n.d(t,"Camera",function(){return r.Camera}),n.d(t,"TargetCamera",function(){return r.TargetCamera}),n.d(t,"FreeCamera",function(){return r.FreeCamera}),n.d(t,"FreeCameraInputsManager",function(){return r.FreeCameraInputsManager}),n.d(t,"TouchCamera",function(){return r.TouchCamera}),n.d(t,"ArcRotateCamera",function(){return r.ArcRotateCamera}),n.d(t,"ArcRotateCameraInputsManager",function(){return r.ArcRotateCameraInputsManager}),n.d(t,"DeviceOrientationCamera",function(){return r.DeviceOrientationCamera}),n.d(t,"FlyCamera",function(){return r.FlyCamera}),n.d(t,"FlyCameraInputsManager",function(){return r.FlyCameraInputsManager}),n.d(t,"FollowCamera",function(){return r.FollowCamera}),n.d(t,"ArcFollowCamera",function(){return r.ArcFollowCamera}),n.d(t,"GamepadCamera",function(){return r.GamepadCamera}),n.d(t,"UniversalCamera",function(){return r.UniversalCamera}),n.d(t,"VirtualJoysticksCamera",function(){return r.VirtualJoysticksCamera}),n.d(t,"Collider",function(){return r.Collider}),n.d(t,"DefaultCollisionCoordinator",function(){return r.DefaultCollisionCoordinator}),n.d(t,"PickingInfo",function(){return r.PickingInfo}),n.d(t,"IntersectionInfo",function(){return r.IntersectionInfo}),n.d(t,"_MeshCollisionData",function(){return r._MeshCollisionData}),n.d(t,"BoundingBox",function(){return r.BoundingBox}),n.d(t,"BoundingInfo",function(){return r.BoundingInfo}),n.d(t,"BoundingSphere",function(){return r.BoundingSphere}),n.d(t,"Ray",function(){return r.Ray}),n.d(t,"AxesViewer",function(){return r.AxesViewer}),n.d(t,"BoneAxesViewer",function(){return r.BoneAxesViewer}),n.d(t,"DebugLayer",function(){return r.DebugLayer}),n.d(t,"PhysicsViewer",function(){return r.PhysicsViewer}),n.d(t,"RayHelper",function(){return r.RayHelper}),n.d(t,"SkeletonViewer",function(){return r.SkeletonViewer}),n.d(t,"Constants",function(){return r.Constants}),n.d(t,"InstancingAttributeInfo",function(){return r.InstancingAttributeInfo}),n.d(t,"DepthTextureCreationOptions",function(){return r.DepthTextureCreationOptions}),n.d(t,"EngineCapabilities",function(){return r.EngineCapabilities}),n.d(t,"Engine",function(){return r.Engine}),n.d(t,"EngineStore",function(){return r.EngineStore}),n.d(t,"NullEngineOptions",function(){return r.NullEngineOptions}),n.d(t,"NullEngine",function(){return r.NullEngine}),n.d(t,"WebGLPipelineContext",function(){return r.WebGLPipelineContext}),n.d(t,"KeyboardEventTypes",function(){return r.KeyboardEventTypes}),n.d(t,"KeyboardInfo",function(){return r.KeyboardInfo}),n.d(t,"KeyboardInfoPre",function(){return r.KeyboardInfoPre}),n.d(t,"PointerEventTypes",function(){return r.PointerEventTypes}),n.d(t,"PointerInfoBase",function(){return r.PointerInfoBase}),n.d(t,"PointerInfoPre",function(){return r.PointerInfoPre}),n.d(t,"PointerInfo",function(){return r.PointerInfo}),n.d(t,"ClipboardEventTypes",function(){return r.ClipboardEventTypes}),n.d(t,"ClipboardInfo",function(){return r.ClipboardInfo}),n.d(t,"DaydreamController",function(){return r.DaydreamController}),n.d(t,"GearVRController",function(){return r.GearVRController}),n.d(t,"GenericController",function(){return r.GenericController}),n.d(t,"OculusTouchController",function(){return r.OculusTouchController}),n.d(t,"PoseEnabledControllerType",function(){return r.PoseEnabledControllerType}),n.d(t,"PoseEnabledControllerHelper",function(){return r.PoseEnabledControllerHelper}),n.d(t,"PoseEnabledController",function(){return r.PoseEnabledController}),n.d(t,"ViveController",function(){return r.ViveController}),n.d(t,"WebVRController",function(){return r.WebVRController}),n.d(t,"WindowsMotionController",function(){return r.WindowsMotionController}),n.d(t,"StickValues",function(){return r.StickValues}),n.d(t,"Gamepad",function(){return r.Gamepad}),n.d(t,"GenericPad",function(){return r.GenericPad}),n.d(t,"GamepadManager",function(){return r.GamepadManager}),n.d(t,"GamepadSystemSceneComponent",function(){return r.GamepadSystemSceneComponent}),n.d(t,"Xbox360Button",function(){return r.Xbox360Button}),n.d(t,"Xbox360Dpad",function(){return r.Xbox360Dpad}),n.d(t,"Xbox360Pad",function(){return r.Xbox360Pad}),n.d(t,"AxisDragGizmo",function(){return r.AxisDragGizmo}),n.d(t,"AxisScaleGizmo",function(){return r.AxisScaleGizmo}),n.d(t,"BoundingBoxGizmo",function(){return r.BoundingBoxGizmo}),n.d(t,"Gizmo",function(){return r.Gizmo}),n.d(t,"GizmoManager",function(){return r.GizmoManager}),n.d(t,"PlaneRotationGizmo",function(){return r.PlaneRotationGizmo}),n.d(t,"PositionGizmo",function(){return r.PositionGizmo}),n.d(t,"RotationGizmo",function(){return r.RotationGizmo}),n.d(t,"ScaleGizmo",function(){return r.ScaleGizmo}),n.d(t,"LightGizmo",function(){return r.LightGizmo}),n.d(t,"EnvironmentHelper",function(){return r.EnvironmentHelper}),n.d(t,"PhotoDome",function(){return r.PhotoDome}),n.d(t,"_forceSceneHelpersToBundle",function(){return r._forceSceneHelpersToBundle}),n.d(t,"VideoDome",function(){return r.VideoDome}),n.d(t,"EngineInstrumentation",function(){return r.EngineInstrumentation}),n.d(t,"SceneInstrumentation",function(){return r.SceneInstrumentation}),n.d(t,"_TimeToken",function(){return r._TimeToken}),n.d(t,"EffectLayer",function(){return r.EffectLayer}),n.d(t,"EffectLayerSceneComponent",function(){return r.EffectLayerSceneComponent}),n.d(t,"GlowLayer",function(){return r.GlowLayer}),n.d(t,"HighlightLayer",function(){return r.HighlightLayer}),n.d(t,"Layer",function(){return r.Layer}),n.d(t,"LayerSceneComponent",function(){return r.LayerSceneComponent}),n.d(t,"LensFlare",function(){return r.LensFlare}),n.d(t,"LensFlareSystem",function(){return r.LensFlareSystem}),n.d(t,"LensFlareSystemSceneComponent",function(){return r.LensFlareSystemSceneComponent}),n.d(t,"Light",function(){return r.Light}),n.d(t,"ShadowLight",function(){return r.ShadowLight}),n.d(t,"DirectionalLight",function(){return r.DirectionalLight}),n.d(t,"HemisphericLight",function(){return r.HemisphericLight}),n.d(t,"PointLight",function(){return r.PointLight}),n.d(t,"SpotLight",function(){return r.SpotLight}),n.d(t,"DefaultLoadingScreen",function(){return r.DefaultLoadingScreen}),n.d(t,"SceneLoaderProgressEvent",function(){return r.SceneLoaderProgressEvent}),n.d(t,"SceneLoader",function(){return r.SceneLoader}),n.d(t,"SceneLoaderFlags",function(){return r.SceneLoaderFlags}),n.d(t,"ColorCurves",function(){return r.ColorCurves}),n.d(t,"EffectFallbacks",function(){return r.EffectFallbacks}),n.d(t,"EffectCreationOptions",function(){return r.EffectCreationOptions}),n.d(t,"Effect",function(){return r.Effect}),n.d(t,"FresnelParameters",function(){return r.FresnelParameters}),n.d(t,"ImageProcessingConfigurationDefines",function(){return r.ImageProcessingConfigurationDefines}),n.d(t,"ImageProcessingConfiguration",function(){return r.ImageProcessingConfiguration}),n.d(t,"Material",function(){return r.Material}),n.d(t,"MaterialDefines",function(){return r.MaterialDefines}),n.d(t,"MaterialHelper",function(){return r.MaterialHelper}),n.d(t,"MultiMaterial",function(){return r.MultiMaterial}),n.d(t,"PushMaterial",function(){return r.PushMaterial}),n.d(t,"ShaderMaterial",function(){return r.ShaderMaterial}),n.d(t,"StandardMaterialDefines",function(){return r.StandardMaterialDefines}),n.d(t,"StandardMaterial",function(){return r.StandardMaterial}),n.d(t,"BaseTexture",function(){return r.BaseTexture}),n.d(t,"CubeTexture",function(){return r.CubeTexture}),n.d(t,"EquiRectangularCubeTexture",function(){return r.EquiRectangularCubeTexture}),n.d(t,"HDRCubeTexture",function(){return r.HDRCubeTexture}),n.d(t,"InternalTexture",function(){return r.InternalTexture}),n.d(t,"MirrorTexture",function(){return r.MirrorTexture}),n.d(t,"MultiRenderTarget",function(){return r.MultiRenderTarget}),n.d(t,"RenderTargetTexture",function(){return r.RenderTargetTexture}),n.d(t,"Texture",function(){return r.Texture}),n.d(t,"UniformBuffer",function(){return r.UniformBuffer}),n.d(t,"MaterialFlags",function(){return r.MaterialFlags}),n.d(t,"Scalar",function(){return r.Scalar}),n.d(t,"ToGammaSpace",function(){return r.ToGammaSpace}),n.d(t,"ToLinearSpace",function(){return r.ToLinearSpace}),n.d(t,"Epsilon",function(){return r.Epsilon}),n.d(t,"Color3",function(){return r.Color3}),n.d(t,"Color4",function(){return r.Color4}),n.d(t,"Vector2",function(){return r.Vector2}),n.d(t,"Vector3",function(){return r.Vector3}),n.d(t,"Vector4",function(){return r.Vector4}),n.d(t,"Size",function(){return r.Size}),n.d(t,"Quaternion",function(){return r.Quaternion}),n.d(t,"Matrix",function(){return r.Matrix}),n.d(t,"Plane",function(){return r.Plane}),n.d(t,"Viewport",function(){return r.Viewport}),n.d(t,"Frustum",function(){return r.Frustum}),n.d(t,"Space",function(){return r.Space}),n.d(t,"Axis",function(){return r.Axis}),n.d(t,"BezierCurve",function(){return r.BezierCurve}),n.d(t,"Orientation",function(){return r.Orientation}),n.d(t,"Angle",function(){return r.Angle}),n.d(t,"Arc2",function(){return r.Arc2}),n.d(t,"Path2",function(){return r.Path2}),n.d(t,"Path3D",function(){return r.Path3D}),n.d(t,"Curve3",function(){return r.Curve3}),n.d(t,"PositionNormalVertex",function(){return r.PositionNormalVertex}),n.d(t,"PositionNormalTextureVertex",function(){return r.PositionNormalTextureVertex}),n.d(t,"Tmp",function(){return r.Tmp}),n.d(t,"SphericalHarmonics",function(){return r.SphericalHarmonics}),n.d(t,"SphericalPolynomial",function(){return r.SphericalPolynomial}),n.d(t,"AbstractMesh",function(){return r.AbstractMesh}),n.d(t,"Buffer",function(){return r.Buffer}),n.d(t,"VertexBuffer",function(){return r.VertexBuffer}),n.d(t,"CSG",function(){return r.CSG}),n.d(t,"Geometry",function(){return r.Geometry}),n.d(t,"GroundMesh",function(){return r.GroundMesh}),n.d(t,"TrailMesh",function(){return r.TrailMesh}),n.d(t,"InstancedMesh",function(){return r.InstancedMesh}),n.d(t,"LinesMesh",function(){return r.LinesMesh}),n.d(t,"InstancedLinesMesh",function(){return r.InstancedLinesMesh}),n.d(t,"_CreationDataStorage",function(){return r._CreationDataStorage}),n.d(t,"_InstancesBatch",function(){return r._InstancesBatch}),n.d(t,"Mesh",function(){return r.Mesh}),n.d(t,"VertexData",function(){return r.VertexData}),n.d(t,"MeshBuilder",function(){return r.MeshBuilder}),n.d(t,"SimplificationSettings",function(){return r.SimplificationSettings}),n.d(t,"SimplificationQueue",function(){return r.SimplificationQueue}),n.d(t,"SimplificationType",function(){return r.SimplificationType}),n.d(t,"SimplicationQueueSceneComponent",function(){return r.SimplicationQueueSceneComponent}),n.d(t,"Polygon",function(){return r.Polygon}),n.d(t,"PolygonMeshBuilder",function(){return r.PolygonMeshBuilder}),n.d(t,"BaseSubMesh",function(){return r.BaseSubMesh}),n.d(t,"SubMesh",function(){return r.SubMesh}),n.d(t,"MeshLODLevel",function(){return r.MeshLODLevel}),n.d(t,"TransformNode",function(){return r.TransformNode}),n.d(t,"BoxBuilder",function(){return r.BoxBuilder}),n.d(t,"SphereBuilder",function(){return r.SphereBuilder}),n.d(t,"CylinderBuilder",function(){return r.CylinderBuilder}),n.d(t,"LinesBuilder",function(){return r.LinesBuilder}),n.d(t,"PlaneBuilder",function(){return r.PlaneBuilder}),n.d(t,"DataBuffer",function(){return r.DataBuffer}),n.d(t,"WebGLDataBuffer",function(){return r.WebGLDataBuffer}),n.d(t,"MorphTarget",function(){return r.MorphTarget}),n.d(t,"MorphTargetManager",function(){return r.MorphTargetManager}),n.d(t,"Database",function(){return r.Database}),n.d(t,"BaseParticleSystem",function(){return r.BaseParticleSystem}),n.d(t,"GPUParticleSystem",function(){return r.GPUParticleSystem}),n.d(t,"Particle",function(){return r.Particle}),n.d(t,"ParticleHelper",function(){return r.ParticleHelper}),n.d(t,"ParticleSystem",function(){return r.ParticleSystem}),n.d(t,"_IDoNeedToBeInTheBuild",function(){return r._IDoNeedToBeInTheBuild}),n.d(t,"ParticleSystemSet",function(){return r.ParticleSystemSet}),n.d(t,"SolidParticle",function(){return r.SolidParticle}),n.d(t,"ModelShape",function(){return r.ModelShape}),n.d(t,"DepthSortedParticle",function(){return r.DepthSortedParticle}),n.d(t,"SolidParticleSystem",function(){return r.SolidParticleSystem}),n.d(t,"SubEmitterType",function(){return r.SubEmitterType}),n.d(t,"SubEmitter",function(){return r.SubEmitter}),n.d(t,"PhysicsEngine",function(){return r.PhysicsEngine}),n.d(t,"PhysicsEngineSceneComponent",function(){return r.PhysicsEngineSceneComponent}),n.d(t,"PhysicsHelper",function(){return r.PhysicsHelper}),n.d(t,"PhysicsRadialExplosionEventOptions",function(){return r.PhysicsRadialExplosionEventOptions}),n.d(t,"PhysicsUpdraftEventOptions",function(){return r.PhysicsUpdraftEventOptions}),n.d(t,"PhysicsVortexEventOptions",function(){return r.PhysicsVortexEventOptions}),n.d(t,"PhysicsRadialImpulseFalloff",function(){return r.PhysicsRadialImpulseFalloff}),n.d(t,"PhysicsUpdraftMode",function(){return r.PhysicsUpdraftMode}),n.d(t,"PhysicsImpostor",function(){return r.PhysicsImpostor}),n.d(t,"PhysicsJoint",function(){return r.PhysicsJoint}),n.d(t,"DistanceJoint",function(){return r.DistanceJoint}),n.d(t,"MotorEnabledJoint",function(){return r.MotorEnabledJoint}),n.d(t,"HingeJoint",function(){return r.HingeJoint}),n.d(t,"Hinge2Joint",function(){return r.Hinge2Joint}),n.d(t,"AnaglyphPostProcess",function(){return r.AnaglyphPostProcess}),n.d(t,"BlackAndWhitePostProcess",function(){return r.BlackAndWhitePostProcess}),n.d(t,"BloomEffect",function(){return r.BloomEffect}),n.d(t,"BloomMergePostProcess",function(){return r.BloomMergePostProcess}),n.d(t,"BlurPostProcess",function(){return r.BlurPostProcess}),n.d(t,"ChromaticAberrationPostProcess",function(){return r.ChromaticAberrationPostProcess}),n.d(t,"CircleOfConfusionPostProcess",function(){return r.CircleOfConfusionPostProcess}),n.d(t,"ColorCorrectionPostProcess",function(){return r.ColorCorrectionPostProcess}),n.d(t,"ConvolutionPostProcess",function(){return r.ConvolutionPostProcess}),n.d(t,"DepthOfFieldBlurPostProcess",function(){return r.DepthOfFieldBlurPostProcess}),n.d(t,"DepthOfFieldEffectBlurLevel",function(){return r.DepthOfFieldEffectBlurLevel}),n.d(t,"DepthOfFieldEffect",function(){return r.DepthOfFieldEffect}),n.d(t,"DepthOfFieldMergePostProcessOptions",function(){return r.DepthOfFieldMergePostProcessOptions}),n.d(t,"DepthOfFieldMergePostProcess",function(){return r.DepthOfFieldMergePostProcess}),n.d(t,"DisplayPassPostProcess",function(){return r.DisplayPassPostProcess}),n.d(t,"ExtractHighlightsPostProcess",function(){return r.ExtractHighlightsPostProcess}),n.d(t,"FilterPostProcess",function(){return r.FilterPostProcess}),n.d(t,"FxaaPostProcess",function(){return r.FxaaPostProcess}),n.d(t,"GrainPostProcess",function(){return r.GrainPostProcess}),n.d(t,"HighlightsPostProcess",function(){return r.HighlightsPostProcess}),n.d(t,"ImageProcessingPostProcess",function(){return r.ImageProcessingPostProcess}),n.d(t,"MotionBlurPostProcess",function(){return r.MotionBlurPostProcess}),n.d(t,"PassPostProcess",function(){return r.PassPostProcess}),n.d(t,"PassCubePostProcess",function(){return r.PassCubePostProcess}),n.d(t,"PostProcess",function(){return r.PostProcess}),n.d(t,"PostProcessManager",function(){return r.PostProcessManager}),n.d(t,"RefractionPostProcess",function(){return r.RefractionPostProcess}),n.d(t,"SharpenPostProcess",function(){return r.SharpenPostProcess}),n.d(t,"StereoscopicInterlacePostProcess",function(){return r.StereoscopicInterlacePostProcess}),n.d(t,"TonemappingOperator",function(){return r.TonemappingOperator}),n.d(t,"TonemapPostProcess",function(){return r.TonemapPostProcess}),n.d(t,"VolumetricLightScatteringPostProcess",function(){return r.VolumetricLightScatteringPostProcess}),n.d(t,"VRDistortionCorrectionPostProcess",function(){return r.VRDistortionCorrectionPostProcess}),n.d(t,"VRMultiviewToSingleviewPostProcess",function(){return r.VRMultiviewToSingleviewPostProcess}),n.d(t,"ReflectionProbe",function(){return r.ReflectionProbe}),n.d(t,"BoundingBoxRenderer",function(){return r.BoundingBoxRenderer}),n.d(t,"DepthRenderer",function(){return r.DepthRenderer}),n.d(t,"DepthRendererSceneComponent",function(){return r.DepthRendererSceneComponent}),n.d(t,"EdgesRenderer",function(){return r.EdgesRenderer}),n.d(t,"LineEdgesRenderer",function(){return r.LineEdgesRenderer}),n.d(t,"GeometryBufferRenderer",function(){return r.GeometryBufferRenderer}),n.d(t,"GeometryBufferRendererSceneComponent",function(){return r.GeometryBufferRendererSceneComponent}),n.d(t,"OutlineRenderer",function(){return r.OutlineRenderer}),n.d(t,"RenderingGroup",function(){return r.RenderingGroup}),n.d(t,"RenderingGroupInfo",function(){return r.RenderingGroupInfo}),n.d(t,"RenderingManager",function(){return r.RenderingManager}),n.d(t,"UtilityLayerRenderer",function(){return r.UtilityLayerRenderer}),n.d(t,"Sprite",function(){return r.Sprite}),n.d(t,"SpriteManager",function(){return r.SpriteManager}),n.d(t,"SpriteSceneComponent",function(){return r.SpriteSceneComponent}),n.d(t,"_AlphaState",function(){return r._AlphaState}),n.d(t,"_DepthCullingState",function(){return r._DepthCullingState}),n.d(t,"_StencilState",function(){return r._StencilState}),n.d(t,"AndOrNotEvaluator",function(){return r.AndOrNotEvaluator}),n.d(t,"AssetTaskState",function(){return r.AssetTaskState}),n.d(t,"AbstractAssetTask",function(){return r.AbstractAssetTask}),n.d(t,"AssetsProgressEvent",function(){return r.AssetsProgressEvent}),n.d(t,"MeshAssetTask",function(){return r.MeshAssetTask}),n.d(t,"TextFileAssetTask",function(){return r.TextFileAssetTask}),n.d(t,"BinaryFileAssetTask",function(){return r.BinaryFileAssetTask}),n.d(t,"ImageAssetTask",function(){return r.ImageAssetTask}),n.d(t,"TextureAssetTask",function(){return r.TextureAssetTask}),n.d(t,"CubeTextureAssetTask",function(){return r.CubeTextureAssetTask}),n.d(t,"HDRCubeTextureAssetTask",function(){return r.HDRCubeTextureAssetTask}),n.d(t,"EquiRectangularCubeTextureAssetTask",function(){return r.EquiRectangularCubeTextureAssetTask}),n.d(t,"AssetsManager",function(){return r.AssetsManager}),n.d(t,"DDSTools",function(){return r.DDSTools}),n.d(t,"expandToProperty",function(){return r.expandToProperty}),n.d(t,"serialize",function(){return r.serialize}),n.d(t,"serializeAsTexture",function(){return r.serializeAsTexture}),n.d(t,"serializeAsColor3",function(){return r.serializeAsColor3}),n.d(t,"serializeAsFresnelParameters",function(){return r.serializeAsFresnelParameters}),n.d(t,"serializeAsVector2",function(){return r.serializeAsVector2}),n.d(t,"serializeAsVector3",function(){return r.serializeAsVector3}),n.d(t,"serializeAsMeshReference",function(){return r.serializeAsMeshReference}),n.d(t,"serializeAsColorCurves",function(){return r.serializeAsColorCurves}),n.d(t,"serializeAsColor4",function(){return r.serializeAsColor4}),n.d(t,"serializeAsImageProcessingConfiguration",function(){return r.serializeAsImageProcessingConfiguration}),n.d(t,"serializeAsQuaternion",function(){return r.serializeAsQuaternion}),n.d(t,"serializeAsMatrix",function(){return r.serializeAsMatrix}),n.d(t,"serializeAsCameraReference",function(){return r.serializeAsCameraReference}),n.d(t,"SerializationHelper",function(){return r.SerializationHelper}),n.d(t,"Deferred",function(){return r.Deferred}),n.d(t,"EnvironmentTextureTools",function(){return r.EnvironmentTextureTools}),n.d(t,"MeshExploder",function(){return r.MeshExploder}),n.d(t,"FilesInput",function(){return r.FilesInput}),n.d(t,"KhronosTextureContainer",function(){return r.KhronosTextureContainer}),n.d(t,"EventState",function(){return r.EventState}),n.d(t,"Observer",function(){return r.Observer}),n.d(t,"MultiObserver",function(){return r.MultiObserver}),n.d(t,"Observable",function(){return r.Observable}),n.d(t,"PerformanceMonitor",function(){return r.PerformanceMonitor}),n.d(t,"RollingAverage",function(){return r.RollingAverage}),n.d(t,"PromisePolyfill",function(){return r.PromisePolyfill}),n.d(t,"SceneOptimization",function(){return r.SceneOptimization}),n.d(t,"TextureOptimization",function(){return r.TextureOptimization}),n.d(t,"HardwareScalingOptimization",function(){return r.HardwareScalingOptimization}),n.d(t,"ShadowsOptimization",function(){return r.ShadowsOptimization}),n.d(t,"PostProcessesOptimization",function(){return r.PostProcessesOptimization}),n.d(t,"LensFlaresOptimization",function(){return r.LensFlaresOptimization}),n.d(t,"CustomOptimization",function(){return r.CustomOptimization}),n.d(t,"ParticlesOptimization",function(){return r.ParticlesOptimization}),n.d(t,"RenderTargetsOptimization",function(){return r.RenderTargetsOptimization}),n.d(t,"MergeMeshesOptimization",function(){return r.MergeMeshesOptimization}),n.d(t,"SceneOptimizerOptions",function(){return r.SceneOptimizerOptions}),n.d(t,"SceneOptimizer",function(){return r.SceneOptimizer}),n.d(t,"SceneSerializer",function(){return r.SceneSerializer}),n.d(t,"SmartArray",function(){return r.SmartArray}),n.d(t,"SmartArrayNoDuplicate",function(){return r.SmartArrayNoDuplicate}),n.d(t,"StringDictionary",function(){return r.StringDictionary}),n.d(t,"Tags",function(){return r.Tags}),n.d(t,"TextureTools",function(){return r.TextureTools}),n.d(t,"TGATools",function(){return r.TGATools}),n.d(t,"ColorGradient",function(){return r.ColorGradient}),n.d(t,"Color3Gradient",function(){return r.Color3Gradient}),n.d(t,"FactorGradient",function(){return r.FactorGradient}),n.d(t,"LoadFileError",function(){return r.LoadFileError}),n.d(t,"RetryStrategy",function(){return r.RetryStrategy}),n.d(t,"Tools",function(){return r.Tools}),n.d(t,"PerfCounter",function(){return r.PerfCounter}),n.d(t,"className",function(){return r.className}),n.d(t,"AsyncLoop",function(){return r.AsyncLoop}),n.d(t,"VideoRecorder",function(){return r.VideoRecorder}),n.d(t,"JoystickAxis",function(){return r.JoystickAxis}),n.d(t,"VirtualJoystick",function(){return r.VirtualJoystick}),n.d(t,"WorkerPool",function(){return r.WorkerPool}),n.d(t,"Logger",function(){return r.Logger}),n.d(t,"_TypeStore",function(){return r._TypeStore}),n.d(t,"FilesInputStore",function(){return r.FilesInputStore}),n.d(t,"DeepCopier",function(){return r.DeepCopier}),n.d(t,"PivotTools",function(){return r.PivotTools}),n.d(t,"PrecisionDate",function(){return r.PrecisionDate}),n.d(t,"ScreenshotTools",function(){return r.ScreenshotTools}),n.d(t,"WebRequest",function(){return r.WebRequest}),n.d(t,"InspectableType",function(){return r.InspectableType}),n.d(t,"AutoRotationBehavior",function(){return r.AutoRotationBehavior}),n.d(t,"BouncingBehavior",function(){return r.BouncingBehavior}),n.d(t,"FramingBehavior",function(){return r.FramingBehavior}),n.d(t,"AttachToBoxBehavior",function(){return r.AttachToBoxBehavior}),n.d(t,"FadeInOutBehavior",function(){return r.FadeInOutBehavior}),n.d(t,"MultiPointerScaleBehavior",function(){return r.MultiPointerScaleBehavior}),n.d(t,"PointerDragBehavior",function(){return r.PointerDragBehavior}),n.d(t,"SixDofDragBehavior",function(){return r.SixDofDragBehavior}),n.d(t,"ArcRotateCameraGamepadInput",function(){return r.ArcRotateCameraGamepadInput}),n.d(t,"ArcRotateCameraKeyboardMoveInput",function(){return r.ArcRotateCameraKeyboardMoveInput}),n.d(t,"ArcRotateCameraMouseWheelInput",function(){return r.ArcRotateCameraMouseWheelInput}),n.d(t,"ArcRotateCameraPointersInput",function(){return r.ArcRotateCameraPointersInput}),n.d(t,"ArcRotateCameraVRDeviceOrientationInput",function(){return r.ArcRotateCameraVRDeviceOrientationInput}),n.d(t,"FlyCameraKeyboardInput",function(){return r.FlyCameraKeyboardInput}),n.d(t,"FlyCameraMouseInput",function(){return r.FlyCameraMouseInput}),n.d(t,"FollowCameraKeyboardMoveInput",function(){return r.FollowCameraKeyboardMoveInput}),n.d(t,"FollowCameraMouseWheelInput",function(){return r.FollowCameraMouseWheelInput}),n.d(t,"FollowCameraPointersInput",function(){return r.FollowCameraPointersInput}),n.d(t,"FreeCameraDeviceOrientationInput",function(){return r.FreeCameraDeviceOrientationInput}),n.d(t,"FreeCameraGamepadInput",function(){return r.FreeCameraGamepadInput}),n.d(t,"FreeCameraKeyboardMoveInput",function(){return r.FreeCameraKeyboardMoveInput}),n.d(t,"FreeCameraMouseInput",function(){return r.FreeCameraMouseInput}),n.d(t,"FreeCameraTouchInput",function(){return r.FreeCameraTouchInput}),n.d(t,"FreeCameraVirtualJoystickInput",function(){return r.FreeCameraVirtualJoystickInput}),n.d(t,"AnaglyphArcRotateCamera",function(){return r.AnaglyphArcRotateCamera}),n.d(t,"AnaglyphFreeCamera",function(){return r.AnaglyphFreeCamera}),n.d(t,"AnaglyphGamepadCamera",function(){return r.AnaglyphGamepadCamera}),n.d(t,"AnaglyphUniversalCamera",function(){return r.AnaglyphUniversalCamera}),n.d(t,"StereoscopicArcRotateCamera",function(){return r.StereoscopicArcRotateCamera}),n.d(t,"StereoscopicFreeCamera",function(){return r.StereoscopicFreeCamera}),n.d(t,"StereoscopicGamepadCamera",function(){return r.StereoscopicGamepadCamera}),n.d(t,"StereoscopicUniversalCamera",function(){return r.StereoscopicUniversalCamera}),n.d(t,"VRCameraMetrics",function(){return r.VRCameraMetrics}),n.d(t,"VRDeviceOrientationArcRotateCamera",function(){return r.VRDeviceOrientationArcRotateCamera}),n.d(t,"VRDeviceOrientationFreeCamera",function(){return r.VRDeviceOrientationFreeCamera}),n.d(t,"VRDeviceOrientationGamepadCamera",function(){return r.VRDeviceOrientationGamepadCamera}),n.d(t,"OnAfterEnteringVRObservableEvent",function(){return r.OnAfterEnteringVRObservableEvent}),n.d(t,"VRExperienceHelper",function(){return r.VRExperienceHelper}),n.d(t,"WebVRFreeCamera",function(){return r.WebVRFreeCamera}),n.d(t,"WebXRCamera",function(){return r.WebXRCamera}),n.d(t,"WebXREnterExitUIButton",function(){return r.WebXREnterExitUIButton}),n.d(t,"WebXREnterExitUIOptions",function(){return r.WebXREnterExitUIOptions}),n.d(t,"WebXREnterExitUI",function(){return r.WebXREnterExitUI}),n.d(t,"WebXRState",function(){return r.WebXRState}),n.d(t,"WebXRExperienceHelper",function(){return r.WebXRExperienceHelper}),n.d(t,"WebXRController",function(){return r.WebXRController}),n.d(t,"WebXRInput",function(){return r.WebXRInput}),n.d(t,"WebXRManagedOutputCanvas",function(){return r.WebXRManagedOutputCanvas}),n.d(t,"WebXRSessionManager",function(){return r.WebXRSessionManager}),n.d(t,"Octree",function(){return r.Octree}),n.d(t,"OctreeBlock",function(){return r.OctreeBlock}),n.d(t,"OctreeSceneComponent",function(){return r.OctreeSceneComponent}),n.d(t,"_OcclusionDataStorage",function(){return r._OcclusionDataStorage}),n.d(t,"_forceTransformFeedbackToBundle",function(){return r._forceTransformFeedbackToBundle}),n.d(t,"ShadowGenerator",function(){return r.ShadowGenerator}),n.d(t,"ShadowGeneratorSceneComponent",function(){return r.ShadowGeneratorSceneComponent}),n.d(t,"_BabylonLoaderRegistered",function(){return r._BabylonLoaderRegistered}),n.d(t,"BackgroundMaterial",function(){return r.BackgroundMaterial}),n.d(t,"PBRMaterialDefines",function(){return r.PBRMaterialDefines}),n.d(t,"PBRBaseMaterial",function(){return r.PBRBaseMaterial}),n.d(t,"PBRBaseSimpleMaterial",function(){return r.PBRBaseSimpleMaterial}),n.d(t,"PBRMaterial",function(){return r.PBRMaterial}),n.d(t,"PBRMetallicRoughnessMaterial",function(){return r.PBRMetallicRoughnessMaterial}),n.d(t,"PBRSpecularGlossinessMaterial",function(){return r.PBRSpecularGlossinessMaterial}),n.d(t,"ColorGradingTexture",function(){return r.ColorGradingTexture}),n.d(t,"DynamicTexture",function(){return r.DynamicTexture}),n.d(t,"ProceduralTexture",function(){return r.ProceduralTexture}),n.d(t,"RawCubeTexture",function(){return r.RawCubeTexture}),n.d(t,"RawTexture",function(){return r.RawTexture}),n.d(t,"RawTexture3D",function(){return r.RawTexture3D}),n.d(t,"RefractionTexture",function(){return r.RefractionTexture}),n.d(t,"VideoTexture",function(){return r.VideoTexture}),n.d(t,"HtmlElementTexture",function(){return r.HtmlElementTexture}),n.d(t,"DracoCompression",function(){return r.DracoCompression}),n.d(t,"DiscBuilder",function(){return r.DiscBuilder}),n.d(t,"RibbonBuilder",function(){return r.RibbonBuilder}),n.d(t,"HemisphereBuilder",function(){return r.HemisphereBuilder}),n.d(t,"TorusBuilder",function(){return r.TorusBuilder}),n.d(t,"TorusKnotBuilder",function(){return r.TorusKnotBuilder}),n.d(t,"PolygonBuilder",function(){return r.PolygonBuilder}),n.d(t,"ShapeBuilder",function(){return r.ShapeBuilder}),n.d(t,"LatheBuilder",function(){return r.LatheBuilder}),n.d(t,"GroundBuilder",function(){return r.GroundBuilder}),n.d(t,"TubeBuilder",function(){return r.TubeBuilder}),n.d(t,"PolyhedronBuilder",function(){return r.PolyhedronBuilder}),n.d(t,"IcoSphereBuilder",function(){return r.IcoSphereBuilder}),n.d(t,"DecalBuilder",function(){return r.DecalBuilder}),n.d(t,"BoxParticleEmitter",function(){return r.BoxParticleEmitter}),n.d(t,"ConeParticleEmitter",function(){return r.ConeParticleEmitter}),n.d(t,"CylinderParticleEmitter",function(){return r.CylinderParticleEmitter}),n.d(t,"CylinderDirectedParticleEmitter",function(){return r.CylinderDirectedParticleEmitter}),n.d(t,"HemisphericParticleEmitter",function(){return r.HemisphericParticleEmitter}),n.d(t,"PointParticleEmitter",function(){return r.PointParticleEmitter}),n.d(t,"SphereParticleEmitter",function(){return r.SphereParticleEmitter}),n.d(t,"SphereDirectedParticleEmitter",function(){return r.SphereDirectedParticleEmitter}),n.d(t,"CannonJSPlugin",function(){return r.CannonJSPlugin}),n.d(t,"AmmoJSPlugin",function(){return r.AmmoJSPlugin}),n.d(t,"OimoJSPlugin",function(){return r.OimoJSPlugin}),n.d(t,"PostProcessRenderEffect",function(){return r.PostProcessRenderEffect}),n.d(t,"PostProcessRenderPipeline",function(){return r.PostProcessRenderPipeline}),n.d(t,"PostProcessRenderPipelineManager",function(){return r.PostProcessRenderPipelineManager}),n.d(t,"PostProcessRenderPipelineManagerSceneComponent",function(){return r.PostProcessRenderPipelineManagerSceneComponent}),n.d(t,"CubeMapToSphericalPolynomialTools",function(){return r.CubeMapToSphericalPolynomialTools}),n.d(t,"HDRTools",function(){return r.HDRTools}),n.d(t,"PanoramaToCubeMapTools",function(){return r.PanoramaToCubeMapTools}),n.d(t,"_DDSTextureLoader",function(){return r._DDSTextureLoader}),n.d(t,"_ENVTextureLoader",function(){return r._ENVTextureLoader}),n.d(t,"_KTXTextureLoader",function(){return r._KTXTextureLoader}),n.d(t,"_TGATextureLoader",function(){return r._TGATextureLoader}),n.d(t,"CustomProceduralTexture",function(){return r.CustomProceduralTexture}),n.d(t,"NoiseProceduralTexture",function(){return r.NoiseProceduralTexture}),n.d(t,"ProceduralTextureSceneComponent",function(){return r.ProceduralTextureSceneComponent}),n.d(t,"DefaultRenderingPipeline",function(){return r.DefaultRenderingPipeline}),n.d(t,"LensRenderingPipeline",function(){return r.LensRenderingPipeline}),n.d(t,"SSAO2RenderingPipeline",function(){return r.SSAO2RenderingPipeline}),n.d(t,"SSAORenderingPipeline",function(){return r.SSAORenderingPipeline}),n.d(t,"StandardRenderingPipeline",function(){return r.StandardRenderingPipeline});var o=void 0!==e?e:"undefined"!=typeof window?window:void 0;if(void 0!==o){o.BABYLON=a,o.BABYLON=o.BABYLON||{};var a=o.BABYLON;a.Debug=a.Debug||{};var s=[];for(var u in i)a.Debug[u]=i[u],s.push(u);for(var u in r)a[u]=r[u]}var l={AxesViewer:i.AxesViewer,BoneAxesViewer:i.BoneAxesViewer,PhysicsViewer:i.PhysicsViewer,SkeletonViewer:i.SkeletonViewer}}).call(this,n(119))}])},Z4QM:function(e,t,n){!function(e){"use strict";var t=["\u062c\u0646\u0648\u0631\u064a","\u0641\u064a\u0628\u0631\u0648\u0631\u064a","\u0645\u0627\u0631\u0686","\u0627\u067e\u0631\u064a\u0644","\u0645\u0626\u064a","\u062c\u0648\u0646","\u062c\u0648\u0644\u0627\u0621\u0650","\u0622\u06af\u0633\u067d","\u0633\u064a\u067e\u067d\u0645\u0628\u0631","\u0622\u06aa\u067d\u0648\u0628\u0631","\u0646\u0648\u0645\u0628\u0631","\u068a\u0633\u0645\u0628\u0631"],r=["\u0622\u0686\u0631","\u0633\u0648\u0645\u0631","\u0627\u06b1\u0627\u0631\u0648","\u0627\u0631\u0628\u0639","\u062e\u0645\u064a\u0633","\u062c\u0645\u0639","\u0687\u0646\u0687\u0631"];n("wd/R").defineLocale("sd",{months:t,monthsShort:t,weekdays:r,weekdaysShort:r,weekdaysMin:r,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd\u060c D MMMM YYYY HH:mm"},meridiemParse:/\u0635\u0628\u062d|\u0634\u0627\u0645/,isPM:function(e){return"\u0634\u0627\u0645"===e},meridiem:function(e,t,n){return e<12?"\u0635\u0628\u062d":"\u0634\u0627\u0645"},calendar:{sameDay:"[\u0627\u0684] LT",nextDay:"[\u0633\u0680\u0627\u06bb\u064a] LT",nextWeek:"dddd [\u0627\u06b3\u064a\u0646 \u0647\u0641\u062a\u064a \u062a\u064a] LT",lastDay:"[\u06aa\u0627\u0644\u0647\u0647] LT",lastWeek:"[\u06af\u0632\u0631\u064a\u0644 \u0647\u0641\u062a\u064a] dddd [\u062a\u064a] LT",sameElse:"L"},relativeTime:{future:"%s \u067e\u0648\u0621",past:"%s \u0627\u06b3",s:"\u0686\u0646\u062f \u0633\u064a\u06aa\u0646\u068a",ss:"%d \u0633\u064a\u06aa\u0646\u068a",m:"\u0647\u06aa \u0645\u0646\u067d",mm:"%d \u0645\u0646\u067d",h:"\u0647\u06aa \u06aa\u0644\u0627\u06aa",hh:"%d \u06aa\u0644\u0627\u06aa",d:"\u0647\u06aa \u068f\u064a\u0646\u0647\u0646",dd:"%d \u068f\u064a\u0646\u0647\u0646",M:"\u0647\u06aa \u0645\u0647\u064a\u0646\u0648",MM:"%d \u0645\u0647\u064a\u0646\u0627",y:"\u0647\u06aa \u0633\u0627\u0644",yy:"%d \u0633\u0627\u0644"},preparse:function(e){return e.replace(/\u060c/g,",")},postformat:function(e){return e.replace(/,/g,"\u060c")},week:{dow:1,doy:4}})}()},ZAMP:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",ss:"%d saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}()},ZYjt:function(e,t,n){"use strict";n.r(t),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_c",function(){return Re}),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_b",function(){return Pe}),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_a",function(){return Ce}),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_l",function(){return h}),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_d",function(){return Oe}),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_i",function(){return E}),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_h",function(){return T}),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_e",function(){return Le}),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_f",function(){return Ye}),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_k",function(){return O}),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_j",function(){return R}),n.d(t,"\u0275angular_packages_platform_browser_platform_browser_g",function(){return F}),n.d(t,"BrowserModule",function(){return De}),n.d(t,"platformBrowser",function(){return Ae}),n.d(t,"Meta",function(){return we}),n.d(t,"Title",function(){return Ie}),n.d(t,"disableDebugTools",function(){return Ve}),n.d(t,"enableDebugTools",function(){return Ue}),n.d(t,"BrowserTransferStateModule",function(){return He}),n.d(t,"TransferState",function(){return ze}),n.d(t,"makeStateKey",function(){return je}),n.d(t,"By",function(){return We}),n.d(t,"EVENT_MANAGER_PLUGINS",function(){return L}),n.d(t,"EventManager",function(){return I}),n.d(t,"HAMMER_GESTURE_CONFIG",function(){return ue}),n.d(t,"HAMMER_LOADER",function(){return le}),n.d(t,"HammerGestureConfig",function(){return ce}),n.d(t,"DomSanitizer",function(){return _e}),n.d(t,"VERSION",function(){return Xe}),n.d(t,"\u0275ELEMENT_PROBE_PROVIDERS__POST_R3__",function(){return D}),n.d(t,"\u0275BROWSER_SANITIZATION_PROVIDERS",function(){return Me}),n.d(t,"\u0275INTERNAL_BROWSER_PLATFORM_PROVIDERS",function(){return xe}),n.d(t,"\u0275initDomAdapter",function(){return Se}),n.d(t,"\u0275BrowserDomAdapter",function(){return m}),n.d(t,"\u0275BrowserPlatformLocation",function(){return y}),n.d(t,"\u0275TRANSITION_ID",function(){return b}),n.d(t,"\u0275BrowserGetTestability",function(){return x}),n.d(t,"\u0275escapeHtml",function(){return Ge}),n.d(t,"\u0275ELEMENT_PROBE_PROVIDERS",function(){return w}),n.d(t,"\u0275DomAdapter",function(){return c}),n.d(t,"\u0275getDOM",function(){return s}),n.d(t,"\u0275setRootDomAdapter",function(){return u}),n.d(t,"\u0275DomRendererFactory2",function(){return W}),n.d(t,"\u0275NAMESPACE_URIS",function(){return k}),n.d(t,"\u0275flattenStyles",function(){return Y}),n.d(t,"\u0275shimContentAttribute",function(){return j}),n.d(t,"\u0275shimHostAttribute",function(){return z}),n.d(t,"\u0275DomEventsPlugin",function(){return ae}),n.d(t,"\u0275HammerGesturesPlugin",function(){return he}),n.d(t,"\u0275KeyEventsPlugin",function(){return pe}),n.d(t,"\u0275DomSharedStylesHost",function(){return B}),n.d(t,"\u0275SharedStylesHost",function(){return N}),n.d(t,"\u0275DomSanitizerImpl",function(){return me});var r=n("mrSG"),i=n("Ip0R"),o=n("CcnG"),a=null;function s(){return a}function u(e){a||(a=e)}var l,c=function(){function e(){this.resourceLoaderType=null}return Object.defineProperty(e.prototype,"attrToPropMap",{get:function(){return this._attrToPropMap},set:function(e){this._attrToPropMap=e},enumerable:!0,configurable:!0}),e}(),h=function(e){function t(){var t=e.call(this)||this;t._animationPrefix=null,t._transitionEnd=null;try{var n=t.createElement("div",document);if(null!=t.getStyle(n,"animationName"))t._animationPrefix="";else for(var r=["Webkit","Moz","O","ms"],i=0;i<r.length;i++)if(null!=t.getStyle(n,r[i]+"AnimationName")){t._animationPrefix="-"+r[i].toLowerCase()+"-";break}var o={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};Object.keys(o).forEach(function(e){null!=t.getStyle(n,e)&&(t._transitionEnd=o[e])})}catch(a){t._animationPrefix=null,t._transitionEnd=null}return t}return Object(r.__extends)(t,e),t.prototype.getDistributedNodes=function(e){return e.getDistributedNodes()},t.prototype.resolveAndSetHref=function(e,t,n){e.href=null==n?t:t+"/../"+n},t.prototype.supportsDOMEvents=function(){return!0},t.prototype.supportsNativeShadowDOM=function(){return"function"==typeof document.body.createShadowRoot},t.prototype.getAnimationPrefix=function(){return this._animationPrefix?this._animationPrefix:""},t.prototype.getTransitionEnd=function(){return this._transitionEnd?this._transitionEnd:""},t.prototype.supportsAnimation=function(){return null!=this._animationPrefix&&null!=this._transitionEnd},t}(c),d={class:"className",innerHtml:"innerHTML",readonly:"readOnly",tabindex:"tabIndex"},f={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},p={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},_=function(){if(o["\u0275global"].Node)return o["\u0275global"].Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))}}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.parse=function(e){throw new Error("parse not implemented")},t.makeCurrent=function(){u(new t)},t.prototype.hasProperty=function(e,t){return t in e},t.prototype.setProperty=function(e,t,n){e[t]=n},t.prototype.getProperty=function(e,t){return e[t]},t.prototype.invoke=function(e,t,n){var i;(i=e)[t].apply(i,Object(r.__spread)(n))},t.prototype.logError=function(e){window.console&&(console.error?console.error(e):console.log(e))},t.prototype.log=function(e){window.console&&window.console.log&&window.console.log(e)},t.prototype.logGroup=function(e){window.console&&window.console.group&&window.console.group(e)},t.prototype.logGroupEnd=function(){window.console&&window.console.groupEnd&&window.console.groupEnd()},Object.defineProperty(t.prototype,"attrToPropMap",{get:function(){return d},enumerable:!0,configurable:!0}),t.prototype.contains=function(e,t){return _.call(e,t)},t.prototype.querySelector=function(e,t){return e.querySelector(t)},t.prototype.querySelectorAll=function(e,t){return e.querySelectorAll(t)},t.prototype.on=function(e,t,n){e.addEventListener(t,n,!1)},t.prototype.onAndCancel=function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}},t.prototype.dispatchEvent=function(e,t){e.dispatchEvent(t)},t.prototype.createMouseEvent=function(e){var t=this.getDefaultDocument().createEvent("MouseEvent");return t.initEvent(e,!0,!0),t},t.prototype.createEvent=function(e){var t=this.getDefaultDocument().createEvent("Event");return t.initEvent(e,!0,!0),t},t.prototype.preventDefault=function(e){e.preventDefault(),e.returnValue=!1},t.prototype.isPrevented=function(e){return e.defaultPrevented||null!=e.returnValue&&!e.returnValue},t.prototype.getInnerHTML=function(e){return e.innerHTML},t.prototype.getTemplateContent=function(e){return"content"in e&&this.isTemplateElement(e)?e.content:null},t.prototype.getOuterHTML=function(e){return e.outerHTML},t.prototype.nodeName=function(e){return e.nodeName},t.prototype.nodeValue=function(e){return e.nodeValue},t.prototype.type=function(e){return e.type},t.prototype.content=function(e){return this.hasProperty(e,"content")?e.content:e},t.prototype.firstChild=function(e){return e.firstChild},t.prototype.nextSibling=function(e){return e.nextSibling},t.prototype.parentElement=function(e){return e.parentNode},t.prototype.childNodes=function(e){return e.childNodes},t.prototype.childNodesAsList=function(e){for(var t=e.childNodes,n=new Array(t.length),r=0;r<t.length;r++)n[r]=t[r];return n},t.prototype.clearNodes=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.prototype.appendChild=function(e,t){e.appendChild(t)},t.prototype.removeChild=function(e,t){e.removeChild(t)},t.prototype.replaceChild=function(e,t,n){e.replaceChild(t,n)},t.prototype.remove=function(e){return e.parentNode&&e.parentNode.removeChild(e),e},t.prototype.insertBefore=function(e,t,n){e.insertBefore(n,t)},t.prototype.insertAllBefore=function(e,t,n){n.forEach(function(n){return e.insertBefore(n,t)})},t.prototype.insertAfter=function(e,t,n){e.insertBefore(n,t.nextSibling)},t.prototype.setInnerHTML=function(e,t){e.innerHTML=t},t.prototype.getText=function(e){return e.textContent},t.prototype.setText=function(e,t){e.textContent=t},t.prototype.getValue=function(e){return e.value},t.prototype.setValue=function(e,t){e.value=t},t.prototype.getChecked=function(e){return e.checked},t.prototype.setChecked=function(e,t){e.checked=t},t.prototype.createComment=function(e){return this.getDefaultDocument().createComment(e)},t.prototype.createTemplate=function(e){var t=this.getDefaultDocument().createElement("template");return t.innerHTML=e,t},t.prototype.createElement=function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)},t.prototype.createElementNS=function(e,t,n){return(n=n||this.getDefaultDocument()).createElementNS(e,t)},t.prototype.createTextNode=function(e,t){return(t=t||this.getDefaultDocument()).createTextNode(e)},t.prototype.createScriptTag=function(e,t,n){var r=(n=n||this.getDefaultDocument()).createElement("SCRIPT");return r.setAttribute(e,t),r},t.prototype.createStyleElement=function(e,t){var n=(t=t||this.getDefaultDocument()).createElement("style");return this.appendChild(n,this.createTextNode(e,t)),n},t.prototype.createShadowRoot=function(e){return e.createShadowRoot()},t.prototype.getShadowRoot=function(e){return e.shadowRoot},t.prototype.getHost=function(e){return e.host},t.prototype.clone=function(e){return e.cloneNode(!0)},t.prototype.getElementsByClassName=function(e,t){return e.getElementsByClassName(t)},t.prototype.getElementsByTagName=function(e,t){return e.getElementsByTagName(t)},t.prototype.classList=function(e){return Array.prototype.slice.call(e.classList,0)},t.prototype.addClass=function(e,t){e.classList.add(t)},t.prototype.removeClass=function(e,t){e.classList.remove(t)},t.prototype.hasClass=function(e,t){return e.classList.contains(t)},t.prototype.setStyle=function(e,t,n){e.style[t]=n},t.prototype.removeStyle=function(e,t){e.style[t]=""},t.prototype.getStyle=function(e,t){return e.style[t]},t.prototype.hasStyle=function(e,t,n){var r=this.getStyle(e,t)||"";return n?r==n:r.length>0},t.prototype.tagName=function(e){return e.tagName},t.prototype.attributeMap=function(e){for(var t=new Map,n=e.attributes,r=0;r<n.length;r++){var i=n.item(r);t.set(i.name,i.value)}return t},t.prototype.hasAttribute=function(e,t){return e.hasAttribute(t)},t.prototype.hasAttributeNS=function(e,t,n){return e.hasAttributeNS(t,n)},t.prototype.getAttribute=function(e,t){return e.getAttribute(t)},t.prototype.getAttributeNS=function(e,t,n){return e.getAttributeNS(t,n)},t.prototype.setAttribute=function(e,t,n){e.setAttribute(t,n)},t.prototype.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},t.prototype.removeAttribute=function(e,t){e.removeAttribute(t)},t.prototype.removeAttributeNS=function(e,t,n){e.removeAttributeNS(t,n)},t.prototype.templateAwareRoot=function(e){return this.isTemplateElement(e)?this.content(e):e},t.prototype.createHtmlDocument=function(){return document.implementation.createHTMLDocument("fakeTitle")},t.prototype.getDefaultDocument=function(){return document},t.prototype.getBoundingClientRect=function(e){try{return e.getBoundingClientRect()}catch(t){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}},t.prototype.getTitle=function(e){return e.title},t.prototype.setTitle=function(e,t){e.title=t||""},t.prototype.elementMatches=function(e,t){return!!this.isElementNode(e)&&(e.matches&&e.matches(t)||e.msMatchesSelector&&e.msMatchesSelector(t)||e.webkitMatchesSelector&&e.webkitMatchesSelector(t))},t.prototype.isTemplateElement=function(e){return this.isElementNode(e)&&"TEMPLATE"===e.nodeName},t.prototype.isTextNode=function(e){return e.nodeType===Node.TEXT_NODE},t.prototype.isCommentNode=function(e){return e.nodeType===Node.COMMENT_NODE},t.prototype.isElementNode=function(e){return e.nodeType===Node.ELEMENT_NODE},t.prototype.hasShadowRoot=function(e){return null!=e.shadowRoot&&e instanceof HTMLElement},t.prototype.isShadowRoot=function(e){return e instanceof DocumentFragment},t.prototype.importIntoDoc=function(e){return document.importNode(this.templateAwareRoot(e),!0)},t.prototype.adoptNode=function(e){return document.adoptNode(e)},t.prototype.getHref=function(e){return e.getAttribute("href")},t.prototype.getEventKey=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&p.hasOwnProperty(t)&&(t=p[t]))}return f[t]||t},t.prototype.getGlobalEventTarget=function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null},t.prototype.getHistory=function(){return window.history},t.prototype.getLocation=function(){return window.location},t.prototype.getBaseHref=function(e){var t,n=g||(g=document.querySelector("base"))?g.getAttribute("href"):null;return null==n?null:(t=n,l||(l=document.createElement("a")),l.setAttribute("href",t),"/"===l.pathname.charAt(0)?l.pathname:"/"+l.pathname)},t.prototype.resetBaseElement=function(){g=null},t.prototype.getUserAgent=function(){return window.navigator.userAgent},t.prototype.setData=function(e,t,n){this.setAttribute(e,"data-"+t,n)},t.prototype.getData=function(e,t){return this.getAttribute(e,"data-"+t)},t.prototype.getComputedStyle=function(e){return getComputedStyle(e)},t.prototype.supportsWebAnimation=function(){return"function"==typeof Element.prototype.animate},t.prototype.performanceNow=function(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()},t.prototype.supportsCookies=function(){return!0},t.prototype.getCookie=function(e){return Object(i["\u0275parseCookieValue"])(document.cookie,e)},t.prototype.setCookie=function(e,t){document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)},t}(h),g=null;function v(){return!!window.history.pushState}var y=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._init(),n}return Object(r.__extends)(t,e),t.prototype._init=function(){this.location=s().getLocation(),this._history=s().getHistory()},t.prototype.getBaseHrefFromDOM=function(){return s().getBaseHref(this._doc)},t.prototype.onPopState=function(e){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",e,!1)},t.prototype.onHashChange=function(e){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",e,!1)},Object.defineProperty(t.prototype,"href",{get:function(){return this.location.href},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"protocol",{get:function(){return this.location.protocol},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hostname",{get:function(){return this.location.hostname},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"port",{get:function(){return this.location.port},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pathname",{get:function(){return this.location.pathname},set:function(e){this.location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"search",{get:function(){return this.location.search},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hash",{get:function(){return this.location.hash},enumerable:!0,configurable:!0}),t.prototype.pushState=function(e,t,n){v()?this._history.pushState(e,t,n):this.location.hash=n},t.prototype.replaceState=function(e,t,n){v()?this._history.replaceState(e,t,n):this.location.hash=n},t.prototype.forward=function(){this._history.forward()},t.prototype.back=function(){this._history.back()},t.prototype.getState=function(){return this._history.state},Object(r.__decorate)([Object(r.__param)(0,Object(o.Inject)(i.DOCUMENT)),Object(r.__metadata)("design:paramtypes",[Object])],t)}(i.PlatformLocation),b=new o.InjectionToken("TRANSITION_ID");function T(e,t,n){return function(){n.get(o.ApplicationInitStatus).donePromise.then(function(){var n=s();Array.prototype.slice.apply(n.querySelectorAll(t,"style[ng-transition]")).filter(function(t){return n.getAttribute(t,"ng-transition")===e}).forEach(function(e){return n.remove(e)})})}}var E=[{provide:o.APP_INITIALIZER,useFactory:T,deps:[b,i.DOCUMENT,o.Injector],multi:!0}],x=function(){function e(){}return e.init=function(){Object(o.setTestabilityGetter)(new e)},e.prototype.addToWindow=function(e){o["\u0275global"].getAngularTestability=function(t,n){void 0===n&&(n=!0);var r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},o["\u0275global"].getAllAngularTestabilities=function(){return e.getAllTestabilities()},o["\u0275global"].getAllAngularRootElements=function(){return e.getAllRootElements()},o["\u0275global"].frameworkStabilizers||(o["\u0275global"].frameworkStabilizers=[]),o["\u0275global"].frameworkStabilizers.push(function(e){var t=o["\u0275global"].getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(i)})})},e.prototype.findTestabilityInTree=function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?s().isShadowRoot(t)?this.findTestabilityInTree(e,s().getHost(t),!0):this.findTestabilityInTree(e,s().parentElement(t),!0):null},e}();function M(e,t){"undefined"!=typeof COMPILED&&COMPILED||((o["\u0275global"].ng=o["\u0275global"].ng||{})[e]=t)}var A=function(){return{ApplicationRef:o.ApplicationRef,NgZone:o.NgZone}}(),S="probe",C="coreTokens";function P(e){return Object(o.getDebugNode)(e)}function R(e){return M(S,P),M(C,Object(r.__assign)({},A,(e||[]).reduce(function(e,t){return e[t.name]=t.token,e},{}))),function(){return P}}var D=[],O=[{provide:o.APP_INITIALIZER,useFactory:R,deps:[[o.NgProbeToken,new o.Optional]],multi:!0}],w=O,L=new o.InjectionToken("EventManagerPlugins"),I=function(){function e(e,t){var n=this;this._zone=t,this._eventNameToPlugin=new Map,e.forEach(function(e){return e.manager=n}),this._plugins=e.slice().reverse()}return e.prototype.addEventListener=function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)},e.prototype.addGlobalEventListener=function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)},e.prototype.getZone=function(){return this._zone},e.prototype._findPluginFor=function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event "+e)},e}(),F=function(){function e(e){this._doc=e}return e.prototype.addGlobalEventListener=function(e,t,n){var r=s().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target "+r+" for event "+t);return this.addEventListener(r,t,n)},e}(),N=function(){function e(){this._stylesSet=new Set}return e.prototype.addStyles=function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)},e.prototype.onStylesAdded=function(e){},e.prototype.getAllStyles=function(){return Array.from(this._stylesSet)},e}(),B=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n._hostNodes=new Set,n._styleNodes=new Set,n._hostNodes.add(t.head),n}return Object(r.__extends)(t,e),t.prototype._addStylesToHost=function(e,t){var n=this;e.forEach(function(e){var r=n._doc.createElement("style");r.textContent=e,n._styleNodes.add(t.appendChild(r))})},t.prototype.addHost=function(e){this._addStylesToHost(this._stylesSet,e),this._hostNodes.add(e)},t.prototype.removeHost=function(e){this._hostNodes.delete(e)},t.prototype.onStylesAdded=function(e){var t=this;this._hostNodes.forEach(function(n){return t._addStylesToHost(e,n)})},t.prototype.ngOnDestroy=function(){this._styleNodes.forEach(function(e){return s().remove(e)})},t}(N),k={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},U=/%COMP%/g,V="_nghost-%COMP%",G="_ngcontent-%COMP%";function j(e){return G.replace(U,e)}function z(e){return V.replace(U,e)}function Y(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?Y(e,i,n):(i=i.replace(U,e),n.push(i))}return n}function H(e){return function(t){!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var W=function(){function e(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new X(e)}return e.prototype.createRenderer=function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case o.ViewEncapsulation.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new q(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case o.ViewEncapsulation.Native:case o.ViewEncapsulation.ShadowDom:return new Z(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=Y(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}},e.prototype.begin=function(){},e.prototype.end=function(){},e}(),X=function(){function e(e){this.eventManager=e,this.data=Object.create(null)}return e.prototype.destroy=function(){},e.prototype.createElement=function(e,t){return t?document.createElementNS(k[t]||t,e):document.createElement(e)},e.prototype.createComment=function(e){return document.createComment(e)},e.prototype.createText=function(e){return document.createTextNode(e)},e.prototype.appendChild=function(e,t){e.appendChild(t)},e.prototype.insertBefore=function(e,t,n){e&&e.insertBefore(t,n)},e.prototype.removeChild=function(e,t){e&&e.removeChild(t)},e.prototype.selectRootElement=function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'+e+'" did not match any elements');return t||(n.textContent=""),n},e.prototype.parentNode=function(e){return e.parentNode},e.prototype.nextSibling=function(e){return e.nextSibling},e.prototype.setAttribute=function(e,t,n,r){if(r){t=r+":"+t;var i=k[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)},e.prototype.removeAttribute=function(e,t,n){if(n){var r=k[n];r?e.removeAttributeNS(r,t):e.removeAttribute(n+":"+t)}else e.removeAttribute(t)},e.prototype.addClass=function(e,t){e.classList.add(t)},e.prototype.removeClass=function(e,t){e.classList.remove(t)},e.prototype.setStyle=function(e,t,n,r){r&o.RendererStyleFlags2.DashCase?e.style.setProperty(t,n,r&o.RendererStyleFlags2.Important?"important":""):e.style[t]=n},e.prototype.removeStyle=function(e,t,n){n&o.RendererStyleFlags2.DashCase?e.style.removeProperty(t):e.style[t]=""},e.prototype.setProperty=function(e,t,n){Q(t,"property"),e[t]=n},e.prototype.setValue=function(e,t){e.nodeValue=t},e.prototype.listen=function(e,t,n){return Q(t,"listener"),"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,H(n)):this.eventManager.addEventListener(e,t,H(n))},e}(),K=function(){return"@".charCodeAt(0)}();function Q(e,t){if(e.charCodeAt(0)===K)throw new Error("Found the synthetic "+t+" "+e+'. Please include either "BrowserAnimationsModule" or "NoopAnimationsModule" in your application.')}var q=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;o.component=r;var a=Y(i+"-"+r.id,r.styles,[]);return n.addStyles(a),o.contentAttr=j(i+"-"+r.id),o.hostAttr=z(i+"-"+r.id),o}return Object(r.__extends)(t,e),t.prototype.applyToHost=function(t){e.prototype.setAttribute.call(this,t,this.hostAttr,"")},t.prototype.createElement=function(t,n){var r=e.prototype.createElement.call(this,t,n);return e.prototype.setAttribute.call(this,r,this.contentAttr,""),r},t}(X),Z=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;a.sharedStylesHost=n,a.hostEl=r,a.component=i,a.shadowRoot=i.encapsulation===o.ViewEncapsulation.ShadowDom?r.attachShadow({mode:"open"}):r.createShadowRoot(),a.sharedStylesHost.addHost(a.shadowRoot);for(var s=Y(i.id,i.styles,[]),u=0;u<s.length;u++){var l=document.createElement("style");l.textContent=s[u],a.shadowRoot.appendChild(l)}return a}return Object(r.__extends)(t,e),t.prototype.nodeOrShadowRoot=function(e){return e===this.hostEl?this.shadowRoot:e},t.prototype.destroy=function(){this.sharedStylesHost.removeHost(this.shadowRoot)},t.prototype.appendChild=function(t,n){return e.prototype.appendChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.insertBefore=function(t,n,r){return e.prototype.insertBefore.call(this,this.nodeOrShadowRoot(t),n,r)},t.prototype.removeChild=function(t,n){return e.prototype.removeChild.call(this,this.nodeOrShadowRoot(t),n)},t.prototype.parentNode=function(t){return this.nodeOrShadowRoot(e.prototype.parentNode.call(this,this.nodeOrShadowRoot(t)))},t}(X),J=function(){return"undefined"!=typeof Zone&&Zone.__symbol__||function(e){return"__zone_symbol__"+e}}(),$=J("addEventListener"),ee=J("removeEventListener"),te={},ne="__zone_symbol__propagationStopped",re=function(){var e="undefined"!=typeof Zone&&Zone[J("BLACK_LISTED_EVENTS")];if(e){var t={};return e.forEach(function(e){t[e]=e}),t}}(),ie=function(e){return!!re&&re.hasOwnProperty(e)},oe=function(e){var t=te[e.type];if(t){var n=this[t];if(n){var r=[e];if(1===n.length)return(a=n[0]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r);for(var i=n.slice(),o=0;o<i.length&&!0!==e[ne];o++){var a;(a=i[o]).zone!==Zone.current?a.zone.run(a.handler,this,r):a.handler.apply(this,r)}}}},ae=function(e){function t(t,n,r){var o=e.call(this,t)||this;return o.ngZone=n,r&&Object(i.isPlatformServer)(r)||o.patchEvent(),o}return Object(r.__extends)(t,e),t.prototype.patchEvent=function(){if("undefined"!=typeof Event&&Event&&Event.prototype&&!Event.prototype.__zone_symbol__stopImmediatePropagation){var e=Event.prototype.__zone_symbol__stopImmediatePropagation=Event.prototype.stopImmediatePropagation;Event.prototype.stopImmediatePropagation=function(){this&&(this[ne]=!0),e&&e.apply(this,arguments)}}},t.prototype.supports=function(e){return!0},t.prototype.addEventListener=function(e,t,n){var r=this,i=n;if(!e[$]||o.NgZone.isInAngularZone()&&!ie(t))e.addEventListener(t,i,!1);else{var a=te[t];a||(a=te[t]=J("ANGULAR"+t+"FALSE"));var s=e[a],u=s&&s.length>0;s||(s=e[a]=[]);var l=ie(t)?Zone.root:Zone.current;if(0===s.length)s.push({zone:l,handler:i});else{for(var c=!1,h=0;h<s.length;h++)if(s[h].handler===i){c=!0;break}c||s.push({zone:l,handler:i})}u||e[$](t,oe,!1)}return function(){return r.removeEventListener(e,t,i)}},t.prototype.removeEventListener=function(e,t,n){var r=e[ee];if(!r)return e.removeEventListener.apply(e,[t,n,!1]);var i=te[t],o=i&&e[i];if(!o)return e.removeEventListener.apply(e,[t,n,!1]);for(var a=!1,s=0;s<o.length;s++)if(o[s].handler===n){a=!0,o.splice(s,1);break}a?0===o.length&&r.apply(e,[t,oe,!1]):e.removeEventListener.apply(e,[t,n,!1])},t}(F),se={pan:!0,panstart:!0,panmove:!0,panend:!0,pancancel:!0,panleft:!0,panright:!0,panup:!0,pandown:!0,pinch:!0,pinchstart:!0,pinchmove:!0,pinchend:!0,pinchcancel:!0,pinchin:!0,pinchout:!0,press:!0,pressup:!0,rotate:!0,rotatestart:!0,rotatemove:!0,rotateend:!0,rotatecancel:!0,swipe:!0,swipeleft:!0,swiperight:!0,swipeup:!0,swipedown:!0,tap:!0},ue=new o.InjectionToken("HammerGestureConfig"),le=new o.InjectionToken("HammerLoader"),ce=function(){function e(){this.events=[],this.overrides={}}return e.prototype.buildHammer=function(e){var t=new Hammer(e,this.options);for(var n in t.get("pinch").set({enable:!0}),t.get("rotate").set({enable:!0}),this.overrides)t.get(n).set(this.overrides[n]);return t},e}(),he=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._config=n,o.console=r,o.loader=i,o}return Object(r.__extends)(t,e),t.prototype.supports=function(e){return!(!se.hasOwnProperty(e.toLowerCase())&&!this.isCustomEvent(e)||!window.Hammer&&!this.loader&&(this.console.warn('The "'+e+'" event cannot be bound because Hammer.JS is not loaded and no custom loader has been specified.'),1))},t.prototype.addEventListener=function(e,t,n){var r=this,i=this.manager.getZone();if(t=t.toLowerCase(),!window.Hammer&&this.loader){var o=!1,a=function(){o=!0};return this.loader().then(function(){if(!window.Hammer)return r.console.warn("The custom HAMMER_LOADER completed, but Hammer.JS is not present."),void(a=function(){});o||(a=r.addEventListener(e,t,n))}).catch(function(){r.console.warn('The "'+t+'" event cannot be bound because the custom Hammer.JS loader failed.'),a=function(){}}),function(){a()}}return i.runOutsideAngular(function(){var o=r._config.buildHammer(e),a=function(e){i.runGuarded(function(){n(e)})};return o.on(t,a),function(){o.off(t,a),"function"==typeof o.destroy&&o.destroy()}})},t.prototype.isCustomEvent=function(e){return this._config.events.indexOf(e)>-1},t}(F),de=["alt","control","meta","shift"],fe={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},pe=function(e){function t(t){return e.call(this,t)||this}var n;return Object(r.__extends)(t,e),n=t,t.prototype.supports=function(e){return null!=n.parseEventName(e)},t.prototype.addEventListener=function(e,t,r){var i=n.parseEventName(t),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return s().onAndCancel(e,i.domEventName,o)})},t.parseEventName=function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),o="";if(de.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o+=e+".")}),o+=i,0!=t.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a},t.getEventFullKey=function(e){var t="",n=s().getEventKey(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),de.forEach(function(r){r!=n&&(0,fe[r])(e)&&(t+=r+".")}),t+=n},t.eventCallback=function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded(function(){return t(i)})}},t._normalizeKey=function(e){switch(e){case"esc":return"escape";default:return e}},t}(F),_e=function(){return function(){}}(),me=function(e){function t(t){var n=e.call(this)||this;return n._doc=t,n}return Object(r.__extends)(t,e),t.prototype.sanitize=function(e,t){if(null==t)return null;switch(e){case o.SecurityContext.NONE:return t;case o.SecurityContext.HTML:return t instanceof ve?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"HTML"),Object(o["\u0275_sanitizeHtml"])(this._doc,String(t)));case o.SecurityContext.STYLE:return t instanceof ye?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"Style"),Object(o["\u0275_sanitizeStyle"])(t));case o.SecurityContext.SCRIPT:if(t instanceof be)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"Script"),new Error("unsafe value used in a script context");case o.SecurityContext.URL:return t instanceof Ee||t instanceof Te?t.changingThisBreaksApplicationSecurity:(this.checkNotSafeValue(t,"URL"),Object(o["\u0275_sanitizeUrl"])(String(t)));case o.SecurityContext.RESOURCE_URL:if(t instanceof Ee)return t.changingThisBreaksApplicationSecurity;throw this.checkNotSafeValue(t,"ResourceURL"),new Error("unsafe value used in a resource URL context (see http://g.co/ng/security#xss)");default:throw new Error("Unexpected SecurityContext "+e+" (see http://g.co/ng/security#xss)")}},t.prototype.checkNotSafeValue=function(e,t){if(e instanceof ge)throw new Error("Required a safe "+t+", got a "+e.getTypeName()+" (see http://g.co/ng/security#xss)")},t.prototype.bypassSecurityTrustHtml=function(e){return new ve(e)},t.prototype.bypassSecurityTrustStyle=function(e){return new ye(e)},t.prototype.bypassSecurityTrustScript=function(e){return new be(e)},t.prototype.bypassSecurityTrustUrl=function(e){return new Te(e)},t.prototype.bypassSecurityTrustResourceUrl=function(e){return new Ee(e)},t}(_e),ge=function(){function e(e){this.changingThisBreaksApplicationSecurity=e}return e.prototype.toString=function(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"},e}(),ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getTypeName=function(){return"HTML"},t}(ge),ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getTypeName=function(){return"Style"},t}(ge),be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getTypeName=function(){return"Script"},t}(ge),Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getTypeName=function(){return"URL"},t}(ge),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(r.__extends)(t,e),t.prototype.getTypeName=function(){return"ResourceURL"},t}(ge),xe=[{provide:o.PLATFORM_ID,useValue:i["\u0275PLATFORM_BROWSER_ID"]},{provide:o.PLATFORM_INITIALIZER,useValue:Se,multi:!0},{provide:i.PlatformLocation,useClass:y,deps:[i.DOCUMENT]},{provide:i.DOCUMENT,useFactory:Pe,deps:[]}],Me=[{provide:o.Sanitizer,useExisting:_e},{provide:_e,useClass:me,deps:[i.DOCUMENT]}],Ae=Object(o.createPlatformFactory)(o.platformCore,"browser",xe);function Se(){m.makeCurrent(),x.init()}function Ce(){return new o.ErrorHandler}function Pe(){return document}var Re=[Me,{provide:o["\u0275APP_ROOT"],useValue:!0},{provide:o.ErrorHandler,useFactory:Ce,deps:[]},{provide:L,useClass:ae,multi:!0,deps:[i.DOCUMENT,o.NgZone,o.PLATFORM_ID]},{provide:L,useClass:pe,multi:!0,deps:[i.DOCUMENT]},{provide:L,useClass:he,multi:!0,deps:[i.DOCUMENT,ue,o["\u0275Console"],[new o.Optional,le]]},{provide:ue,useClass:ce,deps:[]},{provide:W,useClass:W,deps:[I,B,o.APP_ID]},{provide:o.RendererFactory2,useExisting:W},{provide:N,useExisting:B},{provide:B,useClass:B,deps:[i.DOCUMENT]},{provide:o.Testability,useClass:o.Testability,deps:[o.NgZone]},{provide:I,useClass:I,deps:[L,o.NgZone]},w],De=function(){function e(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}var t;return t=e,e.withServerTransition=function(e){return{ngModule:t,providers:[{provide:o.APP_ID,useValue:e.appId},{provide:b,useExisting:o.APP_ID},E]}},e}();function Oe(){return new we(Object(o["\u0275\u0275inject"])(i.DOCUMENT))}var we=function(){function e(e){this._doc=e,this._dom=s()}return e.prototype.addTag=function(e,t){return void 0===t&&(t=!1),e?this._getOrCreateElement(e,t):null},e.prototype.addTags=function(e,t){var n=this;return void 0===t&&(t=!1),e?e.reduce(function(e,r){return r&&e.push(n._getOrCreateElement(r,t)),e},[]):[]},e.prototype.getTag=function(e){return e&&this._dom.querySelector(this._doc,"meta["+e+"]")||null},e.prototype.getTags=function(e){if(!e)return[];var t=this._dom.querySelectorAll(this._doc,"meta["+e+"]");return t?[].slice.call(t):[]},e.prototype.updateTag=function(e,t){if(!e)return null;t=t||this._parseSelector(e);var n=this.getTag(t);return n?this._setMetaElementAttributes(e,n):this._getOrCreateElement(e,!0)},e.prototype.removeTag=function(e){this.removeTagElement(this.getTag(e))},e.prototype.removeTagElement=function(e){e&&this._dom.remove(e)},e.prototype._getOrCreateElement=function(e,t){if(void 0===t&&(t=!1),!t){var n=this._parseSelector(e),r=this.getTag(n);if(r&&this._containsAttributes(e,r))return r}var i=this._dom.createElement("meta");this._setMetaElementAttributes(e,i);var o=this._dom.getElementsByTagName(this._doc,"head")[0];return this._dom.appendChild(o,i),i},e.prototype._setMetaElementAttributes=function(e,t){var n=this;return Object.keys(e).forEach(function(r){return n._dom.setAttribute(t,r,e[r])}),t},e.prototype._parseSelector=function(e){var t=e.name?"name":"property";return t+'="'+e[t]+'"'},e.prototype._containsAttributes=function(e,t){var n=this;return Object.keys(e).every(function(r){return n._dom.getAttribute(t,r)===e[r]})},e.ngInjectableDef=Object(o["\u0275\u0275defineInjectable"])({factory:Oe,token:e,providedIn:"root"}),e}();function Le(){return new Ie(Object(o["\u0275\u0275inject"])(i.DOCUMENT))}var Ie=function(){function e(e){this._doc=e}return e.prototype.getTitle=function(){return s().getTitle(this._doc)},e.prototype.setTitle=function(e){s().setTitle(this._doc,e)},e.ngInjectableDef=Object(o["\u0275\u0275defineInjectable"])({factory:Le,token:e,providedIn:"root"}),e}(),Fe="undefined"!=typeof window&&window||{},Ne=function(){return function(e,t){this.msPerTick=e,this.numTicks=t}}(),Be=function(){function e(e){this.appRef=e.injector.get(o.ApplicationRef)}return e.prototype.timeChangeDetection=function(e){var t=e&&e.record,n=null!=Fe.console.profile;t&&n&&Fe.console.profile("Change Detection");for(var r=s().performanceNow(),i=0;i<5||s().performanceNow()-r<500;)this.appRef.tick(),i++;var o=s().performanceNow();t&&n&&Fe.console.profileEnd("Change Detection");var a=(o-r)/i;return Fe.console.log("ran "+i+" change detection cycles"),Fe.console.log(a.toFixed(2)+" ms per check"),new Ne(a,i)},e}(),ke="profiler";function Ue(e){return M(ke,new Be(e)),e}function Ve(){M(ke,null)}function Ge(e){var t={"&":"&a;",'"':"&q;","'":"&s;","<":"&l;",">":"&g;"};return e.replace(/[&"'<>]/g,function(e){return t[e]})}function je(e){return e}var ze=function(){function e(){this.store={},this.onSerializeCallbacks={}}var t;return t=e,e.init=function(e){var n=new t;return n.store=e,n},e.prototype.get=function(e,t){return void 0!==this.store[e]?this.store[e]:t},e.prototype.set=function(e,t){this.store[e]=t},e.prototype.remove=function(e){delete this.store[e]},e.prototype.hasKey=function(e){return this.store.hasOwnProperty(e)},e.prototype.onSerialize=function(e,t){this.onSerializeCallbacks[e]=t},e.prototype.toJson=function(){for(var e in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(e))try{this.store[e]=this.onSerializeCallbacks[e]()}catch(t){console.warn("Exception in onSerialize callback: ",t)}return JSON.stringify(this.store)},e}();function Ye(e,t){var n,r=e.getElementById(t+"-state"),i={};if(r&&r.textContent)try{i=JSON.parse((n={"&a;":"&","&q;":'"',"&s;":"'","&l;":"<","&g;":">"},r.textContent.replace(/&[^;]+;/g,function(e){return n[e]})))}catch(o){console.warn("Exception while restoring TransferState for app "+t,o)}return ze.init(i)}var He=function(){return function(){}}(),We=function(){function e(){}return e.all=function(){return function(e){return!0}},e.css=function(e){return function(t){return null!=t.nativeElement&&s().elementMatches(t.nativeElement,e)}},e.directive=function(e){return function(t){return-1!==t.providerTokens.indexOf(e)}},e}(),Xe=new o.Version("8.1.1")},Zduo:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_a\u016dgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_a\u016dg_sep_okt_nov_dec".split("_"),weekdays:"diman\u0109o_lundo_mardo_merkredo_\u0135a\u016ddo_vendredo_sabato".split("_"),weekdaysShort:"dim_lun_mard_merk_\u0135a\u016d_ven_sab".split("_"),weekdaysMin:"di_lu_ma_me_\u0135a_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"D[-a de] MMMM, YYYY",LLL:"D[-a de] MMMM, YYYY HH:mm",LLLL:"dddd, [la] D[-a de] MMMM, YYYY HH:mm"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia\u016d je] LT",nextDay:"[Morga\u016d je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera\u016d je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"post %s",past:"anta\u016d %s",s:"sekundoj",ss:"%d sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},dayOfMonthOrdinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}()},aIdf:function(e,t,n){!function(e){"use strict";function t(e,t,n){return e+" "+function(e,t){return 2===t?function(e){var t={m:"v",b:"v",d:"z"};return void 0===t[e.charAt(0)]?e:t[e.charAt(0)]+e.substring(1)}(e):e}({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}n("wd/R").defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY h[e]mm A",LLLL:"dddd, D [a viz] MMMM YYYY h[e]mm A"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno\xf9",ss:"%d eilenn",m:"ur vunutenn",mm:t,h:"un eur",hh:"%d eur",d:"un devezh",dd:t,M:"ur miz",MM:t,y:"ur bloaz",yy:function(e){switch(function e(t){return t>9?e(t%10):t}(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}},dayOfMonthOrdinalParse:/\d{1,2}(a\xf1|vet)/,ordinal:function(e){return e+(1===e?"a\xf1":"vet")},week:{dow:1,doy:4}})}()},aIsn:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("mi",{months:"Kohi-t\u0101te_Hui-tanguru_Pout\u016b-te-rangi_Paenga-wh\u0101wh\u0101_Haratua_Pipiri_H\u014dngoingoi_Here-turi-k\u014dk\u0101_Mahuru_Whiringa-\u0101-nuku_Whiringa-\u0101-rangi_Hakihea".split("_"),monthsShort:"Kohi_Hui_Pou_Pae_Hara_Pipi_H\u014dngoi_Here_Mahu_Whi-nu_Whi-ra_Haki".split("_"),monthsRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,monthsShortStrictRegex:/(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,weekdays:"R\u0101tapu_Mane_T\u016brei_Wenerei_T\u0101ite_Paraire_H\u0101tarei".split("_"),weekdaysShort:"Ta_Ma_T\u016b_We_T\u0101i_Pa_H\u0101".split("_"),weekdaysMin:"Ta_Ma_T\u016b_We_T\u0101i_Pa_H\u0101".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [i] HH:mm",LLLL:"dddd, D MMMM YYYY [i] HH:mm"},calendar:{sameDay:"[i teie mahana, i] LT",nextDay:"[apopo i] LT",nextWeek:"dddd [i] LT",lastDay:"[inanahi i] LT",lastWeek:"dddd [whakamutunga i] LT",sameElse:"L"},relativeTime:{future:"i roto i %s",past:"%s i mua",s:"te h\u0113kona ruarua",ss:"%d h\u0113kona",m:"he meneti",mm:"%d meneti",h:"te haora",hh:"%d haora",d:"he ra",dd:"%d ra",M:"he marama",MM:"%d marama",y:"he tau",yy:"%d tau"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}()},aQkU:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("mk",{months:"\u0458\u0430\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0458_\u0458\u0443\u043d\u0438_\u0458\u0443\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),monthsShort:"\u0458\u0430\u043d_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0458_\u0458\u0443\u043d_\u0458\u0443\u043b_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),weekdays:"\u043d\u0435\u0434\u0435\u043b\u0430_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0440\u0442\u043e\u043a_\u043f\u0435\u0442\u043e\u043a_\u0441\u0430\u0431\u043e\u0442\u0430".split("_"),weekdaysShort:"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u0435_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u0430\u0431".split("_"),weekdaysMin:"\u043de_\u043fo_\u0432\u0442_\u0441\u0440_\u0447\u0435_\u043f\u0435_\u0441a".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[\u0414\u0435\u043d\u0435\u0441 \u0432\u043e] LT",nextDay:"[\u0423\u0442\u0440\u0435 \u0432\u043e] LT",nextWeek:"[\u0412\u043e] dddd [\u0432\u043e] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432\u043e] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[\u0418\u0437\u043c\u0438\u043d\u0430\u0442\u0430\u0442\u0430] dddd [\u0432\u043e] LT";case 1:case 2:case 4:case 5:return"[\u0418\u0437\u043c\u0438\u043d\u0430\u0442\u0438\u043e\u0442] dddd [\u0432\u043e] LT"}},sameElse:"L"},relativeTime:{future:"\u043f\u043e\u0441\u043b\u0435 %s",past:"\u043f\u0440\u0435\u0434 %s",s:"\u043d\u0435\u043a\u043e\u043b\u043a\u0443 \u0441\u0435\u043a\u0443\u043d\u0434\u0438",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434\u0438",m:"\u043c\u0438\u043d\u0443\u0442\u0430",mm:"%d \u043c\u0438\u043d\u0443\u0442\u0438",h:"\u0447\u0430\u0441",hh:"%d \u0447\u0430\u0441\u0430",d:"\u0434\u0435\u043d",dd:"%d \u0434\u0435\u043d\u0430",M:"\u043c\u0435\u0441\u0435\u0446",MM:"%d \u043c\u0435\u0441\u0435\u0446\u0438",y:"\u0433\u043e\u0434\u0438\u043d\u0430",yy:"%d \u0433\u043e\u0434\u0438\u043d\u0438"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-\u0435\u0432":0===n?e+"-\u0435\u043d":n>10&&n<20?e+"-\u0442\u0438":1===t?e+"-\u0432\u0438":2===t?e+"-\u0440\u0438":7===t||8===t?e+"-\u043c\u0438":e+"-\u0442\u0438"},week:{dow:1,doy:7}})}()},b1Dy:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("en-nz",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}()},bOMt:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),monthsParseExact:!0,weekdays:"s\xf8ndag_mandag_tirsdag_onsdag_torsdag_fredag_l\xf8rdag".split("_"),weekdaysShort:"s\xf8._ma._ti._on._to._fr._l\xf8.".split("_"),weekdaysMin:"s\xf8_ma_ti_on_to_fr_l\xf8".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] HH:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i g\xe5r kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"noen sekunder",ss:"%d sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en m\xe5ned",MM:"%d m\xe5neder",y:"ett \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},bXm7:function(e,t,n){!function(e){"use strict";var t={0:"-\u0448\u0456",1:"-\u0448\u0456",2:"-\u0448\u0456",3:"-\u0448\u0456",4:"-\u0448\u0456",5:"-\u0448\u0456",6:"-\u0448\u044b",7:"-\u0448\u0456",8:"-\u0448\u0456",9:"-\u0448\u044b",10:"-\u0448\u044b",20:"-\u0448\u044b",30:"-\u0448\u044b",40:"-\u0448\u044b",50:"-\u0448\u0456",60:"-\u0448\u044b",70:"-\u0448\u0456",80:"-\u0448\u0456",90:"-\u0448\u044b",100:"-\u0448\u0456"};e.defineLocale("kk",{months:"\u049b\u0430\u04a3\u0442\u0430\u0440_\u0430\u049b\u043f\u0430\u043d_\u043d\u0430\u0443\u0440\u044b\u0437_\u0441\u04d9\u0443\u0456\u0440_\u043c\u0430\u043c\u044b\u0440_\u043c\u0430\u0443\u0441\u044b\u043c_\u0448\u0456\u043b\u0434\u0435_\u0442\u0430\u043c\u044b\u0437_\u049b\u044b\u0440\u043a\u04af\u0439\u0435\u043a_\u049b\u0430\u0437\u0430\u043d_\u049b\u0430\u0440\u0430\u0448\u0430_\u0436\u0435\u043b\u0442\u043e\u049b\u0441\u0430\u043d".split("_"),monthsShort:"\u049b\u0430\u04a3_\u0430\u049b\u043f_\u043d\u0430\u0443_\u0441\u04d9\u0443_\u043c\u0430\u043c_\u043c\u0430\u0443_\u0448\u0456\u043b_\u0442\u0430\u043c_\u049b\u044b\u0440_\u049b\u0430\u0437_\u049b\u0430\u0440_\u0436\u0435\u043b".split("_"),weekdays:"\u0436\u0435\u043a\u0441\u0435\u043d\u0431\u0456_\u0434\u04af\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0441\u04d9\u0440\u0441\u0435\u043d\u0431\u0456_\u0431\u0435\u0439\u0441\u0435\u043d\u0431\u0456_\u0436\u04b1\u043c\u0430_\u0441\u0435\u043d\u0431\u0456".split("_"),weekdaysShort:"\u0436\u0435\u043a_\u0434\u04af\u0439_\u0441\u0435\u0439_\u0441\u04d9\u0440_\u0431\u0435\u0439_\u0436\u04b1\u043c_\u0441\u0435\u043d".split("_"),weekdaysMin:"\u0436\u043a_\u0434\u0439_\u0441\u0439_\u0441\u0440_\u0431\u0439_\u0436\u043c_\u0441\u043d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0411\u04af\u0433\u0456\u043d \u0441\u0430\u0493\u0430\u0442] LT",nextDay:"[\u0415\u0440\u0442\u0435\u04a3 \u0441\u0430\u0493\u0430\u0442] LT",nextWeek:"dddd [\u0441\u0430\u0493\u0430\u0442] LT",lastDay:"[\u041a\u0435\u0448\u0435 \u0441\u0430\u0493\u0430\u0442] LT",lastWeek:"[\u04e8\u0442\u043a\u0435\u043d \u0430\u043f\u0442\u0430\u043d\u044b\u04a3] dddd [\u0441\u0430\u0493\u0430\u0442] LT",sameElse:"L"},relativeTime:{future:"%s \u0456\u0448\u0456\u043d\u0434\u0435",past:"%s \u0431\u04b1\u0440\u044b\u043d",s:"\u0431\u0456\u0440\u043d\u0435\u0448\u0435 \u0441\u0435\u043a\u0443\u043d\u0434",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434",m:"\u0431\u0456\u0440 \u043c\u0438\u043d\u0443\u0442",mm:"%d \u043c\u0438\u043d\u0443\u0442",h:"\u0431\u0456\u0440 \u0441\u0430\u0493\u0430\u0442",hh:"%d \u0441\u0430\u0493\u0430\u0442",d:"\u0431\u0456\u0440 \u043a\u04af\u043d",dd:"%d \u043a\u04af\u043d",M:"\u0431\u0456\u0440 \u0430\u0439",MM:"%d \u0430\u0439",y:"\u0431\u0456\u0440 \u0436\u044b\u043b",yy:"%d \u0436\u044b\u043b"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0448\u0456|\u0448\u044b)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n("wd/R"))},bYM6:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ar-tn",{months:"\u062c\u0627\u0646\u0641\u064a_\u0641\u064a\u0641\u0631\u064a_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064a\u0644_\u0645\u0627\u064a_\u062c\u0648\u0627\u0646_\u062c\u0648\u064a\u0644\u064a\u0629_\u0623\u0648\u062a_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),monthsShort:"\u062c\u0627\u0646\u0641\u064a_\u0641\u064a\u0641\u0631\u064a_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064a\u0644_\u0645\u0627\u064a_\u062c\u0648\u0627\u0646_\u062c\u0648\u064a\u0644\u064a\u0629_\u0623\u0648\u062a_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},week:{dow:1,doy:4}})}()},bpih:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}()},bxKX:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("it-ch",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"domenica_luned\xec_marted\xec_mercoled\xec_gioved\xec_venerd\xec_sabato".split("_"),weekdaysShort:"dom_lun_mar_mer_gio_ven_sab".split("_"),weekdaysMin:"do_lu_ma_me_gi_ve_sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",ss:"%d secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}()},cRix:function(e,t,n){!function(e){"use strict";var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsParseExact:!0,weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[\xf4fr\xfbne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",ss:"%d sekonden",m:"ien min\xfat",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},dayOfMonthOrdinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(n("wd/R"))},czMo:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("en-il",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}()},dNwA:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("sw",{months:"Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des".split("_"),weekdays:"Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi".split("_"),weekdaysShort:"Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos".split("_"),weekdaysMin:"J2_J3_J4_J5_Al_Ij_J1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[leo saa] LT",nextDay:"[kesho saa] LT",nextWeek:"[wiki ijayo] dddd [saat] LT",lastDay:"[jana] LT",lastWeek:"[wiki iliyopita] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s baadaye",past:"tokea %s",s:"hivi punde",ss:"sekunde %d",m:"dakika moja",mm:"dakika %d",h:"saa limoja",hh:"masaa %d",d:"siku moja",dd:"masiku %d",M:"mwezi mmoja",MM:"miezi %d",y:"mwaka mmoja",yy:"miaka %d"},week:{dow:1,doy:7}})}()},"e+ae":function(e,t,n){!function(e){"use strict";var t="janu\xe1r_febru\xe1r_marec_apr\xedl_m\xe1j_j\xfan_j\xfal_august_september_okt\xf3ber_november_december".split("_"),n="jan_feb_mar_apr_m\xe1j_j\xfan_j\xfal_aug_sep_okt_nov_dec".split("_");function r(e){return e>1&&e<5}function i(e,t,n,i){var o=e+" ";switch(n){case"s":return t||i?"p\xe1r sek\xfand":"p\xe1r sekundami";case"ss":return t||i?o+(r(e)?"sekundy":"sek\xfand"):o+"sekundami";case"m":return t?"min\xfata":i?"min\xfatu":"min\xfatou";case"mm":return t||i?o+(r(e)?"min\xfaty":"min\xfat"):o+"min\xfatami";case"h":return t?"hodina":i?"hodinu":"hodinou";case"hh":return t||i?o+(r(e)?"hodiny":"hod\xedn"):o+"hodinami";case"d":return t||i?"de\u0148":"d\u0148om";case"dd":return t||i?o+(r(e)?"dni":"dn\xed"):o+"d\u0148ami";case"M":return t||i?"mesiac":"mesiacom";case"MM":return t||i?o+(r(e)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return t||i?"rok":"rokom";case"yy":return t||i?o+(r(e)?"roky":"rokov"):o+"rokmi"}}e.defineLocale("sk",{months:t,monthsShort:n,weekdays:"nede\u013ea_pondelok_utorok_streda_\u0161tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_\u0161t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_\u0161t_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd D. MMMM YYYY H:mm"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nede\u013eu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo \u0161tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[v\u010dera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul\xfa nede\u013eu o] LT";case 1:case 2:return"[minul\xfd] dddd [o] LT";case 3:return"[minul\xfa stredu o] LT";case 4:case 5:return"[minul\xfd] dddd [o] LT";case 6:return"[minul\xfa sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:i,ss:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n("wd/R"))},fzPg:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("yo",{months:"S\u1eb9\u0301r\u1eb9\u0301_E\u0300re\u0300le\u0300_\u1eb8r\u1eb9\u0300na\u0300_I\u0300gbe\u0301_E\u0300bibi_O\u0300ku\u0300du_Ag\u1eb9mo_O\u0300gu\u0301n_Owewe_\u1ecc\u0300wa\u0300ra\u0300_Be\u0301lu\u0301_\u1ecc\u0300p\u1eb9\u0300\u0300".split("_"),monthsShort:"S\u1eb9\u0301r_E\u0300rl_\u1eb8rn_I\u0300gb_E\u0300bi_O\u0300ku\u0300_Ag\u1eb9_O\u0300gu\u0301_Owe_\u1ecc\u0300wa\u0300_Be\u0301l_\u1ecc\u0300p\u1eb9\u0300\u0300".split("_"),weekdays:"A\u0300i\u0300ku\u0301_Aje\u0301_I\u0300s\u1eb9\u0301gun_\u1eccj\u1ecd\u0301ru\u0301_\u1eccj\u1ecd\u0301b\u1ecd_\u1eb8ti\u0300_A\u0300ba\u0301m\u1eb9\u0301ta".split("_"),weekdaysShort:"A\u0300i\u0300k_Aje\u0301_I\u0300s\u1eb9\u0301_\u1eccjr_\u1eccjb_\u1eb8ti\u0300_A\u0300ba\u0301".split("_"),weekdaysMin:"A\u0300i\u0300_Aj_I\u0300s_\u1eccr_\u1eccb_\u1eb8t_A\u0300b".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendar:{sameDay:"[O\u0300ni\u0300 ni] LT",nextDay:"[\u1ecc\u0300la ni] LT",nextWeek:"dddd [\u1eccs\u1eb9\u0300 to\u0301n'b\u1ecd] [ni] LT",lastDay:"[A\u0300na ni] LT",lastWeek:"dddd [\u1eccs\u1eb9\u0300 to\u0301l\u1ecd\u0301] [ni] LT",sameElse:"L"},relativeTime:{future:"ni\u0301 %s",past:"%s k\u1ecdja\u0301",s:"i\u0300s\u1eb9ju\u0301 aaya\u0301 die",ss:"aaya\u0301 %d",m:"i\u0300s\u1eb9ju\u0301 kan",mm:"i\u0300s\u1eb9ju\u0301 %d",h:"wa\u0301kati kan",hh:"wa\u0301kati %d",d:"\u1ecdj\u1ecd\u0301 kan",dd:"\u1ecdj\u1ecd\u0301 %d",M:"osu\u0300 kan",MM:"osu\u0300 %d",y:"\u1ecddu\u0301n kan",yy:"\u1ecddu\u0301n %d"},dayOfMonthOrdinalParse:/\u1ecdj\u1ecd\u0301\s\d{1,2}/,ordinal:"\u1ecdj\u1ecd\u0301 %d",week:{dow:1,doy:4}})}()},gVVK:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i=e+" ";switch(n){case"s":return t||r?"nekaj sekund":"nekaj sekundami";case"ss":return i+(1===e?t?"sekundo":"sekundi":2===e?t||r?"sekundi":"sekundah":e<5?t||r?"sekunde":"sekundah":"sekund");case"m":return t?"ena minuta":"eno minuto";case"mm":return i+(1===e?t?"minuta":"minuto":2===e?t||r?"minuti":"minutama":e<5?t||r?"minute":"minutami":t||r?"minut":"minutami");case"h":return t?"ena ura":"eno uro";case"hh":return i+(1===e?t?"ura":"uro":2===e?t||r?"uri":"urama":e<5?t||r?"ure":"urami":t||r?"ur":"urami");case"d":return t||r?"en dan":"enim dnem";case"dd":return i+(1===e?t||r?"dan":"dnem":2===e?t||r?"dni":"dnevoma":t||r?"dni":"dnevi");case"M":return t||r?"en mesec":"enim mesecem";case"MM":return i+(1===e?t||r?"mesec":"mesecem":2===e?t||r?"meseca":"mesecema":e<5?t||r?"mesece":"meseci":t||r?"mesecev":"meseci");case"y":return t||r?"eno leto":"enim letom";case"yy":return i+(1===e?t||r?"leto":"letom":2===e?t||r?"leti":"letoma":e<5?t||r?"leta":"leti":t||r?"let":"leti")}}n("wd/R").defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljek_torek_sreda_\u010detrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._\u010det._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_\u010de_pe_so".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[v\u010deraj ob] LT",lastWeek:function(){switch(this.day()){case 0:return"[prej\u0161njo] [nedeljo] [ob] LT";case 3:return"[prej\u0161njo] [sredo] [ob] LT";case 6:return"[prej\u0161njo] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[prej\u0161nji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"\u010dez %s",past:"pred %s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}()},gekB:function(e,t,n){!function(e){"use strict";var t="nolla yksi kaksi kolme nelj\xe4 viisi kuusi seitsem\xe4n kahdeksan yhdeks\xe4n".split(" "),n=["nolla","yhden","kahden","kolmen","nelj\xe4n","viiden","kuuden",t[7],t[8],t[9]];function r(e,r,i,o){var a="";switch(i){case"s":return o?"muutaman sekunnin":"muutama sekunti";case"ss":return o?"sekunnin":"sekuntia";case"m":return o?"minuutin":"minuutti";case"mm":a=o?"minuutin":"minuuttia";break;case"h":return o?"tunnin":"tunti";case"hh":a=o?"tunnin":"tuntia";break;case"d":return o?"p\xe4iv\xe4n":"p\xe4iv\xe4";case"dd":a=o?"p\xe4iv\xe4n":"p\xe4iv\xe4\xe4";break;case"M":return o?"kuukauden":"kuukausi";case"MM":a=o?"kuukauden":"kuukautta";break;case"y":return o?"vuoden":"vuosi";case"yy":a=o?"vuoden":"vuotta"}return function(e,r){return e<10?r?n[e]:t[e]:e}(e,o)+" "+a}e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kes\xe4kuu_hein\xe4kuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes\xe4_hein\xe4_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] HH.mm",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] HH.mm",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] HH.mm",llll:"ddd, Do MMM YYYY, [klo] HH.mm"},calendar:{sameDay:"[t\xe4n\xe4\xe4n] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s p\xe4\xe4st\xe4",past:"%s sitten",s:r,ss:r,m:r,mm:r,h:r,hh:r,d:r,dd:r,M:r,MM:r,y:r,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n("wd/R"))},gjCT:function(e,t,n){!function(e){"use strict";var t={1:"\u0661",2:"\u0662",3:"\u0663",4:"\u0664",5:"\u0665",6:"\u0666",7:"\u0667",8:"\u0668",9:"\u0669",0:"\u0660"},n={"\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u0660":"0"};e.defineLocale("ar-sa",{months:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a\u0648_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648_\u0623\u063a\u0633\u0637\u0633_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),monthsShort:"\u064a\u0646\u0627\u064a\u0631_\u0641\u0628\u0631\u0627\u064a\u0631_\u0645\u0627\u0631\u0633_\u0623\u0628\u0631\u064a\u0644_\u0645\u0627\u064a\u0648_\u064a\u0648\u0646\u064a\u0648_\u064a\u0648\u0644\u064a\u0648_\u0623\u063a\u0633\u0637\u0633_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return"\u0645"===e},meridiem:function(e,t,n){return e<12?"\u0635":"\u0645"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},preparse:function(e){return e.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(e){return n[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"\u060c")},week:{dow:0,doy:6}})}(n("wd/R"))},hKrs:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("bg",{months:"\u044f\u043d\u0443\u0430\u0440\u0438_\u0444\u0435\u0432\u0440\u0443\u0430\u0440\u0438_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0438\u043b_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438_\u043e\u043a\u0442\u043e\u043c\u0432\u0440\u0438_\u043d\u043e\u0435\u043c\u0432\u0440\u0438_\u0434\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split("_"),monthsShort:"\u044f\u043d\u0440_\u0444\u0435\u0432_\u043c\u0430\u0440_\u0430\u043f\u0440_\u043c\u0430\u0439_\u044e\u043d\u0438_\u044e\u043b\u0438_\u0430\u0432\u0433_\u0441\u0435\u043f_\u043e\u043a\u0442_\u043d\u043e\u0435_\u0434\u0435\u043a".split("_"),weekdays:"\u043d\u0435\u0434\u0435\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u044f\u0434\u0430_\u0447\u0435\u0442\u0432\u044a\u0440\u0442\u044a\u043a_\u043f\u0435\u0442\u044a\u043a_\u0441\u044a\u0431\u043e\u0442\u0430".split("_"),weekdaysShort:"\u043d\u0435\u0434_\u043f\u043e\u043d_\u0432\u0442\u043e_\u0441\u0440\u044f_\u0447\u0435\u0442_\u043f\u0435\u0442_\u0441\u044a\u0431".split("_"),weekdaysMin:"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[\u0414\u043d\u0435\u0441 \u0432] LT",nextDay:"[\u0423\u0442\u0440\u0435 \u0432] LT",nextWeek:"dddd [\u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430 \u0432] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[\u0412 \u0438\u0437\u043c\u0438\u043d\u0430\u043b\u0430\u0442\u0430] dddd [\u0432] LT";case 1:case 2:case 4:case 5:return"[\u0412 \u0438\u0437\u043c\u0438\u043d\u0430\u043b\u0438\u044f] dddd [\u0432] LT"}},sameElse:"L"},relativeTime:{future:"\u0441\u043b\u0435\u0434 %s",past:"\u043f\u0440\u0435\u0434\u0438 %s",s:"\u043d\u044f\u043a\u043e\u043b\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434\u0438",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434\u0438",m:"\u043c\u0438\u043d\u0443\u0442\u0430",mm:"%d \u043c\u0438\u043d\u0443\u0442\u0438",h:"\u0447\u0430\u0441",hh:"%d \u0447\u0430\u0441\u0430",d:"\u0434\u0435\u043d",dd:"%d \u0434\u043d\u0438",M:"\u043c\u0435\u0441\u0435\u0446",MM:"%d \u043c\u0435\u0441\u0435\u0446\u0430",y:"\u0433\u043e\u0434\u0438\u043d\u0430",yy:"%d \u0433\u043e\u0434\u0438\u043d\u0438"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0435\u0432|\u0435\u043d|\u0442\u0438|\u0432\u0438|\u0440\u0438|\u043c\u0438)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-\u0435\u0432":0===n?e+"-\u0435\u043d":n>10&&n<20?e+"-\u0442\u0438":1===t?e+"-\u0432\u0438":2===t?e+"-\u0440\u0438":7===t||8===t?e+"-\u043c\u0438":e+"-\u0442\u0438"},week:{dow:1,doy:7}})}()},honF:function(e,t,n){!function(e){"use strict";var t={1:"\u1041",2:"\u1042",3:"\u1043",4:"\u1044",5:"\u1045",6:"\u1046",7:"\u1047",8:"\u1048",9:"\u1049",0:"\u1040"},n={"\u1041":"1","\u1042":"2","\u1043":"3","\u1044":"4","\u1045":"5","\u1046":"6","\u1047":"7","\u1048":"8","\u1049":"9","\u1040":"0"};e.defineLocale("my",{months:"\u1007\u1014\u103a\u1014\u101d\u102b\u101b\u102e_\u1016\u1031\u1016\u1031\u102c\u103a\u101d\u102b\u101b\u102e_\u1019\u1010\u103a_\u1027\u1015\u103c\u102e_\u1019\u1031_\u1007\u103d\u1014\u103a_\u1007\u1030\u101c\u102d\u102f\u1004\u103a_\u101e\u103c\u1002\u102f\u1010\u103a_\u1005\u1000\u103a\u1010\u1004\u103a\u1018\u102c_\u1021\u1031\u102c\u1000\u103a\u1010\u102d\u102f\u1018\u102c_\u1014\u102d\u102f\u101d\u1004\u103a\u1018\u102c_\u1012\u102e\u1007\u1004\u103a\u1018\u102c".split("_"),monthsShort:"\u1007\u1014\u103a_\u1016\u1031_\u1019\u1010\u103a_\u1015\u103c\u102e_\u1019\u1031_\u1007\u103d\u1014\u103a_\u101c\u102d\u102f\u1004\u103a_\u101e\u103c_\u1005\u1000\u103a_\u1021\u1031\u102c\u1000\u103a_\u1014\u102d\u102f_\u1012\u102e".split("_"),weekdays:"\u1010\u1014\u1004\u103a\u1039\u1002\u1014\u103d\u1031_\u1010\u1014\u1004\u103a\u1039\u101c\u102c_\u1021\u1004\u103a\u1039\u1002\u102b_\u1017\u102f\u1012\u1039\u1013\u101f\u1030\u1038_\u1000\u103c\u102c\u101e\u1015\u1010\u1031\u1038_\u101e\u1031\u102c\u1000\u103c\u102c_\u1005\u1014\u1031".split("_"),weekdaysShort:"\u1014\u103d\u1031_\u101c\u102c_\u1002\u102b_\u101f\u1030\u1038_\u1000\u103c\u102c_\u101e\u1031\u102c_\u1014\u1031".split("_"),weekdaysMin:"\u1014\u103d\u1031_\u101c\u102c_\u1002\u102b_\u101f\u1030\u1038_\u1000\u103c\u102c_\u101e\u1031\u102c_\u1014\u1031".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u101a\u1014\u1031.] LT [\u1019\u103e\u102c]",nextDay:"[\u1019\u1014\u1000\u103a\u1016\u103c\u1014\u103a] LT [\u1019\u103e\u102c]",nextWeek:"dddd LT [\u1019\u103e\u102c]",lastDay:"[\u1019\u1014\u1031.\u1000] LT [\u1019\u103e\u102c]",lastWeek:"[\u1015\u103c\u102e\u1038\u1001\u1032\u1037\u101e\u1031\u102c] dddd LT [\u1019\u103e\u102c]",sameElse:"L"},relativeTime:{future:"\u101c\u102c\u1019\u100a\u103a\u1037 %s \u1019\u103e\u102c",past:"\u101c\u103d\u1014\u103a\u1001\u1032\u1037\u101e\u1031\u102c %s \u1000",s:"\u1005\u1000\u1039\u1000\u1014\u103a.\u1021\u1014\u100a\u103a\u1038\u1004\u101a\u103a",ss:"%d \u1005\u1000\u1039\u1000\u1014\u1037\u103a",m:"\u1010\u1005\u103a\u1019\u102d\u1014\u1005\u103a",mm:"%d \u1019\u102d\u1014\u1005\u103a",h:"\u1010\u1005\u103a\u1014\u102c\u101b\u102e",hh:"%d \u1014\u102c\u101b\u102e",d:"\u1010\u1005\u103a\u101b\u1000\u103a",dd:"%d \u101b\u1000\u103a",M:"\u1010\u1005\u103a\u101c",MM:"%d \u101c",y:"\u1010\u1005\u103a\u1014\u103e\u1005\u103a",yy:"%d \u1014\u103e\u1005\u103a"},preparse:function(e){return e.replace(/[\u1041\u1042\u1043\u1044\u1045\u1046\u1047\u1048\u1049\u1040]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},week:{dow:1,doy:4}})}(n("wd/R"))},iEDd:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("gl",{months:"xaneiro_febreiro_marzo_abril_maio_xu\xf1o_xullo_agosto_setembro_outubro_novembro_decembro".split("_"),monthsShort:"xan._feb._mar._abr._mai._xu\xf1._xul._ago._set._out._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"domingo_luns_martes_m\xe9rcores_xoves_venres_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._m\xe9r._xov._ven._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_m\xe9_xo_ve_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"\xe1s":"\xe1")+"] LT"},nextDay:function(){return"[ma\xf1\xe1 "+(1!==this.hours()?"\xe1s":"\xe1")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"\xe1s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"\xe1":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"\xe1s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return 0===e.indexOf("un")?"n"+e:"en "+e},past:"hai %s",s:"uns segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}()},iLxQ:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},iYuL:function(e,t,n){!function(e){"use strict";var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_"),r=[/^ene/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i],i=/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return e?/-MMM-/.test(r)?n[e.month()]:t[e.month()]:t},monthsRegex:i,monthsShortRegex:i,monthsStrictRegex:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,monthsShortStrictRegex:/^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,monthsParse:r,longMonthsParse:r,shortMonthsParse:r,weekdays:"domingo_lunes_martes_mi\xe9rcoles_jueves_viernes_s\xe1bado".split("_"),weekdaysShort:"dom._lun._mar._mi\xe9._jue._vie._s\xe1b.".split("_"),weekdaysMin:"do_lu_ma_mi_ju_vi_s\xe1".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY H:mm",LLLL:"dddd, D [de] MMMM [de] YYYY H:mm"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma\xf1ana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",ss:"%d segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un d\xeda",dd:"%d d\xedas",M:"un mes",MM:"%d meses",y:"un a\xf1o",yy:"%d a\xf1os"},dayOfMonthOrdinalParse:/\d{1,2}\xba/,ordinal:"%d\xba",week:{dow:1,doy:4}})}(n("wd/R"))},jUeY:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("el",{monthsNominativeEl:"\u0399\u03b1\u03bd\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2_\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2_\u039c\u03ac\u03c1\u03c4\u03b9\u03bf\u03c2_\u0391\u03c0\u03c1\u03af\u03bb\u03b9\u03bf\u03c2_\u039c\u03ac\u03b9\u03bf\u03c2_\u0399\u03bf\u03cd\u03bd\u03b9\u03bf\u03c2_\u0399\u03bf\u03cd\u03bb\u03b9\u03bf\u03c2_\u0391\u03cd\u03b3\u03bf\u03c5\u03c3\u03c4\u03bf\u03c2_\u03a3\u03b5\u03c0\u03c4\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2_\u039f\u03ba\u03c4\u03ce\u03b2\u03c1\u03b9\u03bf\u03c2_\u039d\u03bf\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2_\u0394\u03b5\u03ba\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2".split("_"),monthsGenitiveEl:"\u0399\u03b1\u03bd\u03bf\u03c5\u03b1\u03c1\u03af\u03bf\u03c5_\u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03b1\u03c1\u03af\u03bf\u03c5_\u039c\u03b1\u03c1\u03c4\u03af\u03bf\u03c5_\u0391\u03c0\u03c1\u03b9\u03bb\u03af\u03bf\u03c5_\u039c\u03b1\u0390\u03bf\u03c5_\u0399\u03bf\u03c5\u03bd\u03af\u03bf\u03c5_\u0399\u03bf\u03c5\u03bb\u03af\u03bf\u03c5_\u0391\u03c5\u03b3\u03bf\u03cd\u03c3\u03c4\u03bf\u03c5_\u03a3\u03b5\u03c0\u03c4\u03b5\u03bc\u03b2\u03c1\u03af\u03bf\u03c5_\u039f\u03ba\u03c4\u03c9\u03b2\u03c1\u03af\u03bf\u03c5_\u039d\u03bf\u03b5\u03bc\u03b2\u03c1\u03af\u03bf\u03c5_\u0394\u03b5\u03ba\u03b5\u03bc\u03b2\u03c1\u03af\u03bf\u03c5".split("_"),months:function(e,t){return e?"string"==typeof t&&/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]:this._monthsNominativeEl},monthsShort:"\u0399\u03b1\u03bd_\u03a6\u03b5\u03b2_\u039c\u03b1\u03c1_\u0391\u03c0\u03c1_\u039c\u03b1\u03ca_\u0399\u03bf\u03c5\u03bd_\u0399\u03bf\u03c5\u03bb_\u0391\u03c5\u03b3_\u03a3\u03b5\u03c0_\u039f\u03ba\u03c4_\u039d\u03bf\u03b5_\u0394\u03b5\u03ba".split("_"),weekdays:"\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae_\u0394\u03b5\u03c5\u03c4\u03ad\u03c1\u03b1_\u03a4\u03c1\u03af\u03c4\u03b7_\u03a4\u03b5\u03c4\u03ac\u03c1\u03c4\u03b7_\u03a0\u03ad\u03bc\u03c0\u03c4\u03b7_\u03a0\u03b1\u03c1\u03b1\u03c3\u03ba\u03b5\u03c5\u03ae_\u03a3\u03ac\u03b2\u03b2\u03b1\u03c4\u03bf".split("_"),weekdaysShort:"\u039a\u03c5\u03c1_\u0394\u03b5\u03c5_\u03a4\u03c1\u03b9_\u03a4\u03b5\u03c4_\u03a0\u03b5\u03bc_\u03a0\u03b1\u03c1_\u03a3\u03b1\u03b2".split("_"),weekdaysMin:"\u039a\u03c5_\u0394\u03b5_\u03a4\u03c1_\u03a4\u03b5_\u03a0\u03b5_\u03a0\u03b1_\u03a3\u03b1".split("_"),meridiem:function(e,t,n){return e>11?n?"\u03bc\u03bc":"\u039c\u039c":n?"\u03c0\u03bc":"\u03a0\u039c"},isPM:function(e){return"\u03bc"===(e+"").toLowerCase()[0]},meridiemParse:/[\u03a0\u039c]\.?\u039c?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY h:mm A",LLLL:"dddd, D MMMM YYYY h:mm A"},calendarEl:{sameDay:"[\u03a3\u03ae\u03bc\u03b5\u03c1\u03b1 {}] LT",nextDay:"[\u0391\u03cd\u03c1\u03b9\u03bf {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[\u03a7\u03b8\u03b5\u03c2 {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[\u03c4\u03bf \u03c0\u03c1\u03bf\u03b7\u03b3\u03bf\u03cd\u03bc\u03b5\u03bd\u03bf] dddd [{}] LT";default:return"[\u03c4\u03b7\u03bd \u03c0\u03c1\u03bf\u03b7\u03b3\u03bf\u03cd\u03bc\u03b5\u03bd\u03b7] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var n,r=this._calendarEl[e],i=t&&t.hours();return((n=r)instanceof Function||"[object Function]"===Object.prototype.toString.call(n))&&(r=r.apply(t)),r.replace("{}",i%12==1?"\u03c3\u03c4\u03b7":"\u03c3\u03c4\u03b9\u03c2")},relativeTime:{future:"\u03c3\u03b5 %s",past:"%s \u03c0\u03c1\u03b9\u03bd",s:"\u03bb\u03af\u03b3\u03b1 \u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03cc\u03bb\u03b5\u03c0\u03c4\u03b1",ss:"%d \u03b4\u03b5\u03c5\u03c4\u03b5\u03c1\u03cc\u03bb\u03b5\u03c0\u03c4\u03b1",m:"\u03ad\u03bd\u03b1 \u03bb\u03b5\u03c0\u03c4\u03cc",mm:"%d \u03bb\u03b5\u03c0\u03c4\u03ac",h:"\u03bc\u03af\u03b1 \u03ce\u03c1\u03b1",hh:"%d \u03ce\u03c1\u03b5\u03c2",d:"\u03bc\u03af\u03b1 \u03bc\u03ad\u03c1\u03b1",dd:"%d \u03bc\u03ad\u03c1\u03b5\u03c2",M:"\u03ad\u03bd\u03b1\u03c2 \u03bc\u03ae\u03bd\u03b1\u03c2",MM:"%d \u03bc\u03ae\u03bd\u03b5\u03c2",y:"\u03ad\u03bd\u03b1\u03c2 \u03c7\u03c1\u03cc\u03bd\u03bf\u03c2",yy:"%d \u03c7\u03c1\u03cc\u03bd\u03b9\u03b1"},dayOfMonthOrdinalParse:/\d{1,2}\u03b7/,ordinal:"%d\u03b7",week:{dow:1,doy:4}})}()},jVdC:function(e,t,n){!function(e){"use strict";var t="stycze\u0144_luty_marzec_kwiecie\u0144_maj_czerwiec_lipiec_sierpie\u0144_wrzesie\u0144_pa\u017adziernik_listopad_grudzie\u0144".split("_"),n="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrze\u015bnia_pa\u017adziernika_listopada_grudnia".split("_");function r(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function i(e,t,n){var i=e+" ";switch(n){case"ss":return i+(r(e)?"sekundy":"sekund");case"m":return t?"minuta":"minut\u0119";case"mm":return i+(r(e)?"minuty":"minut");case"h":return t?"godzina":"godzin\u0119";case"hh":return i+(r(e)?"godziny":"godzin");case"MM":return i+(r(e)?"miesi\u0105ce":"miesi\u0119cy");case"yy":return i+(r(e)?"lata":"lat")}}e.defineLocale("pl",{months:function(e,r){return e?""===r?"("+n[e.month()]+"|"+t[e.month()]+")":/D MMMM/.test(r)?n[e.month()]:t[e.month()]:t},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa\u017a_lis_gru".split("_"),weekdays:"niedziela_poniedzia\u0142ek_wtorek_\u015broda_czwartek_pi\u0105tek_sobota".split("_"),weekdaysShort:"ndz_pon_wt_\u015br_czw_pt_sob".split("_"),weekdaysMin:"Nd_Pn_Wt_\u015ar_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Dzi\u015b o] LT",nextDay:"[Jutro o] LT",nextWeek:function(){switch(this.day()){case 0:return"[W niedziel\u0119 o] LT";case 2:return"[We wtorek o] LT";case 3:return"[W \u015brod\u0119 o] LT";case 6:return"[W sobot\u0119 o] LT";default:return"[W] dddd [o] LT"}},lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz\u0142\u0105 niedziel\u0119 o] LT";case 3:return"[W zesz\u0142\u0105 \u015brod\u0119 o] LT";case 6:return"[W zesz\u0142\u0105 sobot\u0119 o] LT";default:return"[W zesz\u0142y] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",ss:i,m:i,mm:i,h:i,hh:i,d:"1 dzie\u0144",dd:"%d dni",M:"miesi\u0105c",MM:i,y:"rok",yy:i},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n("wd/R"))},jfSC:function(e,t,n){!function(e){"use strict";var t={1:"\u06f1",2:"\u06f2",3:"\u06f3",4:"\u06f4",5:"\u06f5",6:"\u06f6",7:"\u06f7",8:"\u06f8",9:"\u06f9",0:"\u06f0"},n={"\u06f1":"1","\u06f2":"2","\u06f3":"3","\u06f4":"4","\u06f5":"5","\u06f6":"6","\u06f7":"7","\u06f8":"8","\u06f9":"9","\u06f0":"0"};e.defineLocale("fa",{months:"\u0698\u0627\u0646\u0648\u06cc\u0647_\u0641\u0648\u0631\u06cc\u0647_\u0645\u0627\u0631\u0633_\u0622\u0648\u0631\u06cc\u0644_\u0645\u0647_\u0698\u0648\u0626\u0646_\u0698\u0648\u0626\u06cc\u0647_\u0627\u0648\u062a_\u0633\u067e\u062a\u0627\u0645\u0628\u0631_\u0627\u06a9\u062a\u0628\u0631_\u0646\u0648\u0627\u0645\u0628\u0631_\u062f\u0633\u0627\u0645\u0628\u0631".split("_"),monthsShort:"\u0698\u0627\u0646\u0648\u06cc\u0647_\u0641\u0648\u0631\u06cc\u0647_\u0645\u0627\u0631\u0633_\u0622\u0648\u0631\u06cc\u0644_\u0645\u0647_\u0698\u0648\u0626\u0646_\u0698\u0648\u0626\u06cc\u0647_\u0627\u0648\u062a_\u0633\u067e\u062a\u0627\u0645\u0628\u0631_\u0627\u06a9\u062a\u0628\u0631_\u0646\u0648\u0627\u0645\u0628\u0631_\u062f\u0633\u0627\u0645\u0628\u0631".split("_"),weekdays:"\u06cc\u06a9\u200c\u0634\u0646\u0628\u0647_\u062f\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200c\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647_\u062c\u0645\u0639\u0647_\u0634\u0646\u0628\u0647".split("_"),weekdaysShort:"\u06cc\u06a9\u200c\u0634\u0646\u0628\u0647_\u062f\u0648\u0634\u0646\u0628\u0647_\u0633\u0647\u200c\u0634\u0646\u0628\u0647_\u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647_\u067e\u0646\u062c\u200c\u0634\u0646\u0628\u0647_\u062c\u0645\u0639\u0647_\u0634\u0646\u0628\u0647".split("_"),weekdaysMin:"\u06cc_\u062f_\u0633_\u0686_\u067e_\u062c_\u0634".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},meridiemParse:/\u0642\u0628\u0644 \u0627\u0632 \u0638\u0647\u0631|\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/,isPM:function(e){return/\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631/.test(e)},meridiem:function(e,t,n){return e<12?"\u0642\u0628\u0644 \u0627\u0632 \u0638\u0647\u0631":"\u0628\u0639\u062f \u0627\u0632 \u0638\u0647\u0631"},calendar:{sameDay:"[\u0627\u0645\u0631\u0648\u0632 \u0633\u0627\u0639\u062a] LT",nextDay:"[\u0641\u0631\u062f\u0627 \u0633\u0627\u0639\u062a] LT",nextWeek:"dddd [\u0633\u0627\u0639\u062a] LT",lastDay:"[\u062f\u06cc\u0631\u0648\u0632 \u0633\u0627\u0639\u062a] LT",lastWeek:"dddd [\u067e\u06cc\u0634] [\u0633\u0627\u0639\u062a] LT",sameElse:"L"},relativeTime:{future:"\u062f\u0631 %s",past:"%s \u067e\u06cc\u0634",s:"\u0686\u0646\u062f \u062b\u0627\u0646\u06cc\u0647",ss:"\u062b\u0627\u0646\u06cc\u0647 d%",m:"\u06cc\u06a9 \u062f\u0642\u06cc\u0642\u0647",mm:"%d \u062f\u0642\u06cc\u0642\u0647",h:"\u06cc\u06a9 \u0633\u0627\u0639\u062a",hh:"%d \u0633\u0627\u0639\u062a",d:"\u06cc\u06a9 \u0631\u0648\u0632",dd:"%d \u0631\u0648\u0632",M:"\u06cc\u06a9 \u0645\u0627\u0647",MM:"%d \u0645\u0627\u0647",y:"\u06cc\u06a9 \u0633\u0627\u0644",yy:"%d \u0633\u0627\u0644"},preparse:function(e){return e.replace(/[\u06f0-\u06f9]/g,function(e){return n[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"\u060c")},dayOfMonthOrdinalParse:/\d{1,2}\u0645/,ordinal:"%d\u0645",week:{dow:6,doy:12}})}(n("wd/R"))},jnO4:function(e,t,n){!function(e){"use strict";var t={1:"\u0661",2:"\u0662",3:"\u0663",4:"\u0664",5:"\u0665",6:"\u0666",7:"\u0667",8:"\u0668",9:"\u0669",0:"\u0660"},n={"\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u0660":"0"},r=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["\u0623\u0642\u0644 \u0645\u0646 \u062b\u0627\u0646\u064a\u0629","\u062b\u0627\u0646\u064a\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062b\u0627\u0646\u064a\u062a\u0627\u0646","\u062b\u0627\u0646\u064a\u062a\u064a\u0646"],"%d \u062b\u0648\u0627\u0646","%d \u062b\u0627\u0646\u064a\u0629","%d \u062b\u0627\u0646\u064a\u0629"],m:["\u0623\u0642\u0644 \u0645\u0646 \u062f\u0642\u064a\u0642\u0629","\u062f\u0642\u064a\u0642\u0629 \u0648\u0627\u062d\u062f\u0629",["\u062f\u0642\u064a\u0642\u062a\u0627\u0646","\u062f\u0642\u064a\u0642\u062a\u064a\u0646"],"%d \u062f\u0642\u0627\u0626\u0642","%d \u062f\u0642\u064a\u0642\u0629","%d \u062f\u0642\u064a\u0642\u0629"],h:["\u0623\u0642\u0644 \u0645\u0646 \u0633\u0627\u0639\u0629","\u0633\u0627\u0639\u0629 \u0648\u0627\u062d\u062f\u0629",["\u0633\u0627\u0639\u062a\u0627\u0646","\u0633\u0627\u0639\u062a\u064a\u0646"],"%d \u0633\u0627\u0639\u0627\u062a","%d \u0633\u0627\u0639\u0629","%d \u0633\u0627\u0639\u0629"],d:["\u0623\u0642\u0644 \u0645\u0646 \u064a\u0648\u0645","\u064a\u0648\u0645 \u0648\u0627\u062d\u062f",["\u064a\u0648\u0645\u0627\u0646","\u064a\u0648\u0645\u064a\u0646"],"%d \u0623\u064a\u0627\u0645","%d \u064a\u0648\u0645\u064b\u0627","%d \u064a\u0648\u0645"],M:["\u0623\u0642\u0644 \u0645\u0646 \u0634\u0647\u0631","\u0634\u0647\u0631 \u0648\u0627\u062d\u062f",["\u0634\u0647\u0631\u0627\u0646","\u0634\u0647\u0631\u064a\u0646"],"%d \u0623\u0634\u0647\u0631","%d \u0634\u0647\u0631\u0627","%d \u0634\u0647\u0631"],y:["\u0623\u0642\u0644 \u0645\u0646 \u0639\u0627\u0645","\u0639\u0627\u0645 \u0648\u0627\u062d\u062f",["\u0639\u0627\u0645\u0627\u0646","\u0639\u0627\u0645\u064a\u0646"],"%d \u0623\u0639\u0648\u0627\u0645","%d \u0639\u0627\u0645\u064b\u0627","%d \u0639\u0627\u0645"]},o=function(e){return function(t,n,o,a){var s=r(t),u=i[e][r(t)];return 2===s&&(u=u[n?0:1]),u.replace(/%d/i,t)}},a=["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"];e.defineLocale("ar",{months:a,monthsShort:a,weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0623\u062d\u062f_\u0625\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0623\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u062d_\u0646_\u062b_\u0631_\u062e_\u062c_\u0633".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"D/\u200fM/\u200fYYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0635|\u0645/,isPM:function(e){return"\u0645"===e},meridiem:function(e,t,n){return e<12?"\u0635":"\u0645"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u064b\u0627 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0646\u062f \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0628\u0639\u062f %s",past:"\u0645\u0646\u0630 %s",s:o("s"),ss:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(e){return e.replace(/[\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669\u0660]/g,function(e){return n[e]}).replace(/\u060c/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"\u060c")},week:{dow:6,doy:12}})}(n("wd/R"))},kEOa:function(e,t,n){!function(e){"use strict";var t={1:"\u09e7",2:"\u09e8",3:"\u09e9",4:"\u09ea",5:"\u09eb",6:"\u09ec",7:"\u09ed",8:"\u09ee",9:"\u09ef",0:"\u09e6"},n={"\u09e7":"1","\u09e8":"2","\u09e9":"3","\u09ea":"4","\u09eb":"5","\u09ec":"6","\u09ed":"7","\u09ee":"8","\u09ef":"9","\u09e6":"0"};e.defineLocale("bn",{months:"\u099c\u09be\u09a8\u09c1\u09df\u09be\u09b0\u09c0_\u09ab\u09c7\u09ac\u09cd\u09b0\u09c1\u09df\u09be\u09b0\u09bf_\u09ae\u09be\u09b0\u09cd\u099a_\u098f\u09aa\u09cd\u09b0\u09bf\u09b2_\u09ae\u09c7_\u099c\u09c1\u09a8_\u099c\u09c1\u09b2\u09be\u0987_\u0986\u0997\u09b8\u09cd\u099f_\u09b8\u09c7\u09aa\u09cd\u099f\u09c7\u09ae\u09cd\u09ac\u09b0_\u0985\u0995\u09cd\u099f\u09cb\u09ac\u09b0_\u09a8\u09ad\u09c7\u09ae\u09cd\u09ac\u09b0_\u09a1\u09bf\u09b8\u09c7\u09ae\u09cd\u09ac\u09b0".split("_"),monthsShort:"\u099c\u09be\u09a8\u09c1_\u09ab\u09c7\u09ac_\u09ae\u09be\u09b0\u09cd\u099a_\u098f\u09aa\u09cd\u09b0_\u09ae\u09c7_\u099c\u09c1\u09a8_\u099c\u09c1\u09b2_\u0986\u0997_\u09b8\u09c7\u09aa\u09cd\u099f_\u0985\u0995\u09cd\u099f\u09cb_\u09a8\u09ad\u09c7_\u09a1\u09bf\u09b8\u09c7".split("_"),weekdays:"\u09b0\u09ac\u09bf\u09ac\u09be\u09b0_\u09b8\u09cb\u09ae\u09ac\u09be\u09b0_\u09ae\u0999\u09cd\u0997\u09b2\u09ac\u09be\u09b0_\u09ac\u09c1\u09a7\u09ac\u09be\u09b0_\u09ac\u09c3\u09b9\u09b8\u09cd\u09aa\u09a4\u09bf\u09ac\u09be\u09b0_\u09b6\u09c1\u0995\u09cd\u09b0\u09ac\u09be\u09b0_\u09b6\u09a8\u09bf\u09ac\u09be\u09b0".split("_"),weekdaysShort:"\u09b0\u09ac\u09bf_\u09b8\u09cb\u09ae_\u09ae\u0999\u09cd\u0997\u09b2_\u09ac\u09c1\u09a7_\u09ac\u09c3\u09b9\u09b8\u09cd\u09aa\u09a4\u09bf_\u09b6\u09c1\u0995\u09cd\u09b0_\u09b6\u09a8\u09bf".split("_"),weekdaysMin:"\u09b0\u09ac\u09bf_\u09b8\u09cb\u09ae_\u09ae\u0999\u09cd\u0997_\u09ac\u09c1\u09a7_\u09ac\u09c3\u09b9\u0983_\u09b6\u09c1\u0995\u09cd\u09b0_\u09b6\u09a8\u09bf".split("_"),longDateFormat:{LT:"A h:mm \u09b8\u09ae\u09df",LTS:"A h:mm:ss \u09b8\u09ae\u09df",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, A h:mm \u09b8\u09ae\u09df",LLLL:"dddd, D MMMM YYYY, A h:mm \u09b8\u09ae\u09df"},calendar:{sameDay:"[\u0986\u099c] LT",nextDay:"[\u0986\u0997\u09be\u09ae\u09c0\u0995\u09be\u09b2] LT",nextWeek:"dddd, LT",lastDay:"[\u0997\u09a4\u0995\u09be\u09b2] LT",lastWeek:"[\u0997\u09a4] dddd, LT",sameElse:"L"},relativeTime:{future:"%s \u09aa\u09b0\u09c7",past:"%s \u0986\u0997\u09c7",s:"\u0995\u09df\u09c7\u0995 \u09b8\u09c7\u0995\u09c7\u09a8\u09cd\u09a1",ss:"%d \u09b8\u09c7\u0995\u09c7\u09a8\u09cd\u09a1",m:"\u098f\u0995 \u09ae\u09bf\u09a8\u09bf\u099f",mm:"%d \u09ae\u09bf\u09a8\u09bf\u099f",h:"\u098f\u0995 \u0998\u09a8\u09cd\u099f\u09be",hh:"%d \u0998\u09a8\u09cd\u099f\u09be",d:"\u098f\u0995 \u09a6\u09bf\u09a8",dd:"%d \u09a6\u09bf\u09a8",M:"\u098f\u0995 \u09ae\u09be\u09b8",MM:"%d \u09ae\u09be\u09b8",y:"\u098f\u0995 \u09ac\u099b\u09b0",yy:"%d \u09ac\u099b\u09b0"},preparse:function(e){return e.replace(/[\u09e7\u09e8\u09e9\u09ea\u09eb\u09ec\u09ed\u09ee\u09ef\u09e6]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/\u09b0\u09be\u09a4|\u09b8\u0995\u09be\u09b2|\u09a6\u09c1\u09aa\u09c1\u09b0|\u09ac\u09bf\u0995\u09be\u09b2|\u09b0\u09be\u09a4/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u09b0\u09be\u09a4"===t&&e>=4||"\u09a6\u09c1\u09aa\u09c1\u09b0"===t&&e<5||"\u09ac\u09bf\u0995\u09be\u09b2"===t?e+12:e},meridiem:function(e,t,n){return e<4?"\u09b0\u09be\u09a4":e<10?"\u09b8\u0995\u09be\u09b2":e<17?"\u09a6\u09c1\u09aa\u09c1\u09b0":e<20?"\u09ac\u09bf\u0995\u09be\u09b2":"\u09b0\u09be\u09a4"},week:{dow:0,doy:6}})}(n("wd/R"))},kOpN:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("zh-tw",{months:"\u4e00\u6708_\u4e8c\u6708_\u4e09\u6708_\u56db\u6708_\u4e94\u6708_\u516d\u6708_\u4e03\u6708_\u516b\u6708_\u4e5d\u6708_\u5341\u6708_\u5341\u4e00\u6708_\u5341\u4e8c\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u661f\u671f\u65e5_\u661f\u671f\u4e00_\u661f\u671f\u4e8c_\u661f\u671f\u4e09_\u661f\u671f\u56db_\u661f\u671f\u4e94_\u661f\u671f\u516d".split("_"),weekdaysShort:"\u9031\u65e5_\u9031\u4e00_\u9031\u4e8c_\u9031\u4e09_\u9031\u56db_\u9031\u4e94_\u9031\u516d".split("_"),weekdaysMin:"\u65e5_\u4e00_\u4e8c_\u4e09_\u56db_\u4e94_\u516d".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5 HH:mm",LLLL:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm",l:"YYYY/M/D",ll:"YYYY\u5e74M\u6708D\u65e5",lll:"YYYY\u5e74M\u6708D\u65e5 HH:mm",llll:"YYYY\u5e74M\u6708D\u65e5dddd HH:mm"},meridiemParse:/\u51cc\u6668|\u65e9\u4e0a|\u4e0a\u5348|\u4e2d\u5348|\u4e0b\u5348|\u665a\u4e0a/,meridiemHour:function(e,t){return 12===e&&(e=0),"\u51cc\u6668"===t||"\u65e9\u4e0a"===t||"\u4e0a\u5348"===t?e:"\u4e2d\u5348"===t?e>=11?e:e+12:"\u4e0b\u5348"===t||"\u665a\u4e0a"===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<600?"\u51cc\u6668":r<900?"\u65e9\u4e0a":r<1130?"\u4e0a\u5348":r<1230?"\u4e2d\u5348":r<1800?"\u4e0b\u5348":"\u665a\u4e0a"},calendar:{sameDay:"[\u4eca\u5929] LT",nextDay:"[\u660e\u5929] LT",nextWeek:"[\u4e0b]dddd LT",lastDay:"[\u6628\u5929] LT",lastWeek:"[\u4e0a]dddd LT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(\u65e5|\u6708|\u9031)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"\u65e5";case"M":return e+"\u6708";case"w":case"W":return e+"\u9031";default:return e}},relativeTime:{future:"%s\u5167",past:"%s\u524d",s:"\u5e7e\u79d2",ss:"%d \u79d2",m:"1 \u5206\u9418",mm:"%d \u5206\u9418",h:"1 \u5c0f\u6642",hh:"%d \u5c0f\u6642",d:"1 \u5929",dd:"%d \u5929",M:"1 \u500b\u6708",MM:"%d \u500b\u6708",y:"1 \u5e74",yy:"%d \u5e74"}})}()},l5ep:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn \xf4l",s:"ychydig eiliadau",ss:"%d eiliad",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},dayOfMonthOrdinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t="";return e>20?t=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(t=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"][e]),e+t},week:{dow:1,doy:4}})}()},lXzo:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r,i;return"m"===n?t?"\u043c\u0438\u043d\u0443\u0442\u0430":"\u043c\u0438\u043d\u0443\u0442\u0443":e+" "+(r=+e,i={ss:t?"\u0441\u0435\u043a\u0443\u043d\u0434\u0430_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434":"\u0441\u0435\u043a\u0443\u043d\u0434\u0443_\u0441\u0435\u043a\u0443\u043d\u0434\u044b_\u0441\u0435\u043a\u0443\u043d\u0434",mm:t?"\u043c\u0438\u043d\u0443\u0442\u0430_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442":"\u043c\u0438\u043d\u0443\u0442\u0443_\u043c\u0438\u043d\u0443\u0442\u044b_\u043c\u0438\u043d\u0443\u0442",hh:"\u0447\u0430\u0441_\u0447\u0430\u0441\u0430_\u0447\u0430\u0441\u043e\u0432",dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u044f_\u0434\u043d\u0435\u0439",MM:"\u043c\u0435\u0441\u044f\u0446_\u043c\u0435\u0441\u044f\u0446\u0430_\u043c\u0435\u0441\u044f\u0446\u0435\u0432",yy:"\u0433\u043e\u0434_\u0433\u043e\u0434\u0430_\u043b\u0435\u0442"}[n].split("_"),r%10==1&&r%100!=11?i[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?i[1]:i[2])}var r=[/^\u044f\u043d\u0432/i,/^\u0444\u0435\u0432/i,/^\u043c\u0430\u0440/i,/^\u0430\u043f\u0440/i,/^\u043c\u0430[\u0439\u044f]/i,/^\u0438\u044e\u043d/i,/^\u0438\u044e\u043b/i,/^\u0430\u0432\u0433/i,/^\u0441\u0435\u043d/i,/^\u043e\u043a\u0442/i,/^\u043d\u043e\u044f/i,/^\u0434\u0435\u043a/i];n("wd/R").defineLocale("ru",{months:{format:"\u044f\u043d\u0432\u0430\u0440\u044f_\u0444\u0435\u0432\u0440\u0430\u043b\u044f_\u043c\u0430\u0440\u0442\u0430_\u0430\u043f\u0440\u0435\u043b\u044f_\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433\u0443\u0441\u0442\u0430_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f_\u043e\u043a\u0442\u044f\u0431\u0440\u044f_\u043d\u043e\u044f\u0431\u0440\u044f_\u0434\u0435\u043a\u0430\u0431\u0440\u044f".split("_"),standalone:"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_")},monthsShort:{format:"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440._\u0430\u043f\u0440._\u043c\u0430\u044f_\u0438\u044e\u043d\u044f_\u0438\u044e\u043b\u044f_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_"),standalone:"\u044f\u043d\u0432._\u0444\u0435\u0432\u0440._\u043c\u0430\u0440\u0442_\u0430\u043f\u0440._\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433._\u0441\u0435\u043d\u0442._\u043e\u043a\u0442._\u043d\u043e\u044f\u0431._\u0434\u0435\u043a.".split("_")},weekdays:{standalone:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0430_\u0441\u0443\u0431\u0431\u043e\u0442\u0430".split("_"),format:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435_\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a_\u0432\u0442\u043e\u0440\u043d\u0438\u043a_\u0441\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440\u0433_\u043f\u044f\u0442\u043d\u0438\u0446\u0443_\u0441\u0443\u0431\u0431\u043e\u0442\u0443".split("_"),isFormat:/\[ ?[\u0412\u0432] ?(?:\u043f\u0440\u043e\u0448\u043b\u0443\u044e|\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e|\u044d\u0442\u0443)? ?\] ?dddd/},weekdaysShort:"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u0432\u0441_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),monthsParse:r,longMonthsParse:r,shortMonthsParse:r,monthsRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsShortRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044c\u044f]|\u044f\u043d\u0432\.?|\u0444\u0435\u0432\u0440\u0430\u043b[\u044c\u044f]|\u0444\u0435\u0432\u0440?\.?|\u043c\u0430\u0440\u0442\u0430?|\u043c\u0430\u0440\.?|\u0430\u043f\u0440\u0435\u043b[\u044c\u044f]|\u0430\u043f\u0440\.?|\u043c\u0430[\u0439\u044f]|\u0438\u044e\u043d[\u044c\u044f]|\u0438\u044e\u043d\.?|\u0438\u044e\u043b[\u044c\u044f]|\u0438\u044e\u043b\.?|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0430\u0432\u0433\.?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044c\u044f]|\u0441\u0435\u043d\u0442?\.?|\u043e\u043a\u0442\u044f\u0431\u0440[\u044c\u044f]|\u043e\u043a\u0442\.?|\u043d\u043e\u044f\u0431\u0440[\u044c\u044f]|\u043d\u043e\u044f\u0431?\.?|\u0434\u0435\u043a\u0430\u0431\u0440[\u044c\u044f]|\u0434\u0435\u043a\.?)/i,monthsStrictRegex:/^(\u044f\u043d\u0432\u0430\u0440[\u044f\u044c]|\u0444\u0435\u0432\u0440\u0430\u043b[\u044f\u044c]|\u043c\u0430\u0440\u0442\u0430?|\u0430\u043f\u0440\u0435\u043b[\u044f\u044c]|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044f\u044c]|\u0438\u044e\u043b[\u044f\u044c]|\u0430\u0432\u0433\u0443\u0441\u0442\u0430?|\u0441\u0435\u043d\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043e\u043a\u0442\u044f\u0431\u0440[\u044f\u044c]|\u043d\u043e\u044f\u0431\u0440[\u044f\u044c]|\u0434\u0435\u043a\u0430\u0431\u0440[\u044f\u044c])/i,monthsShortStrictRegex:/^(\u044f\u043d\u0432\.|\u0444\u0435\u0432\u0440?\.|\u043c\u0430\u0440[\u0442.]|\u0430\u043f\u0440\.|\u043c\u0430[\u044f\u0439]|\u0438\u044e\u043d[\u044c\u044f.]|\u0438\u044e\u043b[\u044c\u044f.]|\u0430\u0432\u0433\.|\u0441\u0435\u043d\u0442?\.|\u043e\u043a\u0442\.|\u043d\u043e\u044f\u0431?\.|\u0434\u0435\u043a\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0433.",LLL:"D MMMM YYYY \u0433., H:mm",LLLL:"dddd, D MMMM YYYY \u0433., H:mm"},calendar:{sameDay:"[\u0421\u0435\u0433\u043e\u0434\u043d\u044f, \u0432] LT",nextDay:"[\u0417\u0430\u0432\u0442\u0440\u0430, \u0432] LT",lastDay:"[\u0412\u0447\u0435\u0440\u0430, \u0432] LT",nextWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[\u0412\u043e] dddd, [\u0432] LT":"[\u0412] dddd, [\u0432] LT";switch(this.day()){case 0:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435] dddd, [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0439] dddd, [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0443\u044e] dddd, [\u0432] LT"}},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[\u0412\u043e] dddd, [\u0432] LT":"[\u0412] dddd, [\u0432] LT";switch(this.day()){case 0:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u043e\u0435] dddd, [\u0432] LT";case 1:case 2:case 4:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u044b\u0439] dddd, [\u0432] LT";case 3:case 5:case 6:return"[\u0412 \u043f\u0440\u043e\u0448\u043b\u0443\u044e] dddd, [\u0432] LT"}},sameElse:"L"},relativeTime:{future:"\u0447\u0435\u0440\u0435\u0437 %s",past:"%s \u043d\u0430\u0437\u0430\u0434",s:"\u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u0441\u0435\u043a\u0443\u043d\u0434",ss:t,m:t,mm:t,h:"\u0447\u0430\u0441",hh:t,d:"\u0434\u0435\u043d\u044c",dd:t,M:"\u043c\u0435\u0441\u044f\u0446",MM:t,y:"\u0433\u043e\u0434",yy:t},meridiemParse:/\u043d\u043e\u0447\u0438|\u0443\u0442\u0440\u0430|\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430/i,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u0435\u0440\u0430)$/.test(e)},meridiem:function(e,t,n){return e<4?"\u043d\u043e\u0447\u0438":e<12?"\u0443\u0442\u0440\u0430":e<17?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u0435\u0440\u0430"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0439|\u0433\u043e|\u044f)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-\u0439";case"D":return e+"-\u0433\u043e";case"w":case"W":return e+"-\u044f";default:return e}},week:{dow:1,doy:4}})}()},lYtQ:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){switch(n){case"s":return t?"\u0445\u044d\u0434\u0445\u044d\u043d \u0441\u0435\u043a\u0443\u043d\u0434":"\u0445\u044d\u0434\u0445\u044d\u043d \u0441\u0435\u043a\u0443\u043d\u0434\u044b\u043d";case"ss":return e+(t?" \u0441\u0435\u043a\u0443\u043d\u0434":" \u0441\u0435\u043a\u0443\u043d\u0434\u044b\u043d");case"m":case"mm":return e+(t?" \u043c\u0438\u043d\u0443\u0442":" \u043c\u0438\u043d\u0443\u0442\u044b\u043d");case"h":case"hh":return e+(t?" \u0446\u0430\u0433":" \u0446\u0430\u0433\u0438\u0439\u043d");case"d":case"dd":return e+(t?" \u04e9\u0434\u04e9\u0440":" \u04e9\u0434\u0440\u0438\u0439\u043d");case"M":case"MM":return e+(t?" \u0441\u0430\u0440":" \u0441\u0430\u0440\u044b\u043d");case"y":case"yy":return e+(t?" \u0436\u0438\u043b":" \u0436\u0438\u043b\u0438\u0439\u043d");default:return e}}n("wd/R").defineLocale("mn",{months:"\u041d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0425\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0413\u0443\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u04e9\u0440\u04e9\u0432\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0422\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0417\u0443\u0440\u0433\u0430\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0414\u043e\u043b\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u041d\u0430\u0439\u043c\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0415\u0441\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0430\u0432\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u043d\u044d\u0433\u0434\u04af\u0433\u044d\u044d\u0440 \u0441\u0430\u0440_\u0410\u0440\u0432\u0430\u043d \u0445\u043e\u0451\u0440\u0434\u0443\u0433\u0430\u0430\u0440 \u0441\u0430\u0440".split("_"),monthsShort:"1 \u0441\u0430\u0440_2 \u0441\u0430\u0440_3 \u0441\u0430\u0440_4 \u0441\u0430\u0440_5 \u0441\u0430\u0440_6 \u0441\u0430\u0440_7 \u0441\u0430\u0440_8 \u0441\u0430\u0440_9 \u0441\u0430\u0440_10 \u0441\u0430\u0440_11 \u0441\u0430\u0440_12 \u0441\u0430\u0440".split("_"),monthsParseExact:!0,weekdays:"\u041d\u044f\u043c_\u0414\u0430\u0432\u0430\u0430_\u041c\u044f\u0433\u043c\u0430\u0440_\u041b\u0445\u0430\u0433\u0432\u0430_\u041f\u04af\u0440\u044d\u0432_\u0411\u0430\u0430\u0441\u0430\u043d_\u0411\u044f\u043c\u0431\u0430".split("_"),weekdaysShort:"\u041d\u044f\u043c_\u0414\u0430\u0432_\u041c\u044f\u0433_\u041b\u0445\u0430_\u041f\u04af\u0440_\u0411\u0430\u0430_\u0411\u044f\u043c".split("_"),weekdaysMin:"\u041d\u044f_\u0414\u0430_\u041c\u044f_\u041b\u0445_\u041f\u04af_\u0411\u0430_\u0411\u044f".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY-MM-DD",LL:"YYYY \u043e\u043d\u044b MMMM\u044b\u043d D",LLL:"YYYY \u043e\u043d\u044b MMMM\u044b\u043d D HH:mm",LLLL:"dddd, YYYY \u043e\u043d\u044b MMMM\u044b\u043d D HH:mm"},meridiemParse:/\u04ae\u04e8|\u04ae\u0425/i,isPM:function(e){return"\u04ae\u0425"===e},meridiem:function(e,t,n){return e<12?"\u04ae\u04e8":"\u04ae\u0425"},calendar:{sameDay:"[\u04e8\u043d\u04e9\u04e9\u0434\u04e9\u0440] LT",nextDay:"[\u041c\u0430\u0440\u0433\u0430\u0430\u0448] LT",nextWeek:"[\u0418\u0440\u044d\u0445] dddd LT",lastDay:"[\u04e8\u0447\u0438\u0433\u0434\u04e9\u0440] LT",lastWeek:"[\u04e8\u043d\u0433\u04e9\u0440\u0441\u04e9\u043d] dddd LT",sameElse:"L"},relativeTime:{future:"%s \u0434\u0430\u0440\u0430\u0430",past:"%s \u04e9\u043c\u043d\u04e9",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2} \u04e9\u0434\u04e9\u0440/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+" \u04e9\u0434\u04e9\u0440";default:return e}}})}()},lgnt:function(e,t,n){!function(e){"use strict";var t={0:"-\u0447\u04af",1:"-\u0447\u0438",2:"-\u0447\u0438",3:"-\u0447\u04af",4:"-\u0447\u04af",5:"-\u0447\u0438",6:"-\u0447\u044b",7:"-\u0447\u0438",8:"-\u0447\u0438",9:"-\u0447\u0443",10:"-\u0447\u0443",20:"-\u0447\u044b",30:"-\u0447\u0443",40:"-\u0447\u044b",50:"-\u0447\u04af",60:"-\u0447\u044b",70:"-\u0447\u0438",80:"-\u0447\u0438",90:"-\u0447\u0443",100:"-\u0447\u04af"};e.defineLocale("ky",{months:"\u044f\u043d\u0432\u0430\u0440\u044c_\u0444\u0435\u0432\u0440\u0430\u043b\u044c_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440\u0435\u043b\u044c_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433\u0443\u0441\u0442_\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c_\u043e\u043a\u0442\u044f\u0431\u0440\u044c_\u043d\u043e\u044f\u0431\u0440\u044c_\u0434\u0435\u043a\u0430\u0431\u0440\u044c".split("_"),monthsShort:"\u044f\u043d\u0432_\u0444\u0435\u0432_\u043c\u0430\u0440\u0442_\u0430\u043f\u0440_\u043c\u0430\u0439_\u0438\u044e\u043d\u044c_\u0438\u044e\u043b\u044c_\u0430\u0432\u0433_\u0441\u0435\u043d_\u043e\u043a\u0442_\u043d\u043e\u044f_\u0434\u0435\u043a".split("_"),weekdays:"\u0416\u0435\u043a\u0448\u0435\u043c\u0431\u0438_\u0414\u04af\u0439\u0448\u04e9\u043c\u0431\u04af_\u0428\u0435\u0439\u0448\u0435\u043c\u0431\u0438_\u0428\u0430\u0440\u0448\u0435\u043c\u0431\u0438_\u0411\u0435\u0439\u0448\u0435\u043c\u0431\u0438_\u0416\u0443\u043c\u0430_\u0418\u0448\u0435\u043c\u0431\u0438".split("_"),weekdaysShort:"\u0416\u0435\u043a_\u0414\u04af\u0439_\u0428\u0435\u0439_\u0428\u0430\u0440_\u0411\u0435\u0439_\u0416\u0443\u043c_\u0418\u0448\u0435".split("_"),weekdaysMin:"\u0416\u043a_\u0414\u0439_\u0428\u0439_\u0428\u0440_\u0411\u0439_\u0416\u043c_\u0418\u0448".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0411\u04af\u0433\u04af\u043d \u0441\u0430\u0430\u0442] LT",nextDay:"[\u042d\u0440\u0442\u0435\u04a3 \u0441\u0430\u0430\u0442] LT",nextWeek:"dddd [\u0441\u0430\u0430\u0442] LT",lastDay:"[\u041a\u0435\u0447\u044d\u044d \u0441\u0430\u0430\u0442] LT",lastWeek:"[\u04e8\u0442\u043a\u04e9\u043d \u0430\u043f\u0442\u0430\u043d\u044b\u043d] dddd [\u043a\u04af\u043d\u04af] [\u0441\u0430\u0430\u0442] LT",sameElse:"L"},relativeTime:{future:"%s \u0438\u0447\u0438\u043d\u0434\u0435",past:"%s \u043c\u0443\u0440\u0443\u043d",s:"\u0431\u0438\u0440\u043d\u0435\u0447\u0435 \u0441\u0435\u043a\u0443\u043d\u0434",ss:"%d \u0441\u0435\u043a\u0443\u043d\u0434",m:"\u0431\u0438\u0440 \u043c\u04af\u043d\u04e9\u0442",mm:"%d \u043c\u04af\u043d\u04e9\u0442",h:"\u0431\u0438\u0440 \u0441\u0430\u0430\u0442",hh:"%d \u0441\u0430\u0430\u0442",d:"\u0431\u0438\u0440 \u043a\u04af\u043d",dd:"%d \u043a\u04af\u043d",M:"\u0431\u0438\u0440 \u0430\u0439",MM:"%d \u0430\u0439",y:"\u0431\u0438\u0440 \u0436\u044b\u043b",yy:"%d \u0436\u044b\u043b"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0447\u0438|\u0447\u044b|\u0447\u04af|\u0447\u0443)/,ordinal:function(e){return e+(t[e]||t[e%10]||t[e>=100?100:null])},week:{dow:1,doy:7}})}(n("wd/R"))},lyxo:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r=" ";return(e%100>=20||e>=100&&e%100==0)&&(r=" de "),e+r+{ss:"secunde",mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"}[n]}n("wd/R").defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"duminic\u0103_luni_mar\u021bi_miercuri_joi_vineri_s\xe2mb\u0103t\u0103".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_S\xe2m".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S\xe2".split("_"),longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[m\xe2ine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s \xeen urm\u0103",s:"c\xe2teva secunde",ss:t,m:"un minut",mm:t,h:"o or\u0103",hh:t,d:"o zi",dd:t,M:"o lun\u0103",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}()},mrSG:function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return i}),n.d(t,"__assign",function(){return o}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return u}),n.d(t,"__metadata",function(){return l}),n.d(t,"__awaiter",function(){return c}),n.d(t,"__generator",function(){return h}),n.d(t,"__exportStar",function(){return d}),n.d(t,"__values",function(){return f}),n.d(t,"__read",function(){return p}),n.d(t,"__spread",function(){return _}),n.d(t,"__spreadArrays",function(){return m}),n.d(t,"__await",function(){return g}),n.d(t,"__asyncGenerator",function(){return v}),n.d(t,"__asyncDelegator",function(){return y}),n.d(t,"__asyncValues",function(){return b}),n.d(t,"__makeTemplateObject",function(){return T}),n.d(t,"__importStar",function(){return E}),n.d(t,"__importDefault",function(){return x});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(a,s)}u((r=r.apply(e,t||[])).next())})}function h(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function p(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e}function m(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||s(e,t)})})}function s(e,t){try{!function(e){e.value instanceof g?Promise.resolve(e.value.v).then(u,l):c(o[0][2],e)}(i[e](t))}catch(n){c(o[0][3],n)}}function u(e){s("next",e)}function l(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function y(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:g(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function b(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){!function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}(r,i,(t=e[n](t)).done,t.value)})}}}function T(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}},nkY7:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,"a",function(){return r})},nyYc:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("fr",{months:"janvier_f\xe9vrier_mars_avril_mai_juin_juillet_ao\xfbt_septembre_octobre_novembre_d\xe9cembre".split("_"),monthsShort:"janv._f\xe9vr._mars_avr._mai_juin_juil._ao\xfbt_sept._oct._nov._d\xe9c.".split("_"),monthsParseExact:!0,weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"di_lu_ma_me_je_ve_sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[Aujourd\u2019hui \xe0] LT",nextDay:"[Demain \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[Hier \xe0] LT",lastWeek:"dddd [dernier \xe0] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",ss:"%d secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},dayOfMonthOrdinalParse:/\d{1,2}(er|)/,ordinal:function(e,t){switch(t){case"D":return e+(1===e?"er":"");default:case"M":case"Q":case"DDD":case"d":return e+(1===e?"er":"e");case"w":case"W":return e+(1===e?"re":"e")}},week:{dow:1,doy:4}})}()},o1bE:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("ar-dz",{months:"\u062c\u0627\u0646\u0641\u064a_\u0641\u064a\u0641\u0631\u064a_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064a\u0644_\u0645\u0627\u064a_\u062c\u0648\u0627\u0646_\u062c\u0648\u064a\u0644\u064a\u0629_\u0623\u0648\u062a_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),monthsShort:"\u062c\u0627\u0646\u0641\u064a_\u0641\u064a\u0641\u0631\u064a_\u0645\u0627\u0631\u0633_\u0623\u0641\u0631\u064a\u0644_\u0645\u0627\u064a_\u062c\u0648\u0627\u0646_\u062c\u0648\u064a\u0644\u064a\u0629_\u0623\u0648\u062a_\u0633\u0628\u062a\u0645\u0628\u0631_\u0623\u0643\u062a\u0648\u0628\u0631_\u0646\u0648\u0641\u0645\u0628\u0631_\u062f\u064a\u0633\u0645\u0628\u0631".split("_"),weekdays:"\u0627\u0644\u0623\u062d\u062f_\u0627\u0644\u0625\u062b\u0646\u064a\u0646_\u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621_\u0627\u0644\u062e\u0645\u064a\u0633_\u0627\u0644\u062c\u0645\u0639\u0629_\u0627\u0644\u0633\u0628\u062a".split("_"),weekdaysShort:"\u0627\u062d\u062f_\u0627\u062b\u0646\u064a\u0646_\u062b\u0644\u0627\u062b\u0627\u0621_\u0627\u0631\u0628\u0639\u0627\u0621_\u062e\u0645\u064a\u0633_\u062c\u0645\u0639\u0629_\u0633\u0628\u062a".split("_"),weekdaysMin:"\u0623\u062d_\u0625\u062b_\u062b\u0644\u0627_\u0623\u0631_\u062e\u0645_\u062c\u0645_\u0633\u0628".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u0627\u0644\u064a\u0648\u0645 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextDay:"[\u063a\u062f\u0627 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",nextWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastDay:"[\u0623\u0645\u0633 \u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",lastWeek:"dddd [\u0639\u0644\u0649 \u0627\u0644\u0633\u0627\u0639\u0629] LT",sameElse:"L"},relativeTime:{future:"\u0641\u064a %s",past:"\u0645\u0646\u0630 %s",s:"\u062b\u0648\u0627\u0646",ss:"%d \u062b\u0627\u0646\u064a\u0629",m:"\u062f\u0642\u064a\u0642\u0629",mm:"%d \u062f\u0642\u0627\u0626\u0642",h:"\u0633\u0627\u0639\u0629",hh:"%d \u0633\u0627\u0639\u0627\u062a",d:"\u064a\u0648\u0645",dd:"%d \u0623\u064a\u0627\u0645",M:"\u0634\u0647\u0631",MM:"%d \u0623\u0634\u0647\u0631",y:"\u0633\u0646\u0629",yy:"%d \u0633\u0646\u0648\u0627\u062a"},week:{dow:0,doy:4}})}()},"oo/x":function(e,t,n){var r=n("mrSG").__decorate,i=n("CcnG"),o=n("Ip0R"),a=n("qnhp"),s=function(){return function(){}}();s=r([i.NgModule({declarations:[a.SafePipe],exports:[a.SafePipe],imports:[o.CommonModule]})],s),t.SafePipeModule=s},"p/rL":function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("bm",{months:"Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_M\u025bkalo_Zuw\u025bnkalo_Zuluyekalo_Utikalo_S\u025btanburukalo_\u0254kut\u0254burukalo_Nowanburukalo_Desanburukalo".split("_"),monthsShort:"Zan_Few_Mar_Awi_M\u025b_Zuw_Zul_Uti_S\u025bt_\u0254ku_Now_Des".split("_"),weekdays:"Kari_Nt\u025bn\u025bn_Tarata_Araba_Alamisa_Juma_Sibiri".split("_"),weekdaysShort:"Kar_Nt\u025b_Tar_Ara_Ala_Jum_Sib".split("_"),weekdaysMin:"Ka_Nt_Ta_Ar_Al_Ju_Si".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"MMMM [tile] D [san] YYYY",LLL:"MMMM [tile] D [san] YYYY [l\u025br\u025b] HH:mm",LLLL:"dddd MMMM [tile] D [san] YYYY [l\u025br\u025b] HH:mm"},calendar:{sameDay:"[Bi l\u025br\u025b] LT",nextDay:"[Sini l\u025br\u025b] LT",nextWeek:"dddd [don l\u025br\u025b] LT",lastDay:"[Kunu l\u025br\u025b] LT",lastWeek:"dddd [t\u025bm\u025bnen l\u025br\u025b] LT",sameElse:"L"},relativeTime:{future:"%s k\u0254n\u0254",past:"a b\u025b %s b\u0254",s:"sanga dama dama",ss:"sekondi %d",m:"miniti kelen",mm:"miniti %d",h:"l\u025br\u025b kelen",hh:"l\u025br\u025b %d",d:"tile kelen",dd:"tile %d",M:"kalo kelen",MM:"kalo %d",y:"san kelen",yy:"san %d"},week:{dow:1,doy:4}})}()},psW0:function(e,t,n){"use strict";var r=n("mrSG"),i=n("zotm"),o=n("MGBS"),a=n("rPjj"),s=n("67Y/"),u=n("6blF"),l=(n("/WYv"),n("2ePl"),n("xTla"),n("En8+"),n("IUTb"),n("pugT"),n("S5XQ"),n("u67D"),n("JcRv"),n("Fxb1"));function c(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(c(function(n,r){return(i=e(n,r),i instanceof u.a?i:new u.a(Object(l.a)(i))).pipe(Object(s.a)(function(e,i){return t(n,e,r,i)}));var i},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new h(e,n))})}n.d(t,"a",function(){return c});var h=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.project,this.concurrent))},e}(),d=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return r.__extends(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t,e,n)},t.prototype._innerSub=function(e,t,n){var r=new a.a(this,void 0,void 0);this.destination.add(r),Object(i.a)(this,e,t,n,r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.a)},pugT:function(e,t,n){"use strict";var r=Array.isArray||function(e){return e&&"number"==typeof e.length},i=n("McSo"),o=n("2Bdj");function a(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}a.prototype=Object.create(Error.prototype);var s=a;n.d(t,"a",function(){return u});var u=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this._parent,a=this._parents,u=this._unsubscribe,c=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var h=-1,d=a?a.length:0;n;)n.remove(this),n=++h<d&&a[h]||null;if(Object(o.a)(u))try{u.call(this)}catch(p){t=!0,e=p instanceof s?l(p.errors):[p]}if(r(c))for(h=-1,d=c.length;++h<d;){var f=c[h];if(Object(i.a)(f))try{f.unsubscribe()}catch(p){t=!0,e=e||[],p instanceof s?e=e.concat(l(p.errors)):e.push(p)}}if(t)throw new s(e)}},e.prototype.add=function(t){var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:if(!t)return e.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(n._addParent(this)){var i=this._subscriptions;i?i.push(n):this._subscriptions=[n]}return n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this._parent,n=this._parents;return t!==e&&(t?n?-1===n.indexOf(e)&&(n.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))},e.EMPTY=((t=new e).closed=!0,t),e}();function l(e){return e.reduce(function(e,t){return e.concat(t instanceof s?t.errors:t)},[])}},qb46:function(e,t,n){e.exports=function(e){"use strict";var t=(e=e&&e.hasOwnProperty("default")?e.default:e).helpers,n=function(){if("undefined"!=typeof window){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),r={toTextLines:function(e){var n,r=[];for(e=[].concat(e);e.length;)"string"==typeof(n=e.pop())?r.unshift.apply(r,n.split("\n")):Array.isArray(n)?e.push.apply(e,n):t.isNullOrUndef(e)||r.unshift(""+n);return r},toFontString:function(e){return!e||t.isNullOrUndef(e.size)||t.isNullOrUndef(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family},textSize:function(e,t,n){var r,i=[].concat(t),o=i.length,a=e.font,s=0;for(e.font=n.string,r=0;r<o;++r)s=Math.max(e.measureText(i[r]).width,s);return e.font=a,{height:o*n.lineHeight,width:s}},parseFont:function(n){var i=e.defaults.global,o=t.valueOrDefault(n.size,i.defaultFontSize),a={family:t.valueOrDefault(n.family,i.defaultFontFamily),lineHeight:t.options.toLineHeight(n.lineHeight,o),size:o,style:t.valueOrDefault(n.style,i.defaultFontStyle),weight:t.valueOrDefault(n.weight,null),string:""};return a.string=r.toFontString(a),a},bound:function(e,t,n){return Math.max(e,Math.min(t,n))},arrayDiff:function(e,t){var n,r,i,o,a=e.slice(),s=[];for(n=0,i=t.length;n<i;++n)-1===(r=a.indexOf(o=t[n]))?s.push([o,1]):a.splice(r,1);for(n=0,i=a.length;n<i;++n)s.push([a[n],-1]);return s},rasterize:function(e){return Math.round(e*n)/n}};function i(e,t){var n=t.x,r=t.y;if(null===n)return{x:0,y:-1};if(null===r)return{x:1,y:0};var i=e.x-n,o=e.y-r,a=Math.sqrt(i*i+o*o);return{x:a?i/a:0,y:a?o/a:-1}}var o=0,a=1,s=2,u=4,l=8;function c(e,t,n){var r=o;return e<n.left?r|=a:e>n.right&&(r|=s),t<n.top?r|=l:t>n.bottom&&(r|=u),r}function h(e,t){var n,r,i=t.anchor,o=e;return t.clamp&&(o=function(e,t){for(var n,r,i,o=e.x0,h=e.y0,d=e.x1,f=e.y1,p=c(o,h,t),_=c(d,f,t);p|_&&!(p&_);)(n=p||_)&l?(r=o+(d-o)*(t.top-h)/(f-h),i=t.top):n&u?(r=o+(d-o)*(t.bottom-h)/(f-h),i=t.bottom):n&s?(i=h+(f-h)*(t.right-o)/(d-o),r=t.right):n&a&&(i=h+(f-h)*(t.left-o)/(d-o),r=t.left),n===p?p=c(o=r,h=i,t):_=c(d=r,f=i,t);return{x0:o,x1:d,y0:h,y1:f}}(o,t.area)),"start"===i?(n=o.x0,r=o.y0):"end"===i?(n=o.x1,r=o.y1):(n=(o.x0+o.x1)/2,r=(o.y0+o.y1)/2),function(e,t,n,r,i){switch(i){case"center":n=r=0;break;case"bottom":n=0,r=1;break;case"right":n=1,r=0;break;case"left":n=-1,r=0;break;case"top":n=0,r=-1;break;case"start":n=-n,r=-r;break;case"end":break;default:i*=Math.PI/180,n=Math.cos(i),r=Math.sin(i)}return{x:e,y:t,vx:n,vy:r}}(n,r,e.vx,e.vy,t.align)}var d={arc:function(e,t){var n=(e.startAngle+e.endAngle)/2,r=Math.cos(n),i=Math.sin(n),o=e.innerRadius,a=e.outerRadius;return h({x0:e.x+r*o,y0:e.y+i*o,x1:e.x+r*a,y1:e.y+i*a,vx:r,vy:i},t)},point:function(e,t){var n=i(e,t.origin),r=n.x*e.radius,o=n.y*e.radius;return h({x0:e.x-r,y0:e.y-o,x1:e.x+r,y1:e.y+o,vx:n.x,vy:n.y},t)},rect:function(e,t){var n=i(e,t.origin),r=e.x,o=e.y,a=0,s=0;return e.horizontal?(r=Math.min(e.x,e.base),a=Math.abs(e.base-e.x)):(o=Math.min(e.y,e.base),s=Math.abs(e.base-e.y)),h({x0:r,y0:o+s,x1:r+a,y1:o,vx:n.x,vy:n.y},t)},fallback:function(e,t){var n=i(e,t.origin);return h({x0:e.x,y0:e.y,x1:e.x,y1:e.y,vx:n.x,vy:n.y},t)}},f=e.helpers,p=r.rasterize;function _(e){var t=e._model.horizontal,n=e._scale||t&&e._xScale||e._yScale;if(!n)return null;if(void 0!==n.xCenter&&void 0!==n.yCenter)return{x:n.xCenter,y:n.yCenter};var r=n.getBasePixel();return t?{x:r,y:null}:{x:null,y:r}}function m(e,t,n){var r=e.shadowBlur,i=n.stroked,o=p(n.x),a=p(n.y),s=p(n.w);i&&e.strokeText(t,o,a,s),n.filled&&(r&&i&&(e.shadowBlur=0),e.fillText(t,o,a,s),r&&i&&(e.shadowBlur=r))}var g=function(e,t,n,r){var i=this;i._config=e,i._index=r,i._model=null,i._rects=null,i._ctx=t,i._el=n};f.extend(g.prototype,{_modelize:function(t,n,i,o){var a,s=this._index,u=f.options.resolve,l=r.parseFont(u([i.font,{}],o,s)),c=u([i.color,e.defaults.global.defaultFontColor],o,s);return{align:u([i.align,"center"],o,s),anchor:u([i.anchor,"center"],o,s),area:o.chart.chartArea,backgroundColor:u([i.backgroundColor,null],o,s),borderColor:u([i.borderColor,null],o,s),borderRadius:u([i.borderRadius,0],o,s),borderWidth:u([i.borderWidth,0],o,s),clamp:u([i.clamp,!1],o,s),clip:u([i.clip,!1],o,s),color:c,display:t,font:l,lines:n,offset:u([i.offset,0],o,s),opacity:u([i.opacity,1],o,s),origin:_(this._el),padding:f.options.toPadding(u([i.padding,0],o,s)),positioner:(a=this._el,a instanceof e.elements.Arc?d.arc:a instanceof e.elements.Point?d.point:a instanceof e.elements.Rectangle?d.rect:d.fallback),rotation:u([i.rotation,0],o,s)*(Math.PI/180),size:r.textSize(this._ctx,n,l),textAlign:u([i.textAlign,"start"],o,s),textShadowBlur:u([i.textShadowBlur,0],o,s),textShadowColor:u([i.textShadowColor,c],o,s),textStrokeColor:u([i.textStrokeColor,c],o,s),textStrokeWidth:u([i.textStrokeWidth,0],o,s)}},update:function(e){var t,n,i,o=this,a=null,s=null,u=o._index,l=o._config,c=f.options.resolve([l.display,!0],e,u);c&&(n=f.valueOrDefault(f.callback(l.formatter,[t=e.dataset.data[u],e]),t),(i=f.isNullOrUndef(n)?[]:r.toTextLines(n)).length&&(s=function(e){var t=e.borderWidth||0,n=e.padding,r=e.size.height,i=e.size.width,o=-i/2,a=-r/2;return{frame:{x:o-n.left-t,y:a-n.top-t,w:i+n.width+2*t,h:r+n.height+2*t},text:{x:o,y:a,w:i,h:r}}}(a=o._modelize(c,i,l,e)))),o._model=a,o._rects=s},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var n,i=e.ctx,o=this._model,a=this._rects;this.visible()&&(i.save(),o.clip&&(n=o.area,i.beginPath(),i.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),i.clip()),i.globalAlpha=r.bound(0,o.opacity,1),i.translate(p(t.x),p(t.y)),i.rotate(o.rotation),function(e,t,n){var r=n.backgroundColor,i=n.borderColor,o=n.borderWidth;(r||i&&o)&&(e.beginPath(),f.canvas.roundedRect(e,p(t.x)+o/2,p(t.y)+o/2,p(t.w)-o,p(t.h)-o,n.borderRadius),e.closePath(),r&&(e.fillStyle=r,e.fill()),i&&o&&(e.strokeStyle=i,e.lineWidth=o,e.lineJoin="miter",e.stroke()))}(i,a.frame,o),function(e,t,n,r){var i,o=r.textAlign,a=r.color,s=!!a,u=r.font,l=t.length,c=r.textStrokeColor,h=r.textStrokeWidth,d=c&&h;if(l&&(s||d))for(n=function(e,t,n){var r=n.lineHeight,i=e.w,o=e.x;return"center"===t?o+=i/2:"end"!==t&&"right"!==t||(o+=i),{h:r,w:i,x:o,y:e.y+r/2}}(n,o,u),e.font=u.string,e.textAlign=o,e.textBaseline="middle",e.shadowBlur=r.textShadowBlur,e.shadowColor=r.textShadowColor,s&&(e.fillStyle=a),d&&(e.lineJoin="round",e.lineWidth=h,e.strokeStyle=c),i=0,l=t.length;i<l;++i)m(e,t[i],{stroked:d,filled:s,w:n.w,x:n.x,y:n.y+n.h*i})}(i,o.lines,a.text,o),i.restore())}});var v=Number.MIN_SAFE_INTEGER||-9007199254740991,y=Number.MAX_SAFE_INTEGER||9007199254740991;function b(e,t,n){var r=Math.cos(n),i=Math.sin(n),o=t.x,a=t.y;return{x:o+r*(e.x-o)-i*(e.y-a),y:a+i*(e.x-o)+r*(e.y-a)}}function T(e,t){var n,r,i,o=y,a=v,s=t.origin;for(n=0;n<e.length;++n)i=t.vx*((r=e[n]).x-s.x)+t.vy*(r.y-s.y),o=Math.min(o,i),a=Math.max(a,i);return{min:o,max:a}}function E(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);return{vx:(t.x-e.x)/i,vy:(t.y-e.y)/i,origin:e,ln:i}}var x=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};function M(e,t,n){var r=t.positioner(e,t),i=r.vx,o=r.vy;if(!i&&!o)return{x:r.x,y:r.y};var a=n.w,s=n.h,u=t.rotation,l=Math.abs(a/2*Math.cos(u))+Math.abs(s/2*Math.sin(u)),c=Math.abs(a/2*Math.sin(u))+Math.abs(s/2*Math.cos(u)),h=1/Math.max(Math.abs(i),Math.abs(o));return l*=i*h,c*=o*h,{x:r.x+(l+=t.offset*i),y:r.y+(c+=t.offset*o)}}e.helpers.extend(x.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,n){this._rotation=n,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this._rect;return!((e=b(e,this.center(),-this._rotation)).x<t.x-1||e.y<t.y-1||e.x>t.x+t.w+2||e.y>t.y+t.h+2)},intersects:function(e){var t,n,r,i=this._points(),o=e._points(),a=[E(i[0],i[1]),E(i[0],i[3])];for(this._rotation!==e._rotation&&a.push(E(o[0],o[1]),E(o[0],o[3])),t=0;t<a.length;++t)if(n=T(i,a[t]),r=T(o,a[t]),n.max<r.min||r.max<n.min)return!1;return!0},_points:function(){var e=this._rect,t=this._rotation,n=this.center();return[b({x:e.x,y:e.y},n,t),b({x:e.x+e.w,y:e.y},n,t),b({x:e.x+e.w,y:e.y+e.h},n,t),b({x:e.x,y:e.y+e.h},n,t)]}});var A={prepare:function(e){var t,n,r,i,o,a=[];for(t=0,r=e.length;t<r;++t)for(n=0,i=e[t].length;n<i;++n)a.push(o=e[t][n]),o.$layout={_box:new x,_hidable:!1,_visible:!0,_set:t,_idx:n};return a.sort(function(e,t){var n=e.$layout,r=t.$layout;return n._idx===r._idx?n._set-r._set:r._idx-n._idx}),this.update(a),a},update:function(e){var t,n,r,i,o,a=!1;for(t=0,n=e.length;t<n;++t)i=(r=e[t]).model(),(o=r.$layout)._hidable=i&&"auto"===i.display,o._visible=r.visible(),a|=o._hidable;a&&function(e){var t,n,r,i,o,a;for(t=0,n=e.length;t<n;++t)(i=(r=e[t]).$layout)._visible&&(o=r.geometry(),a=M(r._el._model,r.model(),o),i._box.update(a,o,r.rotation()));!function(e,t){var n,r,i,o;for(n=e.length-1;n>=0;--n)for(i=e[n].$layout,r=n-1;r>=0&&i._visible;--r)(o=e[r].$layout)._visible&&i._box.intersects(o._box)&&t(i,o)}(e,function(e,t){var n=e._hidable,r=t._hidable;n&&r||r?t._visible=!1:n&&(e._visible=!1)})}(e)},lookup:function(e,t){var n,r;for(n=e.length-1;n>=0;--n)if((r=e[n].$layout)&&r._visible&&r._box.contains(t))return{dataset:r._set,label:e[n]};return null},draw:function(e,t){var n,r,i,o,a,s;for(n=0,r=t.length;n<r;++n)(o=(i=t[n]).$layout)._visible&&(a=i.geometry(),s=M(i._el._view,i.model(),a),o._box.update(s,a,i.rotation()),i.draw(e,s))}},S=e.helpers,C=e.helpers,P="$datalabels";function R(e,t,n){var r=t&&t[n.dataset];if(r){var i=n.label,o=i.$context;!0===C.callback(r,[o])&&(e[P]._dirty=!0,i.update(o))}}e.defaults.global.plugins.datalabels={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:function(e){if(S.isNullOrUndef(e))return null;var t,n,r,i=e;if(S.isObject(e))if(S.isNullOrUndef(e.label))if(S.isNullOrUndef(e.r))for(i="",r=0,n=(t=Object.keys(e)).length;r<n;++r)i+=(0!==r?", ":"")+t[r]+": "+e[t[r]];else i=e.r;else i=e.label;return""+i},listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0};var D={id:"datalabels",beforeInit:function(e){e[P]={_actives:[]}},beforeUpdate:function(e){var t=e[P];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,n){var r,i,o,a=t.index,s=e[P],u=s._datasets[a]=[],l=e.isDatasetVisible(a),c=e.data.datasets[a],h=function(e,t){var n=e.datalabels;return!1===n?null:(!0===n&&(n={}),C.merge({},[t,n]))}(c,n),d=t.meta.data||[],f=d.length,p=e.ctx;for(p.save(),r=0;r<f;++r)i=d[r],l&&i&&!i.hidden&&!i._model.skip?(u.push(o=new g(h,p,i,r)),o.update(o.$context={active:!1,chart:e,dataIndex:r,dataset:c,datasetIndex:a})):o=null,i[P]=o;p.restore(),C.merge(s._listeners,h.listeners||{},{merger:function(e,n,r){n[e]=n[e]||{},n[e][t.index]=r[e],s._listened=!0}})},afterUpdate:function(e,t){e[P]._labels=A.prepare(e[P]._datasets,t)},afterDatasetsDraw:function(e){A.draw(e,e[P]._labels)},beforeEvent:function(e,t){if(e[P]._listened)switch(t.type){case"mousemove":case"mouseout":!function(e,t){var n,r,i=e[P],o=i._listeners;if(o.enter||o.leave){if("mousemove"===t.type)r=A.lookup(i._labels,t);else if("mouseout"!==t.type)return;n=i._hovered,i._hovered=r,function(e,t,n,r){var i,o;(n||r)&&(n?r?n.label!==r.label&&(o=i=!0):o=!0:i=!0,o&&R(e,t.leave,n),i&&R(e,t.enter,r))}(e,o,n,r)}}(e,t);break;case"click":!function(e,t){var n=e[P],r=n._listeners.click,i=r&&A.lookup(n._labels,t);i&&R(e,r,i)}(e,t)}},afterEvent:function(t){var n,i,o,a,s=t[P],u=s._actives,l=s._actives=t.lastActive||[],c=r.arrayDiff(u,l);for(n=0,i=c.length;n<i;++n)(o=c[n])[1]&&(a=o[0][P])&&(a.$context.active=1===o[1],a.update(a.$context));(s._dirty||c.length)&&(A.update(s._labels),function(t){if(!t.animating){for(var n=e.animationService.animations,r=0,i=n.length;r<i;++r)if(n[r].chart===t)return;t.render({duration:1,lazy:!0})}}(t)),delete s._dirty}};return e.plugins.register(D),D}(n("MO+k"))},qnhp:function(e,t,n){var r=n("mrSG").__decorate,i=n("CcnG"),o=(n("ZYjt"),function(){function e(e){this.sanitizer=e}return e.prototype.transform=function(e,t){switch(t){case"html":return this.sanitizer.bypassSecurityTrustHtml(e);case"style":return this.sanitizer.bypassSecurityTrustStyle(e);case"script":return this.sanitizer.bypassSecurityTrustScript(e);case"url":return this.sanitizer.bypassSecurityTrustUrl(e);case"resourceUrl":return this.sanitizer.bypassSecurityTrustResourceUrl(e);default:throw new Error("SafePipe unable to bypass security for invalid type: "+t)}},e}());o=r([i.Pipe({name:"safe"})],o),t.SafePipe=o},rPjj:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("mrSG"),i=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return r.__extends(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n("FFOo").a)},raLr:function(e,t,n){!function(e){"use strict";function t(e,t,n){var r,i;return"m"===n?t?"\u0445\u0432\u0438\u043b\u0438\u043d\u0430":"\u0445\u0432\u0438\u043b\u0438\u043d\u0443":"h"===n?t?"\u0433\u043e\u0434\u0438\u043d\u0430":"\u0433\u043e\u0434\u0438\u043d\u0443":e+" "+(r=+e,i={ss:t?"\u0441\u0435\u043a\u0443\u043d\u0434\u0430_\u0441\u0435\u043a\u0443\u043d\u0434\u0438_\u0441\u0435\u043a\u0443\u043d\u0434":"\u0441\u0435\u043a\u0443\u043d\u0434\u0443_\u0441\u0435\u043a\u0443\u043d\u0434\u0438_\u0441\u0435\u043a\u0443\u043d\u0434",mm:t?"\u0445\u0432\u0438\u043b\u0438\u043d\u0430_\u0445\u0432\u0438\u043b\u0438\u043d\u0438_\u0445\u0432\u0438\u043b\u0438\u043d":"\u0445\u0432\u0438\u043b\u0438\u043d\u0443_\u0445\u0432\u0438\u043b\u0438\u043d\u0438_\u0445\u0432\u0438\u043b\u0438\u043d",hh:t?"\u0433\u043e\u0434\u0438\u043d\u0430_\u0433\u043e\u0434\u0438\u043d\u0438_\u0433\u043e\u0434\u0438\u043d":"\u0433\u043e\u0434\u0438\u043d\u0443_\u0433\u043e\u0434\u0438\u043d\u0438_\u0433\u043e\u0434\u0438\u043d",dd:"\u0434\u0435\u043d\u044c_\u0434\u043d\u0456_\u0434\u043d\u0456\u0432",MM:"\u043c\u0456\u0441\u044f\u0446\u044c_\u043c\u0456\u0441\u044f\u0446\u0456_\u043c\u0456\u0441\u044f\u0446\u0456\u0432",yy:"\u0440\u0456\u043a_\u0440\u043e\u043a\u0438_\u0440\u043e\u043a\u0456\u0432"}[n].split("_"),r%10==1&&r%100!=11?i[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?i[1]:i[2])}function r(e){return function(){return e+"\u043e"+(11===this.hours()?"\u0431":"")+"] LT"}}n("wd/R").defineLocale("uk",{months:{format:"\u0441\u0456\u0447\u043d\u044f_\u043b\u044e\u0442\u043e\u0433\u043e_\u0431\u0435\u0440\u0435\u0437\u043d\u044f_\u043a\u0432\u0456\u0442\u043d\u044f_\u0442\u0440\u0430\u0432\u043d\u044f_\u0447\u0435\u0440\u0432\u043d\u044f_\u043b\u0438\u043f\u043d\u044f_\u0441\u0435\u0440\u043f\u043d\u044f_\u0432\u0435\u0440\u0435\u0441\u043d\u044f_\u0436\u043e\u0432\u0442\u043d\u044f_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434\u0430_\u0433\u0440\u0443\u0434\u043d\u044f".split("_"),standalone:"\u0441\u0456\u0447\u0435\u043d\u044c_\u043b\u044e\u0442\u0438\u0439_\u0431\u0435\u0440\u0435\u0437\u0435\u043d\u044c_\u043a\u0432\u0456\u0442\u0435\u043d\u044c_\u0442\u0440\u0430\u0432\u0435\u043d\u044c_\u0447\u0435\u0440\u0432\u0435\u043d\u044c_\u043b\u0438\u043f\u0435\u043d\u044c_\u0441\u0435\u0440\u043f\u0435\u043d\u044c_\u0432\u0435\u0440\u0435\u0441\u0435\u043d\u044c_\u0436\u043e\u0432\u0442\u0435\u043d\u044c_\u043b\u0438\u0441\u0442\u043e\u043f\u0430\u0434_\u0433\u0440\u0443\u0434\u0435\u043d\u044c".split("_")},monthsShort:"\u0441\u0456\u0447_\u043b\u044e\u0442_\u0431\u0435\u0440_\u043a\u0432\u0456\u0442_\u0442\u0440\u0430\u0432_\u0447\u0435\u0440\u0432_\u043b\u0438\u043f_\u0441\u0435\u0440\u043f_\u0432\u0435\u0440_\u0436\u043e\u0432\u0442_\u043b\u0438\u0441\u0442_\u0433\u0440\u0443\u0434".split("_"),weekdays:function(e,t){var n={nominative:"\u043d\u0435\u0434\u0456\u043b\u044f_\u043f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a_\u0432\u0456\u0432\u0442\u043e\u0440\u043e\u043a_\u0441\u0435\u0440\u0435\u0434\u0430_\u0447\u0435\u0442\u0432\u0435\u0440_\u043f\u2019\u044f\u0442\u043d\u0438\u0446\u044f_\u0441\u0443\u0431\u043e\u0442\u0430".split("_"),accusative:"\u043d\u0435\u0434\u0456\u043b\u044e_\u043f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a_\u0432\u0456\u0432\u0442\u043e\u0440\u043e\u043a_\u0441\u0435\u0440\u0435\u0434\u0443_\u0447\u0435\u0442\u0432\u0435\u0440_\u043f\u2019\u044f\u0442\u043d\u0438\u0446\u044e_\u0441\u0443\u0431\u043e\u0442\u0443".split("_"),genitive:"\u043d\u0435\u0434\u0456\u043b\u0456_\u043f\u043e\u043d\u0435\u0434\u0456\u043b\u043a\u0430_\u0432\u0456\u0432\u0442\u043e\u0440\u043a\u0430_\u0441\u0435\u0440\u0435\u0434\u0438_\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430_\u043f\u2019\u044f\u0442\u043d\u0438\u0446\u0456_\u0441\u0443\u0431\u043e\u0442\u0438".split("_")};return!0===e?n.nominative.slice(1,7).concat(n.nominative.slice(0,1)):e?n[/(\[[\u0412\u0432\u0423\u0443]\]) ?dddd/.test(t)?"accusative":/\[?(?:\u043c\u0438\u043d\u0443\u043b\u043e\u0457|\u043d\u0430\u0441\u0442\u0443\u043f\u043d\u043e\u0457)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]:n.nominative},weekdaysShort:"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),weekdaysMin:"\u043d\u0434_\u043f\u043d_\u0432\u0442_\u0441\u0440_\u0447\u0442_\u043f\u0442_\u0441\u0431".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY \u0440.",LLL:"D MMMM YYYY \u0440., HH:mm",LLLL:"dddd, D MMMM YYYY \u0440., HH:mm"},calendar:{sameDay:r("[\u0421\u044c\u043e\u0433\u043e\u0434\u043d\u0456 "),nextDay:r("[\u0417\u0430\u0432\u0442\u0440\u0430 "),lastDay:r("[\u0412\u0447\u043e\u0440\u0430 "),nextWeek:r("[\u0423] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return r("[\u041c\u0438\u043d\u0443\u043b\u043e\u0457] dddd [").call(this);case 1:case 2:case 4:return r("[\u041c\u0438\u043d\u0443\u043b\u043e\u0433\u043e] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"\u0437\u0430 %s",past:"%s \u0442\u043e\u043c\u0443",s:"\u0434\u0435\u043a\u0456\u043b\u044c\u043a\u0430 \u0441\u0435\u043a\u0443\u043d\u0434",ss:t,m:t,mm:t,h:"\u0433\u043e\u0434\u0438\u043d\u0443",hh:t,d:"\u0434\u0435\u043d\u044c",dd:t,M:"\u043c\u0456\u0441\u044f\u0446\u044c",MM:t,y:"\u0440\u0456\u043a",yy:t},meridiemParse:/\u043d\u043e\u0447\u0456|\u0440\u0430\u043d\u043a\u0443|\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430/,isPM:function(e){return/^(\u0434\u043d\u044f|\u0432\u0435\u0447\u043e\u0440\u0430)$/.test(e)},meridiem:function(e,t,n){return e<4?"\u043d\u043e\u0447\u0456":e<12?"\u0440\u0430\u043d\u043a\u0443":e<17?"\u0434\u043d\u044f":"\u0432\u0435\u0447\u043e\u0440\u0430"},dayOfMonthOrdinalParse:/\d{1,2}-(\u0439|\u0433\u043e)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-\u0439";case"D":return e+"-\u0433\u043e";default:return e}},week:{dow:1,doy:7}})}()},"s+uk":function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}n("wd/R").defineLocale("de-at",{months:"J\xe4nner_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"J\xe4n._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},sjRU:function(e,t,n){var r;"undefined"!=typeof self?self:"undefined"!=typeof global&&global,e.exports=(r=n("Yzuk"),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t){e.exports=r},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a});var r=n(0),i=n(2),o=function(){function e(){}return e.Get=function(e,t,n){if(!t||null==n||!t[n])throw new Error(e+": Failed to find index ("+n+")");return t[n]},e.Assign=function(e){if(e)for(var t=0;t<e.length;t++)e[t].index=t},e}(),a=function(){function e(e){this._completePromises=new Array,this._disposed=!1,this._state=null,this._extensions={},this._defaultBabylonMaterialData={},this._requests=new Array,this._parent=e}return e.RegisterExtension=function(t,n){e.UnregisterExtension(t)&&r.Tools.Warn("Extension with the name '"+t+"' already exists"),e._ExtensionFactories[t]=n,e._ExtensionNames.push(t)},e.UnregisterExtension=function(t){if(!e._ExtensionFactories[t])return!1;delete e._ExtensionFactories[t];var n=e._ExtensionNames.indexOf(t);return-1!==n&&e._ExtensionNames.splice(n,1),!0},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gltf",{get:function(){return this._gltf},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"babylonScene",{get:function(){return this._babylonScene},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootBabylonMesh",{get:function(){return this._rootBabylonMesh},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){if(!this._disposed){this._disposed=!0;for(var e=0,t=this._requests;e<t.length;e++)t[e].abort();for(var n in this._requests.length=0,this._completePromises.length=0,this._extensions)this._extensions[n].dispose&&this._extensions[n].dispose();this._extensions={},delete this._gltf,delete this._babylonScene,delete this._rootBabylonMesh,delete this._progressCallback,this._parent._clear()}},e.prototype.importMeshAsync=function(e,t,n,r,i,o){var a=this;return Promise.resolve().then(function(){a._babylonScene=t,a._rootUrl=r,a._fileName=o||"scene",a._progressCallback=i,a._loadData(n);var s=null;if(e){var u={};if(a._gltf.nodes)for(var l=0,c=a._gltf.nodes;l<c.length;l++){var h=c[l];h.name&&(u[h.name]=h.index)}s=(e instanceof Array?e:[e]).map(function(e){var t=u[e];if(void 0===t)throw new Error("Failed to find node '"+e+"'");return t})}return a._loadAsync(s,function(){return{meshes:a._getMeshes(),particleSystems:[],skeletons:a._getSkeletons(),animationGroups:a._getAnimationGroups()}})})},e.prototype.loadAsync=function(e,t,n,r,i){var o=this;return Promise.resolve().then(function(){return o._babylonScene=e,o._rootUrl=n,o._fileName=i||"scene",o._progressCallback=r,o._loadData(t),o._loadAsync(null,function(){})})},e.prototype._loadAsync=function(e,t){var n=this;return Promise.resolve().then(function(){n._uniqueRootUrl=-1===n._rootUrl.indexOf("file:")&&n._fileName?n._rootUrl:""+n._rootUrl+Date.now()+"/",n._loadExtensions(),n._checkExtensions();var a=i.GLTFLoaderState[i.GLTFLoaderState.LOADING]+" => "+i.GLTFLoaderState[i.GLTFLoaderState.READY],s=i.GLTFLoaderState[i.GLTFLoaderState.LOADING]+" => "+i.GLTFLoaderState[i.GLTFLoaderState.COMPLETE];n._parent._startPerformanceCounter(a),n._parent._startPerformanceCounter(s),n._setState(i.GLTFLoaderState.LOADING),n._extensionsOnLoading();var u=new Array,l=n._babylonScene.blockMaterialDirtyMechanism;if(n._babylonScene.blockMaterialDirtyMechanism=!0,e)u.push(n.loadSceneAsync("/nodes",{nodes:e,index:-1}));else if(null!=n._gltf.scene||n._gltf.scenes&&n._gltf.scenes[0]){var c=o.Get("/scene",n._gltf.scenes,n._gltf.scene||0);u.push(n.loadSceneAsync("/scenes/"+c.index,c))}n._babylonScene.blockMaterialDirtyMechanism=l,n._parent.compileMaterials&&u.push(n._compileMaterialsAsync()),n._parent.compileShadowGenerators&&u.push(n._compileShadowGeneratorsAsync());var h=Promise.all(u).then(function(){return n._rootBabylonMesh&&n._rootBabylonMesh.setEnabled(!0),n._setState(i.GLTFLoaderState.READY),n._extensionsOnReady(),n._startAnimations(),t()});return h.then(function(){n._parent._endPerformanceCounter(a),r.Tools.SetImmediate(function(){n._disposed||Promise.all(n._completePromises).then(function(){n._parent._endPerformanceCounter(s),n._setState(i.GLTFLoaderState.COMPLETE),n._parent.onCompleteObservable.notifyObservers(void 0),n._parent.onCompleteObservable.clear(),n.dispose()},function(e){n._parent.onErrorObservable.notifyObservers(e),n._parent.onErrorObservable.clear(),n.dispose()})})}),h},function(e){throw n._disposed||(n._parent.onErrorObservable.notifyObservers(e),n._parent.onErrorObservable.clear(),n.dispose()),e})},e.prototype._loadData=function(e){if(this._gltf=e.json,this._setupData(),e.bin){var t=this._gltf.buffers;if(t&&t[0]&&!t[0].uri){var n=t[0];(n.byteLength<e.bin.byteLength-3||n.byteLength>e.bin.byteLength)&&r.Tools.Warn("Binary buffer length ("+n.byteLength+") from JSON does not match chunk length ("+e.bin.byteLength+")"),n._data=Promise.resolve(e.bin)}else r.Tools.Warn("Unexpected BIN chunk")}},e.prototype._setupData=function(){if(o.Assign(this._gltf.accessors),o.Assign(this._gltf.animations),o.Assign(this._gltf.buffers),o.Assign(this._gltf.bufferViews),o.Assign(this._gltf.cameras),o.Assign(this._gltf.images),o.Assign(this._gltf.materials),o.Assign(this._gltf.meshes),o.Assign(this._gltf.nodes),o.Assign(this._gltf.samplers),o.Assign(this._gltf.scenes),o.Assign(this._gltf.skins),o.Assign(this._gltf.textures),this._gltf.nodes){for(var e={},t=0,n=this._gltf.nodes;t<n.length;t++)if((l=n[t]).children)for(var r=0,i=l.children;r<i.length;r++)e[i[r]]=l.index;for(var a=this._createRootNode(),s=0,u=this._gltf.nodes;s<u.length;s++){var l,c=e[(l=u[s]).index];l.parent=void 0===c?a:this._gltf.nodes[c]}}},e.prototype._loadExtensions=function(){for(var t=0,n=e._ExtensionNames;t<n.length;t++){var r=n[t],i=e._ExtensionFactories[r](this);this._extensions[r]=i,this._parent.onExtensionLoadedObservable.notifyObservers(i)}this._parent.onExtensionLoadedObservable.clear()},e.prototype._checkExtensions=function(){if(this._gltf.extensionsRequired)for(var e=0,t=this._gltf.extensionsRequired;e<t.length;e++){var n=t[e],r=this._extensions[n];if(!r||!r.enabled)throw new Error("Require extension "+n+" is not available")}},e.prototype._setState=function(e){this._state=e,this.log(i.GLTFLoaderState[this._state])},e.prototype._createRootNode=function(){this._rootBabylonMesh=new r.Mesh("__root__",this._babylonScene),this._rootBabylonMesh.setEnabled(!1);var t={_babylonTransformNode:this._rootBabylonMesh,index:-1};switch(this._parent.coordinateSystemMode){case i.GLTFLoaderCoordinateSystemMode.AUTO:this._babylonScene.useRightHandedSystem||(t.rotation=[0,1,0,0],t.scale=[1,1,-1],e._LoadTransform(t,this._rootBabylonMesh));break;case i.GLTFLoaderCoordinateSystemMode.FORCE_RIGHT_HANDED:this._babylonScene.useRightHandedSystem=!0;break;default:throw new Error("Invalid coordinate system mode ("+this._parent.coordinateSystemMode+")")}return this._parent.onMeshLoadedObservable.notifyObservers(this._rootBabylonMesh),t},e.prototype.loadSceneAsync=function(e,t){var n=this,r=this._extensionsLoadSceneAsync(e,t);if(r)return r;var i=new Array;if(this.logOpen(e+" "+(t.name||"")),t.nodes)for(var a=0,s=t.nodes;a<s.length;a++){var u=s[a],l=o.Get(e+"/nodes/"+u,this._gltf.nodes,u);i.push(this.loadNodeAsync("/nodes/"+l.index,l,function(e){e.parent=n._rootBabylonMesh}))}if(this._gltf.nodes)for(var c=0,h=this._gltf.nodes;c<h.length;c++)if((l=h[c])._babylonTransformNode&&l._babylonBones)for(var d=0,f=l._babylonBones;d<f.length;d++)f[d].linkTransformNode(l._babylonTransformNode);return i.push(this._loadAnimationsAsync()),this.logClose(),Promise.all(i).then(function(){})},e.prototype._forEachPrimitive=function(e,t){if(e._primitiveBabylonMeshes)for(var n=0,r=e._primitiveBabylonMeshes;n<r.length;n++)t(r[n])},e.prototype._getMeshes=function(){var e=new Array;e.push(this._rootBabylonMesh);var t=this._gltf.nodes;if(t)for(var n=0,r=t;n<r.length;n++)this._forEachPrimitive(r[n],function(t){e.push(t)});return e},e.prototype._getSkeletons=function(){var e=new Array,t=this._gltf.skins;if(t)for(var n=0,r=t;n<r.length;n++){var i=r[n];i._data&&e.push(i._data.babylonSkeleton)}return e},e.prototype._getAnimationGroups=function(){var e=new Array,t=this._gltf.animations;if(t)for(var n=0,r=t;n<r.length;n++){var i=r[n];i._babylonAnimationGroup&&e.push(i._babylonAnimationGroup)}return e},e.prototype._startAnimations=function(){switch(this._parent.animationStartMode){case i.GLTFLoaderAnimationStartMode.NONE:break;case i.GLTFLoaderAnimationStartMode.FIRST:0!==(e=this._getAnimationGroups()).length&&e[0].start(!0);break;case i.GLTFLoaderAnimationStartMode.ALL:for(var e,t=0,n=e=this._getAnimationGroups();t<n.length;t++)n[t].start(!0);break;default:return void r.Tools.Error("Invalid animation start mode ("+this._parent.animationStartMode+")")}},e.prototype.loadNodeAsync=function(t,n,i){var a=this;void 0===i&&(i=function(){});var s=this._extensionsLoadNodeAsync(t,n,i);if(s)return s;if(n._babylonTransformNode)throw new Error(t+": Invalid recursive node hierarchy");var u=new Array;this.logOpen(t+" "+(n.name||""));var l=function(r){if(e.AddPointerMetadata(r,t),e._LoadTransform(n,r),null!=n.camera){var s=o.Get(t+"/camera",a._gltf.cameras,n.camera);u.push(a.loadCameraAsync("/cameras/"+s.index,s,function(e){e.parent=r}))}if(n.children)for(var l=0,c=n.children;l<c.length;l++){var h=c[l],d=o.Get(t+"/children/"+h,a._gltf.nodes,h);u.push(a.loadNodeAsync("/nodes/"+d.index,d,function(e){e.parent=r}))}i(r)};if(null==n.mesh)n._babylonTransformNode=new r.TransformNode(n.name||"node"+n.index,this._babylonScene),l(n._babylonTransformNode);else{var c=o.Get(t+"/mesh",this._gltf.meshes,n.mesh);u.push(this._loadMeshAsync("/meshes/"+c.index,n,c,l))}return this.logClose(),Promise.all(u).then(function(){return a._forEachPrimitive(n,function(e){e.refreshBoundingInfo(!0)}),n._babylonTransformNode})},e.prototype._loadMeshAsync=function(e,t,n,i){var a=n.primitives;if(!a||!a.length)throw new Error(e+": Primitives are missing");null==a[0].index&&o.Assign(a);var s=new Array;this.logOpen(e+" "+(n.name||""));var u=t.name||"node"+t.index;if(1===a.length){var l=n.primitives[0];s.push(this._loadMeshPrimitiveAsync(e+"/primitives/"+l.index,u,t,n,l,function(e){t._babylonTransformNode=e,t._primitiveBabylonMeshes=[e]}))}else{t._babylonTransformNode=new r.TransformNode(u,this._babylonScene),t._primitiveBabylonMeshes=[];for(var c=0,h=a;c<h.length;c++)s.push(this._loadMeshPrimitiveAsync(e+"/primitives/"+(l=h[c]).index,u+"_primitive"+l.index,t,n,l,function(e){e.parent=t._babylonTransformNode,t._primitiveBabylonMeshes.push(e)}))}if(null!=t.skin){var d=o.Get(e+"/skin",this._gltf.skins,t.skin);s.push(this._loadSkinAsync("/skins/"+d.index,t,d))}return i(t._babylonTransformNode),this.logClose(),Promise.all(s).then(function(){return t._babylonTransformNode})},e.prototype._loadMeshPrimitiveAsync=function(t,n,i,a,s,u){var l=this,c=this._extensionsLoadMeshPrimitiveAsync(t,n,i,a,s,u);if(c)return c;this.logOpen(""+t);var h,d,f=null==i.skin&&!a.primitives[0].targets,p=s._instanceData;if(f&&p)h=p.babylonSourceMesh.createInstance(n),d=p.promise;else{var _=new Array,m=new r.Mesh(n,this._babylonScene);this._createMorphTargets(t,i,a,s,m),_.push(this._loadVertexDataAsync(t,s,m).then(function(e){return l._loadMorphTargetsAsync(t,s,m,e).then(function(){e.applyToMesh(m)})}));var g=e._GetDrawMode(t,s.mode);if(null==s.material){var v=this._defaultBabylonMaterialData[g];v||(v=this._createDefaultMaterial("__GLTFLoader._default",g),this._parent.onMaterialLoadedObservable.notifyObservers(v),this._defaultBabylonMaterialData[g]=v),m.material=v}else{var y=o.Get(t+"/material",this._gltf.materials,s.material);_.push(this._loadMaterialAsync("/materials/"+y.index,y,m,g,function(e){m.material=e}))}d=Promise.all(_),f&&(s._instanceData={babylonSourceMesh:m,promise:d}),h=m}return e.AddPointerMetadata(h,t),this._parent.onMeshLoadedObservable.notifyObservers(h),u(h),this.logClose(),d.then(function(){return h})},e.prototype._loadVertexDataAsync=function(e,t,n){var i=this,a=this._extensionsLoadVertexDataAsync(e,t,n);if(a)return a;var s=t.attributes;if(!s)throw new Error(e+": Attributes are missing");var u=new Array,l=new r.Geometry(n.name,this._babylonScene);if(null==t.indices)n.isUnIndexed=!0;else{var c=o.Get(e+"/indices",this._gltf.accessors,t.indices);u.push(this._loadIndicesAccessorAsync("/accessors/"+c.index,c).then(function(e){l.setIndices(e)}))}var h=function(t,r,a){if(null!=s[t]){n._delayInfo=n._delayInfo||[],-1===n._delayInfo.indexOf(r)&&n._delayInfo.push(r);var c=o.Get(e+"/attributes/"+t,i._gltf.accessors,s[t]);u.push(i._loadVertexAccessorAsync("/accessors/"+c.index,c,r).then(function(e){l.setVerticesBuffer(e,c.count)})),a&&a(c)}};return h("POSITION",r.VertexBuffer.PositionKind),h("NORMAL",r.VertexBuffer.NormalKind),h("TANGENT",r.VertexBuffer.TangentKind),h("TEXCOORD_0",r.VertexBuffer.UVKind),h("TEXCOORD_1",r.VertexBuffer.UV2Kind),h("JOINTS_0",r.VertexBuffer.MatricesIndicesKind),h("WEIGHTS_0",r.VertexBuffer.MatricesWeightsKind),h("COLOR_0",r.VertexBuffer.ColorKind,function(e){"VEC4"===e.type&&(n.hasVertexAlpha=!0)}),Promise.all(u).then(function(){return l})},e.prototype._createMorphTargets=function(e,t,n,i,o){if(i.targets){if(null==t._numMorphTargets)t._numMorphTargets=i.targets.length;else if(i.targets.length!==t._numMorphTargets)throw new Error(e+": Primitives do not have the same number of targets");o.morphTargetManager=new r.MorphTargetManager;for(var a=0;a<i.targets.length;a++)o.morphTargetManager.addTarget(new r.MorphTarget("morphTarget"+a,t.weights?t.weights[a]:n.weights?n.weights[a]:0))}},e.prototype._loadMorphTargetsAsync=function(e,t,n,r){if(!t.targets)return Promise.resolve();for(var i=new Array,o=n.morphTargetManager,a=0;a<o.numTargets;a++){var s=o.getTarget(a);i.push(this._loadMorphTargetVertexDataAsync(e+"/targets/"+a,r,t.targets[a],s))}return Promise.all(i).then(function(){})},e.prototype._loadMorphTargetVertexDataAsync=function(e,t,n,i){var a=this,s=new Array,u=function(r,i,u){if(null!=n[r]){var l=t.getVertexBuffer(i);if(l){var c=o.Get(e+"/"+r,a._gltf.accessors,n[r]);s.push(a._loadFloatAccessorAsync("/accessors/"+c.index,c).then(function(e){u(l,e)}))}}};return u("POSITION",r.VertexBuffer.PositionKind,function(e,t){e.forEach(t.length,function(e,n){t[n]+=e}),i.setPositions(t)}),u("NORMAL",r.VertexBuffer.NormalKind,function(e,t){e.forEach(t.length,function(e,n){t[n]+=e}),i.setNormals(t)}),u("TANGENT",r.VertexBuffer.TangentKind,function(e,t){var n=0;e.forEach(t.length/3*4,function(e,r){(r+1)%4!=0&&(t[n++]+=e)}),i.setTangents(t)}),Promise.all(s).then(function(){})},e._LoadTransform=function(e,t){if(null==e.skin){var n=r.Vector3.Zero(),i=r.Quaternion.Identity(),o=r.Vector3.One();e.matrix?r.Matrix.FromArray(e.matrix).decompose(o,i,n):(e.translation&&(n=r.Vector3.FromArray(e.translation)),e.rotation&&(i=r.Quaternion.FromArray(e.rotation)),e.scale&&(o=r.Vector3.FromArray(e.scale))),t.position=n,t.rotationQuaternion=i,t.scaling=o}},e.prototype._loadSkinAsync=function(e,t,n){var i=this,o=this._extensionsLoadSkinAsync(e,t,n);if(o)return o;var a=function(e){i._forEachPrimitive(t,function(t){t.skeleton=e})};if(n._data)return a(n._data.babylonSkeleton),n._data.promise;var s="skeleton"+n.index,u=new r.Skeleton(n.name||s,s,this._babylonScene);u.overrideMesh=this._rootBabylonMesh,this._loadBones(e,n,u),a(u);var l=this._loadSkinInverseBindMatricesDataAsync(e,n).then(function(e){i._updateBoneMatrices(u,e)});return n._data={babylonSkeleton:u,promise:l},l},e.prototype._loadBones=function(e,t,n){for(var r={},i=0,a=t.joints;i<a.length;i++){var s=a[i],u=o.Get(e+"/joints/"+s,this._gltf.nodes,s);this._loadBone(u,t,n,r)}},e.prototype._loadBone=function(e,t,n,i){var o=i[e.index];if(o)return o;var a=null;e.parent&&e.parent._babylonTransformNode!==this._rootBabylonMesh&&(a=this._loadBone(e.parent,t,n,i));var s=t.joints.indexOf(e.index);return o=new r.Bone(e.name||"joint"+e.index,n,a,this._getNodeMatrix(e),null,null,s),i[e.index]=o,e._babylonBones=e._babylonBones||[],e._babylonBones.push(o),o},e.prototype._loadSkinInverseBindMatricesDataAsync=function(e,t){if(null==t.inverseBindMatrices)return Promise.resolve(null);var n=o.Get(e+"/inverseBindMatrices",this._gltf.accessors,t.inverseBindMatrices);return this._loadFloatAccessorAsync("/accessors/"+n.index,n)},e.prototype._updateBoneMatrices=function(e,t){for(var n=0,i=e.bones;n<i.length;n++){var o=i[n],a=r.Matrix.Identity(),s=o._index;t&&-1!==s&&(r.Matrix.FromArrayToRef(t,16*s,a),a.invertToRef(a));var u=o.getParent();u&&a.multiplyToRef(u.getInvertedAbsoluteTransform(),a),o.updateMatrix(a,!1,!1),o._updateDifferenceMatrix(void 0,!1)}},e.prototype._getNodeMatrix=function(e){return e.matrix?r.Matrix.FromArray(e.matrix):r.Matrix.Compose(e.scale?r.Vector3.FromArray(e.scale):r.Vector3.One(),e.rotation?r.Quaternion.FromArray(e.rotation):r.Quaternion.Identity(),e.translation?r.Vector3.FromArray(e.translation):r.Vector3.Zero())},e.prototype.loadCameraAsync=function(t,n,i){void 0===i&&(i=function(){});var o=this._extensionsLoadCameraAsync(t,n,i);if(o)return o;var a=new Array;this.logOpen(t+" "+(n.name||""));var s=new r.FreeCamera(n.name||"camera"+n.index,r.Vector3.Zero(),this._babylonScene,!1);switch(s.rotation=new r.Vector3(0,Math.PI,0),n.type){case"perspective":var u=n.perspective;if(!u)throw new Error(t+": Camera perspective properties are missing");s.fov=u.yfov,s.minZ=u.znear,s.maxZ=u.zfar||Number.MAX_VALUE;break;case"orthographic":if(!n.orthographic)throw new Error(t+": Camera orthographic properties are missing");s.mode=r.Camera.ORTHOGRAPHIC_CAMERA,s.orthoLeft=-n.orthographic.xmag,s.orthoRight=n.orthographic.xmag,s.orthoBottom=-n.orthographic.ymag,s.orthoTop=n.orthographic.ymag,s.minZ=n.orthographic.znear,s.maxZ=n.orthographic.zfar;break;default:throw new Error(t+": Invalid camera type ("+n.type+")")}return e.AddPointerMetadata(s,t),this._parent.onCameraLoadedObservable.notifyObservers(s),i(s),Promise.all(a).then(function(){return s})},e.prototype._loadAnimationsAsync=function(){var e=this._gltf.animations;if(!e)return Promise.resolve();for(var t=new Array,n=0;n<e.length;n++){var r=e[n];t.push(this.loadAnimationAsync("/animations/"+r.index,r))}return Promise.all(t).then(function(){})},e.prototype.loadAnimationAsync=function(e,t){var n=this._extensionsLoadAnimationAsync(e,t);if(n)return n;var i=new r.AnimationGroup(t.name||"animation"+t.index,this._babylonScene);t._babylonAnimationGroup=i;var a=new Array;o.Assign(t.channels),o.Assign(t.samplers);for(var s=0,u=t.channels;s<u.length;s++){var l=u[s];a.push(this._loadAnimationChannelAsync(e+"/channels/"+l.index,e,t,l,i))}return Promise.all(a).then(function(){return i.normalize(0),i})},e.prototype._loadAnimationChannelAsync=function(e,t,n,i,a,s){var u=this;if(void 0===s&&(s=null),null==i.target.node)return Promise.resolve();var l=o.Get(e+"/target/node",this._gltf.nodes,i.target.node);if("weights"===i.target.path&&!l._numMorphTargets||"weights"!==i.target.path&&!l._babylonTransformNode)return Promise.resolve();var c=o.Get(e+"/sampler",n.samplers,i.sampler);return this._loadAnimationSamplerAsync(t+"/samplers/"+i.sampler,c).then(function(t){var n,o;switch(i.target.path){case"translation":n="position",o=r.Animation.ANIMATIONTYPE_VECTOR3;break;case"rotation":n="rotationQuaternion",o=r.Animation.ANIMATIONTYPE_QUATERNION;break;case"scale":n="scaling",o=r.Animation.ANIMATIONTYPE_VECTOR3;break;case"weights":n="influence",o=r.Animation.ANIMATIONTYPE_FLOAT;break;default:throw new Error(e+"/target/path: Invalid value ("+i.target.path+")")}var c,h,d=0;switch(n){case"position":c=function(){var e=r.Vector3.FromArray(t.output,d);return d+=3,e};break;case"rotationQuaternion":c=function(){var e=r.Quaternion.FromArray(t.output,d);return d+=4,e};break;case"scaling":c=function(){var e=r.Vector3.FromArray(t.output,d);return d+=3,e};break;case"influence":c=function(){for(var e=new Array(l._numMorphTargets),n=0;n<l._numMorphTargets;n++)e[n]=t.output[d++];return e}}switch(t.interpolation){case"STEP":h=function(e){return{frame:t.input[e],value:c(),interpolation:r.AnimationKeyInterpolation.STEP}};break;case"LINEAR":h=function(e){return{frame:t.input[e],value:c()}};break;case"CUBICSPLINE":h=function(e){return{frame:t.input[e],inTangent:c(),value:c(),outTangent:c()}}}for(var f=new Array(t.input.length),p=0;p<t.input.length;p++)f[p]=h(p);if("influence"===n)for(var _=function(e){var t=new r.Animation(a.name+"_channel"+a.targetedAnimations.length,n,1,o);t.setKeys(f.map(function(t){return{frame:t.frame,inTangent:t.inTangent?t.inTangent[e]:void 0,value:t.value[e],outTangent:t.outTangent?t.outTangent[e]:void 0}})),u._forEachPrimitive(l,function(n){var r=n.morphTargetManager.getTarget(e),i=t.clone();r.animations.push(i),a.addTargetedAnimation(i,r)})},m=0;m<l._numMorphTargets;m++)_(m);else{var g=new r.Animation(a.name+"_channel"+a.targetedAnimations.length,n,1,o);g.setKeys(f),null!=s&&null!=s.animations?(s.animations.push(g),a.addTargetedAnimation(g,s)):(l._babylonTransformNode.animations.push(g),a.addTargetedAnimation(g,l._babylonTransformNode))}})},e.prototype._loadAnimationSamplerAsync=function(e,t){if(t._data)return t._data;var n=t.interpolation||"LINEAR";switch(n){case"STEP":case"LINEAR":case"CUBICSPLINE":break;default:throw new Error(e+"/interpolation: Invalid value ("+t.interpolation+")")}var r=o.Get(e+"/input",this._gltf.accessors,t.input),i=o.Get(e+"/output",this._gltf.accessors,t.output);return t._data=Promise.all([this._loadFloatAccessorAsync("/accessors/"+r.index,r),this._loadFloatAccessorAsync("/accessors/"+i.index,i)]).then(function(e){return{input:e[0],interpolation:n,output:e[1]}}),t._data},e.prototype._loadBufferAsync=function(e,t){if(t._data)return t._data;if(!t.uri)throw new Error(e+"/uri: Value is missing");return t._data=this.loadUriAsync(e+"/uri",t,t.uri),t._data},e.prototype.loadBufferViewAsync=function(e,t){if(t._data)return t._data;var n=o.Get(e+"/buffer",this._gltf.buffers,t.buffer);return t._data=this._loadBufferAsync("/buffers/"+n.index,n).then(function(n){try{return new Uint8Array(n.buffer,n.byteOffset+(t.byteOffset||0),t.byteLength)}catch(t){throw new Error(e+": "+t.message)}}),t._data},e.prototype._loadIndicesAccessorAsync=function(t,n){if("SCALAR"!==n.type)throw new Error(t+"/type: Invalid value "+n.type);if(5121!==n.componentType&&5123!==n.componentType&&5125!==n.componentType)throw new Error(t+"/componentType: Invalid value "+n.componentType);if(n._data)return n._data;var r=o.Get(t+"/bufferView",this._gltf.bufferViews,n.bufferView);return n._data=this.loadBufferViewAsync("/bufferViews/"+r.index,r).then(function(r){return e._GetTypedArray(t,n.componentType,r,n.byteOffset,n.count)}),n._data},e.prototype._loadFloatAccessorAsync=function(t,n){var r=this;if(5126!==n.componentType)throw new Error("Invalid component type "+n.componentType);if(n._data)return n._data;var i=e._GetNumComponents(t,n.type),a=i*n.count;if(null==n.bufferView)n._data=Promise.resolve(new Float32Array(a));else{var s=o.Get(t+"/bufferView",this._gltf.bufferViews,n.bufferView);n._data=this.loadBufferViewAsync("/bufferViews/"+s.index,s).then(function(r){return e._GetTypedArray(t,n.componentType,r,n.byteOffset,a)})}if(n.sparse){var u=n.sparse;n._data=n._data.then(function(a){var s=a,l=o.Get(t+"/sparse/indices/bufferView",r._gltf.bufferViews,u.indices.bufferView),c=o.Get(t+"/sparse/values/bufferView",r._gltf.bufferViews,u.values.bufferView);return Promise.all([r.loadBufferViewAsync("/bufferViews/"+l.index,l),r.loadBufferViewAsync("/bufferViews/"+c.index,c)]).then(function(r){for(var o=r[1],a=e._GetTypedArray(t+"/sparse/indices",u.indices.componentType,r[0],u.indices.byteOffset,u.count),l=e._GetTypedArray(t+"/sparse/values",n.componentType,o,u.values.byteOffset,i*u.count),c=0,h=0;h<a.length;h++)for(var d=a[h]*i,f=0;f<i;f++)s[d++]=l[c++];return s})})}return n._data},e.prototype._loadVertexBufferViewAsync=function(e,t){var n=this;return e._babylonBuffer?e._babylonBuffer:(e._babylonBuffer=this.loadBufferViewAsync("/bufferViews/"+e.index,e).then(function(e){return new r.Buffer(n._babylonScene.getEngine(),e,!1)}),e._babylonBuffer)},e.prototype._loadVertexAccessorAsync=function(t,n,i){var a=this;if(n._babylonVertexBuffer)return n._babylonVertexBuffer;if(n.sparse)n._babylonVertexBuffer=this._loadFloatAccessorAsync("/accessors/"+n.index,n).then(function(e){return new r.VertexBuffer(a._babylonScene.getEngine(),e,i,!1)});else if(n.byteOffset&&n.byteOffset%r.VertexBuffer.GetTypeByteLength(n.componentType)!=0)r.Tools.Warn("Accessor byte offset is not a multiple of component type byte length"),n._babylonVertexBuffer=this._loadFloatAccessorAsync("/accessors/"+n.index,n).then(function(e){return new r.VertexBuffer(a._babylonScene.getEngine(),e,i,!1)});else{var s=o.Get(t+"/bufferView",this._gltf.bufferViews,n.bufferView);n._babylonVertexBuffer=this._loadVertexBufferViewAsync(s,i).then(function(o){var u=e._GetNumComponents(t,n.type);return new r.VertexBuffer(a._babylonScene.getEngine(),o,i,!1,!1,s.byteStride,!1,n.byteOffset,u,n.componentType,n.normalized,!0)})}return n._babylonVertexBuffer},e.prototype._loadMaterialMetallicRoughnessPropertiesAsync=function(e,t,n){if(!(n instanceof r.PBRMaterial))throw new Error(e+": Material type not supported");var i=new Array;return t&&(t.baseColorFactor?(n.albedoColor=r.Color3.FromArray(t.baseColorFactor),n.alpha=t.baseColorFactor[3]):n.albedoColor=r.Color3.White(),n.metallic=null==t.metallicFactor?1:t.metallicFactor,n.roughness=null==t.roughnessFactor?1:t.roughnessFactor,t.baseColorTexture&&i.push(this.loadTextureInfoAsync(e+"/baseColorTexture",t.baseColorTexture,function(e){e.name=n.name+" (Base Color)",n.albedoTexture=e})),t.metallicRoughnessTexture&&(i.push(this.loadTextureInfoAsync(e+"/metallicRoughnessTexture",t.metallicRoughnessTexture,function(e){e.name=n.name+" (Metallic Roughness)",n.metallicTexture=e})),n.useMetallnessFromMetallicTextureBlue=!0,n.useRoughnessFromMetallicTextureGreen=!0,n.useRoughnessFromMetallicTextureAlpha=!1)),Promise.all(i).then(function(){})},e.prototype._loadMaterialAsync=function(t,n,r,i,o){void 0===o&&(o=function(){});var a=this._extensionsLoadMaterialAsync(t,n,r,i,o);if(a)return a;n._data=n._data||{};var s=n._data[i];if(!s){this.logOpen(t+" "+(n.name||""));var u=this.createMaterial(t,n,i);s={babylonMaterial:u,babylonMeshes:[],promise:this.loadMaterialPropertiesAsync(t,n,u)},n._data[i]=s,e.AddPointerMetadata(u,t),this._parent.onMaterialLoadedObservable.notifyObservers(u),this.logClose()}return s.babylonMeshes.push(r),r.onDisposeObservable.addOnce(function(){var e=s.babylonMeshes.indexOf(r);-1!==e&&s.babylonMeshes.splice(e,1)}),o(s.babylonMaterial),s.promise.then(function(){return s.babylonMaterial})},e.prototype._createDefaultMaterial=function(e,t){var n=new r.PBRMaterial(e,this._babylonScene);return n.sideOrientation=this._babylonScene.useRightHandedSystem?r.Material.CounterClockWiseSideOrientation:r.Material.ClockWiseSideOrientation,n.fillMode=t,n.enableSpecularAntiAliasing=!0,n.useRadianceOverAlpha=!this._parent.transparencyAsCoverage,n.useSpecularOverAlpha=!this._parent.transparencyAsCoverage,n.transparencyMode=r.PBRMaterial.PBRMATERIAL_OPAQUE,n.metallic=1,n.roughness=1,n},e.prototype.createMaterial=function(e,t,n){return this._extensionsCreateMaterial(e,t,n)||this._createDefaultMaterial(t.name||"material"+t.index,n)},e.prototype.loadMaterialPropertiesAsync=function(e,t,n){var r=this._extensionsLoadMaterialPropertiesAsync(e,t,n);if(r)return r;var i=new Array;return i.push(this.loadMaterialBasePropertiesAsync(e,t,n)),t.pbrMetallicRoughness&&i.push(this._loadMaterialMetallicRoughnessPropertiesAsync(e+"/pbrMetallicRoughness",t.pbrMetallicRoughness,n)),this.loadMaterialAlphaProperties(e,t,n),Promise.all(i).then(function(){})},e.prototype.loadMaterialBasePropertiesAsync=function(e,t,n){if(!(n instanceof r.PBRMaterial))throw new Error(e+": Material type not supported");var i=new Array;return n.emissiveColor=t.emissiveFactor?r.Color3.FromArray(t.emissiveFactor):new r.Color3(0,0,0),t.doubleSided&&(n.backFaceCulling=!1,n.twoSidedLighting=!0),t.normalTexture&&(i.push(this.loadTextureInfoAsync(e+"/normalTexture",t.normalTexture,function(e){e.name=n.name+" (Normal)",n.bumpTexture=e})),n.invertNormalMapX=!this._babylonScene.useRightHandedSystem,n.invertNormalMapY=this._babylonScene.useRightHandedSystem,null!=t.normalTexture.scale&&(n.bumpTexture.level=t.normalTexture.scale),n.forceIrradianceInFragment=!0),t.occlusionTexture&&(i.push(this.loadTextureInfoAsync(e+"/occlusionTexture",t.occlusionTexture,function(e){e.name=n.name+" (Occlusion)",n.ambientTexture=e})),n.useAmbientInGrayScale=!0,null!=t.occlusionTexture.strength&&(n.ambientTextureStrength=t.occlusionTexture.strength)),t.emissiveTexture&&i.push(this.loadTextureInfoAsync(e+"/emissiveTexture",t.emissiveTexture,function(e){e.name=n.name+" (Emissive)",n.emissiveTexture=e})),Promise.all(i).then(function(){})},e.prototype.loadMaterialAlphaProperties=function(e,t,n){if(!(n instanceof r.PBRMaterial))throw new Error(e+": Material type not supported");switch(t.alphaMode||"OPAQUE"){case"OPAQUE":n.transparencyMode=r.PBRMaterial.PBRMATERIAL_OPAQUE;break;case"MASK":n.transparencyMode=r.PBRMaterial.PBRMATERIAL_ALPHATEST,n.alphaCutOff=null==t.alphaCutoff?.5:t.alphaCutoff,n.albedoTexture&&(n.albedoTexture.hasAlpha=!0);break;case"BLEND":n.transparencyMode=r.PBRMaterial.PBRMATERIAL_ALPHABLEND,n.albedoTexture&&(n.albedoTexture.hasAlpha=!0,n.useAlphaFromAlbedoTexture=!0);break;default:throw new Error(e+"/alphaMode: Invalid value ("+t.alphaMode+")")}},e.prototype.loadTextureInfoAsync=function(t,n,r){var i=this;void 0===r&&(r=function(){});var a=this._extensionsLoadTextureInfoAsync(t,n,r);if(a)return a;this.logOpen(""+t);var s=o.Get(t+"/index",this._gltf.textures,n.index),u=this._loadTextureAsync("/textures/"+n.index,s,function(o){o.coordinatesIndex=n.texCoord||0,e.AddPointerMetadata(o,t),i._parent.onTextureLoadedObservable.notifyObservers(o),r(o)});return this.logClose(),u},e.prototype._loadTextureAsync=function(t,n,i){var a=this;void 0===i&&(i=function(){});var s=new Array;this.logOpen(t+" "+(n.name||""));var u=null==n.sampler?e._DefaultSampler:o.Get(t+"/sampler",this._gltf.samplers,n.sampler),l=this._loadSampler("/samplers/"+u.index,u),c=o.Get(t+"/source",this._gltf.images,n.source),h=null;c.uri&&(r.Tools.IsBase64(c.uri)?h=c.uri:this._babylonScene.getEngine().textureFormatInUse&&(h=this._rootUrl+c.uri));var d=new r.Deferred,f=new r.Texture(h,this._babylonScene,l.noMipMaps,!1,l.samplingMode,function(){a._disposed||d.resolve()},function(e,n){a._disposed||d.reject(new Error(t+": "+(n&&n.message?n.message:e||"Failed to load texture")))});return s.push(d.promise),h||s.push(this.loadImageAsync("/images/"+c.index,c).then(function(e){f.updateURL("data:"+a._uniqueRootUrl+(c.uri||a._fileName+"#image"+c.index),new Blob([e],{type:c.mimeType}))})),f.wrapU=l.wrapU,f.wrapV=l.wrapV,i(f),this.logClose(),Promise.all(s).then(function(){return f})},e.prototype._loadSampler=function(t,n){return n._data||(n._data={noMipMaps:9728===n.minFilter||9729===n.minFilter,samplingMode:e._GetTextureSamplingMode(t,n),wrapU:e._GetTextureWrapMode(t+"/wrapS",n.wrapS),wrapV:e._GetTextureWrapMode(t+"/wrapT",n.wrapT)}),n._data},e.prototype.loadImageAsync=function(e,t){if(!t._data){if(this.logOpen(e+" "+(t.name||"")),t.uri)t._data=this.loadUriAsync(e+"/uri",t,t.uri);else{var n=o.Get(e+"/bufferView",this._gltf.bufferViews,t.bufferView);t._data=this.loadBufferViewAsync("/bufferViews/"+n.index,n)}this.logClose()}return t._data},e.prototype.loadUriAsync=function(t,n,o){var a=this,s=this._extensionsLoadUriAsync(t,n,o);if(s)return s;if(!e._ValidateUri(o))throw new Error(t+": '"+o+"' is invalid");if(r.Tools.IsBase64(o)){var u=new Uint8Array(r.Tools.DecodeBase64(o));return this.log("Decoded "+o.substr(0,64)+"... ("+u.length+" bytes)"),Promise.resolve(u)}return this.log("Loading "+o),this._parent.preprocessUrlAsync(this._rootUrl+o).then(function(e){return new Promise(function(n,s){if(!a._disposed){var u=r.Tools.LoadFile(e,function(e){if(!a._disposed){var t=new Uint8Array(e);a.log("Loaded "+o+" ("+t.length+" bytes)"),n(t)}},function(e){if(!a._disposed&&(u&&(u._lengthComputable=e.lengthComputable,u._loaded=e.loaded,u._total=e.total),a._state===i.GLTFLoaderState.LOADING))try{a._onProgress()}catch(e){s(e)}},a._babylonScene.offlineProvider,!0,function(e,n){a._disposed||s(new r.LoadFileError(t+": Failed to load '"+o+"'"+(e?": "+e.status+" "+e.statusText:""),e))});a._requests.push(u)}})})},e.prototype._onProgress=function(){if(this._progressCallback){for(var e=!0,t=0,n=0,i=0,o=this._requests;i<o.length;i++){var a=o[i];if(void 0===a._lengthComputable||void 0===a._loaded||void 0===a._total)return;e=e&&a._lengthComputable,t+=a._loaded,n+=a._total}this._progressCallback(new r.SceneLoaderProgressEvent(e,t,e?n:0))}},e.AddPointerMetadata=function(e,t){var n=e.metadata=e.metadata||{},r=n.gltf=n.gltf||{};(r.pointers=r.pointers||[]).push(t)},e._GetTextureWrapMode=function(e,t){switch(t=null==t?10497:t){case 33071:return r.Texture.CLAMP_ADDRESSMODE;case 33648:return r.Texture.MIRROR_ADDRESSMODE;case 10497:return r.Texture.WRAP_ADDRESSMODE;default:return r.Tools.Warn(e+": Invalid value ("+t+")"),r.Texture.WRAP_ADDRESSMODE}},e._GetTextureSamplingMode=function(e,t){var n=null==t.magFilter?9729:t.magFilter,i=null==t.minFilter?9987:t.minFilter;if(9729===n)switch(i){case 9728:return r.Texture.LINEAR_NEAREST;case 9729:return r.Texture.LINEAR_LINEAR;case 9984:return r.Texture.LINEAR_NEAREST_MIPNEAREST;case 9985:return r.Texture.LINEAR_LINEAR_MIPNEAREST;case 9986:return r.Texture.LINEAR_NEAREST_MIPLINEAR;case 9987:return r.Texture.LINEAR_LINEAR_MIPLINEAR;default:return r.Tools.Warn(e+"/minFilter: Invalid value ("+i+")"),r.Texture.LINEAR_LINEAR_MIPLINEAR}else switch(9728!==n&&r.Tools.Warn(e+"/magFilter: Invalid value ("+n+")"),i){case 9728:return r.Texture.NEAREST_NEAREST;case 9729:return r.Texture.NEAREST_LINEAR;case 9984:return r.Texture.NEAREST_NEAREST_MIPNEAREST;case 9985:return r.Texture.NEAREST_LINEAR_MIPNEAREST;case 9986:return r.Texture.NEAREST_NEAREST_MIPLINEAR;case 9987:return r.Texture.NEAREST_LINEAR_MIPLINEAR;default:return r.Tools.Warn(e+"/minFilter: Invalid value ("+i+")"),r.Texture.NEAREST_NEAREST_MIPNEAREST}},e._GetTypedArray=function(e,t,n,r,i){var o=n.buffer;r=n.byteOffset+(r||0);try{switch(t){case 5120:return new Int8Array(o,r,i);case 5121:return new Uint8Array(o,r,i);case 5122:return new Int16Array(o,r,i);case 5123:return new Uint16Array(o,r,i);case 5125:return new Uint32Array(o,r,i);case 5126:return new Float32Array(o,r,i);default:throw new Error("Invalid component type "+t)}}catch(t){throw new Error(e+": "+t)}},e._GetNumComponents=function(e,t){switch(t){case"SCALAR":return 1;case"VEC2":return 2;case"VEC3":return 3;case"VEC4":case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16}throw new Error(e+": Invalid type ("+t+")")},e._ValidateUri=function(e){return r.Tools.IsBase64(e)||-1===e.indexOf("..")},e._GetDrawMode=function(e,t){switch(null==t&&(t=4),t){case 0:return r.Material.PointListDrawMode;case 1:return r.Material.LineListDrawMode;case 2:return r.Material.LineLoopDrawMode;case 3:return r.Material.LineStripDrawMode;case 4:return r.Material.TriangleFillMode;case 5:return r.Material.TriangleStripDrawMode;case 6:return r.Material.TriangleFanDrawMode}throw new Error(e+": Invalid mesh primitive mode ("+t+")")},e.prototype._compileMaterialsAsync=function(){var e=this;this._parent._startPerformanceCounter("Compile materials");var t=new Array;if(this._gltf.materials)for(var n=0,r=this._gltf.materials;n<r.length;n++){var i=r[n];if(i._data)for(var o in i._data)for(var a=i._data[o],s=0,u=a.babylonMeshes;s<u.length;s++){var l=u[s];l.computeWorldMatrix(!0);var c=a.babylonMaterial;t.push(c.forceCompilationAsync(l)),this._parent.useClipPlane&&t.push(c.forceCompilationAsync(l,{clipPlane:!0}))}}return Promise.all(t).then(function(){e._parent._endPerformanceCounter("Compile materials")})},e.prototype._compileShadowGeneratorsAsync=function(){var e=this;this._parent._startPerformanceCounter("Compile shadow generators");for(var t=new Array,n=0,r=this._babylonScene.lights;n<r.length;n++){var i=r[n].getShadowGenerator();i&&t.push(i.forceCompilationAsync())}return Promise.all(t).then(function(){e._parent._endPerformanceCounter("Compile shadow generators")})},e.prototype._forEachExtensions=function(t){for(var n=0,r=e._ExtensionNames;n<r.length;n++){var i=this._extensions[r[n]];i.enabled&&t(i)}},e.prototype._applyExtensions=function(t,n,r){for(var i=0,o=e._ExtensionNames;i<o.length;i++){var a=o[i],s=this._extensions[a];if(s.enabled){var u=a+"."+n,l=t;l._activeLoaderExtensionFunctions=l._activeLoaderExtensionFunctions||{};var c=l._activeLoaderExtensionFunctions;if(!c[u]){c[u]=!0;try{var h=r(s);if(h)return h}finally{delete c[u]}}}}return null},e.prototype._extensionsOnLoading=function(){this._forEachExtensions(function(e){return e.onLoading&&e.onLoading()})},e.prototype._extensionsOnReady=function(){this._forEachExtensions(function(e){return e.onReady&&e.onReady()})},e.prototype._extensionsLoadSceneAsync=function(e,t){return this._applyExtensions(t,"loadScene",function(n){return n.loadSceneAsync&&n.loadSceneAsync(e,t)})},e.prototype._extensionsLoadNodeAsync=function(e,t,n){return this._applyExtensions(t,"loadNode",function(r){return r.loadNodeAsync&&r.loadNodeAsync(e,t,n)})},e.prototype._extensionsLoadCameraAsync=function(e,t,n){return this._applyExtensions(t,"loadCamera",function(r){return r.loadCameraAsync&&r.loadCameraAsync(e,t,n)})},e.prototype._extensionsLoadVertexDataAsync=function(e,t,n){return this._applyExtensions(t,"loadVertexData",function(r){return r._loadVertexDataAsync&&r._loadVertexDataAsync(e,t,n)})},e.prototype._extensionsLoadMeshPrimitiveAsync=function(e,t,n,r,i,o){return this._applyExtensions(i,"loadMeshPrimitive",function(a){return a._loadMeshPrimitiveAsync&&a._loadMeshPrimitiveAsync(e,t,n,r,i,o)})},e.prototype._extensionsLoadMaterialAsync=function(e,t,n,r,i){return this._applyExtensions(t,"loadMaterial",function(o){return o._loadMaterialAsync&&o._loadMaterialAsync(e,t,n,r,i)})},e.prototype._extensionsCreateMaterial=function(e,t,n){return this._applyExtensions(t,"createMaterial",function(r){return r.createMaterial&&r.createMaterial(e,t,n)})},e.prototype._extensionsLoadMaterialPropertiesAsync=function(e,t,n){return this._applyExtensions(t,"loadMaterialProperties",function(r){return r.loadMaterialPropertiesAsync&&r.loadMaterialPropertiesAsync(e,t,n)})},e.prototype._extensionsLoadTextureInfoAsync=function(e,t,n){return this._applyExtensions(t,"loadTextureInfo",function(r){return r.loadTextureInfoAsync&&r.loadTextureInfoAsync(e,t,n)})},e.prototype._extensionsLoadAnimationAsync=function(e,t){return this._applyExtensions(t,"loadAnimation",function(n){return n.loadAnimationAsync&&n.loadAnimationAsync(e,t)})},e.prototype._extensionsLoadSkinAsync=function(e,t,n){return this._applyExtensions(n,"loadSkin",function(r){return r._loadSkinAsync&&r._loadSkinAsync(e,t,n)})},e.prototype._extensionsLoadUriAsync=function(e,t,n){return this._applyExtensions(t,"loadUri",function(r){return r._loadUriAsync&&r._loadUriAsync(e,t,n)})},e.LoadExtensionAsync=function(e,t,n,r){if(!t.extensions)return null;var i=t.extensions[n];return i?r(e+"/extensions/"+n,i):null},e.LoadExtraAsync=function(e,t,n,r){if(!t.extras)return null;var i=t.extras[n];return i?r(e+"/extras/"+n,i):null},e.prototype.logOpen=function(e){this._parent._logOpen(e)},e.prototype.logClose=function(){this._parent._logClose()},e.prototype.log=function(e){this._parent._log(e)},e.prototype.startPerformanceCounter=function(e){this._parent._startPerformanceCounter(e)},e.prototype.endPerformanceCounter=function(e){this._parent._endPerformanceCounter(e)},e._DefaultSampler={index:-1},e._ExtensionNames=new Array,e._ExtensionFactories={},e}();i.GLTFFileLoader._CreateGLTF2Loader=function(e){return new a(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"GLTFLoaderCoordinateSystemMode",function(){return r}),n.d(t,"GLTFLoaderAnimationStartMode",function(){return i}),n.d(t,"GLTFLoaderState",function(){return o}),n.d(t,"GLTFFileLoader",function(){return s});var r,i,o,a=n(0);!function(e){e[e.AUTO=0]="AUTO",e[e.FORCE_RIGHT_HANDED=1]="FORCE_RIGHT_HANDED"}(r||(r={})),function(e){e[e.NONE=0]="NONE",e[e.FIRST=1]="FIRST",e[e.ALL=2]="ALL"}(i||(i={})),function(e){e[e.LOADING=0]="LOADING",e[e.READY=1]="READY",e[e.COMPLETE=2]="COMPLETE"}(o||(o={}));var s=function(){function e(){this.onParsedObservable=new a.Observable,this.coordinateSystemMode=r.AUTO,this.animationStartMode=i.FIRST,this.compileMaterials=!1,this.useClipPlane=!1,this.compileShadowGenerators=!1,this.transparencyAsCoverage=!1,this.preprocessUrlAsync=function(e){return Promise.resolve(e)},this.onMeshLoadedObservable=new a.Observable,this.onTextureLoadedObservable=new a.Observable,this.onMaterialLoadedObservable=new a.Observable,this.onCameraLoadedObservable=new a.Observable,this.onCompleteObservable=new a.Observable,this.onErrorObservable=new a.Observable,this.onDisposeObservable=new a.Observable,this.onExtensionLoadedObservable=new a.Observable,this.validate=!1,this.onValidatedObservable=new a.Observable,this._loader=null,this.name="gltf",this.extensions={".gltf":{isBinary:!1},".glb":{isBinary:!0}},this._logIndentLevel=0,this._loggingEnabled=!1,this._log=this._logDisabled,this._capturePerformanceCounters=!1,this._startPerformanceCounter=this._startPerformanceCounterDisabled,this._endPerformanceCounter=this._endPerformanceCounterDisabled}return Object.defineProperty(e.prototype,"onParsed",{set:function(e){this._onParsedObserver&&this.onParsedObservable.remove(this._onParsedObserver),this._onParsedObserver=this.onParsedObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onMeshLoaded",{set:function(e){this._onMeshLoadedObserver&&this.onMeshLoadedObservable.remove(this._onMeshLoadedObserver),this._onMeshLoadedObserver=this.onMeshLoadedObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onTextureLoaded",{set:function(e){this._onTextureLoadedObserver&&this.onTextureLoadedObservable.remove(this._onTextureLoadedObserver),this._onTextureLoadedObserver=this.onTextureLoadedObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onMaterialLoaded",{set:function(e){this._onMaterialLoadedObserver&&this.onMaterialLoadedObservable.remove(this._onMaterialLoadedObserver),this._onMaterialLoadedObserver=this.onMaterialLoadedObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onCameraLoaded",{set:function(e){this._onCameraLoadedObserver&&this.onCameraLoadedObservable.remove(this._onCameraLoadedObserver),this._onCameraLoadedObserver=this.onCameraLoadedObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onComplete",{set:function(e){this._onCompleteObserver&&this.onCompleteObservable.remove(this._onCompleteObserver),this._onCompleteObserver=this.onCompleteObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onError",{set:function(e){this._onErrorObserver&&this.onErrorObservable.remove(this._onErrorObserver),this._onErrorObserver=this.onErrorObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onDispose",{set:function(e){this._onDisposeObserver&&this.onDisposeObservable.remove(this._onDisposeObserver),this._onDisposeObserver=this.onDisposeObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onExtensionLoaded",{set:function(e){this._onExtensionLoadedObserver&&this.onExtensionLoadedObservable.remove(this._onExtensionLoadedObserver),this._onExtensionLoadedObserver=this.onExtensionLoadedObservable.add(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loggingEnabled",{get:function(){return this._loggingEnabled},set:function(e){this._loggingEnabled!==e&&(this._loggingEnabled=e,this._log=this._loggingEnabled?this._logEnabled:this._logDisabled)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"capturePerformanceCounters",{get:function(){return this._capturePerformanceCounters},set:function(e){this._capturePerformanceCounters!==e&&(this._capturePerformanceCounters=e,this._capturePerformanceCounters?(this._startPerformanceCounter=this._startPerformanceCounterEnabled,this._endPerformanceCounter=this._endPerformanceCounterEnabled):(this._startPerformanceCounter=this._startPerformanceCounterDisabled,this._endPerformanceCounter=this._endPerformanceCounterDisabled))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"onValidated",{set:function(e){this._onValidatedObserver&&this.onValidatedObservable.remove(this._onValidatedObserver),this._onValidatedObserver=this.onValidatedObservable.add(e)},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._loader&&(this._loader.dispose(),this._loader=null),this._clear(),this.onDisposeObservable.notifyObservers(void 0),this.onDisposeObservable.clear()},e.prototype._clear=function(){this.preprocessUrlAsync=function(e){return Promise.resolve(e)},this.onMeshLoadedObservable.clear(),this.onTextureLoadedObservable.clear(),this.onMaterialLoadedObservable.clear(),this.onCameraLoadedObservable.clear(),this.onCompleteObservable.clear(),this.onExtensionLoadedObservable.clear()},e.prototype.importMeshAsync=function(e,t,n,r,i,o){var a=this;return this._parseAsync(t,n,r,o).then(function(n){return a._log("Loading "+(o||"")),a._loader=a._getLoader(n),a._loader.importMeshAsync(e,t,n,r,i,o)})},e.prototype.loadAsync=function(e,t,n,r,i){var o=this;return this._parseAsync(e,t,n,i).then(function(t){return o._log("Loading "+(i||"")),o._loader=o._getLoader(t),o._loader.loadAsync(e,t,n,r,i)})},e.prototype.loadAssetContainerAsync=function(e,t,n,r,i){var o=this;return this._parseAsync(e,t,n,i).then(function(t){o._log("Loading "+(i||"")),o._loader=o._getLoader(t);var s=[];o.onMaterialLoadedObservable.add(function(e){s.push(e)});var u=[];return o.onTextureLoadedObservable.add(function(e){u.push(e)}),o._loader.importMeshAsync(null,e,t,n,r,i).then(function(t){var n=new a.AssetContainer(e);return Array.prototype.push.apply(n.meshes,t.meshes),Array.prototype.push.apply(n.particleSystems,t.particleSystems),Array.prototype.push.apply(n.skeletons,t.skeletons),Array.prototype.push.apply(n.animationGroups,t.animationGroups),Array.prototype.push.apply(n.materials,s),Array.prototype.push.apply(n.textures,u),n.removeAllFromScene(),n})})},e.prototype.canDirectLoad=function(e){return-1!==e.indexOf("scene")&&-1!==e.indexOf("node")},e.prototype.createPlugin=function(){return new e},Object.defineProperty(e.prototype,"loaderState",{get:function(){return this._loader?this._loader.state:null},enumerable:!0,configurable:!0}),e.prototype.whenCompleteAsync=function(){var e=this;return new Promise(function(t,n){e.onCompleteObservable.addOnce(function(){t()}),e.onErrorObservable.addOnce(function(e){n(e)})})},e.prototype._parseAsync=function(e,t,n,r){var i=this;return Promise.resolve().then(function(){return i._validateAsync(e,t,n,r).then(function(){var e=t instanceof ArrayBuffer?i._unpackBinary(t):{json:t,bin:null};i._startPerformanceCounter("Parse JSON"),i._log("JSON length: "+e.json.length);var n={json:JSON.parse(e.json),bin:e.bin};return i._endPerformanceCounter("Parse JSON"),i.onParsedObservable.notifyObservers(n),i.onParsedObservable.clear(),n})})},e.prototype._validateAsync=function(e,t,n,r){var i=this;if(!this.validate||"undefined"==typeof GLTFValidator)return Promise.resolve();this._startPerformanceCounter("Validate JSON");var o={externalResourceFunction:function(t){return i.preprocessUrlAsync(n+t).then(function(t){return e._loadFileAsync(t,!0,!0)}).then(function(e){return new Uint8Array(e)})}};return r&&"data:"!==r.substr(0,5)&&(o.uri="file:"===n?r:""+n+r),(t instanceof ArrayBuffer?GLTFValidator.validateBytes(new Uint8Array(t),o):GLTFValidator.validateString(t,o)).then(function(e){i._endPerformanceCounter("Validate JSON"),i.onValidatedObservable.notifyObservers(e),i.onValidatedObservable.clear()},function(e){i._endPerformanceCounter("Validate JSON"),a.Tools.Warn("Failed to validate: "+e),i.onValidatedObservable.clear()})},e.prototype._getLoader=function(t){var n=t.json.asset||{};this._log("Asset version: "+n.version),n.minVersion&&this._log("Asset minimum version: "+n.minVersion),n.generator&&this._log("Asset generator: "+n.generator);var r=e._parseVersion(n.version);if(!r)throw new Error("Invalid version: "+n.version);if(void 0!==n.minVersion){var i=e._parseVersion(n.minVersion);if(!i)throw new Error("Invalid minimum version: "+n.minVersion);if(e._compareVersion(i,{major:2,minor:0})>0)throw new Error("Incompatible minimum version: "+n.minVersion)}var o={1:e._CreateGLTF1Loader,2:e._CreateGLTF2Loader}[r.major];if(!o)throw new Error("Unsupported version: "+n.version);return o(this)},e.prototype._unpackBinary=function(e){this._startPerformanceCounter("Unpack binary"),this._log("Binary length: "+e.byteLength);var t=new u(e),n=t.readUint32();if(1179937895!==n)throw new Error("Unexpected magic: "+n);var r,i=t.readUint32();switch(this.loggingEnabled&&this._log("Binary version: "+i),i){case 1:r=this._unpackBinaryV1(t);break;case 2:r=this._unpackBinaryV2(t);break;default:throw new Error("Unsupported version: "+i)}return this._endPerformanceCounter("Unpack binary"),r},e.prototype._unpackBinaryV1=function(t){var n=t.readUint32();if(n!=t.getLength())throw new Error("Length in header does not match actual data length: "+n+" != "+t.getLength());var r,i=t.readUint32(),o=t.readUint32();switch(o){case 0:r=e._decodeBufferToText(t.readUint8Array(i));break;default:throw new Error("Unexpected content format: "+o)}var a=t.getLength()-t.getPosition();return{json:r,bin:t.readUint8Array(a)}},e.prototype._unpackBinaryV2=function(t){var n=1313821514,r=t.readUint32();if(r!==t.getLength())throw new Error("Length in header does not match actual data length: "+r+" != "+t.getLength());var i=t.readUint32();if(t.readUint32()!==n)throw new Error("First chunk format is not JSON");for(var o=e._decodeBufferToText(t.readUint8Array(i)),a=null;t.getPosition()<t.getLength();){var s=t.readUint32();switch(t.readUint32()){case n:throw new Error("Unexpected JSON chunk");case 5130562:a=t.readUint8Array(s);break;default:t.skipBytes(s)}}return{json:o,bin:a}},e._parseVersion=function(e){if("1.0"===e||"1.0.1"===e)return{major:1,minor:0};var t=(e+"").match(/^(\d+)\.(\d+)/);return t?{major:parseInt(t[1]),minor:parseInt(t[2])}:null},e._compareVersion=function(e,t){return e.major>t.major?1:e.major<t.major?-1:e.minor>t.minor?1:e.minor<t.minor?-1:0},e._decodeBufferToText=function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=e.byteLength,r=0;r<n;r++)t+=String.fromCharCode(e[r]);return t},e.prototype._logOpen=function(e){this._log(e),this._logIndentLevel++},e.prototype._logClose=function(){--this._logIndentLevel},e.prototype._logEnabled=function(t){var n=e._logSpaces.substr(0,2*this._logIndentLevel);a.Tools.Log(""+n+t)},e.prototype._logDisabled=function(e){},e.prototype._startPerformanceCounterEnabled=function(e){a.Tools.StartPerformanceCounter(e)},e.prototype._startPerformanceCounterDisabled=function(e){},e.prototype._endPerformanceCounterEnabled=function(e){a.Tools.EndPerformanceCounter(e)},e.prototype._endPerformanceCounterDisabled=function(e){},e.IncrementalLoading=!0,e.HomogeneousCoordinates=!1,e._logSpaces="                                ",e}(),u=function(){function e(e){this._arrayBuffer=e,this._dataView=new DataView(e),this._byteOffset=0}return e.prototype.getPosition=function(){return this._byteOffset},e.prototype.getLength=function(){return this._arrayBuffer.byteLength},e.prototype.readUint32=function(){var e=this._dataView.getUint32(this._byteOffset,!0);return this._byteOffset+=4,e},e.prototype.readUint8Array=function(e){var t=new Uint8Array(this._arrayBuffer,this._byteOffset,e);return this._byteOffset+=e,t},e.prototype.skipBytes=function(e){this._byteOffset+=e},e}();a.SceneLoader&&a.SceneLoader.RegisterPlugin(new s)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1),o="EXT_lights_image_based",a=function(){function e(e){this.name=o,this.enabled=!0,this._loader=e}return e.prototype.dispose=function(){delete this._loader,delete this._lights},e.prototype.onLoading=function(){var e=this._loader.gltf.extensions;e&&e[this.name]&&(this._lights=e[this.name].lights)},e.prototype.loadSceneAsync=function(e,t){var n=this;return i.b.LoadExtensionAsync(e,t,this.name,function(r,o){var a=new Array;a.push(n._loader.loadSceneAsync(e,t)),n._loader.logOpen(""+r);var s=i.a.Get(r+"/light",n._lights,o.light);return a.push(n._loadLightAsync("#/extensions/"+n.name+"/lights/"+o.light,s).then(function(e){n._loader.babylonScene.environmentTexture=e})),n._loader.logClose(),Promise.all(a).then(function(){})})},e.prototype._loadLightAsync=function(e,t){var n=this;if(!t._loaded){var o=new Array;this._loader.logOpen(""+e);for(var a=new Array(t.specularImages.length),s=function(n){var r=t.specularImages[n];a[n]=new Array(r.length);for(var s=function(t){var s=e+"/specularImages/"+n+"/"+t;u._loader.logOpen(""+s);var l=r[t],c=i.a.Get(s,u._loader.gltf.images,l);o.push(u._loader.loadImageAsync("#/images/"+l,c).then(function(e){a[n][t]=e})),u._loader.logClose()},l=0;l<r.length;l++)s(l)},u=this,l=0;l<t.specularImages.length;l++)s(l);this._loader.logClose(),t._loaded=Promise.all(o).then(function(){var e=new r.RawCubeTexture(n._loader.babylonScene,null,t.specularImageSize);if(t._babylonTexture=e,null!=t.intensity&&(e.level=t.intensity),t.rotation){var i=r.Quaternion.FromArray(t.rotation);n._loader.babylonScene.useRightHandedSystem||(i=r.Quaternion.Inverse(i)),r.Matrix.FromQuaternionToRef(i,e.getReflectionTextureMatrix())}var o=r.SphericalHarmonics.FromArray(t.irradianceCoefficients);o.scaleInPlace(t.intensity),o.convertIrradianceToLambertianRadiance();var s=r.SphericalPolynomial.FromHarmonics(o),u=(a.length-1)/r.Scalar.Log2(t.specularImageSize);return e.updateRGBDAsync(a,s,u)})}return t._loaded.then(function(){return t._babylonTexture})},e}();i.b.RegisterExtension(o,function(e){return new a(e)});var s="KHR_draco_mesh_compression",u=function(){function e(e){this.name=s,this.enabled=r.DracoCompression.DecoderAvailable,this._loader=e}return e.prototype.dispose=function(){delete this.dracoCompression,delete this._loader},e.prototype._loadVertexDataAsync=function(e,t,n){var o=this;return i.b.LoadExtensionAsync(e,t,this.name,function(a,s){if(null!=t.mode){if(5!==t.mode&&4!==t.mode)throw new Error(e+": Unsupported mode "+t.mode);if(5===t.mode)throw new Error(e+": Mode "+t.mode+" is not currently supported")}var u={},l=function(e,t){var r=s.attributes[e];null!=r&&(n._delayInfo=n._delayInfo||[],-1===n._delayInfo.indexOf(t)&&n._delayInfo.push(t),u[t]=r)};l("POSITION",r.VertexBuffer.PositionKind),l("NORMAL",r.VertexBuffer.NormalKind),l("TANGENT",r.VertexBuffer.TangentKind),l("TEXCOORD_0",r.VertexBuffer.UVKind),l("TEXCOORD_1",r.VertexBuffer.UV2Kind),l("JOINTS_0",r.VertexBuffer.MatricesIndicesKind),l("WEIGHTS_0",r.VertexBuffer.MatricesWeightsKind),l("COLOR_0",r.VertexBuffer.ColorKind);var c=i.a.Get(a,o._loader.gltf.bufferViews,s.bufferView);return c._dracoBabylonGeometry||(c._dracoBabylonGeometry=o._loader.loadBufferViewAsync("#/bufferViews/"+c.index,c).then(function(t){return(o.dracoCompression||r.DracoCompression.Default).decodeMeshAsync(t,u).then(function(e){var t=new r.Geometry(n.name,o._loader.babylonScene);return e.applyToGeometry(t),t}).catch(function(t){throw new Error(e+": "+t.message)})})),c._dracoBabylonGeometry})},e}();i.b.RegisterExtension(s,function(e){return new u(e)});var l,c="KHR_lights_punctual";!function(e){e.DIRECTIONAL="directional",e.POINT="point",e.SPOT="spot"}(l||(l={}));var h=function(){function e(e){this.name=c,this.enabled=!0,this._loader=e}return e.prototype.dispose=function(){delete this._loader,delete this._lights},e.prototype.onLoading=function(){var e=this._loader.gltf.extensions;e&&e[this.name]&&(this._lights=e[this.name].lights)},e.prototype.loadNodeAsync=function(e,t,n){var o=this;return i.b.LoadExtensionAsync(e,t,this.name,function(a,s){return o._loader.loadNodeAsync(e,t,function(e){var t,u=i.a.Get(a,o._lights,s.light),c=u.name||e.name;switch(u.type){case l.DIRECTIONAL:t=new r.DirectionalLight(c,r.Vector3.Backward(),o._loader.babylonScene);break;case l.POINT:t=new r.PointLight(c,r.Vector3.Zero(),o._loader.babylonScene);break;case l.SPOT:var h=new r.SpotLight(c,r.Vector3.Zero(),r.Vector3.Backward(),0,1,o._loader.babylonScene);h.angle=2*(u.spot&&u.spot.outerConeAngle||Math.PI/4),h.innerAngle=2*(u.spot&&u.spot.innerConeAngle||0),t=h;break;default:throw new Error(a+": Invalid light type ("+u.type+")")}t.falloffType=r.Light.FALLOFF_GLTF,t.diffuse=u.color?r.Color3.FromArray(u.color):r.Color3.White(),t.intensity=null==u.intensity?1:u.intensity,t.range=null==u.range?Number.MAX_VALUE:u.range,t.parent=e,i.b.AddPointerMetadata(t,a),n(e)})})},e}();i.b.RegisterExtension(c,function(e){return new h(e)});var d="KHR_materials_pbrSpecularGlossiness",f=function(){function e(e){this.name=d,this.enabled=!0,this._loader=e}return e.prototype.dispose=function(){delete this._loader},e.prototype.loadMaterialPropertiesAsync=function(e,t,n){var r=this;return i.b.LoadExtensionAsync(e,t,this.name,function(i,o){var a=new Array;return a.push(r._loader.loadMaterialBasePropertiesAsync(e,t,n)),a.push(r._loadSpecularGlossinessPropertiesAsync(i,t,o,n)),r._loader.loadMaterialAlphaProperties(e,t,n),Promise.all(a).then(function(){})})},e.prototype._loadSpecularGlossinessPropertiesAsync=function(e,t,n,i){if(!(i instanceof r.PBRMaterial))throw new Error(e+": Material type not supported");var o=new Array;return i.metallic=null,i.roughness=null,n.diffuseFactor?(i.albedoColor=r.Color3.FromArray(n.diffuseFactor),i.alpha=n.diffuseFactor[3]):i.albedoColor=r.Color3.White(),i.reflectivityColor=n.specularFactor?r.Color3.FromArray(n.specularFactor):r.Color3.White(),i.microSurface=null==n.glossinessFactor?1:n.glossinessFactor,n.diffuseTexture&&o.push(this._loader.loadTextureInfoAsync(e+"/diffuseTexture",n.diffuseTexture,function(e){e.name=i.name+" (Diffuse)",i.albedoTexture=e})),n.specularGlossinessTexture&&(o.push(this._loader.loadTextureInfoAsync(e+"/specularGlossinessTexture",n.specularGlossinessTexture,function(e){e.name=i.name+" (Specular Glossiness)",i.reflectivityTexture=e})),i.reflectivityTexture.hasAlpha=!0,i.useMicroSurfaceFromReflectivityMapAlpha=!0),Promise.all(o).then(function(){})},e}();i.b.RegisterExtension(d,function(e){return new f(e)});var p="KHR_materials_unlit",_=function(){function e(e){this.name=p,this.enabled=!0,this._loader=e}return e.prototype.dispose=function(){delete this._loader},e.prototype.loadMaterialPropertiesAsync=function(e,t,n){var r=this;return i.b.LoadExtensionAsync(e,t,this.name,function(){return r._loadUnlitPropertiesAsync(e,t,n)})},e.prototype._loadUnlitPropertiesAsync=function(e,t,n){if(!(n instanceof r.PBRMaterial))throw new Error(e+": Material type not supported");var i=new Array;n.unlit=!0;var o=t.pbrMetallicRoughness;return o&&(o.baseColorFactor?(n.albedoColor=r.Color3.FromArray(o.baseColorFactor),n.alpha=o.baseColorFactor[3]):n.albedoColor=r.Color3.White(),o.baseColorTexture&&i.push(this._loader.loadTextureInfoAsync(e+"/baseColorTexture",o.baseColorTexture,function(e){e.name=n.name+" (Base Color)",n.albedoTexture=e}))),t.doubleSided&&(n.backFaceCulling=!1,n.twoSidedLighting=!0),this._loader.loadMaterialAlphaProperties(e,t,n),Promise.all(i).then(function(){})},e}();i.b.RegisterExtension(p,function(e){return new _(e)});var m="KHR_texture_transform",g=function(){function e(e){this.name=m,this.enabled=!0,this._loader=e}return e.prototype.dispose=function(){delete this._loader},e.prototype.loadTextureInfoAsync=function(e,t,n){var o=this;return i.b.LoadExtensionAsync(e,t,this.name,function(i,a){return o._loader.loadTextureInfoAsync(e,t,function(e){if(!(e instanceof r.Texture))throw new Error(i+": Texture type not supported");a.offset&&(e.uOffset=a.offset[0],e.vOffset=a.offset[1]),e.uRotationCenter=0,e.vRotationCenter=0,a.rotation&&(e.wAng=-a.rotation),a.scale&&(e.uScale=a.scale[0],e.vScale=a.scale[1]),null!=a.texCoord&&(e.coordinatesIndex=a.texCoord),n(e)})})},e}();i.b.RegisterExtension(m,function(e){return new g(e)});var v="MSFT_audio_emitter",y=function(){function e(e){this.name=v,this.enabled=!0,this._loader=e}return e.prototype.dispose=function(){delete this._loader,delete this._clips,delete this._emitters},e.prototype.onLoading=function(){var e=this._loader.gltf.extensions;if(e&&e[this.name]){var t=e[this.name];this._clips=t.clips,this._emitters=t.emitters,i.a.Assign(this._clips),i.a.Assign(this._emitters)}},e.prototype.loadSceneAsync=function(e,t){var n=this;return i.b.LoadExtensionAsync(e,t,this.name,function(r,o){var a=new Array;a.push(n._loader.loadSceneAsync(e,t));for(var s=0,u=o.emitters;s<u.length;s++){var l=i.a.Get(r+"/emitters",n._emitters,u[s]);if(null!=l.refDistance||null!=l.maxDistance||null!=l.rolloffFactor||null!=l.distanceModel||null!=l.innerAngle||null!=l.outerAngle)throw new Error(r+": Direction or Distance properties are not allowed on emitters attached to a scene");a.push(n._loadEmitterAsync(r+"/emitters/"+l.index,l))}return Promise.all(a).then(function(){})})},e.prototype.loadNodeAsync=function(e,t,n){var o=this;return i.b.LoadExtensionAsync(e,t,this.name,function(e,a){var s=new Array;return o._loader.loadNodeAsync(e,t,function(t){for(var u=function(n){var a=i.a.Get(e+"/emitters",o._emitters,n);s.push(o._loadEmitterAsync(e+"/emitters/"+a.index,a).then(function(){for(var e=0,n=a._babylonSounds;e<n.length;e++){var i=n[e];i.attachToMesh(t),null==a.innerAngle&&null==a.outerAngle||(i.setLocalDirectionToMesh(r.Vector3.Forward()),i.setDirectionalCone(2*r.Tools.ToDegrees(null==a.innerAngle?Math.PI:a.innerAngle),2*r.Tools.ToDegrees(null==a.outerAngle?Math.PI:a.outerAngle),0))}}))},l=0,c=a.emitters;l<c.length;l++)u(c[l]);n(t)}).then(function(e){return Promise.all(s).then(function(){return e})})})},e.prototype.loadAnimationAsync=function(e,t){var n=this;return i.b.LoadExtensionAsync(e,t,this.name,function(r,o){return n._loader.loadAnimationAsync(e,t).then(function(a){var s=new Array;i.a.Assign(o.events);for(var u=0,l=o.events;u<l.length;u++){var c=l[u];s.push(n._loadAnimationEventAsync(r+"/events/"+c.index,e,t,c,a))}return Promise.all(s).then(function(){return a})})})},e.prototype._loadClipAsync=function(e,t){if(t._objectURL)return t._objectURL;var n;if(t.uri)n=this._loader.loadUriAsync(e,t,t.uri);else{var r=i.a.Get(e+"/bufferView",this._loader.gltf.bufferViews,t.bufferView);n=this._loader.loadBufferViewAsync("#/bufferViews/"+r.index,r)}return t._objectURL=n.then(function(e){return URL.createObjectURL(new Blob([e],{type:t.mimeType}))}),t._objectURL},e.prototype._loadEmitterAsync=function(e,t){var n=this;if(t._babylonSounds=t._babylonSounds||[],!t._babylonData){for(var o=new Array,a=t.name||"emitter"+t.index,s={loop:!1,autoplay:!1,volume:null==t.volume?1:t.volume},u=function(e){var u="#/extensions/"+l.name+"/clips",c=i.a.Get(u,l._clips,t.clips[e].clip);o.push(l._loadClipAsync(u+"/"+t.clips[e].clip,c).then(function(i){var o=t._babylonSounds[e]=new r.Sound(a,i,n._loader.babylonScene,null,s);o.refDistance=t.refDistance||1,o.maxDistance=t.maxDistance||256,o.rolloffFactor=t.rolloffFactor||1,o.distanceModel=t.distanceModel||"exponential",o._positionInEmitterSpace=!0}))},l=this,c=0;c<t.clips.length;c++)u(c);var h=Promise.all(o).then(function(){var e=t.clips.map(function(e){return e.weight||1}),n=new r.WeightedSound(t.loop||!1,t._babylonSounds,e);t.innerAngle&&(n.directionalConeInnerAngle=2*r.Tools.ToDegrees(t.innerAngle)),t.outerAngle&&(n.directionalConeOuterAngle=2*r.Tools.ToDegrees(t.outerAngle)),t.volume&&(n.volume=t.volume),t._babylonData.sound=n});t._babylonData={loaded:h}}return t._babylonData.loaded},e.prototype._getEventAction=function(e,t,n,r,i){switch(n){case"play":return function(e){t.play((i||0)+(e-r))};case"stop":return function(e){t.stop()};case"pause":return function(e){t.pause()};default:throw new Error(e+": Unsupported action "+n)}},e.prototype._loadAnimationEventAsync=function(e,t,n,o,a){var s=this;if(0==a.targetedAnimations.length)return Promise.resolve();var u=a.targetedAnimations[0],l=i.a.Get("#/extensions/"+this.name+"/emitters",this._emitters,o.emitter);return this._loadEmitterAsync(e,l).then(function(){var t=l._babylonData.sound;if(t){var n=new r.AnimationEvent(o.time,s._getEventAction(e,t,o.action,o.time,o.startOffset));u.animation.addEvent(n),a.onAnimationGroupEndObservable.add(function(){t.stop()}),a.onAnimationGroupPauseObservable.add(function(){t.pause()})}})},e}();i.b.RegisterExtension(v,function(e){return new y(e)});var b="MSFT_lod",T=function(){function e(e){this.name=b,this.enabled=!0,this.maxLODsToLoad=Number.MAX_VALUE,this.onNodeLODsLoadedObservable=new r.Observable,this.onMaterialLODsLoadedObservable=new r.Observable,this._nodeIndexLOD=null,this._nodeSignalLODs=new Array,this._nodePromiseLODs=new Array,this._materialIndexLOD=null,this._materialSignalLODs=new Array,this._materialPromiseLODs=new Array,this._loader=e}return e.prototype.dispose=function(){delete this._loader,this._nodeIndexLOD=null,this._nodeSignalLODs.length=0,this._nodePromiseLODs.length=0,this._materialIndexLOD=null,this._materialSignalLODs.length=0,this._materialPromiseLODs.length=0,this.onMaterialLODsLoadedObservable.clear(),this.onNodeLODsLoadedObservable.clear()},e.prototype.onReady=function(){for(var e=this,t=function(t){var r=Promise.all(n._nodePromiseLODs[t]).then(function(){0!==t&&e._loader.endPerformanceCounter("Node LOD "+t),e._loader.log("Loaded node LOD "+t),e.onNodeLODsLoadedObservable.notifyObservers(t),t!==e._nodePromiseLODs.length-1&&(e._loader.startPerformanceCounter("Node LOD "+(t+1)),e._nodeSignalLODs[t]&&e._nodeSignalLODs[t].resolve())});n._loader._completePromises.push(r)},n=this,r=0;r<this._nodePromiseLODs.length;r++)t(r);var i=function(t){var n=Promise.all(o._materialPromiseLODs[t]).then(function(){0!==t&&e._loader.endPerformanceCounter("Material LOD "+t),e._loader.log("Loaded material LOD "+t),e.onMaterialLODsLoadedObservable.notifyObservers(t),t!==e._materialPromiseLODs.length-1&&(e._loader.startPerformanceCounter("Material LOD "+(t+1)),e._materialSignalLODs[t]&&e._materialSignalLODs[t].resolve())});o._loader._completePromises.push(n)},o=this;for(r=0;r<this._materialPromiseLODs.length;r++)i(r)},e.prototype.loadNodeAsync=function(e,t,n){var o=this;return i.b.LoadExtensionAsync(e,t,this.name,function(e,n){var i,a=o._getLODs(e,t,o._loader.gltf.nodes,n.ids);o._loader.logOpen(""+e);for(var s=function(e){var t=a[e];0!==e&&(o._nodeIndexLOD=e,o._nodeSignalLODs[e]=o._nodeSignalLODs[e]||new r.Deferred);var n=o._loader.loadNodeAsync("#/nodes/"+t.index,t,function(e){e.setEnabled(!1)}).then(function(t){if(0!==e){var n=a[e-1];n._babylonTransformNode&&(n._babylonTransformNode.dispose(),delete n._babylonTransformNode,o._disposeUnusedMaterials())}return t.setEnabled(!0),t});0===e?i=n:o._nodeIndexLOD=null,o._nodePromiseLODs[e]=o._nodePromiseLODs[e]||[],o._nodePromiseLODs[e].push(n)},u=0;u<a.length;u++)s(u);return o._loader.logClose(),i})},e.prototype._loadMaterialAsync=function(e,t,n,r,o){var a=this;return this._nodeIndexLOD?null:i.b.LoadExtensionAsync(e,t,this.name,function(e,i){var s,u=a._getLODs(e,t,a._loader.gltf.materials,i.ids);a._loader.logOpen(""+e);for(var l=function(e){var t=u[e];0!==e&&(a._materialIndexLOD=e);var i=a._loader._loadMaterialAsync("#/materials/"+t.index,t,n,r,function(t){0===e&&o(t)}).then(function(t){if(0!==e){o(t);var n=u[e-1]._data;n[r]&&(n[r].babylonMaterial.dispose(),delete n[r])}return t});0===e?s=i:a._materialIndexLOD=null,a._materialPromiseLODs[e]=a._materialPromiseLODs[e]||[],a._materialPromiseLODs[e].push(i)},c=0;c<u.length;c++)l(c);return a._loader.logClose(),s})},e.prototype._loadUriAsync=function(e,t,n){var i=this;if(null!==this._materialIndexLOD){this._loader.log("deferred");var o=this._materialIndexLOD-1;return this._materialSignalLODs[o]=this._materialSignalLODs[o]||new r.Deferred,this._materialSignalLODs[o].promise.then(function(){return i._loader.loadUriAsync(e,t,n)})}return null!==this._nodeIndexLOD?(this._loader.log("deferred"),this._nodeSignalLODs[o=this._nodeIndexLOD-1]=this._nodeSignalLODs[o]||new r.Deferred,this._nodeSignalLODs[this._nodeIndexLOD-1].promise.then(function(){return i._loader.loadUriAsync(e,t,n)})):null},e.prototype._getLODs=function(e,t,n,r){if(this.maxLODsToLoad<=0)throw new Error("maxLODsToLoad must be greater than zero");for(var o=new Array,a=r.length-1;a>=0;a--)if(o.push(i.a.Get(e+"/ids/"+r[a],n,r[a])),o.length===this.maxLODsToLoad)return o;return o.push(t),o},e.prototype._disposeUnusedMaterials=function(){var e=this._loader.gltf.materials;if(e)for(var t=0,n=e;t<n.length;t++){var r=n[t];if(r._data)for(var i in r._data){var o=r._data[i];0===o.babylonMeshes.length&&(o.babylonMaterial.dispose(!1,!0),delete r._data[i])}}},e}();i.b.RegisterExtension(b,function(e){return new T(e)});var E="MSFT_minecraftMesh",x=function(){function e(e){this.name=E,this.enabled=!0,this._loader=e}return e.prototype.dispose=function(){delete this._loader},e.prototype.loadMaterialPropertiesAsync=function(e,t,n){var o=this;return i.b.LoadExtraAsync(e,t,this.name,function(i,a){if(a){if(!(n instanceof r.PBRMaterial))throw new Error(i+": Material type not supported");var s=o._loader.loadMaterialPropertiesAsync(e,t,n);return n.needAlphaBlending()&&(n.forceDepthWrite=!0,n.separateCullingPass=!0),n.backFaceCulling=n.forceDepthWrite,n.twoSidedLighting=!0,s}return null})},e}();i.b.RegisterExtension(E,function(e){return new x(e)});var M="MSFT_sRGBFactors",A=function(){function e(e){this.name=M,this.enabled=!0,this._loader=e}return e.prototype.dispose=function(){delete this._loader},e.prototype.loadMaterialPropertiesAsync=function(e,t,n){var o=this;return i.b.LoadExtraAsync(e,t,this.name,function(i,a){if(a){if(!(n instanceof r.PBRMaterial))throw new Error(i+": Material type not supported");var s=o._loader.loadMaterialPropertiesAsync(e,t,n);return n.albedoTexture||n.albedoColor.toLinearSpaceToRef(n.albedoColor),n.reflectivityTexture||n.reflectivityColor.toLinearSpaceToRef(n.reflectivityColor),s}return null})},e}();i.b.RegisterExtension(M,function(e){return new A(e)}),n.d(t,"EXT_lights_image_based",function(){return a}),n.d(t,"KHR_draco_mesh_compression",function(){return u}),n.d(t,"KHR_lights",function(){return h}),n.d(t,"KHR_materials_pbrSpecularGlossiness",function(){return f}),n.d(t,"KHR_materials_unlit",function(){return _}),n.d(t,"KHR_texture_transform",function(){return g}),n.d(t,"MSFT_audio_emitter",function(){return y}),n.d(t,"MSFT_lod",function(){return T}),n.d(t,"MSFT_minecraftMesh",function(){return x}),n.d(t,"MSFT_sRGBFactors",function(){return A})},function(e,t,n){"use strict";n.r(t);var r=n(1);n.d(t,"ArrayItem",function(){return r.a}),n.d(t,"GLTFLoader",function(){return r.b});var i=n(4);n.d(t,"EXT_lights_image_based",function(){return i.EXT_lights_image_based}),n.d(t,"KHR_draco_mesh_compression",function(){return i.KHR_draco_mesh_compression}),n.d(t,"KHR_lights",function(){return i.KHR_lights}),n.d(t,"KHR_materials_pbrSpecularGlossiness",function(){return i.KHR_materials_pbrSpecularGlossiness}),n.d(t,"KHR_materials_unlit",function(){return i.KHR_materials_unlit}),n.d(t,"KHR_texture_transform",function(){return i.KHR_texture_transform}),n.d(t,"MSFT_audio_emitter",function(){return i.MSFT_audio_emitter}),n.d(t,"MSFT_lod",function(){return i.MSFT_lod}),n.d(t,"MSFT_minecraftMesh",function(){return i.MSFT_minecraftMesh}),n.d(t,"MSFT_sRGBFactors",function(){return i.MSFT_sRGBFactors})},function(e,t,n){"use strict";n.r(t);var r,i,o,a,s,u,l,c,h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function d(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}!function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.FLOAT=5126]="FLOAT"}(r||(r={})),function(e){e[e.FRAGMENT=35632]="FRAGMENT",e[e.VERTEX=35633]="VERTEX"}(i||(i={})),function(e){e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D"}(o||(o={})),function(e){e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.REPEAT=10497]="REPEAT"}(a||(a={})),function(e){e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9728]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(s||(s={})),function(e){e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA"}(u||(u={})),function(e){e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK"}(l||(l={})),function(e){e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"}(c||(c={}));var f,p=n(0),_=function(){function e(){}return e.SetMatrix=function(e,t,n,r,i){var a=null;if("MODEL"===n.semantic?a=t.getWorldMatrix():"PROJECTION"===n.semantic?a=e.getProjectionMatrix():"VIEW"===n.semantic?a=e.getViewMatrix():"MODELVIEWINVERSETRANSPOSE"===n.semantic?a=p.Matrix.Transpose(t.getWorldMatrix().multiply(e.getViewMatrix()).invert()):"MODELVIEW"===n.semantic?a=t.getWorldMatrix().multiply(e.getViewMatrix()):"MODELVIEWPROJECTION"===n.semantic?a=t.getWorldMatrix().multiply(e.getTransformMatrix()):"MODELINVERSE"===n.semantic?a=t.getWorldMatrix().invert():"VIEWINVERSE"===n.semantic?a=e.getViewMatrix().invert():"PROJECTIONINVERSE"===n.semantic?a=e.getProjectionMatrix().invert():"MODELVIEWINVERSE"===n.semantic?a=t.getWorldMatrix().multiply(e.getViewMatrix()).invert():"MODELVIEWPROJECTIONINVERSE"===n.semantic?a=t.getWorldMatrix().multiply(e.getTransformMatrix()).invert():"MODELINVERSETRANSPOSE"===n.semantic&&(a=p.Matrix.Transpose(t.getWorldMatrix().invert())),a)switch(n.type){case o.FLOAT_MAT2:i.setMatrix2x2(r,p.Matrix.GetAsMatrix2x2(a));break;case o.FLOAT_MAT3:i.setMatrix3x3(r,p.Matrix.GetAsMatrix3x3(a));break;case o.FLOAT_MAT4:i.setMatrix(r,a)}},e.SetUniform=function(e,t,n,r){switch(r){case o.FLOAT:return e.setFloat(t,n),!0;case o.FLOAT_VEC2:return e.setVector2(t,p.Vector2.FromArray(n)),!0;case o.FLOAT_VEC3:return e.setVector3(t,p.Vector3.FromArray(n)),!0;case o.FLOAT_VEC4:return e.setVector4(t,p.Vector4.FromArray(n)),!0;default:return!1}},e.GetWrapMode=function(e){switch(e){case a.CLAMP_TO_EDGE:return p.Texture.CLAMP_ADDRESSMODE;case a.MIRRORED_REPEAT:return p.Texture.MIRROR_ADDRESSMODE;case a.REPEAT:default:return p.Texture.WRAP_ADDRESSMODE}},e.GetByteStrideFromType=function(e){switch(e.type){case"VEC2":return 2;case"VEC3":return 3;case"VEC4":case"MAT2":return 4;case"MAT3":return 9;case"MAT4":return 16;default:return 1}},e.GetTextureFilterMode=function(e){switch(e){case s.LINEAR:case s.LINEAR_MIPMAP_NEAREST:case s.LINEAR_MIPMAP_LINEAR:return p.Texture.TRILINEAR_SAMPLINGMODE;case s.NEAREST:case s.NEAREST_MIPMAP_NEAREST:return p.Texture.NEAREST_SAMPLINGMODE;default:return p.Texture.BILINEAR_SAMPLINGMODE}},e.GetBufferFromBufferView=function(e,t,n,i,o){var a=e.loadedBufferViews[t.buffer];if((n=t.byteOffset+n)+i>a.byteLength)throw new Error("Buffer access is out of range");var s=a.buffer;switch(n+=a.byteOffset,o){case r.BYTE:return new Int8Array(s,n,i);case r.UNSIGNED_BYTE:return new Uint8Array(s,n,i);case r.SHORT:return new Int16Array(s,n,i);case r.UNSIGNED_SHORT:return new Uint16Array(s,n,i);default:return new Float32Array(s,n,i)}},e.GetBufferFromAccessor=function(t,n){var r=t.bufferViews[n.bufferView],i=n.count*e.GetByteStrideFromType(n);return e.GetBufferFromBufferView(t,r,n.byteOffset,i,n.componentType)},e.DecodeBufferToText=function(e){for(var t="",n=e.byteLength,r=0;r<n;++r)t+=String.fromCharCode(e[r]);return t},e.GetDefaultMaterial=function(t){if(!e._DefaultMaterial){p.Effect.ShadersStore.GLTFDefaultMaterialVertexShader=["precision highp float;","","uniform mat4 worldView;","uniform mat4 projection;","","attribute vec3 position;","","void main(void)","{","    gl_Position = projection * worldView * vec4(position, 1.0);","}"].join("\n"),p.Effect.ShadersStore.GLTFDefaultMaterialPixelShader=["precision highp float;","","uniform vec4 u_emission;","","void main(void)","{","    gl_FragColor = u_emission;","}"].join("\n");var n={attributes:["position"],uniforms:["worldView","projection","u_emission"],samplers:new Array,needAlphaBlending:!1};(e._DefaultMaterial=new p.ShaderMaterial("GLTFDefaultMaterial",t,{vertex:"GLTFDefaultMaterial",fragment:"GLTFDefaultMaterial"},n)).setColor4("u_emission",new p.Color4(.5,.5,.5,1))}return e._DefaultMaterial},e._DefaultMaterial=null,e}(),m=n(2);!function(e){e[e.IDENTIFIER=1]="IDENTIFIER",e[e.UNKNOWN=2]="UNKNOWN",e[e.END_OF_INPUT=3]="END_OF_INPUT"}(f||(f={}));var g=function(){function e(e){this._pos=0,this.currentToken=f.UNKNOWN,this.currentIdentifier="",this.currentString="",this.isLetterOrDigitPattern=/^[a-zA-Z0-9]+$/,this._toParse=e,this._maxPos=e.length}return e.prototype.getNextToken=function(){if(this.isEnd())return f.END_OF_INPUT;if(this.currentString=this.read(),this.currentToken=f.UNKNOWN,"_"===this.currentString||this.isLetterOrDigitPattern.test(this.currentString))for(this.currentToken=f.IDENTIFIER,this.currentIdentifier=this.currentString;!this.isEnd()&&(this.isLetterOrDigitPattern.test(this.currentString=this.peek())||"_"===this.currentString);)this.currentIdentifier+=this.currentString,this.forward();return this.currentToken},e.prototype.peek=function(){return this._toParse[this._pos]},e.prototype.read=function(){return this._toParse[this._pos++]},e.prototype.forward=function(){this._pos++},e.prototype.isEnd=function(){return this._pos>=this._maxPos},e}(),v=["MODEL","VIEW","PROJECTION","MODELVIEW","MODELVIEWPROJECTION","JOINTMATRIX"],y=["world","view","projection","worldView","worldViewProjection","mBones"],b=["translation","rotation","scale"],T=["position","rotationQuaternion","scaling"],E=function(e,t,n){for(var r in e)n[t][r]=e[r]},x=function(e){if(e)for(var t=0;t<e.length/2;t++)e[2*t+1]=1-e[2*t+1]},M=function(e){if("NORMAL"===e.semantic)return"normal";if("POSITION"===e.semantic)return"position";if("JOINT"===e.semantic)return"matricesIndices";if("WEIGHT"===e.semantic)return"matricesWeights";if("COLOR"===e.semantic)return"color";if(e.semantic&&-1!==e.semantic.indexOf("TEXCOORD_")){var t=Number(e.semantic.split("_")[1]);return"uv"+(0===t?"":t+1)}return null},A=function(e){var t=null;if(e.translation||e.rotation||e.scale){var n=p.Vector3.FromArray(e.scale||[1,1,1]),r=p.Quaternion.FromArray(e.rotation||[0,0,0,1]),i=p.Vector3.FromArray(e.translation||[0,0,0]);t=p.Matrix.Compose(n,r,i)}else t=p.Matrix.FromArray(e.matrix);return t},S=function(e,t,n,r){for(var i=0;i<r.bones.length;i++)if(r.bones[i].name===n)return r.bones[i];var o=e.nodes;for(var a in o){var s=o[a];if(s.jointName){var u=s.children;for(i=0;i<u.length;i++){var l=e.nodes[u[i]];if(l.jointName&&l.jointName===n){var c=A(s),h=new p.Bone(s.name||"",r,S(e,t,s.jointName,r),c);return h.id=a,h}}}}return null},C=function(e,t){for(var n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.node.children.length;i++)if(r.node.children[i]===t)return r.bone;return null},P=function(e,t){var n=e.nodes,r=n[t];if(r)return{node:r,id:t};for(var i in n)if((r=n[i]).jointName===t)return{node:r,id:i};return null},R=function(e,t){for(var n=0;n<e.jointNames.length;n++)if(e.jointNames[n]===t)return!0;return!1},D=function(e,t,n,r,i){if(i||((i=new p.Mesh(t.name||"",e.scene)).id=r),!t.babylonNode)return i;for(var o,a=[],s=null,u=new Array,l=new Array,c=new Array,h=new Array,d=0;d<n.length;d++){var f=n[d];if(w=e.meshes[f])for(var g=0;g<w.primitives.length;g++){var v=new p.VertexData,y=w.primitives[g],b=y.attributes,T=null,E=null;for(var M in b)if(E=_.GetBufferFromAccessor(e,T=e.accessors[b[M]]),"NORMAL"===M)v.normals=new Float32Array(E.length),v.normals.set(E);else if("POSITION"===M){if(m.GLTFFileLoader.HomogeneousCoordinates){v.positions=new Float32Array(E.length-E.length/4);for(var A=0;A<E.length;A+=4)v.positions[A]=E[A],v.positions[A+1]=E[A+1],v.positions[A+2]=E[A+2]}else v.positions=new Float32Array(E.length),v.positions.set(E);l.push(v.positions.length)}else if(-1!==M.indexOf("TEXCOORD_")){var S=Number(M.split("_")[1]),C=p.VertexBuffer.UVKind+(0===S?"":S+1),P=new Float32Array(E.length);P.set(E),x(P),v.set(P,C)}else"JOINT"===M?(v.matricesIndices=new Float32Array(E.length),v.matricesIndices.set(E)):"WEIGHT"===M?(v.matricesWeights=new Float32Array(E.length),v.matricesWeights.set(E)):"COLOR"===M&&(v.colors=new Float32Array(E.length),v.colors.set(E));if(T=e.accessors[y.indices])E=_.GetBufferFromAccessor(e,T),v.indices=new Int32Array(E.length),v.indices.set(E),h.push(v.indices.length);else{var R=[];for(A=0;A<v.positions.length/3;A++)R.push(A);v.indices=new Int32Array(R),h.push(v.indices.length)}s?s.merge(v):s=v;var D=e.scene.getMaterialByID(y.material);a.push(null===D?_.GetDefaultMaterial(e.scene):D),u.push(0===u.length?0:u[u.length-1]+l[l.length-2]),c.push(0===c.length?0:c[c.length-1]+h[h.length-2])}}a.length>1?(o=new p.MultiMaterial("multimat"+r,e.scene)).subMaterials=a:o=new p.StandardMaterial("multimat"+r,e.scene),1===a.length&&(o=a[0]),i.material||(i.material=o),new p.Geometry(r,e.scene,s,!1,i),i.computeWorldMatrix(!0),i.subMeshes=[];var O=0;for(d=0;d<n.length;d++){var w;if(w=e.meshes[f=n[d]])for(g=0;g<w.primitives.length;g++)p.SubMesh.AddToMesh(O,u[O],l[O],c[O],h[O],i,i,!0),O++}return i},O=function(e,t,n,r){e.position&&(e.position=t),(e.rotationQuaternion||e.rotation)&&(e.rotationQuaternion=n),e.scaling&&(e.scaling=r)},w=function(e,t,n,r){void 0===r&&(r=!1);var i=e.nodes[t],o=null;if(r=!(e.importOnlyMeshes&&!r&&e.importMeshesNames)||-1!==e.importMeshesNames.indexOf(i.name||"")||0===e.importMeshesNames.length,!i.jointName&&r&&null!==(o=function(e,t,n,r){var i=null;if(e.importOnlyMeshes&&(t.skin||t.meshes)&&e.importMeshesNames&&e.importMeshesNames.length>0&&-1===e.importMeshesNames.indexOf(t.name||""))return null;if(t.skin){if(t.meshes){var o=e.skins[t.skin];(a=D(e,t,t.meshes,n,t.babylonNode)).skeleton=e.scene.getLastSkeletonByID(t.skin),null===a.skeleton&&(a.skeleton=function(e,t,n,r,i){if(r||(r=new p.Skeleton(t.name||"","",e.scene)),!t.babylonSkeleton)return r;var o=[],a=[];!function(e,t,n,r){for(var i in e.nodes){var o=e.nodes[i],a=i;if(o.jointName&&!R(n,o.jointName)){var s=A(o),u=new p.Bone(o.name||"",t,null,s);u.id=a,r.push({bone:u,node:o,id:a})}}for(var l=0;l<r.length;l++)for(var c=r[l],h=c.node.children,d=0;d<h.length;d++){for(var f=null,_=0;_<r.length;_++)if(r[_].id===h[d]){f=r[_];break}f&&(f.bone._parent=c.bone,c.bone.children.push(f.bone))}}(e,r,t,o),r.bones=[];for(var s=0;s<t.jointNames.length;s++)if(b=P(e,t.jointNames[s])){var u=b.node;if(u){var l=e.scene.getBoneByID(i=b.id);if(l)r.bones.push(l);else{for(var c=!1,h=null,d=0;d<s;d++){var f=P(e,t.jointNames[d]);if(f){var _=f.node;if(_){var m=_.children;if(m){c=!1;for(var g=0;g<m.length;g++)if(m[g]===i){h=S(e,t,t.jointNames[d],r),c=!0;break}if(c)break}}else p.Tools.Warn("Joint named "+t.jointNames[d]+" does not exist when looking for parent")}}var v=A(u);!h&&o.length>0&&(h=C(o,i))&&-1===a.indexOf(h)&&a.push(h),new p.Bone(u.jointName||"",r,h,v).id=i}}else p.Tools.Warn("Joint named "+t.jointNames[s]+" does not exist")}var y=r.bones;for(r.bones=[],s=0;s<t.jointNames.length;s++){var b;if(b=P(e,t.jointNames[s]))for(d=0;d<y.length;d++)if(y[d].id===b.id){r.bones.push(y[d]);break}}for(r.prepare(),s=0;s<a.length;s++)r.bones.push(a[s]);return r}(e,o,0,o.babylonSkeleton,t.skin),o.babylonSkeleton||(o.babylonSkeleton=a.skeleton)),i=a}}else if(t.meshes){var a;i=a=D(e,t,t.mesh?[t.mesh]:t.meshes,n,t.babylonNode)}else if(!t.light||t.babylonNode||e.importOnlyMeshes){if(t.camera&&!t.babylonNode&&!e.importOnlyMeshes){var s=e.cameras[t.camera];if(s)if("orthographic"===s.type){var u=new p.FreeCamera(t.camera,p.Vector3.Zero(),e.scene,!1);u.name=t.name||"",u.mode=p.Camera.ORTHOGRAPHIC_CAMERA,u.attachControl(e.scene.getEngine().getRenderingCanvas()),i=u}else if("perspective"===s.type){var l=s[s.type],c=new p.FreeCamera(t.camera,p.Vector3.Zero(),e.scene,!1);c.name=t.name||"",c.attachControl(e.scene.getEngine().getRenderingCanvas()),l.aspectRatio||(l.aspectRatio=e.scene.getEngine().getRenderWidth()/e.scene.getEngine().getRenderHeight()),l.znear&&l.zfar&&(c.maxZ=l.zfar,c.minZ=l.znear),i=c}}}else{var h=e.lights[t.light];if(h)if("ambient"===h.type){var d=h[h.type],f=new p.HemisphericLight(t.light,p.Vector3.Zero(),e.scene);f.name=t.name||"",d.color&&(f.diffuse=p.Color3.FromArray(d.color)),i=f}else if("directional"===h.type){var _=h[h.type],m=new p.DirectionalLight(t.light,p.Vector3.Zero(),e.scene);m.name=t.name||"",_.color&&(m.diffuse=p.Color3.FromArray(_.color)),i=m}else if("point"===h.type){var g=h[h.type],v=new p.PointLight(t.light,p.Vector3.Zero(),e.scene);v.name=t.name||"",g.color&&(v.diffuse=p.Color3.FromArray(g.color)),i=v}else if("spot"===h.type){var y=h[h.type],b=new p.SpotLight(t.light,p.Vector3.Zero(),p.Vector3.Zero(),0,0,e.scene);b.name=t.name||"",y.color&&(b.diffuse=p.Color3.FromArray(y.color)),y.fallOfAngle&&(b.angle=y.fallOfAngle),y.fallOffExponent&&(b.exponent=y.fallOffExponent),i=b}}if(!t.jointName){if(t.babylonNode)return t.babylonNode;if(null===i){var T=new p.Mesh(t.name||"",e.scene);t.babylonNode=T,i=T}}if(null!==i){if(t.matrix&&i instanceof p.Mesh)!function(e,t,n){if(t.matrix){var r=new p.Vector3(0,0,0),i=new p.Quaternion,o=new p.Vector3(0,0,0);p.Matrix.FromArray(t.matrix).decompose(o,i,r),O(e,r,i,o)}else t.translation&&t.rotation&&t.scale&&O(e,p.Vector3.FromArray(t.translation),p.Quaternion.FromArray(t.rotation),p.Vector3.FromArray(t.scale));e.computeWorldMatrix(!0)}(i,t);else{var E=t.rotation||[0,0,0,1],x=t.scale||[1,1,1];O(i,p.Vector3.FromArray(t.translation||[0,0,0]),p.Quaternion.FromArray(E),p.Vector3.FromArray(x))}i.updateCache(!0),t.babylonNode=i}return i}(e,i,t))&&(o.id=t,o.parent=n),i.children)for(var a=0;a<i.children.length;a++)w(e,i.children[a],o,r)},L=function(e){var t=e.currentScene;if(t)for(var n=0;n<t.nodes.length;n++)w(e,t.nodes[n],null);else for(var r in e.scenes)for(t=e.scenes[r],n=0;n<t.nodes.length;n++)w(e,t.nodes[n],null);for(function(e){for(var t in e.animations){var n=e.animations[t];if(n.channels&&n.samplers)for(var r=null,i=0;i<n.channels.length;i++){var o=n.channels[i],a=n.samplers[o.sampler];if(a){var s=null,u=null;n.parameters?(s=n.parameters[a.input],u=n.parameters[a.output]):(s=a.input,u=a.output);var l=_.GetBufferFromAccessor(e,e.accessors[s]),c=_.GetBufferFromAccessor(e,e.accessors[u]),h=o.target.id,d=e.scene.getNodeByID(h);if(null===d&&(d=e.scene.getNodeByName(h)),null!==d){var f=d instanceof p.Bone,m=o.target.path,g=b.indexOf(m);-1!==g&&(m=T[g]);var v=p.Animation.ANIMATIONTYPE_MATRIX;f||("rotationQuaternion"===m?(v=p.Animation.ANIMATIONTYPE_QUATERNION,d.rotationQuaternion=new p.Quaternion):v=p.Animation.ANIMATIONTYPE_VECTOR3);var y=null,E=[],x=0,M=!1;f&&r&&r.getKeys().length===l.length&&(y=r,M=!0),M||(y=new p.Animation(t,f?"_matrix":m,1,v,p.Animation.ANIMATIONLOOPMODE_CYCLE));for(var A=0;A<l.length;A++){var S=null;if("rotationQuaternion"===m?(S=p.Quaternion.FromArray([c[x],c[x+1],c[x+2],c[x+3]]),x+=4):(S=p.Vector3.FromArray([c[x],c[x+1],c[x+2]]),x+=3),f){var C=d,P=p.Vector3.Zero(),R=new p.Quaternion,D=p.Vector3.Zero(),O=C.getBaseMatrix();M&&r&&(O=r.getKeys()[A].value),O.decompose(D,R,P),"position"===m?P=S:"rotationQuaternion"===m?R=S:D=S,S=p.Matrix.Compose(D,R,P)}M?r&&(r.getKeys()[A].value=S):E.push({frame:l[A],value:S})}!M&&y&&(y.setKeys(E),d.animations.push(y)),r=y,e.scene.stopAnimation(d),e.scene.beginAnimation(d,0,l[l.length-1],!0,1)}else p.Tools.Warn("Creating animation named "+t+". But cannot find node named "+h+" to attach to")}}}}(e),n=0;n<e.scene.skeletons.length;n++)e.scene.beginAnimation(e.scene.skeletons[n],0,Number.MAX_VALUE,!0,1)},I=function(e,t,n,r,i,a){return function(s){!function(e,t,n,r,i){var a=r.values||n.parameters,s=n.uniforms;for(var u in i){var l=i[u],c=l.type,h=a[s[u]];if(void 0===h&&(h=l.value),h){var d=function(e){return function(n){l.value&&e&&(t.setTexture(e,n),delete i[e])}};c===o.SAMPLER_2D?U.LoadTextureAsync(e,r.values?h:l.value,d(u),function(){return d(null)}):l.value&&_.SetUniform(t,u,r.values?h:l.value,c)&&delete i[u]}}}(e,t,n,r,i),t.onBind=function(s){!function(e,t,n,r,i,a,s){var u=a.values||i.parameters;for(var l in n){var c=n[l],h=c.type;if(h===o.FLOAT_MAT2||h===o.FLOAT_MAT3||h===o.FLOAT_MAT4)if(!c.semantic||c.source||c.node){if(c.semantic&&(c.source||c.node)){var d=t.scene.getNodeByName(c.source||c.node||"");if(null===d&&(d=t.scene.getNodeByID(c.source||c.node||"")),null===d)continue;_.SetMatrix(t.scene,d,c,l,r.getEffect())}}else _.SetMatrix(t.scene,e,c,l,r.getEffect());else{var f=u[i.uniforms[l]];if(!f)continue;if(h===o.SAMPLER_2D){var p=t.textures[a.values?f:c.value].babylonTexture;if(null==p)continue;r.getEffect().setTexture(l,p)}else _.SetUniform(r.getEffect(),l,f,h)}}s(r)}(s,e,i,t,n,r,a)}}},F=function(e,t,n){for(var r in t.uniforms){var i=t.parameters[t.uniforms[r]];if(e.currentIdentifier===r&&i.semantic&&!i.source&&!i.node){var o=v.indexOf(i.semantic);if(-1!==o)return delete n[r],y[o]}}return e.currentIdentifier},N=function(e){for(var t in e.materials)U.LoadMaterialAsync(e,t,function(e){},function(){})},B=function(){function e(){}return e.CreateRuntime=function(e,t,n){var r={extensions:{},accessors:{},buffers:{},bufferViews:{},meshes:{},lights:{},cameras:{},nodes:{},images:{},textures:{},shaders:{},programs:{},samplers:{},techniques:{},materials:{},animations:{},skins:{},extensionsUsed:[],scenes:{},buffersCount:0,shaderscount:0,scene:t,rootUrl:n,loadedBufferCount:0,loadedBufferViews:{},loadedShaderCount:0,importOnlyMeshes:!1,dummyNodes:[]};return e.extensions&&E(e.extensions,"extensions",r),e.extensionsUsed&&E(e.extensionsUsed,"extensionsUsed",r),e.buffers&&function(e,t){for(var n in e)t.buffers[n]=e[n],t.buffersCount++}(e.buffers,r),e.bufferViews&&E(e.bufferViews,"bufferViews",r),e.accessors&&E(e.accessors,"accessors",r),e.meshes&&E(e.meshes,"meshes",r),e.lights&&E(e.lights,"lights",r),e.cameras&&E(e.cameras,"cameras",r),e.nodes&&E(e.nodes,"nodes",r),e.images&&E(e.images,"images",r),e.textures&&E(e.textures,"textures",r),e.shaders&&function(e,t){for(var n in e)t.shaders[n]=e[n],t.shaderscount++}(e.shaders,r),e.programs&&E(e.programs,"programs",r),e.samplers&&E(e.samplers,"samplers",r),e.techniques&&E(e.techniques,"techniques",r),e.materials&&E(e.materials,"materials",r),e.animations&&E(e.animations,"animations",r),e.skins&&E(e.skins,"skins",r),e.scenes&&(r.scenes=e.scenes),e.scene&&e.scenes&&(r.currentScene=e.scenes[e.scene]),r},e.LoadBufferAsync=function(e,t,n,r,i){var o=e.buffers[t];p.Tools.IsBase64(o.uri)?setTimeout(function(){return n(new Uint8Array(p.Tools.DecodeBase64(o.uri)))}):p.Tools.LoadFile(e.rootUrl+o.uri,function(e){return n(new Uint8Array(e))},i,void 0,!0,function(e){e&&r(e.status+" "+e.statusText)})},e.LoadTextureBufferAsync=function(e,t,n,r){var i=e.textures[t];if(i&&i.source)if(i.babylonTexture)n(null);else{var o=e.images[i.source];p.Tools.IsBase64(o.uri)?setTimeout(function(){return n(new Uint8Array(p.Tools.DecodeBase64(o.uri)))}):p.Tools.LoadFile(e.rootUrl+o.uri,function(e){return n(new Uint8Array(e))},void 0,void 0,!0,function(e){e&&r(e.status+" "+e.statusText)})}else r("")},e.CreateTextureAsync=function(e,t,n,r,i){var o=e.textures[t];if(o.babylonTexture)r(o.babylonTexture);else{var a=e.samplers[o.sampler],u=a.minFilter===s.NEAREST_MIPMAP_NEAREST||a.minFilter===s.NEAREST_MIPMAP_LINEAR||a.minFilter===s.LINEAR_MIPMAP_NEAREST||a.minFilter===s.LINEAR_MIPMAP_LINEAR,l=p.Texture.BILINEAR_SAMPLINGMODE,c=null==n?new Blob:new Blob([n]),h=URL.createObjectURL(c),d=function(){return URL.revokeObjectURL(h)},f=new p.Texture(h,e.scene,!u,!0,l,d,d);void 0!==a.wrapS&&(f.wrapU=_.GetWrapMode(a.wrapS)),void 0!==a.wrapT&&(f.wrapV=_.GetWrapMode(a.wrapT)),f.name=t,o.babylonTexture=f,r(f)}},e.LoadShaderStringAsync=function(e,t,n,r){var i=e.shaders[t];if(p.Tools.IsBase64(i.uri)){var o=atob(i.uri.split(",")[1]);n&&n(o)}else p.Tools.LoadFile(e.rootUrl+i.uri,n,void 0,void 0,!1,function(e){e&&r&&r(e.status+" "+e.statusText)})},e.LoadMaterialAsync=function(e,t,n,r){var i=e.materials[t];if(i.technique){var a=e.techniques[i.technique];if(!a){var s=new p.StandardMaterial(t,e.scene);return s.diffuseColor=new p.Color3(.5,.5,.5),s.sideOrientation=p.Material.CounterClockWiseSideOrientation,void n(s)}var u=e.programs[a.program],h=a.states,d=p.Effect.ShadersStore[u.fragmentShader+"PixelShader"],_="",m="",b=new g(p.Effect.ShadersStore[u.vertexShader+"VertexShader"]),T=new g(d),E={},x=[],A=[],S=[];for(var C in a.uniforms){var P=a.parameters[a.uniforms[C]];if(E[C]=P,!P.semantic||P.node||P.source)P.type===o.SAMPLER_2D?S.push(C):x.push(C);else{var R=v.indexOf(P.semantic);-1!==R?(x.push(y[R]),delete E[C]):x.push(C)}}for(var D in a.attributes){var O=a.attributes[D];if((N=a.parameters[O]).semantic){var w=M(N);w&&A.push(w)}}for(;!b.isEnd()&&b.getNextToken();)if(b.currentToken===f.IDENTIFIER){var L=!1;for(var D in a.attributes){var N=a.parameters[O=a.attributes[D]];if(b.currentIdentifier===D&&N.semantic){_+=M(N),L=!0;break}}L||(_+=F(b,a,E))}else _+=b.currentString;for(;!T.isEnd()&&T.getNextToken();)m+=T.currentToken===f.IDENTIFIER?F(T,a,E):T.currentString;var B={vertex:u.vertexShader+t,fragment:u.fragmentShader+t},k={attributes:A,uniforms:x,samplers:S,needAlphaBlending:h&&h.enable&&-1!==h.enable.indexOf(3042)};p.Effect.ShadersStore[u.vertexShader+t+"VertexShader"]=_,p.Effect.ShadersStore[u.fragmentShader+t+"PixelShader"]=m;var U=new p.ShaderMaterial(t,e.scene,B,k);if(U.onError=function(e,t,n){return function(r,i){t.dispose(!0),n("Cannot compile program named "+e.name+". Error: "+i+". Default material will be applied")}}(u,U,r),U.onCompiled=I(e,U,a,i,E,n),U.sideOrientation=p.Material.CounterClockWiseSideOrientation,h&&h.functions){var V=h.functions;V.cullFace&&V.cullFace[0]!==l.BACK&&(U.backFaceCulling=!1);var G=V.blendFuncSeparate;G&&(G[0]===c.SRC_ALPHA&&G[1]===c.ONE_MINUS_SRC_ALPHA&&G[2]===c.ONE&&G[3]===c.ONE?U.alphaMode=p.Engine.ALPHA_COMBINE:G[0]===c.ONE&&G[1]===c.ONE&&G[2]===c.ZERO&&G[3]===c.ONE?U.alphaMode=p.Engine.ALPHA_ONEONE:G[0]===c.SRC_ALPHA&&G[1]===c.ONE&&G[2]===c.ZERO&&G[3]===c.ONE?U.alphaMode=p.Engine.ALPHA_ADD:G[0]===c.ZERO&&G[1]===c.ONE_MINUS_SRC_COLOR&&G[2]===c.ONE&&G[3]===c.ONE?U.alphaMode=p.Engine.ALPHA_SUBTRACT:G[0]===c.DST_COLOR&&G[1]===c.ZERO&&G[2]===c.ONE&&G[3]===c.ONE?U.alphaMode=p.Engine.ALPHA_MULTIPLY:G[0]===c.SRC_ALPHA&&G[1]===c.ONE_MINUS_SRC_COLOR&&G[2]===c.ONE&&G[3]===c.ONE&&(U.alphaMode=p.Engine.ALPHA_MAXIMIZED))}}else r&&r("No technique found.")},e}(),k=function(){function e(){this.state=null}return e.RegisterExtension=function(t){e.Extensions[t.name]?p.Tools.Error('Tool with the same name "'+t.name+'" already exists'):e.Extensions[t.name]=t},e.prototype.dispose=function(){},e.prototype._importMeshAsync=function(e,t,n,r,i,o,a){var s=this;return t.useRightHandedSystem=!0,U.LoadRuntimeAsync(t,n,r,function(t){t.importOnlyMeshes=!0,""===e?t.importMeshesNames=[]:"string"==typeof e?t.importMeshesNames=[e]:!e||e instanceof Array?(t.importMeshesNames=[],p.Tools.Warn("Argument meshesNames must be of type string or string[]")):t.importMeshesNames=[e],s._createNodes(t);var n=new Array,r=new Array;for(var a in t.nodes){var u=t.nodes[a];u.babylonNode instanceof p.AbstractMesh&&n.push(u.babylonNode)}for(var l in t.skins){var c=t.skins[l];c.babylonSkeleton instanceof p.Skeleton&&r.push(c.babylonSkeleton)}s._loadBuffersAsync(t,function(){s._loadShadersAsync(t,function(){N(t),L(t),!m.GLTFFileLoader.IncrementalLoading&&i&&i(n,r)})},o),m.GLTFFileLoader.IncrementalLoading&&i&&i(n,r)},a),!0},e.prototype.importMeshAsync=function(e,t,n,r,i){var o=this;return new Promise(function(a,s){o._importMeshAsync(e,t,n,r,function(e,t){a({meshes:e,particleSystems:[],skeletons:t,animationGroups:[]})},i,function(e){s(new Error(e))})})},e.prototype._loadAsync=function(e,t,n,r,i,o){var a=this;e.useRightHandedSystem=!0,U.LoadRuntimeAsync(e,t,n,function(e){U.LoadRuntimeExtensionsAsync(e,function(){a._createNodes(e),a._loadBuffersAsync(e,function(){a._loadShadersAsync(e,function(){N(e),L(e),m.GLTFFileLoader.IncrementalLoading||r()})}),m.GLTFFileLoader.IncrementalLoading&&r()},o)},o)},e.prototype.loadAsync=function(e,t,n,r){var i=this;return new Promise(function(o,a){i._loadAsync(e,t,n,function(){o()},r,function(e){a(new Error(e))})})},e.prototype._loadShadersAsync=function(e,t){var n=!1,r=function(n,r){U.LoadShaderStringAsync(e,n,function(o){o instanceof ArrayBuffer||(e.loadedShaderCount++,o&&(p.Effect.ShadersStore[n+(r.type===i.VERTEX?"VertexShader":"PixelShader")]=o),e.loadedShaderCount===e.shaderscount&&t())},function(){p.Tools.Error("Error when loading shader program named "+n+" located at "+r.uri)})};for(var o in e.shaders){n=!0;var a=e.shaders[o];a?r.bind(this,o,a)():p.Tools.Error("No shader named: "+o)}n||t()},e.prototype._loadBuffersAsync=function(e,t,n){var r=!1,i=function(n,r){U.LoadBufferAsync(e,n,function(i){e.loadedBufferCount++,i&&(i.byteLength!=e.buffers[n].byteLength&&p.Tools.Error("Buffer named "+n+" is length "+i.byteLength+". Expected: "+r.byteLength),e.loadedBufferViews[n]=i),e.loadedBufferCount===e.buffersCount&&t()},function(){p.Tools.Error("Error when loading buffer named "+n+" located at "+r.uri)})};for(var o in e.buffers){r=!0;var a=e.buffers[o];a?i.bind(this,o,a)():p.Tools.Error("No buffer named: "+o)}r||t()},e.prototype._createNodes=function(e){var t=e.currentScene;if(t)for(var n=0;n<t.nodes.length;n++)w(e,t.nodes[n],null);else for(var r in e.scenes)for(t=e.scenes[r],n=0;n<t.nodes.length;n++)w(e,t.nodes[n],null)},e.Extensions={},e}(),U=function(){function e(e){this._name=e}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.loadRuntimeAsync=function(e,t,n,r,i){return!1},e.prototype.loadRuntimeExtensionsAsync=function(e,t,n){return!1},e.prototype.loadBufferAsync=function(e,t,n,r,i){return!1},e.prototype.loadTextureBufferAsync=function(e,t,n,r){return!1},e.prototype.createTextureAsync=function(e,t,n,r,i){return!1},e.prototype.loadShaderStringAsync=function(e,t,n,r){return!1},e.prototype.loadMaterialAsync=function(e,t,n,r){return!1},e.LoadRuntimeAsync=function(t,n,r,i,o){e.ApplyExtensions(function(e){return e.loadRuntimeAsync(t,n,r,i,o)},function(){setTimeout(function(){i&&i(B.CreateRuntime(n.json,t,r))})})},e.LoadRuntimeExtensionsAsync=function(t,n,r){e.ApplyExtensions(function(e){return e.loadRuntimeExtensionsAsync(t,n,r)},function(){setTimeout(function(){n()})})},e.LoadBufferAsync=function(t,n,r,i,o){e.ApplyExtensions(function(e){return e.loadBufferAsync(t,n,r,i,o)},function(){B.LoadBufferAsync(t,n,r,i,o)})},e.LoadTextureAsync=function(t,n,r,i){e.LoadTextureBufferAsync(t,n,function(o){o&&e.CreateTextureAsync(t,n,o,r,i)},i)},e.LoadShaderStringAsync=function(t,n,r,i){e.ApplyExtensions(function(e){return e.loadShaderStringAsync(t,n,r,i)},function(){B.LoadShaderStringAsync(t,n,r,i)})},e.LoadMaterialAsync=function(t,n,r,i){e.ApplyExtensions(function(e){return e.loadMaterialAsync(t,n,r,i)},function(){B.LoadMaterialAsync(t,n,r,i)})},e.LoadTextureBufferAsync=function(t,n,r,i){e.ApplyExtensions(function(e){return e.loadTextureBufferAsync(t,n,r,i)},function(){B.LoadTextureBufferAsync(t,n,r,i)})},e.CreateTextureAsync=function(t,n,r,i,o){e.ApplyExtensions(function(e){return e.createTextureAsync(t,n,r,i,o)},function(){B.CreateTextureAsync(t,n,r,i,o)})},e.ApplyExtensions=function(e,t){for(var n in k.Extensions)if(e(k.Extensions[n]))return;t()},e}();m.GLTFFileLoader._CreateGLTF1Loader=function(){return new k};var V=function(e){function t(){return e.call(this,"KHR_binary_glTF")||this}return d(t,e),t.prototype.loadRuntimeAsync=function(e,t,n,r,i){var o=t.json.extensionsUsed;return!(!o||-1===o.indexOf(this.name)||!t.bin||(this._bin=t.bin,r(B.CreateRuntime(t.json,e,n)),0))},t.prototype.loadBufferAsync=function(e,t,n,r){return-1!==e.extensionsUsed.indexOf(this.name)&&"binary_glTF"===t&&(n(this._bin),!0)},t.prototype.loadTextureBufferAsync=function(e,t,n,i){var o=e.images[e.textures[t].source];if(!(o.extensions&&this.name in o.extensions))return!1;var a=e.bufferViews[o.extensions[this.name].bufferView];return n(_.GetBufferFromBufferView(e,a,0,a.byteLength,r.UNSIGNED_BYTE)),!0},t.prototype.loadShaderStringAsync=function(e,t,n,i){var o=e.shaders[t];if(!(o.extensions&&this.name in o.extensions))return!1;var a=e.bufferViews[o.extensions[this.name].bufferView],s=_.GetBufferFromBufferView(e,a,0,a.byteLength,r.UNSIGNED_BYTE);return setTimeout(function(){var e=_.DecodeBufferToText(s);n(e)}),!0},t}(U);k.RegisterExtension(new V);var G=function(e){function t(){return e.call(this,"KHR_materials_common")||this}return d(t,e),t.prototype.loadRuntimeExtensionsAsync=function(e,t,n){if(!e.extensions)return!1;var r=e.extensions[this.name];if(!r)return!1;var i=r.lights;if(i)for(var o in i){var a=i[o];switch(a.type){case"ambient":var s=new p.HemisphericLight(a.name,new p.Vector3(0,1,0),e.scene),u=a.ambient;u&&(s.diffuse=p.Color3.FromArray(u.color||[1,1,1]));break;case"point":var l=new p.PointLight(a.name,new p.Vector3(10,10,10),e.scene),c=a.point;c&&(l.diffuse=p.Color3.FromArray(c.color||[1,1,1]));break;case"directional":var h=new p.DirectionalLight(a.name,new p.Vector3(0,-1,0),e.scene),d=a.directional;d&&(h.diffuse=p.Color3.FromArray(d.color||[1,1,1]));break;case"spot":var f=a.spot;f&&(new p.SpotLight(a.name,new p.Vector3(0,10,0),new p.Vector3(0,-1,0),f.fallOffAngle||Math.PI,f.fallOffExponent||0,e.scene).diffuse=p.Color3.FromArray(f.color||[1,1,1]));break;default:p.Tools.Warn('GLTF Material Common extension: light type "'+a.type+"\u201d not supported")}}return!1},t.prototype.loadMaterialAsync=function(e,t,n,r){var i=e.materials[t];if(!i||!i.extensions)return!1;var o=i.extensions[this.name];if(!o)return!1;var a=new p.StandardMaterial(t,e.scene);return a.sideOrientation=p.Material.CounterClockWiseSideOrientation,"CONSTANT"===o.technique&&(a.disableLighting=!0),a.backFaceCulling=void 0!==o.doubleSided&&!o.doubleSided,a.alpha=void 0===o.values.transparency?1:o.values.transparency,a.specularPower=void 0===o.values.shininess?0:o.values.shininess,"string"==typeof o.values.ambient?this._loadTexture(e,o.values.ambient,a,"ambientTexture",r):a.ambientColor=p.Color3.FromArray(o.values.ambient||[0,0,0]),"string"==typeof o.values.diffuse?this._loadTexture(e,o.values.diffuse,a,"diffuseTexture",r):a.diffuseColor=p.Color3.FromArray(o.values.diffuse||[0,0,0]),"string"==typeof o.values.emission?this._loadTexture(e,o.values.emission,a,"emissiveTexture",r):a.emissiveColor=p.Color3.FromArray(o.values.emission||[0,0,0]),"string"==typeof o.values.specular?this._loadTexture(e,o.values.specular,a,"specularTexture",r):a.specularColor=p.Color3.FromArray(o.values.specular||[0,0,0]),!0},t.prototype._loadTexture=function(e,t,n,r,i){B.LoadTextureBufferAsync(e,t,function(o){B.CreateTextureAsync(e,t,o,function(e){return n[r]=e},i)},i)},t}(U);k.RegisterExtension(new G),n.d(t,"GLTFBinaryExtension",function(){return V}),n.d(t,"GLTFLoaderBase",function(){return B}),n.d(t,"GLTFLoader",function(){return k}),n.d(t,"GLTFLoaderExtension",function(){return U}),n.d(t,"EComponentType",function(){return r}),n.d(t,"EShaderType",function(){return i}),n.d(t,"EParameterType",function(){return o}),n.d(t,"ETextureWrapMode",function(){return a}),n.d(t,"ETextureFilterType",function(){return s}),n.d(t,"ETextureFormat",function(){return u}),n.d(t,"ECullingType",function(){return l}),n.d(t,"EBlendingFunction",function(){return c}),n.d(t,"GLTFUtils",function(){return _}),n.d(t,"GLTFMaterialsCommonExtension",function(){return G})},function(e,t,n){"use strict";n.r(t);var r=n(0),i=function(){function e(){this.materials=[]}return e.prototype.parseMTL=function(t,n,i){if(!(n instanceof ArrayBuffer)){for(var o,a=n.split("\n"),s=/\s+/,u=null,l=0;l<a.length;l++){var c=a[l].trim();if(0!==c.length&&"#"!==c.charAt(0)){var h=c.indexOf(" "),d=h>=0?c.substring(0,h):c;d=d.toLowerCase();var f=h>=0?c.substring(h+1).trim():"";"newmtl"===d?(u&&this.materials.push(u),u=new r.StandardMaterial(f,t)):"kd"===d&&u?(o=f.split(s,3).map(parseFloat),u.diffuseColor=r.Color3.FromArray(o)):"ka"===d&&u?(o=f.split(s,3).map(parseFloat),u.ambientColor=r.Color3.FromArray(o)):"ks"===d&&u?(o=f.split(s,3).map(parseFloat),u.specularColor=r.Color3.FromArray(o)):"ke"===d&&u?(o=f.split(s,3).map(parseFloat),u.emissiveColor=r.Color3.FromArray(o)):"ns"===d&&u?u.specularPower=parseFloat(f):"d"===d&&u?u.alpha=parseFloat(f):"map_ka"===d&&u?u.ambientTexture=e._getTexture(i,f,t):"map_kd"===d&&u?u.diffuseTexture=e._getTexture(i,f,t):"map_ks"===d&&u?u.specularTexture=e._getTexture(i,f,t):"map_ns"===d||("map_bump"===d&&u?u.bumpTexture=e._getTexture(i,f,t):"map_d"===d&&u&&(u.opacityTexture=e._getTexture(i,f,t)))}}u&&this.materials.push(u)}},e._getTexture=function(e,t,n){if(!t)return null;var i=e;if("file:"===e){var a=t.lastIndexOf("\\");-1===a&&(a=t.lastIndexOf("/")),i+=a>-1?t.substr(a+1):t}else i+=t;return new r.Texture(i,n,!1,o.INVERT_TEXTURE_Y)},e}(),o=function(){function e(t){this.name="obj",this.extensions=".obj",this.obj=/^o/,this.group=/^g/,this.mtllib=/^mtllib /,this.usemtl=/^usemtl /,this.smooth=/^s /,this.vertexPattern=/v( +[\d|\.|\+|\-|e|E]+){3,7}/,this.normalPattern=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.uvPattern=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,this.facePattern1=/f\s+(([\d]{1,}[\s]?){3,})+/,this.facePattern2=/f\s+((([\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,this.facePattern3=/f\s+((([\d]{1,}\/[\d]{1,}\/[\d]{1,}[\s]?){3,})+)/,this.facePattern4=/f\s+((([\d]{1,}\/\/[\d]{1,}[\s]?){3,})+)/,this.facePattern5=/f\s+(((-[\d]{1,}\/-[\d]{1,}\/-[\d]{1,}[\s]?){3,})+)/,this._meshLoadOptions=t||e.currentMeshLoadOptions}return Object.defineProperty(e,"currentMeshLoadOptions",{get:function(){return{ComputeNormals:e.COMPUTE_NORMALS,ImportVertexColors:e.IMPORT_VERTEX_COLORS,InvertY:e.INVERT_Y,InvertTextureY:e.INVERT_TEXTURE_Y,UVScaling:e.UV_SCALING,MaterialLoadingFailsSilently:e.MATERIAL_LOADING_FAILS_SILENTLY,OptimizeWithUV:e.OPTIMIZE_WITH_UV,SkipMaterials:e.SKIP_MATERIALS}},enumerable:!0,configurable:!0}),e.prototype._loadMTL=function(e,t,n,i){var o=r.Tools.BaseUrl+t+e;r.Tools.LoadFile(o,n,void 0,void 0,!1,function(e,t){i(o,t)})},e.prototype.createPlugin=function(){return new e(e.currentMeshLoadOptions)},e.prototype.canDirectLoad=function(e){return!1},e.prototype.importMeshAsync=function(e,t,n,r,i,o){return this._parseSolid(e,t,n,r).then(function(e){return{meshes:e,particleSystems:[],skeletons:[],animationGroups:[]}})},e.prototype.loadAsync=function(e,t,n,r,i){return this.importMeshAsync(null,e,t,n,r).then(function(){})},e.prototype.loadAssetContainerAsync=function(e,t,n,i,o){return this.importMeshAsync(null,e,t,n).then(function(t){var n=new r.AssetContainer(e);return t.meshes.forEach(function(e){return n.meshes.push(e)}),t.meshes.forEach(function(e){var t=e.material;t&&-1==n.materials.indexOf(t)&&(n.materials.push(t),t.getActiveTextures().forEach(function(e){-1==n.textures.indexOf(e)&&n.textures.push(e)}))}),n.removeAllFromScene(),n})},e.prototype._parseSolid=function(t,n,o,a){for(var s,u=this,l=[],c=[],h=[],d=[],f=[],p=[],_=[],m=[],g=[],v=[],y=[],b=0,T=!1,E=[],x=[],M=[],A=[],S=[],C="",P="",R=new i,D=1,O=!0,w=new r.Color4(.5,.5,.5,1),L=function(e,t,n,r,i,o,a){var s;-1===(s=u._meshLoadOptions.OptimizeWithUV?function(e,t){e[t[0]]||(e[t[0]]={normals:[],idx:[],uv:[]});var n=e[t[0]].normals.indexOf(t[1]);return 1!=n&&t[2]===e[t[0]].uv[n]?e[t[0]].idx[n]:-1}(y,[e,n,t]):function(e,t){e[t[0]]||(e[t[0]]={normals:[],idx:[]});var n=e[t[0]].normals.indexOf(t[1]);return-1===n?-1:e[t[0]].idx[n]}(y,[e,n]))?(p.push(_.length),_.push(r),m.push(i),v.push(o),void 0!==a&&g.push(a),y[e].normals.push(n),y[e].idx.push(b++),u._meshLoadOptions.OptimizeWithUV&&y[e].uv.push(t)):p.push(s)},I=function(){for(var e=0;e<_.length;e++)E.push(_[e].x,_[e].y,_[e].z),M.push(v[e].x,v[e].y,v[e].z),A.push(m[e].x,m[e].y);!0===u._meshLoadOptions.ImportVertexColors&&x.push(g[e].r,g[e].g,g[e].b,g[e].a),_=[],v=[],m=[],g=[],y=[],b=0},F=function(e,t){t+1<e.length&&(S.push(e[0],e[t],e[t+1]),F(e,t+=1))},N=function(e,t){F(e,t);for(var n=0;n<S.length;n++){var i=parseInt(S[n])-1;L(i,0,0,l[i],r.Vector2.Zero(),r.Vector3.Up(),!0===u._meshLoadOptions.ImportVertexColors?d[i]:void 0)}S=[]},B=function(e,t){F(e,t);for(var n=0;n<S.length;n++){var i=S[n].split("/"),o=parseInt(i[0])-1,a=parseInt(i[1])-1;L(o,a,0,l[o],h[a],r.Vector3.Up(),!0===u._meshLoadOptions.ImportVertexColors?d[o]:void 0)}S=[]},k=function(e,t){F(e,t);for(var n=0;n<S.length;n++){var r=S[n].split("/"),i=parseInt(r[0])-1,o=parseInt(r[1])-1,a=parseInt(r[2])-1;L(i,o,a,l[i],h[o],c[a])}S=[]},U=function(e,t){F(e,t);for(var n=0;n<S.length;n++){var i=S[n].split("//"),o=parseInt(i[0])-1,a=parseInt(i[1])-1;L(o,1,a,l[o],r.Vector2.Zero(),c[a],!0===u._meshLoadOptions.ImportVertexColors?d[o]:void 0)}S=[]},V=function(e,t){F(e,t);for(var n=0;n<S.length;n++){var r=S[n].split("/"),i=l.length+parseInt(r[0]),o=h.length+parseInt(r[1]),a=c.length+parseInt(r[2]);L(i,o,a,l[i],h[o],c[a],!0===u._meshLoadOptions.ImportVertexColors?d[i]:void 0)}S=[]},G=function(){f.length>0&&(s=f[f.length-1],I(),p.reverse(),s.indices=p.slice(),s.positions=E.slice(),s.normals=M.slice(),s.uvs=A.slice(),!0===u._meshLoadOptions.ImportVertexColors&&(s.colors=x.slice()),p=[],E=[],x=[],M=[],A=[])},j=o.split("\n"),z=0;z<j.length;z++){var Y,H=j[z].trim();if(0!==H.length&&"#"!==H.charAt(0))if(this.vertexPattern.test(H))Y=H.match(/[^ ]+/g),l.push(new r.Vector3(parseFloat(Y[1]),parseFloat(Y[2]),parseFloat(Y[3]))),!0===this._meshLoadOptions.ImportVertexColors&&d.push(Y.length>=7?new r.Color4(parseFloat(Y[4]),parseFloat(Y[5]),parseFloat(Y[6]),7===Y.length||void 0===Y[7]?1:parseFloat(Y[7])):w);else if(null!==(Y=this.normalPattern.exec(H)))c.push(new r.Vector3(parseFloat(Y[1]),parseFloat(Y[2]),parseFloat(Y[3])));else if(null!==(Y=this.uvPattern.exec(H)))h.push(new r.Vector2(parseFloat(Y[1])*e.UV_SCALING.x,parseFloat(Y[2])*e.UV_SCALING.y));else if(null!==(Y=this.facePattern3.exec(H)))k(Y[1].trim().split(" "),1);else if(null!==(Y=this.facePattern4.exec(H)))U(Y[1].trim().split(" "),1);else if(null!==(Y=this.facePattern5.exec(H)))V(Y[1].trim().split(" "),1);else if(null!==(Y=this.facePattern2.exec(H)))B(Y[1].trim().split(" "),1);else if(null!==(Y=this.facePattern1.exec(H)))N(Y[1].trim().split(" "),1);else if(this.group.test(H)||this.obj.test(H)){var W={name:H.substring(2).trim(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,colors:void 0,materialName:""};G(),f.push(W),T=!0,O=!0,D=1}else this.usemtl.test(H)?(C=H.substring(7).trim(),O||(G(),W={name:"_mm"+D.toString(),indices:void 0,positions:void 0,normals:void 0,uvs:void 0,colors:void 0,materialName:C},D++,f.push(W)),T&&O&&(f[f.length-1].materialName=C,O=!1)):this.mtllib.test(H)?P=H.substring(7).trim():this.smooth.test(H)||console.log("Unhandled expression at line : "+H)}T&&(s=f[f.length-1],p.reverse(),I(),s.indices=p,s.positions=E,s.normals=M,s.uvs=A,!0===this._meshLoadOptions.ImportVertexColors&&(s.colors=x)),T||(p.reverse(),I(),f.push({name:r.Geometry.RandomId(),indices:p,positions:E,colors:x,normals:M,uvs:A,materialName:C}));for(var X=[],K=new Array,Q=0;Q<f.length;Q++){if(t&&f[Q].name)if(t instanceof Array){if(-1===t.indexOf(f[Q].name))continue}else if(f[Q].name!==t)continue;s=f[Q];var q=new r.Mesh(f[Q].name,n);K.push(f[Q].materialName);var Z=new r.VertexData;if(Z.uvs=s.uvs,Z.indices=s.indices,Z.positions=s.positions,!0===this._meshLoadOptions.ComputeNormals){var J=new Array;r.VertexData.ComputeNormals(s.positions,s.indices,J),Z.normals=J}else Z.normals=s.normals;!0===this._meshLoadOptions.ImportVertexColors&&(Z.colors=s.colors),Z.applyToMesh(q),this._meshLoadOptions.InvertY&&(q.scaling.y*=-1),X.push(q)}var $=[];return""!==P&&!1===this._meshLoadOptions.SkipMaterials&&$.push(new Promise(function(e,t){u._loadMTL(P,a,function(i){try{R.parseMTL(n,i,a);for(var o=0;o<R.materials.length;o++){for(var s,l=0,c=[];(s=K.indexOf(R.materials[o].name,l))>-1;)c.push(s),l=s+1;if(-1===s&&0===c.length)R.materials[o].dispose();else for(var h=0;h<c.length;h++)X[c[h]].material=R.materials[o]}e()}catch(n){r.Tools.Warn("Error processing MTL file: '"+P+"'"),u._meshLoadOptions.MaterialLoadingFailsSilently?e():t(n)}},function(n,i){r.Tools.Warn("Error downloading MTL file: '"+P+"'"),u._meshLoadOptions.MaterialLoadingFailsSilently?e():t(i)})})),Promise.all($).then(function(){return X})},e.OPTIMIZE_WITH_UV=!1,e.INVERT_Y=!1,e.INVERT_TEXTURE_Y=!0,e.IMPORT_VERTEX_COLORS=!1,e.COMPUTE_NORMALS=!1,e.UV_SCALING=new r.Vector2(1,1),e.SKIP_MATERIALS=!1,e.MATERIAL_LOADING_FAILS_SILENTLY=!0,e}();r.SceneLoader&&r.SceneLoader.RegisterPlugin(new o),n.d(t,"MTLFileLoader",function(){return i}),n.d(t,"OBJFileLoader",function(){return o})},function(e,t,n){"use strict";n.r(t);var r=n(0),i=function(){function e(){this.solidPattern=/solid (\S*)([\S\s]*)endsolid[ ]*(\S*)/g,this.facetsPattern=/facet([\s\S]*?)endfacet/g,this.normalPattern=/normal[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g,this.vertexPattern=/vertex[\s]+([\-+]?[0-9]+\.?[0-9]*([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+[\s]+([\-+]?[0-9]*\.?[0-9]+([eE][\-+]?[0-9]+)?)+/g,this.name="stl",this.extensions={".stl":{isBinary:!0}}}return e.prototype.importMesh=function(e,t,n,i,o,a,s){var u;if("string"!=typeof n){if(this._isBinary(n)){var l=new r.Mesh("stlmesh",t);return this._parseBinary(l,n),o&&o.push(l),!0}for(var c=new Uint8Array(n),h="",d=0;d<n.byteLength;d++)h+=String.fromCharCode(c[d]);n=h}for(;u=this.solidPattern.exec(n);){var f=u[1];if(f!=u[3])return r.Tools.Error("Error in STL, solid name != endsolid name"),!1;if(e&&f)if(e instanceof Array){if(!e.indexOf(f))continue}else if(f!==e)continue;l=new r.Mesh(f=f||"stlmesh",t),this._parseASCII(l,u[2]),o&&o.push(l)}return!0},e.prototype.load=function(e,t,n){var r=this.importMesh(null,e,t,n,null,null,null);return r&&(e.createDefaultLight(),e.createDefaultCameraOrLight()),r},e.prototype.loadAssetContainer=function(e,t,n,i){var o=new r.AssetContainer(e);return this.importMesh(null,e,t,n,o.meshes,null,null),o.removeAllFromScene(),o},e.prototype._isBinary=function(e){var t;if(84+50*(t=new DataView(e)).getUint32(80,!0)===t.byteLength)return!0;for(var n=t.byteLength,r=0;r<n;r++)if(t.getUint8(r)>127)return!0;return!1},e.prototype._parseBinary=function(e,t){for(var n=new DataView(t),i=n.getUint32(80,!0),o=0,a=new Float32Array(3*i*3),s=new Float32Array(3*i*3),u=new Uint32Array(3*i),l=0,c=0;c<i;c++){for(var h=84+50*c,d=n.getFloat32(h,!0),f=n.getFloat32(h+4,!0),p=n.getFloat32(h+8,!0),_=1;_<=3;_++){var m=h+12*_;a[o]=n.getFloat32(m,!0),a[o+2]=n.getFloat32(m+4,!0),a[o+1]=n.getFloat32(m+8,!0),s[o]=d,s[o+2]=f,s[o+1]=p,o+=3}u[l]=l++,u[l]=l++,u[l]=l++}e.setVerticesData(r.VertexBuffer.PositionKind,a),e.setVerticesData(r.VertexBuffer.NormalKind,s),e.setIndices(u),e.computeWorldMatrix(!0)},e.prototype._parseASCII=function(e,t){for(var n,i=[],o=[],a=[],s=0;n=this.facetsPattern.exec(t);){var u=n[1],l=this.normalPattern.exec(u);if(this.normalPattern.lastIndex=0,l){for(var c,h=[Number(l[1]),Number(l[5]),Number(l[3])];c=this.vertexPattern.exec(u);)i.push(Number(c[1]),Number(c[5]),Number(c[3])),o.push(h[0],h[1],h[2]);a.push(s++,s++,s++),this.vertexPattern.lastIndex=0}}this.facetsPattern.lastIndex=0,e.setVerticesData(r.VertexBuffer.PositionKind,i),e.setVerticesData(r.VertexBuffer.NormalKind,o),e.setIndices(a),e.computeWorldMatrix(!0)},e}();r.SceneLoader&&r.SceneLoader.RegisterPlugin(new i),n.d(t,"STLFileLoader",function(){return i})},function(e,t,n){"use strict";(function(e){var r=n(2);n.d(t,"a",function(){return r.GLTFFileLoader}),n.d(t,"b",function(){return r.GLTFLoaderAnimationStartMode}),n.d(t,"c",function(){return r.GLTFLoaderCoordinateSystemMode}),n.d(t,"d",function(){return r.GLTFLoaderState});var i=void 0!==e?e:"undefined"!=typeof window?window:void 0;if(void 0!==i)for(var o in i.BABYLON=i.BABYLON||{},r)i.BABYLON[o]=r[o]}).call(this,n(3))},function(e,t){},function(e,t,n){"use strict";(function(e){var r=n(6);n.d(t,"a",function(){return r});var i=void 0!==e?e:"undefined"!=typeof window?window:void 0;if(void 0!==i)for(var o in i.BABYLON=i.BABYLON||{},i.BABYLON.GLTF1=i.BABYLON.GLTF1||{},r)i.BABYLON.GLTF1[o]=r[o]}).call(this,n(3))},function(e,t,n){"use strict";(function(e){var r=n(4),i=n(10),o=n(5);n.d(t,"a",function(){return o});var a=void 0!==e?e:"undefined"!=typeof window?window:void 0;if(void 0!==a){a.BABYLON=a.BABYLON||{};var s=a.BABYLON;s.GLTF2=s.GLTF2||{},s.GLTF2.Loader=s.GLTF2.Loader||{},s.GLTF2.Loader.Extensions=s.GLTF2.Loader.Extensions||{};var u=[];for(var l in r)s.GLTF2.Loader.Extensions[l]=r[l],u.push(l);for(var l in i)s.GLTF2.Loader[l]=i[l],u.push(l);for(var l in o)u.indexOf(l)>-1||(s.GLTF2[l]=o[l])}}).call(this,n(3))},function(e,t,n){"use strict";n.r(t),(function(e){var r=n(7);n.d(t,"MTLFileLoader",function(){return r.MTLFileLoader}),n.d(t,"OBJFileLoader",function(){return r.OBJFileLoader});var i=void 0!==e?e:"undefined"!=typeof window?window:void 0;if(void 0!==i)for(var o in r)i.BABYLON[o]=r[o]}).call(this,n(3))},function(e,t,n){"use strict";n.r(t),(function(e){var r=n(8);n.d(t,"STLFileLoader",function(){return r.STLFileLoader});var i=void 0!==e?e:"undefined"!=typeof window?window:void 0;if(void 0!==i)for(var o in r)i.BABYLON[o]=r[o]}).call(this,n(3))},,,,function(e,t,n){"use strict";n.r(t),n(2),n(6),n(5),n(7),n(8);var r=n(9),i=n(11),o=n(12),a=n(13),s=n(14);n.d(t,"GLTFLoaderCoordinateSystemMode",function(){return r.c}),n.d(t,"GLTFLoaderAnimationStartMode",function(){return r.b}),n.d(t,"GLTFLoaderState",function(){return r.d}),n.d(t,"GLTFFileLoader",function(){return r.a}),n.d(t,"GLTF1",function(){return i.a}),n.d(t,"GLTF2",function(){return o.a}),n.d(t,"MTLFileLoader",function(){return a.MTLFileLoader}),n.d(t,"OBJFileLoader",function(){return a.OBJFileLoader}),n.d(t,"STLFileLoader",function(){return s.STLFileLoader})}]))},sp3z:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("lo",{months:"\u0ea1\u0eb1\u0e87\u0e81\u0ead\u0e99_\u0e81\u0eb8\u0ea1\u0e9e\u0eb2_\u0ea1\u0eb5\u0e99\u0eb2_\u0ec0\u0ea1\u0eaa\u0eb2_\u0e9e\u0eb6\u0e94\u0eaa\u0eb0\u0e9e\u0eb2_\u0ea1\u0eb4\u0e96\u0eb8\u0e99\u0eb2_\u0e81\u0ecd\u0ea5\u0eb0\u0e81\u0ebb\u0e94_\u0eaa\u0eb4\u0e87\u0eab\u0eb2_\u0e81\u0eb1\u0e99\u0e8d\u0eb2_\u0e95\u0eb8\u0ea5\u0eb2_\u0e9e\u0eb0\u0e88\u0eb4\u0e81_\u0e97\u0eb1\u0e99\u0ea7\u0eb2".split("_"),monthsShort:"\u0ea1\u0eb1\u0e87\u0e81\u0ead\u0e99_\u0e81\u0eb8\u0ea1\u0e9e\u0eb2_\u0ea1\u0eb5\u0e99\u0eb2_\u0ec0\u0ea1\u0eaa\u0eb2_\u0e9e\u0eb6\u0e94\u0eaa\u0eb0\u0e9e\u0eb2_\u0ea1\u0eb4\u0e96\u0eb8\u0e99\u0eb2_\u0e81\u0ecd\u0ea5\u0eb0\u0e81\u0ebb\u0e94_\u0eaa\u0eb4\u0e87\u0eab\u0eb2_\u0e81\u0eb1\u0e99\u0e8d\u0eb2_\u0e95\u0eb8\u0ea5\u0eb2_\u0e9e\u0eb0\u0e88\u0eb4\u0e81_\u0e97\u0eb1\u0e99\u0ea7\u0eb2".split("_"),weekdays:"\u0ead\u0eb2\u0e97\u0eb4\u0e94_\u0e88\u0eb1\u0e99_\u0ead\u0eb1\u0e87\u0e84\u0eb2\u0e99_\u0e9e\u0eb8\u0e94_\u0e9e\u0eb0\u0eab\u0eb1\u0e94_\u0eaa\u0eb8\u0e81_\u0ec0\u0eaa\u0ebb\u0eb2".split("_"),weekdaysShort:"\u0e97\u0eb4\u0e94_\u0e88\u0eb1\u0e99_\u0ead\u0eb1\u0e87\u0e84\u0eb2\u0e99_\u0e9e\u0eb8\u0e94_\u0e9e\u0eb0\u0eab\u0eb1\u0e94_\u0eaa\u0eb8\u0e81_\u0ec0\u0eaa\u0ebb\u0eb2".split("_"),weekdaysMin:"\u0e97_\u0e88_\u0ead\u0e84_\u0e9e_\u0e9e\u0eab_\u0eaa\u0e81_\u0eaa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"\u0ea7\u0eb1\u0e99dddd D MMMM YYYY HH:mm"},meridiemParse:/\u0e95\u0ead\u0e99\u0ec0\u0e8a\u0ebb\u0ec9\u0eb2|\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87/,isPM:function(e){return"\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87"===e},meridiem:function(e,t,n){return e<12?"\u0e95\u0ead\u0e99\u0ec0\u0e8a\u0ebb\u0ec9\u0eb2":"\u0e95\u0ead\u0e99\u0ec1\u0ea5\u0e87"},calendar:{sameDay:"[\u0ea1\u0eb7\u0ec9\u0e99\u0eb5\u0ec9\u0ec0\u0ea7\u0ea5\u0eb2] LT",nextDay:"[\u0ea1\u0eb7\u0ec9\u0ead\u0eb7\u0ec8\u0e99\u0ec0\u0ea7\u0ea5\u0eb2] LT",nextWeek:"[\u0ea7\u0eb1\u0e99]dddd[\u0edc\u0ec9\u0eb2\u0ec0\u0ea7\u0ea5\u0eb2] LT",lastDay:"[\u0ea1\u0eb7\u0ec9\u0ea7\u0eb2\u0e99\u0e99\u0eb5\u0ec9\u0ec0\u0ea7\u0ea5\u0eb2] LT",lastWeek:"[\u0ea7\u0eb1\u0e99]dddd[\u0ec1\u0ea5\u0ec9\u0ea7\u0e99\u0eb5\u0ec9\u0ec0\u0ea7\u0ea5\u0eb2] LT",sameElse:"L"},relativeTime:{future:"\u0ead\u0eb5\u0e81 %s",past:"%s\u0e9c\u0ec8\u0eb2\u0e99\u0ea1\u0eb2",s:"\u0e9a\u0ecd\u0ec8\u0ec0\u0e97\u0ebb\u0ec8\u0eb2\u0ec3\u0e94\u0ea7\u0eb4\u0e99\u0eb2\u0e97\u0eb5",ss:"%d \u0ea7\u0eb4\u0e99\u0eb2\u0e97\u0eb5",m:"1 \u0e99\u0eb2\u0e97\u0eb5",mm:"%d \u0e99\u0eb2\u0e97\u0eb5",h:"1 \u0e8a\u0ebb\u0ec8\u0ea7\u0ec2\u0ea1\u0e87",hh:"%d \u0e8a\u0ebb\u0ec8\u0ea7\u0ec2\u0ea1\u0e87",d:"1 \u0ea1\u0eb7\u0ec9",dd:"%d \u0ea1\u0eb7\u0ec9",M:"1 \u0ec0\u0e94\u0eb7\u0ead\u0e99",MM:"%d \u0ec0\u0e94\u0eb7\u0ead\u0e99",y:"1 \u0e9b\u0eb5",yy:"%d \u0e9b\u0eb5"},dayOfMonthOrdinalParse:/(\u0e97\u0eb5\u0ec8)\d{1,2}/,ordinal:function(e){return"\u0e97\u0eb5\u0ec8"+e}})}()},tGlX:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}n("wd/R").defineLocale("de",{months:"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},tT3J:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("tzm-latn",{months:"innayr_br\u02e4ayr\u02e4_mar\u02e4s\u02e4_ibrir_mayyw_ywnyw_ywlywz_\u0263w\u0161t_\u0161wtanbir_kt\u02e4wbr\u02e4_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_br\u02e4ayr\u02e4_mar\u02e4s\u02e4_ibrir_mayyw_ywnyw_ywlywz_\u0263w\u0161t_\u0161wtanbir_kt\u02e4wbr\u02e4_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asi\u1e0dyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asi\u1e0dyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asi\u1e0dyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",ss:"%d imik",m:"minu\u1e0d",mm:"%d minu\u1e0d",h:"sa\u025ba",hh:"%d tassa\u025bin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}()},tUCv:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("jv",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des".split("_"),weekdays:"Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu".split("_"),weekdaysShort:"Min_Sen_Sel_Reb_Kem_Jem_Sep".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sp".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] HH.mm",LLLL:"dddd, D MMMM YYYY [pukul] HH.mm"},meridiemParse:/enjing|siyang|sonten|ndalu/,meridiemHour:function(e,t){return 12===e&&(e=0),"enjing"===t?e:"siyang"===t?e>=11?e:e+12:"sonten"===t||"ndalu"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"enjing":e<15?"siyang":e<19?"sonten":"ndalu"},calendar:{sameDay:"[Dinten puniko pukul] LT",nextDay:"[Mbenjang pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kala wingi pukul] LT",lastWeek:"dddd [kepengker pukul] LT",sameElse:"L"},relativeTime:{future:"wonten ing %s",past:"%s ingkang kepengker",s:"sawetawis detik",ss:"%d detik",m:"setunggal menit",mm:"%d menit",h:"setunggal jam",hh:"%d jam",d:"sedinten",dd:"%d dinten",M:"sewulan",MM:"%d wulan",y:"setaun",yy:"%d taun"},week:{dow:1,doy:7}})}()},u3GI:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}n("wd/R").defineLocale("de-ch",{months:"Januar_Februar_M\xe4rz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Feb._M\xe4rz_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.".split("_"),monthsParseExact:!0,weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY HH:mm",LLLL:"dddd, D. MMMM YYYY HH:mm"},calendar:{sameDay:"[heute um] LT [Uhr]",sameElse:"L",nextDay:"[morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",ss:"%d Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},u67D:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("En8+"),i=function(e){return function(t){for(var n=e[r.a]();;){var i=n.next();if(i.done){t.complete();break}if(t.next(i.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}}},uEye:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_m\xe5ndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_m\xe5n_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m\xe5_ty_on_to_fr_l\xf8".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] H:mm",LLLL:"dddd D. MMMM YYYY [kl.] HH:mm"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I g\xe5r klokka] LT",lastWeek:"[F\xf8reg\xe5ande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s sidan",s:"nokre sekund",ss:"%d sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein m\xe5nad",MM:"%d m\xe5nader",y:"eit \xe5r",yy:"%d \xe5r"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},uMaO:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("mrSG"),i=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return r.__extends(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(n("pugT").a)},uXwI:function(e,t,n){!function(e){"use strict";var t={ss:"sekundes_sekund\u0113m_sekunde_sekundes".split("_"),m:"min\u016btes_min\u016bt\u0113m_min\u016bte_min\u016btes".split("_"),mm:"min\u016btes_min\u016bt\u0113m_min\u016bte_min\u016btes".split("_"),h:"stundas_stund\u0101m_stunda_stundas".split("_"),hh:"stundas_stund\u0101m_stunda_stundas".split("_"),d:"dienas_dien\u0101m_diena_dienas".split("_"),dd:"dienas_dien\u0101m_diena_dienas".split("_"),M:"m\u0113ne\u0161a_m\u0113ne\u0161iem_m\u0113nesis_m\u0113ne\u0161i".split("_"),MM:"m\u0113ne\u0161a_m\u0113ne\u0161iem_m\u0113nesis_m\u0113ne\u0161i".split("_"),y:"gada_gadiem_gads_gadi".split("_"),yy:"gada_gadiem_gads_gadi".split("_")};function n(e,t,n){return n?t%10==1&&t%100!=11?e[2]:e[3]:t%10==1&&t%100!=11?e[0]:e[1]}function r(e,r,i){return e+" "+n(t[i],e,r)}function i(e,r,i){return n(t[i],e,r)}e.defineLocale("lv",{months:"janv\u0101ris_febru\u0101ris_marts_apr\u012blis_maijs_j\u016bnijs_j\u016blijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_j\u016bn_j\u016bl_aug_sep_okt_nov_dec".split("_"),weekdays:"sv\u0113tdiena_pirmdiena_otrdiena_tre\u0161diena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY.",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, HH:mm",LLLL:"YYYY. [gada] D. MMMM, dddd, HH:mm"},calendar:{sameDay:"[\u0160odien pulksten] LT",nextDay:"[R\u012bt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pag\u0101ju\u0161\u0101] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"p\u0113c %s",past:"pirms %s",s:function(e,t){return t?"da\u017eas sekundes":"da\u017e\u0101m sekund\u0113m"},ss:r,m:i,mm:r,h:i,hh:r,d:i,dd:r,M:i,MM:r,y:i,yy:r},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n("wd/R"))},wQk9:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("tzm",{months:"\u2d49\u2d4f\u2d4f\u2d30\u2d62\u2d54_\u2d31\u2d55\u2d30\u2d62\u2d55_\u2d4e\u2d30\u2d55\u2d5a_\u2d49\u2d31\u2d54\u2d49\u2d54_\u2d4e\u2d30\u2d62\u2d62\u2d53_\u2d62\u2d53\u2d4f\u2d62\u2d53_\u2d62\u2d53\u2d4d\u2d62\u2d53\u2d63_\u2d56\u2d53\u2d5b\u2d5c_\u2d5b\u2d53\u2d5c\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d3d\u2d5f\u2d53\u2d31\u2d55_\u2d4f\u2d53\u2d61\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d37\u2d53\u2d4a\u2d4f\u2d31\u2d49\u2d54".split("_"),monthsShort:"\u2d49\u2d4f\u2d4f\u2d30\u2d62\u2d54_\u2d31\u2d55\u2d30\u2d62\u2d55_\u2d4e\u2d30\u2d55\u2d5a_\u2d49\u2d31\u2d54\u2d49\u2d54_\u2d4e\u2d30\u2d62\u2d62\u2d53_\u2d62\u2d53\u2d4f\u2d62\u2d53_\u2d62\u2d53\u2d4d\u2d62\u2d53\u2d63_\u2d56\u2d53\u2d5b\u2d5c_\u2d5b\u2d53\u2d5c\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d3d\u2d5f\u2d53\u2d31\u2d55_\u2d4f\u2d53\u2d61\u2d30\u2d4f\u2d31\u2d49\u2d54_\u2d37\u2d53\u2d4a\u2d4f\u2d31\u2d49\u2d54".split("_"),weekdays:"\u2d30\u2d59\u2d30\u2d4e\u2d30\u2d59_\u2d30\u2d62\u2d4f\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4f\u2d30\u2d59_\u2d30\u2d3d\u2d54\u2d30\u2d59_\u2d30\u2d3d\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4e\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d39\u2d62\u2d30\u2d59".split("_"),weekdaysShort:"\u2d30\u2d59\u2d30\u2d4e\u2d30\u2d59_\u2d30\u2d62\u2d4f\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4f\u2d30\u2d59_\u2d30\u2d3d\u2d54\u2d30\u2d59_\u2d30\u2d3d\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4e\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d39\u2d62\u2d30\u2d59".split("_"),weekdaysMin:"\u2d30\u2d59\u2d30\u2d4e\u2d30\u2d59_\u2d30\u2d62\u2d4f\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4f\u2d30\u2d59_\u2d30\u2d3d\u2d54\u2d30\u2d59_\u2d30\u2d3d\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d4e\u2d61\u2d30\u2d59_\u2d30\u2d59\u2d49\u2d39\u2d62\u2d30\u2d59".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd D MMMM YYYY HH:mm"},calendar:{sameDay:"[\u2d30\u2d59\u2d37\u2d45 \u2d34] LT",nextDay:"[\u2d30\u2d59\u2d3d\u2d30 \u2d34] LT",nextWeek:"dddd [\u2d34] LT",lastDay:"[\u2d30\u2d5a\u2d30\u2d4f\u2d5c \u2d34] LT",lastWeek:"dddd [\u2d34] LT",sameElse:"L"},relativeTime:{future:"\u2d37\u2d30\u2d37\u2d45 \u2d59 \u2d62\u2d30\u2d4f %s",past:"\u2d62\u2d30\u2d4f %s",s:"\u2d49\u2d4e\u2d49\u2d3d",ss:"%d \u2d49\u2d4e\u2d49\u2d3d",m:"\u2d4e\u2d49\u2d4f\u2d53\u2d3a",mm:"%d \u2d4e\u2d49\u2d4f\u2d53\u2d3a",h:"\u2d59\u2d30\u2d44\u2d30",hh:"%d \u2d5c\u2d30\u2d59\u2d59\u2d30\u2d44\u2d49\u2d4f",d:"\u2d30\u2d59\u2d59",dd:"%d o\u2d59\u2d59\u2d30\u2d4f",M:"\u2d30\u2d62o\u2d53\u2d54",MM:"%d \u2d49\u2d62\u2d62\u2d49\u2d54\u2d4f",y:"\u2d30\u2d59\u2d33\u2d30\u2d59",yy:"%d \u2d49\u2d59\u2d33\u2d30\u2d59\u2d4f"},week:{dow:6,doy:12}})}()},"wd/R":function(e,t,n){(function(e){e.exports=function(){"use strict";var t,r;function i(){return t.apply(null,arguments)}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e){return void 0===e}function u(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function l(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function c(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function h(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function d(e,t){for(var n in t)h(t,n)&&(e[n]=t[n]);return h(t,"toString")&&(e.toString=t.toString),h(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,r){return Dt(e,t,n,r,!0).utc()}function p(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function _(e){if(null==e._isValid){var t=p(e),n=r.call(t.parsedDateParts,function(e){return null!=e}),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function m(e){var t=f(NaN);return null!=e?d(p(t),e):p(t).userInvalidated=!0,t}r=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};var g=i.momentProperties=[];function v(e,t){var n,r,i;if(s(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),s(t._i)||(e._i=t._i),s(t._f)||(e._f=t._f),s(t._l)||(e._l=t._l),s(t._strict)||(e._strict=t._strict),s(t._tzm)||(e._tzm=t._tzm),s(t._isUTC)||(e._isUTC=t._isUTC),s(t._offset)||(e._offset=t._offset),s(t._pf)||(e._pf=p(t)),s(t._locale)||(e._locale=t._locale),g.length>0)for(n=0;n<g.length;n++)s(i=t[r=g[n]])||(e[r]=i);return e}var y=!1;function b(e){v(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===y&&(y=!0,i.updateOffset(this),y=!1)}function T(e){return e instanceof b||null!=e&&null!=e._isAMomentObject}function E(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function x(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=E(t)),n}function M(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&x(e[r])!==x(t[r]))&&a++;return a+o}function A(e){!1===i.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function S(e,t){var n=!0;return d(function(){if(null!=i.deprecationHandler&&i.deprecationHandler(null,e),n){for(var r,o=[],a=0;a<arguments.length;a++){if(r="","object"==typeof arguments[a]){for(var s in r+="\n["+a+"] ",arguments[0])r+=s+": "+arguments[0][s]+", ";r=r.slice(0,-2)}else r=arguments[a];o.push(r)}A(e+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)},t)}var C,P={};function R(e,t){null!=i.deprecationHandler&&i.deprecationHandler(e,t),P[e]||(A(t),P[e]=!0)}function D(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function O(e,t){var n,r=d({},e);for(n in t)h(t,n)&&(a(e[n])&&a(t[n])?(r[n]={},d(r[n],e[n]),d(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)h(e,n)&&!h(t,n)&&a(e[n])&&(r[n]=d({},r[n]));return r}function w(e){null!=e&&this.set(e)}i.suppressDeprecationWarnings=!1,i.deprecationHandler=null,C=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)h(e,t)&&n.push(t);return n};var L={};function I(e,t){var n=e.toLowerCase();L[n]=L[n+"s"]=L[t]=e}function F(e){return"string"==typeof e?L[e]||L[e.toLowerCase()]:void 0}function N(e){var t,n,r={};for(n in e)h(e,n)&&(t=F(n))&&(r[t]=e[n]);return r}var B={};function k(e,t){B[e]=t}function U(e,t,n){var r=""+Math.abs(e);return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,t-r.length)).toString().substr(1)+r}var V=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,G=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,j={},z={};function Y(e,t,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),e&&(z[e]=i),t&&(z[t[0]]=function(){return U(i.apply(this,arguments),t[1],t[2])}),n&&(z[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function H(e,t){return e.isValid()?(t=W(t,e.localeData()),j[t]=j[t]||function(e){var t,n,r,i=e.match(V);for(t=0,n=i.length;t<n;t++)i[t]=z[i[t]]?z[i[t]]:(r=i[t]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(t){var r,o="";for(r=0;r<n;r++)o+=D(i[r])?i[r].call(t,e):i[r];return o}}(t),j[t](e)):e.localeData().invalidDate()}function W(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(G.lastIndex=0;n>=0&&G.test(e);)e=e.replace(G,r),G.lastIndex=0,n-=1;return e}var X=/\d/,K=/\d\d/,Q=/\d{3}/,q=/\d{4}/,Z=/[+-]?\d{6}/,J=/\d\d?/,$=/\d\d\d\d?/,ee=/\d\d\d\d\d\d?/,te=/\d{1,3}/,ne=/\d{1,4}/,re=/[+-]?\d{1,6}/,ie=/\d+/,oe=/[+-]?\d+/,ae=/Z|[+-]\d\d:?\d\d/gi,se=/Z|[+-]\d\d(?::?\d\d)?/gi,ue=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,le={};function ce(e,t,n){le[e]=D(t)?t:function(e,r){return e&&n?n:t}}function he(e,t){return h(le,e)?le[e](t._strict,t._locale):new RegExp(de(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})))}function de(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var fe={};function pe(e,t){var n,r=t;for("string"==typeof e&&(e=[e]),u(t)&&(r=function(e,n){n[t]=x(e)}),n=0;n<e.length;n++)fe[e[n]]=r}function _e(e,t){pe(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function me(e,t,n){null!=t&&h(fe,e)&&fe[e](t,n._a,n,e)}var ge=0,ve=1,ye=2,be=3,Te=4,Ee=5,xe=6,Me=7,Ae=8;function Se(e){return Ce(e)?366:365}function Ce(e){return e%4==0&&e%100!=0||e%400==0}Y("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),Y(0,["YY",2],0,function(){return this.year()%100}),Y(0,["YYYY",4],0,"year"),Y(0,["YYYYY",5],0,"year"),Y(0,["YYYYYY",6,!0],0,"year"),I("year","y"),k("year",1),ce("Y",oe),ce("YY",J,K),ce("YYYY",ne,q),ce("YYYYY",re,Z),ce("YYYYYY",re,Z),pe(["YYYYY","YYYYYY"],ge),pe("YYYY",function(e,t){t[ge]=2===e.length?i.parseTwoDigitYear(e):x(e)}),pe("YY",function(e,t){t[ge]=i.parseTwoDigitYear(e)}),pe("Y",function(e,t){t[ge]=parseInt(e,10)}),i.parseTwoDigitYear=function(e){return x(e)+(x(e)>68?1900:2e3)};var Pe,Re=De("FullYear",!0);function De(e,t){return function(n){return null!=n?(we(this,e,n),i.updateOffset(this,t),this):Oe(this,e)}}function Oe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function we(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&Ce(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Le(n,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function Le(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=(t%12+12)%12;return e+=(t-n)/12,1===n?Ce(e)?29:28:31-n%7%2}Pe=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},Y("M",["MM",2],"Mo",function(){return this.month()+1}),Y("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),Y("MMMM",0,0,function(e){return this.localeData().months(this,e)}),I("month","M"),k("month",8),ce("M",J),ce("MM",J,K),ce("MMM",function(e,t){return t.monthsShortRegex(e)}),ce("MMMM",function(e,t){return t.monthsRegex(e)}),pe(["M","MM"],function(e,t){t[ve]=x(e)-1}),pe(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[ve]=i:p(n).invalidMonth=e});var Ie=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Fe="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Ne="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Be(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=x(t);else if(!u(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Le(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ke(e){return null!=e?(Be(this,e),i.updateOffset(this,!0),this):Oe(this,"Month")}var Ue=ue,Ve=ue;function Ge(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=f([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=de(r[t]),i[t]=de(i[t]);for(t=0;t<24;t++)o[t]=de(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function je(e){var t;if(e<100&&e>=0){var n=Array.prototype.slice.call(arguments);n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)}else t=new Date(Date.UTC.apply(null,arguments));return t}function ze(e,t,n){var r=7+t-n;return-(7+je(e,0,r).getUTCDay()-t)%7+r-1}function Ye(e,t,n,r,i){var o,a,s=1+7*(t-1)+(7+n-r)%7+ze(e,r,i);return s<=0?a=Se(o=e-1)+s:s>Se(e)?(o=e+1,a=s-Se(e)):(o=e,a=s),{year:o,dayOfYear:a}}function He(e,t,n){var r,i,o=ze(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?r=a+We(i=e.year()-1,t,n):a>We(e.year(),t,n)?(r=a-We(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function We(e,t,n){var r=ze(e,t,n),i=ze(e+1,t,n);return(Se(e)-r+i)/7}function Xe(e,t){return e.slice(t,7).concat(e.slice(0,t))}Y("w",["ww",2],"wo","week"),Y("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),k("week",5),k("isoWeek",5),ce("w",J),ce("ww",J,K),ce("W",J),ce("WW",J,K),_e(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=x(e)}),Y("d",0,"do","day"),Y("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),Y("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),Y("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),Y("e",0,0,"weekday"),Y("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),k("day",11),k("weekday",11),k("isoWeekday",11),ce("d",J),ce("e",J),ce("E",J),ce("dd",function(e,t){return t.weekdaysMinRegex(e)}),ce("ddd",function(e,t){return t.weekdaysShortRegex(e)}),ce("dddd",function(e,t){return t.weekdaysRegex(e)}),_e(["dd","ddd","dddd"],function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:p(n).invalidWeekday=e}),_e(["d","e","E"],function(e,t,n,r){t[r]=x(e)});var Ke="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Qe="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),qe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Ze=ue,Je=ue,$e=ue;function et(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],u=[],l=[];for(t=0;t<7;t++)n=f([2e3,1]).day(t),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),u.push(o),l.push(r),l.push(i),l.push(o);for(a.sort(e),s.sort(e),u.sort(e),l.sort(e),t=0;t<7;t++)s[t]=de(s[t]),u[t]=de(u[t]),l[t]=de(l[t]);this._weekdaysRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function tt(){return this.hours()%12||12}function nt(e,t){Y(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function rt(e,t){return t._meridiemParse}Y("H",["HH",2],0,"hour"),Y("h",["hh",2],0,tt),Y("k",["kk",2],0,function(){return this.hours()||24}),Y("hmm",0,0,function(){return""+tt.apply(this)+U(this.minutes(),2)}),Y("hmmss",0,0,function(){return""+tt.apply(this)+U(this.minutes(),2)+U(this.seconds(),2)}),Y("Hmm",0,0,function(){return""+this.hours()+U(this.minutes(),2)}),Y("Hmmss",0,0,function(){return""+this.hours()+U(this.minutes(),2)+U(this.seconds(),2)}),nt("a",!0),nt("A",!1),I("hour","h"),k("hour",13),ce("a",rt),ce("A",rt),ce("H",J),ce("h",J),ce("k",J),ce("HH",J,K),ce("hh",J,K),ce("kk",J,K),ce("hmm",$),ce("hmmss",ee),ce("Hmm",$),ce("Hmmss",ee),pe(["H","HH"],be),pe(["k","kk"],function(e,t,n){var r=x(e);t[be]=24===r?0:r}),pe(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),pe(["h","hh"],function(e,t,n){t[be]=x(e),p(n).bigHour=!0}),pe("hmm",function(e,t,n){var r=e.length-2;t[be]=x(e.substr(0,r)),t[Te]=x(e.substr(r)),p(n).bigHour=!0}),pe("hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[be]=x(e.substr(0,r)),t[Te]=x(e.substr(r,2)),t[Ee]=x(e.substr(i)),p(n).bigHour=!0}),pe("Hmm",function(e,t,n){var r=e.length-2;t[be]=x(e.substr(0,r)),t[Te]=x(e.substr(r))}),pe("Hmmss",function(e,t,n){var r=e.length-4,i=e.length-2;t[be]=x(e.substr(0,r)),t[Te]=x(e.substr(r,2)),t[Ee]=x(e.substr(i))});var it,ot=De("Hours",!0),at={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Fe,monthsShort:Ne,week:{dow:0,doy:6},weekdays:Ke,weekdaysMin:qe,weekdaysShort:Qe,meridiemParse:/[ap]\.?m?\.?/i},st={},ut={};function lt(e){return e?e.toLowerCase().replace("_","-"):e}function ct(t){var r=null;if(!st[t]&&void 0!==e&&e&&e.exports)try{r=it._abbr,n("RnhZ")("./"+t),ht(r)}catch(i){}return st[t]}function ht(e,t){var n;return e&&((n=s(t)?ft(e):dt(e,t))?it=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),it._abbr}function dt(e,t){if(null!==t){var n,r=at;if(t.abbr=e,null!=st[e])R("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=st[e]._config;else if(null!=t.parentLocale)if(null!=st[t.parentLocale])r=st[t.parentLocale]._config;else{if(null==(n=ct(t.parentLocale)))return ut[t.parentLocale]||(ut[t.parentLocale]=[]),ut[t.parentLocale].push({name:e,config:t}),null;r=n._config}return st[e]=new w(O(r,t)),ut[e]&&ut[e].forEach(function(e){dt(e.name,e.config)}),ht(e),st[e]}return delete st[e],null}function ft(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return it;if(!o(e)){if(t=ct(e))return t;e=[e]}return function(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=lt(e[o]).split("-")).length,n=(n=lt(e[o+1]))?n.split("-"):null;t>0;){if(r=ct(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&M(i,n,!0)>=t-1)break;t--}o++}return it}(e)}function pt(e){var t,n=e._a;return n&&-2===p(e).overflow&&(t=n[ve]<0||n[ve]>11?ve:n[ye]<1||n[ye]>Le(n[ge],n[ve])?ye:n[be]<0||n[be]>24||24===n[be]&&(0!==n[Te]||0!==n[Ee]||0!==n[xe])?be:n[Te]<0||n[Te]>59?Te:n[Ee]<0||n[Ee]>59?Ee:n[xe]<0||n[xe]>999?xe:-1,p(e)._overflowDayOfYear&&(t<ge||t>ye)&&(t=ye),p(e)._overflowWeeks&&-1===t&&(t=Me),p(e)._overflowWeekday&&-1===t&&(t=Ae),p(e).overflow=t),e}function _t(e,t,n){return null!=e?e:null!=t?t:n}function mt(e){var t,n,r,o,a,s=[];if(!e._d){for(r=function(e){var t=new Date(i.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}(e),e._w&&null==e._a[ye]&&null==e._a[ve]&&function(e){var t,n,r,i,o,a,s,u;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)o=1,a=4,n=_t(t.GG,e._a[ge],He(Ot(),1,4).year),r=_t(t.W,1),((i=_t(t.E,1))<1||i>7)&&(u=!0);else{o=e._locale._week.dow,a=e._locale._week.doy;var l=He(Ot(),o,a);n=_t(t.gg,e._a[ge],l.year),r=_t(t.w,l.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(u=!0)):i=o}r<1||r>We(n,o,a)?p(e)._overflowWeeks=!0:null!=u?p(e)._overflowWeekday=!0:(s=Ye(n,r,i,o,a),e._a[ge]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(a=_t(e._a[ge],r[ge]),(e._dayOfYear>Se(a)||0===e._dayOfYear)&&(p(e)._overflowDayOfYear=!0),n=je(a,0,e._dayOfYear),e._a[ve]=n.getUTCMonth(),e._a[ye]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=r[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[be]&&0===e._a[Te]&&0===e._a[Ee]&&0===e._a[xe]&&(e._nextDay=!0,e._a[be]=0),e._d=(e._useUTC?je:function(e,t,n,r,i,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,i,o,a),s}).apply(null,s),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[be]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(p(e).weekdayMismatch=!0)}}var gt=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,vt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,yt=/Z|[+-]\d\d(?::?\d\d)?/,bt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Tt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Et=/^\/?Date\((\-?\d+)/i;function xt(e){var t,n,r,i,o,a,s=e._i,u=gt.exec(s)||vt.exec(s);if(u){for(p(e).iso=!0,t=0,n=bt.length;t<n;t++)if(bt[t][1].exec(u[1])){i=bt[t][0],r=!1!==bt[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=Tt.length;t<n;t++)if(Tt[t][1].exec(u[3])){o=(u[2]||" ")+Tt[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!yt.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),Pt(e)}else e._isValid=!1}var Mt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function At(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}var St={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ct(e){var t,n,r,i,o,a,s=Mt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(s){var u=(t=s[3],n=s[2],r=s[5],i=s[6],o=s[7],a=[At(s[4]),Ne.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)],o&&a.push(parseInt(o,10)),a);if(!function(e,t,n){return!e||Qe.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(p(n).weekdayMismatch=!0,n._isValid=!1,!1)}(s[1],u,e))return;e._a=u,e._tzm=function(e,t,n){if(e)return St[e];if(s[9])return 0;var r=parseInt(s[10],10),i=r%100;return(r-i)/100*60+i}(s[8]),e._d=je.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),p(e).rfc2822=!0}else e._isValid=!1}function Pt(e){if(e._f!==i.ISO_8601)if(e._f!==i.RFC_2822){e._a=[],p(e).empty=!0;var t,n,r,o,a,s=""+e._i,u=s.length,l=0;for(r=W(e._f,e._locale).match(V)||[],t=0;t<r.length;t++)(n=(s.match(he(o=r[t],e))||[])[0])&&((a=s.substr(0,s.indexOf(n))).length>0&&p(e).unusedInput.push(a),s=s.slice(s.indexOf(n)+n.length),l+=n.length),z[o]?(n?p(e).empty=!1:p(e).unusedTokens.push(o),me(o,n,e)):e._strict&&!n&&p(e).unusedTokens.push(o);p(e).charsLeftOver=u-l,s.length>0&&p(e).unusedInput.push(s),e._a[be]<=12&&!0===p(e).bigHour&&e._a[be]>0&&(p(e).bigHour=void 0),p(e).parsedDateParts=e._a.slice(0),p(e).meridiem=e._meridiem,e._a[be]=function(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}(e._locale,e._a[be],e._meridiem),mt(e),pt(e)}else Ct(e);else xt(e)}function Rt(e){var t=e._i,n=e._f;return e._locale=e._locale||ft(e._l),null===t||void 0===n&&""===t?m({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),T(t)?new b(pt(t)):(l(t)?e._d=t:o(n)?function(e){var t,n,r,i,o;if(0===e._f.length)return p(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,t=v({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Pt(t),_(t)&&(o+=p(t).charsLeftOver,o+=10*p(t).unusedTokens.length,p(t).score=o,(null==r||o<r)&&(r=o,n=t));d(e,n||t)}(e):n?Pt(e):function(e){var t=e._i;s(t)?e._d=new Date(i.now()):l(t)?e._d=new Date(t.valueOf()):"string"==typeof t?function(e){var t=Et.exec(e._i);null===t?(xt(e),!1===e._isValid&&(delete e._isValid,Ct(e),!1===e._isValid&&(delete e._isValid,i.createFromInputFallback(e)))):e._d=new Date(+t[1])}(e):o(t)?(e._a=c(t.slice(0),function(e){return parseInt(e,10)}),mt(e)):a(t)?function(e){if(!e._d){var t=N(e._i);e._a=c([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),mt(e)}}(e):u(t)?e._d=new Date(t):i.createFromInputFallback(e)}(e),_(e)||(e._d=null),e))}function Dt(e,t,n,r,i){var s,u={};return!0!==n&&!1!==n||(r=n,n=void 0),(a(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||o(e)&&0===e.length)&&(e=void 0),u._isAMomentObject=!0,u._useUTC=u._isUTC=i,u._l=n,u._i=e,u._f=t,u._strict=r,(s=new b(pt(Rt(u))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Ot(e,t,n,r){return Dt(e,t,n,r,!1)}i.createFromInputFallback=S("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),i.ISO_8601=function(){},i.RFC_2822=function(){};var wt=S("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ot.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:m()}),Lt=S("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=Ot.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:m()});function It(e,t){var n,r;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return Ot();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}var Ft=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Nt(e){var t=N(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,u=t.minute||0,l=t.second||0,c=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Pe.call(Ft,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var n=!1,r=0;r<Ft.length;++r)if(e[Ft[r]]){if(n)return!1;parseFloat(e[Ft[r]])!==x(e[Ft[r]])&&(n=!0)}return!0}(t),this._milliseconds=+c+1e3*l+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=ft(),this._bubble()}function Bt(e){return e instanceof Nt}function kt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Ut(e,t){Y(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+U(~~(e/60),2)+t+U(~~e%60,2)})}Ut("Z",":"),Ut("ZZ",""),ce("Z",se),ce("ZZ",se),pe(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Gt(se,e)});var Vt=/([\+\-]|\d\d)/gi;function Gt(e,t){var n=(t||"").match(e);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Vt)||["-",0,0],i=60*r[1]+x(r[2]);return 0===i?0:"+"===r[0]?i:-i}function jt(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(T(e)||l(e)?e.valueOf():Ot(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),i.updateOffset(n,!1),n):Ot(e).local()}function zt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Yt(){return!!this.isValid()&&this._isUTC&&0===this._offset}i.updateOffset=function(){};var Ht=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Wt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Xt(e,t){var n,r,i,o,a,s,l=e,c=null;return Bt(e)?l={ms:e._milliseconds,d:e._days,M:e._months}:u(e)?(l={},t?l[t]=e:l.milliseconds=e):(c=Ht.exec(e))?(n="-"===c[1]?-1:1,l={y:0,d:x(c[ye])*n,h:x(c[be])*n,m:x(c[Te])*n,s:x(c[Ee])*n,ms:x(kt(1e3*c[xe]))*n}):(c=Wt.exec(e))?l={y:Kt(c[2],n="-"===c[1]?-1:1),M:Kt(c[3],n),w:Kt(c[4],n),d:Kt(c[5],n),h:Kt(c[6],n),m:Kt(c[7],n),s:Kt(c[8],n)}:null==l?l={}:"object"==typeof l&&("from"in l||"to"in l)&&(o=Ot(l.from),a=Ot(l.to),i=o.isValid()&&a.isValid()?(a=jt(a,o),o.isBefore(a)?s=Qt(o,a):((s=Qt(a,o)).milliseconds=-s.milliseconds,s.months=-s.months),s):{milliseconds:0,months:0},(l={}).ms=i.milliseconds,l.M=i.months),r=new Nt(l),Bt(e)&&h(e,"_locale")&&(r._locale=e._locale),r}function Kt(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Qt(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function qt(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(R(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Zt(this,Xt(n="string"==typeof n?+n:n,r),e),this}}function Zt(e,t,n,r){var o=t._milliseconds,a=kt(t._days),s=kt(t._months);e.isValid()&&(r=null==r||r,s&&Be(e,Oe(e,"Month")+s*n),a&&we(e,"Date",Oe(e,"Date")+a*n),o&&e._d.setTime(e._d.valueOf()+o*n),r&&i.updateOffset(e,a||s))}Xt.fn=Nt.prototype,Xt.invalid=function(){return Xt(NaN)};var Jt=qt(1,"add"),$t=qt(-1,"subtract");function en(e,t){var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function tn(e){var t;return void 0===e?this._locale._abbr:(null!=(t=ft(e))&&(this._locale=t),this)}i.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",i.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var nn=S("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function rn(){return this._locale}var on=126227808e5;function an(e,t){return(e%t+t)%t}function sn(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-on:new Date(e,t,n).valueOf()}function un(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-on:Date.UTC(e,t,n)}function ln(e,t){Y(0,[e,e.length],0,t)}function cn(e,t,n,r,i){var o;return null==e?He(this,r,i).year:(t>(o=We(e,r,i))&&(t=o),(function(e,t,n,r,i){var o=Ye(e,t,n,r,i),a=je(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}).call(this,e,t,n,r,i))}Y(0,["gg",2],0,function(){return this.weekYear()%100}),Y(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ln("gggg","weekYear"),ln("ggggg","weekYear"),ln("GGGG","isoWeekYear"),ln("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),k("weekYear",1),k("isoWeekYear",1),ce("G",oe),ce("g",oe),ce("GG",J,K),ce("gg",J,K),ce("GGGG",ne,q),ce("gggg",ne,q),ce("GGGGG",re,Z),ce("ggggg",re,Z),_e(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=x(e)}),_e(["gg","GG"],function(e,t,n,r){t[r]=i.parseTwoDigitYear(e)}),Y("Q",0,"Qo","quarter"),I("quarter","Q"),k("quarter",7),ce("Q",X),pe("Q",function(e,t){t[ve]=3*(x(e)-1)}),Y("D",["DD",2],"Do","date"),I("date","D"),k("date",9),ce("D",J),ce("DD",J,K),ce("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),pe(["D","DD"],ye),pe("Do",function(e,t){t[ye]=x(e.match(J)[0])});var hn=De("Date",!0);Y("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),k("dayOfYear",4),ce("DDD",te),ce("DDDD",Q),pe(["DDD","DDDD"],function(e,t,n){n._dayOfYear=x(e)}),Y("m",["mm",2],0,"minute"),I("minute","m"),k("minute",14),ce("m",J),ce("mm",J,K),pe(["m","mm"],Te);var dn=De("Minutes",!1);Y("s",["ss",2],0,"second"),I("second","s"),k("second",15),ce("s",J),ce("ss",J,K),pe(["s","ss"],Ee);var fn,pn=De("Seconds",!1);for(Y("S",0,0,function(){return~~(this.millisecond()/100)}),Y(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Y(0,["SSS",3],0,"millisecond"),Y(0,["SSSS",4],0,function(){return 10*this.millisecond()}),Y(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),Y(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),Y(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),Y(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),Y(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),I("millisecond","ms"),k("millisecond",16),ce("S",te,X),ce("SS",te,K),ce("SSS",te,Q),fn="SSSS";fn.length<=9;fn+="S")ce(fn,ie);function _n(e,t){t[xe]=x(1e3*("0."+e))}for(fn="S";fn.length<=9;fn+="S")pe(fn,_n);var mn=De("Milliseconds",!1);Y("z",0,0,"zoneAbbr"),Y("zz",0,0,"zoneName");var gn=b.prototype;function vn(e){return e}gn.add=Jt,gn.calendar=function(e,t){var n=e||Ot(),r=jt(n,this).startOf("day"),o=i.calendarFormat(this,r)||"sameElse",a=t&&(D(t[o])?t[o].call(this,n):t[o]);return this.format(a||this.localeData().calendar(o,this,Ot(n)))},gn.clone=function(){return new b(this)},gn.diff=function(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=jt(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=F(t)){case"year":o=en(this,r)/12;break;case"month":o=en(this,r);break;case"quarter":o=en(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:E(o)},gn.endOf=function(e){var t;if(void 0===(e=F(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?un:sn;switch(e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=36e5-an(t+(this._isUTC?0:6e4*this.utcOffset()),36e5)-1;break;case"minute":t=this._d.valueOf(),t+=6e4-an(t,6e4)-1;break;case"second":t=this._d.valueOf(),t+=1e3-an(t,1e3)-1}return this._d.setTime(t),i.updateOffset(this,!0),this},gn.format=function(e){e||(e=this.isUtc()?i.defaultFormatUtc:i.defaultFormat);var t=H(this,e);return this.localeData().postformat(t)},gn.from=function(e,t){return this.isValid()&&(T(e)&&e.isValid()||Ot(e).isValid())?Xt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},gn.fromNow=function(e){return this.from(Ot(),e)},gn.to=function(e,t){return this.isValid()&&(T(e)&&e.isValid()||Ot(e).isValid())?Xt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},gn.toNow=function(e){return this.to(Ot(),e)},gn.get=function(e){return D(this[e=F(e)])?this[e]():this},gn.invalidAt=function(){return p(this).overflow},gn.isAfter=function(e,t){var n=T(e)?e:Ot(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=F(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())},gn.isBefore=function(e,t){var n=T(e)?e:Ot(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=F(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())},gn.isBetween=function(e,t,n,r){var i=T(e)?e:Ot(e),o=T(t)?t:Ot(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))},gn.isSame=function(e,t){var n,r=T(e)?e:Ot(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=F(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))},gn.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},gn.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},gn.isValid=function(){return _(this)},gn.lang=nn,gn.locale=tn,gn.localeData=rn,gn.max=Lt,gn.min=wt,gn.parsingFlags=function(){return d({},p(this))},gn.set=function(e,t){if("object"==typeof e)for(var n=function(e){var t=[];for(var n in e)t.push({unit:n,priority:B[n]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=N(e)),r=0;r<n.length;r++)this[n[r].unit](e[n[r].unit]);else if(D(this[e=F(e)]))return this[e](t);return this},gn.startOf=function(e){var t;if(void 0===(e=F(e))||"millisecond"===e||!this.isValid())return this;var n=this._isUTC?un:sn;switch(e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=an(t+(this._isUTC?0:6e4*this.utcOffset()),36e5);break;case"minute":t=this._d.valueOf(),t-=an(t,6e4);break;case"second":t=this._d.valueOf(),t-=an(t,1e3)}return this._d.setTime(t),i.updateOffset(this,!0),this},gn.subtract=$t,gn.toArray=function(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]},gn.toObject=function(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}},gn.toDate=function(){return new Date(this.valueOf())},gn.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},gn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY";return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+t+'[")]')},gn.toJSON=function(){return this.isValid()?this.toISOString():null},gn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},gn.unix=function(){return Math.floor(this.valueOf()/1e3)},gn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},gn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},gn.year=Re,gn.isLeapYear=function(){return Ce(this.year())},gn.weekYear=function(e){return cn.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},gn.isoWeekYear=function(e){return cn.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},gn.quarter=gn.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},gn.month=ke,gn.daysInMonth=function(){return Le(this.year(),this.month())},gn.week=gn.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},gn.isoWeek=gn.isoWeeks=function(e){var t=He(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},gn.weeksInYear=function(){var e=this.localeData()._week;return We(this.year(),e.dow,e.doy)},gn.isoWeeksInYear=function(){return We(this.year(),1,4)},gn.date=hn,gn.day=gn.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=function(e,t){return"string"!=typeof e?e:isNaN(e)?"number"==typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}(e,this.localeData()),this.add(e-t,"d")):t},gn.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},gn.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=function(e,t){return"string"==typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7},gn.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},gn.hour=gn.hours=ot,gn.minute=gn.minutes=dn,gn.second=gn.seconds=pn,gn.millisecond=gn.milliseconds=mn,gn.utcOffset=function(e,t,n){var r,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Gt(se,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(r=zt(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),o!==e&&(!t||this._changeInProgress?Zt(this,Xt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,i.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:zt(this)},gn.utc=function(e){return this.utcOffset(0,e)},gn.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(zt(this),"m")),this},gn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Gt(ae,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},gn.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?Ot(e).utcOffset():0,(this.utcOffset()-e)%60==0)},gn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},gn.isLocal=function(){return!!this.isValid()&&!this._isUTC},gn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},gn.isUtc=Yt,gn.isUTC=Yt,gn.zoneAbbr=function(){return this._isUTC?"UTC":""},gn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},gn.dates=S("dates accessor is deprecated. Use date instead.",hn),gn.months=S("months accessor is deprecated. Use month instead",ke),gn.years=S("years accessor is deprecated. Use year instead",Re),gn.zone=S("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),gn.isDSTShifted=S("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var e={};if(v(e,this),(e=Rt(e))._a){var t=e._isUTC?f(e._a):Ot(e._a);this._isDSTShifted=this.isValid()&&M(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted});var yn=w.prototype;function bn(e,t,n,r){var i=ft(),o=f().set(r,t);return i[n](o,e)}function Tn(e,t,n){if(u(e)&&(t=e,e=void 0),e=e||"",null!=t)return bn(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=bn(e,r,n,"month");return i}function En(e,t,n,r){"boolean"==typeof e?(u(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,u(t)&&(n=t,t=void 0),t=t||"");var i,o=ft(),a=e?o._week.dow:0;if(null!=n)return bn(t,(n+a)%7,r,"day");var s=[];for(i=0;i<7;i++)s[i]=bn(t,(i+a)%7,r,"day");return s}yn.calendar=function(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return D(r)?r.call(t,n):r},yn.longDateFormat=function(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},yn.invalidDate=function(){return this._invalidDate},yn.ordinal=function(e){return this._ordinal.replace("%d",e)},yn.preparse=vn,yn.postformat=vn,yn.relativeTime=function(e,t,n,r){var i=this._relativeTime[n];return D(i)?i(e,t,n,r):i.replace(/%d/i,e)},yn.pastFuture=function(e,t){var n=this._relativeTime[e>0?"future":"past"];return D(n)?n(t):n.replace(/%s/i,t)},yn.set=function(e){var t,n;for(n in e)D(t=e[n])?this[n]=t:this["_"+n]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},yn.months=function(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||Ie).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone},yn.monthsShort=function(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[Ie.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},yn.monthsParse=function(e,t,n){var r,i,o;if(this._monthsParseExact)return(function(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=f([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Pe.call(this._shortMonthsParse,a))?i:null:-1!==(i=Pe.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Pe.call(this._shortMonthsParse,a))?i:-1!==(i=Pe.call(this._longMonthsParse,a))?i:null:-1!==(i=Pe.call(this._longMonthsParse,a))?i:-1!==(i=Pe.call(this._shortMonthsParse,a))?i:null}).call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},yn.monthsRegex=function(e){return this._monthsParseExact?(h(this,"_monthsRegex")||Ge.call(this),e?this._monthsStrictRegex:this._monthsRegex):(h(this,"_monthsRegex")||(this._monthsRegex=Ve),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},yn.monthsShortRegex=function(e){return this._monthsParseExact?(h(this,"_monthsRegex")||Ge.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(h(this,"_monthsShortRegex")||(this._monthsShortRegex=Ue),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},yn.week=function(e){return He(e,this._week.dow,this._week.doy).week},yn.firstDayOfYear=function(){return this._week.doy},yn.firstDayOfWeek=function(){return this._week.dow},yn.weekdays=function(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?Xe(n,this._week.dow):e?n[e.day()]:n},yn.weekdaysMin=function(e){return!0===e?Xe(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin},yn.weekdaysShort=function(e){return!0===e?Xe(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort},yn.weekdaysParse=function(e,t,n){var r,i,o;if(this._weekdaysParseExact)return(function(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=f([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Pe.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Pe.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Pe.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Pe.call(this._weekdaysParse,a))?i:-1!==(i=Pe.call(this._shortWeekdaysParse,a))?i:-1!==(i=Pe.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Pe.call(this._shortWeekdaysParse,a))?i:-1!==(i=Pe.call(this._weekdaysParse,a))?i:-1!==(i=Pe.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Pe.call(this._minWeekdaysParse,a))?i:-1!==(i=Pe.call(this._weekdaysParse,a))?i:-1!==(i=Pe.call(this._shortWeekdaysParse,a))?i:null}).call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=f([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}},yn.weekdaysRegex=function(e){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||et.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(h(this,"_weekdaysRegex")||(this._weekdaysRegex=Ze),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},yn.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||et.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(h(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Je),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},yn.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(h(this,"_weekdaysRegex")||et.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(h(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=$e),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},yn.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},yn.meridiem=function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},ht("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===x(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),i.lang=S("moment.lang is deprecated. Use moment.locale instead.",ht),i.langData=S("moment.langData is deprecated. Use moment.localeData instead.",ft);var xn=Math.abs;function Mn(e,t,n,r){var i=Xt(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function An(e){return e<0?Math.floor(e):Math.ceil(e)}function Sn(e){return 4800*e/146097}function Cn(e){return 146097*e/4800}function Pn(e){return function(){return this.as(e)}}var Rn=Pn("ms"),Dn=Pn("s"),On=Pn("m"),wn=Pn("h"),Ln=Pn("d"),In=Pn("w"),Fn=Pn("M"),Nn=Pn("Q"),Bn=Pn("y");function kn(e){return function(){return this.isValid()?this._data[e]:NaN}}var Un=kn("milliseconds"),Vn=kn("seconds"),Gn=kn("minutes"),jn=kn("hours"),zn=kn("days"),Yn=kn("months"),Hn=kn("years"),Wn=Math.round,Xn={ss:44,s:45,m:45,h:22,d:26,M:11},Kn=Math.abs;function Qn(e){return(e>0)-(e<0)||+e}function qn(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n=Kn(this._milliseconds)/1e3,r=Kn(this._days),i=Kn(this._months);e=E(n/60),t=E(e/60),n%=60,e%=60;var o=E(i/12),a=i%=12,s=r,u=t,l=e,c=n?n.toFixed(3).replace(/\.?0+$/,""):"",h=this.asSeconds();if(!h)return"P0D";var d=h<0?"-":"",f=Qn(this._months)!==Qn(h)?"-":"",p=Qn(this._days)!==Qn(h)?"-":"",_=Qn(this._milliseconds)!==Qn(h)?"-":"";return d+"P"+(o?f+o+"Y":"")+(a?f+a+"M":"")+(s?p+s+"D":"")+(u||l||c?"T":"")+(u?_+u+"H":"")+(l?_+l+"M":"")+(c?_+c+"S":"")}var Zn=Nt.prototype;return Zn.isValid=function(){return this._isValid},Zn.abs=function(){var e=this._data;return this._milliseconds=xn(this._milliseconds),this._days=xn(this._days),this._months=xn(this._months),e.milliseconds=xn(e.milliseconds),e.seconds=xn(e.seconds),e.minutes=xn(e.minutes),e.hours=xn(e.hours),e.months=xn(e.months),e.years=xn(e.years),this},Zn.add=function(e,t){return Mn(this,e,t,1)},Zn.subtract=function(e,t){return Mn(this,e,t,-1)},Zn.as=function(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=F(e))||"quarter"===e||"year"===e)switch(n=this._months+Sn(t=this._days+r/864e5),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Cn(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}},Zn.asMilliseconds=Rn,Zn.asSeconds=Dn,Zn.asMinutes=On,Zn.asHours=wn,Zn.asDays=Ln,Zn.asWeeks=In,Zn.asMonths=Fn,Zn.asQuarters=Nn,Zn.asYears=Bn,Zn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*x(this._months/12):NaN},Zn._bubble=function(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*An(Cn(s)+a),a=0,s=0),u.milliseconds=o%1e3,e=E(o/1e3),u.seconds=e%60,t=E(e/60),u.minutes=t%60,n=E(t/60),u.hours=n%24,a+=E(n/24),s+=i=E(Sn(a)),a-=An(Cn(i)),r=E(s/12),s%=12,u.days=a,u.months=s,u.years=r,this},Zn.clone=function(){return Xt(this)},Zn.get=function(e){return e=F(e),this.isValid()?this[e+"s"]():NaN},Zn.milliseconds=Un,Zn.seconds=Vn,Zn.minutes=Gn,Zn.hours=jn,Zn.days=zn,Zn.weeks=function(){return E(this.days()/7)},Zn.months=Yn,Zn.years=Hn,Zn.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t=this.localeData(),n=function(e,t,n){var r=Xt(e).abs(),i=Wn(r.as("s")),o=Wn(r.as("m")),a=Wn(r.as("h")),s=Wn(r.as("d")),u=Wn(r.as("M")),l=Wn(r.as("y")),c=i<=Xn.ss&&["s",i]||i<Xn.s&&["ss",i]||o<=1&&["m"]||o<Xn.m&&["mm",o]||a<=1&&["h"]||a<Xn.h&&["hh",a]||s<=1&&["d"]||s<Xn.d&&["dd",s]||u<=1&&["M"]||u<Xn.M&&["MM",u]||l<=1&&["y"]||["yy",l];return c[2]=t,c[3]=+e>0,c[4]=n,(function(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}).apply(null,c)}(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)},Zn.toISOString=qn,Zn.toString=qn,Zn.toJSON=qn,Zn.locale=tn,Zn.localeData=rn,Zn.toIsoString=S("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",qn),Zn.lang=nn,Y("X",0,0,"unix"),Y("x",0,0,"valueOf"),ce("x",oe),ce("X",/[+-]?\d+(\.\d{1,3})?/),pe("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),pe("x",function(e,t,n){n._d=new Date(x(e))}),i.version="2.24.0",t=Ot,i.fn=gn,i.min=function(){return It("isBefore",[].slice.call(arguments,0))},i.max=function(){return It("isAfter",[].slice.call(arguments,0))},i.now=function(){return Date.now?Date.now():+new Date},i.utc=f,i.unix=function(e){return Ot(1e3*e)},i.months=function(e,t){return Tn(e,t,"months")},i.isDate=l,i.locale=ht,i.invalid=m,i.duration=Xt,i.isMoment=T,i.weekdays=function(e,t,n){return En(e,t,n,"weekdays")},i.parseZone=function(){return Ot.apply(null,arguments).parseZone()},i.localeData=ft,i.isDuration=Bt,i.monthsShort=function(e,t){return Tn(e,t,"monthsShort")},i.weekdaysMin=function(e,t,n){return En(e,t,n,"weekdaysMin")},i.defineLocale=dt,i.updateLocale=function(e,t){if(null!=t){var n,r,i=at;null!=(r=ct(e))&&(i=r._config),(n=new w(t=O(i,t))).parentLocale=st[e],st[e]=n,ht(e)}else null!=st[e]&&(null!=st[e].parentLocale?st[e]=st[e].parentLocale:null!=st[e]&&delete st[e]);return st[e]},i.locales=function(){return C(st)},i.weekdaysShort=function(e,t,n){return En(e,t,n,"weekdaysShort")},i.normalizeUnits=F,i.relativeTimeRounding=function(e){return void 0===e?Wn:"function"==typeof e&&(Wn=e,!0)},i.relativeTimeThreshold=function(e,t){return void 0!==Xn[e]&&(void 0===t?Xn[e]:(Xn[e]=t,"s"===e&&(Xn.ss=t-1),!0))},i.calendarFormat=function(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},i.prototype=gn,i.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},i}()}).call(this,n("YuTi")(e))},x6pH:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("he",{months:"\u05d9\u05e0\u05d5\u05d0\u05e8_\u05e4\u05d1\u05e8\u05d5\u05d0\u05e8_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05d9\u05dc_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05d5\u05e1\u05d8_\u05e1\u05e4\u05d8\u05de\u05d1\u05e8_\u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8_\u05e0\u05d5\u05d1\u05de\u05d1\u05e8_\u05d3\u05e6\u05de\u05d1\u05e8".split("_"),monthsShort:"\u05d9\u05e0\u05d5\u05f3_\u05e4\u05d1\u05e8\u05f3_\u05de\u05e8\u05e5_\u05d0\u05e4\u05e8\u05f3_\u05de\u05d0\u05d9_\u05d9\u05d5\u05e0\u05d9_\u05d9\u05d5\u05dc\u05d9_\u05d0\u05d5\u05d2\u05f3_\u05e1\u05e4\u05d8\u05f3_\u05d0\u05d5\u05e7\u05f3_\u05e0\u05d5\u05d1\u05f3_\u05d3\u05e6\u05de\u05f3".split("_"),weekdays:"\u05e8\u05d0\u05e9\u05d5\u05df_\u05e9\u05e0\u05d9_\u05e9\u05dc\u05d9\u05e9\u05d9_\u05e8\u05d1\u05d9\u05e2\u05d9_\u05d7\u05de\u05d9\u05e9\u05d9_\u05e9\u05d9\u05e9\u05d9_\u05e9\u05d1\u05ea".split("_"),weekdaysShort:"\u05d0\u05f3_\u05d1\u05f3_\u05d2\u05f3_\u05d3\u05f3_\u05d4\u05f3_\u05d5\u05f3_\u05e9\u05f3".split("_"),weekdaysMin:"\u05d0_\u05d1_\u05d2_\u05d3_\u05d4_\u05d5_\u05e9".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [\u05d1]MMMM YYYY",LLL:"D [\u05d1]MMMM YYYY HH:mm",LLLL:"dddd, D [\u05d1]MMMM YYYY HH:mm",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY HH:mm",llll:"ddd, D MMM YYYY HH:mm"},calendar:{sameDay:"[\u05d4\u05d9\u05d5\u05dd \u05d1\u05be]LT",nextDay:"[\u05de\u05d7\u05e8 \u05d1\u05be]LT",nextWeek:"dddd [\u05d1\u05e9\u05e2\u05d4] LT",lastDay:"[\u05d0\u05ea\u05de\u05d5\u05dc \u05d1\u05be]LT",lastWeek:"[\u05d1\u05d9\u05d5\u05dd] dddd [\u05d4\u05d0\u05d7\u05e8\u05d5\u05df \u05d1\u05e9\u05e2\u05d4] LT",sameElse:"L"},relativeTime:{future:"\u05d1\u05e2\u05d5\u05d3 %s",past:"\u05dc\u05e4\u05e0\u05d9 %s",s:"\u05de\u05e1\u05e4\u05e8 \u05e9\u05e0\u05d9\u05d5\u05ea",ss:"%d \u05e9\u05e0\u05d9\u05d5\u05ea",m:"\u05d3\u05e7\u05d4",mm:"%d \u05d3\u05e7\u05d5\u05ea",h:"\u05e9\u05e2\u05d4",hh:function(e){return 2===e?"\u05e9\u05e2\u05ea\u05d9\u05d9\u05dd":e+" \u05e9\u05e2\u05d5\u05ea"},d:"\u05d9\u05d5\u05dd",dd:function(e){return 2===e?"\u05d9\u05d5\u05de\u05d9\u05d9\u05dd":e+" \u05d9\u05de\u05d9\u05dd"},M:"\u05d7\u05d5\u05d3\u05e9",MM:function(e){return 2===e?"\u05d7\u05d5\u05d3\u05e9\u05d9\u05d9\u05dd":e+" \u05d7\u05d5\u05d3\u05e9\u05d9\u05dd"},y:"\u05e9\u05e0\u05d4",yy:function(e){return 2===e?"\u05e9\u05e0\u05ea\u05d9\u05d9\u05dd":e%10==0&&10!==e?e+" \u05e9\u05e0\u05d4":e+" \u05e9\u05e0\u05d9\u05dd"}},meridiemParse:/\u05d0\u05d7\u05d4"\u05e6|\u05dc\u05e4\u05e0\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05dc\u05e4\u05e0\u05d5\u05ea \u05d1\u05d5\u05e7\u05e8|\u05d1\u05d1\u05d5\u05e7\u05e8|\u05d1\u05e2\u05e8\u05d1/i,isPM:function(e){return/^(\u05d0\u05d7\u05d4"\u05e6|\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd|\u05d1\u05e2\u05e8\u05d1)$/.test(e)},meridiem:function(e,t,n){return e<5?"\u05dc\u05e4\u05e0\u05d5\u05ea \u05d1\u05d5\u05e7\u05e8":e<10?"\u05d1\u05d1\u05d5\u05e7\u05e8":e<12?n?'\u05dc\u05e4\u05e0\u05d4"\u05e6':"\u05dc\u05e4\u05e0\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd":e<18?n?'\u05d0\u05d7\u05d4"\u05e6':"\u05d0\u05d7\u05e8\u05d9 \u05d4\u05e6\u05d4\u05e8\u05d9\u05d9\u05dd":"\u05d1\u05e2\u05e8\u05d1"}})}()},xTla:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},yPMs:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_N\xebntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_N\xebn_Dhj".split("_"),weekdays:"E Diel_E H\xebn\xeb_E Mart\xeb_E M\xebrkur\xeb_E Enjte_E Premte_E Shtun\xeb".split("_"),weekdaysShort:"Die_H\xebn_Mar_M\xebr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M\xeb_E_P_Sh".split("_"),weekdaysParseExact:!0,meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Sot n\xeb] LT",nextDay:"[Nes\xebr n\xeb] LT",nextWeek:"dddd [n\xeb] LT",lastDay:"[Dje n\xeb] LT",lastWeek:"dddd [e kaluar n\xeb] LT",sameElse:"L"},relativeTime:{future:"n\xeb %s",past:"%s m\xeb par\xeb",s:"disa sekonda",ss:"%d sekonda",m:"nj\xeb minut\xeb",mm:"%d minuta",h:"nj\xeb or\xeb",hh:"%d or\xeb",d:"nj\xeb dit\xeb",dd:"%d dit\xeb",M:"nj\xeb muaj",MM:"%d muaj",y:"nj\xeb vit",yy:"%d vite"},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},z1FC:function(e,t,n){!function(e){"use strict";function t(e,t,n,r){var i={s:["viensas secunds","'iensas secunds"],ss:[e+" secunds",e+" secunds"],m:["'n m\xedut","'iens m\xedut"],mm:[e+" m\xeduts",e+" m\xeduts"],h:["'n \xfeora","'iensa \xfeora"],hh:[e+" \xfeoras",e+" \xfeoras"],d:["'n ziua","'iensa ziua"],dd:[e+" ziuas",e+" ziuas"],M:["'n mes","'iens mes"],MM:[e+" mesen",e+" mesen"],y:["'n ar","'iens ar"],yy:[e+" ars",e+" ars"]};return r?i[n][0]:t?i[n][0]:i[n][1]}n("wd/R").defineLocale("tzl",{months:"Januar_Fevraglh_Mar\xe7_Avr\xefu_Mai_G\xfcn_Julia_Guscht_Setemvar_Listop\xe4ts_Noemvar_Zecemvar".split("_"),monthsShort:"Jan_Fev_Mar_Avr_Mai_G\xfcn_Jul_Gus_Set_Lis_Noe_Zec".split("_"),weekdays:"S\xfaladi_L\xfane\xe7i_Maitzi_M\xe1rcuri_Xh\xfaadi_Vi\xe9ner\xe7i_S\xe1turi".split("_"),weekdaysShort:"S\xfal_L\xfan_Mai_M\xe1r_Xh\xfa_Vi\xe9_S\xe1t".split("_"),weekdaysMin:"S\xfa_L\xfa_Ma_M\xe1_Xh_Vi_S\xe1".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"D. MMMM [dallas] YYYY",LLL:"D. MMMM [dallas] YYYY HH.mm",LLLL:"dddd, [li] D. MMMM [dallas] YYYY HH.mm"},meridiemParse:/d\'o|d\'a/i,isPM:function(e){return"d'o"===e.toLowerCase()},meridiem:function(e,t,n){return e>11?n?"d'o":"D'O":n?"d'a":"D'A"},calendar:{sameDay:"[oxhi \xe0] LT",nextDay:"[dem\xe0 \xe0] LT",nextWeek:"dddd [\xe0] LT",lastDay:"[ieiri \xe0] LT",lastWeek:"[s\xfcr el] dddd [lasteu \xe0] LT",sameElse:"L"},relativeTime:{future:"osprei %s",past:"ja%s",s:t,ss:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}()},z3Vd:function(e,t,n){!function(e){"use strict";var t="pagh_wa\u2019_cha\u2019_wej_loS_vagh_jav_Soch_chorgh_Hut".split("_");function n(e,n,r,i){var o=function(e){var n=Math.floor(e%1e3/100),r=Math.floor(e%100/10),i=e%10,o="";return n>0&&(o+=t[n]+"vatlh"),r>0&&(o+=(""!==o?" ":"")+t[r]+"maH"),i>0&&(o+=(""!==o?" ":"")+t[i]),""===o?"pagh":o}(e);switch(r){case"ss":return o+" lup";case"mm":return o+" tup";case"hh":return o+" rep";case"dd":return o+" jaj";case"MM":return o+" jar";case"yy":return o+" DIS"}}e.defineLocale("tlh",{months:"tera\u2019 jar wa\u2019_tera\u2019 jar cha\u2019_tera\u2019 jar wej_tera\u2019 jar loS_tera\u2019 jar vagh_tera\u2019 jar jav_tera\u2019 jar Soch_tera\u2019 jar chorgh_tera\u2019 jar Hut_tera\u2019 jar wa\u2019maH_tera\u2019 jar wa\u2019maH wa\u2019_tera\u2019 jar wa\u2019maH cha\u2019".split("_"),monthsShort:"jar wa\u2019_jar cha\u2019_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa\u2019maH_jar wa\u2019maH wa\u2019_jar wa\u2019maH cha\u2019".split("_"),monthsParseExact:!0,weekdays:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysShort:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),weekdaysMin:"lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[DaHjaj] LT",nextDay:"[wa\u2019leS] LT",nextWeek:"LLL",lastDay:"[wa\u2019Hu\u2019] LT",lastWeek:"LLL",sameElse:"L"},relativeTime:{future:function(e){var t=e;return-1!==e.indexOf("jaj")?t.slice(0,-3)+"leS":-1!==e.indexOf("jar")?t.slice(0,-3)+"waQ":-1!==e.indexOf("DIS")?t.slice(0,-3)+"nem":t+" pIq"},past:function(e){var t=e;return-1!==e.indexOf("jaj")?t.slice(0,-3)+"Hu\u2019":-1!==e.indexOf("jar")?t.slice(0,-3)+"wen":-1!==e.indexOf("DIS")?t.slice(0,-3)+"ben":t+" ret"},s:"puS lup",ss:n,m:"wa\u2019 tup",mm:n,h:"wa\u2019 rep",hh:n,d:"wa\u2019 jaj",dd:n,M:"wa\u2019 jar",MM:n,y:"wa\u2019 DIS",yy:n},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(n("wd/R"))},zUnb:function(e,t,n){"use strict";n.r(t);var r=n("CcnG"),i=function(){return function(){}}(),o=function(){function e(e){var t=this;this.consoleService=e,this.uiStatus={time:!1,youtube:!1,timeline:!1,skill:!1,console:!0,three:!0},this.lastTarget="youtube",this.consoleService.addLog("loading..."),setTimeout(function(){t.toggleAll(!0),t.consoleService.addLog("welcome")},3e3)}return e.prototype.actionWithVoice=function(e){this.consoleService.addLog("voice input detected: "+e),"\u30af\u30ea\u30a2"===e&&this.toggleAll(!1),"\u30ba\u30fc\u30e0"===e&&this.zoomUp(),"\u30ea\u30bb\u30c3\u30c8"===e&&this.toggleAll(!0),"\u6642\u9593"===e&&this.toggleUI("time"),"youtube"===e&&this.toggleUI("youtube"),"\u30bf\u30a4\u30e0\u30e9\u30a4\u30f3"===e&&this.toggleUI("timeline"),"\u30b9\u30ad\u30eb"===e&&this.toggleUI("skill")},e.prototype.actionWithCommand=function(e){this.consoleService.addLog("input detected: "+e),"reset"===e?this.toggleAll(!0):"clear"===e?this.toggleAll(!1):"zoom"===e?this.zoomUp():e in this.uiStatus?this.toggleUI(e):this.consoleService.addLog("command XX does not exist")},e.prototype.zoomUp=function(){this.zoom=this.zoom?null:this.lastTarget},e.prototype.zoomDown=function(){this.zoom=null},e.prototype.toggleUI=function(e){this.lastTarget=e,this.uiStatus[e]=!this.uiStatus[e]},e.prototype.toggleAll=function(e){for(var t in this.uiStatus)t&&(this.uiStatus[t]=e)},e}(),a=n("Yzuk"),s=(n("sjRU"),function(){function e(){this.name="Angular 6",this.y=1,this.lightX=0,this.red=.7}return e.prototype.ngOnInit=function(){var e=this;this.canvas=document.getElementById("renderCanvas"),this.engine=new a.Engine(this.canvas,!0,{preserveDrawingBuffer:!0,stencil:!0});var t=(function(){var e=this,t=new a.Scene(this.engine);t.clearColor=new a.Color4(0,0,0,0);var n=new a.FreeCamera("camera1",new a.Vector3(0,1.5,3),t);n.attachControl(this.canvas,!1),new a.HemisphericLight("light1",new a.Vector3(this.lightX,0,0),t).specular=new a.Color3(0,0,0),this.sphere=a.Mesh.CreateSphere("sphere1",10,2,t,!1,a.Mesh.FRONTSIDE),this.sphere.position.y=1,n.setTarget(this.sphere.position);var r=new a.StandardMaterial("blue",t);r.diffuseColor=new a.Color3(56/255,131/255,151/255),r.wireframe=!0,this.sphere.material=r,this.sphere.position.y=this.y;var i=new a.Animation("yRot","rotation.y",20,a.Animation.ANIMATIONTYPE_FLOAT,a.Animation.ANIMATIONLOOPMODE_CYCLE),o=[];return o.push({frame:0,value:0}),o.push({frame:200,value:2*Math.PI}),i.setKeys(o),a.SceneLoader.ImportMesh("","./assets/","deer.obj",t,function(n){e.obj=n[0],e.obj.material=r,e.obj.scaling=new a.Vector3(.001,.001,.001),t.beginDirectAnimation(e.obj,[i],0,200,!0)}),t}).bind(this)();this.world=t,this.engine.runRenderLoop(function(){t.render()}),window.addEventListener("resize",function(){e.engine.resize()})},e}()),u=r["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{top:0;left:0;width:100%;height:100%}canvas[_ngcontent-%COMP%]{width:100%;height:100%}"]],data:{}});function l(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,0,"canvas",[["id","renderCanvas"]],null,null,null,null,null))],null,null)}var c=n("Ip0R"),h=function(){function e(e){this.speech=e,this.msg=new r.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.initSpeech=function(){var e=this;this.speech.start(),this.speech.started.subscribe(function(t){e.isMicActive=t}),this.speech.message.subscribe(function(t){console.log(t),e.msg.emit(t.message)})},e.prototype.start=function(){this.initSpeech()},e}(),d=n("K9Ia"),f=n("mrSG"),p=n("8g8A"),_=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return f.__extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new p.a;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(d.a),m=n("MGBS"),g=n("zotm"),v=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){var n=new y(e),r=Object(g.a)(n,this.notifier);return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),y=function(e){function t(t){var n=e.call(this,t)||this;return n.seenValue=!1,n}return f.__extends(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(m.a),b=n("FFOo"),T=n("pugT"),E=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return f.__extends(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return f.__extends(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(T.a)),x=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),M=function(e){function t(n,r){void 0===r&&(r=x.now);var i=e.call(this,n,function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()})||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return f.__extends(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(x),A=new M(E),S=function(){function e(e,t){this.dueTime=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new C(e,this.dueTime,this.scheduler))},e}(),C=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.dueTime=n,i.scheduler=r,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return f.__extends(t,e),t.prototype._next=function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(P,this.dueTime,this))},t.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},t.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}},t.prototype.clearDebounce=function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)},t}(b.a);function P(e){e.debouncedNext()}var R=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new D(e,this.predicate,this.thisArg))},e}(),D=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return f.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)},t}(b.a),O=function(){function e(e,t){this.zone=e,this.lang=t,this.message=new d.a,this.command=new d.a,this.commands={},this.context=new _(""),this.refreshGrammar=new _(!1),this.started=new _(!1),this._destroyed=new d.a,(window.SpeechRecognition||window.webkitSpeechRecognition)&&this.init()}return e.prototype.init=function(){var e,t,n=this,r=window.SpeechRecognition||window.webkitSpeechRecognition;this.recognition=new r,this.recognition.lang=this.lang,this.recognition.interimResults=!1,this.recognition.maxAlternatives=1,this.recognition.continuous=!0,this.recognition.onresult=function(e){var t={message:""},r="";if(e.results){var i=e.results[e.resultIndex];i.isFinal&&(i[0].confidence<.3?t={error:!0,message:"Cannot recognize"}:(r=i[0].transcript.trim().toLowerCase(),t={success:!0,message:r}))}n.zone.run(function(){if(t.error)n.message.error(t);else{n.message.next(t);var e=n.getContextForWord(r);e?n.context.next(e):n.commands[n.context.value]&&n.commands[n.context.value][r]?n.command.next({context:n.context.value,command:r}):n.commands[""]&&n.commands[""][r]&&n.command.next({context:"",command:r})}})},this.recognition.onerror=function(e){n.zone.run(function(){n.message.error(e)})},this.recognition.onstart=function(){n.zone.run(function(){n.started.next(!0)})},this.recognition.onend=function(){n.zone.run(function(){n.started.next(!1)})},this.refreshGrammar.pipe((t=this._destroyed,function(e){return e.lift(new v(t))}),(void 0===e&&(e=A),function(t){return t.lift(new S(500,e))})).subscribe(function(){n.setGrammar()})},e.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete()},e.prototype.start=function(){!this.started.getValue()&&this.recognition&&this.recognition.start()},e.prototype.stop=function(){this.started.getValue()&&this.recognition&&this.recognition.stop()},e.prototype.declareContext=function(e){var t=e.map(function(e){return e.toLowerCase()}).join("/");this.commands[t]||(this.commands[t]={}),this.refreshGrammar.next(!0)},e.prototype.declareCommand=function(e,t){var n=t.map(function(e){return e.toLowerCase()}).join("/");this.commands[n]||(this.commands[n]={}),this.commands[n][e.toLowerCase()]=!0,this.refreshGrammar.next(!0)},e.prototype.setContext=function(e){var t=e.map(function(e){return e.toLowerCase()}).join("/");this.context.next(t)},e.prototype.getContextForWord=function(e){var t=this.context.value?this.context.value+"/"+e:e;return this.commands[t]?t:this.commands[e]?e:null},e.prototype.setGrammar=function(){var e=this,t=window.SpeechGrammarList||window.webkitSpeechGrammarList;if(t&&this.recognition){var n={};Object.keys(this.commands).forEach(function(t){t.split("/").forEach(function(e){n[e]=!0}),Object.keys(e.commands[t]).forEach(function(e){return n[e]=!0})});var r="#JSGF V1.0; grammar Digits;\npublic <Digits> = ( <digit> ) + ;\n<digit> = ( zero | one | two | three | four | five | six | seven | eight | nine ); public <command> = "+Object.keys(n).join(" | ")+" ;",i=new t;i.addFromString(r,1),this.recognition.grammars=i}},e}(),w=function(){return function(){}}(),L=r["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{position:fixed;right:16px;top:16px;display:block}.tools[_ngcontent-%COMP%]{display:flex;align-items:center}.tools[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:24px}.tools[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:24px;cursor:pointer;color:rgba(56,131,151,.6);text-shadow:0 0 16px rgba(56,131,151,.6);line-height:1}.mic.disabled[_ngcontent-%COMP%]{opacity:.3}"]],data:{}});function I(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,0,"i",[["class","fas fa-fw fa-microphone-slash"]],null,[[null,"click"]],function(e,t,n){var r=!0;return"click"===t&&(r=!1!==e.component.start()&&r),r},null,null))],null,null)}function F(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,0,"i",[["class","fas fa-fw fa-microphone"]],null,null,null,null,null))],null,null)}function N(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,10,"div",[["class","tools"]],null,null,null,null,null)),(e()(),r["\u0275eld"](1,0,null,null,1,"a",[["class","tools__item"],["href","https://github.com/deerboy/timber"],["target","_blank"]],null,null,null,null,null)),(e()(),r["\u0275eld"](2,0,null,null,0,"i",[["class","fab fa-fw fa-github"]],null,null,null,null,null)),(e()(),r["\u0275eld"](3,0,null,null,1,"a",[["class","tools__item"],["href","https://twitter.com/d151005"],["target","_blank"]],null,null,null,null,null)),(e()(),r["\u0275eld"](4,0,null,null,0,"i",[["class","fab fa-fw fa-twitter"]],null,null,null,null,null)),(e()(),r["\u0275eld"](5,0,null,null,5,"div",[["class","tools__item"]],null,null,null,null,null)),(e()(),r["\u0275eld"](6,0,null,null,4,"div",[["class","mic"]],[[2,"disabled",null]],null,null,null,null)),(e()(),r["\u0275and"](16777216,null,null,1,null,I)),r["\u0275did"](8,16384,null,0,c.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),r["\u0275and"](16777216,null,null,1,null,F)),r["\u0275did"](10,16384,null,0,c.NgIf,[r.ViewContainerRef,r.TemplateRef],{ngIf:[0,"ngIf"]},null)],function(e,t){var n=t.component;e(t,8,0,!n.isMicActive),e(t,10,0,n.isMicActive)},function(e,t){e(t,6,0,!t.component.isMicActive)})}var B=function(){function e(){var e=this;this.date=new Date,setInterval(function(){e.date=new Date},1e3)}return e.prototype.ngOnInit=function(){},e}(),k=r["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;position:fixed;top:16px;left:16px;transform:scale(1)}.hide[_nghost-%COMP%]{transform:scale(0)}p[_ngcontent-%COMP%]{color:rgba(56,131,151,.6);text-shadow:0 0 8px rgba(56,131,151,.6);line-height:1}.date[_ngcontent-%COMP%]{font-size:16px;margin-bottom:8px}.time[_ngcontent-%COMP%]{font-size:40px;font-weight:700}"]],data:{}});function U(e){return r["\u0275vid"](0,[r["\u0275pid"](0,c.DatePipe,[r.LOCALE_ID]),(e()(),r["\u0275eld"](1,0,null,null,2,"p",[["class","date"]],null,null,null,null,null)),(e()(),r["\u0275ted"](2,null,["",""])),r["\u0275ppd"](3,2),(e()(),r["\u0275eld"](4,0,null,null,2,"p",[["class","time"]],null,null,null,null,null)),(e()(),r["\u0275ted"](5,null,["",""])),r["\u0275ppd"](6,2)],null,function(e,t){var n=t.component,i=r["\u0275unv"](t,2,0,e(t,3,0,r["\u0275nov"](t,0),n.date,"yyyy.MM.dd EEEEEE"));e(t,2,0,i);var o=r["\u0275unv"](t,5,0,e(t,6,0,r["\u0275nov"](t,0),n.date,"HH:mm:dd:ss"));e(t,5,0,o)})}var V=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return f.__extends(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(E),G=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f.__extends(t,e),t}(M))(V),j=n("6blF"),z=new j.a(function(e){return e.complete()});function Y(e){return e?function(e){return new j.a(function(t){return e.schedule(function(){return t.complete()})})}(e):z}var H=n("nkY7"),W=n("IUTb");function X(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r,i=e[e.length-1];switch(Object(H.a)(i)?e.pop():i=void 0,e.length){case 0:return Y(i);case 1:return i?Object(W.a)(e,i):(n=e[0],(r=new j.a(function(e){e.next(n),e.complete()}))._isScalar=!0,r.value=n,r);default:return Object(W.a)(e,i)}}var K=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e;switch(this.kind){case"N":return X(this.value);case"E":return e=this.error,new j.a(function(t){return t.error(e)});case"C":return Y()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),Q=function(e){function t(t,n,r){void 0===r&&(r=0);var i=e.call(this,t)||this;return i.scheduler=n,i.delay=r,i}return f.__extends(t,e),t.dispatch=function(e){e.notification.observe(e.destination),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new q(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(K.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(K.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(K.createComplete()),this.unsubscribe()},t}(b.a),q=function(){return function(e,t){this.notification=e,this.destination=t}}(),Z=n("uMaO"),J=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return f.__extends(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new $(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new p.a;if(this.isStopped||this.hasError?t=T.a.EMPTY:(this.observers.push(e),t=new Z.a(this,e)),i&&e.add(e=new Q(e,i)),n)for(var a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(a=0;a<o&&!e.closed;a++)e.next(r[a].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||G).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(d.a),$=function(){return function(e,t){this.time=e,this.value=t}}();function ee(){return window}function te(){return ee().YT}function ne(){return te().Player}var re={height:270,width:367},ie=function(){function e(e){this.zone=e,this.ytApiLoaded=!1,this.api=new J(1),this.createApi()}return e.prototype.loadPlayerApi=function(e){var t=ee().document;if(!this.ytApiLoaded){this.ytApiLoaded=!0;var n=t.createElement("script");n.type="text/javascript",n.src=e.protocol+"://www.youtube.com/iframe_api",t.body.appendChild(n)}},e.prototype.setupPlayer=function(e,t,n,r,i){var o=this;void 0===r&&(r=""),this.api.subscribe(function(){ne&&o.createPlayer(e,t,n,r,i)})},e.prototype.play=function(e){e.playVideo()},e.prototype.pause=function(e){e.pauseVideo()},e.prototype.playVideo=function(e,t){t.loadVideoById(e.id.videoId?e.id.videoId:e.id),this.play(t)},e.prototype.isPlaying=function(e){var t=e&&e.getPlayerState,n=t?e.getPlayerState():{};return!!t&&n!==te().PlayerState.ENDED&&n!==te().PlayerState.PAUSED},e.prototype.createPlayer=function(e,t,n,r,i){var o=this;void 0===r&&(r=""),void 0===i&&(i={});var a={height:n.height||re.height,width:n.width||re.width};return new(ne())(e,Object(f.__assign)({},a,{events:{onReady:function(e){o.zone.run(function(){return t.ready&&t.ready.next(e.target)})},onStateChange:function(e){o.zone.run(function(){return t.change&&t.change.next(e)})}},playerVars:i,videoId:r}))},e.prototype.toggleFullScreen=function(e,t){var n=re.height,r=re.width;t||(n=window.innerHeight,r=window.innerWidth),e.setSize(r,n)},e.prototype.generateUniqueId=function(){return Math.random().toString(35).substr(2,7)},e.prototype.createApi=function(){var e=this;ee().onYouTubeIframeAPIReady=function(){ee()&&e.api.next(te())}},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e(Object(r.inject)(r.NgZone))},token:e,providedIn:"root"}),e}(),oe=function(){function e(e,t,n){this.playerService=e,this.elementRef=t,this.renderer=n,this.videoId="",this.height=re.height,this.width=re.width,this.protocol=this.getProtocol(),this.playerVars={},this.ready=new r.EventEmitter,this.change=new r.EventEmitter}return e.prototype.ngAfterContentInit=function(){var e=this.playerService.generateUniqueId(),t={height:this.height,width:this.width},n=this.renderer.selectRootElement("#yt-player-ngx-component");this.renderer.setAttribute(n,"id",e),this.playerService.loadPlayerApi({protocol:this.protocol}),this.playerService.setupPlayer(e,{change:this.change,ready:this.ready},t,this.videoId,this.playerVars)},e.prototype.getProtocol=function(){return window&&window.location?window.location.protocol.replace(":",""):"http"},e}(),ae=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[ie]}},e}(),se=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function ue(e){return r["\u0275vid"](2,[(e()(),r["\u0275eld"](0,0,null,null,0,"div",[["id","yt-player-ngx-component"]],null,null,null,null,null))],null,null)}var le=function(){function e(){this.id="P5k-4-OEuTk",this.playerVars={controls:0,rel:0,showinfo:0,loop:1}}return e.prototype.ngOnInit=function(){},e.prototype.savePlayer=function(e){this.player=e,e.mute(),e.playVideo()},e.prototype.onStateChange=function(e){},e}(),ce=r["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{transform:translate(calc(100vw - 100% - 16px),calc(100vh - 100% - 16px)) scale(1);opacity:.8;width:400px;height:240px;background:#000;box-shadow:0 0 16px rgba(56,131,151,.1)}.hide[_nghost-%COMP%]{transform:translate(calc(100vw - 100% - 16px),calc(100vh - 100% - 16px)) scale(0)}"]],data:{}});function he(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"youtube-player",[],null,[[null,"ready"],[null,"change"]],function(e,t,n){var r=!0,i=e.component;return"ready"===t&&(r=!1!==i.savePlayer(n)&&r),"change"===t&&(r=!1!==i.onStateChange(n)&&r),r},ue,se)),r["\u0275did"](1,1097728,null,0,oe,[ie,r.ElementRef,r.Renderer2],{videoId:[0,"videoId"],playerVars:[1,"playerVars"]},{ready:"ready",change:"change"})],function(e,t){var n=t.component;e(t,1,0,n.id,n.playerVars)},null)}var de=function(){function e(){this.TWITTER_SCRIPT_ID="twitter-wjs",this.TWITTER_WIDGET_URL="https://platform.twitter.com/widgets.js"}return e.prototype.loadScript=function(){var e=this;return j.a.create(function(t){e.startScriptLoad(),window.twttr.ready(function(e){t.next(e),t.complete()})})},e.prototype.startScriptLoad=function(){var e,t,n,r,i,o;window.twttr=(e=document,t=this.TWITTER_SCRIPT_ID,n=this.TWITTER_WIDGET_URL,i=e.getElementsByTagName("script")[0],o=window.twttr||{},e.getElementById(t)?o:((r=e.createElement("script")).id=t,r.src=n,i.parentNode.insertBefore(r,i),o._e=[],o.ready=function(e){o._e.push(e)},o))},e.ngInjectableDef=Object(r.defineInjectable)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),fe=function(){function e(e,t){this.element=e,this.twitterTimelineService=t,this.defaultOpts={tweetLimit:5},this.defaultData={sourceType:"url",url:"https://twitter.com/twitterdev",screenName:"twitterdev"}}return e.prototype.ngOnChanges=function(){if(this.data&&this.data.sourceType){switch(this.data.sourceType){case"url":delete this.defaultData.screenName;break;case"profile":delete this.defaultData.url}this.loadTwitterWidget()}},e.prototype.loadTwitterWidget=function(){var e=this;this.twitterTimelineService.loadScript().subscribe(function(t){var n=e.element.nativeElement;n.innerHTML="",window.twttr.widgets.createTimeline(Object(f.__assign)({},e.defaultData,e.data),n,Object(f.__assign)({},e.defaultOpts,e.opts)).then(function(e){}).catch(function(e){return console.error(e)})},function(e){return console.error(e)})},e}(),pe=function(){return function(){}}(),_e=r["\u0275crt"]({encapsulation:2,styles:[],data:{}});function me(e){return r["\u0275vid"](0,[],null,null)}var ge=function(){function e(){this.scrollTop=0,this.opts={theme:"dark",chrome:["noheader","nofooter","transparent"]}}return e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var e=this;setTimeout(function(){e.contentHeight=e.box.nativeElement.offsetHeight,e.isStart||(e.isStart=!0,setInterval(function(){e.isHover||(e.scrollTop<e.contentHeight-446?++e.scrollTop:e.scrollTop=0)},60))},3e3)},e.prototype.enable=function(){this.isHover=!1},e.prototype.disabled=function(){this.isHover=!0},e.prototype.onScroll=function(e){this.isHover&&(this.scrollTop=e.srcElement.scrollTop)},e}(),ve=r["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{display:block;position:fixed;bottom:16px;left:16px;width:320px;box-shadow:0 0 24px rgba(56,131,151,.1);background:rgba(56,131,151,.1);transform:scale(1)}.hide[_nghost-%COMP%]{transform:scale(0)}.timeline[_ngcontent-%COMP%]{opacity:.6;border:1px solid rgba(56,131,151,.6);box-sizing:border-box;overflow:auto;height:480px;padding:16px;box-sizing:border-box}"]],data:{}});function ye(e){return r["\u0275vid"](0,[r["\u0275qud"](402653184,1,{box:0}),(e()(),r["\u0275eld"](1,0,null,null,4,"div",[["class","timeline"]],[[8,"scrollTop",0]],[[null,"mouseenter"],[null,"mouseleave"],[null,"scroll"]],function(e,t,n){var r=!0,i=e.component;return"mouseenter"===t&&(r=!1!==i.disabled()&&r),"mouseleave"===t&&(r=!1!==i.enable()&&r),"scroll"===t&&(r=!1!==i.onScroll(n)&&r),r},null,null)),(e()(),r["\u0275eld"](2,0,[[1,0],["timeline",1]],null,3,"div",[],null,null,null,null,null)),(e()(),r["\u0275eld"](3,0,null,null,2,"ngx-twitter-timeline",[],null,null,null,me,_e)),r["\u0275did"](4,573440,null,0,fe,[r.ElementRef,de],{data:[0,"data"],opts:[1,"opts"]},null),r["\u0275pod"](5,{sourceType:0,url:1})],function(e,t){var n=t.component,r=e(t,5,0,"url","https://twitter.com/d151005");e(t,4,0,r,n.opts)},function(e,t){e(t,1,0,t.component.scrollTop)})}var be=n("MO+k"),Te=n("LvDl"),Ee=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]];function xe(e,t){return"rgba("+e.concat(t).join(",")+")"}function Me(e,t){return Math.floor(Math.random()*(t-e+1))+e}function Ae(e){return{backgroundColor:e.map(function(e){return xe(e,.6)}),borderColor:e.map(function(){return"#fff"}),pointBackgroundColor:e.map(function(e){return xe(e,1)}),pointBorderColor:e.map(function(){return"#fff"}),pointHoverBackgroundColor:e.map(function(e){return xe(e,1)}),pointHoverBorderColor:e.map(function(e){return xe(e,1)})}}function Se(){return[Me(0,255),Me(0,255),Me(0,255)]}function Ce(e){return Ee[e]||Se()}function Pe(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=Ee[n]||Se();return t}var Re=function(){function e(){this.pColorschemesOptions={},this.colorschemesOptions=new _({})}return e.prototype.setColorschemesOptions=function(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)},e.prototype.getColorschemesOptions=function(){return this.pColorschemesOptions},e.ngInjectableDef=Object(r["\u0275\u0275defineInjectable"])({factory:function(){return new e},token:e,providedIn:"root"}),e}(),De=function(){var e={Default:0,Update:1,Refresh:2};return e[e.Default]="Default",e[e.Update]="Update",e[e.Refresh]="Refresh",e}(),Oe=function(){function e(e,t){this.element=e,this.themeService=t,this.options={},this.chartClick=new r.EventEmitter,this.chartHover=new r.EventEmitter,this.old={dataExists:!1,dataLength:0,datasetsExists:!1,datasetsLength:0,datasetsDataObjects:[],datasetsDataLengths:[],colorsExists:!1,colors:[],labelsExist:!1,labels:[],legendExists:!1,legend:{}},this.subs=[]}return e.registerPlugin=function(e){be.Chart.plugins.register(e)},e.unregisterPlugin=function(e){be.Chart.plugins.unregister(e)},e.prototype.ngOnInit=function(){var e=this;this.ctx=this.element.nativeElement.getContext("2d"),this.refresh(),this.subs.push(this.themeService.colorschemesOptions.subscribe(function(t){return e.themeChanged(t)}))},e.prototype.themeChanged=function(e){this.refresh()},e.prototype.ngDoCheck=function(){var e=this;if(this.chart){var t=De.Default,n=function(e){t=e>t?e:t};switch(!!this.data!==this.old.dataExists&&(this.propagateDataToDatasets(this.data),this.old.dataExists=!!this.data,n(De.Update)),this.data&&this.data.length!==this.old.dataLength&&(this.old.dataLength=this.data&&this.data.length||0,n(De.Update)),!!this.datasets!==this.old.datasetsExists&&(this.old.datasetsExists=!!this.datasets,n(De.Update)),this.datasets&&this.datasets.length!==this.old.datasetsLength&&(this.old.datasetsLength=this.datasets&&this.datasets.length||0,n(De.Update)),this.datasets&&this.datasets.filter(function(t,n){return t.data!==e.old.datasetsDataObjects[n]}).length&&(this.old.datasetsDataObjects=this.datasets.map(function(e){return e.data}),n(De.Update)),this.datasets&&this.datasets.filter(function(t,n){return t.data.length!==e.old.datasetsDataLengths[n]}).length&&(this.old.datasetsDataLengths=this.datasets.map(function(e){return e.data.length}),n(De.Update)),!!this.colors!==this.old.colorsExists&&(this.old.colorsExists=!!this.colors,this.updateColors(),n(De.Update)),this.colors&&this.colors.filter(function(t,n){return!e.colorsEqual(t,e.old.colors[n])}).length&&(this.old.colors=this.colors.map(function(t){return e.copyColor(t)}),this.updateColors(),n(De.Update)),!!this.labels!==this.old.labelsExist&&(this.old.labelsExist=!!this.labels,n(De.Update)),this.labels&&this.labels.filter(function(t,n){return!e.labelsEqual(t,e.old.labels[n])}).length&&(this.old.labels=this.labels.map(function(t){return e.copyLabel(t)}),n(De.Update)),!!this.options.legend!==this.old.legendExists&&(this.old.legendExists=!!this.options.legend,n(De.Refresh)),this.options.legend&&this.options.legend.position!==this.old.legend.position&&(this.old.legend.position=this.options.legend.position,n(De.Refresh)),t){case De.Default:break;case De.Update:this.update();break;case De.Refresh:this.refresh()}}},e.prototype.copyLabel=function(e){return Array.isArray(e)?Object(f.__spread)(e):e},e.prototype.labelsEqual=function(e,t){return Array.isArray(e)===Array.isArray(t)&&(Array.isArray(e)||e===t)&&(!Array.isArray(e)||e.length===t.length)&&(!Array.isArray(e)||0===e.filter(function(e,n){return e!==t[n]}).length)},e.prototype.copyColor=function(e){return{backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderColor:e.borderColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,pointBorderColor:e.pointBorderColor,pointBackgroundColor:e.pointBackgroundColor,pointBorderWidth:e.pointBorderWidth,pointRadius:e.pointRadius,pointHoverRadius:e.pointHoverRadius,pointHitRadius:e.pointHitRadius,pointHoverBackgroundColor:e.pointHoverBackgroundColor,pointHoverBorderColor:e.pointHoverBorderColor,pointHoverBorderWidth:e.pointHoverBorderWidth,pointStyle:e.pointStyle,hoverBackgroundColor:e.hoverBackgroundColor,hoverBorderColor:e.hoverBorderColor,hoverBorderWidth:e.hoverBorderWidth}},e.prototype.colorsEqual=function(e,t){return!e==!t&&(!e||e.backgroundColor===t.backgroundColor&&e.borderWidth===t.borderWidth&&e.borderColor===t.borderColor&&e.borderCapStyle===t.borderCapStyle&&e.borderDash===t.borderDash&&e.borderDashOffset===t.borderDashOffset&&e.borderJoinStyle===t.borderJoinStyle&&e.pointBorderColor===t.pointBorderColor&&e.pointBackgroundColor===t.pointBackgroundColor&&e.pointBorderWidth===t.pointBorderWidth&&e.pointRadius===t.pointRadius&&e.pointHoverRadius===t.pointHoverRadius&&e.pointHitRadius===t.pointHitRadius&&e.pointHoverBackgroundColor===t.pointHoverBackgroundColor&&e.pointHoverBorderColor===t.pointHoverBorderColor&&e.pointHoverBorderWidth===t.pointHoverBorderWidth&&e.pointStyle===t.pointStyle&&e.hoverBackgroundColor===t.hoverBackgroundColor&&e.hoverBorderColor===t.hoverBorderColor&&e.hoverBorderWidth===t.hoverBorderWidth)},e.prototype.updateColors=function(){var e=this;this.datasets.forEach(function(t,n){e.colors&&e.colors[n]?Object.assign(t,e.colors[n]):Object.assign(t,function(e,t,n){if("pie"===e||"doughnut"===e)return Ae(Pe(n));if("polarArea"===e)return{backgroundColor:(r=Pe(n)).map(function(e){return xe(e,.6)}),borderColor:r.map(function(e){return xe(e,1)}),hoverBackgroundColor:r.map(function(e){return xe(e,.8)}),hoverBorderColor:r.map(function(e){return xe(e,1)})};var r;if("line"===e||"radar"===e)return function(e){return{backgroundColor:xe(e,.4),borderColor:xe(e,1),pointBackgroundColor:xe(e,1),pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:xe(e,.8)}}(Ce(t));if("bar"===e||"horizontalBar"===e)return function(e){return{backgroundColor:xe(e,.6),borderColor:xe(e,1),hoverBackgroundColor:xe(e,.8),hoverBorderColor:xe(e,1)}}(Ce(t));if("bubble"===e)return Ae(Pe(n));if("scatter"===e)return Ae(Pe(n));throw new Error("getColors - Unsupported chart type "+e)}(e.chartType,n,t.data.length),Object(f.__assign)({},t))})},e.prototype.ngOnChanges=function(e){var t=De.Default,n=function(e){t=e>t?e:t};switch(e.hasOwnProperty("data")&&e.data.currentValue&&(this.propagateDataToDatasets(e.data.currentValue),n(De.Update)),e.hasOwnProperty("datasets")&&e.datasets.currentValue&&(this.propagateDatasetsToData(e.datasets.currentValue),n(De.Update)),e.hasOwnProperty("labels")&&(this.chart&&(this.chart.data.labels=e.labels.currentValue),n(De.Update)),e.hasOwnProperty("legend")&&(this.chart&&(this.chart.config.options.legend.display=e.legend.currentValue,this.chart.generateLegend()),n(De.Update)),e.hasOwnProperty("options")&&n(De.Refresh),t){case De.Update:this.update();break;case De.Refresh:case De.Default:this.refresh()}},e.prototype.ngOnDestroy=function(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(function(e){return e.unsubscribe()})},e.prototype.update=function(e,t){if(this.chart)return this.chart.update(e,t)},e.prototype.hideDataset=function(e,t){this.chart.getDatasetMeta(e).hidden=t,this.chart.update()},e.prototype.isDatasetHidden=function(e){return this.chart.getDatasetMeta(e).hidden},e.prototype.toBase64Image=function(){return this.chart.toBase64Image()},e.prototype.getChartConfiguration=function(){var e=this,t=this.getDatasets(),n=Object.assign({},this.options);!1===this.legend&&(n.legend={display:!1}),n.hover=n.hover||{},n.hover.onHover||(n.hover.onHover=function(t,n){n&&!n.length||e.chartHover.emit({event:t,active:n})}),n.onClick||(n.onClick=function(t,n){e.chartClick.emit({event:t,active:n})});var r=this.smartMerge(n,this.themeService.getColorschemesOptions());return{type:this.chartType,data:{labels:this.labels||[],datasets:t},plugins:this.plugins,options:r}},e.prototype.getChartBuilder=function(e){var t=this.getChartConfiguration();return new be.Chart(e,t)},e.prototype.smartMerge=function(e,t,n){var r=this;if(void 0===n&&(n=0),0===n&&(e=Object(Te.cloneDeep)(e)),Object.keys(t).forEach(function(i){if(Array.isArray(t[i])){var o=e[i];o&&o.forEach(function(e){r.smartMerge(e,t[i][0],n+1)})}else"object"==typeof t[i]?(i in e||(e[i]={}),r.smartMerge(e[i],t[i],n+1)):e[i]=t[i]}),0===n)return e},e.prototype.isMultiLineLabel=function(e){return Array.isArray(e)},e.prototype.joinLabel=function(e){return e?this.isMultiLineLabel(e)?e.join(" "):e:null},e.prototype.propagateDatasetsToData=function(e){this.data=this.datasets.map(function(e){return e.data}),this.chart&&(this.chart.data.datasets=e),this.updateColors()},e.prototype.propagateDataToDatasets=function(e){var t=this;this.isMultiDataSet(e)?this.datasets&&e.length===this.datasets.length?this.datasets.forEach(function(t,n){t.data=e[n]}):(this.datasets=e.map(function(e,n){return{data:e,label:t.joinLabel(t.labels[n])||"Label "+n}}),this.chart&&(this.chart.data.datasets=this.datasets)):this.datasets?(this.datasets[0].data=e,this.datasets.splice(1)):(this.datasets=[{data:e}],this.chart&&(this.chart.data.datasets=this.datasets)),this.updateColors()},e.prototype.isMultiDataSet=function(e){return Array.isArray(e[0])},e.prototype.getDatasets=function(){if(!this.datasets&&!this.data)throw new Error("ng-charts configuration error, data or datasets field are required to render chart "+this.chartType);return this.datasets?(this.propagateDatasetsToData(this.datasets),this.datasets):this.data?(this.propagateDataToDatasets(this.data),this.datasets):void 0},e.prototype.refresh=function(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.ctx&&(this.chart=this.getChartBuilder(this.ctx))},e}(),we=function(){return function(){}}(),Le=n("qb46"),Ie=[{label:"Angular",value:10},{label:"React/Next.js",value:10},{label:"Vue/Nuxt.js",value:10},{label:"Firebase",value:10},{label:"HTML/CSS/JS",value:10},{label:"\u958b\u767a\u901f\u5ea6",value:10},{label:"Node.js",value:8},{label:"\u30de\u30cd\u30b8\u30e1\u30f3\u30c8",value:7},{label:"\u30c7\u30b6\u30a4\u30f3",value:3},{label:"Flutter",value:2},{label:"\u6a5f\u68b0\u5b66\u7fd2",value:1},{label:"Swift/Kotlin",value:1}],Fe=function(){function e(){this.barChartOptions={responsive:!0,scales:{xAxes:[{display:!1}],yAxes:[{maxBarThickness:40,ticks:{fontColor:"#38839799"}}]},legend:{display:!1},layout:{padding:{right:24}},plugins:{datalabels:{anchor:"end",align:"end",color:"rgba(56, 131, 151, 0.38)"}}},this.barChartLabels=Ie.map(function(e){return e.label}),this.barChartPlugins=[Le],this.barChartData=[{data:Ie.map(function(e){return e.value}),label:"\u30b9\u30ad\u30eb",backgroundColor:"rgba(56, 131, 151, 0.6)"}]}return e.prototype.ngOnInit=function(){},e.prototype.chartClicked=function(e){console.log(e.event,e.active)},e.prototype.chartHovered=function(e){console.log(e.event,e.active)},e}(),Ne=r["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{bottom:272px;right:16px;width:400px;padding:16px;border:1px solid rgba(56,131,151,.3);box-shadow:0 0 24px rgba(56,131,151,.1);box-sizing:border-box;background:rgba(56,131,151,.01);transform:scale(1)}.hide[_nghost-%COMP%]{transform:scale(0)}canvas[_ngcontent-%COMP%]{height:100%}"]],data:{}});function Be(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"canvas",[["baseChart",""],["chartType","horizontalBar"],["height","192"]],null,null,null,null,null)),r["\u0275did"](1,999424,null,0,Oe,[r.ElementRef,Re],{datasets:[0,"datasets"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"],plugins:[4,"plugins"]},null)],function(e,t){var n=t.component;e(t,1,0,n.barChartData,n.barChartLabels,n.barChartOptions,"horizontalBar",n.barChartPlugins)},null)}var ke=function(){function e(e){this.consoleService=e,this.logs$=this.consoleService.log$}return e.prototype.ngOnInit=function(){},e}(),Ue=function(){function e(){this.logs=[],this.logSource=new J,this.log$=this.logSource.asObservable()}return e.prototype.addLog=function(e){this.logs.unshift({createdAt:new Date,message:e}),this.logSource.next(this.logs)},e.prototype.clearLogs=function(){this.logs=[],this.logSource.next(this.logs)},e.ngInjectableDef=r["\u0275\u0275defineInjectable"]({factory:function(){return new e},token:e,providedIn:"root"}),e}(),Ve=r["\u0275crt"]({encapsulation:0,styles:[['[_nghost-%COMP%]{width:400px;padding:16px;max-height:240px;overflow:auto;border:1px solid rgba(56,131,151,.3);box-shadow:0 0 24px rgba(56,131,151,.1);box-sizing:border-box;background:rgba(0,0,0,.3);transform:translate(calc(50vw - 50%),calc(100vh - 100% - 16px)) scale(1)}.hide[_nghost-%COMP%]{transform:scale(0)}.log[_ngcontent-%COMP%]{font-size:11px;color:rgba(56,131,151,.6);display:flex}.log__date[_ngcontent-%COMP%]:after{content:":";margin-right:8px}.log__message[_ngcontent-%COMP%]{flex:1}']],data:{}});function Ge(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,5,"p",[["class","log"]],null,null,null,null,null)),(e()(),r["\u0275eld"](1,0,null,null,2,"span",[["class","log__date"]],null,null,null,null,null)),(e()(),r["\u0275ted"](2,null,["",""])),r["\u0275ppd"](3,2),(e()(),r["\u0275eld"](4,0,null,null,1,"span",[["class","log__message"]],null,null,null,null,null)),(e()(),r["\u0275ted"](5,null,["",""]))],null,function(e,t){var n=r["\u0275unv"](t,2,0,e(t,3,0,r["\u0275nov"](t.parent,0),t.context.$implicit.createdAt,"yyyy.MM.dd HH:mm:ss"));e(t,2,0,n),e(t,5,0,t.context.$implicit.message)})}function je(e){return r["\u0275vid"](0,[r["\u0275pid"](0,c.DatePipe,[r.LOCALE_ID]),(e()(),r["\u0275and"](16777216,null,null,2,null,Ge)),r["\u0275did"](2,278528,null,0,c.NgForOf,[r.ViewContainerRef,r.TemplateRef,r.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),r["\u0275pid"](131072,c.AsyncPipe,[r.ChangeDetectorRef])],function(e,t){var n=t.component;e(t,2,0,r["\u0275unv"](t,2,0,r["\u0275nov"](t,3).transform(n.logs$)))},null)}var ze=function(){function e(){this.command=new r.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.submit=function(e){e&&this.command.emit(e)},e.prototype.focus=function(e){e.focus()},e}(),Ye=r["\u0275crt"]({encapsulation:0,styles:[["[_nghost-%COMP%]{position:fixed;bottom:560px;left:16px;display:block}input[_ngcontent-%COMP%]{border:1px solid rgba(56,131,151,.6);box-shadow:0 0 24px rgba(56,131,151,.1);font-size:14px;text-shadow:0 0 2px rgba(56,131,151,.3);background:rgba(0,0,0,.38);color:rgba(56,131,151,.6);outline:0;padding:12px 16px;width:320px;box-sizing:border-box}"]],data:{}});function He(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,[["elm",1]],null,0,"input",[["autofocus",""],["type","text"]],null,[[null,"keydown.enter"],[null,"keydown.esc"],[null,"blur"]],function(e,t,n){var i=!0,o=e.component;return"keydown.enter"===t&&(o.submit(r["\u0275nov"](e,0).value),i=!1!==(r["\u0275nov"](e,0).value="")&&i),"keydown.esc"===t&&(i=!1!==(r["\u0275nov"](e,0).value="")&&i),"blur"===t&&(i=!1!==o.focus(r["\u0275nov"](e,0))&&i),i},null,null))],null,null)}var We=r["\u0275crt"]({encapsulation:0,styles:[[".canvas[_ngcontent-%COMP%]{position:relative;z-index:1}.ui[_ngcontent-%COMP%]{display:block;transition:.6s;position:fixed}.ui.hide[_ngcontent-%COMP%]{opacity:0}.ui.zoom[_ngcontent-%COMP%]{transform:translate(calc(50vw - 50%),calc(50vh - 50%)) scale(3);right:auto;bottom:auto;z-index:1000}"]],data:{}});function Xe(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,16,"div",[["class","canvas"]],null,null,null,null,null)),(e()(),r["\u0275eld"](1,0,null,null,1,"app-three-model",[["class","ui"]],null,null,null,l,u)),r["\u0275did"](2,114688,null,0,s,[],null,null),(e()(),r["\u0275eld"](3,0,null,null,1,"app-tools",[],null,[[null,"msg"]],function(e,t,n){var r=!0;return"msg"===t&&(r=!1!==e.component.actionWithVoice(n)&&r),r},N,L)),r["\u0275did"](4,114688,null,0,h,[O],null,{msg:"msg"}),(e()(),r["\u0275eld"](5,0,null,null,1,"app-time",[["class","ui"]],[[2,"hide",null]],null,null,U,k)),r["\u0275did"](6,114688,null,0,B,[],null,null),(e()(),r["\u0275eld"](7,0,null,null,1,"app-youtube",[["class","ui"]],[[2,"zoom",null],[2,"hide",null]],null,null,he,ce)),r["\u0275did"](8,114688,null,0,le,[],null,null),(e()(),r["\u0275eld"](9,0,null,null,1,"app-timeline",[["class","ui"]],[[2,"hide",null]],null,null,ye,ve)),r["\u0275did"](10,4308992,null,0,ge,[],null,null),(e()(),r["\u0275eld"](11,0,null,null,1,"app-skill-chart",[["class","ui"]],[[2,"hide",null]],null,null,Be,Ne)),r["\u0275did"](12,114688,null,0,Fe,[],null,null),(e()(),r["\u0275eld"](13,0,null,null,1,"app-console",[["class","ui"]],[[2,"hide",null]],null,null,je,Ve)),r["\u0275did"](14,114688,null,0,ke,[Ue],null,null),(e()(),r["\u0275eld"](15,0,null,null,1,"app-command",[],null,[[null,"command"]],function(e,t,n){var r=!0;return"command"===t&&(r=!1!==e.component.actionWithCommand(n)&&r),r},He,Ye)),r["\u0275did"](16,114688,null,0,ze,[],null,{command:"command"})],function(e,t){e(t,2,0),e(t,4,0),e(t,6,0),e(t,8,0),e(t,10,0),e(t,12,0),e(t,14,0),e(t,16,0)},function(e,t){var n=t.component;e(t,5,0,!n.uiStatus.time),e(t,7,0,"youtube"===n.zoom,!n.uiStatus.youtube),e(t,9,0,!n.uiStatus.timeline),e(t,11,0,!n.uiStatus.skill),e(t,13,0,!n.uiStatus.console)})}function Ke(e){return r["\u0275vid"](0,[(e()(),r["\u0275eld"](0,0,null,null,1,"app-root",[],null,null,null,Xe,We)),r["\u0275did"](1,49152,null,0,o,[Ue],null,null)],null,null)}var Qe=r["\u0275ccf"]("app-root",o,Ke,{},{},[]),qe=n("ZYjt"),Ze=n("psW0"),Je=n("67Y/"),$e=function(){return function(){}}(),et=function(){return function(){}}(),tt=function(){function e(e){var t=this;this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?function(){t.headers=new Map,e.split("\n").forEach(function(e){var n=e.indexOf(":");if(n>0){var r=e.slice(0,n),i=r.toLowerCase(),o=e.slice(n+1).trim();t.maybeSetNormalizedName(r,i),t.headers.has(i)?t.headers.get(i).push(o):t.headers.set(i,[o])}})}:function(){t.headers=new Map,Object.keys(e).forEach(function(n){var r=e[n],i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(t.headers.set(i,r),t.maybeSetNormalizedName(n,i))})}:this.headers=new Map}return e.prototype.has=function(e){return this.init(),this.headers.has(e.toLowerCase())},e.prototype.get=function(e){this.init();var t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null},e.prototype.keys=function(){return this.init(),Array.from(this.normalizedNames.values())},e.prototype.getAll=function(e){return this.init(),this.headers.get(e.toLowerCase())||null},e.prototype.append=function(e,t){return this.clone({name:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({name:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({name:e,value:t,op:"d"})},e.prototype.maybeSetNormalizedName=function(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)},e.prototype.init=function(){var t=this;this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(function(e){return t.applyUpdate(e)}),this.lazyUpdate=null))},e.prototype.copyFrom=function(e){var t=this;e.init(),Array.from(e.headers.keys()).forEach(function(n){t.headers.set(n,e.headers.get(n)),t.normalizedNames.set(n,e.normalizedNames.get(n))})},e.prototype.clone=function(t){var n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n},e.prototype.applyUpdate=function(e){var t=e.name.toLowerCase();switch(e.op){case"a":case"s":var n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);var r=("a"===e.op?this.headers.get(t):void 0)||[];r.push.apply(r,Object(f.__spread)(n)),this.headers.set(t,r);break;case"d":var i=e.value;if(i){var o=this.headers.get(t);if(!o)return;0===(o=o.filter(function(e){return-1===i.indexOf(e)})).length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}},e.prototype.forEach=function(e){var t=this;this.init(),Array.from(this.normalizedNames.keys()).forEach(function(n){return e(t.normalizedNames.get(n),t.headers.get(n))})},e}(),nt=function(){function e(){}return e.prototype.encodeKey=function(e){return rt(e)},e.prototype.encodeValue=function(e){return rt(e)},e.prototype.decodeKey=function(e){return decodeURIComponent(e)},e.prototype.decodeValue=function(e){return decodeURIComponent(e)},e}();function rt(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}var it=function(){function e(e){var t,n,r,i=this;if(void 0===e&&(e={}),this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new nt,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=(t=e.fromString,n=this.encoder,r=new Map,t.length>0&&t.split("&").forEach(function(e){var t=e.indexOf("="),i=Object(f.__read)(-1==t?[n.decodeKey(e),""]:[n.decodeKey(e.slice(0,t)),n.decodeValue(e.slice(t+1))],2),o=i[0],a=i[1],s=r.get(o)||[];s.push(a),r.set(o,s)}),r)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(function(t){var n=e.fromObject[t];i.map.set(t,Array.isArray(n)?n:[n])})):this.map=null}return e.prototype.has=function(e){return this.init(),this.map.has(e)},e.prototype.get=function(e){this.init();var t=this.map.get(e);return t?t[0]:null},e.prototype.getAll=function(e){return this.init(),this.map.get(e)||null},e.prototype.keys=function(){return this.init(),Array.from(this.map.keys())},e.prototype.append=function(e,t){return this.clone({param:e,value:t,op:"a"})},e.prototype.set=function(e,t){return this.clone({param:e,value:t,op:"s"})},e.prototype.delete=function(e,t){return this.clone({param:e,value:t,op:"d"})},e.prototype.toString=function(){var e=this;return this.init(),this.keys().map(function(t){var n=e.encoder.encodeKey(t);return e.map.get(t).map(function(t){return n+"="+e.encoder.encodeValue(t)}).join("&")}).join("&")},e.prototype.clone=function(t){var n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat([t]),n},e.prototype.init=function(){var e=this;null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(function(t){return e.map.set(t,e.cloneFrom.map.get(t))}),this.updates.forEach(function(t){switch(t.op){case"a":case"s":var n=("a"===t.op?e.map.get(t.param):void 0)||[];n.push(t.value),e.map.set(t.param,n);break;case"d":if(void 0===t.value){e.map.delete(t.param);break}var r=e.map.get(t.param)||[],i=r.indexOf(t.value);-1!==i&&r.splice(i,1),r.length>0?e.map.set(t.param,r):e.map.delete(t.param)}}),this.cloneFrom=this.updates=null)},e}();function ot(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer}function at(e){return"undefined"!=typeof Blob&&e instanceof Blob}function st(e){return"undefined"!=typeof FormData&&e instanceof FormData}var ut=function(){function e(e,t,n,r){var i;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new tt),this.params){var o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{var a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new it,this.urlWithParams=t}return e.prototype.serializeBody=function(){return null===this.body?null:ot(this.body)||at(this.body)||st(this.body)||"string"==typeof this.body?this.body:this.body instanceof it?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()},e.prototype.detectContentTypeHeader=function(){return null===this.body?null:st(this.body)?null:at(this.body)?this.body.type||null:ot(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof it?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null},e.prototype.clone=function(t){void 0===t&&(t={});var n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress,u=t.headers||this.headers,l=t.params||this.params;return void 0!==t.setHeaders&&(u=Object.keys(t.setHeaders).reduce(function(e,n){return e.set(n,t.setHeaders[n])},u)),t.setParams&&(l=Object.keys(t.setParams).reduce(function(e,n){return e.set(n,t.setParams[n])},l)),new e(n,r,o,{params:l,headers:u,reportProgress:s,responseType:i,withCredentials:a})},e}(),lt=function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e}({}),ct=function(){return function(e,t,n){void 0===t&&(t=200),void 0===n&&(n="OK"),this.headers=e.headers||new tt,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}(),ht=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=lt.ResponseHeader,n}return Object(f.__extends)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(ct),dt=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.type=lt.Response,n.body=void 0!==t.body?t.body:null,n}return Object(f.__extends)(t,e),t.prototype.clone=function(e){return void 0===e&&(e={}),new t({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})},t}(ct),ft=function(e){function t(t){var n=e.call(this,t,0,"Unknown Error")||this;return n.name="HttpErrorResponse",n.ok=!1,n.message=n.status>=200&&n.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):"Http failure response for "+(t.url||"(unknown url)")+": "+t.status+" "+t.statusText,n.error=t.error||null,n}return Object(f.__extends)(t,e),t}(ct);function pt(e,t){return{body:t,headers:e.headers,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}var _t=function(){function e(e){this.handler=e}return e.prototype.request=function(e,t,n){var r,i=this;if(void 0===n&&(n={}),e instanceof ut)r=e;else{var o;o=n.headers instanceof tt?n.headers:new tt(n.headers);var a=void 0;n.params&&(a=n.params instanceof it?n.params:new it({fromObject:n.params})),r=new ut(e,t,void 0!==n.body?n.body:null,{headers:o,params:a,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}var s,u=X(r).pipe((s=function(e){return i.handler.handle(e)},Object(Ze.a)(s,void 0,1)));if(e instanceof ut||"events"===n.observe)return u;var l,c=u.pipe((l=function(e){return e instanceof dt},function(e){return e.lift(new R(l,void 0))}));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return c.pipe(Object(Je.a)(function(e){if(null!==e.body&&!(e.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return e.body}));case"blob":return c.pipe(Object(Je.a)(function(e){if(null!==e.body&&!(e.body instanceof Blob))throw new Error("Response is not a Blob.");return e.body}));case"text":return c.pipe(Object(Je.a)(function(e){if(null!==e.body&&"string"!=typeof e.body)throw new Error("Response is not a string.");return e.body}));case"json":default:return c.pipe(Object(Je.a)(function(e){return e.body}))}case"response":return c;default:throw new Error("Unreachable: unhandled observe type "+n.observe+"}")}},e.prototype.delete=function(e,t){return void 0===t&&(t={}),this.request("DELETE",e,t)},e.prototype.get=function(e,t){return void 0===t&&(t={}),this.request("GET",e,t)},e.prototype.head=function(e,t){return void 0===t&&(t={}),this.request("HEAD",e,t)},e.prototype.jsonp=function(e,t){return this.request("JSONP",e,{params:(new it).append(t,"JSONP_CALLBACK"),observe:"body",responseType:"json"})},e.prototype.options=function(e,t){return void 0===t&&(t={}),this.request("OPTIONS",e,t)},e.prototype.patch=function(e,t,n){return void 0===n&&(n={}),this.request("PATCH",e,pt(n,t))},e.prototype.post=function(e,t,n){return void 0===n&&(n={}),this.request("POST",e,pt(n,t))},e.prototype.put=function(e,t,n){return void 0===n&&(n={}),this.request("PUT",e,pt(n,t))},e}(),mt=function(){function e(e,t){this.next=e,this.interceptor=t}return e.prototype.handle=function(e){return this.interceptor.intercept(e,this.next)},e}(),gt=new r.InjectionToken("HTTP_INTERCEPTORS"),vt=function(){function e(){}return e.prototype.intercept=function(e,t){return t.handle(e)},e}(),yt=/^\)\]\}',?\n/,bt=function(){return function(){}}(),Tt=function(){function e(){}return e.prototype.build=function(){return new XMLHttpRequest},e}(),Et=function(){function e(e){this.xhrFactory=e}return e.prototype.handle=function(e){var t=this;if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without JsonpClientModule installed.");return new j.a(function(n){var r=t.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach(function(e,t){return r.setRequestHeader(e,t.join(","))}),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){var i=e.detectContentTypeHeader();null!==i&&r.setRequestHeader("Content-Type",i)}if(e.responseType){var o=e.responseType.toLowerCase();r.responseType="json"!==o?o:"text"}var a=e.serializeBody(),s=null,u=function(){if(null!==s)return s;var t=1223===r.status?204:r.status,n=r.statusText||"OK",i=new tt(r.getAllResponseHeaders()),o=function(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(r)||e.url;return s=new ht({headers:i,status:t,statusText:n,url:o})},l=function(){var t=u(),i=t.headers,o=t.status,a=t.statusText,s=t.url,l=null;204!==o&&(l=void 0===r.response?r.responseText:r.response),0===o&&(o=l?200:0);var c=o>=200&&o<300;if("json"===e.responseType&&"string"==typeof l){var h=l;l=l.replace(yt,"");try{l=""!==l?JSON.parse(l):null}catch(d){l=h,c&&(c=!1,l={error:d,text:l})}}c?(n.next(new dt({body:l,headers:i,status:o,statusText:a,url:s||void 0})),n.complete()):n.error(new ft({error:l,headers:i,status:o,statusText:a,url:s||void 0}))},c=function(e){var t=u().url,i=new ft({error:e,status:r.status||0,statusText:r.statusText||"Unknown Error",url:t||void 0});n.error(i)},h=!1,d=function(t){h||(n.next(u()),h=!0);var i={type:lt.DownloadProgress,loaded:t.loaded};t.lengthComputable&&(i.total=t.total),"text"===e.responseType&&r.responseText&&(i.partialText=r.responseText),n.next(i)},f=function(e){var t={type:lt.UploadProgress,loaded:e.loaded};e.lengthComputable&&(t.total=e.total),n.next(t)};return r.addEventListener("load",l),r.addEventListener("error",c),e.reportProgress&&(r.addEventListener("progress",d),null!==a&&r.upload&&r.upload.addEventListener("progress",f)),r.send(a),n.next({type:lt.Sent}),function(){r.removeEventListener("error",c),r.removeEventListener("load",l),e.reportProgress&&(r.removeEventListener("progress",d),null!==a&&r.upload&&r.upload.removeEventListener("progress",f)),r.abort()}})},e}(),xt=new r.InjectionToken("XSRF_COOKIE_NAME"),Mt=new r.InjectionToken("XSRF_HEADER_NAME"),At=function(){return function(){}}(),St=function(){function e(e,t,n){this.doc=e,this.platform=t,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}return e.prototype.getToken=function(){if("server"===this.platform)return null;var e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Object(c["\u0275parseCookieValue"])(e,this.cookieName),this.lastCookieString=e),this.lastToken},e}(),Ct=function(){function e(e,t){this.tokenService=e,this.headerName=t}return e.prototype.intercept=function(e,t){var n=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||n.startsWith("http://")||n.startsWith("https://"))return t.handle(e);var r=this.tokenService.getToken();return null===r||e.headers.has(this.headerName)||(e=e.clone({headers:e.headers.set(this.headerName,r)})),t.handle(e)},e}(),Pt=function(){function e(e,t){this.backend=e,this.injector=t,this.chain=null}return e.prototype.handle=function(e){if(null===this.chain){var t=this.injector.get(gt,[]);this.chain=t.reduceRight(function(e,t){return new mt(e,t)},this.backend)}return this.chain.handle(e)},e}(),Rt=function(){function e(){}var t;return t=e,e.disable=function(){return{ngModule:t,providers:[{provide:Ct,useClass:vt}]}},e.withOptions=function(e){return void 0===e&&(e={}),{ngModule:t,providers:[e.cookieName?{provide:xt,useValue:e.cookieName}:[],e.headerName?{provide:Mt,useValue:e.headerName}:[]]}},e}(),Dt=function(){return function(){}}(),Ot=n("oo/x"),wt=r["\u0275cmf"](i,[o],function(e){return r["\u0275mod"]([r["\u0275mpd"](512,r.ComponentFactoryResolver,r["\u0275CodegenComponentFactoryResolver"],[[8,[Qe]],[3,r.ComponentFactoryResolver],r.NgModuleRef]),r["\u0275mpd"](5120,r.LOCALE_ID,r["\u0275angular_packages_core_core_q"],[[3,r.LOCALE_ID]]),r["\u0275mpd"](4608,c.NgLocalization,c.NgLocaleLocalization,[r.LOCALE_ID,[2,c["\u0275angular_packages_common_common_a"]]]),r["\u0275mpd"](5120,r["\u0275angular_packages_core_core_bb"],r["\u0275angular_packages_core_core_s"],[r.NgZone]),r["\u0275mpd"](4608,r.Compiler,r.Compiler,[]),r["\u0275mpd"](5120,r.APP_ID,r["\u0275angular_packages_core_core_f"],[]),r["\u0275mpd"](5120,r.IterableDiffers,r["\u0275angular_packages_core_core_o"],[]),r["\u0275mpd"](5120,r.KeyValueDiffers,r["\u0275angular_packages_core_core_p"],[]),r["\u0275mpd"](4608,qe.DomSanitizer,qe["\u0275DomSanitizerImpl"],[c.DOCUMENT]),r["\u0275mpd"](6144,r.Sanitizer,null,[qe.DomSanitizer]),r["\u0275mpd"](4608,qe.HAMMER_GESTURE_CONFIG,qe.HammerGestureConfig,[]),r["\u0275mpd"](5120,qe.EVENT_MANAGER_PLUGINS,function(e,t,n,r,i,o,a,s){return[new qe["\u0275DomEventsPlugin"](e,t,n),new qe["\u0275KeyEventsPlugin"](r),new qe["\u0275HammerGesturesPlugin"](i,o,a,s)]},[c.DOCUMENT,r.NgZone,r.PLATFORM_ID,c.DOCUMENT,c.DOCUMENT,qe.HAMMER_GESTURE_CONFIG,r["\u0275Console"],[2,qe.HAMMER_LOADER]]),r["\u0275mpd"](4608,qe.EventManager,qe.EventManager,[qe.EVENT_MANAGER_PLUGINS,r.NgZone]),r["\u0275mpd"](135680,qe["\u0275DomSharedStylesHost"],qe["\u0275DomSharedStylesHost"],[c.DOCUMENT]),r["\u0275mpd"](4608,qe["\u0275DomRendererFactory2"],qe["\u0275DomRendererFactory2"],[qe.EventManager,qe["\u0275DomSharedStylesHost"],r.APP_ID]),r["\u0275mpd"](6144,r.RendererFactory2,null,[qe["\u0275DomRendererFactory2"]]),r["\u0275mpd"](6144,qe["\u0275SharedStylesHost"],null,[qe["\u0275DomSharedStylesHost"]]),r["\u0275mpd"](4608,r.Testability,r.Testability,[r.NgZone]),r["\u0275mpd"](135680,O,O,[r.NgZone,"SPEECH_LANG"]),r["\u0275mpd"](4608,At,St,[c.DOCUMENT,r.PLATFORM_ID,xt]),r["\u0275mpd"](4608,Ct,Ct,[At,Mt]),r["\u0275mpd"](5120,gt,function(e){return[e]},[Ct]),r["\u0275mpd"](4608,Tt,Tt,[]),r["\u0275mpd"](6144,bt,null,[Tt]),r["\u0275mpd"](4608,Et,Et,[bt]),r["\u0275mpd"](6144,et,null,[Et]),r["\u0275mpd"](4608,$e,Pt,[et,r.Injector]),r["\u0275mpd"](4608,_t,_t,[$e]),r["\u0275mpd"](4608,ie,ie,[r.NgZone]),r["\u0275mpd"](1073742336,c.CommonModule,c.CommonModule,[]),r["\u0275mpd"](1024,r.ErrorHandler,qe["\u0275angular_packages_platform_browser_platform_browser_a"],[]),r["\u0275mpd"](1024,r.APP_INITIALIZER,function(e){return[qe["\u0275angular_packages_platform_browser_platform_browser_j"](e)]},[[2,r.NgProbeToken]]),r["\u0275mpd"](512,r.ApplicationInitStatus,r.ApplicationInitStatus,[[2,r.APP_INITIALIZER]]),r["\u0275mpd"](131584,r.ApplicationRef,r.ApplicationRef,[r.NgZone,r["\u0275Console"],r.Injector,r.ErrorHandler,r.ComponentFactoryResolver,r.ApplicationInitStatus]),r["\u0275mpd"](1073742336,r.ApplicationModule,r.ApplicationModule,[r.ApplicationRef]),r["\u0275mpd"](1073742336,qe.BrowserModule,qe.BrowserModule,[[3,qe.BrowserModule]]),r["\u0275mpd"](1073742336,Ot.SafePipeModule,Ot.SafePipeModule,[]),r["\u0275mpd"](1073742336,w,w,[]),r["\u0275mpd"](1073742336,pe,pe,[]),r["\u0275mpd"](1073742336,Rt,Rt,[]),r["\u0275mpd"](1073742336,Dt,Dt,[]),r["\u0275mpd"](1073742336,we,we,[]),r["\u0275mpd"](1073742336,ae,ae,[]),r["\u0275mpd"](1073742336,i,i,[]),r["\u0275mpd"](256,r["\u0275APP_ROOT"],!0,[]),r["\u0275mpd"](256,"SPEECH_LANG","ja-JP",[]),r["\u0275mpd"](256,xt,"XSRF-TOKEN",[]),r["\u0275mpd"](256,Mt,"X-XSRF-TOKEN",[])])});Object(r.enableProdMode)(),qe.platformBrowser().bootstrapModuleFactory(wt).catch(function(e){return console.error(e)})},zavE:function(e,t,n){!function(e){"use strict";n("wd/R").defineLocale("en-SG",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY HH:mm",LLLL:"dddd, D MMMM YYYY HH:mm"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},dayOfMonthOrdinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}()},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"},zotm:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("rPjj"),i=n("Fxb1");function o(e,t,n,o,a){if(void 0===a&&(a=new r.a(e,n,o)),!a.closed)return Object(i.a)(t)(a)}},zx6S:function(e,t,n){!function(e){"use strict";var t={words:{ss:["sekunda","sekunde","sekundi"],m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("sr",{months:"januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.".split("_"),monthsParseExact:!0,weekdays:"nedelja_ponedeljak_utorak_sreda_\u010detvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sre._\u010det._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_\u010de_pe_su".split("_"),weekdaysParseExact:!0,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY H:mm",LLLL:"dddd, D. MMMM YYYY H:mm"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[ju\u010de u] LT",lastWeek:function(){return["[pro\u0161le] [nedelje] [u] LT","[pro\u0161log] [ponedeljka] [u] LT","[pro\u0161log] [utorka] [u] LT","[pro\u0161le] [srede] [u] LT","[pro\u0161log] [\u010detvrtka] [u] LT","[pro\u0161log] [petka] [u] LT","[pro\u0161le] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",ss:t.translate,m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},dayOfMonthOrdinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(n("wd/R"))}},[[0,0]]]);